var testpage =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/ 		var executeModules = data[2];
/******/
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 		// add entry modules from loaded chunk to deferred list
/******/ 		deferredModules.push.apply(deferredModules, executeModules || []);
/******/
/******/ 		// run deferred modules when all chunks ready
/******/ 		return checkDeferredModules();
/******/ 	};
/******/ 	function checkDeferredModules() {
/******/ 		var result;
/******/ 		for(var i = 0; i < deferredModules.length; i++) {
/******/ 			var deferredModule = deferredModules[i];
/******/ 			var fulfilled = true;
/******/ 			for(var j = 1; j < deferredModule.length; j++) {
/******/ 				var depId = deferredModule[j];
/******/ 				if(installedChunks[depId] !== 0) fulfilled = false;
/******/ 			}
/******/ 			if(fulfilled) {
/******/ 				deferredModules.splice(i--, 1);
/******/ 				result = __webpack_require__(__webpack_require__.s = deferredModule[0]);
/******/ 			}
/******/ 		}
/******/
/******/ 		return result;
/******/ 	}
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		"testpage": 0
/******/ 	};
/******/
/******/ 	var deferredModules = [];
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	var jsonpArray = window["webpackJsonp_name_"] = window["webpackJsonp_name_"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// add entry module to deferred list
/******/ 	deferredModules.push(["./src/test/testpage.tsx","vendors"]);
/******/ 	// run deferred modules when ready
/******/ 	return checkDeferredModules();
/******/ })
/************************************************************************/
/******/ ({

/***/ "./kedbackend/client.js":
/*!******************************!*\
  !*** ./kedbackend/client.js ***!
  \******************************/
/*! exports provided: KedBearerProvider, RestClient, HttpError, KedBackendClient, BatchRunner, createUUID, avoidSimultanousCalls, getGlobalId, computePredestinatedId, simpleDigest, buf2hex, updateArray, DocumentAccess, hasAccess */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/dist/js/ked-backend-client */ "./kedbackend/js/dist/js/ked-backend-client/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBearerProvider", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["KedBearerProvider"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RestClient", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["RestClient"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HttpError", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["HttpError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendClient", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["KedBackendClient"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BatchRunner", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["BatchRunner"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createUUID", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["createUUID"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "avoidSimultanousCalls", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["avoidSimultanousCalls"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getGlobalId", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["getGlobalId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "computePredestinatedId", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["computePredestinatedId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "simpleDigest", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["simpleDigest"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "buf2hex", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["buf2hex"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "updateArray", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["updateArray"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DocumentAccess", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["DocumentAccess"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "hasAccess", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["hasAccess"]; });



/***/ }),

/***/ "./kedbackend/clientweb.js":
/*!*********************************!*\
  !*** ./kedbackend/clientweb.js ***!
  \*********************************/
/*! exports provided: storage, WebServerBearerProvider, isomorphic, KedBackendClientWeb */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/dist/js/ked-backend-client-web */ "./kedbackend/js/dist/js/ked-backend-client-web/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "storage", function() { return _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__["storage"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "WebServerBearerProvider", function() { return _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__["WebServerBearerProvider"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isomorphic", function() { return _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__["isomorphic"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendClientWeb", function() { return _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__["KedBackendClientWeb"]; });



/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client-web/bearer-storage-sessionstorage.js":
/*!***************************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client-web/bearer-storage-sessionstorage.js ***!
  \***************************************************************************************/
/*! exports provided: BearerStorageSessionStorage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BearerStorageSessionStorage", function() { return BearerStorageSessionStorage; });
var BearerStorageSessionStorage = /** @class */ (function () {
    function BearerStorageSessionStorage() {
    }
    BearerStorageSessionStorage.prototype.save = function (id, tokenInfo) {
        sessionStorage.setItem("bearer-" + id, JSON.stringify(tokenInfo));
    };
    BearerStorageSessionStorage.prototype.load = function (id) {
        try {
            var json = sessionStorage.getItem("bearer-" + id);
            return Promise.resolve(json ? JSON.parse(json) : { token: null, expires: 0 });
        }
        catch (ex) {
            return Promise.resolve({ token: null, expires: 0 });
        }
    };
    return BearerStorageSessionStorage;
}());

//# sourceMappingURL=bearer-storage-sessionstorage.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client-web/hash-restorer.js":
/*!***********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client-web/hash-restorer.js ***!
  \***********************************************************************/
/*! exports provided: rememberHashLocation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rememberHashLocation", function() { return rememberHashLocation; });
var redirHash = sessionStorage.getItem("redir-hash");
if (redirHash)
    try {
        var _a = JSON.parse(redirHash), time = _a.time, hash = _a.hash;
        if (time && time > Date.now() - 60000) {
            sessionStorage.removeItem("redir-hash");
            location.hash = hash;
        }
    }
    catch (_) { }
function rememberHashLocation() {
    sessionStorage.setItem("redir-hash", JSON.stringify({ time: Date.now(), hash: location.hash }));
}
//# sourceMappingURL=hash-restorer.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client-web/index.js":
/*!***************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client-web/index.js ***!
  \***************************************************************/
/*! exports provided: storage, WebServerBearerProvider, isomorphic, KedBackendClientWeb */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "storage", function() { return storage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WebServerBearerProvider", function() { return WebServerBearerProvider; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isomorphic", function() { return isomorphic; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendClientWeb", function() { return KedBackendClientWeb; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ked-backend-client */ "./kedbackend/js/dist/js/ked-backend-client/index.js");
/* harmony import */ var _bearer_storage_sessionstorage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./bearer-storage-sessionstorage */ "./kedbackend/js/dist/js/ked-backend-client-web/bearer-storage-sessionstorage.js");
/* harmony import */ var _ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ked-backend-client/utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");
/* harmony import */ var _ked_model_migrator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ked-model-migrator */ "./kedbackend/js/dist/js/ked-model-migrator/index.js");
/* harmony import */ var _hash_restorer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./hash-restorer */ "./kedbackend/js/dist/js/ked-backend-client-web/hash-restorer.js");







Object(_ked_model_migrator__WEBPACK_IMPORTED_MODULE_4__["KedModelMigratorMixin"])(_ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["KedBackendClient"].prototype);
var storage = new _bearer_storage_sessionstorage__WEBPACK_IMPORTED_MODULE_2__["BearerStorageSessionStorage"]();
var timeOfPageLoad = Date.now();
var WebServerBearerProvider = /** @class */ (function () {
    function WebServerBearerProvider(tokenPath, tokenResponseMapper, tokenId) {
        this.tokenPath = tokenPath;
        this.tokenResponseMapper = tokenResponseMapper;
        this.tokenId = tokenId;
        this.tokenInfo = { token: null, expires: 0 };
        this.getBearer = Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_3__["avoidSimultanousCalls"])(this.getBearer.bind(this));
        this.refreshBearer = Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_3__["avoidSimultanousCalls"])(this.refreshBearer.bind(this));
    }
    WebServerBearerProvider.prototype.getBearer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!!this.tokenInfo.token) return [3 /*break*/, 2];
                        if (!this.tokenId) return [3 /*break*/, 2];
                        _a = this;
                        return [4 /*yield*/, storage.load(this.tokenId)];
                    case 1:
                        _a.tokenInfo = _b.sent();
                        _b.label = 2;
                    case 2:
                        if (!(this.tokenInfo.expires < Date.now())) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.refreshBearer()];
                    case 3:
                        _b.sent();
                        _b.label = 4;
                    case 4: return [2 /*return*/, this.tokenInfo];
                }
            });
        });
    };
    WebServerBearerProvider.prototype.refreshBearer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, _c, _d;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_e) {
                switch (_e.label) {
                    case 0: return [4 /*yield*/, fetch(this.tokenPath, {
                            headers: { Accept: "text/plain; application/json" },
                            redirect: 'manual',
                            cache: 'no-cache',
                            credentials: "same-origin"
                        })];
                    case 1:
                        res = _e.sent();
                        if (res.status === 302 || (!res.status && res.type === "opaqueredirect")) {
                            // User session timed out and server wants to redirect entire page to login page
                            // Time to reload current page to force a redirect of the entire page instead for
                            // just redirecting to /api/token or whatever.
                            if (Date.now() - timeOfPageLoad > 60000) { // prohibit endless loop of reloading self.
                                this.wantsRedirect = true; // So that listeners to onbeforeunload could show alternate message.
                                console.log("Redirect wanted. Reload page.");
                                Object(_hash_restorer__WEBPACK_IMPORTED_MODULE_5__["rememberHashLocation"])();
                                window.location.reload(true);
                                throw new _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"](302, "Redirected");
                            }
                        }
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = Error.bind;
                        _b = "HTTP" + res.status + " ";
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(Error, [void 0, _b + (_e.sent())]))();
                    case 3:
                        _c = this;
                        _d = this.tokenResponseMapper;
                        return [4 /*yield*/, res.text()];
                    case 4:
                        _c.tokenInfo = _d.apply(this, [_e.sent()]);
                        storage.save(this.tokenId, this.tokenInfo);
                        return [2 /*return*/, this.tokenInfo];
                }
            });
        });
    };
    return WebServerBearerProvider;
}());

var isomorphic = { fetch: fetch.bind(self), btoa: btoa.bind(self) };
var KedBackendClientWeb = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](KedBackendClientWeb, _super);
    function KedBackendClientWeb(apiBaseUrl, providerOrTokenPath, options) {
        var _this = this;
        var bearerProvider = typeof providerOrTokenPath !== 'string' ?
            providerOrTokenPath :
            new WebServerBearerProvider(providerOrTokenPath, (options && options.tokenResponseMapper) || (function (x) { return ({ token: x, expires: Date.now() + 59 * 60 * 60 }); }), options && options.tokenId);
        _this = _super.call(this, isomorphic, bearerProvider, apiBaseUrl) || this;
        return _this;
    }
    return KedBackendClientWeb;
}(_ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["KedBackendClient"]));

//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/access-control.js":
/*!********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/access-control.js ***!
  \********************************************************************/
/*! exports provided: DocumentAccess, hasAccess */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DocumentAccess", function() { return DocumentAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasAccess", function() { return hasAccess; });
var DocumentAccess = /** @class */ (function () {
    function DocumentAccess(accessClaimType, accessClaimValue, right) {
        this.accessClaimType = accessClaimType;
        this.accessClaimValue = accessClaimValue;
        this.right = right;
    }
    DocumentAccess.fromString = function (ac) {
        if (!ac)
            return null;
        var split = ac.split(':');
        if (split.length < 3)
            throw new Error("Invalid access string: " + ac);
        var claimType = DocumentAccess.unescape(split[0]);
        var claimValue = DocumentAccess.unescape(split[1]);
        var right = split[2];
        if (right !== 'R' && right !== 'W' && right !== 'S')
            throw new Error("Invalid access string: " + ac);
        return new DocumentAccess(claimType, claimValue, right);
    };
    DocumentAccess.escape = function (accessComponent) {
        return accessComponent.replace(/\%/g, "%25").replace(/\:/g, "%3A");
    };
    DocumentAccess.unescape = function (accessComponent) {
        return accessComponent.replace(/\%3A/g, ":").replace(/\%25/g, "%");
    };
    DocumentAccess.prototype.toString = function () {
        return DocumentAccess.escape(this.accessClaimType) + ":" +
            DocumentAccess.escape(this.accessClaimValue) + ":" +
            this.right;
    };
    DocumentAccess.fromStringArray = function (acl) {
        return acl
            .map(function (ac) { return DocumentAccess.fromString(ac); })
            .filter(function (ac) { return ac; });
    };
    DocumentAccess.toStringArray = function (acl) {
        return acl.map(function (ac) { return ac.toString(); });
    };
    return DocumentAccess;
}());

function hasAccess(acl, userClaims, requestedRight) {
    if (userClaims.some(function (claim) { return claim.type === 'role' && claim.value === "ADMIN"; }))
        return true;
    return acl.some(function (a) {
        return userClaims.some(function (c) {
            return a.accessClaimType === c.type &&
                a.accessClaimValue === c.value && ((a.right === 'R' && requestedRight === 'R') ||
                (a.right === 'W' && ['R', 'W'].indexOf(requestedRight) >= 0) ||
                (a.right === 'S'));
        });
    });
}
//# sourceMappingURL=access-control.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/http-error.js":
/*!****************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/http-error.js ***!
  \****************************************************************/
/*! exports provided: HttpError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HttpError", function() { return HttpError; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");

var HttpError = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](HttpError, _super);
    function HttpError(code, message) {
        var _this = _super.call(this, "HTTP" + code + " " + message) || this;
        _this.code = code;
        _this.message = message;
        _this.name = "http" + code;
        _this.message = "HTTP" + code + " " + message;
        return _this;
    }
    return HttpError;
}(Error));

//# sourceMappingURL=http-error.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/index.js":
/*!***********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/index.js ***!
  \***********************************************************/
/*! exports provided: KedBearerProvider, RestClient, HttpError, KedBackendClient, BatchRunner, createUUID, avoidSimultanousCalls, getGlobalId, computePredestinatedId, simpleDigest, buf2hex, updateArray, DocumentAccess, hasAccess */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendClient", function() { return KedBackendClient; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BatchRunner", function() { return BatchRunner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _restclient__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./restclient */ "./kedbackend/js/dist/js/ked-backend-client/restclient.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RestClient", function() { return _restclient__WEBPACK_IMPORTED_MODULE_1__["RestClient"]; });

/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createUUID", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["createUUID"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "avoidSimultanousCalls", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["avoidSimultanousCalls"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getGlobalId", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["getGlobalId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "computePredestinatedId", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["computePredestinatedId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "simpleDigest", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["simpleDigest"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "buf2hex", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["buf2hex"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "updateArray", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["updateArray"]; });

/* harmony import */ var _ked_bearer_provider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ked-bearer-provider */ "./kedbackend/js/dist/js/ked-backend-client/ked-bearer-provider.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBearerProvider", function() { return _ked_bearer_provider__WEBPACK_IMPORTED_MODULE_3__["KedBearerProvider"]; });

/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./access-control */ "./kedbackend/js/dist/js/ked-backend-client/access-control.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DocumentAccess", function() { return _access_control__WEBPACK_IMPORTED_MODULE_4__["DocumentAccess"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "hasAccess", function() { return _access_control__WEBPACK_IMPORTED_MODULE_4__["hasAccess"]; });

/* harmony import */ var _http_error__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./http-error */ "./kedbackend/js/dist/js/ked-backend-client/http-error.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HttpError", function() { return _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"]; });

/* empty/unused harmony star reexport */








;
// | 'otherFlag' | 'thirdFlag';...
var KedBackendClient = /** @class */ (function () {
    function KedBackendClient(isomorphic, bearerProvider, baseUrl) {
        this.http = new _restclient__WEBPACK_IMPORTED_MODULE_1__["RestClient"](isomorphic, baseUrl, { bearerProvider: bearerProvider });
    }
    KedBackendClient.prototype.getMyClaims = function (table, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("me/claims/" + (table || ""), null, fetchOptions)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.get = function (table, id, options, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get(table + "/" + id, options, fetchOptions)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.list = function (table, options, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var query, res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        query = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, options);
                        if (location.search.includes('useSP')) {
                            query.flags = (query.flags || []).concat(['useSP']);
                        }
                        if (options && options.mutationsOnEmpty)
                            query.mutationsOnEmpty = JSON.stringify(options.mutationsOnEmpty);
                        return [4 /*yield*/, this.http.get("" + table, query, fetchOptions)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.batch = function (reqs, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        // Reorder operations so that 'add's come first and 'delete's come last:
                        reqs = reqs.slice().sort(function (req1, req2) {
                            return req1.op === 'add' ? -1 : req2.op === 'add' ? 1 :
                                req1.op === 'delete' ? 1 : req2.op === 'delete' ? -1 : 0;
                        });
                        return [4 /*yield*/, this.http.post("batch", reqs, fetchOptions)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.do = function (scopeFn) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var runner;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        runner = new BatchRunner();
                        scopeFn(runner);
                        return [4 /*yield*/, this.batch(runner.mutationRequests)];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.deleteRealm = function (realm) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.delete("realms/" + realm)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.add = function (table, doc, branchId) {
        return this.do(function (r) { return r.add(table, doc); });
    };
    KedBackendClient.prototype.put = function (table, doc) {
        return this.do(function (r) { return r.put(table, doc); });
    };
    KedBackendClient.prototype.update = function (table, id, deltaDoc, branchId) {
        return this.do(function (r) { return r.update(table, id, deltaDoc, branchId); });
    };
    KedBackendClient.prototype.merge = function (branchId, targetBranchId) {
        return this.do(function (r) { return r.merge(branchId, targetBranchId); });
    };
    KedBackendClient.prototype.clearBranch = function (branchId) {
        return this.do(function (r) { return r.clearBranch(branchId); });
    };
    KedBackendClient.prototype.delete = function (table, id) {
        return this.do(function (r) { return r.delete(table, id); });
    };
    KedBackendClient.prototype.share = function (table, id, acl) {
        return this.do(function (r) { return r.share(table, id, acl); });
    };
    KedBackendClient.prototype.unshare = function (table, id, acl) {
        return this.do(function (r) { return r.unshare(table, id, acl); });
    };
    KedBackendClient.prototype.link = function (sourceTable, sourceId, targetTable, targetId, label) {
        return this.do(function (r) { return r.link(sourceTable, sourceId, targetTable, targetId, label); });
    };
    KedBackendClient.prototype.link2 = function (sourceTable, sourceId, targetId, label, branchId) {
        return this.do(function (r) { return r.link2(sourceTable, sourceId, label, targetId, branchId); });
    };
    KedBackendClient.prototype.unlink = function (sourceTable, sourceId, targetTable, targetId, label) {
        return this.do(function (r) { return r.unlink(sourceTable, sourceId, targetTable, targetId, label); });
    };
    KedBackendClient.prototype.unlink2 = function (sourceTable, sourceId, targetId, label, branchId) {
        return this.do(function (r) { return r.unlink2(sourceTable, sourceId, label, targetId, branchId); });
    };
    KedBackendClient.prototype.undoLink = function (sourceTable, sourceId, targetId, label, branchId) {
        return this.do(function (r) { return r.undoLink(sourceTable, sourceId, label, targetId, branchId); });
    };
    return KedBackendClient;
}());

var BatchRunner = /** @class */ (function () {
    function BatchRunner() {
        this.mutationRequests = [];
    }
    BatchRunner.prototype.add = function (table, doc, branchId) {
        this.mutationRequests.push({ op: 'add', table: table, doc: doc, branchId: branchId });
        return this;
    };
    BatchRunner.prototype.put = function (table, doc) {
        doc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc);
        delete doc.acl; // Forbidden to send acl with put() calls.
        this.mutationRequests.push({ op: 'put', table: table, doc: doc });
        return this;
    };
    BatchRunner.prototype.update = function (table, id, deltaDoc, branchId) {
        deltaDoc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, deltaDoc);
        this.mutationRequests.push({ op: 'update', table: table, id: id, deltaDoc: deltaDoc, branchId: branchId });
    };
    BatchRunner.prototype.merge = function (branchId, targetBranchId) {
        this.mutationRequests.push({ op: 'merge', branchId: branchId, targetBranchId: targetBranchId });
    };
    BatchRunner.prototype.clearBranch = function (branchId) {
        this.mutationRequests.push({ op: 'clear-branch', branchId: branchId });
    };
    BatchRunner.prototype.delete = function (table, id) {
        this.mutationRequests.push({ op: 'delete', table: table, id: id });
        return this;
    };
    BatchRunner.prototype.share = function (table, id, acl) {
        this.mutationRequests.push({ op: 'share', table: table, id: id, acl: acl });
        return this;
    };
    BatchRunner.prototype.unshare = function (table, id, acl) {
        this.mutationRequests.push({ op: 'unshare', table: table, id: id, acl: acl });
        return this;
    };
    BatchRunner.prototype.link = function (sourceTable, sourceId, targetTable, targetId, label) {
        this.mutationRequests.push({ op: 'link', sourceTable: sourceTable, sourceId: sourceId, targetTable: targetTable, targetId: targetId, label: label });
        return this;
    };
    BatchRunner.prototype.link2 = function (sourceTable, sourceId, label, targetId, branchId) {
        this.mutationRequests.push({ op: 'link', sourceTable: sourceTable, sourceId: sourceId, targetId: targetId, label: label, branchId: branchId });
    };
    BatchRunner.prototype.unlink = function (sourceTable, sourceId, targetTable, targetId, label) {
        this.mutationRequests.push({ op: 'unlink', sourceTable: sourceTable, sourceId: sourceId, targetTable: targetTable, targetId: targetId, label: label });
        return this;
    };
    BatchRunner.prototype.unlink2 = function (sourceTable, sourceId, label, targetId, branchId) {
        this.mutationRequests.push({ op: 'unlink', sourceTable: sourceTable, sourceId: sourceId, targetId: targetId, label: label, branchId: branchId });
        return this;
    };
    BatchRunner.prototype.undoLink = function (sourceTable, sourceId, label, targetId, branchId) {
        this.mutationRequests.push({ op: 'undo-link', sourceTable: sourceTable, sourceId: sourceId, targetId: targetId, label: label, branchId: branchId });
    };
    return BatchRunner;
}());

//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/ked-bearer-provider.js":
/*!*************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/ked-bearer-provider.js ***!
  \*************************************************************************/
/*! exports provided: KedBearerProvider */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBearerProvider", function() { return KedBearerProvider; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _restclient__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./restclient */ "./kedbackend/js/dist/js/ked-backend-client/restclient.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");



var KedBearerProvider = /** @class */ (function () {
    function KedBearerProvider(isomorphic, storage, tokenId, clientId, clientSecret, tokenUrl, tokenQuery) {
        this.isomorphic = isomorphic;
        this.storage = storage;
        this.tokenId = tokenId;
        this.clientId = clientId;
        this.clientSecret = clientSecret;
        this.tokenUrl = tokenUrl;
        this.tokenQuery = tokenQuery;
        this.tokenInfo = { token: null, expires: 0 };
        this.client = new _restclient__WEBPACK_IMPORTED_MODULE_1__["RestClient"](isomorphic, "", {
            username: this.clientId,
            password: this.clientSecret
        });
        this.getBearer = Object(_utils__WEBPACK_IMPORTED_MODULE_2__["avoidSimultanousCalls"])(this.getBearer.bind(this));
        this.refreshBearer = Object(_utils__WEBPACK_IMPORTED_MODULE_2__["avoidSimultanousCalls"])(this.refreshBearer.bind(this));
    }
    KedBearerProvider.prototype.getBearer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, token, expires, _b, e_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _a = this.tokenInfo, token = _a.token, expires = _a.expires;
                        if (token && expires >= Date.now())
                            return [2 /*return*/, this.tokenInfo];
                        _c.label = 1;
                    case 1:
                        _c.trys.push([1, 4, , 6]);
                        _b = this;
                        return [4 /*yield*/, this.storage.load(this.clientId + "/" + this.tokenId)];
                    case 2:
                        _b.tokenInfo = _c.sent();
                        if (this.tokenInfo.token && this.tokenInfo.expires >= Date.now())
                            return [2 /*return*/, this.tokenInfo];
                        return [4 /*yield*/, this.refreshBearer()];
                    case 3:
                        _c.sent();
                        return [2 /*return*/, this.tokenInfo];
                    case 4:
                        e_1 = _c.sent();
                        return [4 /*yield*/, this.refreshBearer()];
                    case 5:
                        _c.sent();
                        return [2 /*return*/, this.tokenInfo];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    KedBearerProvider.prototype.refreshBearer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, retries, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        retries = 0;
                        _c.label = 1;
                    case 1:
                        if (!(retries < 6)) return [3 /*break*/, 5];
                        console.log("Retrieving token for " + this.tokenId);
                        return [4 /*yield*/, this.client.get(this.tokenUrl, this.tokenQuery, { cache: 'reload' })];
                    case 2:
                        res = _c.sent();
                        if (res.status !== 200) {
                            console.warn("Got " + res.status + " " + res.statusText);
                            return [3 /*break*/, 4];
                        }
                        _a = this;
                        _b = {};
                        return [4 /*yield*/, res.text()];
                    case 3:
                        _a.tokenInfo = (_b.token = _c.sent(), _b.expires = Date.now() + 59 * 60 * 1000, _b);
                        console.log("Got token for " + this.tokenId + ": " + JSON.stringify(this.tokenInfo));
                        this.storage.save(this.clientId + "/" + this.tokenId, this.tokenInfo);
                        return [2 /*return*/, this.tokenInfo];
                    case 4:
                        ++retries;
                        return [3 /*break*/, 1];
                    case 5: throw new Error("Failed to retrieve token for " + JSON.stringify(this.tokenId));
                }
            });
        });
    };
    return KedBearerProvider;
}());

//# sourceMappingURL=ked-bearer-provider.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/restclient.js":
/*!****************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/restclient.js ***!
  \****************************************************************/
/*! exports provided: RestClient */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RestClient", function() { return RestClient; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");
/* harmony import */ var _observable_emitter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../observable/emitter */ "./kedbackend/js/dist/js/observable/emitter.js");
/*
declare var Buffer; // node built-in


function basicAuthHeader(username, password) {
    return "Basic " + new Buffer(username + ":" + password).toString("base64");
}
*/



var RestClient = /** @class */ (function () {
    function RestClient(isomorphic, baseUrl, options) {
        this.isomorphic = isomorphic;
        this.baseUrl = baseUrl;
        this.options = options;
        this.numOutstandingOperations = 0;
        this._status = new _observable_emitter__WEBPACK_IMPORTED_MODULE_2__["Emitter"](this);
        this.fetchOptions = { mode: 'cors' };
        this.authHeader = options.bearer ?
            "Bearer " + options.bearer :
            options.username ?
                "Basic " + isomorphic.btoa(options.username + ":" + (options.password || "")) :
                null;
        this.bearerProvider = options.bearerProvider || null;
    }
    Object.defineProperty(RestClient.prototype, "status", {
        get: function () {
            return this._status;
        },
        enumerable: true,
        configurable: true
    });
    RestClient.prototype.fetch = function (path, method, headers, query, fetchOptions) {
        var _this = this;
        ++this.numOutstandingOperations;
        this._status.dispatch(this);
        return this._fetch(path, method, headers, query, fetchOptions)
            .then(function (res) {
            --_this.numOutstandingOperations;
            _this._status.dispatch(_this);
            return res;
        }).catch(function (err) {
            --_this.numOutstandingOperations;
            _this._status.dispatch(_this);
            return Promise.reject(err);
        });
    };
    RestClient.prototype._fetch = function (path, method, headers, query, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var queryStr, _a, authHeader, tokenInfo, bearerProvider, _b, _c, url, res, wwwauth, _d;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_e) {
                switch (_e.label) {
                    case 0:
                        if (fetchOptions && fetchOptions.cache === 'no-cache') {
                            // Workaround for back-button not respecting cache control in Chrome/Opera.
                            // Append a query parameter to force a cache entry
                            query = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, query, { nocache: Object(_utils__WEBPACK_IMPORTED_MODULE_1__["createUUID"])() });
                        }
                        queryStr = query && Object.keys(query).filter(function (key) { return query[key] !== undefined; }).map(function (key) {
                            return encodeURIComponent(key) +
                                "=" +
                                encodeURIComponent(query[key]);
                        })
                            .join('&');
                        _a = this, authHeader = _a.authHeader, tokenInfo = _a.tokenInfo, bearerProvider = _a.bearerProvider;
                        if (!(!authHeader && !tokenInfo && bearerProvider)) return [3 /*break*/, 2];
                        _b = this;
                        return [4 /*yield*/, bearerProvider.getBearer()];
                    case 1:
                        _b.tokenInfo = tokenInfo = _e.sent();
                        _e.label = 2;
                    case 2:
                        if (!tokenInfo) return [3 /*break*/, 5];
                        if (!(tokenInfo.expires < Date.now())) return [3 /*break*/, 4];
                        console.log("Token expired. Refresh it:");
                        _c = this;
                        return [4 /*yield*/, bearerProvider.refreshBearer()];
                    case 3:
                        _c.tokenInfo = tokenInfo = _e.sent();
                        _e.label = 4;
                    case 4:
                        authHeader = "Bearer " + tokenInfo.token;
                        _e.label = 5;
                    case 5:
                        // In one way or another, we've concluded an Authorization header to use:
                        if (authHeader) {
                            headers.Authorization = authHeader;
                        }
                        url = this.baseUrl + path + (queryStr ? "?" + queryStr : "");
                        return [4 /*yield*/, this.isomorphic.fetch(url, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.fetchOptions, { headers: headers, method: method }, fetchOptions))];
                    case 6:
                        res = _e.sent();
                        if (!(res.status == 401 && this.bearerProvider)) return [3 /*break*/, 9];
                        wwwauth = res.headers.get("www-authenticate");
                        console.log("Got " + res.status + " from " + (this.baseUrl + path));
                        if (!(wwwauth && /Bearer/i.test(wwwauth))) return [3 /*break*/, 9];
                        _d = this;
                        return [4 /*yield*/, this.bearerProvider.refreshBearer()];
                    case 7:
                        _d.tokenInfo = _e.sent();
                        headers.Authorization = "Bearer " + this.tokenInfo.token;
                        return [4 /*yield*/, this.isomorphic.fetch(url, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.fetchOptions, { headers: headers, method: method }, fetchOptions))];
                    case 8:
                        res = _e.sent();
                        _e.label = 9;
                    case 9: return [2 /*return*/, res];
                }
            });
        });
    };
    RestClient.prototype.get = function (path, query, fetchOptions) {
        return this.fetch(path, "GET", { Accept: "application/json; text/plain" }, query, fetchOptions);
    };
    RestClient.prototype.post = function (path, data, fetchOptions) {
        return this.fetch(path, "POST", {
            "Content-Type": "application/json",
            "Accept": "application/json"
        }, null, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, fetchOptions, { body: JSON.stringify(data) }));
    };
    RestClient.prototype.delete = function (path, query, body, fetchOptions) {
        return this.fetch(path, "DELETE", { Accept: "application/json; text/plain" }, query, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, fetchOptions, { body: body }));
    };
    return RestClient;
}());

//# sourceMappingURL=restclient.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/utils.js":
/*!***********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/utils.js ***!
  \***********************************************************/
/*! exports provided: createUUID, avoidSimultanousCalls, getGlobalId, computePredestinatedId, simpleDigest, buf2hex, updateArray */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createUUID", function() { return createUUID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "avoidSimultanousCalls", function() { return avoidSimultanousCalls; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getGlobalId", function() { return getGlobalId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computePredestinatedId", function() { return computePredestinatedId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "simpleDigest", function() { return simpleDigest; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "buf2hex", function() { return buf2hex; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateArray", function() { return updateArray; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");

function createUUID() {
    // Decent solution from http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript
    var d = Date.now();
    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
        var r = (d + Math.random() * 16) % 16 | 0;
        d = Math.floor(d / 16);
        return (c === 'x' ? r : (r & 0x7 | 0x8)).toString(16);
    });
    return uuid;
}
function avoidSimultanousCalls(method) {
    var ongoingPromise = null;
    return function () {
        if (!ongoingPromise) {
            ongoingPromise = method.apply(this, arguments).then(function (result) {
                ongoingPromise = null;
                return result;
            });
        }
        return ongoingPromise;
    };
}
function getGlobalId(realm) {
    var prefix = 'ec96b3be-45fc-41d3-b69e-';
    var pad = ['50', '08', 'e1', '40', 'e4', 'e7'];
    if (realm.length > 6)
        throw new Error("Too long realm");
    for (var i = 0; i < realm.length; ++i) {
        var hex = realm.charCodeAt(i).toString(16);
        pad[i] = hex.length === 2 ?
            hex :
            '0' + hex;
    }
    return prefix + pad.join('');
}
function computePredestinatedId(input) {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var encoder, data, digest, _a, i;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
            switch (_b.label) {
                case 0:
                    encoder = new TextEncoder();
                    data = encoder.encode(input);
                    _a = Uint8Array.bind;
                    return [4 /*yield*/, crypto.subtle.digest('SHA-256', data)];
                case 1:
                    digest = new (_a.apply(Uint8Array, [void 0, _b.sent()]))();
                    i = 0;
                    return [2 /*return*/, 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
                            var nibble = digest[i++] % 16 | 0;
                            var washedNibble = c === 'x' ?
                                nibble :
                                nibble & 0x7 | 0x8;
                            return washedNibble.toString(16);
                        })];
            }
        });
    });
}
function simpleDigest(input) {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var encoder, inputBytes, digestBytes, _a;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
            switch (_b.label) {
                case 0:
                    encoder = new TextEncoder();
                    inputBytes = encoder.encode(input);
                    _a = Uint8Array.bind;
                    return [4 /*yield*/, crypto.subtle.digest('SHA-256', inputBytes)];
                case 1:
                    digestBytes = new (_a.apply(Uint8Array, [void 0, _b.sent(), 0, 16]))();
                    return [2 /*return*/, buf2hex(digestBytes)];
            }
        });
    });
}
function buf2hex(buffer) {
    return Array.prototype.map.call(buffer, function (x) { return ('00' + x.toString(16)).slice(-2); }).join('');
}
function updateArray(a, mapper) {
    var retval = a;
    for (var i = 0, l = a.length; i < l; ++i) {
        var t = a[i];
        var mapped = mapper(t);
        if (mapped !== t) {
            if (retval === a)
                retval = a.slice();
            retval[i] = mapped;
        }
    }
    return retval;
}
/*
export function updateArray<T>(a: T[], mapper: (t: T) => T | false): T[] {
  let retval = a;
  let j = 0;
  for (let i=0,l=a.length; i<l; ++i, ++j) {
    const t = a[i];
    const mapped = mapper(t);
    if (mapped === false) {
      // Mapper wants to delete this doc.
      if (retval === a) retval = a.slice();
      retval.splice(j, 1);
      --j; // compensate for ++j
    } else if (mapped !== t) {
      if (retval === a) retval = a.slice();
      retval[j] = mapped;
    }
  }
  return retval;
}
*/ 
//# sourceMappingURL=utils.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-model-migrator/index.js":
/*!***********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-model-migrator/index.js ***!
  \***********************************************************/
/*! exports provided: KedModelMigratorMixin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedModelMigratorMixin", function() { return KedModelMigratorMixin; });
/* harmony import */ var _migrate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./migrate */ "./kedbackend/js/dist/js/ked-model-migrator/migrate.js");

var KedModelMigratorMixin = function (client) {
    if (client.__migrator_mixed_in)
        return;
    client.__migrator_mixed_in = true;
    var get = client.get;
    var list = client.list;
    client.get = function (table, id, options) {
        var include = options && options.include;
        return get.apply(this, arguments).then(function (result) {
            Object(_migrate__WEBPACK_IMPORTED_MODULE_0__["default"])(result, table, include && include.toString().split(','));
            return result;
        });
    };
    client.list = function (table, options) {
        var include = options && options.include;
        return list.apply(this, arguments).then(function (result) {
            result.forEach(function (doc) { return Object(_migrate__WEBPACK_IMPORTED_MODULE_0__["default"])(doc, table, include && include.toString().split(',')); });
            return result;
        });
    };
    return client;
};
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-model-migrator/migrate-course.js":
/*!********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-model-migrator/migrate-course.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return migrateCourse; });
/* harmony import */ var _migrate_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./migrate-task */ "./kedbackend/js/dist/js/ked-model-migrator/migrate-task.js");

function migrateCourse(course, graphs) {
    if (!course.modules)
        course.modules = [];
    course.modules.forEach(function (module) {
        if (!module.resources) {
            module.resources = [];
        }
        if (!module.taskIds) {
            module.taskIds = [];
        }
    });
    if (!course.responsibleTeachers) {
        course.responsibleTeachers = [];
    }
    // Earlier wrong spelling of resources
    if ('resourses' in course && !('resources' in course)) {
        course.resources = course.resourses;
        delete course.resourses;
    }
    if (!course.resources) {
        course.resources = [];
    }
    if (graphs) {
        graphs.forEach(function (label) {
            switch (label) {
                case 'tasks':
                    course.tasks.forEach(function (task) { return Object(_migrate_task__WEBPACK_IMPORTED_MODULE_0__["default"])(task); });
                    break;
            }
        });
    }
}
//# sourceMappingURL=migrate-course.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-model-migrator/migrate-task.js":
/*!******************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-model-migrator/migrate-task.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return migrateTask; });
function migrateTask(task) {
    if (!task.resources)
        task.resources = [];
}
//# sourceMappingURL=migrate-task.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-model-migrator/migrate.js":
/*!*************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-model-migrator/migrate.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return migrate; });
/* harmony import */ var _migrate_course__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./migrate-course */ "./kedbackend/js/dist/js/ked-model-migrator/migrate-course.js");
/* harmony import */ var _migrate_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./migrate-task */ "./kedbackend/js/dist/js/ked-model-migrator/migrate-task.js");


function migrate(doc, table, graphs) {
    switch (table) {
        case "courses":
            Object(_migrate_course__WEBPACK_IMPORTED_MODULE_0__["default"])(doc, graphs);
            break;
        case "tasks":
            Object(_migrate_task__WEBPACK_IMPORTED_MODULE_1__["default"])(doc);
            break;
    }
}
//# sourceMappingURL=migrate.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/collection.js":
/*!********************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/collection.js ***!
  \********************************************************/
/*! exports provided: Collection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Collection", function() { return Collection; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./observable */ "./kedbackend/js/dist/js/observable/observable.js");
/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./map */ "./kedbackend/js/dist/js/observable/map.js");
/* harmony import */ var _value__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./value */ "./kedbackend/js/dist/js/observable/value.js");
/* harmony import */ var _emitter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./emitter */ "./kedbackend/js/dist/js/observable/emitter.js");





var Collection = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Collection, _super);
    function Collection(subscribe) {
        return _super.call(this, subscribe) || this;
    }
    Collection.prototype._map = function (mapper) {
        throw "mixedin";
    };
    Collection.from = function (x) {
        if (x.subscribe)
            return new Collection(function (s) { return x.subscribe(s); });
        if (Array.isArray(x)) {
            var emitter_1 = new _emitter__WEBPACK_IMPORTED_MODULE_4__["Emitter"](x);
            return new Collection(function (s) { return emitter_1.subscribe(s); });
        }
        throw new Error("ObservableCollection.from() can only take arrays or observables");
    };
    Collection.prototype.map = function (mapper) {
        return this._map(function (items) { return items.map(function (item) { return mapper(item); }); });
    };
    Collection.prototype.flat = function () {
        return this._map(function (items) { return [].concat.apply([], items); });
    };
    Collection.prototype.filter = function (filter) {
        return this._map(function (items) { return items.filter(filter); });
    };
    Collection.prototype.concat = function (other) {
        return Collection.from(this.toValue().combineLatest(other).map(function (_a) {
            var me = _a[0], other = _a[1];
            return me.concat(other);
        }));
    };
    Collection.prototype.orderBy = function (prop) {
        return this.toValue().map(function (array) { return array.slice().sort(function (a, b) {
            var aProp = a && a[prop];
            var bProp = b && b[prop];
            return aProp > bProp ? 1 : aProp < bProp ? -1 : 0;
        }); }).toCollection(function (x) { return x; });
    };
    Collection.prototype.toValue = function () {
        var _this = this;
        return new _value__WEBPACK_IMPORTED_MODULE_3__["Value"](function (s) { return _this.subscribe(s); });
    };
    Collection.prototype.groupBy = function (prop) {
        return this.toValue().map(function (items) {
            var rv = {};
            items.forEach(function (item) {
                var list = rv[item[prop]] || (rv[item[prop]] = []);
                list.push(item);
            });
            return rv;
        });
    };
    Collection.prototype.first = function () {
        return this.toValue().map(function (arr) { return arr[0]; });
    };
    return Collection;
}(_observable__WEBPACK_IMPORTED_MODULE_1__["Observable"]));

Collection.prototype._map = Object(_map__WEBPACK_IMPORTED_MODULE_2__["initMapMethod"])(Collection);
//# sourceMappingURL=collection.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/emitter.js":
/*!*****************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/emitter.js ***!
  \*****************************************************/
/*! exports provided: Emitter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Emitter", function() { return Emitter; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _value__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./value */ "./kedbackend/js/dist/js/observable/value.js");


var Emitter = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Emitter, _super);
    function Emitter(initialValue) {
        var _this = _super.call(this, function (observer) {
            var subscription = {
                unsubscribe: function () { return _this.subscribers = _this.subscribers.filter(function (_a) {
                    var s = _a[0];
                    return s !== observer;
                }); },
            };
            _this.subscribers.push([observer, subscription]);
            if (_this.error)
                observer(null, _this.error, subscription);
            else
                observer(_this.value, undefined, subscription);
            return subscription;
        }) || this;
        _this.subscribers = [];
        _this.value = initialValue;
        return _this;
    }
    Emitter.prototype.dispatch = function (value) {
        this.value = value;
        this.error = undefined;
        this._dispatch();
    };
    Emitter.prototype.dispatchError = function (error) {
        this.error = error;
        this._dispatch();
    };
    Emitter.prototype._dispatch = function () {
        var _this = this;
        this.subscribers.forEach(function (_a) {
            var observer = _a[0], subscription = _a[1];
            try {
                observer(_this.value, _this.error, subscription);
            }
            catch (err) {
                observer(null, err, subscription);
            }
        });
    };
    return Emitter;
}(_value__WEBPACK_IMPORTED_MODULE_1__["Value"]));

//# sourceMappingURL=emitter.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/fiber-context.js":
/*!***********************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/fiber-context.js ***!
  \***********************************************************/
/*! exports provided: FiberContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FiberContext", function() { return FiberContext; });
var stack = [];
var currentFiber = null;
var providers = [function () { return currentFiber; }];
function pushFiber(fiber) {
    stack.push(currentFiber);
    currentFiber = fiber;
}
function popFiber() {
    currentFiber = stack.pop();
}
var FiberContext = {
    get current() { return currentFiber; },
    /*run: function rerun<R>(fiber: Fiber, fn: ()=>R): R | Promise<R> {
      pushFiber(fiber);
      try {
        return Promise.resolve(fn());
      } catch (p) {
        if (p && typeof p.then === 'function') {
          return p.then(()=>rerun(fiber, fn));
        } else {
          return Promise.reject(p);
        }
      } finally {
        popFiber();
      }
    },*/
    addProvider: function (getCurrentFiber) {
        providers.push(getCurrentFiber);
        setCurrentGetterFromProviders();
    },
    removeProvider: function (getCurrentFiber) {
        providers = providers.filter(function (p) { return p !== getCurrentFiber; });
        setCurrentGetterFromProviders();
    }
};
function setCurrentGetterFromProviders() {
    Object.defineProperty(FiberContext, "current", {
        get: providers.reduce(function (p, c) { return function () { return p() || c(); }; }),
        set: function () { throw new Error("Use FiberContext.push() to change current fiber"); }
    });
}
//# sourceMappingURL=fiber-context.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/map.js":
/*!*************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/map.js ***!
  \*************************************************/
/*! exports provided: initMapMethod */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initMapMethod", function() { return initMapMethod; });
function initMapMethod(ctor) {
    return function (mapper) {
        var _this = this;
        return new ctor(function (observer) { return _this.subscribe(function (value, error, subscription) {
            if (error)
                observer(null, error, subscription);
            else
                try {
                    observer(mapper(value), error, subscription);
                }
                catch (err) {
                    observer(null, err, subscription);
                }
        }); });
    };
}
//# sourceMappingURL=map.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/observable.js":
/*!********************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/observable.js ***!
  \********************************************************/
/*! exports provided: Observable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Observable", function() { return Observable; });
var Observable = /** @class */ (function () {
    //static get [Symbol.species]() { return this; }
    function Observable(_subscribe) {
        this._subscribe = _subscribe;
    }
    Observable.prototype.subscribe = function (observer) {
        try {
            return this._subscribe(function (items, error, subscription) {
                try {
                    observer(items, error, subscription);
                }
                catch (err) {
                    observer(null, err, subscription);
                }
            });
        }
        catch (error) {
            observer(null, error, { unsubscribe: function () { } });
        }
    };
    return Observable;
}());

//# sourceMappingURL=observable.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/value.js":
/*!***************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/value.js ***!
  \***************************************************/
/*! exports provided: Value */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Value", function() { return Value; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./observable */ "./kedbackend/js/dist/js/observable/observable.js");
/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./map */ "./kedbackend/js/dist/js/observable/map.js");
/* harmony import */ var _collection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./collection */ "./kedbackend/js/dist/js/observable/collection.js");
/* harmony import */ var _fiber_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./fiber-context */ "./kedbackend/js/dist/js/observable/fiber-context.js");





var Value = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Value, _super);
    function Value(subscribe) {
        return _super.call(this, subscribe) || this;
    }
    Value.from = function (x) {
        if (x.subscribe)
            return new Value(function (s) { return x.subscribe(s); });
        throw new Error("Value.from() can only take observables");
    };
    Value.prototype.read = function () {
        var resolved = false, result, err, notify;
        var subscription = this.subscribe(function (value, error, subsciption) {
            resolved = true;
            result = value;
            err = error;
            if (error && notify)
                notify(null, error, subsciption);
            else if (notify)
                notify(value, null, subsciption);
        });
        if (resolved) {
            var currentFiber = _fiber_context__WEBPACK_IMPORTED_MODULE_4__["FiberContext"].current;
            if (!currentFiber) {
                subscription.unsubscribe();
                throw new Error("Invalid Fiber Context");
            }
            if (err) {
                subscription.unsubscribe();
                throw err;
            }
            var subscriptions = currentFiber.subscriptions, observer = currentFiber.observer;
            subscriptions.push(subscription);
            notify = observer;
            return result;
        }
        throw new Promise(function (resolve, reject) {
            notify = function (value, error, subscription) {
                subscription.unsubscribe();
                if (error)
                    reject(error);
                else
                    resolve(value);
            };
        });
    };
    Value.prototype.load = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.subscribe(function (value, error, subsciption) {
                if (error)
                    reject(error);
                else
                    resolve(value);
                subsciption.unsubscribe();
            });
        });
    };
    Value.prototype.filter = function (fn) {
        var _this = this;
        return new Value(function (observer) { return _this.subscribe(function (value, error, subscription) {
            if (error)
                observer(null, error, subscription);
            else if (fn(value))
                observer(value, error, subscription);
        }); });
    };
    Value.prototype.log = function (prefix) {
        return this.map(function (x) {
            console.log(prefix, x);
            return x;
        });
    };
    Value.prototype.toCollection = function (mapper) {
        var _this = this;
        return new _collection__WEBPACK_IMPORTED_MODULE_3__["Collection"](function (s) { return _this.map(mapper).subscribe(s); });
    };
    Value.prototype.combineLatest = function (other) {
        var _this = this;
        return new Value(function (observer) {
            var values = [null, null];
            var mySubscription, otherSubscription;
            var subscription = {
                unsubscribe: function () {
                    mySubscription.unsubscribe();
                    otherSubscription.unsubscribe();
                }
            };
            mySubscription = _this.subscribe(function (items, error, s) {
                if (error) {
                    s.unsubscribe();
                    observer(null, error, subscription);
                }
                values[0] = items;
                if (values[1] !== null)
                    observer(values, null, subscription);
            });
            otherSubscription = other.subscribe(function (value, error, s) {
                if (error) {
                    s.unsubscribe();
                    observer(null, error, subscription);
                }
                values[1] = value;
                if (values[0] !== null)
                    observer(values, null, subscription);
            });
            return subscription;
        });
    };
    Value.prototype.switchMap = function (mapper) {
        var _this = this;
        return new Value(function (observer) {
            var mappedSubscription = null;
            var subscription = null;
            var returnedSubscription = {
                unsubscribe: function () {
                    subscription.unsubscribe();
                    if (mappedSubscription) {
                        mappedSubscription.unsubscribe();
                        mappedSubscription = null;
                    }
                }
            };
            subscription = _this.subscribe(function (item, error, s) {
                subscription = s;
                if (mappedSubscription) {
                    mappedSubscription.unsubscribe();
                    mappedSubscription = null;
                }
                if (error)
                    observer(null, error, returnedSubscription);
                else {
                    try {
                        var observableOrValue = mapper(item);
                        if (observableOrValue && typeof observableOrValue.subscribe === 'function') {
                            mappedSubscription = observableOrValue.subscribe(function (value, error, s) {
                                mappedSubscription = s;
                                observer(value, error, returnedSubscription);
                            });
                        }
                        else {
                            observer(observableOrValue, null, subscription);
                        }
                    }
                    catch (error) {
                        observer(null, error, subscription);
                    }
                }
            });
            return returnedSubscription;
        });
    };
    return Value;
}(_observable__WEBPACK_IMPORTED_MODULE_1__["Observable"]));

Value.prototype.map = Object(_map__WEBPACK_IMPORTED_MODULE_2__["initMapMethod"])(Value);
//# sourceMappingURL=value.js.map

/***/ }),

/***/ "./node_modules/moment/locale sync recursive sv|en":
/*!***********************************************!*\
  !*** ./node_modules/moment/locale sync sv|en ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./en-SG": "./node_modules/moment/locale/en-SG.js",
	"./en-SG.js": "./node_modules/moment/locale/en-SG.js",
	"./en-au": "./node_modules/moment/locale/en-au.js",
	"./en-au.js": "./node_modules/moment/locale/en-au.js",
	"./en-ca": "./node_modules/moment/locale/en-ca.js",
	"./en-ca.js": "./node_modules/moment/locale/en-ca.js",
	"./en-gb": "./node_modules/moment/locale/en-gb.js",
	"./en-gb.js": "./node_modules/moment/locale/en-gb.js",
	"./en-ie": "./node_modules/moment/locale/en-ie.js",
	"./en-ie.js": "./node_modules/moment/locale/en-ie.js",
	"./en-il": "./node_modules/moment/locale/en-il.js",
	"./en-il.js": "./node_modules/moment/locale/en-il.js",
	"./en-nz": "./node_modules/moment/locale/en-nz.js",
	"./en-nz.js": "./node_modules/moment/locale/en-nz.js",
	"./sv": "./node_modules/moment/locale/sv.js",
	"./sv.js": "./node_modules/moment/locale/sv.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./node_modules/moment/locale sync recursive sv|en";

/***/ }),

/***/ "./src/access-control/get-user-claims.ts":
/*!***********************************************!*\
  !*** ./src/access-control/get-user-claims.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getUserClaims; });
function getUserClaims(user) {
    return [{
            type: "email",
            value: user.mail
        }, {
            type: "school",
            value: user.school
        }].concat(user.roles.map(function (role) { return ({
        type: "role",
        value: role
    }); })).concat(user.roles.map(function (role) { return ({
        type: "schoolRole",
        value: user.school + "/" + role
    }); }));
}


/***/ }),

/***/ "./src/access-control/index.ts":
/*!*************************************!*\
  !*** ./src/access-control/index.ts ***!
  \*************************************/
/*! exports provided: getUserClaims, IMPERSONATION_QUERY_PARAMS, hasAccess, hasReadAccess, hasWriteAccess, hasShareAccess, isTeacherAtSchool, isAdminOrTeacherAtSchool, impersonationEnv, actAs, preserveImpersonationQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IMPERSONATION_QUERY_PARAMS", function() { return IMPERSONATION_QUERY_PARAMS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasAccess", function() { return hasAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasReadAccess", function() { return hasReadAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasWriteAccess", function() { return hasWriteAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasShareAccess", function() { return hasShareAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isTeacherAtSchool", function() { return isTeacherAtSchool; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isAdminOrTeacherAtSchool", function() { return isAdminOrTeacherAtSchool; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "impersonationEnv", function() { return impersonationEnv; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "actAs", function() { return actAs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "preserveImpersonationQuery", function() { return preserveImpersonationQuery; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _get_user_claims__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./get-user-claims */ "./src/access-control/get-user-claims.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getUserClaims", function() { return _get_user_claims__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/query-string */ "./src/utils/query-string.ts");





var IMPERSONATION_QUERY_PARAMS = [
    "user",
    "role",
    "school",
    "debug",
    "testVersion",
    "testversion",
    "features",
    "schoolType",
    "schooltype"
];
function hasAccess(user, doc, requestedRight) {
    var claims = Object(_get_user_claims__WEBPACK_IMPORTED_MODULE_2__["default"])(user);
    if (requestedRight !== 'R' && user.tutorFor) {
        claims = claims.filter(function (claim) { return claim.type !== 'email'; });
    }
    var result = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["hasAccess"])(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["DocumentAccess"].fromStringArray(doc.acl || []), claims, requestedRight);
    //console.log(`Has ${requestedRight} access to ${doc.name}/${doc.id}: ${result}`);
    return result;
}
function hasReadAccess(user, doc) {
    return hasAccess(user, doc, 'R');
}
function hasWriteAccess(user, doc) {
    return hasAccess(user, doc, 'W');
}
function hasShareAccess(user, doc) {
    return hasAccess(user, doc, 'S');
}
function isTeacherAtSchool(user, school) {
    var isTeacher = user.roles.some(function (role) { return role === 'EMPLOYEE' || role === 'ADMIN'; });
    var belongsToSchool = (school || "").toLowerCase() === user.school.toLowerCase();
    return (isTeacher && belongsToSchool);
}
function isAdminOrTeacherAtSchool(user, school) {
    return user.roles.includes("ADMIN") || isTeacherAtSchool(user, school);
}
var impersonationEnv = {
    actAs: function (options) {
        var role = options.role, school = options.school, url = options.url;
        var currentQuery = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_3__["parseQueryString"])(location.search);
        var newQuery = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, currentQuery, { role: role, school: school });
        var newQueryString = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_3__["generateQueryString"])(newQuery);
        if (url) {
            location.href = "" + url + newQueryString;
        }
        else {
            location.hash = "#";
            location.search = newQueryString;
        }
    }
};
function actAs(options) {
    impersonationEnv.actAs(options);
}
function preserveImpersonationQuery(url, query) {
    var e_1, _a;
    var currentQuery = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_3__["parseQueryString"])(location.search);
    var preservedQuery = {};
    try {
        for (var IMPERSONATION_QUERY_PARAMS_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](IMPERSONATION_QUERY_PARAMS), IMPERSONATION_QUERY_PARAMS_1_1 = IMPERSONATION_QUERY_PARAMS_1.next(); !IMPERSONATION_QUERY_PARAMS_1_1.done; IMPERSONATION_QUERY_PARAMS_1_1 = IMPERSONATION_QUERY_PARAMS_1.next()) {
            var param = IMPERSONATION_QUERY_PARAMS_1_1.value;
            if (currentQuery[param])
                preservedQuery[param] = currentQuery[param];
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (IMPERSONATION_QUERY_PARAMS_1_1 && !IMPERSONATION_QUERY_PARAMS_1_1.done && (_a = IMPERSONATION_QUERY_PARAMS_1.return)) _a.call(IMPERSONATION_QUERY_PARAMS_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
    var newQueryString = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_3__["generateQueryString"])(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, preservedQuery, query));
    var pHash = url.indexOf('#');
    return pHash >= 0 ?
        "" + url.substr(0, pHash) + newQueryString + url.substr(pHash) :
        "" + url + newQueryString;
}


/***/ }),

/***/ "./src/apis/edsclient.ts":
/*!*******************************!*\
  !*** ./src/apis/edsclient.ts ***!
  \*******************************/
/*! exports provided: EdsClient, EDSPeriod, parseJsonDate_old */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EdsClient", function() { return EdsClient; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EDSPeriod", function() { return EDSPeriod; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseJsonDate_old", function() { return parseJsonDate_old; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _utils_school_moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/school-moment */ "./src/utils/school-moment.ts");
/* harmony import */ var _utils_school_term__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/school-term */ "./src/utils/school-term.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _mock_mock_eds_data_json__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./mock/mock-eds-data.json */ "./src/apis/mock/mock-eds-data.json");
var _mock_mock_eds_data_json__WEBPACK_IMPORTED_MODULE_5___namespace = /*#__PURE__*/__webpack_require__.t(/*! ./mock/mock-eds-data.json */ "./src/apis/mock/mock-eds-data.json", 1);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _utils_make_suspense_api__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/make-suspense-api */ "./src/utils/make-suspense-api.ts");









var EdsClient = /** @class */ (function () {
    function EdsClient(isomorphic, baseUrl, bearerProvider, userEmailGetter) {
        var _this = this;
        this.http = new kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["RestClient"](isomorphic, baseUrl, { bearerProvider: bearerProvider });
        this.userEmailGetter = userEmailGetter;
        var isApiMethod = function (m) {
            return typeof _this[m] === 'function' &&
                m !== 'constructor' && // Since makeSuspenseApi() walks prototype chain
                m !== 'privatizingCacheBust' &&
                m !== 'userEmailGetter';
        } // List non-API methods here...
        ;
        Object.keys(EdsClient.prototype).forEach(function (method) {
            if (isApiMethod(method)) {
                _this[method] = avoidSimultanousCalls(_this[method]);
            }
        });
        this.suspense = Object(_utils_make_suspense_api__WEBPACK_IMPORTED_MODULE_7__["makeSuspenseApi"])(this, { isApiMethod: isApiMethod });
    }
    EdsClient.prototype.privatizingCacheBust = function () {
        return { user: this.userEmailGetter() };
    };
    /**
       * Retrieve active courses for current logged in student.
       *
       * @param courseCode Short-name of the course. Optional.
       */
    EdsClient.prototype.getActiveCourses = function (q) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var query, res, _a, _b, json, ex_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _c.trys.push([0, 5, , 6]);
                        query = this.privatizingCacheBust();
                        if (q) {
                            if (q.courseCode)
                                query.CourseCode = q.courseCode;
                            if (q.periodName)
                                query.PeriodName = q.periodName;
                        }
                        return [4 /*yield*/, this.http.get("studentactivecourses", query)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.courses];
                    case 5:
                        ex_1 = _c.sent();
                        console.error("Error from EDS: " + ex_1);
                        throw new Error(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kunde tyv\u00E4rr inte ladda terminsm\u00E5l eller avklarade steg fr\u00E5n EDS. F\u00F6rs\u00F6k igen senare..."], ["Kunde tyv\u00E4rr inte ladda terminsm\u00E5l eller avklarade steg fr\u00E5n EDS. F\u00F6rs\u00F6k igen senare..."]))));
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    /**
     * Retrieve latest assessments for current logged in user.
     *
     * @param limit Optional limit
     */
    EdsClient.prototype.getLatestAssessments = function (limit) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var query, res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        query = this.privatizingCacheBust();
                        if (!isNaN(limit))
                            query.Count = limit;
                        return [4 /*yield*/, this.http.get("studentassessments", query)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.assessments];
                }
            });
        });
    };
    /**
     * Retrieve studyplans for current logged-in user
     */
    EdsClient.prototype.getStudentGoals = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("studentgoals", this.privatizingCacheBust())];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.studentGoals];
                }
            });
        });
    };
    EdsClient.prototype.getStudentFutureAbilities = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("studentFutureAbilities", this.privatizingCacheBust())];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.studentFutureAbilities];
                }
            });
        });
    };
    EdsClient.prototype.getTeacherTutorStudents = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("teachertutorstudents", this.privatizingCacheBust())];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.students];
                }
            });
        });
    };
    /**
     * getSchoolTuitionGroups()
     *
     * Return tuitiongroups for school
     *
     * @param schoolName - name of school
     * @param courseCode - Skolverkets code for course
     */
    EdsClient.prototype.getSchoolTuitionGroups = function (q) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("SchoolTuitionGroups", tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.privatizingCacheBust(), q))];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.schoolTuitionGroups];
                }
            });
        });
    };
    /**
     * getTuitionGroupStudents()
     *
     * Return name and mailadresses for tutitiongroups in schools
     *
     * @param schoolName - name of school
     * @param tuitionGroupName - tuition gruop name in EDS
     */
    EdsClient.prototype.getTuitionGroupStudents = function (q) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("TuitionGroupStudents", tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.privatizingCacheBust(), q))];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.tuitionGroupStudents];
                }
            });
        });
    };
    /**
     * getSchoolTeachers()
     *
     * Return name and mailadresses for tutitiongroups in schools
     *
     * @param schoolName - name of school
     */
    EdsClient.prototype.getSchoolTeachers = function (q) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("SchoolTeachers", tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.privatizingCacheBust(), q))];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.schoolTeachers];
                }
            });
        });
    };
    // we assume that the EDS will return the current academic year dates determined by the current date
    EdsClient.prototype.getAcademicYearTerms = function (schoolLocale, date) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var holidays, firstTermMoment, secondTermMoment, startFirstTermDate, startSecondTermDate, endFirstTermDate, endSecondTermDate, firstTerm, secondTerm;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                // mock data
                switch (schoolLocale) {
                    case 'en_sin':
                        return [2 /*return*/, _mock_mock_eds_data_json__WEBPACK_IMPORTED_MODULE_5__.SouthIndia.filter(function (f) { return moment__WEBPACK_IMPORTED_MODULE_6___default()(date).isSameOrAfter(f.firstTerm.startDate) && moment__WEBPACK_IMPORTED_MODULE_6___default()(date).isSameOrBefore(f.secondTerm.endDate); })[0]];
                    case 'en_nin':
                        return [2 /*return*/, _mock_mock_eds_data_json__WEBPACK_IMPORTED_MODULE_5__.NorthIndia.filter(function (f) { return moment__WEBPACK_IMPORTED_MODULE_6___default()(date).isSameOrAfter(f.firstTerm.startDate) && moment__WEBPACK_IMPORTED_MODULE_6___default()(date).isSameOrBefore(f.secondTerm.endDate); })[0]];
                    case 'sv':
                        {
                            holidays = [];
                            firstTermMoment = Object(_utils_school_moment__WEBPACK_IMPORTED_MODULE_2__["getTermStarEndDate"])(date, true);
                            secondTermMoment = Object(_utils_school_moment__WEBPACK_IMPORTED_MODULE_2__["getTermStarEndDate"])(date, false);
                            startFirstTermDate = firstTermMoment[0];
                            startSecondTermDate = secondTermMoment[0];
                            endFirstTermDate = firstTermMoment[1];
                            endSecondTermDate = secondTermMoment[1];
                            firstTerm = { startDate: new Date(startFirstTermDate.year(), startFirstTermDate.month(), startFirstTermDate.date()).toDateString(), endDate: new Date(startFirstTermDate.year(), endFirstTermDate.month(), endFirstTermDate.date()).toDateString() };
                            secondTerm = { startDate: new Date(startSecondTermDate.year(), startSecondTermDate.month(), startSecondTermDate.date()).toDateString(), endDate: new Date(startSecondTermDate.year(), endSecondTermDate.month(), endSecondTermDate.date()).toDateString() };
                            return [2 /*return*/, { firstTerm: firstTerm, secondTerm: secondTerm, holidays: holidays }];
                        }
                }
                return [2 /*return*/];
            });
        });
    };
    return EdsClient;
}());

var EDSPeriod = /** @class */ (function () {
    function EDSPeriod(periodStringOrSchoolTerm) {
        if (typeof periodStringOrSchoolTerm === 'string') {
            this.period = periodStringOrSchoolTerm;
            this.term = this.period.startsWith('HT') ? 'AT' : 'ST';
            this.year = parseInt(this.period.substr(2));
            if (isNaN(this.year))
                throw new Error("Invalid period: " + this.period);
        }
        else {
            var schoolTerm = new _utils_school_term__WEBPACK_IMPORTED_MODULE_3__["SchoolTerm"](periodStringOrSchoolTerm);
            this.period = (schoolTerm.term === 'AT' ? "HT" : "VT") + schoolTerm.year;
            this.term = schoolTerm.term;
            this.year = schoolTerm.year;
        }
    }
    Object.defineProperty(EDSPeriod.prototype, "schoolTerm", {
        get: function () {
            return new _utils_school_term__WEBPACK_IMPORTED_MODULE_3__["SchoolTerm"]({
                academicYear: this.term === 'AT' ?
                    this.year + "/" + (this.year + 1) :
                    this.year - 1 + "/" + this.year,
                term: this.term
            });
        },
        enumerable: true,
        configurable: true
    });
    EDSPeriod.prototype.toString = function () {
        return this.period;
    };
    EDSPeriod.prototype.valueOf = function () {
        return this.year + ":" + (this.term === 'ST' ? "1" : "2");
    };
    return EDSPeriod;
}());

function parseJsonDate_old(jsonDateStr) {
    var date = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["dateTimeReviver"])("", jsonDateStr);
    if (!(date instanceof Date))
        throw new Error("Invalid JSON date string: " + jsonDateStr);
    return date;
}
function avoidSimultanousCalls(method) {
    var ongoingPromises = {};
    return function () {
        var argsJson = JSON.stringify([].slice.call(arguments));
        if (!ongoingPromises[argsJson]) {
            ongoingPromises[argsJson] = method.apply(this, arguments).then(function (result) {
                delete ongoingPromises[argsJson];
                return result;
            });
        }
        return ongoingPromises[argsJson];
    };
}
var templateObject_1;


/***/ }),

/***/ "./src/apis/google-calendar.ts":
/*!*************************************!*\
  !*** ./src/apis/google-calendar.ts ***!
  \*************************************/
/*! exports provided: GoogleCalendar */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoogleCalendar", function() { return GoogleCalendar; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _google_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./google-client */ "./src/apis/google-client.ts");


var GoogleCalendar = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](GoogleCalendar, _super);
    function GoogleCalendar(googleTokenProvider) {
        var _this = _super.call(this, 'https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest') || this;
        _this.setBearerProvider(googleTokenProvider);
        return _this;
    }
    GoogleCalendar.prototype.listCalendars = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, err_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2:
                        _a.trys.push([2, 4, , 5]);
                        return [4 /*yield*/, gapi.client.calendar.calendarList.list({})];
                    case 3:
                        res = _a.sent();
                        // TODO: What is the normal res.status? 200? Throw if not 200?
                        return [2 /*return*/, res.result.items];
                    case 4:
                        err_1 = _a.sent();
                        // TODO: Parse out error from err (which is an object!)
                        throw err_1.error; // Is this correct? Test!
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    GoogleCalendar.prototype.batchEvents = function (_a) {
        var calendarList = _a.calendarList, timeMin = _a.timeMin, timeMax = _a.timeMax;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var batch_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _b.sent();
                        try {
                            batch_1 = gapi.client.newBatch();
                            calendarList.forEach(function (cal) {
                                batch_1.add(gapi.client.calendar.events.list({
                                    'calendarId': cal.id || 'primary',
                                    'timeMin': timeMin && (new Date(timeMin)).toISOString(),
                                    'timeMax': timeMax && (new Date(timeMax)).toISOString(),
                                    'showDeleted': false,
                                    'singleEvents': true,
                                    'fields': 'items/id,items/start,items/end,items/summary,items/location,items/htmlLink,items/description',
                                    'maxResults': 2500,
                                    'orderBy': 'startTime'
                                }), { 'id': cal.id });
                            });
                            return [2 /*return*/, batch_1.then(function (resp) {
                                    var newCals = {};
                                    for (var i in calendarList) {
                                        var calId = calendarList[i].id;
                                        var events = resp.result[calId].result.items;
                                        newCals[calId] = { calendar: calendarList[i], events: events };
                                    }
                                    return newCals;
                                })];
                        }
                        catch (err) {
                            throw err.error;
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    return GoogleCalendar;
}(_google_client__WEBPACK_IMPORTED_MODULE_1__["GoogleClient"]));



/***/ }),

/***/ "./src/apis/google-client.ts":
/*!***********************************!*\
  !*** ./src/apis/google-client.ts ***!
  \***********************************/
/*! exports provided: GoogleClient */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoogleClient", function() { return GoogleClient; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");


var GoogleClient = /** @class */ (function () {
    function GoogleClient(discoveryDocs) {
        this.googleTokenProvider = _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["env"].googleTokenProvider;
        this.discoveryDocs = [];
        this.discoveryDocs.push(discoveryDocs);
    }
    GoogleClient.prototype.setBearerProvider = function (googleTokenProvider) {
        this.googleTokenProvider = googleTokenProvider;
    };
    GoogleClient.prototype.ensureInited = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var tokenResult;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(typeof gapi === 'undefined' || !gapi.client || !gapi.client.setToken)) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.loadGapi()];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2:
                        if (!(!this.tokenExpiration || this.tokenExpiration < new Date())) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.googleTokenProvider.getBearer()];
                    case 3:
                        tokenResult = _a.sent();
                        this.tokenExpiration = new Date(tokenResult.expires);
                        this.token = tokenResult.token;
                        gapi.client.setToken({
                            access_token: tokenResult.token
                        });
                        _a.label = 4;
                    case 4: 
                    // Load all discovyerDocs
                    return [4 /*yield*/, gapi.client.init({
                            discoveryDocs: this.discoveryDocs
                        })];
                    case 5:
                        // Load all discovyerDocs
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    GoogleClient.prototype.loadGapi = function () {
        return new Promise(function (resolve) {
            if (typeof gapi !== 'undefined' && gapi.client && gapi.client.setToken)
                return resolve();
            var script = document.createElement('script');
            script.src = "https://apis.google.com/js/client.js?onload=gaapi_loaded";
            document.getElementsByTagName("head")[0].appendChild(script);
            window.gaapi_loaded = resolve;
        });
    };
    return GoogleClient;
}());



/***/ }),

/***/ "./src/apis/ked-learninggoals.ts":
/*!***************************************!*\
  !*** ./src/apis/ked-learninggoals.ts ***!
  \***************************************/
/*! exports provided: getLearningGoalsAndTasks */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getLearningGoalsAndTasks", function() { return getLearningGoalsAndTasks; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

function getLearningGoalsAndTasks(apiPath, pageId) {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var res, data;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, fetch(apiPath + "?nodeID=" + pageId, { credentials: "same-origin" })];
                case 1:
                    res = _a.sent();
                    return [4 /*yield*/, res.json()];
                case 2:
                    data = _a.sent();
                    return [2 /*return*/, data];
            }
        });
    });
}


/***/ }),

/***/ "./src/apis/mock/mock-eds-data.json":
/*!******************************************!*\
  !*** ./src/apis/mock/mock-eds-data.json ***!
  \******************************************/
/*! exports provided: SouthIndia, NorthIndia, default */
/***/ (function(module) {

module.exports = {"SouthIndia":[{"firstTerm":{"startDate":"2015-06-01T00:00:00.000Z","endDate":"2015-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2015-11-01T00:00:00.000Z","endDate":"2016-03-27T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2016-06-23T00:00:00.000Z","endDate":"2016-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2016-11-01T00:00:00.000Z","endDate":"2017-03-25T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2017-06-05T00:00:00.000Z","endDate":"2017-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2017-11-01T00:00:00.000Z","endDate":"2018-03-30T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2018-06-04T00:00:00.000Z","endDate":"2018-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2018-11-01T00:00:00.000Z","endDate":"2019-04-29T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2019-06-03T00:00:00.000Z","endDate":"2019-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2019-11-01T00:00:00.000Z","endDate":"2020-03-27T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2020-06-01T00:00:00.000Z","endDate":"2020-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2020-11-01T00:00:00.000Z","endDate":"2021-03-26T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2021-06-06T00:00:00.000Z","endDate":"2021-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2021-11-01T00:00:00.000Z","endDate":"2022-03-25T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2022-06-05T00:00:00.000Z","endDate":"2022-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2022-11-01T00:00:00.000Z","endDate":"2023-03-31T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2023-06-04T00:00:00.000Z","endDate":"2023-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2023-11-01T00:00:00.000Z","endDate":"2024-03-29T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2024-06-03T00:00:00.000Z","endDate":"2024-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2024-11-01T00:00:00.000Z","endDate":"2025-03-28T00:00:00.000Z"},"holidays":[]}],"NorthIndia":[{"firstTerm":{"startDate":"2024-04-03T00:00:00.000Z","endDate":"2024-09-30T00:00:00.000Z"},"secondTerm":{"startDate":"2024-10-01T00:00:00.000Z","endDate":"2025-04-02T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2023-04-05T00:00:00.000Z","endDate":"2023-10-01T00:00:00.000Z"},"secondTerm":{"startDate":"2023-10-02T00:00:00.000Z","endDate":"2024-04-02T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2022-04-06T00:00:00.000Z","endDate":"2022-10-03T00:00:00.000Z"},"secondTerm":{"startDate":"2022-10-04T00:00:00.000Z","endDate":"2023-04-04T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2021-04-01T00:00:00.000Z","endDate":"2021-10-04T00:00:00.000Z"},"secondTerm":{"startDate":"2021-10-05T00:00:00.000Z","endDate":"2022-04-05T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2020-04-01T00:00:00.000Z","endDate":"2020-09-28T00:00:00.000Z"},"secondTerm":{"startDate":"2020-09-29T00:00:00.000Z","endDate":"2021-03-31T00:00:00.000Z"},"holidays":[{"startDate":"2020-05-17","endDate":"2020-06-28"}]},{"firstTerm":{"startDate":"2019-04-04T00:00:00.000Z","endDate":"2019-09-30T00:00:00.000Z"},"secondTerm":{"startDate":"2019-10-01T00:00:00.000Z","endDate":"2020-03-31T00:00:00.000Z"},"holidays":[{"startDate":"2019-05-19","endDate":"2019-06-29"}]},{"firstTerm":{"startDate":"2018-04-04T00:00:00.000Z","endDate":"2018-09-30T00:00:00.000Z"},"secondTerm":{"startDate":"2018-10-01T00:00:00.000Z","endDate":"2019-04-03T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2017-04-05T00:00:00.000Z","endDate":"2017-10-02T00:00:00.000Z"},"secondTerm":{"startDate":"2017-10-03T00:00:00.000Z","endDate":"2018-04-03T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2016-04-06T00:00:00.000Z","endDate":"2016-10-03T00:00:00.000Z"},"secondTerm":{"startDate":"2016-10-04T00:00:00.000Z","endDate":"2017-04-04T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2015-04-01T00:00:00.000Z","endDate":"2015-10-05T00:00:00.000Z"},"secondTerm":{"startDate":"2015-10-06T00:00:00.000Z","endDate":"2016-04-05T00:00:00.000Z"},"holidays":[]}]};

/***/ }),

/***/ "./src/components/calendar/course-name-to-css-class.ts":
/*!*************************************************************!*\
  !*** ./src/components/calendar/course-name-to-css-class.ts ***!
  \*************************************************************/
/*! exports provided: courseNameToCssClass */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "courseNameToCssClass", function() { return courseNameToCssClass; });
function courseNameToCssClass(cssPrefix, courseName) {
    return "" + cssPrefix + courseName.substr(0, 3).toLowerCase();
}


/***/ }),

/***/ "./src/components/calendar/crunch-colliding-events.ts":
/*!************************************************************!*\
  !*** ./src/components/calendar/crunch-colliding-events.ts ***!
  \************************************************************/
/*! exports provided: crunchCollidingEvents */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "crunchCollidingEvents", function() { return crunchCollidingEvents; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");


function crunchCollidingEvents(events, isLastCall) {
    var result = [];
    events.forEach(function (event, eventIndex) {
        var overlaps = result.filter(function (x) { return x.startMoment && x.endMoment &&
            (x.startMoment <= event.startMoment) &&
            (x.endMoment > event.startMoment); });
        var allOverlaps = overlaps.concat(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["flatten"])(overlaps.map(function (o) { return o.prevOverlaps; })));
        allOverlaps = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["distinct"])(allOverlaps, function (o) { return o.index; });
        allOverlaps.sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["compareProp"])("startMoment"));
        var width; // = Math.round(100 / Math.max((allOverlaps.length + 1), 1));
        var pos = 0;
        allOverlaps.forEach(function (overlap, i) {
            if (i % 4 === 0) {
                width = Math.max(25, Math.round(100 / Math.max(allOverlaps.length - i + 1, 1)));
                pos = 0;
            }
            overlap.width = width;
            overlap.className = (overlap.className || "").split(' ')
                .filter(function (cn) { return cn !== 'splitted'; })
                .concat("splitted")
                .join(' '),
                overlap.pos = pos;
            pos += width;
        });
        result.push(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, event, { index: eventIndex, pos: pos, width: width, className: width < 100 ?
                (event.className ? event.className + " splitted" : "splitted") :
                event.className, prevOverlaps: allOverlaps }));
        /*if (isLastCall && moment(event.start).day() === 1) {
          if (/Sve2/.test(event.text)) {
            debugger;
          }
          if (/Franska/.test(event.text)) {
            debugger;
          }
          if (/Tyska/.test(event.text)) {
            debugger;
          }
          if (/spansk/.test(event.text)) debugger;
          if (/Eng6/.test(event.text)) debugger;
        }*/
    });
    return result;
}


/***/ }),

/***/ "./src/components/calendar/day-view-event.tsx":
/*!****************************************************!*\
  !*** ./src/components/calendar/day-view-event.tsx ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return DayViewEvent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _utils_constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/constants */ "./src/utils/constants.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");





function DayViewEvent(_a) {
    var id = _a.id, dayStart = _a.dayStart, startMoment = _a.startMoment, endMoment = _a.endMoment, text = _a.text, location = _a.location, description = _a.description, width = _a.width, pos = _a.pos, locale = _a.locale, zoom = _a.zoom, htmlLink = _a.htmlLink, className = _a.className;
    var top = (moment__WEBPACK_IMPORTED_MODULE_2___default()(startMoment).diff(dayStart) / _utils_constants__WEBPACK_IMPORTED_MODULE_3__["MINUTE"]) * zoom;
    var height = (moment__WEBPACK_IMPORTED_MODULE_2___default()(endMoment).diff(startMoment) / _utils_constants__WEBPACK_IMPORTED_MODULE_3__["MINUTE"]) * zoom;
    var localeTimeOptions = { hour: 'numeric', minute: '2-digit' };
    var localeStartTime = startMoment.toDate().toLocaleTimeString(locale, localeTimeOptions);
    var localeEndTime = endMoment.toDate().toLocaleTimeString(locale, localeTimeOptions);
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "dayviewevent " + className, style: {
            position: 'absolute',
            boxSizing: 'border-box',
            top: top,
            left: (pos || 0) + "%",
            width: (width || 100) + '%',
            height: height,
            maxHeight: height,
            overflow: 'hidden'
        }, title: localeStartTime + " - " + localeEndTime + " " + text +
            (location ?
                "\n" + Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Plats: ", ""], ["Plats: ", ""])), location) :
                "") +
            (description ?
                "\n" + description :
                "") },
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "event-title", href: htmlLink, target: "calendar-event" }, text),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "event-period" },
            localeStartTime,
            " - ",
            localeEndTime),
        location &&
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "event-location" }, location),
        description &&
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "event-description" }, description));
}
var templateObject_1;


/***/ }),

/***/ "./src/components/calendar/day-view.tsx":
/*!**********************************************!*\
  !*** ./src/components/calendar/day-view.tsx ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return DayView; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _day_view_event__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./day-view-event */ "./src/components/calendar/day-view-event.tsx");
/* harmony import */ var _time_lines__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./time-lines */ "./src/components/calendar/time-lines.tsx");
/* harmony import */ var _utils_constants__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/constants */ "./src/utils/constants.js");
/* harmony import */ var _crunch_colliding_events__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./crunch-colliding-events */ "./src/components/calendar/crunch-colliding-events.ts");






function DayView(_a) {
    var dayStart = _a.dayStart, // Milliseconds at start of the day (for example 08:00 the day)
    dayEnd = _a.dayEnd, // Milliseconds at end of the day (for example 17:00 the day)
    events = _a.events, // Events to show
    locale = _a.locale, zoom = _a.zoom, isLastCall = _a.isLastCall;
    var height = (moment__WEBPACK_IMPORTED_MODULE_1___default()(dayEnd).diff(dayStart) / _utils_constants__WEBPACK_IMPORTED_MODULE_4__["MINUTE"]) * zoom;
    var crunchedEvents = Object(_crunch_colliding_events__WEBPACK_IMPORTED_MODULE_5__["crunchCollidingEvents"])(events, isLastCall);
    return (react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "dayview", style: {
            top: 0,
            height: height,
            maxHeight: height,
            position: 'relative',
            overflow: 'hidden'
        } },
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"](_time_lines__WEBPACK_IMPORTED_MODULE_3__["default"], { dayStart: dayStart, dayEnd: dayEnd, zoom: zoom }),
        crunchedEvents.map(function (ev) { return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](_day_view_event__WEBPACK_IMPORTED_MODULE_2__["default"], { key: ev.id, id: ev.id, className: ev.className, dayStart: dayStart, startMoment: ev.startMoment, endMoment: ev.endMoment, text: ev.text, location: ev.location, description: ev.description, width: ev.width, pos: ev.pos, locale: locale, zoom: zoom, htmlLink: ev.htmlLink }); })));
}


/***/ }),

/***/ "./src/components/calendar/hour-marker.tsx":
/*!*************************************************!*\
  !*** ./src/components/calendar/hour-marker.tsx ***!
  \*************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return HourMarker; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);


function HourMarker(_a) {
    var startHour = _a.startHour, endHour = _a.endHour, locale = _a.locale, zoom = _a.zoom;
    var hourPixels = 60 * zoom;
    var hours = [];
    for (var hour = startHour; hour <= endHour; ++hour) {
        hours.push(hour);
    }
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "hourmarker", style: {
            position: 'relative',
            left: 0,
            top: 0,
            overflow: 'visible',
            height: (endHour - startHour) * hourPixels
        } }, hours.map(function (hour, i) {
        var ypos = i * hourPixels;
        return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("span", { key: hour },
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { style: {
                    position: 'absolute',
                    left: 0,
                    top: ypos,
                    marginTop: '-4px',
                    padding: 0
                } }, moment__WEBPACK_IMPORTED_MODULE_1___default()().hour(hour).minute(0).toDate().toLocaleString(locale, { hour: "2-digit", minute: "2-digit" })));
    }));
}


/***/ }),

/***/ "./src/components/calendar/index.tsx":
/*!*******************************************!*\
  !*** ./src/components/calendar/index.tsx ***!
  \*******************************************/
/*! exports provided: Calendar */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Calendar", function() { return Calendar; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _week_view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./week-view */ "./src/components/calendar/week-view.tsx");
/* harmony import */ var _apis_google_calendar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../apis/google-calendar */ "./src/apis/google-calendar.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _course_name_to_css_class__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./course-name-to-css-class */ "./src/components/calendar/course-name-to-css-class.ts");
/* harmony import */ var _should_include_calendar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./should-include-calendar */ "./src/components/calendar/should-include-calendar.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");










var Calendar = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Calendar, _super);
    function Calendar(props) {
        var _this = _super.call(this, props) || this;
        // Props
        var firstDay = props.firstDay;
        if (typeof firstDay === 'string' || typeof firstDay === 'number') {
            firstDay = moment__WEBPACK_IMPORTED_MODULE_4___default()().startOf('week').weekday(firstDay);
        }
        var _a = _this.props, initialStartHour = _a.initialStartHour, initialEndHour = _a.initialEndHour, initialZoom = _a.initialZoom;
        // State
        _this.state = {
            firstDay: firstDay,
            startHour: initialStartHour,
            endHour: initialEndHour,
            zoom: initialZoom,
            calendars: {},
            calendarsBeingLoaded: [],
            status: 'Loading calendars... (authenticating...)',
            error: null
        };
        var googleTokenProvider = (props.env || _globals_KED_env__WEBPACK_IMPORTED_MODULE_8__["default"]).googleTokenProvider;
        _this.gcal = new _apis_google_calendar__WEBPACK_IMPORTED_MODULE_3__["GoogleCalendar"](googleTokenProvider);
        // Start calling on Google API right away. Store promise in property.
        _this.gcal.ensureInited().then(function () {
            return _this.loadData(firstDay);
        }).catch(function (error) {
            _this.handleError(error);
        });
        return _this;
    }
    Calendar.prototype.handleError = function (error) {
        if (!error)
            error = "Unknown error";
        this.setState({ error: error });
        console.error(error.stack || error); // Keep!
    };
    Calendar.prototype.loadData = function (firstDay) {
        var _this = this;
        // Props
        var numDays = this.props.numDays;
        var intl = this.context.intl;
        this.setState({
            firstDay: firstDay,
            calendars: {},
            calendarsBeingLoaded: [],
            error: null,
            status: intl.formatMessage({ id: "calendar.loadingCalendar", defaultMessage: "Loading calendars... (listing...)" })
        });
        // Important to return the Promise so that caller will catch any error.
        return this.gcal.listCalendars().then(function (calendars) {
            // Ignore the "week numbers" calendar as we already include week numbers in our view
            calendars = calendars.filter(function (cal) { return Object(_should_include_calendar__WEBPACK_IMPORTED_MODULE_7__["shouldIncludeCalendar"])(cal); });
            //!/Week Numbers/ig.test(c.summary)
            //console.log(calendars.map(c => ({bgColor: c.backgroundColor, primary: c.primary, summary: c.summary, x: c})));
            // Calendars Successfully listed.
            _this.setState({
                status: intl.formatMessage({ id: "calendar.loadCalendarEvents", defaultMessage: "Load calendar events..." })
            });
            _this.gcal.batchEvents({
                calendarList: calendars,
                timeMin: moment__WEBPACK_IMPORTED_MODULE_4___default()(firstDay).startOf('day'),
                timeMax: moment__WEBPACK_IMPORTED_MODULE_4___default()(firstDay).add(numDays, 'days').endOf('day')
            }).then(function (result) {
                _this.setState({ calendars: result, status: '' });
            });
        });
    };
    Calendar.prototype.navigateToPreviousWeek = function () {
        var _this = this;
        this.loadData(moment__WEBPACK_IMPORTED_MODULE_4___default()(this.state.firstDay).add(-1, "week")).catch(function (error) {
            _this.handleError(error);
        });
    };
    Calendar.prototype.navigateToNextWeek = function () {
        var _this = this;
        this.loadData(moment__WEBPACK_IMPORTED_MODULE_4___default()(this.state.firstDay).add(1, "week")).catch(function (error) {
            _this.handleError(error);
        });
    };
    Calendar.prototype.render = function () {
        var _this = this;
        // Props
        var numDays = this.props.numDays;
        var intl = this.context.intl;
        // State
        var _a = this.state, firstDay = _a.firstDay, startHour = _a.startHour, endHour = _a.endHour, zoom = _a.zoom, calendars = _a.calendars, status = _a.status, error = _a.error;
        var eventSets = Object.keys(calendars)
            .map(function (calendarId) { return calendars[calendarId]; })
            .map(function (_a) {
            var calendar = _a.calendar, events = _a.events;
            var isSchedule = calendar.summary === 'Skolschema' && calendar.description === "Synchronized";
            var isHoliday = /holiday/.test(calendar.id);
            var isClassRoom = /classroom/.test(calendar.id);
            var classNames = [];
            if (calendar.colorId)
                classNames.push("gcal-palette-" + calendar.colorId);
            if (isSchedule)
                classNames.push("course-event");
            if (isHoliday)
                classNames.push("holiday-event");
            // Map Google Calendar events to our own format:
            return events.map(function (event) { return ({
                id: event.id,
                start: event.start,
                end: event.end,
                text: event.summary,
                location: event.location,
                description: event.description,
                //bgColor: calendar.backgroundColor,
                //fgColor: calendar.foregroundColor,
                htmlLink: event.htmlLink,
                className: (isSchedule && event.summary ?
                    classNames.concat(Object(_course_name_to_css_class__WEBPACK_IMPORTED_MODULE_6__["courseNameToCssClass"])('course-event-', event.summary)) :
                    classNames).join(" ")
            }); });
        });
        var events = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["flatten"])(eventSets);
        // Else, render the WeekView now. Any error should be displayed as red status
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { position: 'relative', top: 0, left: 0 } },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn-toolbar week-navigation" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn-group" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn", onClick: function () { return _this.navigateToPreviousWeek(); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-angle-left", "aria-hidden": "true" })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn", onClick: function () { return _this.navigateToNextWeek(); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-angle-right", "aria-hidden": "true" }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn-group" }, intl.formatMessage({ id: "calendar.currentDate", defaultMessage: "Vecka {week}, {year}" }, { week: moment__WEBPACK_IMPORTED_MODULE_4___default()(firstDay).week(), year: moment__WEBPACK_IMPORTED_MODULE_4___default()(firstDay).year() }))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_week_view__WEBPACK_IMPORTED_MODULE_2__["default"], { locale: intl.locale, firstDay: firstDay, startHour: startHour, endHour: endHour, numDays: numDays, zoom: zoom, events: events, status: status, error: error }));
    };
    Calendar.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_9__["LanguageContext"];
    return Calendar;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/calendar/should-include-calendar.ts":
/*!************************************************************!*\
  !*** ./src/components/calendar/should-include-calendar.ts ***!
  \************************************************************/
/*! exports provided: shouldIncludeCalendar */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shouldIncludeCalendar", function() { return shouldIncludeCalendar; });
/* Calendars to show:

    summary: "Matsedel",
    summary: "Skolschema",
    primary: true
    id.includes('classroom')
    id.includes('holiday')
*/
function shouldIncludeCalendar(cal) {
    var summary = cal.summary || "";
    var isOwner = /owner/ig.test(cal.accessRole);
    var isPrimary = !!cal.primary;
    var isClassroomCalendar = /classroom/ig.test(cal.id);
    var isHolidayCalendar = /holiday/ig.test(cal.id);
    return (isPrimary ||
        isClassroomCalendar ||
        isHolidayCalendar ||
        ///matsedel/ig.test(summary) ||
        (/schema/ig.test(summary) && isOwner));
}


/***/ }),

/***/ "./src/components/calendar/status-bar.tsx":
/*!************************************************!*\
  !*** ./src/components/calendar/status-bar.tsx ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return StatusBar; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function StatusBar(_a) {
    var status = _a.status, error = _a.error;
    if (!status && !error)
        return null;
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "statusbar" }, error ?
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("p", { className: "error" }, '' + error) :
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("p", { className: "status" }, status));
}


/***/ }),

/***/ "./src/components/calendar/time-lines.tsx":
/*!************************************************!*\
  !*** ./src/components/calendar/time-lines.tsx ***!
  \************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return TimeLines; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);


function TimeLines(_a) {
    var dayStart = _a.dayStart, dayEnd = _a.dayEnd, zoom = _a.zoom;
    var hourPixels = 60 * zoom;
    var startHour = moment__WEBPACK_IMPORTED_MODULE_1___default()(dayStart).hour();
    var endHour = moment__WEBPACK_IMPORTED_MODULE_1___default()(dayEnd).hour();
    var hours = [];
    for (var hour = startHour; hour <= endHour; ++hour) {
        hours.push(hour);
    }
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", null, hours.map(function (hour) {
        return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { key: hour, className: "timeline", style: {
                width: '100%',
                boxSizing: 'border-box',
                margin: hourPixels / 2 + "px 0 0 0",
                height: hourPixels / 2
            } });
    }));
}


/***/ }),

/***/ "./src/components/calendar/week-view.tsx":
/*!***********************************************!*\
  !*** ./src/components/calendar/week-view.tsx ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _day_view__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./day-view */ "./src/components/calendar/day-view.tsx");
/* harmony import */ var _hour_marker__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./hour-marker */ "./src/components/calendar/hour-marker.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _status_bar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./status-bar */ "./src/components/calendar/status-bar.tsx");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");








var WeekView = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](WeekView, _super);
    function WeekView() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    WeekView.prototype.render = function () {
        // Props:
        var _a = this.props, firstDay = _a.firstDay, // {moment} The day to start with (normally a monday)
        startHour = _a.startHour, // {number} The hour to start on
        endHour = _a.endHour, // {number} The hour to end rendering per day
        numDays = _a.numDays, // {number} Number of days, normally 5.
        events = _a.events, // Array of events to display in the week.
        locale = _a.locale, // Locale to use for showing week days and hour marks.
        zoom = _a.zoom, // {number} Zoom where 1 means that 1 minute = 1 pixel.  
        status = _a.status, error = _a.error;
        var intl = this.context.intl;
        // Prepare DayView datas 
        var dayDatas = [];
        var day = moment__WEBPACK_IMPORTED_MODULE_2___default()(firstDay);
        var _loop_1 = function (i) {
            var dayStart = moment__WEBPACK_IMPORTED_MODULE_2___default()(day).hour(startHour);
            var dayEnd = moment__WEBPACK_IMPORTED_MODULE_2___default()(day).hour(endHour);
            var dayDate = moment__WEBPACK_IMPORTED_MODULE_2___default()(day).format('yyyy-MM-DD');
            var isToday = moment__WEBPACK_IMPORTED_MODULE_2___default()(dayStart).startOf("day").valueOf() === moment__WEBPACK_IMPORTED_MODULE_2___default()().startOf("day").valueOf();
            dayDatas.push({
                name: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["capitalizeFirst"])(dayStart.toDate().toLocaleString(locale, {
                    weekday: 'long',
                    day: 'numeric',
                    month: 'short'
                })),
                dayStart: dayStart,
                dayEnd: dayEnd,
                isToday: isToday,
                events: events.filter(function (event) {
                    return event.start && event.end && event.start.dateTime && event.end.dateTime &&
                        (moment__WEBPACK_IMPORTED_MODULE_2___default()(event.start.dateTime).isBetween(dayStart, dayEnd) ||
                            moment__WEBPACK_IMPORTED_MODULE_2___default()(event.end.dateTime).isBetween(dayStart, dayEnd));
                })
                    // Change start / end to directly point to the dateTime
                    .map(function (event) { return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["clone"])(event, { startMoment: moment__WEBPACK_IMPORTED_MODULE_2___default()(event.start.dateTime), endMoment: moment__WEBPACK_IMPORTED_MODULE_2___default()(event.end.dateTime) }); })
                    .sort(function (a, b) { return a.startMoment.valueOf > b.startMoment.valueOf ? 1 : a.startMoment < b.startMoment ? -1 : 0; }),
                fullDayEvents: events.filter(function (event) {
                    // Verify that it is a full-day-event
                    return event.start && event.end && event.start.date && event.end.date &&
                        // Verify it applies to current day
                        (event.start.date <= dayDate && event.end.date > dayDate);
                })
                    // Change start / end to directly point to the date object
                    .map(function (event) { return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["clone"])(event, {
                    startDate: event.start.date,
                    endDate: event.end.date
                }); })
            });
            day = moment__WEBPACK_IMPORTED_MODULE_2___default()(day) // clone it
                .add(1, 'days'); // Add another day
        };
        for (var i = 0; i < numDays; ++i) {
            _loop_1(i);
        }
        // Render
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "vemendo-weekview" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { style: { border: 0 } }),
                        dayDatas.map(function (d) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: d.dayStart.toISOString(), className: d.isToday ? "today" : null },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "dayname" }, d.name)); })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { style: { border: 0 } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "week-number" }, intl.formatMessage({ id: "calendar.weekNumber", defaultMessage: "V{weekNumber}" }, { weekNumber: moment__WEBPACK_IMPORTED_MODULE_2___default()(firstDay).week() }))),
                        dayDatas.map(function (day) {
                            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: day.dayStart.toISOString(), className: day.isToday ? "today" : null }, day.fullDayEvents.map(function (_a) {
                                var id = _a.id, text = _a.text, location = _a.location, description = _a.description, htmlLink = _a.htmlLink, className = _a.className;
                                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: id, className: "dayviewevent full-day " + className, title: "" + text + (location ?
                                        "\n" + intl.formatMessage({ id: "calendar.fullDayEventLocation", defaultMessage: "Plats: {location}" }, { location: location }) :
                                        "") +
                                        (description ?
                                            "\n" + description :
                                            "") },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "event-title", href: htmlLink, target: "calendar-event" }, text),
                                    location &&
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "event-location" }, location),
                                    description &&
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "event-description" }, description));
                            }));
                        })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { style: { border: 0 } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_hour_marker__WEBPACK_IMPORTED_MODULE_4__["default"], { startHour: startHour, endHour: endHour, locale: locale, zoom: zoom })),
                        dayDatas.map(function (day) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: day.dayStart.toISOString(), className: day.isToday ? "today" : null },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_day_view__WEBPACK_IMPORTED_MODULE_3__["default"], { key: day.dayStart.toISOString(), dayStart: day.dayStart, dayEnd: day.dayEnd, events: day.events, locale: locale, zoom: zoom, isLastCall: status == '' }),
                            " "); })),
                    (status || error) && (!error || error.name !== "UnauthorizedError") &&
                        //
                        // Show status / error
                        //
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { style: { border: 0 } }),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { style: { border: 0 }, colSpan: numDays },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_status_bar__WEBPACK_IMPORTED_MODULE_6__["default"], { status: status, error: error }))))));
    };
    WeekView.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_7__["LanguageContext"];
    return WeekView;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));
/* harmony default export */ __webpack_exports__["default"] = (WeekView);


/***/ }),

/***/ "./src/components/charts/charts-utils.ts":
/*!***********************************************!*\
  !*** ./src/components/charts/charts-utils.ts ***!
  \***********************************************/
/*! exports provided: getWeekplannerProgressData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getWeekplannerProgressData", function() { return getWeekplannerProgressData; });
function getWeekplannerProgressData(taskSets) {
    var chartTasks = { completedTasks: 0, totalNumberOfTasks: 0, subjectData: {} };
    taskSets.forEach(function (elem) { return elem.learningGoals.forEach(function (x) {
        var subjectCompletedTasks = x.tasks.filter(function (t) { return t.done; }).length;
        var courseSubjectData = chartTasks.subjectData[elem.courseName];
        if (!courseSubjectData) {
            courseSubjectData = chartTasks.subjectData[elem.courseName] = {
                completedNumberOfTasks: 0,
                numberOfTasks: 0
            };
        }
        courseSubjectData.completedNumberOfTasks += subjectCompletedTasks;
        courseSubjectData.numberOfTasks += x.tasks.length;
        chartTasks.completedTasks += subjectCompletedTasks;
        chartTasks.totalNumberOfTasks += x.tasks.length;
    }); });
    return chartTasks;
}


/***/ }),

/***/ "./src/components/charts/doughnut.tsx":
/*!********************************************!*\
  !*** ./src/components/charts/doughnut.tsx ***!
  \********************************************/
/*! exports provided: Doughnut */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Doughnut", function() { return Doughnut; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var Doughnut = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Doughnut, _super);
    function Doughnut() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Doughnut.prototype.render = function () {
        var _a = this.props, percentage = _a.percentage, errorMessage = _a.errorMessage, backgroundColor = _a.backgroundColor, progressColor = _a.progressColor;
        //default values
        var stroke = 2;
        //equals with he circumference/2II
        var radius = 100 / (2 * 3.14);
        //take into account the stroke
        var center = radius + stroke;
        var viewboxW = center * 2;
        var viewvboxH = center * 2;
        var roundedPercentage = Math.round(percentage);
        var startErrorText = 10;
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("svg", { className: "doughnut-chart", viewBox: "0 0 " + viewboxW + " " + viewvboxH, width: "100%", height: "100%" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("circle", { className: "circle-chart-background", stroke: backgroundColor, strokeWidth: stroke + 1, fill: "none", cx: center, cy: center, r: radius }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("circle", { className: "circle-chart-circle", stroke: progressColor, ref: "progressCircle", strokeWidth: stroke, style: { strokeDasharray: roundedPercentage + ", 100" }, strokeLinecap: "round", fill: "none", cx: center, cy: center, r: radius }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("g", { className: "circle-chart-info" }, !errorMessage ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("text", { className: "circle-chart-percent", x: center, y: center, alignmentBaseline: "central", textAnchor: "middle" }, roundedPercentage + "%") :
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("text", { className: "circle-chart-percent-error", x: center, y: center, alignmentBaseline: "central", fontSize: "5", textAnchor: "middle" }, errorMessage.split(' ').map(function (element) {
                    var tspan = react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tspan", { key: element, x: center, y: startErrorText }, element);
                    startErrorText += 5;
                    return tspan;
                })))));
    };
    Doughnut.defaultProps = {
        backgroundColor: "#efefef",
        progressColor: "#3dbca2",
        errorMessage: null
    };
    return Doughnut;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/charts/goal-progress.tsx":
/*!*************************************************!*\
  !*** ./src/components/charts/goal-progress.tsx ***!
  \*************************************************/
/*! exports provided: GoalProgress */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoalProgress", function() { return GoalProgress; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var GoalProgress = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](GoalProgress, _super);
    function GoalProgress() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.createProgress = function () {
            var _a = _this.props, numberOfTasks = _a.numberOfTasks, completedNumberOfTasks = _a.completedNumberOfTasks, maximumTasksDisplayed = _a.maximumTasksDisplayed, backgroundColor = _a.backgroundColor, progressColor = _a.progressColor;
            var progress = [];
            if (numberOfTasks > maximumTasksDisplayed) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "progress-overview" },
                    " ",
                    completedNumberOfTasks,
                    " / ",
                    numberOfTasks,
                    " ");
            }
            for (var taskNo = 1; taskNo <= numberOfTasks; taskNo++) {
                progress.push(react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("svg", { key: taskNo },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("circle", { className: "circle-chart-background", fill: taskNo > completedNumberOfTasks ? backgroundColor : progressColor, cx: "8", cy: "8", r: "8" })));
            }
            return progress;
        };
        return _this;
    }
    GoalProgress.prototype.render = function () {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "goals-progress" }, this.createProgress());
    };
    GoalProgress.defaultProps = {
        numberofTasks: 0,
        completedNumberOfTasks: 0,
        maximumTasksDisplayed: 10,
        backgroundColor: "lightgrey",
        progressColor: "#3dbca2",
    };
    return GoalProgress;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/charts/progress.tsx":
/*!********************************************!*\
  !*** ./src/components/charts/progress.tsx ***!
  \********************************************/
/*! exports provided: Progress */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Progress", function() { return Progress; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var Progress = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Progress, _super);
    function Progress() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Progress.prototype.render = function () {
        var _a = this.props, percentage = _a.percentage, backgroundColor = _a.backgroundColor, progressColor = _a.progressColor;
        var roundedPercentage = Math.round(percentage);
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("svg", { className: "progress-chart", width: "100%", height: "25" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("rect", { fill: backgroundColor, width: "100%", height: "100%", rx: "4" }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("rect", { className: "fill", fill: progressColor, width: roundedPercentage + "%", height: "100%", rx: "4" }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("text", { className: "filled-text", textAnchor: "middle", x: "50%", y: "50%", dy: ".3em" }, roundedPercentage + "%")));
    };
    Progress.defaultProps = {
        percentage: 0,
        backgroundColor: "#F1F5F4",
        progressColor: "#3dbca2",
    };
    return Progress;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-builder/sub-components/remove-item.tsx":
/*!**********************************************************************!*\
  !*** ./src/components/course-builder/sub-components/remove-item.tsx ***!
  \**********************************************************************/
/*! exports provided: RemoveItem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RemoveItem", function() { return RemoveItem; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");



;
var RemoveItem = function (_a) {
    var onClick = _a.onClick, className = _a.className, style = _a.style, title = _a.title;
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { title: title || Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Radera"], ["Radera"]))), className: "removeItem " + (className || ""), onClick: onClick, style: style });
};
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder/sub-components/spinner.tsx":
/*!******************************************************************!*\
  !*** ./src/components/course-builder/sub-components/spinner.tsx ***!
  \******************************************************************/
/*! exports provided: Spinner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Spinner", function() { return Spinner; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var Spinner = function () { return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("span", null,
    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("i", { className: "fa fa-spinner fa-spin", "aria-hidden": "true" }),
    "\u00A0"); };


/***/ }),

/***/ "./src/components/course-viewer/subcomponents/confirmation.tsx":
/*!*********************************************************************!*\
  !*** ./src/components/course-viewer/subcomponents/confirmation.tsx ***!
  \*********************************************************************/
/*! exports provided: Confirmation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Confirmation", function() { return Confirmation; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function Confirmation(props) {
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "confirmation-box " + props.className + (props.visible ? " visible" : "") },
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("p", null, props.text),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("button", { onClick: function () { return props.onConfirm(); } }, "OK"),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("button", { onClick: function () { return props.onCancel(); } }, "Avbryt"));
}


/***/ }),

/***/ "./src/components/course-viewer/subcomponents/learning-goals-list.tsx":
/*!****************************************************************************!*\
  !*** ./src/components/course-viewer/subcomponents/learning-goals-list.tsx ***!
  \****************************************************************************/
/*! exports provided: LearningGoalsList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LearningGoalsList", function() { return LearningGoalsList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _task_list__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./task-list */ "./src/components/course-viewer/subcomponents/task-list.tsx");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");




var LearningGoalsList = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](LearningGoalsList, _super);
    function LearningGoalsList() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    LearningGoalsList.prototype.render = function () {
        var _a = this.props, commonTasks = _a.commonTasks, learningGoals = _a.learningGoals;
        var intl = this.context.intl;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            learningGoals.map(function (lg) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: lg.name },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, lg.name),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_task_list__WEBPACK_IMPORTED_MODULE_2__["TaskList"], { learningTasks: lg.learningTasks })); }),
            commonTasks.length > 0 && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                learningGoals.length > 0 && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, intl.formatMessage({ id: "learningGoalsLost.overall", defaultMessage: "vergripande" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_task_list__WEBPACK_IMPORTED_MODULE_2__["TaskList"], { learningTasks: commonTasks })));
    };
    LearningGoalsList.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_3__["LanguageContext"];
    return LearningGoalsList;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-viewer/subcomponents/task-list.tsx":
/*!******************************************************************!*\
  !*** ./src/components/course-viewer/subcomponents/task-list.tsx ***!
  \******************************************************************/
/*! exports provided: TaskList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskList", function() { return TaskList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../repos/user-tasks-repo */ "./src/repos/user-tasks-repo.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _confirmation__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./confirmation */ "./src/components/course-viewer/subcomponents/confirmation.tsx");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");









var TaskList = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TaskList, _super);
    function TaskList(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            userTasks: [],
            weekDate: Date.now(),
            confirmations: []
        };
        _this.onChange = _this.onChange.bind(_this);
        return _this;
    }
    TaskList.prototype.onChange = function (userTasks, persisted) {
        if (persisted.weekDate !== this.state.weekDate) {
            this.setState({
                confirmations: []
            });
        }
        this.setState({
            userTasks: userTasks,
            weekDate: persisted.weekDate
        });
    };
    TaskList.prototype.componentDidMount = function () {
        _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].subscribe(this.onChange);
    };
    TaskList.prototype.componentWillUnmount = function () {
        _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].unsubscribe(this.onChange);
    };
    TaskList.prototype.toggleTask = function (learningTask) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var userTasks, weekDate, latestTimeStamp, userTask;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        userTasks = this.state.userTasks.filter(function (ut) {
                            return learningTask.task ?
                                ut.task && ut.task.some(function (t) { return t.id === learningTask.id; }) :
                                ut.siteVisionPageId === learningTask.id;
                        });
                        weekDate = this.state.weekDate;
                        if (!(userTasks.length === 0)) return [3 /*break*/, 2];
                        latestTimeStamp = Math.max.apply(Math.max, [weekDate].concat(this.state.userTasks.map(function (t) { return t.dateTime; })));
                        userTask = {
                            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["createUUID"])(),
                            courseName: learningTask.courseName,
                            dateTime: latestTimeStamp + 2000,
                            learningGoal: learningTask.learningGoal,
                            name: learningTask.name,
                            url: learningTask.url,
                            acl: [
                                // Default ACL: Let user self have full control over this item:
                                new kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["DocumentAccess"]("email", _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail, "S"),
                                // Additional ACL: Let employees on same school have read access to it.
                                // This currently only applies to tasks that refer to course tasks (not custom tasks!)
                                new kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["DocumentAccess"]("schoolRole", _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.school + "/EMPLOYEE", "R")
                            ].map(function (ac) { return ac.toString(); })
                        };
                        if (learningTask.task && learningTask.task.deadline) {
                            userTask.deadline = learningTask.task.deadline;
                        }
                        if (learningTask.task) {
                            userTask.task = [learningTask.task];
                            if (learningTask.course) {
                                userTask.course = [learningTask.course];
                            }
                            else if (learningTask.courseInfo) {
                                userTask.courseInfo = learningTask.courseInfo;
                            }
                        }
                        else {
                            userTask.siteVisionPageId = learningTask.id;
                        }
                        if (learningTask.step) {
                            userTask.step = learningTask.step;
                        }
                        return [4 /*yield*/, Promise.all([
                                _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].setWeekPlannerBoxOpen(learningTask.courseName, true),
                                _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].insert([userTask])
                            ])];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 4];
                    case 2: 
                    // Already present in weekplanner. It's time to delete those that matched us.
                    return [4 /*yield*/, _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].delete(userTasks.map(function (t) { return t.id; }))];
                    case 3:
                        // Already present in weekplanner. It's time to delete those that matched us.
                        _a.sent();
                        _a.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    TaskList.prototype.render = function () {
        var _this = this;
        var intl = this.context.intl;
        var learningTasks = this.props.learningTasks;
        var userTasks = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["arrayToMap"])(this.state.userTasks, function (ut) { return ut.task && ut.task.length > 0 ?
            ut.task.map(function (t) { return t.id; })[0] : // course-builder tasks looked up by id
            ut.siteVisionPageId ? ut.siteVisionPageId : // non-course-builder tasks
                ut.url; });
        var confirmations = this.state.confirmations;
        var weekPlannerWeek = moment__WEBPACK_IMPORTED_MODULE_3___default()(this.state.weekDate).week();
        var currentWeek = moment__WEBPACK_IMPORTED_MODULE_3___default()().week();
        var forWeekString = weekPlannerWeek === currentWeek ? "" :
            weekPlannerWeek === currentWeek + 1 ? intl.formatMessage({ id: "taskList.nextWeekTask", defaultMessage: "fr nsta vecka (v{week})" }, { week: weekPlannerWeek }) :
                weekPlannerWeek === currentWeek - 1 ? intl.formatMessage({ id: "taskList.lastWeekTask", defaultMessage: "fr frra veckan (v{week})" }, { week: weekPlannerWeek }) :
                    intl.formatMessage({ id: "taskList.currentWeekTask", defaultMessage: "fr vecka {week}" }, { week: weekPlannerWeek });
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "taskContainer" }, learningTasks.map(function (learningTask, idx) {
            var taskLookupId = learningTask.id;
            var userTask = userTasks[taskLookupId] || { $meta: 'deleted' }; // No exist = $meta: 'deleted'
            var isWorking = userTask.$meta === 'adding' || userTask.$meta === 'deleting';
            var selected = userTask.$meta !== 'deleted' && userTask.$meta !== 'deleting';
            var describedAction = selected ?
                intl.formatMessage({ id: "taskList.removeTaskFromWeeklyPlanning", defaultMessage: "Ta bort uppgiften frn egen veckoplanering {week}" }, { week: forWeekString }) :
                intl.formatMessage({ id: "taskList.addTaskToWeeklyPlanning", defaultMessage: "Lgg till uppgiften i egen veckoplanering {week}" }, { week: forWeekString });
            var confirmationVisible = confirmations.some(function (tid) { return taskLookupId === tid; });
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: learningTask.id },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: taskLookupId, className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "selectedBox" + (selected ? ' selected' : ''), style: isWorking ? { opacity: 0.5 } : {}, onClick: function () { return !isWorking && weekPlannerWeek === currentWeek ?
                                _this.toggleTask(learningTask) :
                                confirmationVisible ?
                                    _this.setState({ confirmations: confirmations.filter(function (tid) { return tid !== taskLookupId; }) }) :
                                    _this.setState({ confirmations: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](confirmations).concat(taskLookupId) }); }, title: describedAction })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: learningTask.url }, learningTask.name))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_confirmation__WEBPACK_IMPORTED_MODULE_7__["Confirmation"], { visible: confirmationVisible, text: describedAction, onConfirm: function () {
                        _this.toggleTask(learningTask);
                        _this.setState({ confirmations: confirmations.filter(function (tid) { return tid !== taskLookupId; }) });
                    }, onCancel: function () {
                        _this.setState({ confirmations: confirmations.filter(function (tid) { return tid !== taskLookupId; }) });
                    } }));
        }));
    };
    TaskList.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_8__["LanguageContext"];
    return TaskList;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/kg-termplanner/kg-termplanner-self.tsx":
/*!***************************************************************!*\
  !*** ./src/components/kg-termplanner/kg-termplanner-self.tsx ***!
  \***************************************************************/
/*! exports provided: KGTermPlannerSelf */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KGTermPlannerSelf", function() { return KGTermPlannerSelf; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _kg_termplanner__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./kg-termplanner */ "./src/components/kg-termplanner/kg-termplanner.tsx");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");



function KGTermPlannerSelf() {
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](_kg_termplanner__WEBPACK_IMPORTED_MODULE_1__["KGTermPlanner"], { env: _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"], tutored: false });
}


/***/ }),

/***/ "./src/components/kg-termplanner/kg-termplanner-tutored.tsx":
/*!******************************************************************!*\
  !*** ./src/components/kg-termplanner/kg-termplanner-tutored.tsx ***!
  \******************************************************************/
/*! exports provided: KGTermPlannerTutored */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KGTermPlannerTutored", function() { return KGTermPlannerTutored; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _kg_termplanner__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./kg-termplanner */ "./src/components/kg-termplanner/kg-termplanner.tsx");
/* harmony import */ var _utility_components_tutorable_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility-components/tutorable-component */ "./src/components/utility-components/tutorable-component.tsx");



function KGTermPlannerTutored() {
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](_utility_components_tutorable_component__WEBPACK_IMPORTED_MODULE_2__["TutorableComponent"], { tutored: true, createComponent: function (env) {
            return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](_kg_termplanner__WEBPACK_IMPORTED_MODULE_1__["KGTermPlanner"], { key: env.currentUser.mail, env: env, tutored: true });
        } });
}


/***/ }),

/***/ "./src/components/kg-termplanner/kg-termplanner.tsx":
/*!**********************************************************!*\
  !*** ./src/components/kg-termplanner/kg-termplanner.tsx ***!
  \**********************************************************/
/*! exports provided: KGTermPlanner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KGTermPlanner", function() { return KGTermPlanner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _apis_edsclient__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../apis/edsclient */ "./src/apis/edsclient.ts");
/* harmony import */ var _utils_school_moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/school-moment */ "./src/utils/school-moment.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _utility_components_dialogs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utility-components/dialogs */ "./src/components/utility-components/dialogs.tsx");
/* harmony import */ var _week_note_dialog__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./week-note-dialog */ "./src/components/kg-termplanner/week-note-dialog.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _utils_weekutil__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../utils/weekutil */ "./src/utils/weekutil.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _ks_termplanner_tutor_dialog__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../ks-termplanner/tutor-dialog */ "./src/components/ks-termplanner/tutor-dialog.tsx");
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../features */ "./src/features/index.ts");













var KGTermPlanner = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](KGTermPlanner, _super);
    function KGTermPlanner(props) {
        var _this = _super.call(this, props) || this;
        var now = new Date();
        _this.state = {
            now: now,
            courses: [],
            weekPlans: [],
            isLoadingCourses: true,
            isLoadingWeekPlans: true,
            dialogs: []
            //goals: []
        };
        _this.updateWeekPlans = _this.updateWeekPlans.bind(_this);
        return _this;
    }
    KGTermPlanner.prototype.componentDidMount = function () {
        this.loadEDSCourses();
        this.props.env.kgTermPlannerRepo.mem.subscribe(this.updateWeekPlans);
    };
    KGTermPlanner.prototype.componentWillUnmount = function () {
        this.props.env.kgTermPlannerRepo.mem.unsubscribe(this.updateWeekPlans);
    };
    KGTermPlanner.prototype.updateWeekPlans = function (weekPlans) {
        this.setState({ weekPlans: weekPlans, isLoadingWeekPlans: false });
    };
    KGTermPlanner.prototype.loadEDSCourses = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var schoolMoment, periodName, courses, _a;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _b.trys.push([0, , 2, 3]);
                        schoolMoment = Object(_utils_school_moment__WEBPACK_IMPORTED_MODULE_3__["getSchoolMoment"])(moment__WEBPACK_IMPORTED_MODULE_4___default()(this.state.now));
                        periodName = new _apis_edsclient__WEBPACK_IMPORTED_MODULE_2__["EDSPeriod"](schoolMoment).period;
                        _a = _utils_utils__WEBPACK_IMPORTED_MODULE_8__["distinct"];
                        return [4 /*yield*/, this.props.env.edsClient.getActiveCourses({ periodName: periodName })];
                    case 1:
                        courses = _a.apply(void 0, [_b.sent(), function (course) { return course.name; }]);
                        //console.log("courses:" + JSON.stringify(courses, null, 2));
                        this.setState({ courses: courses });
                        return [3 /*break*/, 3];
                    case 2:
                        this.setState({ isLoadingCourses: false });
                        return [7 /*endfinally*/];
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    KGTermPlanner.prototype.onNoteClick = function (weekNumber, weekDate, courseName, weekPlan, note) {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_week_note_dialog__WEBPACK_IMPORTED_MODULE_7__["WeekNoteDialog"], { weekNumber: weekNumber, weekDate: weekDate, courseName: courseName, weekPlan: weekPlan, note: note, env: this.props.env, closeDialog: function () { return _this.closeDialog(); } }));
    };
    /**
   *
   * @param weekNumber
   * @param comment
   *
   * Add a comment from tutor
   */
    KGTermPlanner.prototype.onTutorClick = function (tutorNote, weekNumber) {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_ks_termplanner_tutor_dialog__WEBPACK_IMPORTED_MODULE_11__["TutorDialog"], { weekNumber: weekNumber, comment: tutorNote.value, updateData: function (newValue) { return _this.updateTutorNoteField(tutorNote, newValue); }, deleteNoteData: function () { return _this.deleteTutorNoteField(tutorNote.id); }, closeDialog: function () { return _this.closeDialog(); } }));
    };
    KGTermPlanner.prototype.deleteTutorNoteField = function (noteId) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var showError_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 2, , 3]);
                        return [4 /*yield*/, this.props.env.kgTermPlannerRepo.delete([noteId])];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 3];
                    case 2:
                        showError_1 = _a.sent();
                        return [3 /*break*/, 3];
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    KGTermPlanner.prototype.updateTutorNoteField = function (tutorNote, newValue) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var oldValue, showError_2;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        oldValue = (tutorNote && tutorNote.value) || "";
                        if (oldValue === newValue)
                            return [2 /*return*/];
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 3, , 4]);
                        tutorNote.value = newValue;
                        //set document ACL
                        tutorNote.acl = [
                            new kedbackend_client__WEBPACK_IMPORTED_MODULE_10__["DocumentAccess"]("tutorFor", this.props.env.currentUser.mail, "S").toString(),
                            new kedbackend_client__WEBPACK_IMPORTED_MODULE_10__["DocumentAccess"]("email", this.props.env.currentUser.mail, "R").toString(),
                        ];
                        return [4 /*yield*/, this.props.env.kgTermPlannerRepo.upsert(tutorNote, function (note) { return note.value = newValue; })];
                    case 2: return [2 /*return*/, _a.sent()];
                    case 3:
                        showError_2 = _a.sent();
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    KGTermPlanner.prototype.openDialog = function (dialog) {
        this.setState({ dialogs: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](this.state.dialogs, [dialog]) });
    };
    KGTermPlanner.prototype.closeDialog = function () {
        this.setState({ dialogs: this.state.dialogs.slice(0, this.state.dialogs.length - 1) });
    };
    KGTermPlanner.prototype.render = function () {
        var _this = this;
        var _a = this.state, courses = _a.courses, now = _a.now, isLoadingCourses = _a.isLoadingCourses, isLoadingWeekPlans = _a.isLoadingWeekPlans, weekPlans = _a.weekPlans, dialogs = _a.dialogs;
        var isLoading = isLoadingCourses || isLoadingWeekPlans;
        var weeks = [];
        var tutorNotes = [];
        var schoolMoment = Object(_utils_school_moment__WEBPACK_IMPORTED_MODULE_3__["getSchoolMoment"])(moment__WEBPACK_IMPORTED_MODULE_4___default()(now));
        var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](Object(_utils_school_moment__WEBPACK_IMPORTED_MODULE_3__["getTermStarEndDate"])(now, schoolMoment.term === 'AT'), 2), termStart = _b[0], termEnd = _b[1];
        var _c = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](Object(_utils_school_moment__WEBPACK_IMPORTED_MODULE_3__["getFirstAndLastWeekOfTerm"])(schoolMoment.term), 2), firstWeek = _c[0], lastWeek = _c[1];
        var showKgTutorCommentField = _features__WEBPACK_IMPORTED_MODULE_12__["features"].kgTutorComment;
        var currentWeekPlans = weekPlans.filter(function (x) { return !x.type; });
        var currentTutorNotes = weekPlans.filter(function (x) { return x.type === 'tutor-note'; });
        var _loop_1 = function (weekMoment) {
            var weekNumber = weekMoment.week();
            var weekYear = weekMoment.year();
            var kedWeek = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_9__["KEDWeek"])(weekYear, weekNumber);
            if (weekNumber >= firstWeek && weekNumber <= lastWeek) {
                var weekPlan = currentWeekPlans.filter(function (wp) {
                    return wp.dateTime >= kedWeek.notBefore &&
                        wp.dateTime <= kedWeek.notAfter;
                })[0];
                var tutorNote = currentTutorNotes.filter(function (wp) {
                    return wp.dateTime >= kedWeek.notBefore &&
                        wp.dateTime <= kedWeek.notAfter;
                })[0];
                var startOfWeek = weekMoment.clone().startOf('week').valueOf();
                weeks.push({
                    weekNumber: weekNumber,
                    weekDate: startOfWeek,
                    weekPlan: weekPlan
                });
                tutorNotes.push({
                    weekNumber: weekNumber,
                    tutorValue: tutorNote || { value: '', dateTime: startOfWeek, id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_10__["createUUID"])(), type: 'tutor-note' }
                });
            }
        };
        for (var weekMoment = termStart.clone(); weekMoment.valueOf() < termEnd.valueOf(); weekMoment = weekMoment.clone().add(1, 'week').startOf('week')) {
            _loop_1(weekMoment);
        }
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "ked_boxed" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null, "Terminsplanering"),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
            isLoading ?
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_5__["Spinner"], null) : courses.length === 0 ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, "Terminsplaneraren aktiveras n\u00E4r du skrivits in p\u00E5 dina kurser") :
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", { className: "termplanner-table zebra" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Vecka"),
                            courses.map(function (c, idx) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: idx, className: "kgCourseHeader" }, c.name); }),
                            showKgTutorCommentField && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { className: "tutorHeader" }))),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, weeks.map(function (w, idx) {
                        var isCurrentWeek = w.weekNumber === moment__WEBPACK_IMPORTED_MODULE_4___default()().week();
                        var noteValue = tutorNotes && tutorNotes.find(function (tn) { return tn.weekNumber === w.weekNumber; });
                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: idx, className: isCurrentWeek ? "currentWeek" : "" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, w.weekNumber),
                            courses.map(function (c, idx) {
                                var note = w.weekPlan && w.weekPlan.plans[c.name];
                                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: idx, className: note ? "courseNote note-color-" + note.color : "courseNote", "data-tooltip": note && note.description, title: note && note.description, onClick: function () { return _this.onNoteClick(w.weekNumber, w.weekDate, c.name, w.weekPlan, note); } }, note ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fas fa-align-center" }) : '');
                            }),
                            showKgTutorCommentField && (_this.props.tutored ?
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: idx, onClick: function () { return _this.onTutorClick(noteValue.tutorValue, w.weekNumber); }, className: "tutorCell" }, noteValue.tutorValue.value ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: idx, "data-tooltip": noteValue.tutorValue.value },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fas fa-comment-dots" })) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: idx },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fas fa-comment-medical" })))
                                :
                                    noteValue.tutorValue.value ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "tutorCell" },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { "data-tooltip": noteValue.tutorValue.value },
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "far fa-comment-dots" }))) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null)));
                    })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tfoot", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: "points" }, "Po\u00E4ng"),
                            courses.map(function (c, idx) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: idx, className: "stepCell" }, c.credits); })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Betygsm\u00E5l"),
                            courses.map(function (c, idx) {
                                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: idx, className: "stepCell" }, c.periodGoalGrade);
                            })))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_dialogs__WEBPACK_IMPORTED_MODULE_6__["Dialogs"], { dialogs: dialogs, popDialog: function () { return _this.setState({ dialogs: dialogs.slice(0, dialogs.length - 1) }); } }));
    };
    return KGTermPlanner;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/kg-termplanner/week-note-dialog.tsx":
/*!************************************************************!*\
  !*** ./src/components/kg-termplanner/week-note-dialog.tsx ***!
  \************************************************************/
/*! exports provided: WeekNoteDialog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WeekNoteDialog", function() { return WeekNoteDialog; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");



var WeekNoteDialog = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](WeekNoteDialog, _super);
    function WeekNoteDialog(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            description: props.note ? props.note.description : '',
            color: props.note ? props.note.color : 'yellow'
        };
        return _this;
    }
    WeekNoteDialog.prototype.delete = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, weekNumber, weekDate, courseName, weekPlan, note, closeDialog, env, _b, description, color;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _a = this.props, weekNumber = _a.weekNumber, weekDate = _a.weekDate, courseName = _a.courseName, weekPlan = _a.weekPlan, note = _a.note, closeDialog = _a.closeDialog, env = _a.env;
                        _b = this.state, description = _b.description, color = _b.color;
                        closeDialog();
                        if (!(Object.keys(weekPlan.plans).length === 1)) return [3 /*break*/, 2];
                        return [4 /*yield*/, env.kgTermPlannerRepo.delete([weekPlan.id])];
                    case 1:
                        _c.sent();
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, env.kgTermPlannerRepo.update([weekPlan], function (wp) {
                            delete wp.plans[courseName];
                        })];
                    case 3:
                        _c.sent();
                        _c.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    WeekNoteDialog.prototype.save = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, weekNumber, weekDate, courseName, weekPlan, note, closeDialog, env, _b, description, color, plans;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _a = this.props, weekNumber = _a.weekNumber, weekDate = _a.weekDate, courseName = _a.courseName, weekPlan = _a.weekPlan, note = _a.note, closeDialog = _a.closeDialog, env = _a.env;
                        _b = this.state, description = _b.description, color = _b.color;
                        closeDialog();
                        if (description.length == 0) {
                            return [2 /*return*/];
                        }
                        if (!weekPlan) return [3 /*break*/, 2];
                        return [4 /*yield*/, env.kgTermPlannerRepo.update([weekPlan], function (wp) { return wp.plans[courseName] = { description: description, color: color }; })];
                    case 1:
                        _c.sent();
                        return [3 /*break*/, 4];
                    case 2:
                        plans = {};
                        plans[courseName] = { description: description, color: color };
                        return [4 /*yield*/, env.kgTermPlannerRepo.insert([{
                                    id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["createUUID"])(),
                                    dateTime: weekDate,
                                    plans: plans
                                }])];
                    case 3:
                        _c.sent();
                        _c.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    WeekNoteDialog.prototype.render = function () {
        var _this = this;
        var _a = this.props, weekNumber = _a.weekNumber, courseName = _a.courseName, weekPlan = _a.weekPlan, note = _a.note, env = _a.env;
        var _b = this.state, description = _b.description, color = _b.color;
        var readOnly = env.tutored;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null,
                    "H\u00E4ndelse f\u00F6r vecka ",
                    weekNumber,
                    " och ",
                    courseName),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-table" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, "Beskrivning:"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "fullWidth" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { autoFocus: true, value: description, disabled: readOnly, onChange: function (ev) { return _this.setState({ description: ev.target.value }); } }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-table" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, "F\u00E4rg:"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("select", { value: color, disabled: readOnly, onChange: function (ev) { return _this.setState({ color: ev.target.value }); } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("option", { value: "yellow" }, "Gul"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("option", { value: "yellowLight" }, "Ljusgul"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("option", { value: "cyan" }, "Gr\u00F6n"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("option", { value: "cyanLight" }, "Ljusgr\u00F6n"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("option", { value: "purple" }, "Lila"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("option", { value: "purpleLight" }, "Ljuslila"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("option", { value: "red" }, "R\u00F6d"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("option", { value: "redLight" }, "Rosa"))))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, readOnly ?
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-large btn-default", onClick: function () { return _this.props.closeDialog(); } }, "Avbryt") :
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-large btn-default", onClick: function () { return _this.save(); } }, "Spara"),
                    note && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { tabIndex: 1, className: "btn btn-warning btn-large pull-right", onClick: function () { return _this.delete(); } }, "Ta bort"))));
    };
    return WeekNoteDialog;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/ks-goals/future-abilities-table.tsx":
/*!************************************************************!*\
  !*** ./src/components/ks-goals/future-abilities-table.tsx ***!
  \************************************************************/
/*! exports provided: FutureAbilitiesTable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FutureAbilitiesTable", function() { return FutureAbilitiesTable; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _future_abilities_viewmodel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./future-abilities-viewmodel */ "./src/components/ks-goals/future-abilities-viewmodel.ts");




var FutureAbilitiesTable = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](FutureAbilitiesTable, _super);
    function FutureAbilitiesTable(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            loading: false,
            data: [],
            error: null
        };
        return _this;
    }
    FutureAbilitiesTable.prototype.componentWillMount = function () {
        this.load();
    };
    FutureAbilitiesTable.prototype.load = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var data, error_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.setState({ loading: true });
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 3, , 4]);
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].edsClient.getStudentFutureAbilities()];
                    case 2:
                        data = _a.sent();
                        this.setState({ data: data });
                        return [3 /*break*/, 4];
                    case 3:
                        error_1 = _a.sent();
                        this.setState({ error: error_1 });
                        return [3 /*break*/, 4];
                    case 4:
                        this.setState({ loading: false });
                        return [2 /*return*/];
                }
            });
        });
    };
    FutureAbilitiesTable.prototype.render = function () {
        var viewModel = new _future_abilities_viewmodel__WEBPACK_IMPORTED_MODULE_3__["FutureAbilitiesViewModel"](this.state.data);
        var columnHeaders = viewModel.columnHeaders, vtHts = viewModel.vtHts, capabRows = viewModel.capabRows;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, "Framtidsf\u00F6rm\u00E5gor"),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "partialEditStudyPlanViewMode" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", { style: { width: '100%' }, className: "smallFont" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null, columnHeaders.map(function (_a, i) {
                            var name = _a.name, type = _a.type;
                            return type === 'header' ?
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: i, rowSpan: 2 }, name) :
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: i, colSpan: 2 }, name);
                        })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { className: "header" }, vtHts.map(function (vtHt, i) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: i }, vtHt); }))),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, capabRows.map(function (row, i) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: i, className: (Math.floor(i / 3) % 2) && 'tableOdd' }, row.map(function (col, i) { return col.type === 'ability' ?
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: i, rowSpan: 3, className: "goalsSubject" }, col.name) :
                        col.type === 'capability' ?
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: i, className: "goalsSubject" }, col.name) :
                            col.selected ?
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: i, className: "edsSelected" },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "markedItem" })) :
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: i }); })); })))));
    };
    return FutureAbilitiesTable;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/ks-goals/future-abilities-viewmodel.ts":
/*!***************************************************************!*\
  !*** ./src/components/ks-goals/future-abilities-viewmodel.ts ***!
  \***************************************************************/
/*! exports provided: FutureAbilitiesViewModel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FutureAbilitiesViewModel", function() { return FutureAbilitiesViewModel; });
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");

var FutureAbilitiesViewModel = /** @class */ (function () {
    function FutureAbilitiesViewModel(data) {
        // Will build the total years
        var formNames = {};
        data.forEach(function (a) { return a.capabilities.forEach(function (c) { return formNames[c.formName] = true; }); });
        var years = Object.keys(formNames);
        // columnHeaders
        this.columnHeaders = [{
                name: "Framtidsfrmga",
                type: "header"
            }, {
                name: "Omrde",
                type: "header"
            }].concat(years.map(function (year) { return ({
            name: year,
            type: 'year'
        }); }));
        // vtHts
        this.vtHts = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_0__["flatten"])(years.map(function (year) { return ["HT", "VT"]; }));
        // cababRows
        var rows = [];
        data.forEach(function (a) {
            var row = [{ type: 'ability', name: a.abilityName }];
            var addedCapabs = {};
            a.capabilities.forEach(function (c) {
                var cells = [
                    { type: 'term', selected: c.htHasValue !== false },
                    { type: 'term', selected: c.vtHasValue !== false }
                ];
                //if (c.htHasValue || c.vtHasValue) debugger;
                if (!addedCapabs[c.capabilityName]) {
                    //if (!isFirstCapability) rows.push(row);
                    if (row.length > 1) {
                        rows.push(row);
                        row = [];
                    }
                    addedCapabs[c.capabilityName] = true;
                    row.push({ type: 'capability', name: c.capabilityName });
                    cells.forEach(function (cell) { return row.push(cell); });
                }
                else if (row) {
                    //addedCapabs[c.capabilityName].concat(cells);
                    cells.forEach(function (cell) { return row.push(cell); });
                }
            });
            if (row)
                rows.push(row);
        });
        this.capabRows = rows;
    }
    return FutureAbilitiesViewModel;
}());



/***/ }),

/***/ "./src/components/ks-goals/goals-viewmodel.ts":
/*!****************************************************!*\
  !*** ./src/components/ks-goals/goals-viewmodel.ts ***!
  \****************************************************/
/*! exports provided: ViewModel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ViewModel", function() { return ViewModel; });
/* harmony import */ var _apis_edsclient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../apis/edsclient */ "./src/apis/edsclient.ts");

var ViewModel = /** @class */ (function () {
    function ViewModel(studyPlans) {
        this.subjects = studyPlans.map(function (sp) {
            var periodGoals = sp.periodGoals
                .map(function (g) { return ({ period: new _apis_edsclient__WEBPACK_IMPORTED_MODULE_0__["EDSPeriod"](g.periodName), goal: g.gradeName }); });
            return {
                name: sp.courseUnitName,
                atGoal: periodGoals.filter(function (_a) {
                    var period = _a.period;
                    return period.term === 'AT';
                }).map(function (_a) {
                    var goal = _a.goal;
                    return goal;
                })[0],
                stGoal: periodGoals.filter(function (_a) {
                    var period = _a.period;
                    return period.term === 'ST';
                }).map(function (_a) {
                    var goal = _a.goal;
                    return goal;
                })[0],
                finalGoal: sp.finalGoalGrade,
                strategies: sp.strategyText
            };
        });
    }
    return ViewModel;
}());



/***/ }),

/***/ "./src/components/ks-goals/goals.tsx":
/*!*******************************************!*\
  !*** ./src/components/ks-goals/goals.tsx ***!
  \*******************************************/
/*! exports provided: KSGoals */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KSGoals", function() { return KSGoals; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _goals_viewmodel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./goals-viewmodel */ "./src/components/ks-goals/goals-viewmodel.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _future_abilities_table__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./future-abilities-table */ "./src/components/ks-goals/future-abilities-table.tsx");






var KSGoals = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](KSGoals, _super);
    function KSGoals(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            loadingStudyPlans: false,
            studyPlans: [],
            error: null
        };
        return _this;
    }
    KSGoals.prototype.componentWillMount = function () {
        this.load();
    };
    KSGoals.prototype.load = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var studyPlans, error_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.setState({ loadingStudyPlans: true });
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 3, , 4]);
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].edsClient.getStudentGoals()];
                    case 2:
                        studyPlans = _a.sent();
                        this.setState({ studyPlans: studyPlans });
                        return [3 /*break*/, 4];
                    case 3:
                        error_1 = _a.sent();
                        this.setState({ error: error_1 });
                        return [3 /*break*/, 4];
                    case 4:
                        this.setState({ loadingStudyPlans: false });
                        return [2 /*return*/];
                }
            });
        });
    };
    KSGoals.prototype.render = function () {
        var viewModel = new _goals_viewmodel__WEBPACK_IMPORTED_MODULE_3__["ViewModel"](this.state.studyPlans);
        var showTermGoals = ('' + _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].currentUser.schoolType).toLowerCase() !== "gymnasium";
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "ked_boxed" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["M\u00E5l"], ["M\u00E5l"])))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", { className: "smallFont" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4mne"], ["\u00C4mne"])))),
                        showTermGoals && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["HT"], ["HT"])))),
                        showTermGoals && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["VT"], ["VT"])))),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Slutm\u00E5l"], ["Slutm\u00E5l"])))),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Strategier"], ["Strategier"])))))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, viewModel.subjects.map(function (s, i) {
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: s.name, className: i % 2 && "tableOdd" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "goalsSubject" }, s.name),
                        showTermGoals && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "goalsTerm" }, s.atGoal),
                        showTermGoals && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "goalsTerm" }, s.stGoal),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "goalsEnd" }, s.finalGoal),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, s.strategies));
                }))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "divider" }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_future_abilities_table__WEBPACK_IMPORTED_MODULE_5__["FutureAbilitiesTable"], null));
    };
    return KSGoals;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;


/***/ }),

/***/ "./src/components/ks-termplanner/ks-termplanner-tutored.tsx":
/*!******************************************************************!*\
  !*** ./src/components/ks-termplanner/ks-termplanner-tutored.tsx ***!
  \******************************************************************/
/*! exports provided: KSTermPlannerTutored */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KSTermPlannerTutored", function() { return KSTermPlannerTutored; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _termplanner__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./termplanner */ "./src/components/ks-termplanner/termplanner.tsx");
/* harmony import */ var _utility_components_tutorable_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility-components/tutorable-component */ "./src/components/utility-components/tutorable-component.tsx");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");




function KSTermPlannerTutored(props) {
    var intl = props.intl;
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](_utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_3__["LanguageContext"].Provider, { value: { intl: intl } },
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"](_utility_components_tutorable_component__WEBPACK_IMPORTED_MODULE_2__["TutorableComponent"], { tutored: true, createComponent: function (env) {
                return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](_termplanner__WEBPACK_IMPORTED_MODULE_1__["KSTermPlanner"], { key: env.currentUser.mail, env: env, tutored: true, initialDate: new Date() });
            } }));
}


/***/ }),

/***/ "./src/components/ks-termplanner/termplanner-utils.ts":
/*!************************************************************!*\
  !*** ./src/components/ks-termplanner/termplanner-utils.ts ***!
  \************************************************************/
/*! exports provided: getFirstAndLastWeek, LAST_STEP_SPRING, LAST_STEP_AUTUMN, findCourseFromColumnHeader, getColumnsHeader, getColumnHeaderFromCourse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFirstAndLastWeek", function() { return getFirstAndLastWeek; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LAST_STEP_SPRING", function() { return LAST_STEP_SPRING; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LAST_STEP_AUTUMN", function() { return LAST_STEP_AUTUMN; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "findCourseFromColumnHeader", function() { return findCourseFromColumnHeader; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getColumnsHeader", function() { return getColumnsHeader; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getColumnHeaderFromCourse", function() { return getColumnHeaderFromCourse; });
function getFirstAndLastWeek(term) {
    return term === 'AT' ?
        [33, 50] : // This is a guess! Need data! Should be possible to get from skola24?
        [2, 23]; // This is a guess! Need data!
}
var LAST_STEP_SPRING = 28; // Week 28 is in summer. Use it as placeholder for "last step"
var LAST_STEP_AUTUMN = 52; // Week must be valid. Use it as placeholder for "last step"
/**
 * Note that this function is tightly coupled to the swedish school.
 */
function findCourseFromColumnHeader(courses, columnHeader) {
    switch (columnHeader) {
        case 'M.spr': return courses
            .filter(function (course) { return course.shortName !== 'MA' && course.shortName.startsWith('M'); })[0] || null;
        case 'Ma': return courses.filter(function (c) { return c.shortName === "MA"; })[0] || null;
        case 'Sv/SvA': return courses.filter(function (c) { return c.shortName.startsWith("SV"); })[0] || null;
        case 'Eng': return courses.filter(function (c) { return c.shortName === "EN"; })[0] || null;
    }
    return null;
}
function getColumnsHeader(locale) {
    switch (locale) {
        case 'sv':
            return ['M.spr', 'Ma', 'Sv/SvA', 'Eng'];
        case 'en_sin':
            return ['MFL', 'Ma', 'Hi', 'Eng', 'Yoga', 'ICT'];
        case 'en_nin':
            return ['MFL', 'Ma', 'Hi', 'Eng', 'Yoga', 'ICT'];
    }
}
/**
 * Note that this function is tightly coupled to the swedish school.
 */
function getColumnHeaderFromCourse(course) {
    var shortName = course.shortName;
    if (shortName === "MA")
        return 'Ma';
    if (shortName === "EN")
        return 'Eng';
    if (shortName.startsWith("SV"))
        return 'Sv/SvA';
    if (shortName.startsWith("M2"))
        return 'M.spr';
    return null;
}


/***/ }),

/***/ "./src/components/ks-termplanner/termplanner.tsx":
/*!*******************************************************!*\
  !*** ./src/components/ks-termplanner/termplanner.tsx ***!
  \*******************************************************/
/*! exports provided: KSTermPlanner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KSTermPlanner", function() { return KSTermPlanner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_generic_school_term__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/generic-school-term */ "./src/utils/generic-school-term.ts");
/* harmony import */ var _viewmodel__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./viewmodel */ "./src/components/ks-termplanner/viewmodel.ts");
/* harmony import */ var _utility_components_content_editable_field__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utility-components/content-editable-field */ "./src/components/utility-components/content-editable-field.tsx");
/* harmony import */ var _repos_ks_termplanner_repo_instance__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../repos/ks-termplanner-repo-instance */ "./src/repos/ks-termplanner-repo-instance.ts");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var _course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _charts_doughnut__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../charts/doughnut */ "./src/components/charts/doughnut.tsx");
/* harmony import */ var _utils_generic_school_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../utils/generic-school-utils */ "./src/utils/generic-school-utils.ts");
/* harmony import */ var _utility_components_dialogs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../utility-components/dialogs */ "./src/components/utility-components/dialogs.tsx");
/* harmony import */ var _tutor_dialog__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./tutor-dialog */ "./src/components/ks-termplanner/tutor-dialog.tsx");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../features */ "./src/features/index.ts");
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");

















var KSTermPlanner = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](KSTermPlanner, _super);
    function KSTermPlanner(props) {
        var _this = _super.call(this, props) || this;
        _this.unmounted = false;
        _this.state = {
            schoolTerm: new _utils_generic_school_term__WEBPACK_IMPORTED_MODULE_2__["GenericSchoolTerm"](props.initialDate),
            activeCourses: [],
            weekPlans: [],
            error: null,
            loadingActiveCourses: false,
            loadingWeekPlans: false,
            initialLoad: true,
            dialogs: []
        };
        _this.flowId = 1;
        _this.updateWeekPlans = _this.updateWeekPlans.bind(_this);
        return _this;
    }
    KSTermPlanner.prototype.componentDidMount = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.load(this.state.schoolTerm)];
                    case 1:
                        _a.sent();
                        if (!this.unmounted)
                            this.props.env.ksTermPlannerRepo.mem.subscribe(this.updateWeekPlans);
                        return [2 /*return*/];
                }
            });
        });
    };
    KSTermPlanner.prototype.componentWillUnmount = function () {
        this.unmounted = true;
        this.props.env.ksTermPlannerRepo.mem.unsubscribe(this.updateWeekPlans);
    };
    KSTermPlanner.prototype.updateWeekPlans = function (weekPlansOrTutorComm, error) {
        this.setState({ weekPlans: weekPlansOrTutorComm, loadingWeekPlans: false, error: error || null });
    };
    KSTermPlanner.prototype.load = function (schoolTerm) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var flowId, ksTermPlannerRepo, term, currentSchoolTerm, activeCourses, error_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        flowId = ++this.flowId;
                        this.fields = [];
                        this.setState({
                            //loadingWeekPlans: true,
                            loadingActiveCourses: true
                        });
                        ksTermPlannerRepo = this.props.env.ksTermPlannerRepo;
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 5, , 6]);
                        return [4 /*yield*/, this.loadAcademicYearDates(schoolTerm, _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_8__["default"].KED_SCHOOL_LOCALE)];
                    case 2:
                        term = _a.sent();
                        if (this.flowId !== flowId)
                            return [2 /*return*/];
                        currentSchoolTerm = new _utils_generic_school_term__WEBPACK_IMPORTED_MODULE_2__["GenericSchoolTerm"](schoolTerm.selectedDate, this.context.intl.locale, term);
                        //refresh saved data
                        ksTermPlannerRepo.refreshData(currentSchoolTerm.getTermStartAndEnd(true));
                        activeCourses = [];
                        if (!(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_8__["default"].KED_SCHOOL_LOCALE === 'sv')) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.loadActiveCourses(currentSchoolTerm)];
                    case 3:
                        activeCourses = _a.sent();
                        if (this.flowId !== flowId)
                            return [2 /*return*/];
                        _a.label = 4;
                    case 4:
                        this.setState({ schoolTerm: currentSchoolTerm, initialLoad: false, activeCourses: activeCourses, loadingActiveCourses: false });
                        return [3 /*break*/, 6];
                    case 5:
                        error_1 = _a.sent();
                        if (this.flowId !== flowId)
                            return [2 /*return*/];
                        this.setState({ schoolTerm: currentSchoolTerm, loadingActiveCourses: false, error: error_1 });
                        return [3 /*break*/, 6];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    KSTermPlanner.prototype.loadAcademicYearDates = function (schoolTerm, schoolLocale) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var termDates;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.props.env.edsClient.getAcademicYearTerms(schoolLocale, schoolTerm.selectedDate)];
                    case 1:
                        termDates = _a.sent();
                        return [2 /*return*/, termDates];
                }
            });
        });
    };
    KSTermPlanner.prototype.loadActiveCourses = function (schoolTerm) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var periodName, activeCourses;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        periodName = schoolTerm.getEdsPeriodName();
                        return [4 /*yield*/, this.props.env.edsClient.getActiveCourses({ periodName: periodName })];
                    case 1:
                        activeCourses = _a.sent();
                        return [2 /*return*/, activeCourses];
                }
            });
        });
    };
    KSTermPlanner.prototype.updateCell = function (weekPlan, columnName, newValue) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var oldValue, error_2;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        oldValue = (weekPlan && weekPlan.cellValues[columnName]) || "";
                        if (oldValue === newValue)
                            return [2 /*return*/];
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 3, , 4]);
                        weekPlan.cellValues[columnName] = newValue;
                        return [4 /*yield*/, this.props.env.ksTermPlannerRepo.upsert(weekPlan, function (wp) { return wp.cellValues[columnName] = newValue; })];
                    case 2: return [2 /*return*/, _a.sent()];
                    case 3:
                        error_2 = _a.sent();
                        console.error(error_2.stack || error_2);
                        if (error_2.name === "http403") {
                            this.setState({ error: this.context.intl({ id: "common.changesNotSavedUnauthorized", defaultMessage: "ndringarna sparades inte p.g.a. otillrcklig behrighet." }) });
                        }
                        else {
                            this.setState({ error: this.context.intl({ id: "common.changesNotSavedErrorOccured", defaultMessage: "Fr tillfllet problem att spara data. Dina ndringar sparades inte." }) });
                        }
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    /**
     *
     * @param tutorNote
     * @param newValue
     *
     * Update tutor field value
     */
    KSTermPlanner.prototype.updateTutorNoteField = function (tutorNote, newValue) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var oldValue, showError_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        oldValue = (tutorNote && tutorNote.content) || "";
                        if (oldValue === newValue)
                            return [2 /*return*/];
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 3, , 4]);
                        tutorNote.content = newValue;
                        //set document ACL
                        tutorNote.acl = [
                            new kedbackend_client__WEBPACK_IMPORTED_MODULE_14__["DocumentAccess"]("tutorFor", this.props.env.currentUser.mail, "S").toString(),
                            new kedbackend_client__WEBPACK_IMPORTED_MODULE_14__["DocumentAccess"]("email", this.props.env.currentUser.mail, "R").toString(),
                        ];
                        return [4 /*yield*/, this.props.env.ksTermPlannerRepo.upsert(tutorNote, function (note) { return note.content = newValue; })];
                    case 2: return [2 /*return*/, _a.sent()];
                    case 3:
                        showError_1 = _a.sent();
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    /**
     * Delete tutor comment by Id
     * @param noteId
     */
    KSTermPlanner.prototype.deleteTutorNoteField = function (noteId) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var showError_2;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 2, , 3]);
                        return [4 /*yield*/, this.props.env.ksTermPlannerRepo.delete([noteId])];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 3];
                    case 2:
                        showError_2 = _a.sent();
                        return [3 /*break*/, 3];
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    /**
     * Add a comment from tutor
     * @param weekNumber
     * @param comment
     *
     */
    KSTermPlanner.prototype.onTutorClick = function (note) {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_tutor_dialog__WEBPACK_IMPORTED_MODULE_13__["TutorDialog"], { weekNumber: note.weekNumber, comment: note.content, intl: this.context.intl, updateData: function (val) { return _this.updateTutorNoteField(note, val); }, deleteNoteData: function () { return _this.deleteTutorNoteField(note.id); }, closeDialog: function () { return _this.closeDialog(); } }));
    };
    KSTermPlanner.prototype.openDialog = function (dialog) {
        this.setState({ dialogs: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](this.state.dialogs, [dialog]) });
    };
    KSTermPlanner.prototype.closeDialog = function () {
        this.setState({ dialogs: this.state.dialogs.slice(0, this.state.dialogs.length - 1) });
    };
    /**
     * Navigate to adjacent field depending on direction
     * @param pos current position in field-matrix
     * @param direction direction to take
     */
    KSTermPlanner.prototype.navigate = function (pos, direction) {
        var newpos = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, pos);
        var maxRows = this.fields.length;
        var maxCols = Math.max.apply(Math, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](this.fields.map(function (row) { return row.length; })));
        switch (direction) {
            case 'up':
                newpos.row = Math.max(pos.row - 1, 0);
                break;
            case 'down':
                newpos.row = Math.min(pos.row + 1, maxRows);
                break;
            case 'left':
                newpos.col = Math.max(pos.col - 1, 0);
                break;
            case 'right':
                newpos.col = Math.min(pos.col + 1, maxCols);
                break;
        }
        if (this.fields[newpos.row] && this.fields[newpos.row][newpos.col])
            this.fields[newpos.row][newpos.col].myself.current.focus();
    };
    /**
     * Adds field to field-matrix to enable navigation in thee table
     * @param field current field
     * @param pos position of field in field-matrix
     */
    KSTermPlanner.prototype.addField = function (field, pos) {
        if (this.fields[pos.row] === undefined) {
            this.fields[pos.row] = [];
        }
        this.fields[pos.row][pos.col] = field;
    };
    /**
     * Creates the cell in the termplanner table
     * @param rowIndex index of row in table
     * @param colIndex index of column in table
     * @param subjectName name field
     * @param model --unused?
     * @param weekPlan current row from weekPlan
     * @param readOnlyCells if cells are readonly
     */
    KSTermPlanner.prototype.getTableCell = function (rowIndex, colIndex, subjectName, model, weekPlan, readOnlyCells, colType) {
        var _this = this;
        var completedSteps = model.completedSteps;
        var pos = { row: rowIndex, col: colIndex };
        if (colType === 'Tutor') {
            var tutoredWeekPlan = weekPlan;
            var content = tutoredWeekPlan.content;
            if (this.props.tutored) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: "tutornote" + colIndex, onClick: function () { return _this.onTutorClick(tutoredWeekPlan); }, className: "tutorCell" }, content ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: colIndex, "data-tooltip": content },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { key: colIndex, className: "fas fa-comment-dots" })) :
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: colIndex },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { key: colIndex, className: "fas fa-comment-medical" })));
            }
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: "tutornote" + colIndex, className: "tutorCell" }, content && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: colIndex, "data-tooltip": content },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { key: colIndex, className: "far fa-comment-dots" })));
        }
        else {
            var currentWeekPlan = weekPlan;
            var cellValues = currentWeekPlan.cellValues;
            // an outer td cell and inner div is used to regulate the height and allow for ellipses on text-overflow
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: this.getCellClassName(completedSteps, cellValues, subjectName) },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_content_editable_field__WEBPACK_IMPORTED_MODULE_4__["ContentEditableField"], { key: colIndex, ref: function (field) { return _this.addField(field, pos); }, text: cellValues[subjectName], tag: 'div', validateValue: colType == 'Step' ? /^\d*$/ : undefined, maxChars: colType == 'Comment' ? 100 : (colType == 'Course' ? 30 : 3), onChange: this.updateCell.bind(this, weekPlan, subjectName), readOnly: readOnlyCells || colType == 'Tutor', allowNavigation: true, onNavigate: this.navigate.bind(this, pos) }));
        }
    };
    /**
     * Get classname for cell
     * @param completedSteps
     * @param cellValues
     * @param subjectName
     */
    KSTermPlanner.prototype.getCellClassName = function (completedSteps, cellValues, subjectName) {
        var colType = this.getColumnType(subjectName);
        if (colType == 'Step' && completedSteps[subjectName + cellValues[subjectName]]) {
            return 'stepCell completedStep';
        }
        return colType.toLowerCase() + 'Cell';
    };
    /**
     * Creates the cell in the termplanner tables footer
     * @param rowIndex index of row in table
     * @param colIndex index of column in table
     * @param subjectName name field
     * @param model
     * @param readOnlyCells if cells are readonly
     */
    KSTermPlanner.prototype.getFooterCell = function (rowIndex, colIndex, subjectName, model, readOnlyCells) {
        var _this = this;
        var pos = { row: rowIndex, col: colIndex };
        var colType = this.getColumnType(subjectName);
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { className: colType + "Footer" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_content_editable_field__WEBPACK_IMPORTED_MODULE_4__["ContentEditableField"], { key: "stepFooterCell" + colIndex, ref: function (field) { return _this.addField(field, pos); }, tag: 'div', text: model.lastSteps.cellValues[subjectName], onChange: this.updateCell.bind(this, model.lastSteps, subjectName), readOnly: readOnlyCells, maxChars: 10, allowNavigation: true, onNavigate: this.navigate.bind(this, pos) }));
    };
    KSTermPlanner.prototype.getStepHeaderColumn = function (index, translatedColumnHeader, colType) {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: "stepHeaderCell_" + index, className: colType.toLowerCase() + "Header" }, colType != 'Tutor' ? translatedColumnHeader : '');
    };
    KSTermPlanner.prototype.getColumnType = function (name) {
        var colTypes = { 'Kommentar': 'Comment', 'Kurs': 'Course', 'TutorComment': 'Tutor' };
        return colTypes.hasOwnProperty(name) ? colTypes[name] : 'Step';
    };
    KSTermPlanner.prototype.openCloseProgressCharts = function (value) {
        localStorage.setItem('TermplannerBoxCharts', value);
    };
    KSTermPlanner.prototype.getStepCharts = function (columns, subjectProgress) {
        var _this = this;
        var chartsBoxState = JSON.parse(localStorage.getItem('TermplannerBoxCharts'));
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_16__["OpenCloseBox"], { headerOpen: chartsBoxState, onOpenClose: this.openCloseProgressCharts, title: this.context.intl.formatMessage({ id: "termplanner.chartsBoxTitle", defaultMessage: "Framsteg diagram" }) },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "charts-container" }, columns.map(function (element) {
                if (!element.isFixed) {
                    var percentage = subjectProgress[element.name] ? subjectProgress[element.name].value : 0;
                    var errorMessage = subjectProgress[element.name].finalStepCompleted ? null :
                        _this.context.intl.formatMessage({ id: "termplanner.noFinalStepAvailable", defaultMessage: "Inget slutsteg tillgngligt" });
                    var translatedColumns = Object(_utils_generic_school_utils__WEBPACK_IMPORTED_MODULE_11__["getSchoolTranslatedSubjectFullname"])(_this.context.intl);
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: element.name, className: "chart-box" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null, translatedColumns[element.name]),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: element.name, className: "inner-chart-box" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_charts_doughnut__WEBPACK_IMPORTED_MODULE_10__["Doughnut"], { key: element.name, percentage: percentage, errorMessage: errorMessage })));
                }
            })));
    };
    KSTermPlanner.prototype.getWeekTutorNote = function (weekPlansOrTutorNote, weekNumber) {
        return weekPlansOrTutorNote.find(function (x) { return x.type === "tutor-note" && x.weekNumber === weekNumber; });
    };
    KSTermPlanner.prototype.render = function () {
        var _this = this;
        var intl = this.context.intl;
        var showTutorCommentField = _features__WEBPACK_IMPORTED_MODULE_15__["features"].ksTutorComment;
        var showDoughnutCharts = _features__WEBPACK_IMPORTED_MODULE_15__["features"].termplannerCharts;
        var model = new _viewmodel__WEBPACK_IMPORTED_MODULE_3__["ViewModel"](this.state.weekPlans, this.state.activeCourses, this.state.schoolTerm, _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_8__["default"].KED_SCHOOL_LOCALE, intl, showTutorCommentField);
        var termGoals = model.termGoals, columns = model.columns;
        var tutored = this.props.tutored;
        var _a = this.state, loadingWeekPlans = _a.loadingWeekPlans, error = _a.error, dbWeekPlans = _a.weekPlans, dialogs = _a.dialogs;
        var failedInitialLoad = dbWeekPlans.length === 0 && !!error;
        var readOnlyCells = failedInitialLoad || tutored || loadingWeekPlans;
        var rowOffset = 0;
        var filteredWeekplans = model.weekPlansOrTutorNote.filter(function (x) { return !x.type; });
        return this.state.initialLoad ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_9__["Spinner"], null),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_7__["FormattedMessage"], { id: "termplanner.loadingTermplanner", defaultMessage: "V.g. v\u00E4nta medan terminsplaner laddas..." })) :
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "termplanner" +
                    (this.state.loadingWeekPlans ? " loading-weekplans" : "") +
                    (this.state.loadingActiveCourses ? " loading-courses" : "") },
                showDoughnutCharts && this.state.activeCourses.length > 0 && this.getStepCharts(columns, model.subjectProgress),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "ked_boxed" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "weekSelect" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, this.state.schoolTerm.toLocaleString(intl, true))),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn-group" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn", onClick: function () {
                                        var term = _this.state.schoolTerm.prevTerm();
                                        _this.load(term);
                                    } },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-angle-left", "aria-hidden": "true" })),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn", onClick: function () {
                                        var term = _this.state.schoolTerm.nextTerm();
                                        _this.load(term);
                                    } },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-angle-right", "aria-hidden": "true" }))))),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_7__["FormattedMessage"], { id: "termplanner.termPlanning", defaultMessage: "Terminsplanering", tagName: "h4" }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", { className: "termplanner-table zebra" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { className: "weekColumn" },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_7__["FormattedMessage"], { id: "termplanner.weekNumber", defaultMessage: "Vecka" })),
                                columns.map(function (elem, index) {
                                    var colType = _this.getColumnType(elem.name);
                                    return _this.getStepHeaderColumn(index, elem.translatedName, colType);
                                }))),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, filteredWeekplans.filter(function (wk) { return wk.cellValues; }).map(function (weekPlan, rowIndex) {
                            rowOffset = rowIndex;
                            var weekNumber = weekPlan.weekNumber, academicWeekNumber = weekPlan.academicWeekNumber;
                            var week = weekNumber;
                            var isCurrentWeek = _this.state.schoolTerm.isCurrentWeek(weekPlan.dateTime);
                            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: model.year + ':' + week, className: isCurrentWeek ? "currentWeek" : "" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, intl.locale === "sv" ? week : academicWeekNumber),
                                columns.map(function (elem, colIndex) {
                                    var colType = _this.getColumnType(elem.name);
                                    var tutorValue = _this.getWeekTutorNote(model.weekPlansOrTutorNote, weekNumber);
                                    return colType === "Tutor" ?
                                        tutorValue && showTutorCommentField && _this.getTableCell(rowIndex, colIndex, elem.name, model, tutorValue, readOnlyCells, colType) :
                                        _this.getTableCell(rowIndex, colIndex, elem.name, model, weekPlan, readOnlyCells, colType);
                                }));
                        })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tfoot", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null,
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_7__["FormattedMessage"], { id: "termplanner.finalStep", defaultMessage: "Slutsteg" })),
                                columns.filter(function (c) { return !c.isFixed; }).map(function (elem, index) {
                                    return _this.getFooterCell(rowOffset + 1, index, elem.name, model, readOnlyCells);
                                }),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "-"),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null),
                                showTutorCommentField && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null)),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null,
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_7__["FormattedMessage"], { id: "termplanner.edsGoalGrades", defaultMessage: "Terminsm\u00E5l" })),
                                columns.filter(function (c) { return !c.isFixed; }).map(function (elem, index) {
                                    var colType = _this.getColumnType(elem.name).toLowerCase();
                                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: "grades_" + index, className: colType + "Footer" }, termGoals[elem.name]);
                                }),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "-"),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, this.state.error && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "error" }, '' + this.state.error)),
                                showTutorCommentField && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null))))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_dialogs__WEBPACK_IMPORTED_MODULE_12__["Dialogs"], { dialogs: dialogs, popDialog: function () { return _this.setState({ dialogs: dialogs.slice(0, dialogs.length - 1) }); } }));
    };
    KSTermPlanner.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_6__["LanguageContext"];
    return KSTermPlanner;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/ks-termplanner/tutor-dialog.tsx":
/*!********************************************************!*\
  !*** ./src/components/ks-termplanner/tutor-dialog.tsx ***!
  \********************************************************/
/*! exports provided: TutorDialog */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TutorDialog", function() { return TutorDialog; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var TutorDialog = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TutorDialog, _super);
    function TutorDialog(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            comment: props.comment ? props.comment : ''
        };
        return _this;
    }
    TutorDialog.prototype.delete = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var closeDialog;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                closeDialog = this.props.closeDialog;
                closeDialog();
                this.props.deleteNoteData();
                return [2 /*return*/];
            });
        });
    };
    TutorDialog.prototype.save = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var closeDialog, comment;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                closeDialog = this.props.closeDialog;
                comment = this.state.comment;
                closeDialog();
                this.props.updateData(comment);
                return [2 /*return*/];
            });
        });
    };
    TutorDialog.prototype.render = function () {
        var _this = this;
        var _a = this.props, weekNumber = _a.weekNumber, intl = _a.intl;
        var comment = this.state.comment;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, intl ? intl.formatMessage({ id: "tutorNoteDialog.weekComment", defaultMessage: "Kommentar fr vecka {weekNumber}" }, { weekNumber: weekNumber }) : "Kommentar f\u00F6r vecka " + weekNumber),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-table" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "fullWidth" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { autoFocus: true, value: comment, onChange: function (ev) { return _this.setState({ comment: ev.target.value }); } })))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-large btn-default", onClick: function () { return _this.save(); } },
                    intl ? intl.formatMessage({ id: "common.save", defaultMessage: "Spara" }) : 'Spara',
                    " "),
                comment && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { tabIndex: 1, className: "btn btn-warning btn-large pull-right", onClick: function () { return _this.delete(); } }, intl ? intl.formatMessage({ id: "common.remove", defaultMessage: "Ta bort" }) : "Ta bort"))));
    };
    return TutorDialog;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/ks-termplanner/viewmodel.ts":
/*!****************************************************!*\
  !*** ./src/components/ks-termplanner/viewmodel.ts ***!
  \****************************************************/
/*! exports provided: ViewModel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ViewModel", function() { return ViewModel; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _termplanner_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./termplanner-utils */ "./src/components/ks-termplanner/termplanner-utils.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _utils_weekutil__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/weekutil */ "./src/utils/weekutil.ts");
/* harmony import */ var _utils_generic_school_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/generic-school-utils */ "./src/utils/generic-school-utils.ts");






var ViewModel = /** @class */ (function () {
    function ViewModel(dbWeekPlans, 
    //dbTutorNotes: TermPlannerTutorNote[],
    courses, currentSchoolTerm, currentSchoolLocale, intl, showTutorCommentField) {
        var _a, e_1, _b, e_2, _c;
        var _this = this;
        this.subjectProgress = {};
        this.columns = [];
        this.weekPlansOrTutorNote = [];
        if (currentSchoolTerm.schoolMoment) {
            var _d = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](currentSchoolTerm.getTermStartAndEnd(), 2), termStart = _d[0], termEnd = _d[1];
            this.year = termStart.year();
            //init columns
            var columnHeaders = Object(_termplanner_utils__WEBPACK_IMPORTED_MODULE_1__["getColumnsHeader"])(currentSchoolLocale);
            columnHeaders.forEach(function (c) { return _this.columns.push({ name: c }); });
            //define fixed columns - we keep these separated, in case that the other columns will be dynamically retrieved
            var fixedColumns_1 = [{ name: "Kurs", isFixed: true }, { name: "Kommentar", isFixed: true }];
            if (showTutorCommentField) {
                fixedColumns_1.push({ name: "TutorComment", isFixed: true });
            }
            //Add fixed columns names
            (_a = this.columns).push.apply(_a, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](fixedColumns_1));
            //populate translations
            var translatedColumns = Object(_utils_generic_school_utils__WEBPACK_IMPORTED_MODULE_5__["getSchoolTranslatedSubjects"])(currentSchoolLocale, intl);
            this.columns.forEach(function (element) {
                element.translatedName = translatedColumns[element.name];
            });
            var currentTermHolidays = currentSchoolTerm.schoolMoment.academicYearStructure.holidays;
            var currentTerm_1 = currentSchoolTerm.schoolMoment.term;
            //
            // weekPlans
            //
            var weekplanValues = dbWeekPlans.filter(function (x) { return !x.type; });
            var tutorValues = dbWeekPlans.filter(function (w) { return w.type === 'tutor-note'; });
            var startAcademicYearNumber = currentSchoolTerm.schoolMoment.academicYearStructure.academicStartWeek;
            var _loop_1 = function (weekMoment) {
                holidayPeriod = currentTermHolidays.filter(function (h) { return weekMoment.week() >= moment__WEBPACK_IMPORTED_MODULE_2___default()(h.startDate).startOf("week").week() &&
                    weekMoment.week() <= moment__WEBPACK_IMPORTED_MODULE_2___default()(h.endDate).endOf('week').week(); });
                //if the current week is a holiday week, skip it
                if (holidayPeriod.length > 0) {
                    return "continue";
                }
                var weekNumber = weekMoment.week();
                var kedWeek = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_4__["KEDWeek"])(weekMoment.year(), weekNumber);
                //A term can end and start on the same week for India
                //in this case we should filter them by the term
                //This is not the case for sv locale and we want to skip this check 
                //because data is already saved in the database
                var weekPlan = weekplanValues.filter(function (wp) {
                    return wp.dateTime >= kedWeek.notBefore &&
                        wp.dateTime <= kedWeek.notAfter &&
                        (!wp.isFinalStep &&
                            wp.term === currentTerm_1 || intl.locale === "sv");
                })[0];
                var tutorNote = tutorValues.filter(function (wp) {
                    return wp.dateTime >= kedWeek.notBefore &&
                        wp.dateTime <= kedWeek.notAfter &&
                        (wp.term === currentTerm_1 || intl.locale === "sv");
                })[0];
                this_1.weekPlansOrTutorNote.push(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, weekPlan || {}, { id: weekPlan ? weekPlan.id : Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(), dateTime: weekPlan ? weekPlan.dateTime : weekMoment.valueOf(), cellValues: weekPlan ? weekPlan.cellValues : {}, weekNumber: weekNumber, academicWeekNumber: startAcademicYearNumber++, term: currentTerm_1 }));
                this_1.weekPlansOrTutorNote.push(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, tutorNote || {}, { id: tutorNote ? tutorNote.id : Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(), type: 'tutor-note', dateTime: tutorNote ? tutorNote.dateTime : weekMoment.valueOf(), content: tutorNote ? tutorNote.content : '', weekNumber: weekNumber, term: currentTerm_1 }));
            };
            var this_1 = this, holidayPeriod;
            for (var weekMoment = termStart.clone(); weekMoment.valueOf() < termEnd.valueOf(); weekMoment = weekMoment.clone().add(1, 'week').startOf('week')) {
                _loop_1(weekMoment);
            }
            //
            // lastSteps
            //
            var lastStepWeek = currentSchoolTerm.getLastStepWeek(intl.locale);
            var lastStepKedWeek_1 = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_4__["KEDWeek"])(termEnd.year(), lastStepWeek);
            this.lastSteps = weekplanValues.filter(function (wp) {
                return wp.dateTime >= lastStepKedWeek_1.notBefore &&
                    wp.dateTime <= lastStepKedWeek_1.notAfter &&
                    (wp.isFinalStep &&
                        wp.term === currentTerm_1 || intl.locale === "sv");
            })[0] || {
                id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
                dateTime: moment__WEBPACK_IMPORTED_MODULE_2___default()(termEnd).clone().week(lastStepWeek).startOf('week').valueOf(),
                cellValues: {},
                weekNumber: lastStepWeek,
                term: currentTerm_1,
                isFinalStep: true
            };
            this.completedSteps = {};
            this.termGoals = {};
            var maxSubjectStep = {};
            try {
                for (var courses_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](courses), courses_1_1 = courses_1.next(); !courses_1_1.done; courses_1_1 = courses_1.next()) {
                    var course = courses_1_1.value;
                    var columnHeader = Object(_termplanner_utils__WEBPACK_IMPORTED_MODULE_1__["getColumnHeaderFromCourse"])(course);
                    try {
                        //
                        // completedSteps
                        //
                        for (var _e = (e_2 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](course.courseSteps)), _f = _e.next(); !_f.done; _f = _e.next()) {
                            var step = _f.value;
                            if (step.isCompleted) {
                                this.completedSteps[columnHeader + step.shortName] = true;
                                //set the maximum value of the completed step for each subject
                                var currentStepValue = parseInt(step.shortName);
                                if (!isNaN(currentStepValue) && currentStepValue > (maxSubjectStep[columnHeader] ? maxSubjectStep[columnHeader] : 0)) {
                                    maxSubjectStep[columnHeader] = currentStepValue;
                                }
                                /*const weekPlans = findWeekPlansByStep(this.weekPlans, step.ShortName);
                                weekPlans.forEach(weekPlan => {
                                    this.completedSteps[weekPlan.week + columnHeader] = true;
                                })*/
                            }
                        }
                    }
                    catch (e_2_1) { e_2 = { error: e_2_1 }; }
                    finally {
                        try {
                            if (_f && !_f.done && (_c = _e.return)) _c.call(_e);
                        }
                        finally { if (e_2) throw e_2.error; }
                    }
                    //
                    // termGoals
                    //
                    this.termGoals[columnHeader] = course.periodGoalGrade;
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (courses_1_1 && !courses_1_1.done && (_b = courses_1.return)) _b.call(courses_1);
                }
                finally { if (e_1) throw e_1.error; }
            }
            if (courses) {
                //init
                columnHeaders.forEach(function (elem) {
                    _this.subjectProgress[elem] = { finalStepCompleted: false, value: 0 };
                });
                //compute charts by computing  completed goal (saved data from kedbackend is not taken into account)/lastStepValue
                Object.keys(this.lastSteps.cellValues).forEach(function (val) {
                    //exclude the fixed columns. Charts should not be displayed for those
                    if (!fixedColumns_1[val]) {
                        var hasNoFinalStepValue = isNaN(parseInt(_this.lastSteps.cellValues[val])) || !_this.lastSteps.cellValues[val];
                        var finalStepValue = hasNoFinalStepValue ? 0 : parseInt(_this.lastSteps.cellValues[val]);
                        var percenValue = finalStepValue > 0 ? maxSubjectStep[val] * 100 / finalStepValue : 0;
                        _this.subjectProgress[val] = { finalStepCompleted: !hasNoFinalStepValue, value: percenValue };
                    }
                });
            }
        }
    }
    return ViewModel;
}());

function findWeekPlansByStep(weekPlans, step) {
    return weekPlans.filter(function (wp) { return Object.keys(wp.cellValues).map(function (column) { return wp.cellValues[column] === step; }); });
}


/***/ }),

/***/ "./src/components/latest-assessments/latest-assessments.tsx":
/*!******************************************************************!*\
  !*** ./src/components/latest-assessments/latest-assessments.tsx ***!
  \******************************************************************/
/*! exports provided: LatestAssessments */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LatestAssessments", function() { return LatestAssessments; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");




var LatestAssessments = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](LatestAssessments, _super);
    function LatestAssessments(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            assessments: [],
            error: null,
            loading: false
        };
        return _this;
    }
    LatestAssessments.prototype.componentWillMount = function () {
        this.load();
    };
    LatestAssessments.prototype.load = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var assessments, error_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.setState({ loading: true });
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 3, , 4]);
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_3__["default"].edsClient.getLatestAssessments(this.props.limit)];
                    case 2:
                        assessments = _a.sent();
                        this.setState({ assessments: assessments });
                        return [3 /*break*/, 4];
                    case 3:
                        error_1 = _a.sent();
                        this.setState({ error: error_1 });
                        return [3 /*break*/, 4];
                    case 4:
                        this.setState({ loading: false });
                        return [2 /*return*/];
                }
            });
        });
    };
    LatestAssessments.prototype.render = function () {
        var hasGrades = this.state.assessments.some(function (a) { return !!a.gradeName; });
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "ked_boxed" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Senaste bed\u00F6mningar"], ["Senaste bed\u00F6mningar"])))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("ul", { className: "latest-assesments zebra" }, this.state.assessments.map(function (a, i) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { key: i },
                    (hasGrades && a.gradeName != "") && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("span", { className: "grade pill pull-right" }, a.gradeName),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("span", { className: "date pill pull-left" }, a.publishDateTime.substr(0, 10)),
                    a.courseName == a.courseUnitName ?
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("strong", null, a.courseName)) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("strong", null, a.courseName),
                        " / ",
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("em", null, a.courseUnitName)),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, a.text));
            })));
    };
    return LatestAssessments;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1;


/***/ }),

/***/ "./src/components/learning-tasks/index.tsx":
/*!*************************************************!*\
  !*** ./src/components/learning-tasks/index.tsx ***!
  \*************************************************/
/*! exports provided: LearningTasks */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LearningTasks", function() { return LearningTasks; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _apis_ked_learninggoals__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../apis/ked-learninggoals */ "./src/apis/ked-learninggoals.ts");
/* harmony import */ var _course_viewer_subcomponents_learning_goals_list__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../course-viewer/subcomponents/learning-goals-list */ "./src/components/course-viewer/subcomponents/learning-goals-list.tsx");
/* harmony import */ var _utility_components_SetupLanguageIntl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utility-components/SetupLanguageIntl */ "./src/components/utility-components/SetupLanguageIntl.tsx");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");







var _LearningTasks = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](_LearningTasks, _super);
    function _LearningTasks(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            data: null
        };
        return _this;
    }
    _LearningTasks.prototype.componentDidMount = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var data;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Object(_apis_ked_learninggoals__WEBPACK_IMPORTED_MODULE_2__["getLearningGoalsAndTasks"])(this.props.apiPath, this.props.pageId)];
                    case 1:
                        data = _a.sent();
                        this.setState({ data: data });
                        return [2 /*return*/];
                }
            });
        });
    };
    _LearningTasks.prototype.render = function () {
        if (!this.state.data)
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null);
        var _a = this.state.data, moduleName = _a.moduleName, subject = _a.subject, commonTasks = _a.commonTasks, learningGoals = _a.learningGoals, step = _a.step;
        var intl = this.props.intl;
        //const step = undefined; // moduleName.toLowerCase().startsWith("steg ") && parseInt(moduleName.substr(5));
        var commonTasksList = commonTasks.map(function (task) { return ({
            id: task.id,
            name: task.name,
            url: task.url,
            courseName: subject.name,
            learningGoal: step && learningGoals.length > 0 ? moduleName + " - \u00F6vergripande" : moduleName
        }); });
        var learningGoalsList = learningGoals.map(function (learningGoal) { return ({
            name: learningGoal.name,
            learningTasks: learningGoal.tasks.map(function (task) { return ({
                id: task.id,
                name: task.name,
                url: task.url,
                courseName: subject.name,
                learningGoal: learningGoal.name
            }); })
        }); });
        if (step) {
            commonTasksList.forEach(function (task) { return task.step = step; });
            learningGoalsList.forEach(function (lg) { return lg.learningTasks.forEach(function (task) { return task.step = step; }); });
        }
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_6__["LanguageContext"].Provider, { value: { intl: intl } },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_subcomponents_learning_goals_list__WEBPACK_IMPORTED_MODULE_3__["LearningGoalsList"], { commonTasks: commonTasksList, learningGoals: learningGoalsList }));
    };
    return _LearningTasks;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));
var LearningTasks = Object(_utility_components_SetupLanguageIntl__WEBPACK_IMPORTED_MODULE_4__["setupIntl"])(Object(react_intl__WEBPACK_IMPORTED_MODULE_5__["injectIntl"])(_LearningTasks));


/***/ }),

/***/ "./src/components/list-courses/list-courses.tsx":
/*!******************************************************!*\
  !*** ./src/components/list-courses/list-courses.tsx ***!
  \******************************************************/
/*! exports provided: ListCourses */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ListCourses", function() { return ListCourses; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/query-string */ "./src/utils/query-string.ts");
/* harmony import */ var _access_control_index__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../access-control/index */ "./src/access-control/index.ts");
/* harmony import */ var _repos_hidden_courses_repo__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../repos/hidden-courses-repo */ "./src/repos/hidden-courses-repo.ts");








var ListCourses = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ListCourses, _super);
    function ListCourses(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            isLoading: true,
            courses: [],
            headerOpen: false
        };
        _this.updateHiddenCourses = _this.updateHiddenCourses.bind(_this);
        return _this;
    }
    ListCourses.prototype.componentWillMount = function () {
        _repos_hidden_courses_repo__WEBPACK_IMPORTED_MODULE_7__["hiddenCoursesRepo"].subscribe(this.updateHiddenCourses, { fullCourse: true });
    };
    ListCourses.prototype.componentWillUnmount = function () {
        _repos_hidden_courses_repo__WEBPACK_IMPORTED_MODULE_7__["hiddenCoursesRepo"].unsubscribe(this.updateHiddenCourses);
    };
    ListCourses.prototype.updateHiddenCourses = function (courses) {
        this.setState({ courses: courses, isLoading: false });
    };
    ListCourses.prototype.hideCourse = function (course) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showInfo"])(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Sparar..."], ["Sparar..."]))));
                        return [4 /*yield*/, _repos_hidden_courses_repo__WEBPACK_IMPORTED_MODULE_7__["hiddenCoursesRepo"].hideCourse(course)];
                    case 1:
                        _a.sent();
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showInfo"])("");
                        return [2 /*return*/];
                }
            });
        });
    };
    ListCourses.prototype.showCourse = function (course) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showInfo"])(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Sparar..."], ["Sparar..."]))));
                        return [4 /*yield*/, _repos_hidden_courses_repo__WEBPACK_IMPORTED_MODULE_7__["hiddenCoursesRepo"].showCourse(course)];
                    case 1:
                        _a.sent();
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showInfo"])("");
                        return [2 /*return*/];
                }
            });
        });
    };
    ListCourses.prototype.render = function () {
        var _this = this;
        if (this.state.isLoading)
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__["Spinner"], null);
        var courses = this.state.courses;
        var visibleCourses = courses.filter(function (course) { return course.visible; });
        var hiddenCourses = courses.filter(function (course) { return !course.visible; });
        var query = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_5__["parseQueryString"])(location.search);
        var viewCourseUrl = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__["default"].KED_COURSE_VIEWER_URL;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "ked_boxed" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null, "Skolans kurser"),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "taskContainer odd-even" }, visibleCourses.map(function (course) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "studentCourse", key: course.id },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top pull-right" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "hideItem", onClick: function () { return _this.hideCourse(course); } })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: Object(_access_control_index__WEBPACK_IMPORTED_MODULE_6__["preserveImpersonationQuery"])(viewCourseUrl, { courseId: course.id }) }, course.name))),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "small" }, course.description)));
            })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openClose" + (this.state.headerOpen ? " open" : "") },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openHeader", onClick: function () { return _this.setState({ headerOpen: !_this.state.headerOpen }); } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, "Dolda kurser")),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openContent" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "taskContainer odd-even" }, hiddenCourses.map(function (course) {
                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "studentCourse", key: course.id },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top pull-right" },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "showItem", onClick: function () { return _this.showCourse(course); } })),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_5__["generateQueryString"])(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, query, { courseId: course.id })) }, course.name)),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "small" }, course.description)));
                    })))));
    };
    return ListCourses;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/my-courses/my-courses.tsx":
/*!**************************************************!*\
  !*** ./src/components/my-courses/my-courses.tsx ***!
  \**************************************************/
/*! exports provided: MyCourses */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MyCourses", function() { return MyCourses; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _repos_hidden_courses_repo__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../repos/hidden-courses-repo */ "./src/repos/hidden-courses-repo.ts");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../access-control */ "./src/access-control/index.ts");




var MyCourses = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](MyCourses, _super);
    function MyCourses(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            courses: [],
            isLoading: true
        };
        _this.updateHiddenCoursesState = _this.updateHiddenCoursesState.bind(_this);
        return _this;
    }
    MyCourses.prototype.componentDidMount = function () {
        _repos_hidden_courses_repo__WEBPACK_IMPORTED_MODULE_2__["hiddenCoursesRepo"].subscribe(this.updateHiddenCoursesState, { fullCourse: false });
    };
    MyCourses.prototype.updateHiddenCoursesState = function (courses) {
        this.setState({ courses: courses, isLoading: false });
    };
    MyCourses.prototype.componentWillUnmount = function () {
        _repos_hidden_courses_repo__WEBPACK_IMPORTED_MODULE_2__["hiddenCoursesRepo"].unsubscribe(this.updateHiddenCoursesState);
    };
    MyCourses.prototype.getCourseUrl = function (courseId) {
        return Object(_access_control__WEBPACK_IMPORTED_MODULE_3__["preserveImpersonationQuery"])(this.props.viewCourseUrl, { courseId: courseId });
    };
    MyCourses.prototype.render = function () {
        var _this = this;
        var viewCourseUrl = this.props.viewCourseUrl;
        var _a = this.state, isLoading = _a.isLoading, error = _a.error, courses = _a.courses;
        var visibleCourses = this.state.courses.filter(function (c) { return c.visible; });
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, isLoading ? (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { className: "lvl2 header" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", null, "Laddar..."))) : error ? (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { className: "lv12" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", null, "Kunde inte ladda kurser."))) : (visibleCourses.map(function (_a) {
            var name = _a.name, id = _a.id;
            return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { key: id, className: "lvl2" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: _this.getCourseUrl(id) }, name)));
        }))));
    };
    return MyCourses;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/tutors-select/tutors-select.tsx":
/*!********************************************************!*\
  !*** ./src/components/tutors-select/tutors-select.tsx ***!
  \********************************************************/
/*! exports provided: TutorsSelect */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TutorsSelect", function() { return TutorsSelect; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _globals_KED_tutorEnv__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../globals/KED.tutorEnv */ "./src/globals/KED.tutorEnv.ts");
/* harmony import */ var _utils_request_tutored_tokens__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils/request-tutored-tokens */ "./src/utils/request-tutored-tokens.ts");







var TutorsSelect = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TutorsSelect, _super);
    function TutorsSelect(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            isLoading: true,
            students: []
        };
        return _this;
    }
    TutorsSelect.prototype.componentDidMount = function () {
        this.load();
    };
    TutorsSelect.prototype.load = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var edsStudents, students, error_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 3, 5, 6]);
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["default"].edsClient.getTeacherTutorStudents()];
                    case 1:
                        edsStudents = _a.sent();
                        edsStudents.sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["compareProps"])(["lastName", "firstName"]));
                        students = edsStudents.length > 0 ?
                            edsStudents.map(function (_a) {
                                var email = _a.email, firstName = _a.firstName, lastName = _a.lastName;
                                return ({
                                    mail: email,
                                    displayName: firstName + " " + lastName
                                });
                            }) :
                            [_globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["default"].currentUser];
                        return [4 /*yield*/, this.setState({ students: students })];
                    case 2:
                        _a.sent();
                        return [3 /*break*/, 6];
                    case 3:
                        error_1 = _a.sent();
                        console.error("Could not list tutor students", error_1);
                        return [4 /*yield*/, this.setState({ students: [_globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["default"].currentUser] })];
                    case 4:
                        _a.sent();
                        return [3 /*break*/, 6];
                    case 5:
                        this.setState({ isLoading: false });
                        return [7 /*endfinally*/];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    TutorsSelect.prototype.onSelectUser = function (email) {
        var choosenStudent = this.state.students.filter(function (s) { return s.mail === email; })[0];
        var user = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, choosenStudent, { roles: ["USER"] });
        _globals_KED_tutorEnv__WEBPACK_IMPORTED_MODULE_5__["default"].setNewEnv(user, function () { return Object(_utils_request_tutored_tokens__WEBPACK_IMPORTED_MODULE_6__["requestTutoredTokens"])(email, email); });
    };
    TutorsSelect.prototype.render = function () {
        var _this = this;
        var _a = this.state, isLoading = _a.isLoading, students = _a.students;
        if (isLoading)
            return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__["Spinner"], null);
        return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div", { className: "tutors-select" },
            react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("select", { onChange: function (ev) { return ev.target.value && _this.onSelectUser(ev.target.value); } },
                react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("option", { value: "" }, "V\u00E4lj elev"),
                students.map(function (student) {
                    return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("option", { key: student.mail, value: student.mail },
                        student.displayName,
                        " (",
                        student.mail,
                        ")");
                })));
    };
    return TutorsSelect;
}(react__WEBPACK_IMPORTED_MODULE_2___default.a.Component));



/***/ }),

/***/ "./src/components/tutors-view/index.ts":
/*!*********************************************!*\
  !*** ./src/components/tutors-view/index.ts ***!
  \*********************************************/
/*! exports provided: TutorsViewTest */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _tutors_view__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tutors-view */ "./src/components/tutors-view/tutors-view.tsx");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TutorsViewTest", function() { return _tutors_view__WEBPACK_IMPORTED_MODULE_0__["TutorsViewTest"]; });




/***/ }),

/***/ "./src/components/tutors-view/tutors-view.tsx":
/*!****************************************************!*\
  !*** ./src/components/tutors-view/tutors-view.tsx ***!
  \****************************************************/
/*! exports provided: TutorsViewTest */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TutorsViewTest", function() { return TutorsViewTest; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _tutors_select_tutors_select__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tutors-select/tutors-select */ "./src/components/tutors-select/tutors-select.tsx");
/* harmony import */ var _ks_termplanner_termplanner__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ks-termplanner/termplanner */ "./src/components/ks-termplanner/termplanner.tsx");
/* harmony import */ var _kg_termplanner_kg_termplanner_tutored__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../kg-termplanner/kg-termplanner-tutored */ "./src/components/kg-termplanner/kg-termplanner-tutored.tsx");
/* harmony import */ var _calendar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../calendar */ "./src/components/calendar/index.tsx");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _weekplanner__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../weekplanner */ "./src/components/weekplanner/index.ts");
/* harmony import */ var _utility_components_tutorable_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utility-components/tutorable-component */ "./src/components/utility-components/tutorable-component.tsx");









var TutorsViewTest = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TutorsViewTest, _super);
    function TutorsViewTest() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    TutorsViewTest.prototype.render = function () {
        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_tutors_select_tutors_select__WEBPACK_IMPORTED_MODULE_2__["TutorsSelect"], null),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_tutorable_component__WEBPACK_IMPORTED_MODULE_8__["TutorableComponent"], { tutored: true, createComponent: function (env) {
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_ks_termplanner_termplanner__WEBPACK_IMPORTED_MODULE_3__["KSTermPlanner"], { key: env.currentUser.mail, env: env, tutored: true, initialDate: new Date() });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_kg_termplanner_kg_termplanner_tutored__WEBPACK_IMPORTED_MODULE_4__["KGTermPlannerTutored"], null),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_tutorable_component__WEBPACK_IMPORTED_MODULE_8__["TutorableComponent"], { tutored: true, createComponent: function (env) {
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_weekplanner__WEBPACK_IMPORTED_MODULE_7__["WeekPlanner"], { key: env.currentUser.mail, env: env, viewCourseUrl: "https://www.svt.se" });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_tutorable_component__WEBPACK_IMPORTED_MODULE_8__["TutorableComponent"], { tutored: true, createComponent: function (env) {
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_calendar__WEBPACK_IMPORTED_MODULE_5__["Calendar"], { env: env, firstDay: moment__WEBPACK_IMPORTED_MODULE_6___default()().startOf('week').weekday(1), initialStartHour: 7, initialEndHour: 18, initialZoom: 0.75, numDays: 5 });
                } }));
    };
    return TutorsViewTest;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component));



/***/ }),

/***/ "./src/components/utility-components/LanguageContext.tsx":
/*!***************************************************************!*\
  !*** ./src/components/utility-components/LanguageContext.tsx ***!
  \***************************************************************/
/*! exports provided: LanguageContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LanguageContext", function() { return LanguageContext; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var LanguageContext = react__WEBPACK_IMPORTED_MODULE_0__["createContext"]({ intl: null });


/***/ }),

/***/ "./src/components/utility-components/SetupLanguageIntl.tsx":
/*!*****************************************************************!*\
  !*** ./src/components/utility-components/SetupLanguageIntl.tsx ***!
  \*****************************************************************/
/*! exports provided: setupIntl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setupIntl", function() { return setupIntl; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var react_intl_locale_data_en__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-intl/locale-data/en */ "./node_modules/react-intl/locale-data/en.js");
/* harmony import */ var react_intl_locale_data_en__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl_locale_data_en__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_intl_locale_data_sv__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-intl/locale-data/sv */ "./node_modules/react-intl/locale-data/sv.js");
/* harmony import */ var react_intl_locale_data_sv__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_intl_locale_data_sv__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _translations_sv_json__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../translations/sv.json */ "./src/translations/sv.json");
var _translations_sv_json__WEBPACK_IMPORTED_MODULE_4___namespace = /*#__PURE__*/__webpack_require__.t(/*! ../../translations/sv.json */ "./src/translations/sv.json", 1);
/* harmony import */ var _translations_en_json__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../translations/en.json */ "./src/translations/en.json");
var _translations_en_json__WEBPACK_IMPORTED_MODULE_5___namespace = /*#__PURE__*/__webpack_require__.t(/*! ../../translations/en.json */ "./src/translations/en.json", 1);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_8__);









var setupIntl = function (Component) {
    return /** @class */ (function (_super) {
        tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](_SetupLanguageIntl, _super);
        function _SetupLanguageIntl(props) {
            var _this = _super.call(this, props) || this;
            Object(react_intl__WEBPACK_IMPORTED_MODULE_1__["addLocaleData"])(tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](react_intl_locale_data_en__WEBPACK_IMPORTED_MODULE_2___default.a, react_intl_locale_data_sv__WEBPACK_IMPORTED_MODULE_3___default.a));
            _this.messages = {
                'sv': _translations_sv_json__WEBPACK_IMPORTED_MODULE_4__,
                'en': _translations_en_json__WEBPACK_IMPORTED_MODULE_5__
            };
            moment__WEBPACK_IMPORTED_MODULE_8___default()().locale(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_7__["default"].KED_LOCALE);
            return _this;
        }
        _SetupLanguageIntl.prototype.render = function () {
            return react__WEBPACK_IMPORTED_MODULE_6__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_1__["IntlProvider"], { locale: _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_7__["default"].KED_LOCALE, messages: this.messages[_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_7__["default"].KED_LOCALE] },
                react__WEBPACK_IMPORTED_MODULE_6__["createElement"](Component, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.props)));
        };
        return _SetupLanguageIntl;
    }(react__WEBPACK_IMPORTED_MODULE_6__["Component"]));
};


/***/ }),

/***/ "./src/components/utility-components/content-editable-field.tsx":
/*!**********************************************************************!*\
  !*** ./src/components/utility-components/content-editable-field.tsx ***!
  \**********************************************************************/
/*! exports provided: ContentEditableField */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContentEditableField", function() { return ContentEditableField; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var ContentEditableField = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ContentEditableField, _super);
    function ContentEditableField(props) {
        var _this = _super.call(this, props) || this;
        _this.myself = react__WEBPACK_IMPORTED_MODULE_1__["createRef"]();
        _this.state = {
            text: props.text || ''
        };
        return _this;
    }
    ContentEditableField.prototype.render = function () {
        var _a = this.props, tag = _a.tag, text = _a.text, readOnly = _a.readOnly;
        var TagType = tag;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](TagType, { contentEditable: !readOnly, "data-placeholder": this.props.placeholder, ref: this.myself, className: this.props.className, onChange: this.onChange.bind(this), onKeyDown: this.onKeyDown.bind(this), onKeyUp: this.onKeyUp.bind(this), onBlur: this.onBlur.bind(this), onPaste: this.onPaste.bind(this), dangerouslySetInnerHTML: { __html: text } });
    };
    ContentEditableField.prototype.onChange = function (e) {
        this.setState({ text: this.myself.current.innerText });
    };
    /**
     * Take action depending on key-event
     * @param e event from field
     *
     * If allowNavigation then listen to arrow-keys
     * Limits to maxChars
     */
    ContentEditableField.prototype.onKeyDown = function (e) {
        var text = this.myself.current.innerText;
        if (e.key === 'Escape') {
            this.myself.current.innerText = this.props.text || "";
            this.myself.current.blur();
            e.stopPropagation();
        }
        else if (e.key === 'Enter') {
            e.preventDefault();
            this.navigate(text, 'down');
        }
        else if (e.key === 'Tab') {
            this.propagateOnChange(text);
        }
        else if (text.length >= this.props.maxChars && (/^[\d\w\s]$/.test(e.key) && !(e.metaKey || e.ctrlKey))) {
            e.preventDefault();
        }
        if (this.props.allowNavigation === true) {
            var navDir = e.key.startsWith('Arrow') ? e.key.replace('Arrow', '').toLowerCase() : false;
            var caret = document.getSelection().getRangeAt(0).endOffset; // only works for plaintext
            if (navDir && text.length == 0) {
                this.navigate(text, navDir);
            }
            else if (navDir && (navDir == 'up' || navDir == 'down')) {
                this.navigate(text, navDir);
            }
            else if (navDir && ((navDir == 'left' && caret == 0) ||
                (navDir == 'right' && caret == text.length))) {
                this.navigate(text, navDir);
            }
        }
    };
    /**
     *
     * @param e event from field
     * Solely used to hande validations-issues
     */
    ContentEditableField.prototype.onKeyUp = function (e) {
        var text = this.myself.current.innerText;
        if (this.props.validateValue !== undefined && !this.props.validateValue.test(text)) {
            this.myself.current.innerText = this.props.text || "";
            this.myself.current.blur();
            e.preventDefault();
        }
    };
    /**
     * Update value and pass to parents navigate-funciton
     * @param text
     * @param direction
     */
    ContentEditableField.prototype.navigate = function (text, direction) {
        // first update cell
        this.propagateOnChange(text);
        this.setState({ text: text });
        // then navigate away
        this.props.onNavigate(direction);
    };
    /**
     * Make sure pasted text is pure text
     * @param e the paset event
     */
    ContentEditableField.prototype.onPaste = function (e) {
        e.preventDefault();
        var text = (e.clipboardData && e.clipboardData.getData) ? e.clipboardData.getData("text/plain") : '';
        document.execCommand("insertHTML", false, text);
    };
    /**
     * Update value on exit from field
     * @param e
     */
    ContentEditableField.prototype.onBlur = function (e) {
        var text = this.myself.current.innerText;
        this.propagateOnChange(text);
        this.setState({ text: text });
    };
    /**
     * Only update value if it has changed
     * @param newValue
     */
    ContentEditableField.prototype.propagateOnChange = function (newValue) {
        if (this.propagatedOnChange != newValue) {
            this.propagatedOnChange = newValue;
            this.props.onChange(newValue);
        }
    };
    return ContentEditableField;
}(react__WEBPACK_IMPORTED_MODULE_1__["PureComponent"]));



/***/ }),

/***/ "./src/components/utility-components/dialogs.tsx":
/*!*******************************************************!*\
  !*** ./src/components/utility-components/dialogs.tsx ***!
  \*******************************************************/
/*! exports provided: Dialogs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Dialogs", function() { return Dialogs; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _course_builder_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../course-builder/sub-components/remove-item */ "./src/components/course-builder/sub-components/remove-item.tsx");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-dom */ "react-dom");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jquery */ "jquery");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_4__);





var Dialogs = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Dialogs, _super);
    function Dialogs(props) {
        return _super.call(this, props) || this;
    }
    Dialogs.prototype.componentDidUpdate = function (prevProps) {
        if (this.lastDiv !== null && prevProps.dialogs.length > this.props.dialogs.length) {
            // A dialog was closed. Now focus the last dialog:
            jquery__WEBPACK_IMPORTED_MODULE_4___default()(Object(react_dom__WEBPACK_IMPORTED_MODULE_3__["findDOMNode"])(this.lastDiv)).find(':input').first().focus();
        }
    };
    Dialogs.prototype.render = function () {
        var _this = this;
        this.lastDiv = null;
        var _a = this.props, dialogs = _a.dialogs, popDialog = _a.popDialog;
        jquery__WEBPACK_IMPORTED_MODULE_4___default()('body').attr('aria-disabled', dialogs.length > 0);
        jquery__WEBPACK_IMPORTED_MODULE_4___default()('body').css('overflow', dialogs.length > 0 ? 'hidden' : 'auto');
        return dialogs.length > 0 && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, dialogs.map(function (dialog, idx) {
            var div;
            function onKeyPress(ev) {
                if (ev.which === 13 && (!ev.target || ev.target.tagName !== 'TEXTAREA')) {
                    jquery__WEBPACK_IMPORTED_MODULE_4___default()(Object(react_dom__WEBPACK_IMPORTED_MODULE_3__["findDOMNode"])(div)).find('.btn-default').click();
                }
                ev.stopPropagation();
            }
            function onKeyDown(ev) {
                if (ev.which === 27) { // Escape
                    popDialog();
                    ev.stopPropagation();
                    return;
                }
                if (ev.which === 83 && (ev.ctrlKey || ev.metaKey)) { // CTRL-S
                    var domNode = Object(react_dom__WEBPACK_IMPORTED_MODULE_3__["findDOMNode"])(div);
                    ev.preventDefault();
                    var defaultButton = jquery__WEBPACK_IMPORTED_MODULE_4___default()(domNode).find('.btn-default');
                    defaultButton.click();
                    ev.stopPropagation();
                }
            }
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: idx },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "darken" }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "modal-page-wrap" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "modal-page", ref: function (elem) {
                            div = elem;
                            if (idx === dialogs.length - 1)
                                _this.lastDiv = elem;
                        }, tabIndex: 0, "aria-disabled": idx < dialogs.length - 1, onKeyPress: onKeyPress, onKeyDown: onKeyDown },
                        dialog,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_2__["RemoveItem"], { onClick: popDialog }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "stopFloats" }))));
        }));
    };
    return Dialogs;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/form-field-text-input.tsx":
/*!*********************************************************************!*\
  !*** ./src/components/utility-components/form-field-text-input.tsx ***!
  \*********************************************************************/
/*! exports provided: TextInput */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextInput", function() { return TextInput; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _form_field__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./form-field */ "./src/components/utility-components/form-field.tsx");



var TextInput = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TextInput, _super);
    function TextInput(props) {
        return _super.call(this, props) || this;
    }
    TextInput.prototype.render = function () {
        var _this = this;
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_form_field__WEBPACK_IMPORTED_MODULE_2__["FormField"], { label: this.props.label },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", autoFocus: this.props.autoFocus, id: this.props.id, size: 35, value: this.props.value, onChange: function (ev) { return _this.props.onChange(ev.target.value); }, placeholder: this.props.placeholder }))));
    };
    return TextInput;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/form-field-textarea.tsx":
/*!*******************************************************************!*\
  !*** ./src/components/utility-components/form-field-textarea.tsx ***!
  \*******************************************************************/
/*! exports provided: TextAreaFormField */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextAreaFormField", function() { return TextAreaFormField; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _form_field__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./form-field */ "./src/components/utility-components/form-field.tsx");



var TextAreaFormField = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TextAreaFormField, _super);
    function TextAreaFormField(props) {
        return _super.call(this, props) || this;
    }
    TextAreaFormField.prototype.render = function () {
        var _this = this;
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_form_field__WEBPACK_IMPORTED_MODULE_2__["FormField"], { label: this.props.label, id: this.props.id },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { autoFocus: this.props.autoFocus, id: this.props.id, cols: 35, rows: this.props.rows || 5, value: this.props.value, onChange: function (ev) { return _this.props.onChange(ev.target.value); }, placeholder: this.props.placeholder })),
                !!this.props.children && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem" }, this.props.children))));
    };
    return TextAreaFormField;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/form-field.tsx":
/*!**********************************************************!*\
  !*** ./src/components/utility-components/form-field.tsx ***!
  \**********************************************************/
/*! exports provided: FormField */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormField", function() { return FormField; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


function findId(node) {
    var recucheck = new Set();
    return (function findId(node) {
        if (typeof node === 'string')
            return null;
        if (recucheck.has(node)) {
            return;
        }
        recucheck.add(node);
        if (node.props) {
            if (node.props.id)
                return node.props.id;
            if (node.props.children) {
                return findId(node.props.children);
            }
            return;
        }
        if (node.length) {
            for (var i = 0; i < node.length; ++i) {
                var child = node[i];
                if (child) {
                    var childId = findId(child);
                    if (childId)
                        return childId;
                    //console.log(child);
                }
            }
        }
    })(node);
}
var FormField = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](FormField, _super);
    function FormField(props) {
        return _super.call(this, props) || this;
    }
    FormField.prototype.render = function () {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("label", { className: "kclabel", htmlFor: this.props.id || findId(this.props.children) }, this.props.label),
            this.props.children);
    };
    return FormField;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/open-close-box.tsx":
/*!**************************************************************!*\
  !*** ./src/components/utility-components/open-close-box.tsx ***!
  \**************************************************************/
/*! exports provided: OpenCloseBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OpenCloseBox", function() { return OpenCloseBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _charts_goal_progress__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../charts/goal-progress */ "./src/components/charts/goal-progress.tsx");
/* REFACTOR: Move this component outside coursebuilder!
   This is a general-purpose component
*/



var OpenCloseBox = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](OpenCloseBox, _super);
    function OpenCloseBox(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            headerOpen: props.headerOpen || false
        };
        return _this;
    }
    OpenCloseBox.prototype.componentWillReceiveProps = function (nextProps) {
        if (nextProps.headerOpen !== this.props.headerOpen) {
            this.setState({ headerOpen: nextProps.headerOpen });
        }
    };
    OpenCloseBox.prototype.render = function () {
        var _this = this;
        var _a = this.props, title = _a.title, className = _a.className, children = _a.children, headerClassName = _a.headerClassName, contentClassName = _a.contentClassName, displayProgress = _a.displayProgress, progressData = _a.progressData, inactivated = _a.inactivated, inactivatedRender = _a.inactivatedRender;
        var headerOpen = this.state.headerOpen;
        if (inactivated)
            return inactivatedRender === 'titleAndChildren' ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, title),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, children)) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, children);
        //var currentProgressData = //progressData();
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: (className || '') + " openClose" + (headerOpen ? " open" : "") },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openHeader" + (headerClassName ? " " + headerClassName : ""), onClick: function () {
                    if (_this.props.onOpenClose)
                        _this.props.onOpenClose(!_this.state.headerOpen);
                    _this.setState({ headerOpen: !_this.state.headerOpen });
                } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openHeaderContainer" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, title),
                    displayProgress && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_charts_goal_progress__WEBPACK_IMPORTED_MODULE_2__["GoalProgress"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, progressData)))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openContent" + (contentClassName ? " " + contentClassName : "") }, children));
    };
    return OpenCloseBox;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/tutorable-component.tsx":
/*!*******************************************************************!*\
  !*** ./src/components/utility-components/tutorable-component.tsx ***!
  \*******************************************************************/
/*! exports provided: TutorableComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TutorableComponent", function() { return TutorableComponent; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_tutorEnv__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../globals/KED.tutorEnv */ "./src/globals/KED.tutorEnv.ts");




var TutorableComponent = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TutorableComponent, _super);
    function TutorableComponent(props) {
        var _this = _super.call(this, props) || this;
        _this.onEnvUpdated = _this.onEnvUpdated.bind(_this);
        _this.state = {
            env: props.tutored ? null : _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"]
        };
        return _this;
    }
    TutorableComponent.prototype.componentDidMount = function () {
        if (this.props.tutored) {
            _globals_KED_tutorEnv__WEBPACK_IMPORTED_MODULE_3__["default"].subscribe(this.onEnvUpdated);
        }
    };
    TutorableComponent.prototype.componentWillUnmount = function () {
        if (this.props.tutored) {
            _globals_KED_tutorEnv__WEBPACK_IMPORTED_MODULE_3__["default"].unsubscribe(this.onEnvUpdated);
        }
    };
    TutorableComponent.prototype.onEnvUpdated = function (env) {
        this.setState({ env: env });
    };
    TutorableComponent.prototype.render = function () {
        var env = this.state.env;
        if (!env)
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null);
        if (!env.kedBackendClient) {
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, "Laddar...");
        }
        //const {currentUser, edsClient, kedBackendClient, kgTermPlannerRepo} = env;
        //const {tutored} = this.props;
        return this.props.createComponent(env);
    };
    return TutorableComponent;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/wysiwyg/actions-sv.ts":
/*!*****************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/actions-sv.ts ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _exec__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./exec */ "./src/components/utility-components/wysiwyg/exec.ts");

/* harmony default export */ __webpack_exports__["default"] = ({
    bold: {
        icon: '<b>F</b>',
        title: 'Fetstil',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('bold'); }
    },
    italic: {
        icon: '<i>K</i>',
        title: 'Kursiv',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('italic'); }
    },
    underline: {
        icon: '<u>U</u>',
        title: 'Understruken',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('underline'); }
    },
    strikethrough: {
        icon: '<strike>S</strike>',
        title: 'Struken',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('strikeThrough'); }
    },
    heading1: {
        icon: '<b>H<sub>1</sub></b>',
        title: 'Rubrik 1',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H1>'); }
    },
    heading2: {
        icon: '<b>H<sub>2</sub></b>',
        title: 'Rubrik 2',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H2>'); }
    },
    heading3: {
        icon: '<b>H<sub>3</sub></b>',
        title: 'Rubrik 3',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H3>'); }
    },
    paragraph: {
        icon: '&#182;',
        title: 'Paragraf',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<P>'); }
    },
    quote: {
        icon: '&#8220; &#8221;',
        title: 'Citat',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<BLOCKQUOTE>'); }
    },
    olist: {
        icon: '<i class="fa fa-list-ol" aria-hidden="true"></i>',
        title: 'Ordnad lista',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertOrderedList'); }
    },
    ulist: {
        icon: '<i class="fa fa-list" aria-hidden="true"></i>',
        title: 'Punktlista',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertUnorderedList'); }
    },
    outdent: {
        icon: '<i class="fa fa-outdent" aria-hidden="true"></i>',
        title: 'Minska indrag',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])("outdent"); }
    },
    indent: {
        icon: '<i class="fa fa-indent" aria-hidden="true"></i>',
        title: 'ka indrag',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])("indent"); },
    },
    code: {
        icon: '&lt;/&gt;',
        title: 'Programkod',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<PRE>'); }
    },
    line: {
        icon: '&#8213;',
        title: 'Vgrt linje',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertHorizontalRule'); }
    },
    link: {
        icon: '<i class="fa fa-link" aria-hidden="true"></i>',
        title: 'Infoga lnk',
        result: function () {
            var url = window.prompt('Ange lnkens URL');
            if (url)
                Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('createLink', url);
        }
    },
    image: {
        icon: '<i class="fa fa-picture-o" aria-hidden="true"></i>',
        title: 'Infoga bild',
        promptMsg: 'Ange bildens URL',
        result: function (ev, component) {
            var url = window.prompt(this.promptMsg);
            if (url) {
                //exec('insertImage', url);
                var img = document.createElement("img");
                img.src = url;
                img.tabIndex = 1;
                insertElement(img);
                img.onfocus = component.onFocus;
                img.onblur = component.onBlur;
                component.props.onChange(component.contentDiv.innerHTML);
            }
        }
    }
});
function insertElement(element) {
    var sel, range;
    if (window.getSelection && (sel = window.getSelection()).rangeCount) {
        range = sel.getRangeAt(0);
        range.collapse(true);
        range.insertNode(element);
        // Move the caret immediately after the inserted span
        range.setStartAfter(element);
        range.collapse(true);
        sel.removeAllRanges();
        sel.addRange(range);
    }
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/actions.ts":
/*!**************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/actions.ts ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _exec__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./exec */ "./src/components/utility-components/wysiwyg/exec.ts");

/* harmony default export */ __webpack_exports__["default"] = ({
    bold: {
        icon: '<b>B</b>',
        title: 'Bold',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('bold'); }
    },
    italic: {
        icon: '<i>I</i>',
        title: 'Italic',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('italic'); }
    },
    underline: {
        icon: '<u>U</u>',
        title: 'Underline',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('underline'); }
    },
    strikethrough: {
        icon: '<strike>S</strike>',
        title: 'Strike-through',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('strikeThrough'); }
    },
    heading1: {
        icon: '<b>H<sub>1</sub></b>',
        title: 'Heading 1',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H1>'); }
    },
    heading2: {
        icon: '<b>H<sub>2</sub></b>',
        title: 'Heading 2',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H2>'); }
    },
    heading3: {
        icon: '<b>H<sub>3</sub></b>',
        title: 'Heading 3',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H3>'); }
    },
    paragraph: {
        icon: '&#182;',
        title: 'Paragraph',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<P>'); }
    },
    quote: {
        icon: '&#8220; &#8221;',
        title: 'Quote',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<BLOCKQUOTE>'); }
    },
    olist: {
        icon: '&#35;',
        title: 'Ordered List',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertOrderedList'); }
    },
    ulist: {
        icon: '&#8226;',
        title: 'Unordered List',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertUnorderedList'); }
    },
    outdent: {
        icon: '<i class="fa fa-outdent" aria-hidden="true"></i>',
        title: 'Outdent',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])("outdent"); }
    },
    indent: {
        icon: '<i class="fa fa-indent" aria-hidden="true"></i>',
        title: 'Indent',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])("indent"); },
    },
    code: {
        icon: '&lt;/&gt;',
        title: 'Code',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<PRE>'); }
    },
    line: {
        icon: '&#8213;',
        title: 'Horizontal Line',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertHorizontalRule'); }
    },
    link: {
        icon: '&#128279;',
        title: 'Link',
        result: function () {
            var url = window.prompt('Enter the link URL');
            if (url)
                Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('createLink', url);
        }
    },
    image: {
        icon: '&#128247;',
        title: 'Image',
        promptMsg: 'Enter the URL of the image',
        result: function () {
            var url = window.prompt(this.promptMsg);
            if (url)
                Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertImage', url);
        }
    }
});


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/exec.ts":
/*!***********************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/exec.ts ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (command, value) {
    if (value === void 0) { value = null; }
    document.execCommand(command, false, value);
});


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/image-edit-actions.ts":
/*!*************************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/image-edit-actions.ts ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return imageEditActions; });
function imageEditActions(cb) {
    return [{
            name: 'float-left',
            icon: "<div style=\"position:relative\">\n      <i class=\"fa fa-align-right\" aria-hidden=\"true\"></i>\n      <div style=\"position:absolute; left:-4px;top:0; transform: scale(0.5); transform-origin: left top\">\n        <i class=\"fa fa-picture-o\" aria-hidden=\"true\"></i>\n      </div>\n    </div>",
            title: 'Lt bilden flyta vnster om text',
            result: function () { return cb('float-left'); }
        }, {
            name: 'float-right',
            icon: "<div style=\"position:relative\">\n      <i class=\"fa fa-align-left\" aria-hidden=\"true\"></i>\n      <div style=\"position:absolute; right:-4px;top:0; transform: scale(0.5); transform-origin: right top\">\n        <i class=\"fa fa-picture-o\" aria-hidden=\"true\"></i>\n      </div>\n    </div>",
            title: 'Lt bilden flyta hger om text',
            result: function () { return cb('float-right'); }
        }, {
            name: 'unfloat',
            icon: "<div style=\"position:relative;\" aria-hidden=\"true\">\n      <div style=\"position:absolute;top:0;left:0\">&#8254;</div>\n      <div style=\"position:absolute;top:0:left:0;transform: scale(0.5); transform-origin: left bottom\">\n        <i class=\"fa fa-picture-o\" aria-hidden=\"true\"></i>\n      </div>\n      <div style=\"position:absolute;top:0;left:0\">_</div>\n    </div>",
            title: 'Placera bilden p egen rad',
            result: function () { return cb('unfloat'); }
        }];
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/index.tsx":
/*!*************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/index.tsx ***!
  \*************************************************************/
/*! exports provided: Wysiwyg */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Wysiwyg", function() { return Wysiwyg; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _exec__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./exec */ "./src/components/utility-components/wysiwyg/exec.ts");
/* harmony import */ var _wash_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./wash-html */ "./src/components/utility-components/wysiwyg/wash-html.ts");
/* harmony import */ var _image_edit_actions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./image-edit-actions */ "./src/components/utility-components/wysiwyg/image-edit-actions.ts");
/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./actions */ "./src/components/utility-components/wysiwyg/actions.ts");






var classes = {
    actionbar: 'wysiwyg-actionbar',
    button: 'wysiwyg-button',
    content: 'wysiwyg-content',
    focusrect: 'wysiwyg-focusrect',
    focuspoint: 'wysiwyg-focuspoint',
    readonlyContent: 'wysiwyg-content readonly'
};
var Wysiwyg = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Wysiwyg, _super);
    function Wysiwyg(props) {
        var _this = _super.call(this, props) || this;
        _this.state = { focusRect: null };
        _this.onFocus = _this.onFocus.bind(_this);
        _this.onBlur = _this.onBlur.bind(_this);
        _this.onMouseDown = _this.onMouseDown.bind(_this);
        _this.onMouseMove = _this.onMouseMove.bind(_this);
        _this.onMouseUp = _this.onMouseUp.bind(_this);
        return _this;
    }
    Wysiwyg.prototype.componentDidMount = function () {
        var _this = this;
        if (!this.props.readOnly) {
            Array.from(this.contentDiv.querySelectorAll("img,a")).map(function (elem) { return elem; })
                .forEach(function (elem) {
                elem.tabIndex = 1;
                elem.onfocus = _this.onFocus;
                elem.onblur = _this.onBlur;
            });
            document.querySelector(".wysiwyg-content").addEventListener('mousedown', this.onMouseDown);
            document.querySelector(".wysiwyg-content").addEventListener('mousemove', this.onMouseMove);
            document.querySelector(".wysiwyg-content").addEventListener('mouseup', this.onMouseUp);
        }
        if (this.props.reportNumChars) {
            this.props.reportNumChars((this.contentDiv && this.contentDiv.innerText && this.contentDiv.innerText.length) || 0);
        }
    };
    Wysiwyg.prototype.componentDidUpdate = function () {
        var _this = this;
        Array.from(this.contentDiv.querySelectorAll("img,a")).map(function (elem) { return elem; })
            .forEach(function (elem) {
            elem.tabIndex = 1;
            elem.onfocus = _this.onFocus;
            elem.onblur = _this.onBlur;
        });
        if (this.props.reportNumChars) {
            this.props.reportNumChars((this.contentDiv && this.contentDiv.innerText && this.contentDiv.innerText.length) || 0);
        }
    };
    Wysiwyg.prototype.componentWillUnmount = function () {
        document.querySelector(".wysiwyg-content").removeEventListener('mousedown', this.onMouseDown);
        document.querySelector(".wysiwyg-content").removeEventListener('mousemove', this.onMouseMove);
        document.querySelector(".wysiwyg-content").removeEventListener('mouseup', this.onMouseUp);
    };
    Wysiwyg.prototype.shouldComponentUpdate = function (nextProps, nextState) {
        //this.contentDiv.onfocus = this.onFocus;
        //this.contentDiv.onblur = this.onBlur;
        return !this.contentDiv ||
            nextState != this.state ||
            nextProps.readOnly !== this.props.readOnly ||
            Object(_wash_html__WEBPACK_IMPORTED_MODULE_3__["washHtml"])(nextProps.html) !== Object(_wash_html__WEBPACK_IMPORTED_MODULE_3__["washHtml"])(this.contentDiv.innerHTML);
    };
    Wysiwyg.prototype.triggerOnChange = function (html) {
        this.props.onChange && this.props.onChange(Object(_wash_html__WEBPACK_IMPORTED_MODULE_3__["washHtml"])(html));
    };
    Wysiwyg.prototype.onFocus = function (ev) {
        var elem = ev.target;
        if (!elem || !elem.tagName)
            return;
        if (elem.tagName !== 'IMG' && elem.tagName !== 'A')
            return;
        var contentParent = this.contentDiv.parentElement;
        var newState = {
            focusRect: getRelatativeClientRect(contentParent, elem),
        };
        switch (elem.tagName) {
            case 'A':
            case 'IMG':
            default: break;
        }
        this.setState(newState);
        this.focusElem = elem;
    };
    Wysiwyg.prototype.onBlur = function (ev) {
        /*if (ev.relatedTarget) {
          const relatedTarget = ev.relatedTarget as HTMLElement;
          if (relatedTarget.className && relatedTarget.className.split(' ').indexOf(classes.button) >= 0) {
            // A image action button was pressed
            set
            return;
          }
        }*/
        if ((ev.target === this.focusElem && ev.relatedTarget !== this.focusRectDiv) ||
            ev.target === this.focusRectDiv) {
            this.setState({ focusRect: null });
        }
    };
    Wysiwyg.prototype.makeClickable = function (elem) {
        elem.tabIndex = 1;
    };
    Wysiwyg.prototype.onMouseDown = function (ev) {
        if ((ev.target.className || "").split(' ').indexOf(classes.focuspoint) >= 0) {
            var corner = this.getRectCorner(ev);
            this.corner = corner;
            this.resizeStartX = ev.clientX;
        }
    };
    Wysiwyg.prototype.onMouseMove = function (ev) {
        if (this.corner && this.state.focusRect && this.focusElem) {
            ev.preventDefault();
            // TODO: Rkna ut baserat p this.corner hur bildens storlek borde ndras.
            // Leta upp bilden per ID frn this.contentDiv
            // Stt DIV:ens style attribut width till ny width.
            // Om DIV:en redan hade height, stt ny height med samma aspect ratio som innan,
            // annars, stt inte height alls (eller mjligtvis till auto))
            var focusRect = this.focusRectDiv.getBoundingClientRect();
            if (focusRect.width < 32)
                return;
            //const currentWidth = focusRect.width;
            //const currentHeight = focusRect.height;
            //const hasHeightStyle = !this.focusElem.style.height || this.focusElem.style.height === "auto";
            var newWidth = Math.max(32, this.corner.endsWith('l') ?
                focusRect.width + (this.resizeStartX - ev.clientX) :
                //focusRect.right - ev.clientX :
                focusRect.width - (this.resizeStartX - ev.clientX));
            this.resizeStartX = ev.clientX;
            //ev.clientX - focusRect.left;
            var factor = newWidth / focusRect.width;
            var newHeight = focusRect.height * factor;
            this.focusElem.style.width = newWidth + "px";
            this.focusElem.style.height = newHeight + "px";
            this.setState({
                focusRect: getRelatativeClientRect(this.contentDiv.parentElement, this.focusElem),
            });
        }
    };
    Wysiwyg.prototype.onMouseUp = function (ev) {
        if (this.corner && this.state.focusRect && this.focusElem) {
            this.corner = null;
            this.triggerOnChange(this.contentDiv.innerHTML);
        }
    };
    Wysiwyg.prototype.getRectCorner = function (ev) {
        var e_1, _a;
        try {
            for (var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"]((ev.target.className || '').split(' ')), _c = _b.next(); !_c.done; _c = _b.next()) {
                var className = _c.value;
                switch (className) {
                    case 'fpul':
                        return 'ul';
                    case 'fpur':
                        return 'fpur';
                    case 'fplr':
                        return 'lr';
                    case 'fpll':
                        return 'll';
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return null;
    };
    Wysiwyg.prototype.execImageEditAction = function (cmd) {
        //console.log(cmd);
        if (!this.focusElem)
            return;
        //console.log("doing it");
        switch (cmd) {
            case 'float-left':
                this.focusElem.style.cssFloat = 'left';
                break;
            case 'float-right':
                this.focusElem.style.cssFloat = 'right';
                break;
            case 'unfloat':
                this.focusElem.style.cssFloat = '';
                break;
        }
        this.triggerOnChange(this.contentDiv.innerHTML);
        this.setState({ focusRect: getRelatativeClientRect(this.contentDiv.parentElement, this.focusElem) });
    };
    Wysiwyg.prototype.render = function () {
        var _this = this;
        var defaultActions = this.props.defaultActions || _actions__WEBPACK_IMPORTED_MODULE_5__["default"];
        var actionsToUse = this.props.actions ? this.props.actions.map(function (action) {
            return typeof action === 'string' ?
                defaultActions[action] :
                defaultActions[action.name] ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, defaultActions[action.name], action) :
                    action;
        })
            : Object.keys(defaultActions).map(function (action) { return defaultActions[action]; });
        if (this.state.focusRect) {
            actionsToUse = actionsToUse.concat(Object(_image_edit_actions__WEBPACK_IMPORTED_MODULE_4__["default"])(function (cmd) { return _this.execImageEditAction(cmd); }));
        }
        var focusRect = this.state.focusRect;
        var _a = this.props, readOnly = _a.readOnly, reportNumChars = _a.reportNumChars, maxChars = _a.maxChars;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: this.props.className },
            !readOnly && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.actionbar }, actionsToUse.map(function (action, idx) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { key: idx, className: classes.button, dangerouslySetInnerHTML: { __html: action.icon }, title: action.title, onMouseDown: function (ev) { action.result(ev, _this); }, onMouseUp: function (ev) { return setTimeout(function () { return _this.contentDiv.focus(); }, 10); } });
            })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: readOnly ? classes.readonlyContent : classes.content, style: { position: 'relative', top: 0, left: 0 } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "editor", ref: function (div) { return _this.contentDiv = div; }, dangerouslySetInnerHTML: { __html: Object(_wash_html__WEBPACK_IMPORTED_MODULE_3__["washHtml"])(this.props.html) }, contentEditable: !readOnly, onPaste: function (ev) {
                        if (!isNaN(maxChars)) {
                            var target = ev.target, currentTarget = ev.currentTarget;
                            //const textBeingOverwritten = (target as any).innerText || "";
                            var editorText = (currentTarget && currentTarget.innerText) || "";
                            var textBeingPasted = ev.clipboardData.getData("text/plain") || "";
                            if (editorText.length + textBeingPasted.length > maxChars) {
                                ev.preventDefault();
                            }
                        }
                    }, onKeyUp: reportNumChars ? function (ev) {
                        var innerText = ev.target.innerText;
                        reportNumChars(innerText ? innerText.length : 0);
                    } : null, onKeyPress: !isNaN(maxChars) ? function (ev) {
                        var innerText = ev.target.innerText;
                        if (innerText && innerText.length >= maxChars) {
                            ev.preventDefault();
                        }
                    } : null, onInput: function (ev) { return _this.triggerOnChange(ev.target.innerHTML); }, onKeyDown: function (ev) {
                        if (readOnly)
                            return;
                        if (reportNumChars && ev.currentTarget) {
                            reportNumChars((ev.currentTarget.innerText || "").length);
                        }
                        //console.log("Key: " + ev.which);
                        if (ev.which >= 35 && ev.which <= 40) { // home/end/up/down/left/right
                            ev.stopPropagation(); // Prevent entire page from scrolling??
                        }
                        if (ev.which === 9) {
                            ev.preventDefault(); // TAB
                            if (ev.shiftKey) {
                                Object(_exec__WEBPACK_IMPORTED_MODULE_2__["default"])("outdent");
                            }
                            else {
                                Object(_exec__WEBPACK_IMPORTED_MODULE_2__["default"])("indent");
                            }
                        }
                        if ((ev.keyCode === 8 || ev.keyCode === 46) && // Delete or Back buttons
                            _this.focusElem && _this.state.focusRect) {
                            if (_this.focusElem && _this.focusElem.parentElement) {
                                _this.focusElem.parentElement.removeChild(_this.focusElem); // Remove marked image
                            }
                            _this.focusElem = null;
                            _this.setState({ focusRect: null });
                            _this.triggerOnChange(_this.contentDiv.innerHTML);
                        }
                    } }),
                focusRect && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { ref: function (div) { return _this.focusRectDiv = div; }, className: classes.focusrect, onBlur: this.onBlur, tabIndex: 1, style: {
                        outline: 0,
                        position: 'absolute',
                        top: this.state.focusRect.top,
                        left: this.state.focusRect.left,
                        width: this.state.focusRect.width,
                        height: this.state.focusRect.height
                    } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.focuspoint + " fpul", style: { position: 'absolute', top: 0, left: 0 } }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.focuspoint + " fpur", style: { position: 'absolute', top: 0, right: 0 } }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.focuspoint + " fplr", style: { position: 'absolute', bottom: 0, right: 0 } }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.focuspoint + " fpll", style: { position: 'absolute', bottom: 0, left: 0 } }))));
    };
    return Wysiwyg;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

function getRelatativeClientRect(parent, child) {
    var parentRect = parent.getBoundingClientRect();
    var childRect = child.getBoundingClientRect();
    return {
        top: childRect.top - parentRect.top + parent.scrollTop,
        left: childRect.left - parentRect.left + parent.scrollLeft,
        bottom: childRect.bottom - parentRect.top + parent.scrollTop,
        right: childRect.right - parentRect.left + parent.scrollLeft,
        width: childRect.width,
        height: childRect.height
    };
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/wash-html.ts":
/*!****************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/wash-html.ts ***!
  \****************************************************************/
/*! exports provided: washHtml */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "washHtml", function() { return washHtml; });
var parser = new DOMParser();
/** Tags / Attributes Whitelist
 *
 */
var HTML_WASH_POLICY = {
    b: {},
    i: {},
    p: {},
    u: {},
    strike: {},
    pre: {},
    h1: {},
    h2: {},
    h3: {},
    h4: {},
    h5: {},
    img: { src: true, class: true, style: true, tabindex: true },
    a: { href: true, target: true, tabindex: true },
    ul: {},
    ol: {},
    li: {},
    hr: {},
    br: {},
    div: {},
    span: {},
    // table tags:
    table: { border: true },
    tbody: {},
    thead: {},
    tfoot: {},
    tr: {},
    td: { headers: true, colspan: true, rowspan: true },
    th: { abbr: true, headers: true, scope: true, sorted: true, colspan: true, rowspan: true }
};
function washHtml(html) {
    var doc = parser.parseFromString(html, "text/html");
    var childNodes = doc.body.childNodes;
    var modified = false;
    for (var i = 0; i < childNodes.length; ++i) {
        if (washNode(childNodes.item(i))) {
            modified = true;
        }
    }
    return modified ?
        doc.body.innerHTML :
        html; // By returning the original HTML string, we spare the user from refreshing the edit area,
    // which would otherwise put the cursor at the top, losing the position where user where.
}
function washNode(node) {
    var modified = false;
    if (isElement(node)) {
        if (washElement(node)) {
            modified = true;
        }
    }
    if (washChildNodes(node)) {
        modified = true;
    }
    return modified;
}
function washChildNodes(node) {
    var modified = false;
    var childNodes = node.childNodes;
    for (var i = 0; i < childNodes.length; ++i) {
        if (washNode(childNodes.item(i))) {
            modified = true;
        }
    }
    return modified;
}
/** Replace an element with its child nodes.
 *
 */
function removeMiddleElement(element) {
    var childNodes = element.childNodes;
    for (var i = 0; i < childNodes.length; ++i) {
        element.parentNode.insertBefore(childNodes.item(i), element);
    }
    element.remove();
}
function washElement(element) {
    var policy = element.tagName && HTML_WASH_POLICY[element.tagName.toLowerCase()];
    if (!policy) {
        console.warn("Wysiwyg: not allowed tag", element.tagName);
        washChildNodes(element);
        removeMiddleElement(element);
        return true;
    }
    var modified = false;
    for (var i = 0; i < element.attributes.length; ++i) {
        var attr = element.attributes.item(i);
        var allowed = attr.name && !!policy[attr.name.toLowerCase()];
        if (!allowed) {
            modified = true;
            console.warn("Wysiwyg: not allowed attribute", attr.name, "Tag: ", element.tagName);
            element.removeAttribute(attr.name);
        }
    }
    return modified;
}
function isElement(node) {
    return !!node.tagName;
}


/***/ }),

/***/ "./src/components/week-notebook/index.ts":
/*!***********************************************!*\
  !*** ./src/components/week-notebook/index.ts ***!
  \***********************************************/
/*! exports provided: WeekNotebook, RootWeekNotebook */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _week_notebook__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./week-notebook */ "./src/components/week-notebook/week-notebook.tsx");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "WeekNotebook", function() { return _week_notebook__WEBPACK_IMPORTED_MODULE_0__["WeekNotebook"]; });

/* harmony import */ var _root_week_notebook__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./root-week-notebook */ "./src/components/week-notebook/root-week-notebook.tsx");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RootWeekNotebook", function() { return _root_week_notebook__WEBPACK_IMPORTED_MODULE_1__["RootWeekNotebook"]; });





/***/ }),

/***/ "./src/components/week-notebook/root-week-notebook.tsx":
/*!*************************************************************!*\
  !*** ./src/components/week-notebook/root-week-notebook.tsx ***!
  \*************************************************************/
/*! exports provided: RootWeekNotebook */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RootWeekNotebook", function() { return RootWeekNotebook; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");
/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! . */ "./src/components/week-notebook/index.ts");



function RootWeekNotebook(props) {
    var intl = props.intl;
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](_utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_1__["LanguageContext"].Provider, { value: { intl: intl } },
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"](___WEBPACK_IMPORTED_MODULE_2__["WeekNotebook"], null));
}


/***/ }),

/***/ "./src/components/week-notebook/week-notebook.tsx":
/*!********************************************************!*\
  !*** ./src/components/week-notebook/week-notebook.tsx ***!
  \********************************************************/
/*! exports provided: WeekNotebook */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WeekNotebook", function() { return WeekNotebook; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _repos_week_notes_repo__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../repos/week-notes-repo */ "./src/repos/week-notes-repo.ts");
/* harmony import */ var _utils_pending_job__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/pending-job */ "./src/utils/pending-job.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utility-components/wysiwyg */ "./src/components/utility-components/wysiwyg/index.tsx");
/* harmony import */ var _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utility-components/wysiwyg/actions-sv */ "./src/components/utility-components/wysiwyg/actions-sv.ts");
/* harmony import */ var _utility_components_wysiwyg_actions__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utility-components/wysiwyg/actions */ "./src/components/utility-components/wysiwyg/actions.ts");
/* harmony import */ var _course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _utils_if_takes_time__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../utils/if-takes-time */ "./src/utils/if-takes-time.ts");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");













var MAX_NOTE_LENGTH = 16384;
var WeekNotebook = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](WeekNotebook, _super);
    function WeekNotebook(props) {
        var _this = _super.call(this, props) || this;
        _this.onChange = _this.onChange.bind(_this);
        _this.autoSaver = new _utils_pending_job__WEBPACK_IMPORTED_MODULE_3__["PendingJob"](function () { return _this.save(); });
        _this.state = {
            isLoading: true,
            showLoadingProgress: false,
            showSavingProgress: false,
            everEdited: false,
            notes: "",
        };
        return _this;
    }
    WeekNotebook.prototype.componentDidMount = function () {
        this.showProgressIfLoadingTakesTime();
        _repos_week_notes_repo__WEBPACK_IMPORTED_MODULE_2__["weekNotesRepo"].mem.subscribe(this.onChange);
    };
    WeekNotebook.prototype.showProgressIfLoadingTakesTime = function () {
        var _this = this;
        this.timeoutHandle = setTimeout(function () { return _this.state.isLoading && _this.setState({ showLoadingProgress: true }); }, 300);
    };
    WeekNotebook.prototype.componentWillUnmount = function () {
        _repos_week_notes_repo__WEBPACK_IMPORTED_MODULE_2__["weekNotesRepo"].mem.unsubscribe(this.onChange);
        this.autoSaver.stop();
        clearTimeout(this.timeoutHandle);
    };
    WeekNotebook.prototype._save = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var maxIterations;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        maxIterations = 3;
                        _a.label = 1;
                    case 1:
                        if (!(this.isNotesEdited() && maxIterations)) return [3 /*break*/, 4];
                        return [4 /*yield*/, _repos_week_notes_repo__WEBPACK_IMPORTED_MODULE_2__["weekNotesRepo"].upsert(this.state.weekNote, function (wn) {
                                wn.content = _this.state.notes;
                            })];
                    case 2:
                        _a.sent();
                        _a.label = 3;
                    case 3:
                        --maxIterations;
                        return [3 /*break*/, 1];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    WeekNotebook.prototype.save = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var err_1;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(!this.state.showSavingProgress && !this.state.isLoading && this.isNotesEdited())) return [3 /*break*/, 8];
                        return [4 /*yield*/, this.setState({ error: undefined })];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2:
                        _a.trys.push([2, 4, 6, 8]);
                        return [4 /*yield*/, Object(_utils_if_takes_time__WEBPACK_IMPORTED_MODULE_10__["ifTakesTime"])(300, function () { return _this._save(); }, function () { return _this.setState({ showSavingProgress: true }); })];
                    case 3:
                        _a.sent();
                        return [3 /*break*/, 8];
                    case 4:
                        err_1 = _a.sent();
                        console.error(err_1);
                        return [4 /*yield*/, this.setState({ error: this.context.intl.formatMessage({ id: "common.errorSavingData", defaultMessage: "Kunde inte spara." }) })];
                    case 5:
                        _a.sent();
                        return [3 /*break*/, 8];
                    case 6: return [4 /*yield*/, this.setState({ showSavingProgress: false })];
                    case 7:
                        _a.sent();
                        return [7 /*endfinally*/];
                    case 8: return [2 /*return*/];
                }
            });
        });
    };
    WeekNotebook.prototype.isNotesEdited = function () {
        var _a = this.state, weekNote = _a.weekNote, notes = _a.notes;
        return !!weekNote && (notes !== weekNote.content);
    };
    //If the notebook should be used in multiple modules, move this functions into an utility file
    WeekNotebook.prototype.getTranslatedActions = function (intl) {
        //actions might have different icons for each language
        //we keep the same structure of the actions, but we replace the texts with the ones from the translated files
        var localeActions = Object.assign({}, intl.locale === "sv" ? _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_7__["default"] : _utility_components_wysiwyg_actions__WEBPACK_IMPORTED_MODULE_8__["default"]);
        Object.keys(localeActions).forEach(function (elem) {
            var currentTitle = _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_7__["default"][elem].title;
            localeActions[elem].title = intl.formatMessage({ id: "wysiwyg." + elem, defaultMessage: currentTitle });
            //because the image action needs a custom translation, we treat this separately
            if (elem === "image") {
                localeActions[elem].promptMsg = intl.formatMessage({ id: "wysiwyg.imagePromptMsg", defaultMessage: _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_7__["default"][elem].promptMsg });
            }
        });
        return localeActions;
    };
    WeekNotebook.prototype.onChange = function (weekNotes) {
        var weekNote = weekNotes.length > 0 ?
            weekNotes[weekNotes.length - 1] :
            {
                id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["createUUID"])(),
                dateTime: Date.now(),
                //dateTime: weekNotesRepo.getCurrentWeek().toDate().getTime(),
                content: "",
                acl: [
                    // Default ACL: Let user self have full control over this item:
                    new kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["DocumentAccess"]("email", _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser.mail, "S")
                ].map(function (ac) { return ac.toString(); })
            };
        var newState = {
            weekNote: weekNote,
            //week: weekNotesRepo.getCurrentWeek().week(),
            isLoading: false,
            showLoadingProgress: false
        };
        if (!this.state.weekNote || this.state.weekNote.id !== weekNote.id || weekNotes.length === 0) {
            newState.notes = weekNote.content;
        }
        this.setState(newState);
    };
    /*async changeWeek(direction: number) {
      try {
        await this.setState({
          isLoading: true,
          everEdited: false,
          weekNote: null,
          error: undefined
        });
        this.showProgressIfLoadingTakesTime();
        await weekNotesRepo.changeWeek(direction);
      } catch (err) {
        console.error(err);
        await this.setState({error: "Kunde inte ladda data"});
      }
    }
  
    prevWeek() {
      this.changeWeek(-1);
    }
  
    nextWeek() {
      this.changeWeek(1);
    }*/
    WeekNotebook.prototype.render = function () {
        var _this = this;
        var _a = this.state, notes = _a.notes, showLoadingProgress = _a.showLoadingProgress, isLoading = _a.isLoading, showSavingProgress = _a.showSavingProgress, error = _a.error, everEdited = _a.everEdited;
        var intl = this.context.intl;
        return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "ked_boxed kedNotepad" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h3", null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_intl__WEBPACK_IMPORTED_MODULE_11__["FormattedMessage"], { id: "weekNotebook.title", defaultMessage: "Anteckningar" })),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_6__["Wysiwyg"], { actions: [
                        "bold",
                        "italic",
                        "underline",
                        "strikethrough",
                        "heading1",
                        "heading2",
                        "heading3",
                        "olist",
                        "ulist",
                        "outdent",
                        "indent",
                        "line"
                    ], defaultActions: this.getTranslatedActions(intl), html: isLoading ? "<div></div>" : notes.substr(0, MAX_NOTE_LENGTH), onChange: !isLoading && (function (html) {
                        _this.setState({
                            notes: html.substr(0, MAX_NOTE_LENGTH),
                            everEdited: true
                        });
                        _this.autoSaver.triggerChange(500);
                    }) }),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("hr", null),
                error ?
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { className: "error" }, error) :
                    showLoadingProgress ?
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span", null,
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_intl__WEBPACK_IMPORTED_MODULE_11__["FormattedMessage"], { id: "common.loading", defaultMessage: "Laddar..." }),
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_9__["Spinner"], null)) :
                        showSavingProgress ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span", null,
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_intl__WEBPACK_IMPORTED_MODULE_11__["FormattedMessage"], { id: "common.saving", defaultMessage: "Sparar..." }),
                                " \u00A0 "),
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_9__["Spinner"], null)) :
                            this.isNotesEdited() ?
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null, "\u00A0") :
                                everEdited ?
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_intl__WEBPACK_IMPORTED_MODULE_11__["FormattedMessage"], { id: "common.saved", defaultMessage: "Sparad" }) :
                                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null, "\u00A0"))));
    };
    WeekNotebook.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_12__["LanguageContext"];
    return WeekNotebook;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component));



/***/ }),

/***/ "./src/components/weekplanner/add-custom-goal.tsx":
/*!********************************************************!*\
  !*** ./src/components/weekplanner/add-custom-goal.tsx ***!
  \********************************************************/
/*! exports provided: AddCustomGoal */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddCustomGoal", function() { return AddCustomGoal; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");



var AddCustomGoal = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AddCustomGoal, _super);
    function AddCustomGoal(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            learningGoal: props.learningGoal || ''
        };
        return _this;
    }
    AddCustomGoal.prototype.render = function () {
        var _this = this;
        var learningGoal = this.state.learningGoal;
        var onSave = this.props.onSave;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_2__["FormattedMessage"], { id: "weekplanner.addLearningGoalTitle", defaultMessage: "L\u00E4gg till eget l\u00E4randem\u00E5l" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_2__["FormattedMessage"], { id: "weekplanner.addLearningGoal", defaultMessage: "M\u00E5l" })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", tabIndex: 1, size: 50, autoFocus: true, value: learningGoal, onChange: function (e) { return _this.setState({ learningGoal: e.target.value }); } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top spaced" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-large btn-default", onClick: function () { return onSave(learningGoal); } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_2__["FormattedMessage"], { id: "common.save", defaultMessage: "save" }))));
    };
    return AddCustomGoal;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/weekplanner/add-custom-task.tsx":
/*!********************************************************!*\
  !*** ./src/components/weekplanner/add-custom-task.tsx ***!
  \********************************************************/
/*! exports provided: AddCustomTask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddCustomTask", function() { return AddCustomTask; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility-components/form-field-text-input */ "./src/components/utility-components/form-field-text-input.tsx");
/* harmony import */ var _utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utility-components/form-field-textarea */ "./src/components/utility-components/form-field-textarea.tsx");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");






var AddCustomTask = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AddCustomTask, _super);
    function AddCustomTask(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            name: '',
            description: '',
            url: ''
        };
        return _this;
    }
    AddCustomTask.prototype.render = function () {
        var _this = this;
        var _a = this.state, name = _a.name, description = _a.description, url = _a.url;
        var _b = this.props, isTask = _b.isTask, onSave = _b.onSave;
        var intl = this.context.intl;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "customTask.addWorkGoalTitle", defaultMessage: "L\u00E4gg till eget arbetsm\u00E5l" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__["TextInput"], { label: intl.formatMessage({ id: 'common.nameLabel', defaultMessage: 'Namn' }), id: "AddCustomTask:name", placeholder: intl.formatMessage({ id: 'customTask.enterNamePlhd', defaultMessage: 'Ange namn...' }), value: name, autoFocus: true, onChange: function (name) { return _this.setState({ name: name }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_3__["TextAreaFormField"], { rows: 7, label: intl.formatMessage({ id: 'common.descriptionLabel', defaultMessage: 'Beskrivning' }), id: "AddCustomTask:description", placeholder: intl.formatMessage({ id: 'common.addDescriptionPlhd', defaultMessage: "Lgg till en beskrivning..." }), value: description, onChange: function (description) { return _this.setState({ description: description }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__["TextInput"], { label: intl.formatMessage({ id: 'common.linkLabel', defaultMessage: 'Lnk' }), id: "AddCustomTask:url", placeholder: "http://www...", value: url, onChange: function (url) { return _this.setState({ url: url }); } })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-large btn-default", onClick: function () { return onSave(name, description, url); } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "common.save", defaultMessage: "Spara" }))));
    };
    AddCustomTask.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_4__["LanguageContext"];
    return AddCustomTask;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/weekplanner/add-or-edit-sub-task.tsx":
/*!*************************************************************!*\
  !*** ./src/components/weekplanner/add-or-edit-sub-task.tsx ***!
  \*************************************************************/
/*! exports provided: AddOrEditSubTask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddOrEditSubTask", function() { return AddOrEditSubTask; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility-components/form-field-text-input */ "./src/components/utility-components/form-field-text-input.tsx");
/* harmony import */ var _utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utility-components/form-field-textarea */ "./src/components/utility-components/form-field-textarea.tsx");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");







var AddOrEditSubTask = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AddOrEditSubTask, _super);
    function AddOrEditSubTask(props) {
        var _this = _super.call(this, props) || this;
        if (props.mode === 'edit') {
            var subTask = props.subTask;
            _this.state = {
                name: subTask.name || '',
                description: subTask.description || '',
                url: subTask.url || ''
            };
        }
        else {
            _this.state = {
                name: '',
                description: '',
                url: ''
            };
        }
        return _this;
    }
    AddOrEditSubTask.prototype.save = function () {
        // Update repo:
        var props = this.props;
        var userTask = props.userTask, closeDialog = props.closeDialog, userTasksRepo = props.userTasksRepo;
        var _a = this.state, name = _a.name, description = _a.description, url = _a.url;
        if (props.mode === 'edit') {
            // Edit existing:
            userTasksRepo.update([userTask], function (ut) {
                var subTasks = ut.subTasks;
                if (subTasks) {
                    ut.subTasks = subTasks.map(function (st) {
                        return st.id === props.subTask.id ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, st, { name: name, description: description, url: url }) : tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, st);
                    });
                }
            });
        }
        else {
            // Create new task
            var newSubTask_1 = {
                id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["createUUID"])(),
                name: name,
                description: description,
                url: url
            };
            // Update repo:
            userTasksRepo.update([userTask], function (ut) {
                if (!ut.subTasks) {
                    ut.subTasks = [];
                }
                ut.subTasks = ut.subTasks.concat(newSubTask_1);
            });
        }
        // Close dialog
        closeDialog();
    };
    AddOrEditSubTask.prototype.delete = function () {
        // Update repo:
        var props = this.props;
        if (props.mode !== 'edit') {
            throw new Error("Can only delete in edit mode");
        }
        props.userTasksRepo.update([props.userTask], function (ut) {
            if (ut.subTasks) {
                ut.subTasks = ut.subTasks.filter(function (t) { return t.id !== props.subTask.id; });
            }
        });
        // Close dialog:
        props.closeDialog();
    };
    AddOrEditSubTask.prototype.render = function () {
        var _this = this;
        var _a = this.state, name = _a.name, description = _a.description, url = _a.url;
        var props = this.props;
        var isEditMode = props.mode === 'edit';
        var intl = this.context.intl;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, isEditMode ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "addeditsubtask.editSubtask", defaultMessage: 'Redigera underuppgift' }) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "addeditsubtask.addSubtask", defaultMessage: 'L\u00E4gg till underuppgift' })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__["TextInput"], { autoFocus: true, label: intl.formatMessage({ id: 'addeditsubtask.nameLabel', defaultMessage: 'Underuppgiftens namn' }), id: "AddUserSubTask:name", placeholder: "", value: this.state.name, onChange: function (name) { return _this.setState({ name: name }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_3__["TextAreaFormField"], { label: intl.formatMessage({ id: 'common.descriptionLabel', defaultMessage: 'Beskrivning' }), id: "AddUserSubTask:description", rows: 7, placeholder: "", value: this.state.description, onChange: function (description) { return _this.setState({ description: description }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__["TextInput"], { label: intl.formatMessage({ id: 'common.linkLabel', defaultMessage: 'Lnk' }), id: "AddUserSubTask:url", placeholder: "", value: this.state.url, onChange: function (url) { return _this.setState({ url: url }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                props.mode === 'edit' && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn btn-warning btn-large pull-right", onClick: function (ev) { return _this.delete(); } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "addeditsubtask.deleteSubtask", defaultMessage: "Ta bort underuppgift" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-large btn-default", onClick: function () { return _this.save(); } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "common.save", defaultMessage: "Spara" }))));
    };
    AddOrEditSubTask.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_6__["LanguageContext"];
    return AddOrEditSubTask;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/weekplanner/edit-user-task.tsx":
/*!*******************************************************!*\
  !*** ./src/components/weekplanner/edit-user-task.tsx ***!
  \*******************************************************/
/*! exports provided: EditUserTask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditUserTask", function() { return EditUserTask; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _get_task_type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./get-task-type */ "./src/components/weekplanner/get-task-type.ts");
/* harmony import */ var react_datepicker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-datepicker */ "./node_modules/react-datepicker/es/index.js");
/* harmony import */ var _globals_moment_sv_locale__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../globals/moment-sv-locale */ "./src/globals/moment-sv-locale.ts");
/* harmony import */ var _utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utility-components/form-field-text-input */ "./src/components/utility-components/form-field-text-input.tsx");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _utility_components_form_field__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utility-components/form-field */ "./src/components/utility-components/form-field.tsx");
/* harmony import */ var _add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./add-or-edit-sub-task */ "./src/components/weekplanner/add-or-edit-sub-task.tsx");
/* harmony import */ var _utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utility-components/form-field-textarea */ "./src/components/utility-components/form-field-textarea.tsx");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");












var EditUserTask = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](EditUserTask, _super);
    function EditUserTask(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            userTask: props.userTask,
            name: props.userTask.name,
            description: props.userTask.description,
            url: props.userTask.url,
            deadline: props.userTask.deadline,
            subTasks: props.userTask.subTasks
        };
        _this.onUserTasksChanged = _this.onUserTasksChanged.bind(_this);
        return _this;
    }
    EditUserTask.prototype.componentDidMount = function () {
        this.props.userTasksRepo.subscribe(this.onUserTasksChanged);
    };
    EditUserTask.prototype.onUserTasksChanged = function (userTasks) {
        var _this = this;
        var myUserTask = userTasks.find(function (ut) { return ut.id === _this.props.userTask.id; });
        if (!myUserTask) {
            this.props.closeDialog();
            return;
        }
        this.setState({
            userTask: myUserTask,
            subTasks: myUserTask.subTasks
        });
    };
    EditUserTask.prototype.componentWillUnmount = function () {
        this.props.userTasksRepo.unsubscribe(this.onUserTasksChanged);
    };
    EditUserTask.prototype.isModified = function () {
        // Don't count subtask changes! They live their own life and is maintained
        // in add-or-edit-sub-task.tsx. Reason: User would expect added /edited subtasks
        // to be persisted right away. May click away this dialog.
        // Also reason: Can invoke that dialog by itself from other components. From WeekPlanner
        // when clicking the subtask for example!
        var _a = this.state, deadline = _a.deadline, description = _a.description, name = _a.name, url = _a.url, userTask = _a.userTask;
        return (deadline !== userTask.deadline ||
            description !== userTask.description ||
            name !== userTask.name ||
            url !== userTask.url);
    };
    EditUserTask.prototype.addSubTask = function () {
        this.props.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_8__["AddOrEditSubTask"], { mode: "add", userTask: this.state.userTask, closeDialog: this.props.closeDialog, userTasksRepo: this.props.userTasksRepo }));
    };
    EditUserTask.prototype.editSubTask = function (subTask) {
        this.props.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_8__["AddOrEditSubTask"], { mode: "edit", subTask: subTask, userTask: this.state.userTask, closeDialog: this.props.closeDialog, userTasksRepo: this.props.userTasksRepo }));
    };
    EditUserTask.prototype.render = function () {
        var _this = this;
        var _a = this.state, name = _a.name, description = _a.description, url = _a.url, deadline = _a.deadline, subTasks = _a.subTasks, showCalendar = _a.showCalendar, userTask = _a.userTask;
        var id = userTask.id, courseName = userTask.courseName;
        var _b = this.props, onUpdate = _b.onUpdate, onDelete = _b.onDelete;
        var isModified = this.isModified();
        var taskType = Object(_get_task_type__WEBPACK_IMPORTED_MODULE_2__["getTaskType"])(userTask);
        var isCustomTask = taskType === 'customTask';
        var expired = moment__WEBPACK_IMPORTED_MODULE_6___default()(userTask.deadline) < moment__WEBPACK_IMPORTED_MODULE_6___default()();
        var intl = this.context.intl;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "editTaskDialog sv-html-portlet sv-portlet sv-skip-spacer" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, isCustomTask ?
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.editWorkGoals", defaultMessage: 'Redigera arbetsm\u00E5l' }) :
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.editTask", defaultMessage: 'Redigera uppgift' })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_5__["TextInput"], { autoFocus: true, label: isCustomTask ? intl.formatMessage({ id: 'task.targetNameLabel', defaultMessage: 'Arbetsmlets namn' }) : intl.formatMessage({ id: 'task.taskNameLabel', defaultMessage: 'Uppgiftens namn' }), id: "EditUserTask:name", placeholder: isCustomTask ? intl.formatMessage({ id: 'task.whatShouldYouDoPlhd', defaultMessage: 'Vad ska du gra?' }) : intl.formatMessage({ id: 'task.enterTaskNamePlhd', defaultMessage: 'Ange uppgiftens namn...' }), value: name, onChange: function (name) { return _this.setState({ name: name }); } }),
            isCustomTask && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_9__["TextAreaFormField"], { rows: 5, label: intl.formatMessage({ id: 'common.descriptionLabel', defaultMessage: 'Beskrivning' }), id: "EditUserTask:description", placeholder: intl.formatMessage({ id: 'common.addDescriptionPlhd', defaultMessage: 'Lgg till en beskrivning...' }), value: description, onChange: function (description) { return _this.setState({ description: description }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_5__["TextInput"], { label: intl.formatMessage({ id: 'common.linkLabel', defaultMessage: "Lnk" }), id: "EdutUserTask:url", placeholder: "http(s)://...", value: url, onChange: function (url) { return _this.setState({ url: url }); } })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field__WEBPACK_IMPORTED_MODULE_7__["FormField"], { label: intl.formatMessage({ id: 'task.setDeadline', defaultMessage: 'Ange deadline' }) }, (deadline || showCalendar) ?
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_datepicker__WEBPACK_IMPORTED_MODULE_3__["default"], { ref: function (elem) { return _this.datePicker = elem; }, id: "EditUserTask:deadline", nextMonthButtonLabel: "", previousMonthButtonLabel: "", showWeekNumbers: true, selected: deadline && moment__WEBPACK_IMPORTED_MODULE_6___default()(deadline).toDate(), autoFocus: showCalendar, dateFormat: "yyyy-MM-dd", className: expired ? "expired" : undefined, locale: intl.locale, popperPlacement: isCustomTask ? "top-start" : "bottom-start", onBlur: function () { return _this.setState({ showCalendar: false }); }, onChange: function (value) {
                                _this.setState({
                                    deadline: value && moment__WEBPACK_IMPORTED_MODULE_6___default()(value).format("YYYY-MM-DD"),
                                    showCalendar: false
                                });
                            } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "deleteDate", href: "#", title: intl.formatMessage({ id: 'task.removeDeadline', defaultMessage: 'Ta bort deadline' }), onClick: function (ev) {
                                ev.preventDefault();
                                _this.setState({ deadline: null, showCalendar: false });
                            } }))) :
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "top", ref: function () { _this.datePicker = null; } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn", onClick: function (ev) {
                            if (_this.datePicker) {
                                _this.datePicker.setOpen(true);
                            }
                            _this.setState({
                                showCalendar: true
                            });
                        } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-calendar", "aria-hidden": "true" }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.setDeadlineLabel", defaultMessage: "Ange deadline..." })))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field__WEBPACK_IMPORTED_MODULE_7__["FormField"], { label: intl.formatMessage({ id: 'task.subTasks', defaultMessage: 'Underuppgifter' }) },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "learningGoalTasks" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "taskContainer" }, subTasks && subTasks.map(function (subTask) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: subTask.id, className: "align-horizontal" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { onClick: function () { return _this.editSubTask(subTask); }, href: "#" }, subTask.name))); }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { id: "EditUserTask:addSubTask", className: "btn", onClick: function () { return _this.addSubTask(); } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-plus", "aria-hidden": "true" }),
                            " ",
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.addSubtask", defaultMessage: "L\u00E4gg till underuppgift" }))))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "divider large" }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalButton top" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-default", onClick: function () {
                            isModified ? onUpdate(function (userTask) {
                                userTask.name = name;
                                userTask.description = description;
                                userTask.url = url;
                                userTask.deadline = deadline;
                            }) : _this.props.closeDialog();
                        } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "common.save", defaultMessage: "Spara" }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalButton top" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn", onClick: function () {
                            _this.props.closeDialog();
                        } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "common.cancel", defaultMessage: "Avbryt" }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "confirm top pull-right" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-warning", onClick: function () {
                            onDelete(id);
                        } }, isCustomTask ?
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.removeWorkGoals", defaultMessage: "Ta bort arbetsm\u00E5l" }) :
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.removeThisTask", defaultMessage: "Ta bort den h\u00E4r uppgiften" })))));
    };
    EditUserTask.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_11__["LanguageContext"];
    return EditUserTask;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/weekplanner/get-task-type.ts":
/*!*****************************************************!*\
  !*** ./src/components/weekplanner/get-task-type.ts ***!
  \*****************************************************/
/*! exports provided: getTaskType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTaskType", function() { return getTaskType; });
function getTaskType(userTask) {
    return userTask.course && userTask.task && userTask.course.length > 0 && userTask.task.length > 0 ?
        'courseBuilderTask' :
        userTask.siteVisionPageId ?
            'siteVisionTask' :
            userTask.courseInfo ?
                'subjectPlannerTask' :
                'customTask';
}


/***/ }),

/***/ "./src/components/weekplanner/index.ts":
/*!*********************************************!*\
  !*** ./src/components/weekplanner/index.ts ***!
  \*********************************************/
/*! exports provided: WeekPlanner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _weekplanner__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./weekplanner */ "./src/components/weekplanner/weekplanner.tsx");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "WeekPlanner", function() { return _weekplanner__WEBPACK_IMPORTED_MODULE_0__["WeekPlanner"]; });




/***/ }),

/***/ "./src/components/weekplanner/refiner.ts":
/*!***********************************************!*\
  !*** ./src/components/weekplanner/refiner.ts ***!
  \***********************************************/
/*! exports provided: refine */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "refine", function() { return refine; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");


function refine(tasks) {
    var e_1, _a, e_2, _b;
    var result = [];
    var mapper = {};
    var tasksPerCourse = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["arrayToLookup"])(tasks, function (t) { return t.courseName || ''; });
    try {
        for (var _c = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(tasksPerCourse).sort().filter(function (x) { return x; }).concat(tasksPerCourse[''] ?
            [''] : [])), _d = _c.next(); !_d.done; _d = _c.next()) {
            var courseName = _d.value;
            var courseTasks = tasksPerCourse[courseName] || tasksPerCourse[''];
            var tasksPerLearningGoal = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["arrayToLookup"])(courseTasks, function (t) { return t.learningGoal; });
            var resultLearningGoals = [];
            try {
                for (var _e = (e_2 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(tasksPerLearningGoal))), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var learningGoal = _f.value;
                    var lgTasks = tasksPerLearningGoal[learningGoal].sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["compareProp"])("dateTime"));
                    var learningGoalTask = lgTasks
                        .filter(function (t) { return t.name == null; }) // If name is undefined or null, this represents a learning goal
                    [0];
                    var url = learningGoalTask && learningGoalTask.url;
                    resultLearningGoals.push({
                        name: learningGoal,
                        allTasks: lgTasks,
                        url: url,
                        step: lgTasks.map(function (t) { return t.step; }).filter(function (step) { return step; })[0],
                        tasks: lgTasks.filter(function (t) { return t.name; })
                    });
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                }
                finally { if (e_2) throw e_2.error; }
            }
            result.push({
                courseName: courseName,
                learningGoals: resultLearningGoals
            });
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return result;
}


/***/ }),

/***/ "./src/components/weekplanner/user-tasks-box.tsx":
/*!*******************************************************!*\
  !*** ./src/components/weekplanner/user-tasks-box.tsx ***!
  \*******************************************************/
/*! exports provided: UserTasksBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UserTasksBox", function() { return UserTasksBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var _calendar_course_name_to_css_class__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../calendar/course-name-to-css-class */ "./src/components/calendar/course-name-to-css-class.ts");
/* harmony import */ var _get_task_type__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./get-task-type */ "./src/components/weekplanner/get-task-type.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../features */ "./src/features/index.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");











;
var UserTasksBox = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](UserTasksBox, _super);
    function UserTasksBox(props) {
        return _super.call(this, props) || this;
    }
    UserTasksBox.prototype.render = function () {
        var _this = this;
        var _a = this.props, courseName = _a.courseName, learningGoals = _a.learningGoals, progressData = _a.progressData, displayProgress = _a.displayProgress;
        var isOpen = !!this.props.openCourses[courseName];
        var features = new _features__WEBPACK_IMPORTED_MODULE_7__["Features"]();
        var intl = this.context.intl;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, courseName || react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_9__["FormattedMessage"], { id: "userTasks.goals", defaultMessage: "Egna l\u00E4randem\u00E5l" })), headerOpen: isOpen, className: courseName && Object(_calendar_course_name_to_css_class__WEBPACK_IMPORTED_MODULE_4__["courseNameToCssClass"])('wp-course-', courseName), onOpenClose: function (becameOpen) { return _this.props.setIsOpen(courseName, becameOpen); }, displayProgress: displayProgress, progressData: progressData }, learningGoals.map(function (lg) {
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: lg.name, className: "learningGoalContainer" },
                lg.step && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "stepIndicator" }, lg.step),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "learningGoalText horizontalItem top" }, lg.name),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem" },
                        "\u00A0",
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "trash", href: "#", title: intl.formatMessage({ id: 'userTasks.deleteLearningGoal', defaultMessage: 'Ta bort lrandemlet och dess uppgifter' }), onClick: function (ev) {
                                ev.preventDefault();
                                _this.props.removeLearningGoal(lg);
                            } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-trash" })))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "learningGoalTasks" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "taskContainer" }, lg.tasks.map(function (userTask) {
                        var isWorking = userTask.$meta === 'adding' || userTask.$meta === 'deleting' || userTask.$meta === 'updating';
                        var taskType = Object(_get_task_type__WEBPACK_IMPORTED_MODULE_5__["getTaskType"])(userTask);
                        var expired = moment__WEBPACK_IMPORTED_MODULE_6___default()(userTask.deadline).startOf('day') < moment__WEBPACK_IMPORTED_MODULE_6___default()().startOf('day');
                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: userTask.id, style: isWorking ? { opacity: 0.5 } : {} },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "checkBox" + (userTask.done ? " checked" : ""), onClick: function (ev) { return !isWorking && _this.props.setTaskDone(userTask, !userTask.done); } })),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                    taskType === 'courseBuilderTask' ?
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: getTaskUrl(userTask, _this.props.viewCourseUrl) }, userTask.name) :
                                        taskType === 'subjectPlannerTask' ?
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: getSubjectPlannerTaskUrl(userTask) }, userTask.name) :
                                            taskType === 'siteVisionTask' ?
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: userTask.url }, userTask.name) :
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: !userTask.url ? "link-less" : "", href: userTask.url || undefined, target: (userTask.url + '').toLowerCase().startsWith(location.host.toLowerCase()) ?
                                                        "_self" :
                                                        "_blank" }, userTask.name),
                                    userTask.deadline && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "dateSet" + (expired ? ' expired' : '') },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { title: moment__WEBPACK_IMPORTED_MODULE_6___default()(userTask.deadline).format("YYYY-MM-DD"), className: "fa fa-calendar", "aria-hidden": "true", onClick: function () { } }))),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top taskEdit" },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "editItem", onClick: function () { return _this.props.editTask(userTask); } }))),
                            userTask.subTasks && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "subtasks" }, userTask.subTasks.map(function (subTask) {
                                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: subTask.id },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "checkBox" + (subTask.done ? " checked" : ""), onClick: function (ev) {
                                                return !isWorking &&
                                                    _this.props.setSubTaskDone(userTask, subTask, !subTask.done);
                                            } })),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: subTask.url || undefined, target: (userTask.url + '').toLowerCase().startsWith(location.host.toLowerCase()) ?
                                                "_self" :
                                                "_blank", className: subTask.url ?
                                                undefined :
                                                'link-less' }, subTask.name)),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top taskEdit" },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "editItem", onClick: function () { return _this.props.editSubTask(userTask, subTask); } })));
                            })));
                    }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "learningGoalTools" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn addOwnGoal", onClick: function () { return _this.props.addOwnTask(_this.props.courseName, lg.name); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-plus", "aria-hidden": "true" }),
                        " ",
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_9__["FormattedMessage"], { id: 'userTasks.addLearningGoal', defaultMessage: 'Eget arbetsm\u00E5l' }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null));
        }));
    };
    UserTasksBox.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_10__["LanguageContext"];
    return UserTasksBox;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

function getTaskUrl(userTask, viewCourseUrl) {
    if (userTask.course && userTask.course.length > 0 && userTask.task && userTask.task.length > 0) {
        var courseUrl = Object(_access_control__WEBPACK_IMPORTED_MODULE_3__["preserveImpersonationQuery"])(viewCourseUrl, { courseId: userTask.course[0].id });
        return courseUrl + "#/task/" + userTask.task[0].id;
    }
    return userTask.url;
}
function getSubjectPlannerTaskUrl(userTask) {
    if (userTask.courseInfo && userTask.task && userTask.task.length > 0) {
        var _a = userTask.courseInfo, school = _a.school, course = _a.course, tab = _a.tab;
        var courseUrl = Object(_access_control__WEBPACK_IMPORTED_MODULE_3__["preserveImpersonationQuery"])(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_8__["default"].KED_SUBJECT_PLANNER_URL, {});
        return courseUrl + "#/" + school + "/courses/" + course + "/tabs/" + tab + "/tasks/" + userTask.task[0].id;
    }
    return userTask.url;
}


/***/ }),

/***/ "./src/components/weekplanner/weekplanner-persisted-state.ts":
/*!*******************************************************************!*\
  !*** ./src/components/weekplanner/weekplanner-persisted-state.ts ***!
  \*******************************************************************/
/*! exports provided: WeekPlannerPersistedState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WeekPlannerPersistedState", function() { return WeekPlannerPersistedState; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_moment_sv_locale__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../globals/moment-sv-locale */ "./src/globals/moment-sv-locale.ts");



var WeekPlannerPersistedState = /** @class */ (function () {
    function WeekPlannerPersistedState(userOrCopy) {
        if (typeof userOrCopy === 'string') {
            this.user = userOrCopy;
            this.lastWrite = Date.now();
            this.weekDate = Object(_globals_moment_sv_locale__WEBPACK_IMPORTED_MODULE_2__["localMoment"])().startOf('week').valueOf();
            this.openCourses = {};
        }
        else {
            Object.assign(this, userOrCopy);
        }
    }
    WeekPlannerPersistedState.load = function (user) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var cookie, storedData, state;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                cookie = localStorage.getItem('WeekPlannerPersistedState2');
                storedData = cookie && JSON.parse(cookie);
                state = new WeekPlannerPersistedState(user);
                if (storedData)
                    Object.assign(state, storedData);
                return [2 /*return*/, state.user === user && !state.isExpired(moment__WEBPACK_IMPORTED_MODULE_1___default()()) ?
                        state : new WeekPlannerPersistedState(user)];
            });
        });
    };
    WeekPlannerPersistedState.prototype.save = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                this.lastWrite = Date.now();
                json = JSON.stringify(this);
                localStorage.setItem('WeekPlannerPersistedState2', json);
                return [2 /*return*/];
            });
        });
    };
    WeekPlannerPersistedState.prototype.isExpired = function (asOf) {
        return moment__WEBPACK_IMPORTED_MODULE_1___default()(this.lastWrite)
            .isBefore(asOf.add(0 - WeekPlannerPersistedState.EXPIRATION_HOURS, 'hours'));
    };
    WeekPlannerPersistedState.EXPIRATION_HOURS = 12;
    WeekPlannerPersistedState.VERSION = 2;
    return WeekPlannerPersistedState;
}());



/***/ }),

/***/ "./src/components/weekplanner/weekplanner.tsx":
/*!****************************************************!*\
  !*** ./src/components/weekplanner/weekplanner.tsx ***!
  \****************************************************/
/*! exports provided: WeekPlanner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WeekPlanner", function() { return WeekPlanner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _user_tasks_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./user-tasks-box */ "./src/components/weekplanner/user-tasks-box.tsx");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _refiner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./refiner */ "./src/components/weekplanner/refiner.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _utility_components_dialogs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utility-components/dialogs */ "./src/components/utility-components/dialogs.tsx");
/* harmony import */ var _add_custom_goal__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./add-custom-goal */ "./src/components/weekplanner/add-custom-goal.tsx");
/* harmony import */ var _add_custom_task__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./add-custom-task */ "./src/components/weekplanner/add-custom-task.tsx");
/* harmony import */ var _edit_user_task__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./edit-user-task */ "./src/components/weekplanner/edit-user-task.tsx");
/* harmony import */ var _course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _utils_pending_job__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../utils/pending-job */ "./src/utils/pending-job.ts");
/* harmony import */ var _add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./add-or-edit-sub-task */ "./src/components/weekplanner/add-or-edit-sub-task.tsx");
/* harmony import */ var _utils_weekutil__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../utils/weekutil */ "./src/utils/weekutil.ts");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");
/* harmony import */ var _charts_progress__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../charts/progress */ "./src/components/charts/progress.tsx");
/* harmony import */ var _charts_charts_utils__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../charts/charts-utils */ "./src/components/charts/charts-utils.ts");
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../features */ "./src/features/index.ts");





















var MAX_STRATEGY_LENGTH = 16384;
var MAX_ASSESSMENT_LENGTH = 16384;
var WeekPlanner = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](WeekPlanner, _super);
    function WeekPlanner(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            userTasks: [],
            weekDate: Date.now(),
            openCourses: {},
            dialogs: [],
            saving: false,
            weekTextsUT: null,
            isLoading: true,
            isCopyingTasks: false
        };
        _this.onChange = _this.onChange.bind(_this);
        _this.weekTextsSavingJob = new _utils_pending_job__WEBPACK_IMPORTED_MODULE_13__["PendingJob"](function () { return _this.saveWeekTexts(); });
        return _this;
    }
    WeekPlanner.prototype.componentDidMount = function () {
        this.props.env.userTasksRepo.subscribe(this.onChange);
    };
    WeekPlanner.prototype.componentWillUnmount = function () {
        this.props.env.userTasksRepo.unsubscribe(this.onChange);
        this.weekTextsSavingJob.stop();
    };
    WeekPlanner.prototype.onChange = function (userTasks, persisted, weekTextsUT) {
        var newState = {
            userTasks: userTasks,
            weekDate: persisted.weekDate,
            openCourses: persisted.openCourses,
            weekTextsUT: weekTextsUT,
            isLoading: false
        };
        if (!this.state.weekTextsUT || (weekTextsUT.dateTime !== this.state.weekTextsUT.dateTime)) {
            // Changing week. Reset to new week's values
            newState.strategy = weekTextsUT.weekTexts.strategy;
            newState.assessment = weekTextsUT.weekTexts.assessment;
        }
        this.setState(newState); // React's use of Pick instead of Partial makes things complex here.
    };
    WeekPlanner.prototype.isWeekTextsEdited = function () {
        var _a = this.state, strategy = _a.strategy, assessment = _a.assessment, weekTextsUT = _a.weekTextsUT;
        return !!weekTextsUT && (strategy !== weekTextsUT.weekTexts.strategy || assessment !== weekTextsUT.weekTexts.assessment);
    };
    WeekPlanner.prototype.saveWeekTexts = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, strategy, assessment, weekTextsUT;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        console.log("Saving texts...");
                        _a = this.state, strategy = _a.strategy, assessment = _a.assessment, weekTextsUT = _a.weekTextsUT;
                        if (!this.isWeekTextsEdited()) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.props.env.userTasksRepo.upsert(weekTextsUT, function (ut) {
                                ut.weekTexts = { strategy: strategy, assessment: assessment };
                            })];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2: return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.prevWeek = function () {
        //this.saveWeekTexts(); 
        var prevWeekObj = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_15__["getPrevWeekDate"])(moment__WEBPACK_IMPORTED_MODULE_6___default()(this.state.weekDate));
        this.props.env.userTasksRepo.changeWeek(prevWeekObj.nextDate, prevWeekObj.adjusted);
    };
    WeekPlanner.prototype.nextWeek = function () {
        //this.saveWeekTexts();
        var nextWeekObj = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_15__["getNextWeekDate"])(moment__WEBPACK_IMPORTED_MODULE_6___default()(this.state.weekDate));
        this.props.env.userTasksRepo.changeWeek(nextWeekObj.nextDate, nextWeekObj.adjusted);
    };
    WeekPlanner.prototype.openDialog = function (dialog) {
        this.setState({ dialogs: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](this.state.dialogs, [dialog]) });
    };
    WeekPlanner.prototype.openAddGoalDialog = function () {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_custom_goal__WEBPACK_IMPORTED_MODULE_8__["AddCustomGoal"], { onSave: function (learningGoal) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            if (!learningGoal)
                                throw new Error(this.context.intl.formatMessage({ id: 'weekplanner.emptyLearningGoalErr', defaultMessage: 'Lrandemlet kan inte vara tomt' }));
                            if (!!this.state.saving) return [3 /*break*/, 5];
                            this.setState({ saving: true });
                            _a.label = 1;
                        case 1:
                            _a.trys.push([1, , 3, 4]);
                            return [4 /*yield*/, this.addCustomGoal(learningGoal)];
                        case 2:
                            _a.sent();
                            return [3 /*break*/, 4];
                        case 3:
                            this.setState({ saving: false });
                            return [7 /*endfinally*/];
                        case 4:
                            this.closeDialog();
                            _a.label = 5;
                        case 5: return [2 /*return*/];
                    }
                });
            }); } }));
    };
    WeekPlanner.prototype.openAddOwnTaskDialog = function (courseName, learningGoalName) {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_custom_task__WEBPACK_IMPORTED_MODULE_9__["AddCustomTask"], { isTask: !courseName, onSave: function (name, description, url) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            if (!name)
                                throw new Error(this.context.intl.formatMessage({ id: 'weekplanner.nameCannotBeEmpty', defaultMessage: 'Namnet kan inte vara tomt' }));
                            if (!!this.state.saving) return [3 /*break*/, 5];
                            this.setState({ saving: true });
                            _a.label = 1;
                        case 1:
                            _a.trys.push([1, , 3, 4]);
                            return [4 /*yield*/, this.addCustomTask(courseName, learningGoalName, name, description, url)];
                        case 2:
                            _a.sent();
                            return [3 /*break*/, 4];
                        case 3:
                            this.setState({ saving: false });
                            return [7 /*endfinally*/];
                        case 4:
                            this.closeDialog();
                            _a.label = 5;
                        case 5: return [2 /*return*/];
                    }
                });
            }); } }));
    };
    WeekPlanner.prototype.editTask = function (userTask) {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_edit_user_task__WEBPACK_IMPORTED_MODULE_10__["EditUserTask"], { userTasksRepo: this.props.env.userTasksRepo, userTask: userTask, onUpdate: function (updater) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                var test;
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            test = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, userTask);
                            updater(test);
                            if (!test.name)
                                throw new Error(this.context.intl.formatMessage({ id: 'weekplanner.nameMustNotBeEmpty', defaultMessage: 'Namnet fr inte vara tomt' }));
                            this.closeDialog();
                            return [4 /*yield*/, this.props.env.userTasksRepo.update([userTask], updater)];
                        case 1:
                            _a.sent();
                            return [2 /*return*/];
                    }
                });
            }); }, onDelete: function (id) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            this.closeDialog();
                            return [4 /*yield*/, this.props.env.userTasksRepo.delete([id])];
                        case 1:
                            _a.sent();
                            return [2 /*return*/];
                    }
                });
            }); }, openDialog: function (dialog) { return _this.openDialog(dialog); }, closeDialog: function () { return _this.closeDialog(); } }));
    };
    WeekPlanner.prototype.editSubTask = function (userTask, subTask) {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_14__["AddOrEditSubTask"], { userTasksRepo: this.props.env.userTasksRepo, mode: "edit", userTask: userTask, subTask: subTask, closeDialog: function () { return _this.closeDialog(); } }));
    };
    WeekPlanner.prototype.closeDialog = function () {
        this.setState({ dialogs: this.state.dialogs.slice(0, this.state.dialogs.length - 1) });
    };
    WeekPlanner.prototype.addCustomGoal = function (learningGoal) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var latestTimeStamp;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        latestTimeStamp = Math.max.apply(Math.max, [this.state.weekDate].concat(this.state.userTasks.map(function (t) { return t.dateTime; })));
                        return [4 /*yield*/, this.props.env.userTasksRepo.insert([{
                                    id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
                                    learningGoal: learningGoal,
                                    dateTime: latestTimeStamp + 2000
                                }])];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.props.env.userTasksRepo.setWeekPlannerBoxOpen("", true)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.removeLearningGoal = function (learningGoal) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (learningGoal.tasks.length > 0) {
                            if (!confirm(this.context.intl.formatMessage({ id: 'weekplanner.confirmRemoveLearningObjectives', defaultMessage: 'Ta bort lrandeml samt {learningGoalsNumber} uppgifter?' }, { learningGoalsNumber: learningGoal.tasks.length }))) {
                                return [2 /*return*/];
                            }
                        }
                        return [4 /*yield*/, this.props.env.userTasksRepo.delete(learningGoal.allTasks.map(function (t) { return t.id; }))];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.addCustomTask = function (courseName, learningGoal, name, description, url) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var latestTimeStamp;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        latestTimeStamp = Math.max.apply(Math.max, [this.state.weekDate].concat(this.state.userTasks.map(function (t) { return t.dateTime; })));
                        /*const emptyLearningGoalPlaceholder = this.state.userTasks.find(ut =>
                          ut.name == null &&
                          !ut.courseName &&
                          ut.learningGoal === learningGoal);
                    
                        if (emptyLearningGoalPlaceholder) {
                          // Hijack learning-goal placeholder and make it the real task.
                          // This will make the learning goal disappear once this task
                          // is deleted.
                          await userTasksRepo.update([emptyLearningGoalPlaceholder], ut => {
                            Object.assign(ut, { name, description, url });
                          });
                        } else {*/
                        // Add another task to same learning-goal
                        return [4 /*yield*/, this.props.env.userTasksRepo.insert([{
                                    id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
                                    dateTime: latestTimeStamp + 2000,
                                    courseName: courseName,
                                    learningGoal: learningGoal,
                                    name: name,
                                    description: description,
                                    url: url
                                }])];
                    case 1:
                        /*const emptyLearningGoalPlaceholder = this.state.userTasks.find(ut =>
                          ut.name == null &&
                          !ut.courseName &&
                          ut.learningGoal === learningGoal);
                    
                        if (emptyLearningGoalPlaceholder) {
                          // Hijack learning-goal placeholder and make it the real task.
                          // This will make the learning goal disappear once this task
                          // is deleted.
                          await userTasksRepo.update([emptyLearningGoalPlaceholder], ut => {
                            Object.assign(ut, { name, description, url });
                          });
                        } else {*/
                        // Add another task to same learning-goal
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.setIsOpen = function (courseName, isOpen) {
        this.props.env.userTasksRepo.setWeekPlannerBoxOpen(courseName, isOpen);
    };
    WeekPlanner.prototype.setTaskDone = function (task, done) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.props.env.userTasksRepo.setTaskDoneState(task, done)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.setSubTaskDone = function (task, subTask, done) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.props.env.userTasksRepo.setSubTaskDoneState(task, subTask.id, done)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.copyFromPreviousWeek = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, userTasks_1, openCourses, weekDate, prevWeek, prevWeekNo, prevKEDWeek, prevTasks, test, latestTimeStamp_1, copies;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, this.setState({ isCopyingTasks: true })];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, , 5, 6]);
                        _a = this.state, userTasks_1 = _a.userTasks, openCourses = _a.openCourses, weekDate = _a.weekDate;
                        prevWeek = moment__WEBPACK_IMPORTED_MODULE_6___default()(weekDate).add(-1, 'week');
                        prevWeekNo = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_15__["getAdjustedWeek"])(prevWeek);
                        prevKEDWeek = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_15__["KEDWeek"])(prevWeek.year(), prevWeekNo);
                        return [4 /*yield*/, this.props.env.kedBackendClient.list("usertasks", {
                                from: prevKEDWeek.notBefore,
                                to: prevKEDWeek.notAfter,
                                role: "USER",
                                include: ["task", "course", "acl"],
                                flags: ["includeIdsOnly"]
                            })];
                    case 3:
                        prevTasks = _b.sent();
                        prevTasks = prevTasks
                            .filter(function (prevTask) { return !prevTask.done; }) // Don't copy done tasks
                            .filter(function (prevTask) { return !!prevTask.name; }) // Don't copy empty learning goals
                            .filter(function (prevTask) { return !userTasks_1.some(function (taskOfCurrentWeek) {
                            return taskOfCurrentWeek.name === prevTask.name &&
                                taskOfCurrentWeek.learningGoal === prevTask.learningGoal &&
                                taskOfCurrentWeek.courseName === prevTask.courseName;
                        }); }); // Ignore identical tasks (already copied)
                        test = [weekDate].concat(userTasks_1.map(function (t) { return t.dateTime; }));
                        latestTimeStamp_1 = Math.max.apply(Math.max, [weekDate].concat(userTasks_1.map(function (t) { return t.dateTime; })));
                        copies = prevTasks.sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["compareProp"])("dateTime")).map(function (task) {
                            var copy = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, task, { dateTime: latestTimeStamp_1 += 1000 });
                            copy.id = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])();
                            if (copy.subTasks) {
                                copy.subTasks = copy.subTasks.filter(function (st) { return !st.done; });
                            }
                            delete copy.$etag;
                            return copy;
                        });
                        // Store it
                        return [4 /*yield*/, this.props.env.userTasksRepo.insert(copies)];
                    case 4:
                        // Store it
                        _b.sent();
                        return [3 /*break*/, 6];
                    case 5:
                        this.setState({ isCopyingTasks: false });
                        return [7 /*endfinally*/];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.getHeaderTitle = function () {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.logBook", defaultMessage: "Loggbok" }));
    };
    WeekPlanner.prototype.render = function () {
        var _this = this;
        var weekNumber = moment__WEBPACK_IMPORTED_MODULE_6___default()(this.state.weekDate).week();
        var showProgressCharts = _features__WEBPACK_IMPORTED_MODULE_20__["features"].weekplannerCharts;
        //console.log("Weekydate: "  + new Date(this.state.weekDate) + " which is week no " + weekNumber);
        var currentWeek = moment__WEBPACK_IMPORTED_MODULE_6___default()().week();
        var taskSets = Object(_refiner__WEBPACK_IMPORTED_MODULE_4__["refine"])(this.state.userTasks);
        var _a = this.state, dialogs = _a.dialogs, weekTextsUT = _a.weekTextsUT, strategy = _a.strategy, assessment = _a.assessment, isLoading = _a.isLoading, isCopyingTasks = _a.isCopyingTasks;
        var isSaving = weekTextsUT && (weekTextsUT.$meta === 'adding' || weekTextsUT.$meta === 'updating');
        var isStrategyEdited = !!weekTextsUT && (strategy !== weekTextsUT.weekTexts.strategy);
        var isAssessmentEdited = !!weekTextsUT && (assessment !== weekTextsUT.weekTexts.assessment);
        var enableSaveButton = !isSaving && (isStrategyEdited || isAssessmentEdited);
        var chartTasks = Object(_charts_charts_utils__WEBPACK_IMPORTED_MODULE_19__["getWeekplannerProgressData"])(taskSets);
        var percentage = taskSets.length > 0 ? chartTasks.completedTasks / chartTasks.totalNumberOfTasks * 100 : 0;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "ked_boxed weekPlanner" + (weekNumber === currentWeek ? " currentWeek" : ""), onKeyDown: function (ev) {
                    if (ev.which === 83 && ev.ctrlKey) {
                        ev.preventDefault();
                        if (!isSaving && _this.isWeekTextsEdited()) {
                            _this.weekTextsSavingJob.triggerChange(0);
                        }
                    }
                } },
                showProgressCharts && this.getHeaderTitle(),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "widgets" },
                    showProgressCharts ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "progressBar" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_charts_progress__WEBPACK_IMPORTED_MODULE_18__["Progress"], { percentage: percentage })) : this.getHeaderTitle(),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "weekSelect" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.weekNumber", values: { weekNumber: weekNumber }, defaultMessage: "Vecka {weekNumber}" }))),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn-group" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn", onClick: function () { return _this.prevWeek(); } },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-angle-left", "aria-hidden": "true" })),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn", onClick: function () { return _this.nextWeek(); } },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-angle-right", "aria-hidden": "true" })))))),
                taskSets.length > 0 && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                taskSets.map(function (props) {
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_user_tasks_box__WEBPACK_IMPORTED_MODULE_2__["UserTasksBox"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({ key: props.courseName }, props, { courseName: props.courseName, learningGoals: props.learningGoals, viewCourseUrl: _this.props.viewCourseUrl, openCourses: _this.state.openCourses, addOwnTask: function (courseName, learningGoalName) { return _this.openAddOwnTaskDialog(courseName, learningGoalName); }, setIsOpen: _this.setIsOpen.bind(_this), setTaskDone: _this.setTaskDone.bind(_this), setSubTaskDone: _this.setSubTaskDone.bind(_this), editTask: function (task) { return _this.editTask(task); }, editSubTask: function (task, subTask) { return _this.editSubTask(task, subTask); }, removeLearningGoal: function (lg) { return _this.removeLearningGoal(lg); }, displayProgress: showProgressCharts, progressData: chartTasks.subjectData[props.courseName] }));
                }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                isLoading ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_11__["Spinner"], null) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn", onClick: function (ev) { return _this.openAddGoalDialog(); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-list-alt", "aria-hidden": "true" }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.learningGoal", defaultMessage: "Eget l\u00E4randem\u00E5l" })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn", style: isCopyingTasks ? { opacity: 0.5 } : undefined, onClick: function (ev) { return (!isCopyingTasks) && _this.copyFromPreviousWeek(); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-clone", "aria-hidden": "true" }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.copyPreviousWeekTaks", defaultMessage: "Kopiera ej klara fr\u00E5n f\u00F6reg\u00E5ende vecka" })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_12__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.strategyAndEvaluation", defaultMessage: "Strategi & Utv\u00E4rdering" })), headerOpen: this.state.openCourses["StratUtv"], onOpenClose: function (becameOpen) { return _this.setIsOpen("StratUtv", becameOpen); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.strategy", defaultMessage: "Strategi" })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.strategyDescription", defaultMessage: "Hur jag ska g\u00F6ra f\u00F6r att l\u00E4ra mig." })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { className: "weekplanner-textarea", disabled: this.props.env.tutored, value: strategy && strategy.substr(0, MAX_STRATEGY_LENGTH), onChange: function (ev) {
                                _this.setState({ strategy: (ev.target.value || '').substr(0, MAX_STRATEGY_LENGTH) });
                                _this.weekTextsSavingJob.triggerChange(500);
                            } }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.evaluation", defaultMessage: "Utv\u00E4rdering" })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.evaluationDescription", defaultMessage: "Reflektion kring din arbetsinsats och dina valda strategier under veckan.Utv\u00E4rdera i f\u00F6rh\u00E5llande till dina m\u00E5l." })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { className: "weekplanner-textarea", value: assessment && assessment.substr(0, MAX_ASSESSMENT_LENGTH), disabled: this.props.env.tutored, onChange: function (ev) {
                                _this.setState({ assessment: (ev.target.value || '').substr(0, MAX_ASSESSMENT_LENGTH) });
                                _this.weekTextsSavingJob.triggerChange(500);
                            } }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn", tabIndex: 0, style: enableSaveButton ? {} : { opacity: 0.5 }, onClick: function () { return !isSaving && _this.weekTextsSavingJob.triggerChange(0); } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-floppy-o", "aria-hidden": "true" }),
                            enableSaveButton ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "common.save", defaultMessage: " Spara" }) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "common.saved", defaultMessage: " Sparad" }))))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_dialogs__WEBPACK_IMPORTED_MODULE_7__["Dialogs"], { dialogs: dialogs, popDialog: function () {
                    _this.setState(function (_a) {
                        var dialogs = _a.dialogs;
                        return ({ dialogs: dialogs.slice(0, dialogs.length - 1) });
                    });
                } }));
    };
    WeekPlanner.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_17__["LanguageContext"];
    return WeekPlanner;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/features/feature-flags.json":
/*!*****************************************!*\
  !*** ./src/features/feature-flags.json ***!
  \*****************************************/
/*! exports provided: picker, ksTutorComment, kgTutorComment, termplannerCharts, weekplannerCharts, teacherRights, studyGroups, cbCollapseBoxes, ksAssignments, markPartialKRs, default */
/***/ (function(module) {

module.exports = {"picker":"Integrate coursebuilder and subjectplanner with Google Picker","ksTutorComment":"Integrate KSTermplanner with tutor comments","kgTutorComment":"Integrate KSTermplanner  with tutor comments","termplannerCharts":"Integrate KSTermplanner with progress charts","weekplannerCharts":"Integrate Weekplanner with progress charts","teacherRights":"Activate course builder teacher rights","studyGroups":"Add study groups and google classroom functionality","cbCollapseBoxes":"Course Builder: Collapse modules by default","ksAssignments":"KS show hand-in assignments","markPartialKRs":"Activate mark partial knowledge requirments functionality"};

/***/ }),

/***/ "./src/features/features.ts":
/*!**********************************!*\
  !*** ./src/features/features.ts ***!
  \**********************************/
/*! exports provided: Features, features */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Features", function() { return Features; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "features", function() { return features; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/query-string */ "./src/utils/query-string.ts");
/* harmony import */ var _feature_flags_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./feature-flags.json */ "./src/features/feature-flags.json");
var _feature_flags_json__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! ./feature-flags.json */ "./src/features/feature-flags.json", 1);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");




var Features = /** @class */ (function () {
    function Features() {
        var e_1, _a;
        this._initialized = false;
        var _loop_1 = function (featureName) {
            Object.defineProperty(this_1, featureName, {
                get: function () {
                    if (!this._initialized)
                        this.init();
                    return this._features[featureName];
                },
                set: function (value) {
                    throw new Error('Feature flags cannot be set here');
                }
            });
        };
        var this_1 = this;
        try {
            for (var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(_feature_flags_json__WEBPACK_IMPORTED_MODULE_2__)), _c = _b.next(); !_c.done; _c = _b.next()) {
                var featureName = _c.value;
                _loop_1(featureName);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
    }
    Features.prototype.init = function () {
        var e_2, _a;
        if (this._initialized)
            return;
        var turnedOnFeatures = (_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_3__["cfg"].KED_FEATURES || "").split(',').map(function (name) { return name.trim().toLowerCase(); });
        var query = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["parseQueryString"])(location.search, { toLower: true });
        if (query.testversion) {
            turnedOnFeatures = ["*"];
        }
        if (query.features) {
            turnedOnFeatures = query.features
                .split(',')
                .map(function (feature) { return feature.trim().toLowerCase(); });
        }
        var turnOnAll = turnedOnFeatures.includes('*');
        this._features = {};
        try {
            for (var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(_feature_flags_json__WEBPACK_IMPORTED_MODULE_2__)), _c = _b.next(); !_c.done; _c = _b.next()) {
                var featureName = _c.value;
                this._features[featureName] = turnOnAll ||
                    turnedOnFeatures.includes(featureName.toLowerCase());
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_2) throw e_2.error; }
        }
        this._initialized = true;
    };
    return Features;
}());

var features = new Features();


/***/ }),

/***/ "./src/features/index.ts":
/*!*******************************!*\
  !*** ./src/features/index.ts ***!
  \*******************************/
/*! exports provided: Features, features */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./features */ "./src/features/features.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Features", function() { return _features__WEBPACK_IMPORTED_MODULE_0__["Features"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "features", function() { return _features__WEBPACK_IMPORTED_MODULE_0__["features"]; });




/***/ }),

/***/ "./src/global-setters/configure.ts":
/*!*****************************************!*\
  !*** ./src/global-setters/configure.ts ***!
  \*****************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(process) {/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");

_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].ENVIRONMENT = "production";
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_API_URL = "https://kind-kedbackend.azurewebsites.net/api/"; // "https://kedbackendtest.azurewebsites.net/api/"
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].EDS_API_URL = "http://localhost:8082/testdata/eds/"; // "https://edsportalowinapi.azurewebsites.net/api/"
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_TOKEN_URL = ""; // "https://kedauthtest.azurewebsites.net/token"
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_CLIENT_ID = ""; // "devclient", "testclient", "..."
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_CLIENT_SECRET = "";
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_REALM = "IN1"; // "SE1"
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_LOCALE = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_LOCALE || "sv"; // "sv", "en". Only set from process.env if not set from SiteVision element config.
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_SCHOOL_LOCALE = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_SCHOOL_LOCALE || "sv"; // "sv", "en_sin", "en_nin". Only set from process.env if not set from SiteVision element config.
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_RESOURCES_URL = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_RESOURCES_URL || process.env.KED_RESOURCES_URL;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./src/global-setters/set-all.ts":
/*!***************************************!*\
  !*** ./src/global-setters/set-all.ts ***!
  \***************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _configure__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./configure */ "./src/global-setters/configure.ts");
/* harmony import */ var _set_bearer_providers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./set-bearer-providers */ "./src/global-setters/set-bearer-providers.ts");
/* harmony import */ var _set_ked_backend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./set-ked-backend-client */ "./src/global-setters/set-ked-backend-client.ts");
/* harmony import */ var _set_eds_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./set-eds-client */ "./src/global-setters/set-eds-client.ts");
/* These scripts assume some of the global vars have already been set:
  * KED.cfg
  * KED.env.currentUser

  The rest will be set here (client side)
*/






/***/ }),

/***/ "./src/global-setters/set-bearer-providers.ts":
/*!****************************************************!*\
  !*** ./src/global-setters/set-bearer-providers.ts ***!
  \****************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/query-string */ "./src/utils/query-string.ts");
/* harmony import */ var kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/clientweb */ "./kedbackend/clientweb.js");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _access_control_index__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../access-control/index */ "./src/access-control/index.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/utils */ "./src/utils/utils.ts");








function getMergedTokenPath(tokenPath, locationSearch, scopes) {
    // Merge configured query params of token path with params given to current page
    var currentQuery = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["parseQueryString"])(locationSearch);
    var impersonationProps = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_7__["cherryPickProps"])(currentQuery, _access_control_index__WEBPACK_IMPORTED_MODULE_6__["IMPERSONATION_QUERY_PARAMS"]);
    var _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["splitUrlAndQuery"])(tokenPath), 2), tokenPathWithoutQuery = _a[0], tokenQueryString = _a[1];
    var tokenPathQuery = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["parseQueryString"])(tokenQueryString);
    return tokenPathWithoutQuery + Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["generateQueryString"])(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, tokenPathQuery, impersonationProps, { scopes: scopes.join(',') }));
}
function getTokenId(mergedTokenPath, userEmail) {
    return mergedTokenPath + "/" + userEmail;
}
function saveUserInfo(user, tokenId) {
    _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser = user;
    sessionStorage.setItem("userInfo" + tokenId, JSON.stringify(user));
}
function loadUserInfo(tokenId) {
    var storedSessionUser = sessionStorage.getItem("userInfo" + tokenId);
    if (storedSessionUser) {
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser = JSON.parse(storedSessionUser);
    }
}
function createBearerProvider(mergedTokenPath, userEmail) {
    var tokenId = getTokenId(mergedTokenPath, userEmail);
    return new kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["WebServerBearerProvider"](mergedTokenPath, function (responseText) {
        var res = JSON.parse(responseText);
        if (!res.ok)
            throw new Error(res.error);
        if (res.user) {
            saveUserInfo(res.user, tokenId);
        }
        return { token: res.token, expires: Date.now() + 59 * 60 * 1000 };
    }, tokenId);
}
function createGoogleTokenProvider(mergedTokenPath, userEmail) {
    var tokenId = getTokenId(mergedTokenPath, userEmail);
    return new kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["WebServerBearerProvider"](mergedTokenPath, function (responseText) {
        var res = JSON.parse(responseText);
        if (!res.ok)
            throw new Error(res.error);
        return { token: res.token, expires: Date.now() + 59 * 60 * 1000 };
    }, tokenId);
}
function createTestTokenProvider(tokenUrl, user, scopes) {
    return new kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["KedBearerProvider"](kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["isomorphic"], kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["storage"], tokenUrl + user.mail + location.search, _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_CLIENT_ID, _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_CLIENT_SECRET, tokenUrl, {
        email: user.mail.toLowerCase(),
        roles: user.roles,
        school: user.school,
        schoolType: user.schoolType,
        scopes: scopes
    });
}
// env.currentUser.mail is set by SiteVision server initially.
// A response from /api/token may change the mail attribute of the current
// user, so env.currentUser.mail may be different after getting a response.
// However, the initial value is valuable always in order to distinguish the case
// when one normal user logs out and another user logs in.
var initialUserEmail = _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser && _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser.mail; // Initial value of mail. May change.
if (initialUserEmail) {
    // KED
    if (_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_PATH) {
        //
        //
        // Production / SiteVision proxied /api/token to request tokens from:
        //
        //
        var mergedTokenPath = getMergedTokenPath(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_PATH, location.search, [
            "kedbackend",
            "EDS",
        ]);
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].bearerProvider = createBearerProvider(mergedTokenPath, initialUserEmail);
        loadUserInfo(getTokenId(mergedTokenPath, initialUserEmail));
        // Google
        var googleMergedPath = getMergedTokenPath(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_PATH, location.search, [
            "https://www.googleapis.com/auth/calendar.readonly",
        ]);
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].googleTokenProvider = createGoogleTokenProvider(googleMergedPath, initialUserEmail);
    }
    else if (_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_URL && _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_CLIENT_ID && _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_CLIENT_SECRET) {
        //
        //
        // Test - go directly to KEDAUTH server to retrieve tokens
        //
        //
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].bearerProvider = createTestTokenProvider(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_URL, _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser, [
            "kedbackend",
            "EDS",
        ]);
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].googleTokenProvider = createTestTokenProvider(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_URL + "/google", _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser, [
            "https://www.googleapis.com/auth/calendar.readonly",
        ]);
    }
    else {
        throw new Error("Missing configuration parameter KED_TOKEN_PATH");
    }
}


/***/ }),

/***/ "./src/global-setters/set-eds-client.ts":
/*!**********************************************!*\
  !*** ./src/global-setters/set-eds-client.ts ***!
  \**********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/clientweb */ "./kedbackend/clientweb.js");
/* harmony import */ var _apis_edsclient__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../apis/edsclient */ "./src/apis/edsclient.ts");




_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].edsClient = new _apis_edsclient__WEBPACK_IMPORTED_MODULE_3__["EdsClient"](kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["isomorphic"], _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__["default"].EDS_API_URL, _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].bearerProvider, function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.mail; });


/***/ }),

/***/ "./src/global-setters/set-ked-backend-client.ts":
/*!******************************************************!*\
  !*** ./src/global-setters/set-ked-backend-client.ts ***!
  \******************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/clientweb */ "./kedbackend/clientweb.js");



_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].kedBackendClient = new kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["KedBackendClientWeb"](_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__["default"].KED_API_URL, _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].bearerProvider);


/***/ }),

/***/ "./src/globals/KED.cfg.ts":
/*!********************************!*\
  !*** ./src/globals/KED.cfg.ts ***!
  \********************************/
/*! exports provided: default, cfg */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cfg", function() { return cfg; });
/* harmony import */ var _KED__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./KED */ "./src/globals/KED.ts");

;
if (!_KED__WEBPACK_IMPORTED_MODULE_0__["default"].cfg)
    _KED__WEBPACK_IMPORTED_MODULE_0__["default"].cfg = {};
/* harmony default export */ __webpack_exports__["default"] = (_KED__WEBPACK_IMPORTED_MODULE_0__["default"].cfg);
var cfg = _KED__WEBPACK_IMPORTED_MODULE_0__["default"].cfg;


/***/ }),

/***/ "./src/globals/KED.env.ts":
/*!********************************!*\
  !*** ./src/globals/KED.env.ts ***!
  \********************************/
/*! exports provided: default, env */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "env", function() { return env; });
/* harmony import */ var _ked__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ked */ "./src/globals/ked.ts");

if (!_ked__WEBPACK_IMPORTED_MODULE_0__["default"].env)
    _ked__WEBPACK_IMPORTED_MODULE_0__["default"].env = {};
/* harmony default export */ __webpack_exports__["default"] = (_ked__WEBPACK_IMPORTED_MODULE_0__["default"].env);
var env = _ked__WEBPACK_IMPORTED_MODULE_0__["default"].env;


/***/ }),

/***/ "./src/globals/KED.ts":
/*!****************************!*\
  !*** ./src/globals/KED.ts ***!
  \****************************/
/*! exports provided: KED_NAMESPACE, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KED_NAMESPACE", function() { return KED_NAMESPACE; });
var KED_NAMESPACE = "KED";
var result = typeof KED === 'undefined' ? {} : KED;
if (typeof window !== 'undefined' && typeof KED === 'undefined') {
    window[KED_NAMESPACE] = result;
}
/* harmony default export */ __webpack_exports__["default"] = (result);


/***/ }),

/***/ "./src/globals/KED.tutorEnv.ts":
/*!*************************************!*\
  !*** ./src/globals/KED.tutorEnv.ts ***!
  \*************************************/
/*! exports provided: TutorEnv, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TutorEnv", function() { return TutorEnv; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ked */ "./src/globals/ked.ts");


var TutorEnv = /** @class */ (function () {
    function TutorEnv() {
        this.subscribers = [];
        this.env = null;
        this.version = 1;
    }
    //promise: Promise<Env | null> = Promise.resolve(null);
    TutorEnv.prototype.subscribe = function (subscriber) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                this.subscribers.push(subscriber);
                subscriber(this.env);
                return [2 /*return*/];
            });
        });
    };
    TutorEnv.prototype.unsubscribe = function (subscriber) {
        this.subscribers = this.subscribers.filter(function (s) { return s !== subscriber; });
    };
    TutorEnv.prototype.notifySubscribers = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                this.subscribers.forEach(function (s) { return s(_this.env); });
                return [2 /*return*/];
            });
        });
    };
    TutorEnv.prototype.setNewEnv = function (user, envGetter) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var version, env;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        version = ++this.version;
                        this.env = { currentUser: user, tutored: true };
                        this.notifySubscribers(); // Make subscriber display "Loading... user name"
                        return [4 /*yield*/, envGetter().catch(function (err) { return ({
                                currentUser: user,
                                tutored: true,
                                error: err
                            }); })];
                    case 1:
                        env = _a.sent();
                        if (version === this.version) {
                            // No one else has called setEnv during this call.
                            ++this.version;
                            this.env = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, env, { tutored: true });
                            this.notifySubscribers(); // Make subscribers display the data.
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    return TutorEnv;
}());

if (!_ked__WEBPACK_IMPORTED_MODULE_1__["default"].tutorEnv)
    _ked__WEBPACK_IMPORTED_MODULE_1__["default"].tutorEnv = new TutorEnv();
/* harmony default export */ __webpack_exports__["default"] = (_ked__WEBPACK_IMPORTED_MODULE_1__["default"].tutorEnv);


/***/ }),

/***/ "./src/globals/ked.ts":
/*!****************************!*\
  !*** ./src/globals/ked.ts ***!
  \****************************/
/*! exports provided: KED_NAMESPACE, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KED_NAMESPACE", function() { return KED_NAMESPACE; });
var KED_NAMESPACE = "KED";
var result = typeof KED === 'undefined' ? {} : KED;
if (typeof window !== 'undefined' && typeof KED === 'undefined') {
    window[KED_NAMESPACE] = result;
}
/* harmony default export */ __webpack_exports__["default"] = (result);


/***/ }),

/***/ "./src/globals/moment-sv-locale.ts":
/*!*****************************************!*\
  !*** ./src/globals/moment-sv-locale.ts ***!
  \*****************************************/
/*! exports provided: localMoment */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "localMoment", function() { return localMoment; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");


if (_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__["default"].KED_LOCALE === "sv") {
    moment__WEBPACK_IMPORTED_MODULE_0___default.a.updateLocale('sv', {
        months: 'januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december'.split('_'),
        monthsShort: 'jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec'.split('_'),
        weekdays: 'sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag'.split('_'),
        weekdaysShort: 'sn_mn_tis_ons_tor_fre_lr'.split('_'),
        weekdaysMin: 's_m_ti_on_to_fr_l'.split('_'),
        longDateFormat: {
            LT: 'HH:mm',
            LTS: 'HH:mm:ss',
            L: 'YYYY-MM-DD',
            LL: 'D MMMM YYYY',
            LLL: 'D MMMM YYYY [kl.] HH:mm',
            LLLL: 'dddd D MMMM YYYY [kl.] HH:mm',
            lll: 'D MMM YYYY HH:mm',
            llll: 'ddd D MMM YYYY HH:mm'
        },
        calendar: {
            sameDay: '[Idag] LT',
            nextDay: '[Imorgon] LT',
            lastDay: '[Igr] LT',
            nextWeek: '[P] dddd LT',
            lastWeek: '[I] dddd[s] LT',
            sameElse: 'L'
        },
        relativeTime: {
            future: 'om %s',
            past: 'fr %s sedan',
            s: 'ngra sekunder',
            ss: '%d sekunder',
            m: 'en minut',
            mm: '%d minuter',
            h: 'en timme',
            hh: '%d timmar',
            d: 'en dag',
            dd: '%d dagar',
            M: 'en mnad',
            MM: '%d mnader',
            y: 'ett r',
            yy: '%d r'
        },
        dayOfMonthOrdinalParse: /\d{1,2}(e|a)/,
        ordinal: function (number) {
            var b = number % 10, output = (~~(number % 100 / 10) === 1) ? 'e' :
                (b === 1) ? 'a' :
                    (b === 2) ? 'a' :
                        (b === 3) ? 'e' : 'e';
            return number + output;
        },
        week: {
            dow: 1,
            doy: 4 // The week that contains Jan 4th is the first week of the year.
        }
    });
}
var localMoment = function () {
    return moment__WEBPACK_IMPORTED_MODULE_0___default.a.apply(this, arguments).locale(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__["default"].KED_LOCALE);
};


/***/ }),

/***/ "./src/repos/hidden-courses-repo.ts":
/*!******************************************!*\
  !*** ./src/repos/hidden-courses-repo.ts ***!
  \******************************************/
/*! exports provided: hiddenCoursesRepo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hiddenCoursesRepo", function() { return hiddenCoursesRepo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ked-repo */ "./src/repos/ked-repo.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _apis_edsclient__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../apis/edsclient */ "./src/apis/edsclient.ts");
/* harmony import */ var _utils_school_moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/school-moment */ "./src/utils/school-moment.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_7__);








var hiddenCoursesRepo = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].hiddenCoursesRepo;
var HiddenCoursesRepo = /** @class */ (function () {
    function HiddenCoursesRepo() {
        var _this = this;
        this.result = null;
        this.subscribers = [];
        this.fullCourse = false;
        this.notifySubscriber = function (subscriber, options) {
            try {
                subscriber(options.fullCourse ? _this.result : _this.result.filter(function (c) { return c.visible; }));
            }
            catch (err) {
                console.error(err);
            }
        };
        this.kedRepo = new _ked_repo__WEBPACK_IMPORTED_MODULE_1__["KedRepo"]({
            getClient: function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient; },
            optimistic: true,
            table: "userhiddencourses",
            user: _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser ? _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail : "",
            getQueryOptions: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                return [2 /*return*/, ({ role: "USER" })];
            }); }); },
        });
        var initPromise = this.init();
        Promise.all([
            initPromise,
            this.kedCoursesPromise,
            this.edsCoursesPromise
        ]).catch(function (err) { return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showError"])(err); });
    }
    HiddenCoursesRepo.prototype.init = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var bearerPromise, resolveUserHiddenCoursesPromise, userHiddenCoursesResolved;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        bearerPromise = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].bearerProvider ? _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].bearerProvider.getBearer() : Promise.resolve({});
                        // In parallell, we request:
                        //  1) KEDBackend: Schools.activeCourses
                        //  2) EDS.getActiveAcourses()
                        //  3) (via subscription): KEDBackend: userHiddenCourses
                        this.kedCoursesPromise = bearerPromise.then(function () { return _this.listKedCourses(); });
                        this.edsCoursesPromise = bearerPromise.then(function () { return _this.listEDSCourses(); });
                        userHiddenCoursesResolved = false;
                        this.userHiddenCoursesPromise = new Promise(function (resolve) { return resolveUserHiddenCoursesPromise = function (x) {
                            if (userHiddenCoursesResolved) {
                                _this.userHiddenCoursesPromise = Promise.resolve(x);
                            }
                            else {
                                userHiddenCoursesResolved = true;
                                resolve(x);
                            }
                        }; });
                        return [4 /*yield*/, bearerPromise];
                    case 1:
                        _a.sent();
                        this.kedRepo.mem.subscribe(function (userHiddenCourses) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            var _a, activeCourses, edsActiveCourses, _b;
                            var _this = this;
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                                switch (_c.label) {
                                    case 0: return [4 /*yield*/, Promise.all([
                                            this.kedCoursesPromise,
                                            this.edsCoursesPromise
                                        ])];
                                    case 1:
                                        _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"].apply(void 0, [_c.sent(), 2]), activeCourses = _a[0], edsActiveCourses = _a[1];
                                        // Refine the three results into a single result
                                        _b = this;
                                        return [4 /*yield*/, this.createCoursesList(edsActiveCourses, userHiddenCourses, activeCourses)];
                                    case 2:
                                        // Refine the three results into a single result
                                        _b.result = _c.sent();
                                        // Notify our subscribers:
                                        this.subscribers.forEach(function (subscriber) { return _this.notifySubscriber(subscriber.subscriber, subscriber.options); });
                                        resolveUserHiddenCoursesPromise(userHiddenCourses);
                                        return [2 /*return*/];
                                }
                            });
                        }); });
                        return [2 /*return*/];
                }
            });
        });
    };
    HiddenCoursesRepo.prototype.listKedCourses = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var fullCourse, schools, activeCourses;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        fullCourse = this.fullCourse;
                        console.log("FullCourse: " + fullCourse);
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient.list('schools', {
                                role: "USER",
                                name: _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.school,
                                include: "activeCourses",
                                flags: fullCourse ? [] : ["includeIdsAndNamesOnly"],
                                cacheBust: _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.username
                            })];
                    case 1:
                        schools = _a.sent();
                        activeCourses = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["flatten"])(schools.map(function (school) { return school.activeCourses; })).sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["compareProp"])("name"));
                        return [2 /*return*/, activeCourses];
                }
            });
        });
    };
    HiddenCoursesRepo.prototype.listEDSCourses = function () {
        var periodName = new _apis_edsclient__WEBPACK_IMPORTED_MODULE_5__["EDSPeriod"](Object(_utils_school_moment__WEBPACK_IMPORTED_MODULE_6__["getSchoolMoment"])(moment__WEBPACK_IMPORTED_MODULE_7___default()())).period;
        return _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.roles.indexOf('EMPLOYEE') === -1 ?
            // STUDENTs should, by default, only show courses that is listed in EDS
            _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].edsClient.getActiveCourses({ periodName: periodName }) :
            // EMPLOYEEs should, by default, show all courses on school - no need to query EDS
            null;
    };
    HiddenCoursesRepo.prototype.createCoursesList = function (edsActiveCourses, userHiddenCourses, activeCourses) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var hiddenCoursesMap, visibleCoursesMap, isStudent, edsCourseMap, result;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        hiddenCoursesMap = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["arrayToMap"])(userHiddenCourses.filter(function (hc) { return !hc.show; }), function (hc) { return hc.name; });
                        visibleCoursesMap = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["arrayToMap"])(userHiddenCourses.filter(function (hc) { return hc.show; }), function (hc) { return hc.name; });
                        isStudent = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.roles.some(function (role) { return role === 'STUDENT'; });
                        edsCourseMap = edsActiveCourses ?
                            Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["arrayToMap"])(edsActiveCourses, function (c) { return c.name; }) :
                            {};
                        return [4 /*yield*/, Promise.all(activeCourses.map(function (_a) {
                                var id = _a.id, name = _a.name, description = _a.description, modifiedBy = _a.modifiedBy;
                                return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                                    var edsCourse, defaultVisible, visible;
                                    return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                                        edsCourse = edsCourseMap[name];
                                        defaultVisible = isStudent ?
                                            edsCourse != null : // Course name also listed in EDS
                                            true;
                                        visible = defaultVisible ?
                                            !hiddenCoursesMap[id] : // Visible unless user has overridden that.
                                            !!visibleCoursesMap[id];
                                        // Resolve description:
                                        if (modifiedBy && modifiedBy.name && !description) {
                                            description = modifiedBy.name + "s version";
                                        }
                                        return [2 /*return*/, {
                                                id: id,
                                                name: name,
                                                description: description,
                                                visible: visible,
                                                defaultVisible: defaultVisible
                                            }];
                                    });
                                });
                            }))];
                    case 1:
                        result = _a.sent();
                        return [2 /*return*/, result.sort(function (_a, _b) {
                                var a = _a.name;
                                var b = _b.name;
                                return a < b ? -1 : a > b ? 1 : 0;
                            })];
                }
            });
        });
    };
    HiddenCoursesRepo.prototype.hideCourse = function (c) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var overrides;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        overrides = this.kedRepo.mem.items.filter(function (hc) { return hc.name === c.id; });
                        if (!c.defaultVisible) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.kedRepo.insert([{
                                    id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["createUUID"])(),
                                    name: c.id
                                }])];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, this.kedRepo.delete(overrides.map(function (ov) { return ov.id; }))];
                    case 3:
                        _a.sent();
                        _a.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    HiddenCoursesRepo.prototype.showCourse = function (c) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var overrides;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        overrides = this.kedRepo.mem.items.filter(function (hc) { return hc.name === c.id; });
                        if (!c.defaultVisible) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.kedRepo.delete(overrides.map(function (ov) { return ov.id; }))];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, this.kedRepo.insert([{
                                id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["createUUID"])(),
                                name: c.id,
                                show: true
                            }])];
                    case 3:
                        _a.sent();
                        _a.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    HiddenCoursesRepo.prototype.subscribe = function (subscriber, options) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, activeCourses, edsActiveCourses, userHiddenCourses, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (!(!this.fullCourse && options.fullCourse)) return [3 /*break*/, 3];
                        // The subscriber demands full courses
                        // Need to query that before notifying
                        // Also affect state for future internal notification
                        this.fullCourse = options.fullCourse;
                        this.kedCoursesPromise = this.listKedCourses(); // Redo this call, now loading full courses
                        return [4 /*yield*/, Promise.all([
                                this.kedCoursesPromise,
                                this.edsCoursesPromise,
                                this.userHiddenCoursesPromise
                            ])];
                    case 1:
                        _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"].apply(void 0, [_c.sent(), 3]), activeCourses = _a[0], edsActiveCourses = _a[1], userHiddenCourses = _a[2];
                        // Assemble result:
                        _b = this;
                        return [4 /*yield*/, this.createCoursesList(edsActiveCourses, userHiddenCourses, activeCourses)];
                    case 2:
                        // Assemble result:
                        _b.result = _c.sent();
                        _c.label = 3;
                    case 3: return [4 /*yield*/, this.userHiddenCoursesPromise];
                    case 4:
                        _c.sent(); // So we know that this.result is there.
                        this.notifySubscriber(subscriber, options);
                        this.subscribers.push({ subscriber: subscriber, options: options });
                        return [2 /*return*/];
                }
            });
        });
    };
    HiddenCoursesRepo.prototype.unsubscribe = function (subscriber) {
        this.subscribers = this.subscribers.filter(function (s) { return s.subscriber !== subscriber; });
    };
    return HiddenCoursesRepo;
}());
if (!hiddenCoursesRepo) {
    hiddenCoursesRepo = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].hiddenCoursesRepo = new HiddenCoursesRepo();
}


/***/ }),

/***/ "./src/repos/ked-repo.ts":
/*!*******************************!*\
  !*** ./src/repos/ked-repo.ts ***!
  \*******************************/
/*! exports provided: KedRepo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedRepo", function() { return KedRepo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./repo */ "./src/repos/repo.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");



var KedRepo = /** @class */ (function () {
    function KedRepo(options) {
        var _this = this;
        var table = options.table, getClient = options.getClient, getQueryOptions = options.getQueryOptions;
        this.mem = new _repo__WEBPACK_IMPORTED_MODULE_1__["Repo"]({ query: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                var queryOptions;
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0: return [4 /*yield*/, getQueryOptions()];
                        case 1:
                            queryOptions = _a.sent();
                            return [4 /*yield*/, getClient().list(table, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, queryOptions, { cacheBust: this.getCacheBust() }))];
                        case 2: return [2 /*return*/, _a.sent()];
                    }
                });
            }); } });
        this.options = options;
    }
    KedRepo.prototype.getCacheBust = function () {
        var _a = this.options, table = _a.table, user = _a.user;
        var cacheBust = localStorage.getItem('cache-bust-' + table + '-' + user);
        return cacheBust || this.regenerateCacheBust();
    };
    KedRepo.prototype.regenerateCacheBust = function () {
        var _a = this.options, table = _a.table, user = _a.user;
        var cacheBust = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["createUUID"])();
        localStorage.setItem('cache-bust-' + table + '-' + user, cacheBust);
        return cacheBust;
    };
    KedRepo.prototype.upsert = function (item, updater) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var updatedItem;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!!item.$etag) return [3 /*break*/, 2];
                        updatedItem = Object.assign({}, item);
                        updater(updatedItem);
                        return [4 /*yield*/, this.insert([updatedItem])];
                    case 1: return [2 /*return*/, _a.sent()];
                    case 2: 
                    // We have an $etag, so we can expect it to live on the server.
                    // However, take care of the unlikely situation that it was deleted from server,
                    // and if so, insert it again.
                    return [4 /*yield*/, this.update([item], updater).catch(function (e) {
                            if (e.name === "http404") {
                                var updatedItem = Object.assign({}, item);
                                updater(updatedItem);
                                return _this.insert([updatedItem]);
                            }
                            return Promise.reject(e);
                        })];
                    case 3:
                        // We have an $etag, so we can expect it to live on the server.
                        // However, take care of the unlikely situation that it was deleted from server,
                        // and if so, insert it again.
                        _a.sent();
                        _a.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    KedRepo.prototype.update = function (items, updater) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, getClient, optimistic, table, client, modifiedItems, res;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.options, getClient = _a.getClient, optimistic = _a.optimistic, table = _a.table;
                        client = getClient();
                        modifiedItems = items.map(function (item) {
                            var memRepoItem = _this.mem.items.find(function (it) { return it.id === item.id; });
                            item = Object.assign({}, memRepoItem || item);
                            updater(item);
                            return item;
                        });
                        if (!optimistic) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.mem.update(modifiedItems.map(function (x) { return Object.assign({}, x, { $meta: 'updating' }); }))];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2: return [4 /*yield*/, client.do(function (br) { return modifiedItems.forEach(function (item) { return br.put(table, item); }); })
                            .catch(function (e) { return e.name === "http409" ? // conflict
                            // Get a fresh version from server:
                            client.list(table, { ids: items.map(function (item) { return item.id; }) }, { cache: 'no-cache' }).then(function (freshItems) {
                                // Update local version:
                                var modifiedItems = freshItems.map(function (freshItem) {
                                    // Clone the fresh item
                                    var modified = Object.assign({}, freshItem);
                                    // Re-run the updater on the clone:
                                    updater(modified);
                                    return modified;
                                });
                                // Re-do the the put operation towards the server.
                                return client.do(function (br) { return modifiedItems.forEach(function (item) { return br.put(table, item); }); });
                            }) :
                            // Other unexpected error:
                            Promise.resolve(optimistic &&
                                _this.mem.update(items)) // Undo optimistic update
                                .then(function () {
                                return Promise.reject(e); // Reject with the error no matter.
                            }); })];
                    case 3:
                        res = _b.sent();
                        this.regenerateCacheBust();
                        modifiedItems.forEach(function (item) {
                            item.$etag = res.newEtags[item.id];
                            item.$meta = undefined;
                        });
                        return [4 /*yield*/, this.mem.update(modifiedItems)];
                    case 4:
                        _b.sent(); // Ensures new etag is is applied on next action.
                        return [2 /*return*/];
                }
            });
        });
    };
    KedRepo.prototype.stripGraphs = function (items, graphs) {
        return items.map(function (item) {
            var clone = Object.assign({}, item);
            graphs.forEach(function (graph) {
                if (item[graph]) {
                    clone[graph] = item[graph].map(function (doc) { return ({ id: doc.id }); });
                }
            });
            return clone;
        });
    };
    KedRepo.prototype.insert = function (items) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, getClient, optimistic, table, getQueryOptions, client, queryOptions, graphs, stripped, br, _loop_1, stripped_1, stripped_1_1, item, res;
            var e_1, _b;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _a = this.options, getClient = _a.getClient, optimistic = _a.optimistic, table = _a.table, getQueryOptions = _a.getQueryOptions;
                        client = getClient();
                        return [4 /*yield*/, getQueryOptions()];
                    case 1:
                        queryOptions = _c.sent();
                        graphs = [].concat(queryOptions.include);
                        // Give IDs to each item:
                        items = items.map(function (item) { return item.id ? item : Object.assign({}, item, { id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["createUUID"])() }); });
                        stripped = this.stripGraphs(items, graphs);
                        if (!optimistic) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.mem.insert(stripped.map(function (x) { return Object.assign({}, x, { $meta: 'adding' }); }))];
                    case 2:
                        _c.sent();
                        _c.label = 3;
                    case 3:
                        br = new kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["BatchRunner"]();
                        _loop_1 = function (item) {
                            var e_2, _a;
                            var _loop_2 = function (graph) {
                                var foreignItems = item[graph];
                                if (foreignItems) {
                                    foreignItems.forEach(function (doc) {
                                        br.link2(table, item.id, graph, doc.id);
                                    });
                                }
                            };
                            try {
                                // Also add links to all foreign related items:
                                for (var graphs_1 = (e_2 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](graphs)), graphs_1_1 = graphs_1.next(); !graphs_1_1.done; graphs_1_1 = graphs_1.next()) {
                                    var graph = graphs_1_1.value;
                                    _loop_2(graph);
                                }
                            }
                            catch (e_2_1) { e_2 = { error: e_2_1 }; }
                            finally {
                                try {
                                    if (graphs_1_1 && !graphs_1_1.done && (_a = graphs_1.return)) _a.call(graphs_1);
                                }
                                finally { if (e_2) throw e_2.error; }
                            }
                            br.add(table, item);
                        };
                        try {
                            for (stripped_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](stripped), stripped_1_1 = stripped_1.next(); !stripped_1_1.done; stripped_1_1 = stripped_1.next()) {
                                item = stripped_1_1.value;
                                _loop_1(item);
                            }
                        }
                        catch (e_1_1) { e_1 = { error: e_1_1 }; }
                        finally {
                            try {
                                if (stripped_1_1 && !stripped_1_1.done && (_b = stripped_1.return)) _b.call(stripped_1);
                            }
                            finally { if (e_1) throw e_1.error; }
                        }
                        return [4 /*yield*/, client.batch(br.mutationRequests).catch(function (e) {
                                if (optimistic)
                                    _this.mem.delete(items.map(function (item) { return item.id; }));
                                return Promise.reject(e);
                            })];
                    case 4:
                        res = _c.sent();
                        this.regenerateCacheBust();
                        items.forEach(function (item) { return item.$etag = res.newEtags[item.id]; });
                        if (!optimistic) return [3 /*break*/, 6];
                        return [4 /*yield*/, this.mem.update(items)];
                    case 5:
                        _c.sent(); // Update with new $etag.
                        return [3 /*break*/, 8];
                    case 6: return [4 /*yield*/, this.mem.insert(items)];
                    case 7:
                        _c.sent();
                        _c.label = 8;
                    case 8: return [2 /*return*/];
                }
            });
        });
    };
    KedRepo.prototype.delete = function (ids) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, getClient, optimistic, table, client, res;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.options, getClient = _a.getClient, optimistic = _a.optimistic, table = _a.table;
                        client = getClient();
                        if (!optimistic) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.mem.update(ids
                                .map(function (id) { return _this.mem.items.find(function (x) { return x.id === id; }); })
                                .filter(function (x) { return x; })
                                .map(function (x) { return Object.assign({}, x, { $meta: 'deleting' }); }))];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2: return [4 /*yield*/, client.do(function (br) { return ids.forEach(function (id) { return br.delete(table, id); }); }).catch(function (e) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            var _this = this;
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                switch (_a.label) {
                                    case 0:
                                        if (!optimistic) return [3 /*break*/, 2];
                                        return [4 /*yield*/, this.mem.update(ids
                                                .map(function (id) { return _this.mem.items.find(function (x) { return x.id === id; }); })
                                                .filter(function (x) { return x; })
                                                .map(function (x) {
                                                x = Object.assign({}, x);
                                                delete x.$meta;
                                                return x;
                                            }))];
                                    case 1:
                                        _a.sent();
                                        _a.label = 2;
                                    case 2: throw e;
                                }
                            });
                        }); })];
                    case 3:
                        res = _b.sent();
                        this.regenerateCacheBust();
                        return [4 /*yield*/, this.mem.delete(ids)];
                    case 4:
                        _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    return KedRepo;
}());



/***/ }),

/***/ "./src/repos/kg-termplanner-repo.ts":
/*!******************************************!*\
  !*** ./src/repos/kg-termplanner-repo.ts ***!
  \******************************************/
/*! exports provided: KGTermPlannerRepo, termPlannerRepo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KGTermPlannerRepo", function() { return KGTermPlannerRepo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "termPlannerRepo", function() { return termPlannerRepo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ked-repo */ "./src/repos/ked-repo.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _utils_school_moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/school-moment */ "./src/utils/school-moment.ts");




var KGTermPlannerRepo = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](KGTermPlannerRepo, _super);
    function KGTermPlannerRepo(getClient, getCurrentUser) {
        var _this = this;
        var currentUser = getCurrentUser();
        var now = new Date();
        var _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](Object(_utils_school_moment__WEBPACK_IMPORTED_MODULE_3__["getTermStarEndDate"])(now, now.getMonth() >= 7), 2), termStart = _a[0], termEnd = _a[1];
        _this = _super.call(this, {
            getClient: getClient,
            optimistic: true,
            table: "weekplans",
            user: currentUser ? currentUser.mail : "",
            getQueryOptions: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    return [2 /*return*/, {
                            from: termStart.startOf('week').add(-2, 'days').toDate().valueOf(),
                            to: termEnd.startOf('week').add(5, 'days').toDate().valueOf(),
                            role: "USER"
                        }];
                });
            }); }
        }) || this;
        return _this;
    }
    return KGTermPlannerRepo;
}(_ked_repo__WEBPACK_IMPORTED_MODULE_1__["KedRepo"]));

var termPlannerRepo = new KGTermPlannerRepo(function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient; }, function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser; });
_globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kgTermPlannerRepo = termPlannerRepo;


/***/ }),

/***/ "./src/repos/ks-termplanner-repo-instance.ts":
/*!***************************************************!*\
  !*** ./src/repos/ks-termplanner-repo-instance.ts ***!
  \***************************************************/
/*! exports provided: termPlannerRepoKS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "termPlannerRepoKS", function() { return termPlannerRepoKS; });
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _ks_termplanner_repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ks-termplanner-repo */ "./src/repos/ks-termplanner-repo.ts");


var termPlannerRepoKS = new _ks_termplanner_repo__WEBPACK_IMPORTED_MODULE_1__["KSTermPlannerRepo"](function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].kedBackendClient; }, function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser; });
_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].ksTermPlannerRepo = termPlannerRepoKS;


/***/ }),

/***/ "./src/repos/ks-termplanner-repo.ts":
/*!******************************************!*\
  !*** ./src/repos/ks-termplanner-repo.ts ***!
  \******************************************/
/*! exports provided: KSTermPlannerRepo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KSTermPlannerRepo", function() { return KSTermPlannerRepo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ked-repo */ "./src/repos/ked-repo.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_2__);



var KSTermPlannerRepo = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](KSTermPlannerRepo, _super);
    function KSTermPlannerRepo(getClient, getCurrentUser) {
        var _this = this;
        var currentUser = getCurrentUser();
        _this = _super.call(this, {
            getClient: getClient,
            optimistic: true,
            table: "weekplans-ks",
            user: currentUser ? currentUser.mail : "",
            getQueryOptions: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                var startDateValue, endDateValue;
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    startDateValue = (this.startDate && this.startDate.valueOf()) || moment__WEBPACK_IMPORTED_MODULE_2___default()().valueOf();
                    endDateValue = (this.endDate && this.endDate.valueOf()) || moment__WEBPACK_IMPORTED_MODULE_2___default()().valueOf();
                    return [2 /*return*/, {
                            from: startDateValue,
                            to: endDateValue,
                            role: "USER"
                        }];
                });
            }); }
        }) || this;
        return _this;
    }
    KSTermPlannerRepo.prototype.refreshData = function (dateInterval) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](dateInterval, 2), this.startDate = _a[0], this.endDate = _a[1];
                        return [4 /*yield*/, this.mem.refreshFromServer()];
                    case 1:
                        _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    return KSTermPlannerRepo;
}(_ked_repo__WEBPACK_IMPORTED_MODULE_1__["KedRepo"]));



/***/ }),

/***/ "./src/repos/repo.ts":
/*!***************************!*\
  !*** ./src/repos/repo.ts ***!
  \***************************/
/*! exports provided: Repo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Repo", function() { return Repo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var Repo = /** @class */ (function () {
    function Repo(comm) {
        this.comm = comm;
        this.listPromise = null;
        this.items = null;
        this.subscribers = [];
    }
    Repo.prototype.subscribe = function (subscriber) {
        var _this = this;
        return this.ensureHasData().then(function () {
            subscriber(_this.items, _this.error);
            _this.subscribers.push(subscriber);
        });
    };
    Repo.prototype.unsubscribe = function (subscriber) {
        this.subscribers = this.subscribers.filter(function (s) { return s !== subscriber; });
    };
    Repo.prototype.notifySubscribers = function () {
        var _this = this;
        this.subscribers.forEach(function (s) { return s(_this.items, _this.error); });
    };
    Repo.prototype.ensureHasData = function () {
        if (!this.listPromise)
            this.refreshFromServer();
        return this.listPromise;
    };
    Repo.prototype.refreshFromServer = function () {
        var _this = this;
        this.listPromise = this.comm.query().then(function (items) {
            _this.items = items;
            _this.error = null;
            _this.notifySubscribers();
        }).catch(function (error) {
            _this.error = error;
            _this.items = _this.items || [];
            _this.notifySubscribers();
        });
        return this.listPromise;
    };
    Repo.prototype.update = function (item) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var updatedItems;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.ensureHasData()];
                    case 1:
                        _a.sent();
                        updatedItems = Array.isArray(item) ? item : [item];
                        this.items = this.items.map(function (it) {
                            var updatedItem = updatedItems.find(function (_a) {
                                var id = _a.id;
                                return it.id === id;
                            });
                            return updatedItem ?
                                Object.assign({}, updatedItem) :
                                it;
                        });
                        this.notifySubscribers();
                        return [2 /*return*/];
                }
            });
        });
    };
    Repo.prototype.insert = function (item) {
        var _this = this;
        return this.ensureHasData().then(function () {
            _this.items = _this.items.concat(item);
            _this.notifySubscribers();
        });
    };
    Repo.prototype.delete = function (id) {
        var _this = this;
        var ids = Array.isArray(id) ? id : [id];
        return this.ensureHasData().then(function () {
            _this.items = _this.items.filter(function (it) { return !ids.some(function (id) { return it.id === id; }); });
            _this.notifySubscribers();
        });
    };
    return Repo;
}());



/***/ }),

/***/ "./src/repos/user-tasks-repo.ts":
/*!**************************************!*\
  !*** ./src/repos/user-tasks-repo.ts ***!
  \**************************************/
/*! exports provided: userTasksRepo, UserTasksRepo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "userTasksRepo", function() { return userTasksRepo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UserTasksRepo", function() { return UserTasksRepo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ked-repo */ "./src/repos/ked-repo.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _components_weekplanner_weekplanner_persisted_state__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/weekplanner/weekplanner-persisted-state */ "./src/components/weekplanner/weekplanner-persisted-state.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _utils_weekutil__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/weekutil */ "./src/utils/weekutil.ts");







var userTasksRepo = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].userTasksRepo;
var UserTasksRepo = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](UserTasksRepo, _super);
    function UserTasksRepo(getClient, getCurrentUser) {
        var _this = _super.call(this, {
            getClient: getClient,
            optimistic: true,
            table: "usertasks",
            user: getCurrentUser() ? getCurrentUser().mail : "",
            getQueryOptions: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                var currentUser, userEmail, _a, weekDate, weekNumber, kedWeek;
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                    switch (_b.label) {
                        case 0:
                            currentUser = getCurrentUser();
                            userEmail = currentUser ? currentUser.mail : "";
                            if (!!this.persistedState) return [3 /*break*/, 2];
                            _a = this;
                            return [4 /*yield*/, _components_weekplanner_weekplanner_persisted_state__WEBPACK_IMPORTED_MODULE_3__["WeekPlannerPersistedState"].load(userEmail)];
                        case 1:
                            _a.persistedState = _b.sent();
                            _b.label = 2;
                        case 2:
                            weekDate = this.persistedState.weekDate;
                            weekNumber = moment__WEBPACK_IMPORTED_MODULE_4___default()(weekDate).week();
                            kedWeek = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_6__["KEDWeek"])(moment__WEBPACK_IMPORTED_MODULE_4___default()(weekDate).year(), weekNumber);
                            /*const [from, to] = [moment(weekDate).startOf('week'), moment(weekDate).endOf('week')]
                              .map(m => m.toDate().getTime());*/
                            return [2 /*return*/, {
                                    from: kedWeek.notBefore,
                                    to: kedWeek.notAfter,
                                    role: "USER",
                                    include: ["task", "course"],
                                    flags: ["includeIdsOnly"],
                                }];
                    }
                });
            }); }
        }) || this;
        _this.persistedState = null;
        _this.getCurrentUser = getCurrentUser;
        return _this;
    }
    UserTasksRepo.prototype.updatePersistedState = function (stateChanges) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        Object.assign(this.persistedState, stateChanges);
                        return [4 /*yield*/, this.persistedState.save()];
                    case 1:
                        _a.sent();
                        this.mem.notifySubscribers();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.setTaskDoneState = function (userTask, done) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, getClient, optimistic, table, client, modifiedItem, similarTasks, identicalTasks;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.options, getClient = _a.getClient, optimistic = _a.optimistic, table = _a.table;
                        client = getClient();
                        modifiedItem = Object.assign({}, userTask, { done: done });
                        if (!optimistic) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.mem.update(Object.assign({}, modifiedItem, { $meta: 'updating' }))];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2: return [4 /*yield*/, client.list('usertasks', {
                            name: userTask.name,
                            role: "USER",
                            include: ["task", "course"],
                            flags: ["includeIdsOnly"],
                            from: moment__WEBPACK_IMPORTED_MODULE_4___default()(this.persistedState.weekDate).add(-3, 'weeks').valueOf(),
                            to: moment__WEBPACK_IMPORTED_MODULE_4___default()(this.persistedState.weekDate).add(3, 'weeks').valueOf()
                        }, {
                            cache: 'no-cache'
                        })];
                    case 3:
                        similarTasks = _b.sent();
                        identicalTasks = similarTasks.filter(function (t) {
                            return t.courseName === userTask.courseName &&
                                t.learningGoal === userTask.learningGoal &&
                                (!userTask.task || t.task.map(function (t) { return t.id; }).join('') === userTask.task.map(function (t) { return t.id; }).join('')) &&
                                (!userTask.course || t.course.map(function (c) { return c.id; }).join('') === userTask.course.map(function (c) { return c.id; }).join(''));
                        });
                        if (identicalTasks.length === 0) {
                            // Workaround for issue in SubjectPlanner migration (usertasks with long names is not found)
                            identicalTasks.push(userTask);
                        }
                        return [4 /*yield*/, this.update(identicalTasks, function (t) { return t.done = done; })];
                    case 4:
                        _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.setSubTaskDoneState = function (userTask, subTaskId, done) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, getClient, optimistic, table, client;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.options, getClient = _a.getClient, optimistic = _a.optimistic, table = _a.table;
                        client = getClient();
                        return [4 /*yield*/, this.update([userTask], function (t) { return t.subTasks && t.subTasks.filter(function (st) { return st.id === subTaskId; })
                                .forEach(function (st) { return st.done = done; }); })];
                    case 1:
                        _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.setWeekPlannerBoxOpen = function (courseName, isOpen) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var openCourses;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        openCourses = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.persistedState.openCourses);
                        if (isOpen)
                            openCourses[courseName] = true;
                        else
                            delete openCourses[courseName];
                        return [4 /*yield*/, this.updatePersistedState({ openCourses: openCourses })];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.changeWeek = function (weekDate, keepCurrentDate) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var persistedState, newPersisted;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        persistedState = this.persistedState;
                        if (!!persistedState) return [3 /*break*/, 2];
                        return [4 /*yield*/, _components_weekplanner_weekplanner_persisted_state__WEBPACK_IMPORTED_MODULE_3__["WeekPlannerPersistedState"].load(this.options.user)];
                    case 1:
                        persistedState = _a.sent();
                        _a.label = 2;
                    case 2:
                        newPersisted = new _components_weekplanner_weekplanner_persisted_state__WEBPACK_IMPORTED_MODULE_3__["WeekPlannerPersistedState"](persistedState);
                        newPersisted.weekDate = keepCurrentDate ? moment__WEBPACK_IMPORTED_MODULE_4___default()(weekDate).valueOf() : moment__WEBPACK_IMPORTED_MODULE_4___default()(weekDate).startOf('week').valueOf();
                        newPersisted.save();
                        this.persistedState = newPersisted;
                        return [4 /*yield*/, this.mem.refreshFromServer()];
                    case 3:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.subscribe = function (subscriber) {
        var _this = this;
        var proxySubscriber = function (userTasks) {
            subscriber(userTasks.filter(function (ut) { return !ut.weekTexts; }), _this.persistedState, userTasks.filter(function (ut) { return !!ut.weekTexts; })[0] || {
                id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["createUUID"])(),
                dateTime: _this.persistedState.weekDate,
                weekTexts: { assessment: '', strategy: '' },
                acl: [
                    // Default ACL: Let user self have full control over this item:
                    new kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["DocumentAccess"]("email", _this.getCurrentUser().mail, "S"),
                    // Additional ACL: Let employees on same school have read access to it.
                    // This currently only applies to tasks that refer to course tasks (not own tasks!)
                    new kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["DocumentAccess"]("schoolRole", _this.getCurrentUser().school + "/EMPLOYEE", "R")
                ].map(function (ac) { return ac.toString(); })
            });
        };
        proxySubscriber["subscriber"] = subscriber;
        this.mem.subscribe(proxySubscriber);
    };
    UserTasksRepo.prototype.unsubscribe = function (subscriber) {
        this.mem.subscribers = this.mem.subscribers.filter(function (s) { return s["subscriber"] !== subscriber; });
    };
    return UserTasksRepo;
}(_ked_repo__WEBPACK_IMPORTED_MODULE_1__["KedRepo"]));

if (!userTasksRepo) {
    userTasksRepo = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].userTasksRepo = new UserTasksRepo(function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient; }, function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser; });
    userTasksRepo.mem.ensureHasData();
}


/***/ }),

/***/ "./src/repos/week-notes-repo.ts":
/*!**************************************!*\
  !*** ./src/repos/week-notes-repo.ts ***!
  \**************************************/
/*! exports provided: weekNotesRepo, WeekNotesRepo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "weekNotesRepo", function() { return weekNotesRepo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WeekNotesRepo", function() { return WeekNotesRepo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ked-repo */ "./src/repos/ked-repo.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");



var weekNotesRepo = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].weekNotesRepo;
var WeekNotesRepo = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](WeekNotesRepo, _super);
    /*private currentWeek: moment.Moment;
  
    getCurrentWeek() {
      if (!this.currentWeek) {
        const {weekMillis, expire} = JSON.parse(sessionStorage.getItem("week-notes-week") || "{}") as {weekMillis?: number, expire?: number};
        this.currentWeek = weekMillis && expire && expire > Date.now() ?
          moment(new Date(weekMillis)) :
          moment().startOf('week').add(1, 'days');
      }
      return this.currentWeek.clone();
    }
  
    setCurrentWeek(newWeekMoment: moment.Moment) {
      this.currentWeek = newWeekMoment;
      sessionStorage.setItem("week-notes-week", JSON.stringify({
        weekMillis: newWeekMoment.toDate().getTime(),
        expire: moment().add(8, "hours").toDate().getTime()
      }))
    }*/
    function WeekNotesRepo() {
        var _this = _super.call(this, {
            getClient: function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient; },
            optimistic: false,
            table: "notes",
            user: _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser ? _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail : "",
            getQueryOptions: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    //const userEmail = env.currentUser ? env.currentUser.mail : "";
                    //const currentWeek = this.getCurrentWeek();
                    //const weekNumber = currentWeek.week();
                    //const kedWeek = KEDWeek(currentWeek.year(), weekNumber);
                    return [2 /*return*/, {
                            //from: kedWeek.notBefore,
                            //to: kedWeek.notAfter,
                            role: "USER"
                        }];
                });
            }); }
        }) || this;
        return _this;
        //this.currentWeek = null;
    }
    return WeekNotesRepo;
}(_ked_repo__WEBPACK_IMPORTED_MODULE_1__["KedRepo"]));

if (!weekNotesRepo) {
    weekNotesRepo = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].weekNotesRepo = new WeekNotesRepo();
}


/***/ }),

/***/ "./src/test/components.ts":
/*!********************************!*\
  !*** ./src/test/components.ts ***!
  \********************************/
/*! exports provided: components */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "components", function() { return components; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _components_calendar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/calendar */ "./src/components/calendar/index.tsx");
/* harmony import */ var _components_ks_goals_goals__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/ks-goals/goals */ "./src/components/ks-goals/goals.tsx");
/* harmony import */ var _components_latest_assessments_latest_assessments__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/latest-assessments/latest-assessments */ "./src/components/latest-assessments/latest-assessments.tsx");
/* harmony import */ var _components_kg_termplanner_kg_termplanner_self__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/kg-termplanner/kg-termplanner-self */ "./src/components/kg-termplanner/kg-termplanner-self.tsx");
/* harmony import */ var _components_kg_termplanner_kg_termplanner_tutored__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/kg-termplanner/kg-termplanner-tutored */ "./src/components/kg-termplanner/kg-termplanner-tutored.tsx");
/* harmony import */ var _components_ks_termplanner_termplanner__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/ks-termplanner/termplanner */ "./src/components/ks-termplanner/termplanner.tsx");
/* harmony import */ var _components_ks_termplanner_ks_termplanner_tutored__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/ks-termplanner/ks-termplanner-tutored */ "./src/components/ks-termplanner/ks-termplanner-tutored.tsx");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _components_weekplanner_weekplanner__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/weekplanner/weekplanner */ "./src/components/weekplanner/weekplanner.tsx");
/* harmony import */ var _components_learning_tasks__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../components/learning-tasks */ "./src/components/learning-tasks/index.tsx");
/* harmony import */ var _components_my_courses_my_courses__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../components/my-courses/my-courses */ "./src/components/my-courses/my-courses.tsx");
/* harmony import */ var _components_list_courses_list_courses__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../components/list-courses/list-courses */ "./src/components/list-courses/list-courses.tsx");
/* harmony import */ var _components_week_notebook__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../components/week-notebook */ "./src/components/week-notebook/index.ts");
/* harmony import */ var _components_tutors_select_tutors_select__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../components/tutors-select/tutors-select */ "./src/components/tutors-select/tutors-select.tsx");
/* harmony import */ var _components_tutors_view__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../components/tutors-view */ "./src/components/tutors-view/index.ts");
















var components = {
    LatestAssessments: {
        component: _components_latest_assessments_latest_assessments__WEBPACK_IMPORTED_MODULE_3__["LatestAssessments"],
        props: function () { return ({
            locale: navigator.language,
            limit: 15
        }); }
    },
    KSGoals: {
        component: _components_ks_goals_goals__WEBPACK_IMPORTED_MODULE_2__["KSGoals"],
        props: function () { return ({}); }
    },
    KSTermPlanner: {
        component: _components_ks_termplanner_termplanner__WEBPACK_IMPORTED_MODULE_6__["KSTermPlanner"],
        props: function () { return ({
            env: _globals_KED_env__WEBPACK_IMPORTED_MODULE_8__["default"],
            tutored: false,
            initialDate: new Date(),
        }); }
    },
    KSTermPlannerTutored: {
        component: _components_ks_termplanner_ks_termplanner_tutored__WEBPACK_IMPORTED_MODULE_7__["KSTermPlannerTutored"],
        props: function () { return ({}); }
    },
    KGTermPlanner: {
        component: _components_kg_termplanner_kg_termplanner_self__WEBPACK_IMPORTED_MODULE_4__["KGTermPlannerSelf"],
        props: function () { return ({}); }
    },
    KGTermPlannerTutored: {
        component: _components_kg_termplanner_kg_termplanner_tutored__WEBPACK_IMPORTED_MODULE_5__["KGTermPlannerTutored"],
        props: function () { return ({}); }
    },
    WeekPlanner: {
        component: _components_weekplanner_weekplanner__WEBPACK_IMPORTED_MODULE_9__["WeekPlanner"],
        props: function () { return ({
            viewCourseUrl: 'http://svt.se',
            env: _globals_KED_env__WEBPACK_IMPORTED_MODULE_8__["default"]
        }); }
    },
    TutorsView: {
        component: _components_tutors_view__WEBPACK_IMPORTED_MODULE_15__["TutorsViewTest"],
        props: function () { return ({}); }
    },
    TutorsSelect: {
        component: _components_tutors_select_tutors_select__WEBPACK_IMPORTED_MODULE_14__["TutorsSelect"],
        props: function () { return ({}); }
    },
    Calendar: {
        component: _components_calendar__WEBPACK_IMPORTED_MODULE_1__["Calendar"],
        props: function () { return ({
            firstDay: moment__WEBPACK_IMPORTED_MODULE_0___default()().startOf('week').weekday(1),
            numDays: 5,
            initialStartHour: 7,
            initialEndHour: 18,
            initialZoom: 0.75
        }); }
    },
    /*CourseOverview: {
      component: CourseOverview,
      props: ()=>({
        locale: navigator.language,
      })
    },*/
    LearningTasks: {
        component: _components_learning_tasks__WEBPACK_IMPORTED_MODULE_10__["LearningTasks"],
        props: function () { return ({
            apiPath: localStorage.getItem('selectedLearningModuleUrl'),
            pageId: "dummy"
        }); }
    },
    MyCourses: {
        component: _components_my_courses_my_courses__WEBPACK_IMPORTED_MODULE_11__["MyCourses"],
        props: function () { return ({
            viewCourseUrl: 'https://kg-test.sitevision.se/courseviewer'
        }); }
    },
    ListCourses: {
        component: _components_list_courses_list_courses__WEBPACK_IMPORTED_MODULE_12__["ListCourses"],
        props: function () { return ({
            viewCourseUrl: 'https://kg-test.sitevision.se/courseviewer'
        }); }
    },
    WeekNotes: {
        component: _components_week_notebook__WEBPACK_IMPORTED_MODULE_13__["WeekNotebook"],
        props: function () { return ({}); }
    }
};


/***/ }),

/***/ "./src/test/data/learningModules.ts":
/*!******************************************!*\
  !*** ./src/test/data/learningModules.ts ***!
  \******************************************/
/*! exports provided: learningModules */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "learningModules", function() { return learningModules; });
var learningModules = [{
        moduleName: "Steg 22",
        subject: {
            name: "Spanska",
            course: {
                name: "Spanska",
                url: "/steg/spanska.4.4ae4e9d2159ef4e0120ad6d3.html"
            }
        },
        commonTasks: [],
        learningGoals: [{
                name: "Aktiviteter i hemmet",
                tasks: [{
                        name: "Aktiviteter i hemmet hos en peruansk familj",
                        url: "/steg/spanska/block5/steg22/uppgifter/aktiviteterihemmet/aktiviteterihemmethosenperuanskfamilj.4.4ae4e9d2159ef4e0120adb40.html"
                    }, {
                        name: "Uppgift till aktiviteter i hemmet",
                        url: "/steg/spanska/block5/steg22/uppgifter/aktiviteterihemmet/uppgifttillaktiviteterihemmet.4.4ae4e9d2159ef4e0120af887.html"
                    }]
            }, {
                name: "Familjeliv",
                tasks: [{
                        name: "Vad pgr i din familj nu?",
                        url: "/steg/spanska/block5/steg22/uppgifter/familjeliv/vadpagaridinfamiljnu.4.4ae4e9d2159ef4e0120b25e9.html"
                    }, {
                        name: "Uppgift familjeliv",
                        url: "/steg/spanska/block5/steg22/uppgifter/familjeliv/uppgiftfamiljeliv.4.4ae4e9d2159ef4e0120af73a.html"
                    }]
            }, {
                name: "Samtal om familjeliv",
                tasks: [{
                        name: "Samtalsdokument familjeliv",
                        url: "/steg/spanska/block5/steg22/uppgifter/samtalomfamiljeliv/samtalsdokumentfamiljeliv.4.4ae4e9d2159ef4e01209fe03.html"
                    }, {
                        name: "Samtalskarta-familjeliv",
                        url: "/steg/spanska/block5/steg22/uppgifter/samtalomfamiljeliv/samtalskartafamiljeliv.4.4ae4e9d2159ef4e0120af6fd.html"
                    }]
            }
        ]
    }, {
        moduleName: "Teknik",
        subject: {
            name: "Teknik",
            course: {
                name: "Trd 5",
                url: "/kurser/arskurs8/trad5.19.2d4f4005159f895477a15cc.html"
            }
        },
        commonTasks: [{
                name: "Tryck ",
                url: "/kurser/arskurs8/trad5/forberedelse/teknik/uppgifter/tryck.4.4ae4e9d2159ef4e01209dcde.html"
            }, {
                name: "Diskussionsfrgor till industriella revolutionen",
                url: "/kurser/arskurs8/trad5/forberedelse/teknik/uppgifter/diskussionsfragortillindustriellarevolutionen.4.4ae4e9d2159ef4e0120a6fab.html"
            }, {
                name: "Hur fungerar en ngmaskin",
                url: "/kurser/arskurs8/trad5/forberedelse/teknik/uppgifter/hurfungerarenangmaskin.4.4ae4e9d2159ef4e0120a1309.html"
            }, {
                name: "ngmaskinens betydelse",
                url: "/kurser/arskurs8/trad5/forberedelse/teknik/uppgifter/angmaskinensbetydelse.4.4ae4e9d2159ef4e0120a3deb.html"
            }],
        learningGoals: [{
                name: "Identifiera och analysera ngmaskinen utifrn ndamlsenlighet och funktion,"
            }, {
                name: "anvnda teknikomrdets begrepp och uttrycksform"
            }, {
                name: "vrdera konsekvenser av ngmaskinen fr individ, samhlle och milj, och"
            }, {
                name: "analysera drivkrafter bakom teknikutveckling runt ngmaskinen och hur tekniken har frndratsver tid."
            }]
    }];


/***/ }),

/***/ "./src/test/data/learningModules2.ts":
/*!*******************************************!*\
  !*** ./src/test/data/learningModules2.ts ***!
  \*******************************************/
/*! exports provided: learningPageUrls */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "learningPageUrls", function() { return learningPageUrls; });
var learningPageUrls = [
    "testdata/learning-tasks/amnesintegrerad.json",
    "testdata/learning-tasks/loopad.json",
    "testdata/learning-tasks/steg-larandemal.json",
    "testdata/learning-tasks/steg-matte.json",
    "testdata/learning-tasks/vanlig-kurs.json"
];


/***/ }),

/***/ "./src/test/data/users.ts":
/*!********************************!*\
  !*** ./src/test/data/users.ts ***!
  \********************************/
/*! exports provided: users */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "users", function() { return users; });
var users = [{
        displayName: "Administratr",
        mail: "vemendo@kedschools.com",
        roles: ['ADMIN', 'EMPLOYEE'],
        school: 'KED',
        username: "admin"
    }, {
        displayName: "David",
        mail: "david.fahlander@vemendo.se",
        roles: ['ADMIN', 'EMPLOYEE'],
        school: 'KED',
        username: "david"
    },
    {
        displayName: "Andrei",
        mail: "andrei.spatarelu@vemendo.se",
        roles: ['ADMIN', 'EMPLOYEE', 'STUDENT'],
        school: 'KED',
        username: "andrei"
    }, {
        displayName: "Carl Holmberg",
        mail: "carl.holmberg@kunskapsgymnasiet.se",
        roles: ['ADMIN', 'EMPLOYEE'],
        school: 'Norrkping',
        username: "carl.holmberg@kunskapsgymnasiet.se"
    }, {
        displayName: "Carl",
        mail: "carl@kedschools.com",
        roles: ['ADMIN', 'EMPLOYEE', 'STUDENT'],
        school: 'KED',
        username: "carl"
    }, {
        displayName: "david.fahlander@kedschools.com",
        mail: "david.fahlander@kedschools.com",
        roles: ["ADMIN", "EMPLOYEE", "STUDENT"],
        school: "KED",
        username: "david.fahlander@kedschools.com"
    }, {
        displayName: "Teacher 1",
        mail: "teacher1.classroom@kedschools.com",
        roles: ['EMPLOYEE'],
        school: 'KED',
        username: "teacher1.classroom@kedschools.com"
    }, {
        displayName: "Test-Live-Elev1",
        mail: "ubw6757@edu.kunskapsgymnasiet.se",
        roles: ['STUDENT'],
        school: 'Uppsala',
        username: "ubw6757@edu.kunskapsgymnasiet.se"
    }, {
        displayName: "Test-Live-Elev2",
        mail: "ums4302@edu.kunskapsgymnasiet.se",
        roles: ['STUDENT'],
        school: 'Uppsala',
        username: "ums4302@edu.kunskapsgymnasiet.se"
    }, {
        displayName: "Test-Live-Elev3",
        mail: "uhh3460@edu.kunskapsgymnasiet.se",
        roles: ['STUDENT'],
        school: 'Uppsala',
        username: "uhh3460@edu.kunskapsgymnasiet.se"
    }, {
        displayName: "Test-Live-Elev4(fel goals issue)",
        mail: "umt6826@edu.kunskapsskolan.se",
        roles: ["STUDENT"],
        school: "Uppsala",
        username: "umt6826@edu.kunskapsskolan.se"
    }, {
        displayName: "Test-Live-Elev5(future abilities)",
        mail: "ujg3833@edu.kunskapsskolan.se",
        roles: ["STUDENT"],
        school: "Uppsala",
        username: "ujg3833@edu.kunskapsskolan.se"
    }, {
        displayName: "Test-Live-Elev6(future abilities)",
        mail: "ujt1363@edu.kunskapsskolan.se",
        roles: ["STUDENT"],
        school: "Uppsala",
        username: "ujt1363@edu.kunskapsskolan.se"
    }, {
        displayName: "Test-Live-Lrare1",
        mail: "rickard.albertsson@kunskapsgymnasiet.se",
        roles: ['EMPLOYEE'],
        school: 'Uppsala',
        username: "rickard.albertsson@kunskapsgymnasiet.se"
    }, {
        displayName: "EDSTestUserGymnasium",
        mail: "uhh3200@edu.kunskapsgymnasiet.se",
        //mail: "UHH3200@EDU.KUNSKAPSGYMNASIET.SE",
        roles: ["STUDENT"],
        username: "EDSTestUser1",
        school: "KED",
        schoolType: "Gymnasium"
    }, {
        displayName: "vemendo.elev@kedschools.com",
        mail: "vemendo.elev@kedschools.com",
        roles: ["STUDENT"],
        username: "vemendo.elev@kedschools.com",
        school: "KED",
        schoolType: "Gymnasium"
    }, {
        displayName: "Medarbetare Nacka",
        mail: "medarbetare.nacka@kunskapsskolan.se",
        roles: ["EMPLOYEE"],
        username: "medarbetare.nacka/KS",
        school: "Nacka",
        schoolType: "Grundskolor"
    }, {
        displayName: "Medarbetare Globen",
        mail: "medarbetare.globen@kunskapsgymnasiet.se",
        roles: ["EMPLOYEE"],
        username: "medarbetare.globen/KS",
        school: "Globen",
        schoolType: "Gymnasium"
    }, {
        displayName: "Elev Globen",
        mail: "elev.globen@edu.kunskapsgymnasiet.se",
        schoolGrade: 2,
        roles: ['STUDENT'],
        username: "elev.globen",
        school: "Globen",
        schoolType: "Gymnasium"
    }, {
        displayName: "Elev Bors",
        mail: "elev.boras@edu.kunskapsskolan.se",
        schoolGrade: 7,
        roles: ['STUDENT'],
        username: "elev.boras",
        school: "Bors",
        schoolType: "Grundskolor"
    }, {
        displayName: "Elev Borlnge",
        mail: "elev.borlange@edu.kunskapsskolan.se",
        schoolGrade: 9,
        roles: ['STUDENT'],
        username: 'elev.borlange/KS',
        school: 'Borlnge',
        schoolType: "Gymnasium"
    }, {
        displayName: "Roll-ls",
        mail: "none@kunskapsskolan.se",
        username: "none",
        roles: []
    }];


/***/ }),

/***/ "./src/test/set-current-user.ts":
/*!**************************************!*\
  !*** ./src/test/set-current-user.ts ***!
  \**************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _data_users__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data/users */ "./src/test/data/users.ts");
/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/query-string */ "./src/utils/query-string.ts");



var username = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_2__["parseQueryString"])(location.search).user;
if (username) {
    var user = _data_users__WEBPACK_IMPORTED_MODULE_1__["users"].find(function (u) { return u.username === username; });
    if (user) {
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser = user;
    }
}
var _a = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_2__["parseQueryString"])(location.search), role = _a.role, school = _a.school;
if (_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser) {
    if (role) {
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.roles = role.split(',');
    }
    if (school) {
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.school = school;
    }
}


/***/ }),

/***/ "./src/test/test-config.ts":
/*!*********************************!*\
  !*** ./src/test/test-config.ts ***!
  \*********************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");

_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_LOCALE = 'sv';
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_SCHOOL_LOCALE = 'sv';


/***/ }),

/***/ "./src/test/testpage.tsx":
/*!*******************************!*\
  !*** ./src/test/testpage.tsx ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _test_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./test-config */ "./src/test/test-config.ts");
/* harmony import */ var _set_current_user__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./set-current-user */ "./src/test/set-current-user.ts");
/* harmony import */ var _global_setters_set_all__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../global-setters/set-all */ "./src/global-setters/set-all.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _data_learningModules__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./data/learningModules */ "./src/test/data/learningModules.ts");
/* harmony import */ var _data_learningModules2__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./data/learningModules2 */ "./src/test/data/learningModules2.ts");
/* harmony import */ var _components_weekplanner__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../components/weekplanner */ "./src/components/weekplanner/index.ts");
/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./components */ "./src/test/components.ts");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jquery */ "jquery");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _utils_choose_user__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./utils/choose-user */ "./src/test/utils/choose-user.tsx");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _components_utility_components_SetupLanguageIntl__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../components/utility-components/SetupLanguageIntl */ "./src/components/utility-components/SetupLanguageIntl.tsx");
/* harmony import */ var _components_utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../components/utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");

// <Initialization>

 // Emulate server-side script to set current user
 // Client-side initialization
// </Initialization>











var _TestPage = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](_TestPage, _super);
    function _TestPage(props) {
        var _this = _super.call(this, props) || this;
        var selectedComp = localStorage.getItem("selectedComponent") || Object.keys(_components__WEBPACK_IMPORTED_MODULE_9__["components"])[0];
        var selectCompProps = _components__WEBPACK_IMPORTED_MODULE_9__["components"][selectedComp].props();
        _this.state = {
            selectedComponent: selectedComp,
            selectedLearningModule: parseInt(localStorage.getItem("selectedLearningModule") || "0"),
            selectedLearningModuleUrl: localStorage.getItem("selectedLearningModuleUrl") || "",
            selectedComponentReal: _components__WEBPACK_IMPORTED_MODULE_9__["components"][selectedComp].component,
            selectedCompProps: tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, selectCompProps)
        };
        return _this;
    }
    _TestPage.prototype.componentDidUpdate = function () {
        this.renderTestComponent();
    };
    _TestPage.prototype.componentDidMount = function () {
        //this.renderTestComponent();
    };
    _TestPage.prototype.renderTestComponent = function () {
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].learningModuleTasks = _data_learningModules__WEBPACK_IMPORTED_MODULE_6__["learningModules"][this.state.selectedLearningModule];
        jquery__WEBPACK_IMPORTED_MODULE_10___default()(this.componentArea).html("");
        if (_globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].currentUser) {
            var selected = _components__WEBPACK_IMPORTED_MODULE_9__["components"][this.state.selectedComponent] ||
                _components__WEBPACK_IMPORTED_MODULE_9__["components"][Object.keys(_components__WEBPACK_IMPORTED_MODULE_9__["components"])[0]];
            this.setState({
                selectedComponentReal: selected.component,
                selectedCompProps: tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, selected.props())
            });
        }
    };
    _TestPage.prototype.render = function () {
        var _this = this;
        var SelectedComponent = this.state.selectedComponentReal;
        var intl = this.props.intl;
        return _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].currentUser ?
            react__WEBPACK_IMPORTED_MODULE_5__["createElement"](_components_utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_14__["LanguageContext"].Provider, { value: { intl: intl } },
                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { className: "test-page" },
                    react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { className: "header" },
                        react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { className: "test-selects" },
                            react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("form", null,
                                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("h4", null,
                                    react__WEBPACK_IMPORTED_MODULE_5__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_12__["FormattedMessage"], { id: "test.pageDescription", defaultMessage: "Testsida f\u00F6r komponenter till nya startsidan" })),
                                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("table", null,
                                    react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("tbody", null,
                                        react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("tr", null,
                                            react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("td", null,
                                                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("label", { htmlFor: "testComponent" },
                                                    react__WEBPACK_IMPORTED_MODULE_5__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_12__["FormattedMessage"], { id: "test.chooseComponentLabel", defaultMessage: "Komponent" }))),
                                            react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("td", null,
                                                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("select", { id: "testComponent", value: this.state.selectedComponent, onChange: function (ev) {
                                                        _this.setState({ selectedComponent: ev.target.value });
                                                        localStorage.setItem("selectedComponent", ev.target.value);
                                                        window.location.reload();
                                                    } }, Object.keys(_components__WEBPACK_IMPORTED_MODULE_9__["components"]).map(function (c) { return react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("option", { key: c, value: c }, c); })))),
                                        this.state.selectedComponent === 'LearningGoalsAndTasks' && react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("tr", null,
                                            react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("td", null,
                                                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("label", { htmlFor: "testLearningModule" }, "Kursmodul")),
                                            react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("td", null,
                                                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("select", { id: "testLearningModule", value: this.state.selectedLearningModule, onChange: function (ev) {
                                                        localStorage.setItem("selectedLearningModule", ev.target.value);
                                                        window.location.reload();
                                                    } }, _data_learningModules__WEBPACK_IMPORTED_MODULE_6__["learningModules"].map(function (lm, i) {
                                                    return react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("option", { key: i, value: i }, lm.subject.course.name + "/" +
                                                        lm.subject.name + "/" +
                                                        lm.moduleName);
                                                })))),
                                        this.state.selectedComponent === 'LearningTasks' && react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("tr", null,
                                            react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("td", null,
                                                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("label", { htmlFor: "testLearningModuleUrl" }, "Kursmodul")),
                                            react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("td", null,
                                                react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("select", { id: "testLearningModuleUrl", value: this.state.selectedLearningModuleUrl, onChange: function (ev) {
                                                        localStorage.setItem("selectedLearningModuleUrl", ev.target.value);
                                                        window.location.reload();
                                                    } }, _data_learningModules2__WEBPACK_IMPORTED_MODULE_7__["learningPageUrls"].map(function (url, i) {
                                                    return react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("option", { key: i, value: url }, url);
                                                }))))))))),
                    react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("hr", null),
                    react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { className: "componentRow" },
                        react__WEBPACK_IMPORTED_MODULE_5__["createElement"](SelectedComponent, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.state.selectedCompProps)),
                        react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { className: "componentArea", ref: function (div) { return _this.componentArea = div; } }),
                        react__WEBPACK_IMPORTED_MODULE_5__["createElement"]("div", { className: "week-planner" }, this.state.selectedComponent === 'LearningTasks' &&
                            react__WEBPACK_IMPORTED_MODULE_5__["createElement"](_components_weekplanner__WEBPACK_IMPORTED_MODULE_8__["WeekPlanner"], { viewCourseUrl: "http://www.svt.se/nyheter", env: _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"] }))))) : react__WEBPACK_IMPORTED_MODULE_5__["createElement"](_utils_choose_user__WEBPACK_IMPORTED_MODULE_11__["ChooseUser"], null);
    };
    return _TestPage;
}(react__WEBPACK_IMPORTED_MODULE_5__["Component"]));
var TestPage = Object(_components_utility_components_SetupLanguageIntl__WEBPACK_IMPORTED_MODULE_13__["setupIntl"])(Object(react_intl__WEBPACK_IMPORTED_MODULE_12__["injectIntl"])(_TestPage));
/* harmony default export */ __webpack_exports__["default"] = (TestPage);


/***/ }),

/***/ "./src/test/utils/choose-user.tsx":
/*!****************************************!*\
  !*** ./src/test/utils/choose-user.tsx ***!
  \****************************************/
/*! exports provided: ChooseUser */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChooseUser", function() { return ChooseUser; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _data_users__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../data/users */ "./src/test/data/users.ts");


function ChooseUser() {
    var select;
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "sv-layout" },
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("h2", null, "V\u00E4lj anv\u00E4ndare"),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("table", { className: "login-table" },
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("thead", null,
                react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("tr", null,
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("th", null, "Namn"),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("th", null, "Roller"),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("th", null, "E-post"),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("th", null, "Skola"))),
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("tbody", null, _data_users__WEBPACK_IMPORTED_MODULE_1__["users"].map(function (_a) {
                var username = _a.username, displayName = _a.displayName, mail = _a.mail, school = _a.school, roles = _a.roles;
                return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("tr", { key: mail, onClick: function () { return location.search = "?user=" + username; } },
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", null, displayName),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", { style: roles.length === 0 ? { fontStyle: 'italic' } : {} }, roles.length === 0 ? "saknar roller" : roles.join(', ')),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", null, mail),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", { style: school ? {} : { fontStyle: 'italic' } }, school || "saknar skola"));
            }))));
}
;


/***/ }),

/***/ "./src/translations/en.json":
/*!**********************************!*\
  !*** ./src/translations/en.json ***!
  \**********************************/
/*! exports provided: addeditsubtask.deleteSubtask, addeditsubtask.editSubtask, addeditsubtask.nameLabel, addeditsubtask.addSubtask, calendar.currentDate, calendar.fullDayEventLocation, calendar.loadCalendarEvents, calendar.loadingCalendar, calendar.weekNumber, common.addDescriptionPlhd, common.cancel, common.changesNotSavedErrorOccured, common.changesNotSavedUnauthorized, common.descriptionLabel, common.errorSavingData, common.linkLabel, common.loading, common.nameLabel, common.save, common.saved, common.saving, common.remove, customTask.addWorkGoalTitle, customTask.enterNamePlhd, learningGoalsLost.overall, task.addSubtask, task.editTask, task.editWorkGoals, task.enterTaskNamePlhd, task.removeDeadline, task.removeThisTask, task.removeWorkGoals, task.setDeadline, task.setDeadlineLabel, task.subTasks, task.targetNameLabel, task.taskNameLabel, task.whatShouldYouDoPlhd, taskList.nextWeekTask, taskList.lastWeekTask, taskList.currentWeekTask, taskList.removeTaskFromWeeklyPlanning, taskList.addTaskToWeeklyPlanning, termplanner.comments, termplanner.course, termplanner.edsGoalGrades, termplanner.englishLanguage, termplanner.finalStep, termplanner.firstTerm, termplanner.hindiLanguage, termplanner.ict, termplanner.loadingTermplanner, termplanner.maths, termplanner.modernLanguage, termplanner.noFinalStepAvailable, termplanner.secondTerm, termplanner.termPlanning, termplanner.weekNumber, termplanner.chartsBoxTitle, termplanner.yoga, tutorNoteDialog.weekComment, test.chooseComponentLabel, test.pageDescription, userTasks.addLearningGoal, userTasks.deleteLearningGoal, userTasks.goals, weekNotebook.title, weekplanner.addLearningGoal, weekplanner.addLearningGoalTitle, weekplanner.confirmRemoveLearningObjectives, weekplanner.copyPreviousWeekTaks, weekplanner.emptyLearningGoalErr, weekplanner.evaluation, weekplanner.evaluationDescription, weekplanner.learningGoal, weekplanner.logBook, weekplanner.nameCannotBeEmpty, weekplanner.nameMustNotBeEmpty, weekplanner.strategy, weekplanner.strategyAndEvaluation, weekplanner.strategyDescription, weekplanner.weekNumber, wysiwyg.bold, wysiwyg.code, wysiwyg.heading1, wysiwyg.heading2, wysiwyg.heading3, wysiwyg.image, wysiwyg.imagePromptMsg, wysiwyg.italic, wysiwyg.line, wysiwyg.link, wysiwyg.olist, wysiwyg.paragraph, wysiwyg.quote, wysiwyg.strikethrough, wysiwyg.ulist, wysiwyg.underline, default */
/***/ (function(module) {

module.exports = {"addeditsubtask.deleteSubtask":"Delete subtask","addeditsubtask.editSubtask":"Edit subtask","addeditsubtask.nameLabel":"Name of subtask","addeditsubtask.addSubtask":"Add sub-task","calendar.currentDate":"Week {week}, {year}","calendar.fullDayEventLocation":"Place: {location}","calendar.loadCalendarEvents":"Load calendar events...","calendar.loadingCalendar":"Loading calendars... (listing...)","calendar.weekNumber":"W{weekNumber}","common.addDescriptionPlhd":"Add description...","common.cancel":"Cancel","common.changesNotSavedErrorOccured":"An error occured while saving data. Your changes were not saved.","common.changesNotSavedUnauthorized":"The changes were not saved due to insufficient authority","common.descriptionLabel":"Description","common.errorSavingData":"An error occured while saving data.","common.linkLabel":"Link","common.loading":"Loading...","common.nameLabel":"Name","common.save":" Save","common.saved":" Saved","common.saving":"Saving","common.remove":"Delete","customTask.addWorkGoalTitle":"Add own working goal","customTask.enterNamePlhd":"Enter Name...","learningGoalsLost.overall":"Overall","task.addSubtask":"Add subtask","task.editTask":"Edit task","task.editWorkGoals":"Edit working goal","task.enterTaskNamePlhd":"Enter the name of task...","task.removeDeadline":"Delete deadline","task.removeThisTask":"Delete this task","task.removeWorkGoals":"Delete working goal","task.setDeadline":"Set deadline","task.setDeadlineLabel":"Set deadline...","task.subTasks":"Subtasks","task.targetNameLabel":"Name of working goal","task.taskNameLabel":"Name of task","task.whatShouldYouDoPlhd":"What should you do?","taskList.nextWeekTask":"for next week (w{week})","taskList.lastWeekTask":"for last week (w{week})","taskList.currentWeekTask":"for week {week}","taskList.removeTaskFromWeeklyPlanning":"Delete task from your weekly planning {week}","taskList.addTaskToWeeklyPlanning":"Add task to your weekly planning {week}","termplanner.comments":"Comments","termplanner.course":"Theme course","termplanner.edsGoalGrades":"Intermediate goals","termplanner.englishLanguage":"Eng","termplanner.finalStep":"Final Step","termplanner.firstTerm":"FT {year}","termplanner.hindiLanguage":"Hindi","termplanner.ict":"ICT","termplanner.loadingTermplanner":"Loading Termplanner","termplanner.maths":"Maths","termplanner.modernLanguage":"MFL","termplanner.noFinalStepAvailable":"No final step available","termplanner.secondTerm":"ST {year}","termplanner.termPlanning":"Term planner","termplanner.weekNumber":"Week","termplanner.chartsBoxTitle":"Progress Charts","termplanner.yoga":"Yoga","tutorNoteDialog.weekComment":"Note for week {weekNumber}","test.chooseComponentLabel":"Component","test.pageDescription":"Test page for the components on the starting page","userTasks.addLearningGoal":"Own working goal","userTasks.deleteLearningGoal":"Delete learning goal and its tasks","userTasks.goals":"Own learning goal","weekNotebook.title":"Notepad","weekplanner.addLearningGoal":"Goal:","weekplanner.addLearningGoalTitle":"Add own learning goal","weekplanner.confirmRemoveLearningObjectives":"Delete learning goal and {learningGoalsNumber} tasks?","weekplanner.copyPreviousWeekTaks":"Copy from previous week","weekplanner.emptyLearningGoalErr":"The learning goal cannot be empty","weekplanner.evaluation":"Evaluation","weekplanner.evaluationDescription":"Reflection on your work effort and your chosen strategies during the week. Evaluate in relation to your goals.","weekplanner.learningGoal":"Own learning goal","weekplanner.logBook":"Logbook","weekplanner.nameCannotBeEmpty":"Name cannot be empty","weekplanner.nameMustNotBeEmpty":"Name must not be empty","weekplanner.strategy":"Strategy","weekplanner.strategyAndEvaluation":"Strategy & Evaluation","weekplanner.strategyDescription":"What I should do to learn","weekplanner.weekNumber":"Week {weekNumber}","wysiwyg.bold":"Bold","wysiwyg.code":"Code","wysiwyg.heading1":"Heading 1","wysiwyg.heading2":"Heading 2","wysiwyg.heading3":"Heading 3","wysiwyg.image":"Insert image","wysiwyg.imagePromptMsg":"Enter the URL of the image","wysiwyg.italic":"Italics","wysiwyg.line":"Horizontal line","wysiwyg.link":"Insert link","wysiwyg.olist":"Ordered list","wysiwyg.paragraph":"Paragraph","wysiwyg.quote":"Quote","wysiwyg.strikethrough":"Strikethrough","wysiwyg.ulist":"Bullet list","wysiwyg.underline":"Underline"};

/***/ }),

/***/ "./src/translations/sv.json":
/*!**********************************!*\
  !*** ./src/translations/sv.json ***!
  \**********************************/
/*! exports provided: addeditsubtask.addSubtask, addeditsubtask.deleteSubtask, addeditsubtask.editSubtask, addeditsubtask.nameLabel, calendar.currentDate, calendar.fullDayEventLocation, calendar.loadCalendarEvents, calendar.loadingCalendar, calendar.weekNumber, common.addDescriptionPlhd, common.cancel, common.changesNotSavedErrorOccured, common.changesNotSavedUnauthorized, common.descriptionLabel, common.errorSavingData, common.linkLabel, common.loading, common.nameLabel, common.save, common.saved, common.saving, common.remove, customTask.addWorkGoalTitle, customTask.enterNamePlhd, learningGoalsLost.overall, task.addSubtask, task.editTask, task.editWorkGoals, task.enterTaskNamePlhd, task.removeDeadline, task.removeThisTask, task.removeWorkGoals, task.setDeadline, task.setDeadlineLabel, task.subTasks, task.targetNameLabel, task.taskNameLabel, task.whatShouldYouDoPlhd, taskList.nextWeekTask, taskList.lastWeekTask, taskList.currentWeekTask, taskList.removeTaskFromWeeklyPlanning, taskList.addTaskToWeeklyPlanning, termplanner.comments, termplanner.course, termplanner.edsGoalGrades, termplanner.englishLanguage, termplanner.swedishLanguage, termplanner.finalStep, termplanner.firstTerm, termplanner.hindiLanguage, termplanner.loadingTermplanner, termplanner.modernLanguageFullname, termplanner.mathsFullname, termplanner.noFinalStepAvailable, termplanner.swedishLanguageFullName, termplanner.englishLanguageFullName, termplanner.maths, termplanner.modernLanguage, termplanner.secondTerm, termplanner.termPlanning, termplanner.weekNumber, termplanner.chartsBoxTitle, tutorNoteDialog.weekComment, test.chooseComponentLabel, test.pageDescription, userTasks.addLearningGoal, userTasks.deleteLearningGoal, userTasks.goals, weekNotebook.title, weekplanner.addLearningGoal, weekplanner.addLearningGoalTitle, weekplanner.confirmRemoveLearningObjectives, weekplanner.copyPreviousWeekTaks, weekplanner.emptyLearningGoalErr, weekplanner.evaluation, weekplanner.evaluationDescription, weekplanner.learningGoal, weekplanner.logBook, weekplanner.nameCannotBeEmpty, weekplanner.nameMustNotBeEmpty, weekplanner.strategy, weekplanner.strategyAndEvaluation, weekplanner.strategyDescription, weekplanner.weekNumber, wysiwyg.bold, wysiwyg.code, wysiwyg.heading1, wysiwyg.heading2, wysiwyg.heading3, wysiwyg.image, wysiwyg.imagePromptMsg, wysiwyg.italic, wysiwyg.line, wysiwyg.link, wysiwyg.olist, wysiwyg.paragraph, wysiwyg.quote, wysiwyg.strikethrough, wysiwyg.ulist, wysiwyg.underline, default */
/***/ (function(module) {

module.exports = {"addeditsubtask.addSubtask":"Lgg till underuppgift","addeditsubtask.deleteSubtask":"Ta bort underuppgift","addeditsubtask.editSubtask":"Redigera underuppgift","addeditsubtask.nameLabel":"Underuppgiftens namn","calendar.currentDate":"Vecka {week}, {year}","calendar.fullDayEventLocation":"Plats: {location}","calendar.loadCalendarEvents":"Load calendar events...","calendar.loadingCalendar":"Loading calendars... (listing...)","calendar.weekNumber":"V{weekNumber}","common.addDescriptionPlhd":"Lgg till en beskrivning...","common.cancel":"Avbryt","common.changesNotSavedErrorOccured":"Fr tillfllet problem att spara data. Dina ndringar sparades inte.","common.changesNotSavedUnauthorized":"ndringarna sparades inte p.g.a. otillrcklig behrighet.","common.descriptionLabel":"Beskrivning","common.errorSavingData":"Kunde inte spara.","common.linkLabel":"Lnk","common.loading":"Laddar...","common.nameLabel":"Namn","common.save":" Spara","common.saved":" Sparad","common.saving":"Sparar...","common.remove":"Ta bort","customTask.addWorkGoalTitle":"Lgg till eget arbetsml","customTask.enterNamePlhd":"Ange namn...","learningGoalsLost.overall":"vergripande","task.addSubtask":"Lgg till underuppgift","task.editTask":"Redigera uppgift","task.editWorkGoals":"Redigera arbetsml","task.enterTaskNamePlhd":"Ange uppgiftens namn...","task.removeDeadline":"Ta bort deadline","task.removeThisTask":"Ta bort den hr uppgiften","task.removeWorkGoals":"Ta bort arbetsml","task.setDeadline":"Set deadline","task.setDeadlineLabel":"Ange deadline...","task.subTasks":"Underuppgifter","task.targetNameLabel":"Arbetsmlets namn","task.taskNameLabel":"Uppgiftens namn","task.whatShouldYouDoPlhd":"Vad ska du gra?","taskList.nextWeekTask":"fr nsta vecka (v{week})","taskList.lastWeekTask":"fr frra veckan (v{week})","taskList.currentWeekTask":"fr vecka {week}","taskList.removeTaskFromWeeklyPlanning":"Ta bort uppgiften frn egen veckoplanering {week}","taskList.addTaskToWeeklyPlanning":"Lgg till uppgiften i egen veckoplanering {week}","termplanner.comments":"Kommentar","termplanner.course":"Kurs","termplanner.edsGoalGrades":"Terminsml","termplanner.englishLanguage":"Eng","termplanner.swedishLanguage":"Sv/SvA","termplanner.finalStep":"Slutsteg","termplanner.firstTerm":"HT {year}","termplanner.hindiLanguage":"","termplanner.loadingTermplanner":"V.g. vnta medan terminsplaner laddas...","termplanner.modernLanguageFullname":"M.sprk","termplanner.mathsFullname":"Matematik","termplanner.noFinalStepAvailable":"Inget slutsteg tillgngligt","termplanner.swedishLanguageFullName":"Svenska","termplanner.englishLanguageFullName":"Engelska","termplanner.maths":"Ma","termplanner.modernLanguage":"M.spr","termplanner.secondTerm":"VT {year}","termplanner.termPlanning":"Terminsplanering","termplanner.weekNumber":"Vecka","termplanner.chartsBoxTitle":"Framsteg diagram","tutorNoteDialog.weekComment":"Kommentar fr vecka {weekNumber}","test.chooseComponentLabel":"Komponent","test.pageDescription":"Testsida fr komponenter till nya startsidan","userTasks.addLearningGoal":"Eget arbetsml","userTasks.deleteLearningGoal":"Ta bort lrandemlet och dess uppgifter","userTasks.goals":"Egna lrandeml","weekNotebook.title":"Anteckningar","weekplanner.addLearningGoal":"Ml:","weekplanner.addLearningGoalTitle":"Lgg till eget lrandeml","weekplanner.confirmRemoveLearningObjectives":"Ta bort lrandeml samt {learningGoalsNumber} uppgifter?","weekplanner.copyPreviousWeekTaks":"Kopiera ej klara frn fregende vecka","weekplanner.emptyLearningGoalErr":"Lrandemlet kan inte vara tomt","weekplanner.evaluation":"Utvrdering","weekplanner.evaluationDescription":"Reflektion kring din arbetsinsats och dina valda strategier under veckan.Utvrdera i frhllande till dina ml.","weekplanner.learningGoal":"Eget lrandeml","weekplanner.logBook":"Loggbok","weekplanner.nameCannotBeEmpty":"Namnet kan inte vara tomt","weekplanner.nameMustNotBeEmpty":"Namnet fr inte vara tomt","weekplanner.strategy":"Strategi","weekplanner.strategyAndEvaluation":"Strategi & Utvrdering","weekplanner.strategyDescription":"Hur jag ska gra fr att lra mig.","weekplanner.weekNumber":"Vecka {weekNumber}","wysiwyg.bold":"Fetstil","wysiwyg.code":"Programkod","wysiwyg.heading1":"Rubrik 1","wysiwyg.heading2":"Rubrik 2","wysiwyg.heading3":"Rubrik 3","wysiwyg.image":"Infoga bild","wysiwyg.imagePromptMsg":"Ange bildens URL","wysiwyg.italic":"Kursiv","wysiwyg.line":"Vgrt linje","wysiwyg.link":"Infoga lnk","wysiwyg.olist":"Ordnad lista","wysiwyg.paragraph":"Paragraf","wysiwyg.quote":"Citat","wysiwyg.strikethrough":"Struken","wysiwyg.ulist":"Punktlista","wysiwyg.underline":"Understruken"};

/***/ }),

/***/ "./src/utils/constants.js":
/*!********************************!*\
  !*** ./src/utils/constants.js ***!
  \********************************/
/*! exports provided: SECOND, MINUTE, HOUR */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SECOND", function() { return SECOND; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MINUTE", function() { return MINUTE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HOUR", function() { return HOUR; });

const SECOND = 1000;
const MINUTE = SECOND * 60;
const HOUR = MINUTE * 60;



/***/ }),

/***/ "./src/utils/generic-school-term.ts":
/*!******************************************!*\
  !*** ./src/utils/generic-school-term.ts ***!
  \******************************************/
/*! exports provided: GenericSchoolTerm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GenericSchoolTerm", function() { return GenericSchoolTerm; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _generic_school_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./generic-school-utils */ "./src/utils/generic-school-utils.ts");
/* harmony import */ var _components_ks_termplanner_termplanner_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/ks-termplanner/termplanner-utils */ "./src/components/ks-termplanner/termplanner-utils.ts");



var GenericSchoolTerm = /** @class */ (function () {
    function GenericSchoolTerm(currentDate, currentLocale, academicYearStructure) {
        this.locale = currentLocale || "sv";
        this.selectedDate = currentDate;
        this.schoolMoment = academicYearStructure ? Object(_generic_school_utils__WEBPACK_IMPORTED_MODULE_1__["getCurrentAcademicYear"])(moment__WEBPACK_IMPORTED_MODULE_0___default()(currentDate), academicYearStructure) : null;
    }
    GenericSchoolTerm.prototype.getTermStartAndEnd = function (includeExtraWeek) {
        //In case that the week start date is a date from the previous year
        //Consider the start of the week ( start date) as the day of the 01.01.year
        var startOfTermWeek = this.schoolMoment.academicYearStructure.startDate.clone().startOf('week');
        if (startOfTermWeek.year() < this.schoolMoment.academicYearStructure.startDate.year()) {
            startOfTermWeek = this.schoolMoment.academicYearStructure.startDate;
        }
        var endOfTermWeek = this.schoolMoment.academicYearStructure.endDate;
        if (this.locale === "sv" && includeExtraWeek && this.schoolMoment.term === "ST") {
            endOfTermWeek = endOfTermWeek.clone().add(3, 'weeks').endOf('week');
        }
        else if (includeExtraWeek) {
            if (this.locale != "sv") {
                // for india the end date can be in the middle of the week
                endOfTermWeek = this.schoolMoment.academicYearStructure.endDate.clone();
            }
            endOfTermWeek = this.schoolMoment.academicYearStructure.endDate.clone().add(1, 'week').endOf('week');
        }
        return [startOfTermWeek, endOfTermWeek];
    };
    GenericSchoolTerm.prototype.getFirstAndLastWeekOfTerm = function () {
        return [this.schoolMoment.academicYearStructure.startDate.week(), this.schoolMoment.academicYearStructure.endDate.week()];
    };
    GenericSchoolTerm.prototype.isCurrentWeek = function (dateTime) {
        var termDate = moment__WEBPACK_IMPORTED_MODULE_0___default()(dateTime);
        return termDate.year() === moment__WEBPACK_IMPORTED_MODULE_0___default()().year() && termDate.week() === moment__WEBPACK_IMPORTED_MODULE_0___default()().week();
    };
    GenericSchoolTerm.prototype.getLastStepWeek = function (locale) {
        //TODO: this should be refactored. The generic method should be used
        if (locale === "sv") {
            return this.schoolMoment.term === "ST" ? _components_ks_termplanner_termplanner_utils__WEBPACK_IMPORTED_MODULE_2__["LAST_STEP_SPRING"] : _components_ks_termplanner_termplanner_utils__WEBPACK_IMPORTED_MODULE_2__["LAST_STEP_AUTUMN"];
        }
        return this.schoolMoment.academicYearStructure.endDate.clone().add(1, "week").week();
    };
    GenericSchoolTerm.prototype.toLocaleString = function (intl, shortYear) {
        if (this.schoolMoment) {
            var year = this.schoolMoment.academicYearStructure.endDate.year().toString();
            var academicYear = this.schoolMoment.academicYearStructure.academicYear;
            if (shortYear && intl.locale === 'sv') {
                year = year.substr(2);
            }
            else {
                year = academicYear;
            }
            return this.schoolMoment.term === 'AT' ? intl.formatMessage({ id: 'termplanner.firstTerm', defaultMessage: 'HT {year}' }, { year: year }) :
                intl.formatMessage({ id: 'termplanner.secondTerm', defaultMessage: 'VT {year}' }, { year: year });
        }
        return null;
    };
    GenericSchoolTerm.prototype.nextTerm = function () {
        //switch to next semester, we set the current date as adding 3 months to the end of the current semester
        var endDate = this.schoolMoment ? this.schoolMoment.academicYearStructure.endDate.clone() : moment__WEBPACK_IMPORTED_MODULE_0___default()();
        var nextDate = endDate.add(3, 'months');
        return new GenericSchoolTerm(nextDate.toDate(), this.locale);
    };
    GenericSchoolTerm.prototype.prevTerm = function () {
        //to switch to next semester, we set the current date as subtracting 3 months from the start of the current semester
        var startDate = this.schoolMoment ? this.schoolMoment.academicYearStructure.startDate.clone() : moment__WEBPACK_IMPORTED_MODULE_0___default()();
        var prevDate = startDate.subtract(3, 'months');
        return new GenericSchoolTerm(prevDate.toDate(), this.locale);
    };
    GenericSchoolTerm.prototype.getEdsPeriodName = function () {
        return this.schoolMoment.term === 'AT' ? "HT" : "VT" + this.schoolMoment.academicYearStructure.endDate.year();
    };
    return GenericSchoolTerm;
}());



/***/ }),

/***/ "./src/utils/generic-school-utils.ts":
/*!*******************************************!*\
  !*** ./src/utils/generic-school-utils.ts ***!
  \*******************************************/
/*! exports provided: getCurrentAcademicYear, getSchoolTranslatedSubjects, getSchoolTranslatedSubjectFullname */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getCurrentAcademicYear", function() { return getCurrentAcademicYear; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSchoolTranslatedSubjects", function() { return getSchoolTranslatedSubjects; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSchoolTranslatedSubjectFullname", function() { return getSchoolTranslatedSubjectFullname; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);

function getCurrentAcademicYear(currentDate, academicYear) {
    var firstTermStartDate = moment__WEBPACK_IMPORTED_MODULE_0___default()(new Date(academicYear.firstTerm.startDate));
    var firstTermEndDate = moment__WEBPACK_IMPORTED_MODULE_0___default()(new Date(academicYear.firstTerm.endDate));
    var secondTermStartDate = moment__WEBPACK_IMPORTED_MODULE_0___default()(new Date(academicYear.secondTerm.startDate));
    var secondTermEndDate = moment__WEBPACK_IMPORTED_MODULE_0___default()(new Date(academicYear.secondTerm.endDate));
    var academicPeriod = firstTermStartDate.year().toString().substr(2) + "/" + secondTermEndDate.year().toString().substr(2);
    var holidays = _getTermHolidays(academicYear.holidays, firstTermStartDate, firstTermEndDate);
    if (currentDate < firstTermEndDate) {
        //compute academic week numbers
        var academicStartWeek = 1;
        var academicEndWeek = firstTermEndDate.week() - firstTermStartDate.week();
        //get current term holidays
        return { term: 'AT', academicYearStructure: { academicYear: academicPeriod, startDate: firstTermStartDate, endDate: firstTermEndDate, academicStartWeek: academicStartWeek, academicEndWeek: academicEndWeek, holidays: holidays } };
    }
    //compute the number of first term holidays week numbers
    var numberOfHolidayWeeks = _getHolidayWeeksNumber(holidays);
    //compute academic week numbers
    var academicStartWeek = secondTermStartDate.clone().add(1, 'week').week() - firstTermStartDate.week() - numberOfHolidayWeeks;
    var academicEndWeek = secondTermEndDate.clone().add().add(1, 'week').week() - firstTermStartDate.week() - numberOfHolidayWeeks;
    //get current term holidays
    var holidays = _getTermHolidays(academicYear.holidays, secondTermStartDate, secondTermEndDate);
    return { term: 'ST', academicYearStructure: { academicYear: academicPeriod, startDate: secondTermStartDate, endDate: secondTermEndDate, academicStartWeek: academicStartWeek, academicEndWeek: academicEndWeek, holidays: holidays } };
}
function getSchoolTranslatedSubjects(schoolLocale, intl) {
    var translatedColumns = {};
    //these are fixed for all school locales
    translatedColumns["Kurs"] = intl.formatMessage({ id: "termplanner.course", defaultMessage: "Kurs" });
    translatedColumns["Kommentar"] = intl.formatMessage({ id: "termplanner.comments", defaultMessage: "Kommentar" });
    if (schoolLocale === 'sv') {
        translatedColumns["M.spr"] = intl.formatMessage({ id: "termplanner.modernLanguage", defaultMessage: "M.spr" });
        translatedColumns["Ma"] = intl.formatMessage({ id: "termplanner.maths", defaultMessage: "Ma" });
        translatedColumns["Sv/SvA"] = intl.formatMessage({ id: "termplanner.swedishLanguage", defaultMessage: "Sv/SvA" });
        translatedColumns["Eng"] = intl.formatMessage({ id: "termplanner.englishLanguage", defaultMessage: "Eng" });
    }
    else {
        translatedColumns["MFL"] = intl.formatMessage({ id: "termplanner.modernLanguage", defaultMessage: "MFL" });
        translatedColumns["Ma"] = intl.formatMessage({ id: "termplanner.maths", defaultMessage: "Maths" });
        translatedColumns["Hi"] = intl.formatMessage({ id: "termplanner.hindiLanguage", defaultMessage: "Hindi" });
        translatedColumns["Eng"] = intl.formatMessage({ id: "termplanner.englishLanguage", defaultMessage: "English" });
        translatedColumns["Yoga"] = intl.formatMessage({ id: "termplanner.yoga", defaultMessage: "Yoga" });
        translatedColumns["ICT"] = intl.formatMessage({ id: "termplanner.ict", defaultMessage: "ICT" });
    }
    return translatedColumns;
}
//this is related to charts. It is used only for sv locale
function getSchoolTranslatedSubjectFullname(intl) {
    var translatedColumns = {};
    translatedColumns["M.spr"] = intl.formatMessage({ id: "termplanner.modernLanguageFullname", defaultMessage: "M.sprk" });
    translatedColumns["Ma"] = intl.formatMessage({ id: "termplanner.mathsFullname", defaultMessage: "Matematik" });
    translatedColumns["Sv/SvA"] = intl.formatMessage({ id: "termplanner.swedishLanguageFullName", defaultMessage: "Svenska" });
    translatedColumns["Eng"] = intl.formatMessage({ id: "termplanner.englishLanguageFullName", defaultMessage: "Engelska" });
    return translatedColumns;
}
function _getTermHolidays(holidays, termStartDate, termEndDate) {
    return holidays.filter(function (elem) {
        return moment__WEBPACK_IMPORTED_MODULE_0___default()(elem.startDate).isBetween(termStartDate, termEndDate);
    });
}
function _getHolidayWeeksNumber(holidays) {
    var numberOfWeeks = 0;
    holidays.forEach(function (elem) {
        //the number of weeks is the difference + 1
        numberOfWeeks += moment__WEBPACK_IMPORTED_MODULE_0___default()(elem.endDate).add(1, 'week').week() - moment__WEBPACK_IMPORTED_MODULE_0___default()(elem.startDate).week();
    });
    return numberOfWeeks;
}


/***/ }),

/***/ "./src/utils/if-takes-time.ts":
/*!************************************!*\
  !*** ./src/utils/if-takes-time.ts ***!
  \************************************/
/*! exports provided: ifTakesTime */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ifTakesTime", function() { return ifTakesTime; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

function ifTakesTime(ms, task, action) {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var timeoutReached, th, rv;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
            switch (_a.label) {
                case 0:
                    timeoutReached = false;
                    th = setTimeout(function () {
                        timeoutReached = true;
                        action();
                    }, ms);
                    return [4 /*yield*/, task()];
                case 1:
                    rv = _a.sent();
                    if (!timeoutReached)
                        clearTimeout(th);
                    return [2 /*return*/, rv];
            }
        });
    });
}


/***/ }),

/***/ "./src/utils/make-suspense-api.ts":
/*!****************************************!*\
  !*** ./src/utils/make-suspense-api.ts ***!
  \****************************************/
/*! exports provided: makeSuspenseApi */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makeSuspenseApi", function() { return makeSuspenseApi; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var DEFAULT_CACHE_EXPIRATION = 30 * 60 * 1000; // 30 minutes.
var defaultOptions = {
    isApiMethod: function (f) { return typeof f === 'function'; },
    cacheExpiration: DEFAULT_CACHE_EXPIRATION
};
function makeSuspenseApi(api, options) {
    if (options === void 0) { options = defaultOptions; }
    options = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, defaultOptions, options);
    var isApiMethod = options.isApiMethod, cacheExpiration = options.cacheExpiration;
    var rv = Object.create(api);
    var cache = {};
    // Walk the instance + prototype chain to generate suspense version of each promise returning method
    for (var proto = api; proto && proto !== Object.prototype; proto = Object.getPrototypeOf(proto)) {
        suspendify(proto);
    }
    function suspendify(proto) {
        Object.keys(proto).forEach(function (prop) {
            if (!rv.hasOwnProperty(prop) && isApiMethod(prop)) {
                rv[prop] = function () {
                    var args = [];
                    for (var _i = 0; _i < arguments.length; _i++) {
                        args[_i] = arguments[_i];
                    }
                    var key = JSON.stringify(tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"]([prop], args));
                    var cachedEntry = cache[key];
                    if (cachedEntry !== undefined) {
                        if (cachedEntry.promise)
                            throw cachedEntry.promise;
                        if (cachedEntry.error)
                            throw cachedEntry.error;
                        if (cachedEntry.timeout > Date.now()) {
                            return cachedEntry.value;
                        }
                    }
                    try {
                        var promise = proto[prop].apply(api, args).then(function (result) {
                            cache[key] = { timeout: Date.now() + cacheExpiration, value: result };
                        }).catch(function (error) {
                            cache[key] = { timeout: Date.now() + cacheExpiration, error: error };
                        });
                        cache[key] = { timeout: Date.now() + cacheExpiration, promise: promise };
                        throw promise;
                    }
                    catch (error) {
                        if (error.then)
                            throw error;
                        cache[key] = { timeout: Date.now() + cacheExpiration, error: error };
                    }
                };
            }
        });
    }
    return rv;
}


/***/ }),

/***/ "./src/utils/pending-job.ts":
/*!**********************************!*\
  !*** ./src/utils/pending-job.ts ***!
  \**********************************/
/*! exports provided: PendingJob */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PendingJob", function() { return PendingJob; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var PendingJob = /** @class */ (function () {
    function PendingJob(callback) {
        this.timeoutId = null;
        this.cancelled = false;
        this.pending = false;
        this.isJobExecuting = false;
        this.jobCallback = callback;
    }
    PendingJob.prototype.triggerChange = function (throttle) {
        var _this = this;
        if (this.cancelled)
            return;
        this.pending = true;
        if (this.timeoutId !== null)
            clearTimeout(this.timeoutId);
        this.timeoutId = setTimeout(function () { return _this.launchJob(); }, throttle);
    };
    PendingJob.prototype.stop = function () {
        if (this.timeoutId !== null)
            clearTimeout(this.timeoutId);
        this.timeoutId = null;
        this.cancelled = true;
    };
    PendingJob.prototype.launchJob = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.cancelled)
                            return [2 /*return*/];
                        if (!this.pending)
                            return [2 /*return*/];
                        if (this.isJobExecuting)
                            return [2 /*return*/];
                        this.timeoutId = null;
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, , 3, 4]);
                        this.isJobExecuting = true;
                        this.pending = false;
                        return [4 /*yield*/, this.jobCallback()];
                    case 2:
                        _a.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        this.isJobExecuting = false;
                        return [7 /*endfinally*/];
                    case 4:
                        if (!this.pending) return [3 /*break*/, 6];
                        return [4 /*yield*/, this.launchJob()];
                    case 5:
                        _a.sent();
                        _a.label = 6;
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    return PendingJob;
}());



/***/ }),

/***/ "./src/utils/query-string.ts":
/*!***********************************!*\
  !*** ./src/utils/query-string.ts ***!
  \***********************************/
/*! exports provided: parseQueryString, generateQueryString, parseHashQueryString, generateHashQueryString, splitUrlAndQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseQueryString", function() { return parseQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateQueryString", function() { return generateQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseHashQueryString", function() { return parseHashQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateHashQueryString", function() { return generateHashQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "splitUrlAndQuery", function() { return splitUrlAndQuery; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

function parseQueryString(locationSearch, options) {
    var toLower = (options || {}).toLower;
    var result = {};
    if (locationSearch && locationSearch.length > 1)
        locationSearch.substr(1)
            .split('&')
            .map(function (part) { return part.split('=').map(function (s) { return decodeURIComponent(s.trim()); }); })
            .forEach(function (_a) {
            var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a, 2), key = _b[0], value = _b[1];
            return result[toLower ? key.toLowerCase() : key] = value;
        });
    return result;
}
function encodeParams(params) {
    return Object.keys(params).filter(function (key) { return params[key] !== undefined; }).map(function (key) { return encodeURIComponent(key) + "=" + encodeURIComponent(params[key]); }).join('&');
}
function generateQueryString(params) {
    return "?" + encodeParams(params);
}
function parseHashQueryString(locationHash, options) {
    return parseQueryString(locationHash, options);
}
function generateHashQueryString(params) {
    return "#" + encodeParams(params);
}
function splitUrlAndQuery(urlWithPossibleQuery) {
    var pQuery = urlWithPossibleQuery.indexOf('?');
    return pQuery >= 0 ?
        [urlWithPossibleQuery.substr(0, pQuery), urlWithPossibleQuery.substr(pQuery)] :
        [urlWithPossibleQuery, ""];
}


/***/ }),

/***/ "./src/utils/request-tutored-tokens.ts":
/*!*********************************************!*\
  !*** ./src/utils/request-tutored-tokens.ts ***!
  \*********************************************/
/*! exports provided: requestTutoredTokens */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "requestTutoredTokens", function() { return requestTutoredTokens; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _apis_edsclient__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../apis/edsclient */ "./src/apis/edsclient.ts");
/* harmony import */ var kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! kedbackend/clientweb */ "./kedbackend/clientweb.js");
/* harmony import */ var _repos_ks_termplanner_repo__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../repos/ks-termplanner-repo */ "./src/repos/ks-termplanner-repo.ts");
/* harmony import */ var _repos_kg_termplanner_repo__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../repos/kg-termplanner-repo */ "./src/repos/kg-termplanner-repo.ts");
/* harmony import */ var _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../repos/user-tasks-repo */ "./src/repos/user-tasks-repo.ts");









function requestTutoredTokens(userEmail, displayName) {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        function createBearerProvider(client, tokenUrl, query) {
            var bearerPromise = null;
            return {
                getBearer: function () {
                    return bearerPromise || this.refreshBearer();
                },
                refreshBearer: function () {
                    return (bearerPromise = retrieveToken());
                },
            };
            function retrieveToken() {
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
                    var res, _a, _b, _c;
                    return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_d) {
                        switch (_d.label) {
                            case 0: return [4 /*yield*/, client.get(tokenUrl, query)];
                            case 1:
                                res = _d.sent();
                                if (!(res.status === 200)) return [3 /*break*/, 3];
                                return [4 /*yield*/, res.json()];
                            case 2: return [2 /*return*/, (_d.sent())];
                            case 3:
                                _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["HttpError"].bind;
                                _b = [void 0, res.status];
                                _c = "Could not retrieve tutor token for " +
                                    userEmail +
                                    ". Error Message: ";
                                return [4 /*yield*/, res.text()];
                            case 4: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["HttpError"], _b.concat([_c + (_d.sent())])))();
                        }
                    });
                });
            }
        }
        var currentUser, bearerProvider, tutoredKedBackendClient, googleTokenProvider, edsClient, tutorEnv;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
            switch (_a.label) {
                case 0:
                    currentUser = {
                        mail: userEmail,
                        displayName: displayName,
                        roles: ["USER"],
                        school: _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["default"].currentUser.school,
                        tutorFor: userEmail
                    };
                    bearerProvider = createBearerProvider(_globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["default"].kedBackendClient.http, "tutor/token", { userEmail: userEmail });
                    tutoredKedBackendClient = new kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["KedBackendClient"](kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_5__["isomorphic"], bearerProvider, _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__["default"].KED_API_URL);
                    googleTokenProvider = createBearerProvider(tutoredKedBackendClient.http, "tutor/convert-token/google");
                    edsClient = new _apis_edsclient__WEBPACK_IMPORTED_MODULE_4__["EdsClient"](kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_5__["isomorphic"], _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__["default"].EDS_API_URL, bearerProvider, function () { return userEmail; });
                    tutorEnv = {
                        currentUser: currentUser,
                        bearerProvider: bearerProvider,
                        edsClient: edsClient,
                        googleTokenProvider: googleTokenProvider,
                        kedBackendClient: tutoredKedBackendClient,
                        tutored: true
                    };
                    tutorEnv.ksTermPlannerRepo = new _repos_ks_termplanner_repo__WEBPACK_IMPORTED_MODULE_6__["KSTermPlannerRepo"](function () { return tutoredKedBackendClient; }, function () { return currentUser; });
                    tutorEnv.kgTermPlannerRepo = new _repos_kg_termplanner_repo__WEBPACK_IMPORTED_MODULE_7__["KGTermPlannerRepo"](function () { return tutoredKedBackendClient; }, function () { return currentUser; });
                    tutorEnv.userTasksRepo = new _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_8__["UserTasksRepo"](function () { return tutoredKedBackendClient; }, function () { return currentUser; });
                    return [4 /*yield*/, bearerProvider.getBearer().catch(function (error) {
                            console.error(error);
                        })];
                case 1:
                    _a.sent();
                    return [2 /*return*/, tutorEnv];
            }
        });
    });
}


/***/ }),

/***/ "./src/utils/school-moment.ts":
/*!************************************!*\
  !*** ./src/utils/school-moment.ts ***!
  \************************************/
/*! exports provided: getFirstAndLastWeekOfTerm, getTermStarEndDate, getSchoolMoment, addYear, nextAcademicYear, prevAcademicYear */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFirstAndLastWeekOfTerm", function() { return getFirstAndLastWeekOfTerm; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTermStarEndDate", function() { return getTermStarEndDate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSchoolMoment", function() { return getSchoolMoment; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addYear", function() { return addYear; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nextAcademicYear", function() { return nextAcademicYear; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "prevAcademicYear", function() { return prevAcademicYear; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);


function getFirstAndLastWeekOfTerm(term) {
    return term === 'AT' ?
        [32, 51] :
        [1, 25];
}
//Not used anymore
// export function getTermStartAndEnd(now: moment.Moment) : moment.Moment[] {
//     return now.month() >= 6 ? // 6 = July in JS Dates and in moment as well!
//     [moment(new Date(now.year(), 7, 1)), moment(new Date(now.year(), 11, 31))] : // aug1 - dec31
//     [moment(new Date(now.year(), 0, 1)), moment(new Date(now.year(), 6, 31))]; // jan1 - july31
// }
function getTermStarEndDate(date, isFirstTerm) {
    var addYear = date.getMonth() >= 7;
    var termYear = null;
    if (addYear) {
        termYear = isFirstTerm ? date.getFullYear() : date.getFullYear() + 1;
    }
    else {
        termYear = isFirstTerm ? date.getFullYear() - 1 : date.getFullYear();
    }
    var termYearMoment = moment__WEBPACK_IMPORTED_MODULE_1___default()(termYear.toString(), "YYYY");
    if (termYearMoment.week() != 1) {
        termYearMoment = termYearMoment.clone().add(1, 'week');
    }
    return isFirstTerm ? [moment__WEBPACK_IMPORTED_MODULE_1___default()(termYearMoment.clone()).week(32).startOf('week'), moment__WEBPACK_IMPORTED_MODULE_1___default()(termYearMoment.clone()).week(51).endOf('week')] :
        [moment__WEBPACK_IMPORTED_MODULE_1___default()(termYearMoment.clone()), moment__WEBPACK_IMPORTED_MODULE_1___default()(termYearMoment.clone()).week(25).endOf('week')];
}
function getSchoolMoment(m) {
    var thisYear = m.year();
    var isAutumn = m.month() >= 6; // determine 
    var _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](isAutumn ?
        [thisYear, thisYear + 1] :
        [thisYear - 1, thisYear], 2), autumnYear = _a[0], springYear = _a[1];
    var academicYear = '' + autumnYear + '/' + springYear;
    var term = isAutumn ? 'AT' : 'ST';
    var week = m.week();
    return { academicYear: academicYear, term: term, week: week };
}
function addYear(aYear, numYearsToAdd) {
    return aYear.split('/')
        .map(function (yearStr) { return parseInt(yearStr) + numYearsToAdd; })
        .map(function (year) { return '' + year; })
        .join('/');
}
function nextAcademicYear(aYear) {
    return addYear(aYear, 1);
}
function prevAcademicYear(aYear) {
    return addYear(aYear, -1);
}


/***/ }),

/***/ "./src/utils/school-term.ts":
/*!**********************************!*\
  !*** ./src/utils/school-term.ts ***!
  \**********************************/
/*! exports provided: SchoolTerm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SchoolTerm", function() { return SchoolTerm; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _school_moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./school-moment */ "./src/utils/school-moment.ts");


function isSchoolMoment(obj) {
    return 'academicYear' in obj;
}
var SchoolTerm = /** @class */ (function () {
    function SchoolTerm(dateOrSchoolMoment) {
        var schoolMoment = isSchoolMoment(dateOrSchoolMoment) ?
            dateOrSchoolMoment : Object(_school_moment__WEBPACK_IMPORTED_MODULE_1__["getSchoolMoment"])(moment__WEBPACK_IMPORTED_MODULE_0___default()(dateOrSchoolMoment));
        this.academicYear = schoolMoment.academicYear;
        this.term = schoolMoment.term;
    }
    Object.defineProperty(SchoolTerm.prototype, "year", {
        get: function () {
            return parseInt(this.academicYear
                .split('/')[this.term === 'AT' ? 0 : 1]);
        },
        enumerable: true,
        configurable: true
    });
    SchoolTerm.prototype.nextTerm = function () {
        return new SchoolTerm(this.term === 'AT' ?
            {
                term: 'ST',
                academicYear: this.academicYear
            } :
            {
                term: 'AT',
                academicYear: Object(_school_moment__WEBPACK_IMPORTED_MODULE_1__["addYear"])(this.academicYear, 1)
            });
    };
    SchoolTerm.prototype.prevTerm = function () {
        return new SchoolTerm(this.term === 'AT' ?
            {
                term: 'ST',
                academicYear: Object(_school_moment__WEBPACK_IMPORTED_MODULE_1__["addYear"])(this.academicYear, -1)
            } :
            {
                term: 'AT',
                academicYear: this.academicYear
            });
    };
    SchoolTerm.prototype.toLocaleString = function (intl, shortYear) {
        var year = this.term === 'AT' ?
            this.academicYear.split('/')[0] :
            this.academicYear.split('/')[1];
        if (shortYear)
            year = year.substr(2);
        return this.term === 'AT' ? intl.formatMessage({ id: 'termplanner.secondTerm', defaultMessage: 'HT {year}' }, { year: year }) :
            intl.formatMessage({ id: 'termplanner.firstTerm', defaultMessage: 'VT {year}' }, { year: year });
    };
    return SchoolTerm;
}());



/***/ }),

/***/ "./src/utils/utils.ts":
/*!****************************!*\
  !*** ./src/utils/utils.ts ***!
  \****************************/
/*! exports provided: capitalizeFirst, extend, clone, flatten, compareProp, compareProps, L, TC, dateTimeReviver, showInfo, showError, maxLength, arrayToLookup, arrayToMap, cherryPickProps, distinct, shallowEquals */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "capitalizeFirst", function() { return capitalizeFirst; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "extend", function() { return extend; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clone", function() { return clone; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "flatten", function() { return flatten; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "compareProp", function() { return compareProp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "compareProps", function() { return compareProps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "L", function() { return L; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TC", function() { return TC; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dateTimeReviver", function() { return dateTimeReviver; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showInfo", function() { return showInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showError", function() { return showError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "maxLength", function() { return maxLength; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "arrayToLookup", function() { return arrayToLookup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "arrayToMap", function() { return arrayToMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cherryPickProps", function() { return cherryPickProps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "distinct", function() { return distinct; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shallowEquals", function() { return shallowEquals; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

function capitalizeFirst(str) {
    for (var i = 0, l = str.length; i < l; ++i) {
        if (str.charCodeAt(i) < 0x2000) {
            return str.substr(0, i) + str[i].toLocaleUpperCase() + str.substr(i + 1);
        }
    }
    return str;
}
function extend(obj, extension) {
    if (typeof extension !== 'object')
        return obj;
    Object.keys(extension).forEach(function (key) {
        obj[key] = extension[key];
    });
    return obj;
}
function clone(obj, extension) {
    var clone = {};
    Object.getOwnPropertyNames(obj).forEach(function (key) {
        Object.defineProperty(clone, key, Object.getOwnPropertyDescriptor(obj, key));
    });
    if (extension)
        extend(clone, extension);
    return clone;
}
var concat = [].concat;
function flatten(a) {
    return concat.apply([], a);
}
function compareProp(prop) {
    return function (a, b) {
        var aProp = a[prop], bProp = b[prop];
        return aProp > bProp ? 1 : aProp < bProp ? -1 : 0;
    };
}
function compareProps(props, locales, options) {
    props = Array.isArray(props) ? props : [props];
    var localeCompare = function (a, b) {
        return typeof a === 'string' ?
            a.localeCompare(b, locales, options) :
            a < b ? -1 : a > b ? 1 : 0;
    };
    function cmpPart(a, b, firstPart, rest) {
        var firstA = a[firstPart];
        var firstB = b[firstPart];
        if (firstA === firstB)
            return 0;
        if (firstA == null)
            return -1;
        if (firstB == null)
            return 1;
        return rest.length === 0 ?
            localeCompare(firstA, firstB) :
            cmpPart(firstA, firstB, rest[0], rest.slice(1));
    }
    return props
        .map(function (prop) { return prop.split('.'); })
        .map(function (_a) {
        var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a), firstPart = _b[0], rest = _b.slice(1);
        return function (a, b) { return cmpPart(a, b, firstPart, rest); };
    })
        .reduce(function (cmp1, cmp2) {
        return function (a, b) { return cmp1(a, b) || cmp2(a, b); };
    });
}
function L(text) {
    var args = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        args[_i - 1] = arguments[_i];
    }
    var first = text[0];
    return buildMessage(text, args);
}
function buildMessage(text, args) {
    var rv = text[0];
    for (var i = 1, l = text.length; i < l; ++i) {
        rv += args[i - 1] + text[i];
    }
    return rv;
}
var TC = /** @class */ (function () {
    function TC(template) {
        extend(this, template);
    }
    return TC;
}());

function dateTimeReviver(key, value) {
    var a;
    if (typeof value === 'string') {
        a = /\/Date\((\d*)\)\//.exec(value);
        if (a) {
            return new Date(+a[1]);
        }
    }
    return value;
}
//let infoSerial = 1;
function showInfo(msg) {
    var event = new CustomEvent('info', { 'detail': msg });
    window.dispatchEvent(event);
}
function showError(errMsg) {
    var msg = typeof errMsg === 'string' ? errMsg : errMsg.message;
    var event = new CustomEvent('customerror', { 'detail': msg });
    console.error(errMsg);
    window.dispatchEvent(event);
}
function maxLength(str, maxLen) {
    return str.length > maxLen ?
        str.substr(0, maxLen - 3) + "..." :
        str;
}
function arrayToLookup(a, keyAccessor) {
    var result = {};
    for (var i = 0, l = a.length; i < l; ++i) {
        var item = a[i];
        var key = keyAccessor(item);
        var array = result[key];
        if (array)
            array.push(item);
        else
            result[key] = [item];
    }
    return result;
}
function arrayToMap(a, keyAccessor) {
    var result = {};
    for (var i = 0, l = a.length; i < l; ++i) {
        var item = a[i];
        var key = keyAccessor(item);
        result[key] = item;
    }
    return result;
}
function cherryPickProps(obj, propsToPick) {
    var e_1, _a;
    var result = {};
    try {
        for (var propsToPick_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](propsToPick), propsToPick_1_1 = propsToPick_1.next(); !propsToPick_1_1.done; propsToPick_1_1 = propsToPick_1.next()) {
            var param = propsToPick_1_1.value;
            if (param in obj)
                result[param] = obj[param];
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (propsToPick_1_1 && !propsToPick_1_1.done && (_a = propsToPick_1.return)) _a.call(propsToPick_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return result;
}
function distinct(a, keyAccessor) {
    var map = arrayToMap(a, keyAccessor || (function (x) { return x; }));
    return Object.keys(map).map(function (key) { return map[key]; });
}
function shallowEquals(a, b) {
    if (a === b)
        return true;
    if (!a || !b)
        return false;
    if (typeof a !== 'object' || typeof b !== 'object')
        return false;
    var keysA = Object.keys(a);
    var keysB = Object.keys(b);
    if (keysA.length !== keysB.length)
        return false;
    for (var i = 0, l = keysA.length; i < l; ++i) {
        var key = keysA[i];
        if (keysB[i] !== key)
            return false;
        if (a[key] !== b[key])
            return false;
    }
    return true;
}


/***/ }),

/***/ "./src/utils/weekutil.ts":
/*!*******************************!*\
  !*** ./src/utils/weekutil.ts ***!
  \*******************************/
/*! exports provided: KEDWeek, getNextWeekDate, getPrevWeekDate, getAdjustedWeek */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KEDWeek", function() { return KEDWeek; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getNextWeekDate", function() { return getNextWeekDate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getPrevWeekDate", function() { return getPrevWeekDate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getAdjustedWeek", function() { return getAdjustedWeek; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);

function KEDWeek(year, week) {
    var m = moment__WEBPACK_IMPORTED_MODULE_0___default()(new Date(year, 1, 1)).week(week);
    var res = {
        year: year,
        week: week,
        notBefore: m.clone().startOf('week').add(-2, 'days').toDate().getTime(),
        notAfter: m.clone().startOf('week').add(5, 'days').toDate().getTime()
    };
    return res;
}
function getNextWeekDate(date) {
    var nextDate = moment__WEBPACK_IMPORTED_MODULE_0___default()(date).add(1, 'week');
    //Set the 01.01 of the next year in case the next week is in the same year 
    //and the previous week is the last week of the year
    if (date.week() === date.weeksInYear() && nextDate.year() === date.year()) {
        return { adjusted: true, nextDate: moment__WEBPACK_IMPORTED_MODULE_0___default()(date.year() + 1 + "-01-01").toDate() };
    }
    return { adjusted: false, nextDate: nextDate.toDate() };
}
function getPrevWeekDate(date) {
    var prevDate = moment__WEBPACK_IMPORTED_MODULE_0___default()(date).add(-1, 'week');
    //Set the 01.01 of the current year in case the prev week is in the previous year
    if (date.week() === 2 && prevDate.year() !== date.year()) {
        return { adjusted: true, nextDate: moment__WEBPACK_IMPORTED_MODULE_0___default()(date.year() + "-01-01").toDate() };
    }
    return { adjusted: false, nextDate: prevDate.toDate() };
}
function getAdjustedWeek(m) {
    var clone = m.clone();
    return m.weekday() >= 5 ? // Lrdag 00:00 / Sndag 00:00?
        m.week() + 1 : // Tillhr nsta vecka
        m.week();
}
/*export function getWeekLimits (m: Moment) {
  const clonedSwedish = m.clone().locale('sv');
  const limits = {
    notBefore: clonedSwedish.startOf('week').add(-2, 'days'),
    notAfter: clonedSwedish.startOf('week').add(5, 'days')
  };
}
*/


/***/ }),

/***/ 0:
/*!*****************************************!*\
  !*** ../locale-data/index.js (ignored) ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 1:
/*!*******************************!*\
  !*** ./lib/locales (ignored) ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 2:
/*!*******************************!*\
  !*** ./lib/locales (ignored) ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ "jquery":
/*!*************************!*\
  !*** external "jQuery" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = jQuery;

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "React" ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = React;

/***/ }),

/***/ "react-dom":
/*!***************************!*\
  !*** external "ReactDOM" ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ReactDOM;

/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9jbGllbnQuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9jbGllbnR3ZWIuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLWNsaWVudC13ZWIvYmVhcmVyLXN0b3JhZ2Utc2Vzc2lvbnN0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLWNsaWVudC13ZWIvaGFzaC1yZXN0b3Jlci5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50LXdlYi9pbmRleC5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50L2FjY2Vzcy1jb250cm9sLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtYmFja2VuZC1jbGllbnQvaHR0cC1lcnJvci5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50L2luZGV4LmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtYmFja2VuZC1jbGllbnQva2VkLWJlYXJlci1wcm92aWRlci5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50L3Jlc3RjbGllbnQuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLWNsaWVudC91dGlscy5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLW1vZGVsLW1pZ3JhdG9yL2luZGV4LmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtbW9kZWwtbWlncmF0b3IvbWlncmF0ZS1jb3Vyc2UuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1tb2RlbC1taWdyYXRvci9taWdyYXRlLXRhc2suanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1tb2RlbC1taWdyYXRvci9taWdyYXRlLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9vYnNlcnZhYmxlL2NvbGxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL29ic2VydmFibGUvZW1pdHRlci5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMvb2JzZXJ2YWJsZS9maWJlci1jb250ZXh0LmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9vYnNlcnZhYmxlL21hcC5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMvb2JzZXJ2YWJsZS9vYnNlcnZhYmxlLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9vYnNlcnZhYmxlL3ZhbHVlLmpzIiwid2VicGFjazovL1tuYW1lXS8uL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlIHN5bmMgc3Z8ZW4iLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2FjY2Vzcy1jb250cm9sL2dldC11c2VyLWNsYWltcy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvYWNjZXNzLWNvbnRyb2wvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2FwaXMvZWRzY2xpZW50LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9hcGlzL2dvb2dsZS1jYWxlbmRhci50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvYXBpcy9nb29nbGUtY2xpZW50LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9hcGlzL2tlZC1sZWFybmluZ2dvYWxzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NhbGVuZGFyL2NvdXJzZS1uYW1lLXRvLWNzcy1jbGFzcy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jYWxlbmRhci9jcnVuY2gtY29sbGlkaW5nLWV2ZW50cy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jYWxlbmRhci9kYXktdmlldy1ldmVudC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY2FsZW5kYXIvZGF5LXZpZXcudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NhbGVuZGFyL2hvdXItbWFya2VyLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jYWxlbmRhci9pbmRleC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY2FsZW5kYXIvc2hvdWxkLWluY2x1ZGUtY2FsZW5kYXIudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY2FsZW5kYXIvc3RhdHVzLWJhci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY2FsZW5kYXIvdGltZS1saW5lcy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY2FsZW5kYXIvd2Vlay12aWV3LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jaGFydHMvY2hhcnRzLXV0aWxzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NoYXJ0cy9kb3VnaG51dC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY2hhcnRzL2dvYWwtcHJvZ3Jlc3MudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NoYXJ0cy9wcm9ncmVzcy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvcmVtb3ZlLWl0ZW0udHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3NwaW5uZXIudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS12aWV3ZXIvc3ViY29tcG9uZW50cy9jb25maXJtYXRpb24udHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS12aWV3ZXIvc3ViY29tcG9uZW50cy9sZWFybmluZy1nb2Fscy1saXN0LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2Utdmlld2VyL3N1YmNvbXBvbmVudHMvdGFzay1saXN0LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9rZy10ZXJtcGxhbm5lci9rZy10ZXJtcGxhbm5lci1zZWxmLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9rZy10ZXJtcGxhbm5lci9rZy10ZXJtcGxhbm5lci10dXRvcmVkLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9rZy10ZXJtcGxhbm5lci9rZy10ZXJtcGxhbm5lci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMva2ctdGVybXBsYW5uZXIvd2Vlay1ub3RlLWRpYWxvZy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMva3MtZ29hbHMvZnV0dXJlLWFiaWxpdGllcy10YWJsZS50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMva3MtZ29hbHMvZnV0dXJlLWFiaWxpdGllcy12aWV3bW9kZWwudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMva3MtZ29hbHMvZ29hbHMtdmlld21vZGVsLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2tzLWdvYWxzL2dvYWxzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9rcy10ZXJtcGxhbm5lci9rcy10ZXJtcGxhbm5lci10dXRvcmVkLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9rcy10ZXJtcGxhbm5lci90ZXJtcGxhbm5lci11dGlscy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9rcy10ZXJtcGxhbm5lci90ZXJtcGxhbm5lci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMva3MtdGVybXBsYW5uZXIvdHV0b3ItZGlhbG9nLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9rcy10ZXJtcGxhbm5lci92aWV3bW9kZWwudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvbGF0ZXN0LWFzc2Vzc21lbnRzL2xhdGVzdC1hc3Nlc3NtZW50cy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvbGVhcm5pbmctdGFza3MvaW5kZXgudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2xpc3QtY291cnNlcy9saXN0LWNvdXJzZXMudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL215LWNvdXJzZXMvbXktY291cnNlcy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdHV0b3JzLXNlbGVjdC90dXRvcnMtc2VsZWN0LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy90dXRvcnMtdmlldy9pbmRleC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy90dXRvcnMtdmlldy90dXRvcnMtdmlldy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL0xhbmd1YWdlQ29udGV4dC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL1NldHVwTGFuZ3VhZ2VJbnRsLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvY29udGVudC1lZGl0YWJsZS1maWVsZC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL2RpYWxvZ3MudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9mb3JtLWZpZWxkLXRleHQtaW5wdXQudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9mb3JtLWZpZWxkLXRleHRhcmVhLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvZm9ybS1maWVsZC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL29wZW4tY2xvc2UtYm94LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvdHV0b3JhYmxlLWNvbXBvbmVudC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL3d5c2l3eWcvYWN0aW9ucy1zdi50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zy9hY3Rpb25zLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnL2V4ZWMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL3d5c2l3eWcvaW1hZ2UtZWRpdC1hY3Rpb25zLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnL2luZGV4LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zy93YXNoLWh0bWwudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvd2Vlay1ub3RlYm9vay9pbmRleC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy93ZWVrLW5vdGVib29rL3Jvb3Qtd2Vlay1ub3RlYm9vay50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvd2Vlay1ub3RlYm9vay93ZWVrLW5vdGVib29rLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy93ZWVrcGxhbm5lci9hZGQtY3VzdG9tLWdvYWwudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3dlZWtwbGFubmVyL2FkZC1jdXN0b20tdGFzay50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvd2Vla3BsYW5uZXIvYWRkLW9yLWVkaXQtc3ViLXRhc2sudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3dlZWtwbGFubmVyL2VkaXQtdXNlci10YXNrLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy93ZWVrcGxhbm5lci9nZXQtdGFzay10eXBlLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3dlZWtwbGFubmVyL2luZGV4LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3dlZWtwbGFubmVyL3JlZmluZXIudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvd2Vla3BsYW5uZXIvdXNlci10YXNrcy1ib3gudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3dlZWtwbGFubmVyL3dlZWtwbGFubmVyLXBlcnNpc3RlZC1zdGF0ZS50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy93ZWVrcGxhbm5lci93ZWVrcGxhbm5lci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2ZlYXR1cmVzL2ZlYXR1cmVzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9mZWF0dXJlcy9pbmRleC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZ2xvYmFsLXNldHRlcnMvY29uZmlndXJlLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9nbG9iYWwtc2V0dGVycy9zZXQtYWxsLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9nbG9iYWwtc2V0dGVycy9zZXQtYmVhcmVyLXByb3ZpZGVycy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZ2xvYmFsLXNldHRlcnMvc2V0LWVkcy1jbGllbnQudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2dsb2JhbC1zZXR0ZXJzL3NldC1rZWQtYmFja2VuZC1jbGllbnQudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2dsb2JhbHMvS0VELmNmZy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZ2xvYmFscy9LRUQuZW52LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9nbG9iYWxzL0tFRC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZ2xvYmFscy9LRUQudHV0b3JFbnYudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2dsb2JhbHMva2VkLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9nbG9iYWxzL21vbWVudC1zdi1sb2NhbGUudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3JlcG9zL2hpZGRlbi1jb3Vyc2VzLXJlcG8udHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3JlcG9zL2tlZC1yZXBvLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9yZXBvcy9rZy10ZXJtcGxhbm5lci1yZXBvLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9yZXBvcy9rcy10ZXJtcGxhbm5lci1yZXBvLWluc3RhbmNlLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9yZXBvcy9rcy10ZXJtcGxhbm5lci1yZXBvLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9yZXBvcy9yZXBvLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9yZXBvcy91c2VyLXRhc2tzLXJlcG8udHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3JlcG9zL3dlZWstbm90ZXMtcmVwby50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdGVzdC9jb21wb25lbnRzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy90ZXN0L2RhdGEvbGVhcm5pbmdNb2R1bGVzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy90ZXN0L2RhdGEvbGVhcm5pbmdNb2R1bGVzMi50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdGVzdC9kYXRhL3VzZXJzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy90ZXN0L3NldC1jdXJyZW50LXVzZXIudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3Rlc3QvdGVzdC1jb25maWcudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3Rlc3QvdGVzdHBhZ2UudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy90ZXN0L3V0aWxzL2Nob29zZS11c2VyLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy91dGlscy9nZW5lcmljLXNjaG9vbC10ZXJtLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy91dGlscy9nZW5lcmljLXNjaG9vbC11dGlscy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdXRpbHMvaWYtdGFrZXMtdGltZS50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdXRpbHMvbWFrZS1zdXNwZW5zZS1hcGkudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3V0aWxzL3BlbmRpbmctam9iLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy91dGlscy9xdWVyeS1zdHJpbmcudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3V0aWxzL3JlcXVlc3QtdHV0b3JlZC10b2tlbnMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3V0aWxzL3NjaG9vbC1tb21lbnQudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3V0aWxzL3NjaG9vbC10ZXJtLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy91dGlscy91dGlscy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdXRpbHMvd2Vla3V0aWwudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4uL2xvY2FsZS1kYXRhL2luZGV4LmpzIChpZ25vcmVkKSIsIndlYnBhY2s6Ly9bbmFtZV0vLi9saWIvbG9jYWxlcyAoaWdub3JlZCkiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vbGliL2xvY2FsZXMgKGlnbm9yZWQpP2ExNzciLCJ3ZWJwYWNrOi8vW25hbWVdL2V4dGVybmFsIFwialF1ZXJ5XCIiLCJ3ZWJwYWNrOi8vW25hbWVdL2V4dGVybmFsIFwiUmVhY3RcIiIsIndlYnBhY2s6Ly9bbmFtZV0vZXh0ZXJuYWwgXCJSZWFjdERPTVwiIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxnQkFBUSxvQkFBb0I7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztB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UUFDdEIsSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFDakMsSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLEdBQUcsT0FBUixJQUFJLGlEQUFTLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQUcsSUFBSSxVQUFHLENBQUMsTUFBTSxFQUFWLENBQVUsQ0FBQyxFQUFDLENBQUM7UUFFL0QsUUFBTyxTQUFTLEVBQUU7WUFDaEIsS0FBSyxJQUFJO2dCQUNQLE1BQU0sQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDdEMsTUFBTTtZQUNSLEtBQUssTUFBTTtnQkFDVCxNQUFNLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQzVDLE1BQU07WUFDUixLQUFLLE1BQU07Z0JBQ1QsTUFBTSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDckMsTUFBTTtZQUNSLEtBQUssT0FBTztnQkFDVixNQUFNLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLEVBQUUsT0FBTyxDQUFDO2dCQUMzQyxNQUFNO1NBQ1Q7UUFDRCxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUM7WUFDaEUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLENB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LENBQUMsTUFBTSxFQUFFLEVBQUMsQ0FBQztBQUN4RCxDQUFDO0FBRU0sU0FBUyxlQUFlLENBQUMsSUFBWTtJQUMxQyxJQUFJLFFBQVEsR0FBRyw2Q0FBTSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUM1QyxpRkFBaUY7SUFDakYsSUFBRyxJQUFJLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxJQUFJLFFBQVEsQ0FBQyxJQUFJLEVBQUUsS0FBSyxJQUFJLENBQUMsSUFBSSxFQUFFLEVBQUM7UUFDdEQsT0FBTyxFQUFDLFFBQVEsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLDZDQUFNLENBQUksSUFBSSxDQUFDLElBQUksRUFBRSxXQUFRLENBQUMsQ0FBQyxNQUFNLEVBQUUsRUFBQyxDQUFDO0tBQzVFO0lBRUQsT0FBTyxFQUFDLFFBQVEsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLFFBQVEsQ0FBQyxNQUFNLEVBQUUsRUFBQyxDQUFDO0FBQ3hELENBQUM7QUFFTSxTQUFTLGVBQWUsQ0FBQyxDQUFTO0lBQ3ZDLElBQU0sS0FBSyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUN4QixPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLCtCQUErQjtRQUNyRCxDQUFDLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxzQkFBc0I7UUFDckMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ2YsQ0FBQztBQUVEOzs7Ozs7O0VBT0U7Ozs7Ozs7Ozs7OztBQ2hERixlOzs7Ozs7Ozs7OztBQ0FBLGU7Ozs7Ozs7Ozs7O0FDQUEsZTs7Ozs7Ozs7Ozs7QUNBQSx3Qjs7Ozs7Ozs7Ozs7QUNBQSx1Qjs7Ozs7Ozs7Ozs7QUNBQSwwQiIsImZpbGUiOiJ0ZXN0cGFnZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xuIFx0ZnVuY3Rpb24gd2VicGFja0pzb25wQ2FsbGJhY2soZGF0YSkge1xuIFx0XHR2YXIgY2h1bmtJZHMgPSBkYXRhWzBdO1xuIFx0XHR2YXIgbW9yZU1vZHVsZXMgPSBkYXRhWzFdO1xuIFx0XHR2YXIgZXhlY3V0ZU1vZHVsZXMgPSBkYXRhWzJdO1xuXG4gXHRcdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuIFx0XHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcbiBcdFx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMCwgcmVzb2x2ZXMgPSBbXTtcbiBcdFx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG4gXHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG4gXHRcdFx0XHRyZXNvbHZlcy5wdXNoKGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSk7XG4gXHRcdFx0fVxuIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG4gXHRcdH1cbiBcdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcbiBcdFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuIFx0XHRcdH1cbiBcdFx0fVxuIFx0XHRpZihwYXJlbnRKc29ucEZ1bmN0aW9uKSBwYXJlbnRKc29ucEZ1bmN0aW9uKGRhdGEpO1xuXG4gXHRcdHdoaWxlKHJlc29sdmVzLmxlbmd0aCkge1xuIFx0XHRcdHJlc29sdmVzLnNoaWZ0KCkoKTtcbiBcdFx0fVxuXG4gXHRcdC8vIGFkZCBlbnRyeSBtb2R1bGVzIGZyb20gbG9hZGVkIGNodW5rIHRvIGRlZmVycmVkIGxpc3RcbiBcdFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2guYXBwbHkoZGVmZXJyZWRNb2R1bGVzLCBleGVjdXRlTW9kdWxlcyB8fCBbXSk7XG5cbiBcdFx0Ly8gcnVuIGRlZmVycmVkIG1vZHVsZXMgd2hlbiBhbGwgY2h1bmtzIHJlYWR5XG4gXHRcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIFx0fTtcbiBcdGZ1bmN0aW9uIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCkge1xuIFx0XHR2YXIgcmVzdWx0O1xuIFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWRNb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0dmFyIGRlZmVycmVkTW9kdWxlID0gZGVmZXJyZWRNb2R1bGVzW2ldO1xuIFx0XHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuIFx0XHRcdGZvcih2YXIgaiA9IDE7IGogPCBkZWZlcnJlZE1vZHVsZS5sZW5ndGg7IGorKykge1xuIFx0XHRcdFx0dmFyIGRlcElkID0gZGVmZXJyZWRNb2R1bGVbal07XG4gXHRcdFx0XHRpZihpbnN0YWxsZWRDaHVua3NbZGVwSWRdICE9PSAwKSBmdWxmaWxsZWQgPSBmYWxzZTtcbiBcdFx0XHR9XG4gXHRcdFx0aWYoZnVsZmlsbGVkKSB7XG4gXHRcdFx0XHRkZWZlcnJlZE1vZHVsZXMuc3BsaWNlKGktLSwgMSk7XG4gXHRcdFx0XHRyZXN1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IGRlZmVycmVkTW9kdWxlWzBdKTtcbiBcdFx0XHR9XG4gXHRcdH1cblxuIFx0XHRyZXR1cm4gcmVzdWx0O1xuIFx0fVxuXG4gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuIFx0Ly8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4gXHQvLyBQcm9taXNlID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxuIFx0dmFyIGluc3RhbGxlZENodW5rcyA9IHtcbiBcdFx0XCJ0ZXN0cGFnZVwiOiAwXG4gXHR9O1xuXG4gXHR2YXIgZGVmZXJyZWRNb2R1bGVzID0gW107XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdHZhciBqc29ucEFycmF5ID0gd2luZG93W1wid2VicGFja0pzb25wX25hbWVfXCJdID0gd2luZG93W1wid2VicGFja0pzb25wX25hbWVfXCJdIHx8IFtdO1xuIFx0dmFyIG9sZEpzb25wRnVuY3Rpb24gPSBqc29ucEFycmF5LnB1c2guYmluZChqc29ucEFycmF5KTtcbiBcdGpzb25wQXJyYXkucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrO1xuIFx0anNvbnBBcnJheSA9IGpzb25wQXJyYXkuc2xpY2UoKTtcbiBcdGZvcih2YXIgaSA9IDA7IGkgPCBqc29ucEFycmF5Lmxlbmd0aDsgaSsrKSB3ZWJwYWNrSnNvbnBDYWxsYmFjayhqc29ucEFycmF5W2ldKTtcbiBcdHZhciBwYXJlbnRKc29ucEZ1bmN0aW9uID0gb2xkSnNvbnBGdW5jdGlvbjtcblxuXG4gXHQvLyBhZGQgZW50cnkgbW9kdWxlIHRvIGRlZmVycmVkIGxpc3RcbiBcdGRlZmVycmVkTW9kdWxlcy5wdXNoKFtcIi4vc3JjL3Rlc3QvdGVzdHBhZ2UudHN4XCIsXCJ2ZW5kb3JzXCJdKTtcbiBcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gcmVhZHlcbiBcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIiwiZXhwb3J0ICogZnJvbSAnLi9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLWNsaWVudCc7IiwiZXhwb3J0ICogZnJvbSAnLi9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLWNsaWVudC13ZWInOyIsInZhciBCZWFyZXJTdG9yYWdlU2Vzc2lvblN0b3JhZ2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBCZWFyZXJTdG9yYWdlU2Vzc2lvblN0b3JhZ2UoKSB7XHJcbiAgICB9XHJcbiAgICBCZWFyZXJTdG9yYWdlU2Vzc2lvblN0b3JhZ2UucHJvdG90eXBlLnNhdmUgPSBmdW5jdGlvbiAoaWQsIHRva2VuSW5mbykge1xyXG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXCJiZWFyZXItXCIgKyBpZCwgSlNPTi5zdHJpbmdpZnkodG9rZW5JbmZvKSk7XHJcbiAgICB9O1xyXG4gICAgQmVhcmVyU3RvcmFnZVNlc3Npb25TdG9yYWdlLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFyIGpzb24gPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFwiYmVhcmVyLVwiICsgaWQpO1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGpzb24gPyBKU09OLnBhcnNlKGpzb24pIDogeyB0b2tlbjogbnVsbCwgZXhwaXJlczogMCB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoeyB0b2tlbjogbnVsbCwgZXhwaXJlczogMCB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEJlYXJlclN0b3JhZ2VTZXNzaW9uU3RvcmFnZTtcclxufSgpKTtcclxuZXhwb3J0IHsgQmVhcmVyU3RvcmFnZVNlc3Npb25TdG9yYWdlIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJlYXJlci1zdG9yYWdlLXNlc3Npb25zdG9yYWdlLmpzLm1hcCIsInZhciByZWRpckhhc2ggPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFwicmVkaXItaGFzaFwiKTtcclxuaWYgKHJlZGlySGFzaClcclxuICAgIHRyeSB7XHJcbiAgICAgICAgdmFyIF9hID0gSlNPTi5wYXJzZShyZWRpckhhc2gpLCB0aW1lID0gX2EudGltZSwgaGFzaCA9IF9hLmhhc2g7XHJcbiAgICAgICAgaWYgKHRpbWUgJiYgdGltZSA+IERhdGUubm93KCkgLSA2MDAwMCkge1xyXG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKFwicmVkaXItaGFzaFwiKTtcclxuICAgICAgICAgICAgbG9jYXRpb24uaGFzaCA9IGhhc2g7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2F0Y2ggKF8pIHsgfVxyXG5leHBvcnQgZnVuY3Rpb24gcmVtZW1iZXJIYXNoTG9jYXRpb24oKSB7XHJcbiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwicmVkaXItaGFzaFwiLCBKU09OLnN0cmluZ2lmeSh7IHRpbWU6IERhdGUubm93KCksIGhhc2g6IGxvY2F0aW9uLmhhc2ggfSkpO1xyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhhc2gtcmVzdG9yZXIuanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgS2VkQmFja2VuZENsaWVudCwgSHR0cEVycm9yIH0gZnJvbSAnLi4va2VkLWJhY2tlbmQtY2xpZW50JztcclxuaW1wb3J0IHsgQmVhcmVyU3RvcmFnZVNlc3Npb25TdG9yYWdlIH0gZnJvbSBcIi4vYmVhcmVyLXN0b3JhZ2Utc2Vzc2lvbnN0b3JhZ2VcIjtcclxuaW1wb3J0IHsgYXZvaWRTaW11bHRhbm91c0NhbGxzIH0gZnJvbSAnLi4va2VkLWJhY2tlbmQtY2xpZW50L3V0aWxzJztcclxuaW1wb3J0IHsgS2VkTW9kZWxNaWdyYXRvck1peGluIH0gZnJvbSAnLi4va2VkLW1vZGVsLW1pZ3JhdG9yJztcclxuaW1wb3J0ICcuL2hhc2gtcmVzdG9yZXInO1xyXG5pbXBvcnQgeyByZW1lbWJlckhhc2hMb2NhdGlvbiB9IGZyb20gJy4vaGFzaC1yZXN0b3Jlcic7XHJcbktlZE1vZGVsTWlncmF0b3JNaXhpbihLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZSk7XHJcbmV4cG9ydCB2YXIgc3RvcmFnZSA9IG5ldyBCZWFyZXJTdG9yYWdlU2Vzc2lvblN0b3JhZ2UoKTtcclxudmFyIHRpbWVPZlBhZ2VMb2FkID0gRGF0ZS5ub3coKTtcclxudmFyIFdlYlNlcnZlckJlYXJlclByb3ZpZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gV2ViU2VydmVyQmVhcmVyUHJvdmlkZXIodG9rZW5QYXRoLCB0b2tlblJlc3BvbnNlTWFwcGVyLCB0b2tlbklkKSB7XHJcbiAgICAgICAgdGhpcy50b2tlblBhdGggPSB0b2tlblBhdGg7XHJcbiAgICAgICAgdGhpcy50b2tlblJlc3BvbnNlTWFwcGVyID0gdG9rZW5SZXNwb25zZU1hcHBlcjtcclxuICAgICAgICB0aGlzLnRva2VuSWQgPSB0b2tlbklkO1xyXG4gICAgICAgIHRoaXMudG9rZW5JbmZvID0geyB0b2tlbjogbnVsbCwgZXhwaXJlczogMCB9O1xyXG4gICAgICAgIHRoaXMuZ2V0QmVhcmVyID0gYXZvaWRTaW11bHRhbm91c0NhbGxzKHRoaXMuZ2V0QmVhcmVyLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMucmVmcmVzaEJlYXJlciA9IGF2b2lkU2ltdWx0YW5vdXNDYWxscyh0aGlzLnJlZnJlc2hCZWFyZXIuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBXZWJTZXJ2ZXJCZWFyZXJQcm92aWRlci5wcm90b3R5cGUuZ2V0QmVhcmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhdGhpcy50b2tlbkluZm8udG9rZW4pIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMudG9rZW5JZCkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgc3RvcmFnZS5sb2FkKHRoaXMudG9rZW5JZCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudG9rZW5JbmZvID0gX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0aGlzLnRva2VuSW5mby5leHBpcmVzIDwgRGF0ZS5ub3coKSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlZnJlc2hCZWFyZXIoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gNDtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnRva2VuSW5mb107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFdlYlNlcnZlckJlYXJlclByb3ZpZGVyLnByb3RvdHlwZS5yZWZyZXNoQmVhcmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzLCBfYSwgX2IsIF9jLCBfZDtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9lKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9lLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBmZXRjaCh0aGlzLnRva2VuUGF0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyBBY2NlcHQ6IFwidGV4dC9wbGFpbjsgYXBwbGljYXRpb24vanNvblwiIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWRpcmVjdDogJ21hbnVhbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZTogJ25vLWNhY2hlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzOiBcInNhbWUtb3JpZ2luXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2Uuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMzAyIHx8ICghcmVzLnN0YXR1cyAmJiByZXMudHlwZSA9PT0gXCJvcGFxdWVyZWRpcmVjdFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXNlciBzZXNzaW9uIHRpbWVkIG91dCBhbmQgc2VydmVyIHdhbnRzIHRvIHJlZGlyZWN0IGVudGlyZSBwYWdlIHRvIGxvZ2luIHBhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRpbWUgdG8gcmVsb2FkIGN1cnJlbnQgcGFnZSB0byBmb3JjZSBhIHJlZGlyZWN0IG9mIHRoZSBlbnRpcmUgcGFnZSBpbnN0ZWFkIGZvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8ganVzdCByZWRpcmVjdGluZyB0byAvYXBpL3Rva2VuIG9yIHdoYXRldmVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKERhdGUubm93KCkgLSB0aW1lT2ZQYWdlTG9hZCA+IDYwMDAwKSB7IC8vIHByb2hpYml0IGVuZGxlc3MgbG9vcCBvZiByZWxvYWRpbmcgc2VsZi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndhbnRzUmVkaXJlY3QgPSB0cnVlOyAvLyBTbyB0aGF0IGxpc3RlbmVycyB0byBvbmJlZm9yZXVubG9hZCBjb3VsZCBzaG93IGFsdGVybmF0ZSBtZXNzYWdlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVkaXJlY3Qgd2FudGVkLiBSZWxvYWQgcGFnZS5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtZW1iZXJIYXNoTG9jYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBIdHRwRXJyb3IoMzAyLCBcIlJlZGlyZWN0ZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzLnN0YXR1cyAhPSAyMDApKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSBFcnJvci5iaW5kO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IFwiSFRUUFwiICsgcmVzLnN0YXR1cyArIFwiIFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXMudGV4dCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHRocm93IG5ldyAoX2EuYXBwbHkoRXJyb3IsIFt2b2lkIDAsIF9iICsgKF9lLnNlbnQoKSldKSkoKTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2QgPSB0aGlzLnRva2VuUmVzcG9uc2VNYXBwZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy50ZXh0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2MudG9rZW5JbmZvID0gX2QuYXBwbHkodGhpcywgW19lLnNlbnQoKV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlLnNhdmUodGhpcy50b2tlbklkLCB0aGlzLnRva2VuSW5mbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnRva2VuSW5mb107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBXZWJTZXJ2ZXJCZWFyZXJQcm92aWRlcjtcclxufSgpKTtcclxuZXhwb3J0IHsgV2ViU2VydmVyQmVhcmVyUHJvdmlkZXIgfTtcclxuZXhwb3J0IHZhciBpc29tb3JwaGljID0geyBmZXRjaDogZmV0Y2guYmluZChzZWxmKSwgYnRvYTogYnRvYS5iaW5kKHNlbGYpIH07XHJcbnZhciBLZWRCYWNrZW5kQ2xpZW50V2ViID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoS2VkQmFja2VuZENsaWVudFdlYiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEtlZEJhY2tlbmRDbGllbnRXZWIoYXBpQmFzZVVybCwgcHJvdmlkZXJPclRva2VuUGF0aCwgb3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGJlYXJlclByb3ZpZGVyID0gdHlwZW9mIHByb3ZpZGVyT3JUb2tlblBhdGggIT09ICdzdHJpbmcnID9cclxuICAgICAgICAgICAgcHJvdmlkZXJPclRva2VuUGF0aCA6XHJcbiAgICAgICAgICAgIG5ldyBXZWJTZXJ2ZXJCZWFyZXJQcm92aWRlcihwcm92aWRlck9yVG9rZW5QYXRoLCAob3B0aW9ucyAmJiBvcHRpb25zLnRva2VuUmVzcG9uc2VNYXBwZXIpIHx8IChmdW5jdGlvbiAoeCkgeyByZXR1cm4gKHsgdG9rZW46IHgsIGV4cGlyZXM6IERhdGUubm93KCkgKyA1OSAqIDYwICogNjAgfSk7IH0pLCBvcHRpb25zICYmIG9wdGlvbnMudG9rZW5JZCk7XHJcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBpc29tb3JwaGljLCBiZWFyZXJQcm92aWRlciwgYXBpQmFzZVVybCkgfHwgdGhpcztcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gS2VkQmFja2VuZENsaWVudFdlYjtcclxufShLZWRCYWNrZW5kQ2xpZW50KSk7XHJcbmV4cG9ydCB7IEtlZEJhY2tlbmRDbGllbnRXZWIgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwidmFyIERvY3VtZW50QWNjZXNzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRG9jdW1lbnRBY2Nlc3MoYWNjZXNzQ2xhaW1UeXBlLCBhY2Nlc3NDbGFpbVZhbHVlLCByaWdodCkge1xyXG4gICAgICAgIHRoaXMuYWNjZXNzQ2xhaW1UeXBlID0gYWNjZXNzQ2xhaW1UeXBlO1xyXG4gICAgICAgIHRoaXMuYWNjZXNzQ2xhaW1WYWx1ZSA9IGFjY2Vzc0NsYWltVmFsdWU7XHJcbiAgICAgICAgdGhpcy5yaWdodCA9IHJpZ2h0O1xyXG4gICAgfVxyXG4gICAgRG9jdW1lbnRBY2Nlc3MuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChhYykge1xyXG4gICAgICAgIGlmICghYWMpXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIHZhciBzcGxpdCA9IGFjLnNwbGl0KCc6Jyk7XHJcbiAgICAgICAgaWYgKHNwbGl0Lmxlbmd0aCA8IDMpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYWNjZXNzIHN0cmluZzogXCIgKyBhYyk7XHJcbiAgICAgICAgdmFyIGNsYWltVHlwZSA9IERvY3VtZW50QWNjZXNzLnVuZXNjYXBlKHNwbGl0WzBdKTtcclxuICAgICAgICB2YXIgY2xhaW1WYWx1ZSA9IERvY3VtZW50QWNjZXNzLnVuZXNjYXBlKHNwbGl0WzFdKTtcclxuICAgICAgICB2YXIgcmlnaHQgPSBzcGxpdFsyXTtcclxuICAgICAgICBpZiAocmlnaHQgIT09ICdSJyAmJiByaWdodCAhPT0gJ1cnICYmIHJpZ2h0ICE9PSAnUycpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYWNjZXNzIHN0cmluZzogXCIgKyBhYyk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudEFjY2VzcyhjbGFpbVR5cGUsIGNsYWltVmFsdWUsIHJpZ2h0KTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudEFjY2Vzcy5lc2NhcGUgPSBmdW5jdGlvbiAoYWNjZXNzQ29tcG9uZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIGFjY2Vzc0NvbXBvbmVudC5yZXBsYWNlKC9cXCUvZywgXCIlMjVcIikucmVwbGFjZSgvXFw6L2csIFwiJTNBXCIpO1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50QWNjZXNzLnVuZXNjYXBlID0gZnVuY3Rpb24gKGFjY2Vzc0NvbXBvbmVudCkge1xyXG4gICAgICAgIHJldHVybiBhY2Nlc3NDb21wb25lbnQucmVwbGFjZSgvXFwlM0EvZywgXCI6XCIpLnJlcGxhY2UoL1xcJTI1L2csIFwiJVwiKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudEFjY2Vzcy5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIERvY3VtZW50QWNjZXNzLmVzY2FwZSh0aGlzLmFjY2Vzc0NsYWltVHlwZSkgKyBcIjpcIiArXHJcbiAgICAgICAgICAgIERvY3VtZW50QWNjZXNzLmVzY2FwZSh0aGlzLmFjY2Vzc0NsYWltVmFsdWUpICsgXCI6XCIgK1xyXG4gICAgICAgICAgICB0aGlzLnJpZ2h0O1xyXG4gICAgfTtcclxuICAgIERvY3VtZW50QWNjZXNzLmZyb21TdHJpbmdBcnJheSA9IGZ1bmN0aW9uIChhY2wpIHtcclxuICAgICAgICByZXR1cm4gYWNsXHJcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGFjKSB7IHJldHVybiBEb2N1bWVudEFjY2Vzcy5mcm9tU3RyaW5nKGFjKTsgfSlcclxuICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoYWMpIHsgcmV0dXJuIGFjOyB9KTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudEFjY2Vzcy50b1N0cmluZ0FycmF5ID0gZnVuY3Rpb24gKGFjbCkge1xyXG4gICAgICAgIHJldHVybiBhY2wubWFwKGZ1bmN0aW9uIChhYykgeyByZXR1cm4gYWMudG9TdHJpbmcoKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERvY3VtZW50QWNjZXNzO1xyXG59KCkpO1xyXG5leHBvcnQgeyBEb2N1bWVudEFjY2VzcyB9O1xyXG5leHBvcnQgZnVuY3Rpb24gaGFzQWNjZXNzKGFjbCwgdXNlckNsYWltcywgcmVxdWVzdGVkUmlnaHQpIHtcclxuICAgIGlmICh1c2VyQ2xhaW1zLnNvbWUoZnVuY3Rpb24gKGNsYWltKSB7IHJldHVybiBjbGFpbS50eXBlID09PSAncm9sZScgJiYgY2xhaW0udmFsdWUgPT09IFwiQURNSU5cIjsgfSkpXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICByZXR1cm4gYWNsLnNvbWUoZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICByZXR1cm4gdXNlckNsYWltcy5zb21lKGZ1bmN0aW9uIChjKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhLmFjY2Vzc0NsYWltVHlwZSA9PT0gYy50eXBlICYmXHJcbiAgICAgICAgICAgICAgICBhLmFjY2Vzc0NsYWltVmFsdWUgPT09IGMudmFsdWUgJiYgKChhLnJpZ2h0ID09PSAnUicgJiYgcmVxdWVzdGVkUmlnaHQgPT09ICdSJykgfHxcclxuICAgICAgICAgICAgICAgIChhLnJpZ2h0ID09PSAnVycgJiYgWydSJywgJ1cnXS5pbmRleE9mKHJlcXVlc3RlZFJpZ2h0KSA+PSAwKSB8fFxyXG4gICAgICAgICAgICAgICAgKGEucmlnaHQgPT09ICdTJykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YWNjZXNzLWNvbnRyb2wuanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxudmFyIEh0dHBFcnJvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliXzEuX19leHRlbmRzKEh0dHBFcnJvciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEh0dHBFcnJvcihjb2RlLCBtZXNzYWdlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgXCJIVFRQXCIgKyBjb2RlICsgXCIgXCIgKyBtZXNzYWdlKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIF90aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xyXG4gICAgICAgIF90aGlzLm5hbWUgPSBcImh0dHBcIiArIGNvZGU7XHJcbiAgICAgICAgX3RoaXMubWVzc2FnZSA9IFwiSFRUUFwiICsgY29kZSArIFwiIFwiICsgbWVzc2FnZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gSHR0cEVycm9yO1xyXG59KEVycm9yKSk7XHJcbmV4cG9ydCB7IEh0dHBFcnJvciB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1odHRwLWVycm9yLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IFJlc3RDbGllbnQgfSBmcm9tICcuL3Jlc3RjbGllbnQnO1xyXG5leHBvcnQgKiBmcm9tICcuL3V0aWxzJztcclxuZXhwb3J0IHsgS2VkQmVhcmVyUHJvdmlkZXIgfSBmcm9tICcuL2tlZC1iZWFyZXItcHJvdmlkZXInO1xyXG5leHBvcnQgKiBmcm9tICcuL2FjY2Vzcy1jb250cm9sJztcclxuZXhwb3J0IHsgUmVzdENsaWVudCB9O1xyXG5pbXBvcnQgeyBIdHRwRXJyb3IgfSBmcm9tICcuL2h0dHAtZXJyb3InO1xyXG5leHBvcnQgeyBIdHRwRXJyb3IgfTtcclxuZXhwb3J0ICogZnJvbSAnLi9yZXN0Y2xpZW50JztcclxuO1xyXG4vLyB8ICdvdGhlckZsYWcnIHwgJ3RoaXJkRmxhZyc7Li4uXHJcbnZhciBLZWRCYWNrZW5kQ2xpZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gS2VkQmFja2VuZENsaWVudChpc29tb3JwaGljLCBiZWFyZXJQcm92aWRlciwgYmFzZVVybCkge1xyXG4gICAgICAgIHRoaXMuaHR0cCA9IG5ldyBSZXN0Q2xpZW50KGlzb21vcnBoaWMsIGJhc2VVcmwsIHsgYmVhcmVyUHJvdmlkZXI6IGJlYXJlclByb3ZpZGVyIH0pO1xyXG4gICAgfVxyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUuZ2V0TXlDbGFpbXMgPSBmdW5jdGlvbiAodGFibGUsIGZldGNoT3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzLCBfYSwgX2I7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5odHRwLmdldChcIm1lL2NsYWltcy9cIiArICh0YWJsZSB8fCBcIlwiKSwgbnVsbCwgZmV0Y2hPcHRpb25zKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcy5zdGF0dXMgIT0gMjAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gSHR0cEVycm9yLmJpbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gW3ZvaWQgMCwgcmVzLnN0YXR1c107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy50ZXh0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogdGhyb3cgbmV3IChfYS5hcHBseShIdHRwRXJyb3IsIF9iLmNvbmNhdChbX2Muc2VudCgpXSkpKSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLmpzb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qLywgX2Muc2VudCgpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHRhYmxlLCBpZCwgb3B0aW9ucywgZmV0Y2hPcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZXMsIF9hLCBfYjtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmh0dHAuZ2V0KHRhYmxlICsgXCIvXCIgKyBpZCwgb3B0aW9ucywgZmV0Y2hPcHRpb25zKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcy5zdGF0dXMgIT0gMjAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gSHR0cEVycm9yLmJpbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gW3ZvaWQgMCwgcmVzLnN0YXR1c107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy50ZXh0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogdGhyb3cgbmV3IChfYS5hcHBseShIdHRwRXJyb3IsIF9iLmNvbmNhdChbX2Muc2VudCgpXSkpKSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLmpzb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qLywgX2Muc2VudCgpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUubGlzdCA9IGZ1bmN0aW9uICh0YWJsZSwgb3B0aW9ucywgZmV0Y2hPcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBxdWVyeSwgcmVzLCBfYSwgX2I7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkgPSB0c2xpYl8xLl9fYXNzaWduKHt9LCBvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uLnNlYXJjaC5pbmNsdWRlcygndXNlU1AnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkuZmxhZ3MgPSAocXVlcnkuZmxhZ3MgfHwgW10pLmNvbmNhdChbJ3VzZVNQJ10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMubXV0YXRpb25zT25FbXB0eSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5Lm11dGF0aW9uc09uRW1wdHkgPSBKU09OLnN0cmluZ2lmeShvcHRpb25zLm11dGF0aW9uc09uRW1wdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmh0dHAuZ2V0KFwiXCIgKyB0YWJsZSwgcXVlcnksIGZldGNoT3B0aW9ucyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXMuc3RhdHVzICE9IDIwMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IEh0dHBFcnJvci5iaW5kO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IFt2b2lkIDAsIHJlcy5zdGF0dXNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXMudGV4dCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHRocm93IG5ldyAoX2EuYXBwbHkoSHR0cEVycm9yLCBfYi5jb25jYXQoW19jLnNlbnQoKV0pKSkoKTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy5qc29uKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIF9jLnNlbnQoKV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLmJhdGNoID0gZnVuY3Rpb24gKHJlcXMsIGZldGNoT3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzLCBfYSwgX2I7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVvcmRlciBvcGVyYXRpb25zIHNvIHRoYXQgJ2FkZCdzIGNvbWUgZmlyc3QgYW5kICdkZWxldGUncyBjb21lIGxhc3Q6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXMgPSByZXFzLnNsaWNlKCkuc29ydChmdW5jdGlvbiAocmVxMSwgcmVxMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcTEub3AgPT09ICdhZGQnID8gLTEgOiByZXEyLm9wID09PSAnYWRkJyA/IDEgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcTEub3AgPT09ICdkZWxldGUnID8gMSA6IHJlcTIub3AgPT09ICdkZWxldGUnID8gLTEgOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5odHRwLnBvc3QoXCJiYXRjaFwiLCByZXFzLCBmZXRjaE9wdGlvbnMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IF9jLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzLnN0YXR1cyAhPSAyMDApKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSBIdHRwRXJyb3IuYmluZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSBbdm9pZCAwLCByZXMuc3RhdHVzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLnRleHQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiB0aHJvdyBuZXcgKF9hLmFwcGx5KEh0dHBFcnJvciwgX2IuY29uY2F0KFtfYy5zZW50KCldKSkpKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzQgLyp5aWVsZCovLCByZXMuanNvbigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovLCBfYy5zZW50KCldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS5kbyA9IGZ1bmN0aW9uIChzY29wZUZuKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBydW5uZXI7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcnVubmVyID0gbmV3IEJhdGNoUnVubmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlRm4ocnVubmVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5iYXRjaChydW5uZXIubXV0YXRpb25SZXF1ZXN0cyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIF9hLnNlbnQoKV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLmRlbGV0ZVJlYWxtID0gZnVuY3Rpb24gKHJlYWxtKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZXMsIF9hLCBfYjtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmh0dHAuZGVsZXRlKFwicmVhbG1zL1wiICsgcmVhbG0pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IF9jLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzLnN0YXR1cyAhPSAyMDApKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSBIdHRwRXJyb3IuYmluZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSBbdm9pZCAwLCByZXMuc3RhdHVzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLnRleHQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiB0aHJvdyBuZXcgKF9hLmFwcGx5KEh0dHBFcnJvciwgX2IuY29uY2F0KFtfYy5zZW50KCldKSkpKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzQgLyp5aWVsZCovLCByZXMuanNvbigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovLCBfYy5zZW50KCldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodGFibGUsIGRvYywgYnJhbmNoSWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci5hZGQodGFibGUsIGRvYyk7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLnB1dCA9IGZ1bmN0aW9uICh0YWJsZSwgZG9jKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIucHV0KHRhYmxlLCBkb2MpOyB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAodGFibGUsIGlkLCBkZWx0YURvYywgYnJhbmNoSWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci51cGRhdGUodGFibGUsIGlkLCBkZWx0YURvYywgYnJhbmNoSWQpOyB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS5tZXJnZSA9IGZ1bmN0aW9uIChicmFuY2hJZCwgdGFyZ2V0QnJhbmNoSWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci5tZXJnZShicmFuY2hJZCwgdGFyZ2V0QnJhbmNoSWQpOyB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS5jbGVhckJyYW5jaCA9IGZ1bmN0aW9uIChicmFuY2hJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmNsZWFyQnJhbmNoKGJyYW5jaElkKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKHRhYmxlLCBpZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmRlbGV0ZSh0YWJsZSwgaWQpOyB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS5zaGFyZSA9IGZ1bmN0aW9uICh0YWJsZSwgaWQsIGFjbCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLnNoYXJlKHRhYmxlLCBpZCwgYWNsKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUudW5zaGFyZSA9IGZ1bmN0aW9uICh0YWJsZSwgaWQsIGFjbCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLnVuc2hhcmUodGFibGUsIGlkLCBhY2wpOyB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS5saW5rID0gZnVuY3Rpb24gKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgdGFyZ2V0VGFibGUsIHRhcmdldElkLCBsYWJlbCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmxpbmsoc291cmNlVGFibGUsIHNvdXJjZUlkLCB0YXJnZXRUYWJsZSwgdGFyZ2V0SWQsIGxhYmVsKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUubGluazIgPSBmdW5jdGlvbiAoc291cmNlVGFibGUsIHNvdXJjZUlkLCB0YXJnZXRJZCwgbGFiZWwsIGJyYW5jaElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIubGluazIoc291cmNlVGFibGUsIHNvdXJjZUlkLCBsYWJlbCwgdGFyZ2V0SWQsIGJyYW5jaElkKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUudW5saW5rID0gZnVuY3Rpb24gKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgdGFyZ2V0VGFibGUsIHRhcmdldElkLCBsYWJlbCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLnVubGluayhzb3VyY2VUYWJsZSwgc291cmNlSWQsIHRhcmdldFRhYmxlLCB0YXJnZXRJZCwgbGFiZWwpOyB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS51bmxpbmsyID0gZnVuY3Rpb24gKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgdGFyZ2V0SWQsIGxhYmVsLCBicmFuY2hJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLnVubGluazIoc291cmNlVGFibGUsIHNvdXJjZUlkLCBsYWJlbCwgdGFyZ2V0SWQsIGJyYW5jaElkKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUudW5kb0xpbmsgPSBmdW5jdGlvbiAoc291cmNlVGFibGUsIHNvdXJjZUlkLCB0YXJnZXRJZCwgbGFiZWwsIGJyYW5jaElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIudW5kb0xpbmsoc291cmNlVGFibGUsIHNvdXJjZUlkLCBsYWJlbCwgdGFyZ2V0SWQsIGJyYW5jaElkKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEtlZEJhY2tlbmRDbGllbnQ7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IEtlZEJhY2tlbmRDbGllbnQgfTtcclxudmFyIEJhdGNoUnVubmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQmF0Y2hSdW5uZXIoKSB7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzID0gW107XHJcbiAgICB9XHJcbiAgICBCYXRjaFJ1bm5lci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHRhYmxlLCBkb2MsIGJyYW5jaElkKSB7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ2FkZCcsIHRhYmxlOiB0YWJsZSwgZG9jOiBkb2MsIGJyYW5jaElkOiBicmFuY2hJZCB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBCYXRjaFJ1bm5lci5wcm90b3R5cGUucHV0ID0gZnVuY3Rpb24gKHRhYmxlLCBkb2MpIHtcclxuICAgICAgICBkb2MgPSB0c2xpYl8xLl9fYXNzaWduKHt9LCBkb2MpO1xyXG4gICAgICAgIGRlbGV0ZSBkb2MuYWNsOyAvLyBGb3JiaWRkZW4gdG8gc2VuZCBhY2wgd2l0aCBwdXQoKSBjYWxscy5cclxuICAgICAgICB0aGlzLm11dGF0aW9uUmVxdWVzdHMucHVzaCh7IG9wOiAncHV0JywgdGFibGU6IHRhYmxlLCBkb2M6IGRvYyB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBCYXRjaFJ1bm5lci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHRhYmxlLCBpZCwgZGVsdGFEb2MsIGJyYW5jaElkKSB7XHJcbiAgICAgICAgZGVsdGFEb2MgPSB0c2xpYl8xLl9fYXNzaWduKHt9LCBkZWx0YURvYyk7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ3VwZGF0ZScsIHRhYmxlOiB0YWJsZSwgaWQ6IGlkLCBkZWx0YURvYzogZGVsdGFEb2MsIGJyYW5jaElkOiBicmFuY2hJZCB9KTtcclxuICAgIH07XHJcbiAgICBCYXRjaFJ1bm5lci5wcm90b3R5cGUubWVyZ2UgPSBmdW5jdGlvbiAoYnJhbmNoSWQsIHRhcmdldEJyYW5jaElkKSB7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ21lcmdlJywgYnJhbmNoSWQ6IGJyYW5jaElkLCB0YXJnZXRCcmFuY2hJZDogdGFyZ2V0QnJhbmNoSWQgfSk7XHJcbiAgICB9O1xyXG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLmNsZWFyQnJhbmNoID0gZnVuY3Rpb24gKGJyYW5jaElkKSB7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ2NsZWFyLWJyYW5jaCcsIGJyYW5jaElkOiBicmFuY2hJZCB9KTtcclxuICAgIH07XHJcbiAgICBCYXRjaFJ1bm5lci5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKHRhYmxlLCBpZCkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICdkZWxldGUnLCB0YWJsZTogdGFibGUsIGlkOiBpZCB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBCYXRjaFJ1bm5lci5wcm90b3R5cGUuc2hhcmUgPSBmdW5jdGlvbiAodGFibGUsIGlkLCBhY2wpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUmVxdWVzdHMucHVzaCh7IG9wOiAnc2hhcmUnLCB0YWJsZTogdGFibGUsIGlkOiBpZCwgYWNsOiBhY2wgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLnVuc2hhcmUgPSBmdW5jdGlvbiAodGFibGUsIGlkLCBhY2wpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUmVxdWVzdHMucHVzaCh7IG9wOiAndW5zaGFyZScsIHRhYmxlOiB0YWJsZSwgaWQ6IGlkLCBhY2w6IGFjbCB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBCYXRjaFJ1bm5lci5wcm90b3R5cGUubGluayA9IGZ1bmN0aW9uIChzb3VyY2VUYWJsZSwgc291cmNlSWQsIHRhcmdldFRhYmxlLCB0YXJnZXRJZCwgbGFiZWwpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUmVxdWVzdHMucHVzaCh7IG9wOiAnbGluaycsIHNvdXJjZVRhYmxlOiBzb3VyY2VUYWJsZSwgc291cmNlSWQ6IHNvdXJjZUlkLCB0YXJnZXRUYWJsZTogdGFyZ2V0VGFibGUsIHRhcmdldElkOiB0YXJnZXRJZCwgbGFiZWw6IGxhYmVsIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS5saW5rMiA9IGZ1bmN0aW9uIChzb3VyY2VUYWJsZSwgc291cmNlSWQsIGxhYmVsLCB0YXJnZXRJZCwgYnJhbmNoSWQpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUmVxdWVzdHMucHVzaCh7IG9wOiAnbGluaycsIHNvdXJjZVRhYmxlOiBzb3VyY2VUYWJsZSwgc291cmNlSWQ6IHNvdXJjZUlkLCB0YXJnZXRJZDogdGFyZ2V0SWQsIGxhYmVsOiBsYWJlbCwgYnJhbmNoSWQ6IGJyYW5jaElkIH0pO1xyXG4gICAgfTtcclxuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS51bmxpbmsgPSBmdW5jdGlvbiAoc291cmNlVGFibGUsIHNvdXJjZUlkLCB0YXJnZXRUYWJsZSwgdGFyZ2V0SWQsIGxhYmVsKSB7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ3VubGluaycsIHNvdXJjZVRhYmxlOiBzb3VyY2VUYWJsZSwgc291cmNlSWQ6IHNvdXJjZUlkLCB0YXJnZXRUYWJsZTogdGFyZ2V0VGFibGUsIHRhcmdldElkOiB0YXJnZXRJZCwgbGFiZWw6IGxhYmVsIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS51bmxpbmsyID0gZnVuY3Rpb24gKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgbGFiZWwsIHRhcmdldElkLCBicmFuY2hJZCkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICd1bmxpbmsnLCBzb3VyY2VUYWJsZTogc291cmNlVGFibGUsIHNvdXJjZUlkOiBzb3VyY2VJZCwgdGFyZ2V0SWQ6IHRhcmdldElkLCBsYWJlbDogbGFiZWwsIGJyYW5jaElkOiBicmFuY2hJZCB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBCYXRjaFJ1bm5lci5wcm90b3R5cGUudW5kb0xpbmsgPSBmdW5jdGlvbiAoc291cmNlVGFibGUsIHNvdXJjZUlkLCBsYWJlbCwgdGFyZ2V0SWQsIGJyYW5jaElkKSB7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ3VuZG8tbGluaycsIHNvdXJjZVRhYmxlOiBzb3VyY2VUYWJsZSwgc291cmNlSWQ6IHNvdXJjZUlkLCB0YXJnZXRJZDogdGFyZ2V0SWQsIGxhYmVsOiBsYWJlbCwgYnJhbmNoSWQ6IGJyYW5jaElkIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBCYXRjaFJ1bm5lcjtcclxufSgpKTtcclxuZXhwb3J0IHsgQmF0Y2hSdW5uZXIgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgUmVzdENsaWVudCB9IGZyb20gJy4vcmVzdGNsaWVudCc7XHJcbmltcG9ydCB7IGF2b2lkU2ltdWx0YW5vdXNDYWxscyB9IGZyb20gJy4vdXRpbHMnO1xyXG52YXIgS2VkQmVhcmVyUHJvdmlkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBLZWRCZWFyZXJQcm92aWRlcihpc29tb3JwaGljLCBzdG9yYWdlLCB0b2tlbklkLCBjbGllbnRJZCwgY2xpZW50U2VjcmV0LCB0b2tlblVybCwgdG9rZW5RdWVyeSkge1xyXG4gICAgICAgIHRoaXMuaXNvbW9ycGhpYyA9IGlzb21vcnBoaWM7XHJcbiAgICAgICAgdGhpcy5zdG9yYWdlID0gc3RvcmFnZTtcclxuICAgICAgICB0aGlzLnRva2VuSWQgPSB0b2tlbklkO1xyXG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSBjbGllbnRJZDtcclxuICAgICAgICB0aGlzLmNsaWVudFNlY3JldCA9IGNsaWVudFNlY3JldDtcclxuICAgICAgICB0aGlzLnRva2VuVXJsID0gdG9rZW5Vcmw7XHJcbiAgICAgICAgdGhpcy50b2tlblF1ZXJ5ID0gdG9rZW5RdWVyeTtcclxuICAgICAgICB0aGlzLnRva2VuSW5mbyA9IHsgdG9rZW46IG51bGwsIGV4cGlyZXM6IDAgfTtcclxuICAgICAgICB0aGlzLmNsaWVudCA9IG5ldyBSZXN0Q2xpZW50KGlzb21vcnBoaWMsIFwiXCIsIHtcclxuICAgICAgICAgICAgdXNlcm5hbWU6IHRoaXMuY2xpZW50SWQsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLmNsaWVudFNlY3JldFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZ2V0QmVhcmVyID0gYXZvaWRTaW11bHRhbm91c0NhbGxzKHRoaXMuZ2V0QmVhcmVyLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMucmVmcmVzaEJlYXJlciA9IGF2b2lkU2ltdWx0YW5vdXNDYWxscyh0aGlzLnJlZnJlc2hCZWFyZXIuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBLZWRCZWFyZXJQcm92aWRlci5wcm90b3R5cGUuZ2V0QmVhcmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX2EsIHRva2VuLCBleHBpcmVzLCBfYiwgZV8xO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gdGhpcy50b2tlbkluZm8sIHRva2VuID0gX2EudG9rZW4sIGV4cGlyZXMgPSBfYS5leHBpcmVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW4gJiYgZXhwaXJlcyA+PSBEYXRlLm5vdygpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMudG9rZW5JbmZvXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2MubGFiZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2MudHJ5cy5wdXNoKFsxLCA0LCAsIDZdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnN0b3JhZ2UubG9hZCh0aGlzLmNsaWVudElkICsgXCIvXCIgKyB0aGlzLnRva2VuSWQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnRva2VuSW5mbyA9IF9jLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudG9rZW5JbmZvLnRva2VuICYmIHRoaXMudG9rZW5JbmZvLmV4cGlyZXMgPj0gRGF0ZS5ub3coKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnRva2VuSW5mb107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVmcmVzaEJlYXJlcigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMudG9rZW5JbmZvXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVfMSA9IF9jLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZWZyZXNoQmVhcmVyKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy50b2tlbkluZm9dO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCZWFyZXJQcm92aWRlci5wcm90b3R5cGUucmVmcmVzaEJlYXJlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlcywgcmV0cmllcywgX2EsIF9iO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHJpZXMgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYy5sYWJlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXRyaWVzIDwgNikpIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJldHJpZXZpbmcgdG9rZW4gZm9yIFwiICsgdGhpcy50b2tlbklkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5jbGllbnQuZ2V0KHRoaXMudG9rZW5VcmwsIHRoaXMudG9rZW5RdWVyeSwgeyBjYWNoZTogJ3JlbG9hZCcgfSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyAhPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJHb3QgXCIgKyByZXMuc3RhdHVzICsgXCIgXCIgKyByZXMuc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy50ZXh0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudG9rZW5JbmZvID0gKF9iLnRva2VuID0gX2Muc2VudCgpLCBfYi5leHBpcmVzID0gRGF0ZS5ub3coKSArIDU5ICogNjAgKiAxMDAwLCBfYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiR290IHRva2VuIGZvciBcIiArIHRoaXMudG9rZW5JZCArIFwiOiBcIiArIEpTT04uc3RyaW5naWZ5KHRoaXMudG9rZW5JbmZvKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RvcmFnZS5zYXZlKHRoaXMuY2xpZW50SWQgKyBcIi9cIiArIHRoaXMudG9rZW5JZCwgdGhpcy50b2tlbkluZm8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy50b2tlbkluZm9dO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgKytyZXRyaWVzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6IHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byByZXRyaWV2ZSB0b2tlbiBmb3IgXCIgKyBKU09OLnN0cmluZ2lmeSh0aGlzLnRva2VuSWQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEtlZEJlYXJlclByb3ZpZGVyO1xyXG59KCkpO1xyXG5leHBvcnQgeyBLZWRCZWFyZXJQcm92aWRlciB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1rZWQtYmVhcmVyLXByb3ZpZGVyLmpzLm1hcCIsIi8qXHJcbmRlY2xhcmUgdmFyIEJ1ZmZlcjsgLy8gbm9kZSBidWlsdC1pblxyXG5cclxuXHJcbmZ1bmN0aW9uIGJhc2ljQXV0aEhlYWRlcih1c2VybmFtZSwgcGFzc3dvcmQpIHtcclxuICAgIHJldHVybiBcIkJhc2ljIFwiICsgbmV3IEJ1ZmZlcih1c2VybmFtZSArIFwiOlwiICsgcGFzc3dvcmQpLnRvU3RyaW5nKFwiYmFzZTY0XCIpO1xyXG59XHJcbiovXHJcbmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IGNyZWF0ZVVVSUQgfSBmcm9tIFwiLi91dGlsc1wiO1xyXG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSAnLi4vb2JzZXJ2YWJsZS9lbWl0dGVyJztcclxudmFyIFJlc3RDbGllbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBSZXN0Q2xpZW50KGlzb21vcnBoaWMsIGJhc2VVcmwsIG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLmlzb21vcnBoaWMgPSBpc29tb3JwaGljO1xyXG4gICAgICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICB0aGlzLm51bU91dHN0YW5kaW5nT3BlcmF0aW9ucyA9IDA7XHJcbiAgICAgICAgdGhpcy5fc3RhdHVzID0gbmV3IEVtaXR0ZXIodGhpcyk7XHJcbiAgICAgICAgdGhpcy5mZXRjaE9wdGlvbnMgPSB7IG1vZGU6ICdjb3JzJyB9O1xyXG4gICAgICAgIHRoaXMuYXV0aEhlYWRlciA9IG9wdGlvbnMuYmVhcmVyID9cclxuICAgICAgICAgICAgXCJCZWFyZXIgXCIgKyBvcHRpb25zLmJlYXJlciA6XHJcbiAgICAgICAgICAgIG9wdGlvbnMudXNlcm5hbWUgP1xyXG4gICAgICAgICAgICAgICAgXCJCYXNpYyBcIiArIGlzb21vcnBoaWMuYnRvYShvcHRpb25zLnVzZXJuYW1lICsgXCI6XCIgKyAob3B0aW9ucy5wYXNzd29yZCB8fCBcIlwiKSkgOlxyXG4gICAgICAgICAgICAgICAgbnVsbDtcclxuICAgICAgICB0aGlzLmJlYXJlclByb3ZpZGVyID0gb3B0aW9ucy5iZWFyZXJQcm92aWRlciB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlc3RDbGllbnQucHJvdG90eXBlLCBcInN0YXR1c1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGF0dXM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBSZXN0Q2xpZW50LnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uIChwYXRoLCBtZXRob2QsIGhlYWRlcnMsIHF1ZXJ5LCBmZXRjaE9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICsrdGhpcy5udW1PdXRzdGFuZGluZ09wZXJhdGlvbnM7XHJcbiAgICAgICAgdGhpcy5fc3RhdHVzLmRpc3BhdGNoKHRoaXMpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mZXRjaChwYXRoLCBtZXRob2QsIGhlYWRlcnMsIHF1ZXJ5LCBmZXRjaE9wdGlvbnMpXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgLS1fdGhpcy5udW1PdXRzdGFuZGluZ09wZXJhdGlvbnM7XHJcbiAgICAgICAgICAgIF90aGlzLl9zdGF0dXMuZGlzcGF0Y2goX3RoaXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgLS1fdGhpcy5udW1PdXRzdGFuZGluZ09wZXJhdGlvbnM7XHJcbiAgICAgICAgICAgIF90aGlzLl9zdGF0dXMuZGlzcGF0Y2goX3RoaXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBSZXN0Q2xpZW50LnByb3RvdHlwZS5fZmV0Y2ggPSBmdW5jdGlvbiAocGF0aCwgbWV0aG9kLCBoZWFkZXJzLCBxdWVyeSwgZmV0Y2hPcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBxdWVyeVN0ciwgX2EsIGF1dGhIZWFkZXIsIHRva2VuSW5mbywgYmVhcmVyUHJvdmlkZXIsIF9iLCBfYywgdXJsLCByZXMsIHd3d2F1dGgsIF9kO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2UpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2UubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZXRjaE9wdGlvbnMgJiYgZmV0Y2hPcHRpb25zLmNhY2hlID09PSAnbm8tY2FjaGUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXb3JrYXJvdW5kIGZvciBiYWNrLWJ1dHRvbiBub3QgcmVzcGVjdGluZyBjYWNoZSBjb250cm9sIGluIENocm9tZS9PcGVyYS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFwcGVuZCBhIHF1ZXJ5IHBhcmFtZXRlciB0byBmb3JjZSBhIGNhY2hlIGVudHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeSA9IHRzbGliXzEuX19hc3NpZ24oe30sIHF1ZXJ5LCB7IG5vY2FjaGU6IGNyZWF0ZVVVSUQoKSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeVN0ciA9IHF1ZXJ5ICYmIE9iamVjdC5rZXlzKHF1ZXJ5KS5maWx0ZXIoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gcXVlcnlba2V5XSAhPT0gdW5kZWZpbmVkOyB9KS5tYXAoZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChrZXkpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIj1cIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHF1ZXJ5W2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oJyYnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSB0aGlzLCBhdXRoSGVhZGVyID0gX2EuYXV0aEhlYWRlciwgdG9rZW5JbmZvID0gX2EudG9rZW5JbmZvLCBiZWFyZXJQcm92aWRlciA9IF9hLmJlYXJlclByb3ZpZGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISghYXV0aEhlYWRlciAmJiAhdG9rZW5JbmZvICYmIGJlYXJlclByb3ZpZGVyKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgYmVhcmVyUHJvdmlkZXIuZ2V0QmVhcmVyKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IudG9rZW5JbmZvID0gdG9rZW5JbmZvID0gX2Uuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZS5sYWJlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRva2VuSW5mbykgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHRva2VuSW5mby5leHBpcmVzIDwgRGF0ZS5ub3coKSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRva2VuIGV4cGlyZWQuIFJlZnJlc2ggaXQ6XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGJlYXJlclByb3ZpZGVyLnJlZnJlc2hCZWFyZXIoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYy50b2tlbkluZm8gPSB0b2tlbkluZm8gPSBfZS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9lLmxhYmVsID0gNDtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhIZWFkZXIgPSBcIkJlYXJlciBcIiArIHRva2VuSW5mby50b2tlbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2UubGFiZWwgPSA1O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW4gb25lIHdheSBvciBhbm90aGVyLCB3ZSd2ZSBjb25jbHVkZWQgYW4gQXV0aG9yaXphdGlvbiBoZWFkZXIgdG8gdXNlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXV0aEhlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycy5BdXRob3JpemF0aW9uID0gYXV0aEhlYWRlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSB0aGlzLmJhc2VVcmwgKyBwYXRoICsgKHF1ZXJ5U3RyID8gXCI/XCIgKyBxdWVyeVN0ciA6IFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmlzb21vcnBoaWMuZmV0Y2godXJsLCB0c2xpYl8xLl9fYXNzaWduKHt9LCB0aGlzLmZldGNoT3B0aW9ucywgeyBoZWFkZXJzOiBoZWFkZXJzLCBtZXRob2Q6IG1ldGhvZCB9LCBmZXRjaE9wdGlvbnMpKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBfZS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcy5zdGF0dXMgPT0gNDAxICYmIHRoaXMuYmVhcmVyUHJvdmlkZXIpKSByZXR1cm4gWzMgLypicmVhayovLCA5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3d3YXV0aCA9IHJlcy5oZWFkZXJzLmdldChcInd3dy1hdXRoZW50aWNhdGVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiR290IFwiICsgcmVzLnN0YXR1cyArIFwiIGZyb20gXCIgKyAodGhpcy5iYXNlVXJsICsgcGF0aCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh3d3dhdXRoICYmIC9CZWFyZXIvaS50ZXN0KHd3d2F1dGgpKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgOV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5iZWFyZXJQcm92aWRlci5yZWZyZXNoQmVhcmVyKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2QudG9rZW5JbmZvID0gX2Uuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLkF1dGhvcml6YXRpb24gPSBcIkJlYXJlciBcIiArIHRoaXMudG9rZW5JbmZvLnRva2VuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmlzb21vcnBoaWMuZmV0Y2godXJsLCB0c2xpYl8xLl9fYXNzaWduKHt9LCB0aGlzLmZldGNoT3B0aW9ucywgeyBoZWFkZXJzOiBoZWFkZXJzLCBtZXRob2Q6IG1ldGhvZCB9LCBmZXRjaE9wdGlvbnMpKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA4OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBfZS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9lLmxhYmVsID0gOTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDk6IHJldHVybiBbMiAvKnJldHVybiovLCByZXNdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBSZXN0Q2xpZW50LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAocGF0aCwgcXVlcnksIGZldGNoT3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoKHBhdGgsIFwiR0VUXCIsIHsgQWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb247IHRleHQvcGxhaW5cIiB9LCBxdWVyeSwgZmV0Y2hPcHRpb25zKTtcclxuICAgIH07XHJcbiAgICBSZXN0Q2xpZW50LnByb3RvdHlwZS5wb3N0ID0gZnVuY3Rpb24gKHBhdGgsIGRhdGEsIGZldGNoT3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZldGNoKHBhdGgsIFwiUE9TVFwiLCB7XHJcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICAgICAgICBcIkFjY2VwdFwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICAgIH0sIG51bGwsIHRzbGliXzEuX19hc3NpZ24oe30sIGZldGNoT3B0aW9ucywgeyBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSB9KSk7XHJcbiAgICB9O1xyXG4gICAgUmVzdENsaWVudC5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKHBhdGgsIHF1ZXJ5LCBib2R5LCBmZXRjaE9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mZXRjaChwYXRoLCBcIkRFTEVURVwiLCB7IEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uOyB0ZXh0L3BsYWluXCIgfSwgcXVlcnksIHRzbGliXzEuX19hc3NpZ24oe30sIGZldGNoT3B0aW9ucywgeyBib2R5OiBib2R5IH0pKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUmVzdENsaWVudDtcclxufSgpKTtcclxuZXhwb3J0IHsgUmVzdENsaWVudCB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXN0Y2xpZW50LmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVVVUlEKCkge1xyXG4gICAgLy8gRGVjZW50IHNvbHV0aW9uIGZyb20gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDUwMzQvaG93LXRvLWNyZWF0ZS1hLWd1aWQtdXVpZC1pbi1qYXZhc2NyaXB0XHJcbiAgICB2YXIgZCA9IERhdGUubm93KCk7XHJcbiAgICB2YXIgdXVpZCA9ICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICB2YXIgciA9IChkICsgTWF0aC5yYW5kb20oKSAqIDE2KSAlIDE2IHwgMDtcclxuICAgICAgICBkID0gTWF0aC5mbG9vcihkIC8gMTYpO1xyXG4gICAgICAgIHJldHVybiAoYyA9PT0gJ3gnID8gciA6IChyICYgMHg3IHwgMHg4KSkudG9TdHJpbmcoMTYpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdXVpZDtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gYXZvaWRTaW11bHRhbm91c0NhbGxzKG1ldGhvZCkge1xyXG4gICAgdmFyIG9uZ29pbmdQcm9taXNlID0gbnVsbDtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCFvbmdvaW5nUHJvbWlzZSkge1xyXG4gICAgICAgICAgICBvbmdvaW5nUHJvbWlzZSA9IG1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgb25nb2luZ1Byb21pc2UgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvbmdvaW5nUHJvbWlzZTtcclxuICAgIH07XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEdsb2JhbElkKHJlYWxtKSB7XHJcbiAgICB2YXIgcHJlZml4ID0gJ2VjOTZiM2JlLTQ1ZmMtNDFkMy1iNjllLSc7XHJcbiAgICB2YXIgcGFkID0gWyc1MCcsICcwOCcsICdlMScsICc0MCcsICdlNCcsICdlNyddO1xyXG4gICAgaWYgKHJlYWxtLmxlbmd0aCA+IDYpXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVG9vIGxvbmcgcmVhbG1cIik7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlYWxtLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgdmFyIGhleCA9IHJlYWxtLmNoYXJDb2RlQXQoaSkudG9TdHJpbmcoMTYpO1xyXG4gICAgICAgIHBhZFtpXSA9IGhleC5sZW5ndGggPT09IDIgP1xyXG4gICAgICAgICAgICBoZXggOlxyXG4gICAgICAgICAgICAnMCcgKyBoZXg7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcHJlZml4ICsgcGFkLmpvaW4oJycpO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlUHJlZGVzdGluYXRlZElkKGlucHV0KSB7XHJcbiAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZW5jb2RlciwgZGF0YSwgZGlnZXN0LCBfYSwgaTtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhID0gZW5jb2Rlci5lbmNvZGUoaW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9hID0gVWludDhBcnJheS5iaW5kO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGNyeXB0by5zdWJ0bGUuZGlnZXN0KCdTSEEtMjU2JywgZGF0YSldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGRpZ2VzdCA9IG5ldyAoX2EuYXBwbHkoVWludDhBcnJheSwgW3ZvaWQgMCwgX2Iuc2VudCgpXSkpKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuaWJibGUgPSBkaWdlc3RbaSsrXSAlIDE2IHwgMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3YXNoZWROaWJibGUgPSBjID09PSAneCcgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pYmJsZSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmliYmxlICYgMHg3IHwgMHg4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdhc2hlZE5pYmJsZS50b1N0cmluZygxNik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIHNpbXBsZURpZ2VzdChpbnB1dCkge1xyXG4gICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVuY29kZXIsIGlucHV0Qnl0ZXMsIGRpZ2VzdEJ5dGVzLCBfYTtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dEJ5dGVzID0gZW5jb2Rlci5lbmNvZGUoaW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9hID0gVWludDhBcnJheS5iaW5kO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGNyeXB0by5zdWJ0bGUuZGlnZXN0KCdTSEEtMjU2JywgaW5wdXRCeXRlcyldO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGRpZ2VzdEJ5dGVzID0gbmV3IChfYS5hcHBseShVaW50OEFycmF5LCBbdm9pZCAwLCBfYi5zZW50KCksIDAsIDE2XSkpKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGJ1ZjJoZXgoZGlnZXN0Qnl0ZXMpXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGJ1ZjJoZXgoYnVmZmVyKSB7XHJcbiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKGJ1ZmZlciwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuICgnMDAnICsgeC50b1N0cmluZygxNikpLnNsaWNlKC0yKTsgfSkuam9pbignJyk7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUFycmF5KGEsIG1hcHBlcikge1xyXG4gICAgdmFyIHJldHZhbCA9IGE7XHJcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGEubGVuZ3RoOyBpIDwgbDsgKytpKSB7XHJcbiAgICAgICAgdmFyIHQgPSBhW2ldO1xyXG4gICAgICAgIHZhciBtYXBwZWQgPSBtYXBwZXIodCk7XHJcbiAgICAgICAgaWYgKG1hcHBlZCAhPT0gdCkge1xyXG4gICAgICAgICAgICBpZiAocmV0dmFsID09PSBhKVxyXG4gICAgICAgICAgICAgICAgcmV0dmFsID0gYS5zbGljZSgpO1xyXG4gICAgICAgICAgICByZXR2YWxbaV0gPSBtYXBwZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJldHZhbDtcclxufVxyXG4vKlxyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQXJyYXk8VD4oYTogVFtdLCBtYXBwZXI6ICh0OiBUKSA9PiBUIHwgZmFsc2UpOiBUW10ge1xyXG4gIGxldCByZXR2YWwgPSBhO1xyXG4gIGxldCBqID0gMDtcclxuICBmb3IgKGxldCBpPTAsbD1hLmxlbmd0aDsgaTxsOyArK2ksICsraikge1xyXG4gICAgY29uc3QgdCA9IGFbaV07XHJcbiAgICBjb25zdCBtYXBwZWQgPSBtYXBwZXIodCk7XHJcbiAgICBpZiAobWFwcGVkID09PSBmYWxzZSkge1xyXG4gICAgICAvLyBNYXBwZXIgd2FudHMgdG8gZGVsZXRlIHRoaXMgZG9jLlxyXG4gICAgICBpZiAocmV0dmFsID09PSBhKSByZXR2YWwgPSBhLnNsaWNlKCk7XHJcbiAgICAgIHJldHZhbC5zcGxpY2UoaiwgMSk7XHJcbiAgICAgIC0tajsgLy8gY29tcGVuc2F0ZSBmb3IgKytqXHJcbiAgICB9IGVsc2UgaWYgKG1hcHBlZCAhPT0gdCkge1xyXG4gICAgICBpZiAocmV0dmFsID09PSBhKSByZXR2YWwgPSBhLnNsaWNlKCk7XHJcbiAgICAgIHJldHZhbFtqXSA9IG1hcHBlZDtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHJldHZhbDtcclxufVxyXG4qLyBcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMuanMubWFwIiwiaW1wb3J0IG1pZ3JhdGUgZnJvbSAnLi9taWdyYXRlJztcclxuZXhwb3J0IHZhciBLZWRNb2RlbE1pZ3JhdG9yTWl4aW4gPSBmdW5jdGlvbiAoY2xpZW50KSB7XHJcbiAgICBpZiAoY2xpZW50Ll9fbWlncmF0b3JfbWl4ZWRfaW4pXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgY2xpZW50Ll9fbWlncmF0b3JfbWl4ZWRfaW4gPSB0cnVlO1xyXG4gICAgdmFyIGdldCA9IGNsaWVudC5nZXQ7XHJcbiAgICB2YXIgbGlzdCA9IGNsaWVudC5saXN0O1xyXG4gICAgY2xpZW50LmdldCA9IGZ1bmN0aW9uICh0YWJsZSwgaWQsIG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgaW5jbHVkZSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5pbmNsdWRlO1xyXG4gICAgICAgIHJldHVybiBnZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgbWlncmF0ZShyZXN1bHQsIHRhYmxlLCBpbmNsdWRlICYmIGluY2x1ZGUudG9TdHJpbmcoKS5zcGxpdCgnLCcpKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBjbGllbnQubGlzdCA9IGZ1bmN0aW9uICh0YWJsZSwgb3B0aW9ucykge1xyXG4gICAgICAgIHZhciBpbmNsdWRlID0gb3B0aW9ucyAmJiBvcHRpb25zLmluY2x1ZGU7XHJcbiAgICAgICAgcmV0dXJuIGxpc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgcmVzdWx0LmZvckVhY2goZnVuY3Rpb24gKGRvYykgeyByZXR1cm4gbWlncmF0ZShkb2MsIHRhYmxlLCBpbmNsdWRlICYmIGluY2x1ZGUudG9TdHJpbmcoKS5zcGxpdCgnLCcpKTsgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGNsaWVudDtcclxufTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiaW1wb3J0IG1pZ3JhdGVUYXNrIGZyb20gJy4vbWlncmF0ZS10YXNrJztcclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWlncmF0ZUNvdXJzZShjb3Vyc2UsIGdyYXBocykge1xyXG4gICAgaWYgKCFjb3Vyc2UubW9kdWxlcylcclxuICAgICAgICBjb3Vyc2UubW9kdWxlcyA9IFtdO1xyXG4gICAgY291cnNlLm1vZHVsZXMuZm9yRWFjaChmdW5jdGlvbiAobW9kdWxlKSB7XHJcbiAgICAgICAgaWYgKCFtb2R1bGUucmVzb3VyY2VzKSB7XHJcbiAgICAgICAgICAgIG1vZHVsZS5yZXNvdXJjZXMgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFtb2R1bGUudGFza0lkcykge1xyXG4gICAgICAgICAgICBtb2R1bGUudGFza0lkcyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgaWYgKCFjb3Vyc2UucmVzcG9uc2libGVUZWFjaGVycykge1xyXG4gICAgICAgIGNvdXJzZS5yZXNwb25zaWJsZVRlYWNoZXJzID0gW107XHJcbiAgICB9XHJcbiAgICAvLyBFYXJsaWVyIHdyb25nIHNwZWxsaW5nIG9mIHJlc291cmNlc1xyXG4gICAgaWYgKCdyZXNvdXJzZXMnIGluIGNvdXJzZSAmJiAhKCdyZXNvdXJjZXMnIGluIGNvdXJzZSkpIHtcclxuICAgICAgICBjb3Vyc2UucmVzb3VyY2VzID0gY291cnNlLnJlc291cnNlcztcclxuICAgICAgICBkZWxldGUgY291cnNlLnJlc291cnNlcztcclxuICAgIH1cclxuICAgIGlmICghY291cnNlLnJlc291cmNlcykge1xyXG4gICAgICAgIGNvdXJzZS5yZXNvdXJjZXMgPSBbXTtcclxuICAgIH1cclxuICAgIGlmIChncmFwaHMpIHtcclxuICAgICAgICBncmFwaHMuZm9yRWFjaChmdW5jdGlvbiAobGFiZWwpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChsYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAndGFza3MnOlxyXG4gICAgICAgICAgICAgICAgICAgIGNvdXJzZS50YXNrcy5mb3JFYWNoKGZ1bmN0aW9uICh0YXNrKSB7IHJldHVybiBtaWdyYXRlVGFzayh0YXNrKTsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1taWdyYXRlLWNvdXJzZS5qcy5tYXAiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtaWdyYXRlVGFzayh0YXNrKSB7XHJcbiAgICBpZiAoIXRhc2sucmVzb3VyY2VzKVxyXG4gICAgICAgIHRhc2sucmVzb3VyY2VzID0gW107XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWlncmF0ZS10YXNrLmpzLm1hcCIsImltcG9ydCBtaWdyYXRlQ291cnNlIGZyb20gJy4vbWlncmF0ZS1jb3Vyc2UnO1xyXG5pbXBvcnQgbWlncmF0ZVRhc2sgZnJvbSAnLi9taWdyYXRlLXRhc2snO1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtaWdyYXRlKGRvYywgdGFibGUsIGdyYXBocykge1xyXG4gICAgc3dpdGNoICh0YWJsZSkge1xyXG4gICAgICAgIGNhc2UgXCJjb3Vyc2VzXCI6XHJcbiAgICAgICAgICAgIG1pZ3JhdGVDb3Vyc2UoZG9jLCBncmFwaHMpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwidGFza3NcIjpcclxuICAgICAgICAgICAgbWlncmF0ZVRhc2soZG9jKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWlncmF0ZS5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSBcIi4vb2JzZXJ2YWJsZVwiO1xyXG5pbXBvcnQgeyBpbml0TWFwTWV0aG9kIH0gZnJvbSBcIi4vbWFwXCI7XHJcbmltcG9ydCB7IFZhbHVlIH0gZnJvbSBcIi4vdmFsdWVcIjtcclxuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gXCIuL2VtaXR0ZXJcIjtcclxudmFyIENvbGxlY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhDb2xsZWN0aW9uLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQ29sbGVjdGlvbihzdWJzY3JpYmUpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgc3Vic2NyaWJlKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuX21hcCA9IGZ1bmN0aW9uIChtYXBwZXIpIHtcclxuICAgICAgICB0aHJvdyBcIm1peGVkaW5cIjtcclxuICAgIH07XHJcbiAgICBDb2xsZWN0aW9uLmZyb20gPSBmdW5jdGlvbiAoeCkge1xyXG4gICAgICAgIGlmICh4LnN1YnNjcmliZSlcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uKGZ1bmN0aW9uIChzKSB7IHJldHVybiB4LnN1YnNjcmliZShzKTsgfSk7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoeCkpIHtcclxuICAgICAgICAgICAgdmFyIGVtaXR0ZXJfMSA9IG5ldyBFbWl0dGVyKHgpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb24oZnVuY3Rpb24gKHMpIHsgcmV0dXJuIGVtaXR0ZXJfMS5zdWJzY3JpYmUocyk7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPYnNlcnZhYmxlQ29sbGVjdGlvbi5mcm9tKCkgY2FuIG9ubHkgdGFrZSBhcnJheXMgb3Igb2JzZXJ2YWJsZXNcIik7XHJcbiAgICB9O1xyXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUubWFwID0gZnVuY3Rpb24gKG1hcHBlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tYXAoZnVuY3Rpb24gKGl0ZW1zKSB7IHJldHVybiBpdGVtcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIG1hcHBlcihpdGVtKTsgfSk7IH0pO1xyXG4gICAgfTtcclxuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmZsYXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcChmdW5jdGlvbiAoaXRlbXMpIHsgcmV0dXJuIFtdLmNvbmNhdC5hcHBseShbXSwgaXRlbXMpOyB9KTtcclxuICAgIH07XHJcbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5maWx0ZXIgPSBmdW5jdGlvbiAoZmlsdGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcChmdW5jdGlvbiAoaXRlbXMpIHsgcmV0dXJuIGl0ZW1zLmZpbHRlcihmaWx0ZXIpOyB9KTtcclxuICAgIH07XHJcbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5jb25jYXQgPSBmdW5jdGlvbiAob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gQ29sbGVjdGlvbi5mcm9tKHRoaXMudG9WYWx1ZSgpLmNvbWJpbmVMYXRlc3Qob3RoZXIpLm1hcChmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgdmFyIG1lID0gX2FbMF0sIG90aGVyID0gX2FbMV07XHJcbiAgICAgICAgICAgIHJldHVybiBtZS5jb25jYXQob3RoZXIpO1xyXG4gICAgICAgIH0pKTtcclxuICAgIH07XHJcbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5vcmRlckJ5ID0gZnVuY3Rpb24gKHByb3ApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50b1ZhbHVlKCkubWFwKGZ1bmN0aW9uIChhcnJheSkgeyByZXR1cm4gYXJyYXkuc2xpY2UoKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIHZhciBhUHJvcCA9IGEgJiYgYVtwcm9wXTtcclxuICAgICAgICAgICAgdmFyIGJQcm9wID0gYiAmJiBiW3Byb3BdO1xyXG4gICAgICAgICAgICByZXR1cm4gYVByb3AgPiBiUHJvcCA/IDEgOiBhUHJvcCA8IGJQcm9wID8gLTEgOiAwO1xyXG4gICAgICAgIH0pOyB9KS50b0NvbGxlY3Rpb24oZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHg7IH0pO1xyXG4gICAgfTtcclxuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnRvVmFsdWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFZhbHVlKGZ1bmN0aW9uIChzKSB7IHJldHVybiBfdGhpcy5zdWJzY3JpYmUocyk7IH0pO1xyXG4gICAgfTtcclxuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmdyb3VwQnkgPSBmdW5jdGlvbiAocHJvcCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvVmFsdWUoKS5tYXAoZnVuY3Rpb24gKGl0ZW1zKSB7XHJcbiAgICAgICAgICAgIHZhciBydiA9IHt9O1xyXG4gICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGlzdCA9IHJ2W2l0ZW1bcHJvcF1dIHx8IChydltpdGVtW3Byb3BdXSA9IFtdKTtcclxuICAgICAgICAgICAgICAgIGxpc3QucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBydjtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5maXJzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50b1ZhbHVlKCkubWFwKGZ1bmN0aW9uIChhcnIpIHsgcmV0dXJuIGFyclswXTsgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvbGxlY3Rpb247XHJcbn0oT2JzZXJ2YWJsZSkpO1xyXG5leHBvcnQgeyBDb2xsZWN0aW9uIH07XHJcbkNvbGxlY3Rpb24ucHJvdG90eXBlLl9tYXAgPSBpbml0TWFwTWV0aG9kKENvbGxlY3Rpb24pO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb2xsZWN0aW9uLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IFZhbHVlIH0gZnJvbSBcIi4vdmFsdWVcIjtcclxudmFyIEVtaXR0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhFbWl0dGVyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRW1pdHRlcihpbml0aWFsVmFsdWUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlOiBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5zdWJzY3JpYmVycyA9IF90aGlzLnN1YnNjcmliZXJzLmZpbHRlcihmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IF9hWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzICE9PSBvYnNlcnZlcjtcclxuICAgICAgICAgICAgICAgIH0pOyB9LFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBfdGhpcy5zdWJzY3JpYmVycy5wdXNoKFtvYnNlcnZlciwgc3Vic2NyaXB0aW9uXSk7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5lcnJvcilcclxuICAgICAgICAgICAgICAgIG9ic2VydmVyKG51bGwsIF90aGlzLmVycm9yLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlcihfdGhpcy52YWx1ZSwgdW5kZWZpbmVkLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xyXG4gICAgICAgIH0pIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuc3Vic2NyaWJlcnMgPSBbXTtcclxuICAgICAgICBfdGhpcy52YWx1ZSA9IGluaXRpYWxWYWx1ZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBFbWl0dGVyLnByb3RvdHlwZS5kaXNwYXRjaCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLmVycm9yID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoKCk7XHJcbiAgICB9O1xyXG4gICAgRW1pdHRlci5wcm90b3R5cGUuZGlzcGF0Y2hFcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcclxuICAgICAgICB0aGlzLl9kaXNwYXRjaCgpO1xyXG4gICAgfTtcclxuICAgIEVtaXR0ZXIucHJvdG90eXBlLl9kaXNwYXRjaCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaWJlcnMuZm9yRWFjaChmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgdmFyIG9ic2VydmVyID0gX2FbMF0sIHN1YnNjcmlwdGlvbiA9IF9hWzFdO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIoX3RoaXMudmFsdWUsIF90aGlzLmVycm9yLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIG9ic2VydmVyKG51bGwsIGVyciwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBFbWl0dGVyO1xyXG59KFZhbHVlKSk7XHJcbmV4cG9ydCB7IEVtaXR0ZXIgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW1pdHRlci5qcy5tYXAiLCJ2YXIgc3RhY2sgPSBbXTtcclxudmFyIGN1cnJlbnRGaWJlciA9IG51bGw7XHJcbnZhciBwcm92aWRlcnMgPSBbZnVuY3Rpb24gKCkgeyByZXR1cm4gY3VycmVudEZpYmVyOyB9XTtcclxuZnVuY3Rpb24gcHVzaEZpYmVyKGZpYmVyKSB7XHJcbiAgICBzdGFjay5wdXNoKGN1cnJlbnRGaWJlcik7XHJcbiAgICBjdXJyZW50RmliZXIgPSBmaWJlcjtcclxufVxyXG5mdW5jdGlvbiBwb3BGaWJlcigpIHtcclxuICAgIGN1cnJlbnRGaWJlciA9IHN0YWNrLnBvcCgpO1xyXG59XHJcbmV4cG9ydCB2YXIgRmliZXJDb250ZXh0ID0ge1xyXG4gICAgZ2V0IGN1cnJlbnQoKSB7IHJldHVybiBjdXJyZW50RmliZXI7IH0sXHJcbiAgICAvKnJ1bjogZnVuY3Rpb24gcmVydW48Uj4oZmliZXI6IEZpYmVyLCBmbjogKCk9PlIpOiBSIHwgUHJvbWlzZTxSPiB7XHJcbiAgICAgIHB1c2hGaWJlcihmaWJlcik7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmbigpKTtcclxuICAgICAgfSBjYXRjaCAocCkge1xyXG4gICAgICAgIGlmIChwICYmIHR5cGVvZiBwLnRoZW4gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgIHJldHVybiBwLnRoZW4oKCk9PnJlcnVuKGZpYmVyLCBmbikpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgIHBvcEZpYmVyKCk7XHJcbiAgICAgIH1cclxuICAgIH0sKi9cclxuICAgIGFkZFByb3ZpZGVyOiBmdW5jdGlvbiAoZ2V0Q3VycmVudEZpYmVyKSB7XHJcbiAgICAgICAgcHJvdmlkZXJzLnB1c2goZ2V0Q3VycmVudEZpYmVyKTtcclxuICAgICAgICBzZXRDdXJyZW50R2V0dGVyRnJvbVByb3ZpZGVycygpO1xyXG4gICAgfSxcclxuICAgIHJlbW92ZVByb3ZpZGVyOiBmdW5jdGlvbiAoZ2V0Q3VycmVudEZpYmVyKSB7XHJcbiAgICAgICAgcHJvdmlkZXJzID0gcHJvdmlkZXJzLmZpbHRlcihmdW5jdGlvbiAocCkgeyByZXR1cm4gcCAhPT0gZ2V0Q3VycmVudEZpYmVyOyB9KTtcclxuICAgICAgICBzZXRDdXJyZW50R2V0dGVyRnJvbVByb3ZpZGVycygpO1xyXG4gICAgfVxyXG59O1xyXG5mdW5jdGlvbiBzZXRDdXJyZW50R2V0dGVyRnJvbVByb3ZpZGVycygpIHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGaWJlckNvbnRleHQsIFwiY3VycmVudFwiLCB7XHJcbiAgICAgICAgZ2V0OiBwcm92aWRlcnMucmVkdWNlKGZ1bmN0aW9uIChwLCBjKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHJldHVybiBwKCkgfHwgYygpOyB9OyB9KSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IEVycm9yKFwiVXNlIEZpYmVyQ29udGV4dC5wdXNoKCkgdG8gY2hhbmdlIGN1cnJlbnQgZmliZXJcIik7IH1cclxuICAgIH0pO1xyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZpYmVyLWNvbnRleHQuanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIGluaXRNYXBNZXRob2QoY3Rvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtYXBwZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgY3RvcihmdW5jdGlvbiAob2JzZXJ2ZXIpIHsgcmV0dXJuIF90aGlzLnN1YnNjcmliZShmdW5jdGlvbiAodmFsdWUsIGVycm9yLCBzdWJzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyb3IsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIobWFwcGVyKHZhbHVlKSwgZXJyb3IsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pOyB9KTtcclxuICAgIH07XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFwLmpzLm1hcCIsInZhciBPYnNlcnZhYmxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgLy9zdGF0aWMgZ2V0IFtTeW1ib2wuc3BlY2llc10oKSB7IHJldHVybiB0aGlzOyB9XHJcbiAgICBmdW5jdGlvbiBPYnNlcnZhYmxlKF9zdWJzY3JpYmUpIHtcclxuICAgICAgICB0aGlzLl9zdWJzY3JpYmUgPSBfc3Vic2NyaWJlO1xyXG4gICAgfVxyXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZShmdW5jdGlvbiAoaXRlbXMsIGVycm9yLCBzdWJzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIoaXRlbXMsIGVycm9yLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyKG51bGwsIGVyciwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBvYnNlcnZlcihudWxsLCBlcnJvciwgeyB1bnN1YnNjcmliZTogZnVuY3Rpb24gKCkgeyB9IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gT2JzZXJ2YWJsZTtcclxufSgpKTtcclxuZXhwb3J0IHsgT2JzZXJ2YWJsZSB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYnNlcnZhYmxlLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tIFwiLi9vYnNlcnZhYmxlXCI7XHJcbmltcG9ydCB7IGluaXRNYXBNZXRob2QgfSBmcm9tIFwiLi9tYXBcIjtcclxuaW1wb3J0IHsgQ29sbGVjdGlvbiB9IGZyb20gXCIuL2NvbGxlY3Rpb25cIjtcclxuaW1wb3J0IHsgRmliZXJDb250ZXh0IH0gZnJvbSAnLi9maWJlci1jb250ZXh0JztcclxudmFyIFZhbHVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoVmFsdWUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBWYWx1ZShzdWJzY3JpYmUpIHtcclxuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgc3Vic2NyaWJlKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgVmFsdWUuZnJvbSA9IGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgaWYgKHguc3Vic2NyaWJlKVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFZhbHVlKGZ1bmN0aW9uIChzKSB7IHJldHVybiB4LnN1YnNjcmliZShzKTsgfSk7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVmFsdWUuZnJvbSgpIGNhbiBvbmx5IHRha2Ugb2JzZXJ2YWJsZXNcIik7XHJcbiAgICB9O1xyXG4gICAgVmFsdWUucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHJlc29sdmVkID0gZmFsc2UsIHJlc3VsdCwgZXJyLCBub3RpZnk7XHJcbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHRoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWx1ZSwgZXJyb3IsIHN1YnNjaXB0aW9uKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XHJcbiAgICAgICAgICAgIGVyciA9IGVycm9yO1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IgJiYgbm90aWZ5KVxyXG4gICAgICAgICAgICAgICAgbm90aWZ5KG51bGwsIGVycm9yLCBzdWJzY2lwdGlvbik7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG5vdGlmeSlcclxuICAgICAgICAgICAgICAgIG5vdGlmeSh2YWx1ZSwgbnVsbCwgc3Vic2NpcHRpb24pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChyZXNvbHZlZCkge1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudEZpYmVyID0gRmliZXJDb250ZXh0LmN1cnJlbnQ7XHJcbiAgICAgICAgICAgIGlmICghY3VycmVudEZpYmVyKSB7XHJcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgRmliZXIgQ29udGV4dFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IGN1cnJlbnRGaWJlci5zdWJzY3JpcHRpb25zLCBvYnNlcnZlciA9IGN1cnJlbnRGaWJlci5vYnNlcnZlcjtcclxuICAgICAgICAgICAgc3Vic2NyaXB0aW9ucy5wdXNoKHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIG5vdGlmeSA9IG9ic2VydmVyO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIG5vdGlmeSA9IGZ1bmN0aW9uICh2YWx1ZSwgZXJyb3IsIHN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBWYWx1ZS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIF90aGlzLnN1YnNjcmliZShmdW5jdGlvbiAodmFsdWUsIGVycm9yLCBzdWJzY2lwdGlvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBzdWJzY2lwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBWYWx1ZS5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24gKGZuKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFZhbHVlKGZ1bmN0aW9uIChvYnNlcnZlcikgeyByZXR1cm4gX3RoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWx1ZSwgZXJyb3IsIHN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlcihudWxsLCBlcnJvciwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgZWxzZSBpZiAoZm4odmFsdWUpKVxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIodmFsdWUsIGVycm9yLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgIH0pOyB9KTtcclxuICAgIH07XHJcbiAgICBWYWx1ZS5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKHByZWZpeCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoeCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwcmVmaXgsIHgpO1xyXG4gICAgICAgICAgICByZXR1cm4geDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBWYWx1ZS5wcm90b3R5cGUudG9Db2xsZWN0aW9uID0gZnVuY3Rpb24gKG1hcHBlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uKGZ1bmN0aW9uIChzKSB7IHJldHVybiBfdGhpcy5tYXAobWFwcGVyKS5zdWJzY3JpYmUocyk7IH0pO1xyXG4gICAgfTtcclxuICAgIFZhbHVlLnByb3RvdHlwZS5jb21iaW5lTGF0ZXN0ID0gZnVuY3Rpb24gKG90aGVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFZhbHVlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gW251bGwsIG51bGxdO1xyXG4gICAgICAgICAgICB2YXIgbXlTdWJzY3JpcHRpb24sIG90aGVyU3Vic2NyaXB0aW9uO1xyXG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBteVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG90aGVyU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIG15U3Vic2NyaXB0aW9uID0gX3RoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uIChpdGVtcywgZXJyb3IsIHMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHMudW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlcihudWxsLCBlcnJvciwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhbHVlc1swXSA9IGl0ZW1zO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlc1sxXSAhPT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlcih2YWx1ZXMsIG51bGwsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBvdGhlclN1YnNjcmlwdGlvbiA9IG90aGVyLnN1YnNjcmliZShmdW5jdGlvbiAodmFsdWUsIGVycm9yLCBzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBzLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyb3IsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YWx1ZXNbMV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZXNbMF0gIT09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIodmFsdWVzLCBudWxsLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBWYWx1ZS5wcm90b3R5cGUuc3dpdGNoTWFwID0gZnVuY3Rpb24gKG1hcHBlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICAgICAgdmFyIG1hcHBlZFN1YnNjcmlwdGlvbiA9IG51bGw7XHJcbiAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBudWxsO1xyXG4gICAgICAgICAgICB2YXIgcmV0dXJuZWRTdWJzY3JpcHRpb24gPSB7XHJcbiAgICAgICAgICAgICAgICB1bnN1YnNjcmliZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXBwZWRTdWJzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwcGVkU3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBlZFN1YnNjcmlwdGlvbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBfdGhpcy5zdWJzY3JpYmUoZnVuY3Rpb24gKGl0ZW0sIGVycm9yLCBzKSB7XHJcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBzO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hcHBlZFN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcHBlZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcHBlZFN1YnNjcmlwdGlvbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyb3IsIHJldHVybmVkU3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYnNlcnZhYmxlT3JWYWx1ZSA9IG1hcHBlcihpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9ic2VydmFibGVPclZhbHVlICYmIHR5cGVvZiBvYnNlcnZhYmxlT3JWYWx1ZS5zdWJzY3JpYmUgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBlZFN1YnNjcmlwdGlvbiA9IG9ic2VydmFibGVPclZhbHVlLnN1YnNjcmliZShmdW5jdGlvbiAodmFsdWUsIGVycm9yLCBzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwcGVkU3Vic2NyaXB0aW9uID0gcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlcih2YWx1ZSwgZXJyb3IsIHJldHVybmVkU3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIob2JzZXJ2YWJsZU9yVmFsdWUsIG51bGwsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyKG51bGwsIGVycm9yLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXR1cm5lZFN1YnNjcmlwdGlvbjtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVmFsdWU7XHJcbn0oT2JzZXJ2YWJsZSkpO1xyXG5leHBvcnQgeyBWYWx1ZSB9O1xyXG5WYWx1ZS5wcm90b3R5cGUubWFwID0gaW5pdE1hcE1ldGhvZChWYWx1ZSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXZhbHVlLmpzLm1hcCIsInZhciBtYXAgPSB7XG5cdFwiLi9lbi1TR1wiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4tU0cuanNcIixcblx0XCIuL2VuLVNHLmpzXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1TRy5qc1wiLFxuXHRcIi4vZW4tYXVcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLWF1LmpzXCIsXG5cdFwiLi9lbi1hdS5qc1wiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4tYXUuanNcIixcblx0XCIuL2VuLWNhXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1jYS5qc1wiLFxuXHRcIi4vZW4tY2EuanNcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLWNhLmpzXCIsXG5cdFwiLi9lbi1nYlwiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4tZ2IuanNcIixcblx0XCIuL2VuLWdiLmpzXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1nYi5qc1wiLFxuXHRcIi4vZW4taWVcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLWllLmpzXCIsXG5cdFwiLi9lbi1pZS5qc1wiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4taWUuanNcIixcblx0XCIuL2VuLWlsXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1pbC5qc1wiLFxuXHRcIi4vZW4taWwuanNcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLWlsLmpzXCIsXG5cdFwiLi9lbi1uelwiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4tbnouanNcIixcblx0XCIuL2VuLW56LmpzXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1uei5qc1wiLFxuXHRcIi4vc3ZcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL3N2LmpzXCIsXG5cdFwiLi9zdi5qc1wiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvc3YuanNcIlxufTtcblxuXG5mdW5jdGlvbiB3ZWJwYWNrQ29udGV4dChyZXEpIHtcblx0dmFyIGlkID0gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSk7XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKGlkKTtcbn1cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpIHtcblx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhtYXAsIHJlcSkpIHtcblx0XHR2YXIgZSA9IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIgKyByZXEgKyBcIidcIik7XG5cdFx0ZS5jb2RlID0gJ01PRFVMRV9OT1RfRk9VTkQnO1xuXHRcdHRocm93IGU7XG5cdH1cblx0cmV0dXJuIG1hcFtyZXFdO1xufVxud2VicGFja0NvbnRleHQua2V5cyA9IGZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0S2V5cygpIHtcblx0cmV0dXJuIE9iamVjdC5rZXlzKG1hcCk7XG59O1xud2VicGFja0NvbnRleHQucmVzb2x2ZSA9IHdlYnBhY2tDb250ZXh0UmVzb2x2ZTtcbm1vZHVsZS5leHBvcnRzID0gd2VicGFja0NvbnRleHQ7XG53ZWJwYWNrQ29udGV4dC5pZCA9IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZSBzeW5jIHJlY3Vyc2l2ZSBzdnxlblwiOyIsImltcG9ydCB7IFVzZXIgfSBmcm9tIFwiLi4vY29udHJhY3RzL2tlZC1tb2RlbHNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldFVzZXJDbGFpbXMgKHVzZXI6IFVzZXIpIHtcclxuICByZXR1cm4gW3tcclxuICAgIHR5cGU6IFwiZW1haWxcIixcclxuICAgIHZhbHVlOiB1c2VyLm1haWxcclxuICB9LHtcclxuICAgIHR5cGU6IFwic2Nob29sXCIsXHJcbiAgICB2YWx1ZTogdXNlci5zY2hvb2xcclxuICB9XS5jb25jYXQodXNlci5yb2xlcy5tYXAocm9sZSA9PiAoe1xyXG4gICAgdHlwZTogXCJyb2xlXCIsXHJcbiAgICB2YWx1ZTogcm9sZVxyXG4gIH0pKSkuY29uY2F0KHVzZXIucm9sZXMubWFwKHJvbGUgPT4gKHtcclxuICAgIHR5cGU6IFwic2Nob29sUm9sZVwiLFxyXG4gICAgdmFsdWU6IHVzZXIuc2Nob29sICsgXCIvXCIgKyByb2xlXHJcbiAgfSkpKTtcclxufVxyXG4iLCJpbXBvcnQgeyBBY2Nlc3NDbGFpbSwgRG9jdW1lbnRBY2Nlc3MsIGhhc0FjY2VzcyBhcyBfaGFzQWNjZXNzLCBBY2Nlc3NSaWdodCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgRG9jdW1lbnQgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCBnZXRVc2VyQ2xhaW1zIGZyb20gJy4vZ2V0LXVzZXItY2xhaW1zJztcclxuaW1wb3J0IHsgcGFyc2VRdWVyeVN0cmluZywgZ2VuZXJhdGVRdWVyeVN0cmluZyB9IGZyb20gXCIuLi91dGlscy9xdWVyeS1zdHJpbmdcIjtcclxuaW1wb3J0IHsgVXNlciB9IGZyb20gJy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcclxuZXhwb3J0IHsgZ2V0VXNlckNsYWltcyB9O1xyXG5cclxuZXhwb3J0IGNvbnN0IElNUEVSU09OQVRJT05fUVVFUllfUEFSQU1TID0gW1xyXG4gIFwidXNlclwiLFxyXG4gIFwicm9sZVwiLFxyXG4gIFwic2Nob29sXCIsXHJcbiAgXCJkZWJ1Z1wiLFxyXG4gIFwidGVzdFZlcnNpb25cIixcclxuICBcInRlc3R2ZXJzaW9uXCIsXHJcbiAgXCJmZWF0dXJlc1wiLFxyXG4gIFwic2Nob29sVHlwZVwiLFxyXG4gIFwic2Nob29sdHlwZVwiXTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYXNBY2Nlc3ModXNlcjogVXNlciwgZG9jOiBEb2N1bWVudCwgcmVxdWVzdGVkUmlnaHQ6IEFjY2Vzc1JpZ2h0KSB7XHJcbiAgdmFyIGNsYWltcyA9IGdldFVzZXJDbGFpbXModXNlcik7XHJcbiAgaWYgKHJlcXVlc3RlZFJpZ2h0ICE9PSAnUicgJiYgdXNlci50dXRvckZvcikge1xyXG4gICAgY2xhaW1zID0gY2xhaW1zLmZpbHRlcihjbGFpbSA9PiBjbGFpbS50eXBlICE9PSAnZW1haWwnKTtcclxuICB9XHJcbiAgdmFyIHJlc3VsdCA9IF9oYXNBY2Nlc3MoRG9jdW1lbnRBY2Nlc3MuZnJvbVN0cmluZ0FycmF5KGRvYy5hY2wgfHwgW10pLCBjbGFpbXMsIHJlcXVlc3RlZFJpZ2h0KTtcclxuICAvL2NvbnNvbGUubG9nKGBIYXMgJHtyZXF1ZXN0ZWRSaWdodH0gYWNjZXNzIHRvICR7ZG9jLm5hbWV9LyR7ZG9jLmlkfTogJHtyZXN1bHR9YCk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhc1JlYWRBY2Nlc3ModXNlcjogVXNlciwgZG9jOiBEb2N1bWVudCkge1xyXG4gIHJldHVybiBoYXNBY2Nlc3ModXNlciwgZG9jLCAnUicpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGFzV3JpdGVBY2Nlc3ModXNlcjogVXNlciwgZG9jOiBEb2N1bWVudCkge1xyXG4gIHJldHVybiBoYXNBY2Nlc3ModXNlciwgZG9jLCAnVycpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGFzU2hhcmVBY2Nlc3ModXNlcjogVXNlciwgZG9jOiBEb2N1bWVudCkge1xyXG4gIHJldHVybiBoYXNBY2Nlc3ModXNlciwgZG9jLCAnUycpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNUZWFjaGVyQXRTY2hvb2wodXNlcjogVXNlciwgc2Nob29sOiBzdHJpbmcpIHtcclxuICBjb25zdCBpc1RlYWNoZXIgPSB1c2VyLnJvbGVzLnNvbWUocm9sZSA9PiByb2xlID09PSAnRU1QTE9ZRUUnIHx8IHJvbGUgPT09ICdBRE1JTicpO1xyXG4gIGNvbnN0IGJlbG9uZ3NUb1NjaG9vbCA9IChzY2hvb2x8fFwiXCIpLnRvTG93ZXJDYXNlKCkgPT09IHVzZXIuc2Nob29sLnRvTG93ZXJDYXNlKCk7XHJcbiAgcmV0dXJuIChpc1RlYWNoZXIgJiYgYmVsb25nc1RvU2Nob29sKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzQWRtaW5PclRlYWNoZXJBdFNjaG9vbCh1c2VyOiBVc2VyLCBzY2hvb2w6IHN0cmluZykge1xyXG4gIHJldHVybiB1c2VyLnJvbGVzLmluY2x1ZGVzKFwiQURNSU5cIikgfHwgaXNUZWFjaGVyQXRTY2hvb2wodXNlciwgc2Nob29sKTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGltcGVyc29uYXRpb25FbnYgPSB7XHJcbiAgYWN0QXMgKG9wdGlvbnM6IHtyb2xlLCBzY2hvb2wsIHVybD99KSB7XHJcbiAgICBjb25zdCB7cm9sZSwgc2Nob29sLCB1cmx9ID0gb3B0aW9ucztcclxuICAgIGNvbnN0IGN1cnJlbnRRdWVyeSA9IHBhcnNlUXVlcnlTdHJpbmcobG9jYXRpb24uc2VhcmNoKTtcclxuICAgIGNvbnN0IG5ld1F1ZXJ5ID0gey4uLmN1cnJlbnRRdWVyeSwgcm9sZSwgc2Nob29sfTtcclxuICAgIGNvbnN0IG5ld1F1ZXJ5U3RyaW5nID0gZ2VuZXJhdGVRdWVyeVN0cmluZyhuZXdRdWVyeSk7XHJcbiAgICBpZiAodXJsKSB7XHJcbiAgICAgIGxvY2F0aW9uLmhyZWYgPSBgJHt1cmx9JHtuZXdRdWVyeVN0cmluZ31gO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbG9jYXRpb24uaGFzaCA9IFwiI1wiO1xyXG4gICAgICBsb2NhdGlvbi5zZWFyY2ggPSBuZXdRdWVyeVN0cmluZztcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhY3RBcyhvcHRpb25zOiB7cm9sZSwgc2Nob29sLCB1cmw/fSkge1xyXG4gIGltcGVyc29uYXRpb25FbnYuYWN0QXMob3B0aW9ucyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwcmVzZXJ2ZUltcGVyc29uYXRpb25RdWVyeSAodXJsOiBzdHJpbmcsIHF1ZXJ5OiB7W25hbWU6IHN0cmluZ10gOiBzdHJpbmd9KSB7XHJcbiAgY29uc3QgY3VycmVudFF1ZXJ5ID0gcGFyc2VRdWVyeVN0cmluZyhsb2NhdGlvbi5zZWFyY2gpO1xyXG4gIGNvbnN0IHByZXNlcnZlZFF1ZXJ5ID0ge307XHJcbiAgZm9yIChjb25zdCBwYXJhbSBvZiBJTVBFUlNPTkFUSU9OX1FVRVJZX1BBUkFNUykge1xyXG4gICAgaWYgKGN1cnJlbnRRdWVyeVtwYXJhbV0pIHByZXNlcnZlZFF1ZXJ5W3BhcmFtXSA9IGN1cnJlbnRRdWVyeVtwYXJhbV07XHJcbiAgfVxyXG4gIGNvbnN0IG5ld1F1ZXJ5U3RyaW5nID0gZ2VuZXJhdGVRdWVyeVN0cmluZyh7Li4ucHJlc2VydmVkUXVlcnksIC4uLnF1ZXJ5fSk7XHJcbiAgY29uc3QgcEhhc2ggPSB1cmwuaW5kZXhPZignIycpO1xyXG4gIHJldHVybiBwSGFzaCA+PSAwID9cclxuICAgIGAke3VybC5zdWJzdHIoMCxwSGFzaCl9JHtuZXdRdWVyeVN0cmluZ30ke3VybC5zdWJzdHIocEhhc2gpfWAgOlxyXG4gICAgYCR7dXJsfSR7bmV3UXVlcnlTdHJpbmd9YDtcclxufVxyXG4iLCJpbXBvcnQgeyBFRFNDb3Vyc2UsIEVEU0Fzc2Vzc21lbnQsIEVEU1N0dWR5UGxhbiwgRURTU3R1ZGVudEZ1dHVyZUFiaWxpdHksIEVEU1N0dWRlbnQsIEVEU1R1aXRpb25Hcm91cCwgRURTVHVpdGlvblN0dWRlbnQsIEVEU1RlYWNoZXIsIE1vY2tFRFNBY2FkZW1pY1llYXIsIE1vY2tFRFNEYXRlUmFuZ2UgfSBmcm9tICcuLi9jb250cmFjdHMvZWRzJztcclxuaW1wb3J0IHsgUmVzdENsaWVudCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgSXNvbW9ycGhpY0VudiwgQmVhcmVyUHJvdmlkZXIsIEh0dHBFcnJvciB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgU2Nob29sTW9tZW50LCBnZXRUZXJtU3RhckVuZERhdGUgfSBmcm9tICcuLi91dGlscy9zY2hvb2wtbW9tZW50JztcclxuaW1wb3J0IHsgU2Nob29sVGVybSB9IGZyb20gJy4uL3V0aWxzL3NjaG9vbC10ZXJtJztcclxuaW1wb3J0IHsgZGF0ZVRpbWVSZXZpdmVyLCBMIH0gZnJvbSAnLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgbW9ja0pzb25GaWxlIGZyb20gJy4vbW9jay9tb2NrLWVkcy1kYXRhLmpzb24nO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IFN1c3BlbnNlQmFzZWRBUEksIG1ha2VTdXNwZW5zZUFwaSB9IGZyb20gJy4uL3V0aWxzL21ha2Utc3VzcGVuc2UtYXBpJztcclxuXHJcbmV4cG9ydCBjbGFzcyBFZHNDbGllbnQge1xyXG4gIGh0dHA6IFJlc3RDbGllbnQ7XHJcbiAgdXNlckVtYWlsR2V0dGVyOiAoKT0+c3RyaW5nO1xyXG4gIHN1c3BlbnNlOiBTdXNwZW5zZUJhc2VkQVBJPEVkc0NsaWVudD47XHJcblxyXG4gIGNvbnN0cnVjdG9yIChcclxuICAgIGlzb21vcnBoaWM6IElzb21vcnBoaWNFbnYsXHJcbiAgICBiYXNlVXJsOiBzdHJpbmcsXHJcbiAgICBiZWFyZXJQcm92aWRlcjogQmVhcmVyUHJvdmlkZXIsXHJcbiAgICB1c2VyRW1haWxHZXR0ZXI6ICgpPT5zdHJpbmdcclxuICApIHtcclxuICAgIHRoaXMuaHR0cCA9IG5ldyBSZXN0Q2xpZW50IChpc29tb3JwaGljLCBiYXNlVXJsLCB7YmVhcmVyUHJvdmlkZXJ9KTtcclxuICAgIHRoaXMudXNlckVtYWlsR2V0dGVyID0gdXNlckVtYWlsR2V0dGVyO1xyXG4gICAgY29uc3QgaXNBcGlNZXRob2QgPSBtID0+XHJcbiAgICAgIHR5cGVvZiB0aGlzW21dID09PSAnZnVuY3Rpb24nICYmXHJcbiAgICAgIG0gIT09ICdjb25zdHJ1Y3RvcicgJiYgLy8gU2luY2UgbWFrZVN1c3BlbnNlQXBpKCkgd2Fsa3MgcHJvdG90eXBlIGNoYWluXHJcbiAgICAgIG0gIT09ICdwcml2YXRpemluZ0NhY2hlQnVzdCcgJiZcclxuICAgICAgbSAhPT0gJ3VzZXJFbWFpbEdldHRlcicgLy8gTGlzdCBub24tQVBJIG1ldGhvZHMgaGVyZS4uLlxyXG4gICAgICA7XHJcblxyXG4gICAgT2JqZWN0LmtleXMoRWRzQ2xpZW50LnByb3RvdHlwZSkuZm9yRWFjaChtZXRob2QgPT4ge1xyXG4gICAgICBpZiAoaXNBcGlNZXRob2QobWV0aG9kKSkge1xyXG4gICAgICAgIHRoaXNbbWV0aG9kXSA9IGF2b2lkU2ltdWx0YW5vdXNDYWxscyh0aGlzW21ldGhvZF0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHRoaXMuc3VzcGVuc2UgPSBtYWtlU3VzcGVuc2VBcGkodGhpcywge2lzQXBpTWV0aG9kfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHByaXZhdGl6aW5nQ2FjaGVCdXN0KCkge1xyXG4gICAgcmV0dXJuIHt1c2VyOiB0aGlzLnVzZXJFbWFpbEdldHRlcigpfTtcclxuICB9XHJcblxyXG4vKipcclxuICAgKiBSZXRyaWV2ZSBhY3RpdmUgY291cnNlcyBmb3IgY3VycmVudCBsb2dnZWQgaW4gc3R1ZGVudC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSBjb3Vyc2VDb2RlIFNob3J0LW5hbWUgb2YgdGhlIGNvdXJzZS4gT3B0aW9uYWwuXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0QWN0aXZlQ291cnNlcyhxOiB7Y291cnNlQ29kZT86IHN0cmluZywgcGVyaW9kTmFtZTogc3RyaW5nfSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcXVlcnk6YW55ID0gdGhpcy5wcml2YXRpemluZ0NhY2hlQnVzdCgpO1xyXG4gICAgICBpZiAocSkge1xyXG4gICAgICAgIGlmIChxLmNvdXJzZUNvZGUpIHF1ZXJ5LkNvdXJzZUNvZGUgPSBxLmNvdXJzZUNvZGU7XHJcbiAgICAgICAgaWYgKHEucGVyaW9kTmFtZSkgcXVlcnkuUGVyaW9kTmFtZSA9IHEucGVyaW9kTmFtZTtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmh0dHAuZ2V0KFwic3R1ZGVudGFjdGl2ZWNvdXJzZXNcIiwgcXVlcnkpO1xyXG4gICAgICBpZiAocmVzLnN0YXR1cyAhPSAyMDApIHRocm93IG5ldyBIdHRwRXJyb3IocmVzLnN0YXR1cywgYXdhaXQgcmVzLnRleHQoKSk7XHJcbiAgICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgICByZXR1cm4ganNvbi5jb3Vyc2VzIGFzIEVEU0NvdXJzZVtdO1xyXG4gICAgfSBjYXRjaCAoZXgpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZyb20gRURTOiBcIiArIGV4KTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKExgS3VuZGUgdHl2w6RyciBpbnRlIGxhZGRhIHRlcm1pbnNtw6VsIGVsbGVyIGF2a2xhcmFkZSBzdGVnIGZyw6VuIEVEUy4gRsO2cnPDtmsgaWdlbiBzZW5hcmUuLi5gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHJpZXZlIGxhdGVzdCBhc3Nlc3NtZW50cyBmb3IgY3VycmVudCBsb2dnZWQgaW4gdXNlci5cclxuICAgKiBcclxuICAgKiBAcGFyYW0gbGltaXQgT3B0aW9uYWwgbGltaXRcclxuICAgKi9cclxuICBhc3luYyBnZXRMYXRlc3RBc3Nlc3NtZW50cyhsaW1pdD86IG51bWJlcikge1xyXG4gICAgY29uc3QgcXVlcnk6YW55ID0gdGhpcy5wcml2YXRpemluZ0NhY2hlQnVzdCgpO1xyXG4gICAgaWYgKCFpc05hTihsaW1pdCkpIHF1ZXJ5LkNvdW50ID0gbGltaXQ7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmh0dHAuZ2V0KFwic3R1ZGVudGFzc2Vzc21lbnRzXCIsIHF1ZXJ5KTtcclxuICAgIGlmIChyZXMuc3RhdHVzICE9IDIwMCkgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXMuc3RhdHVzLCBhd2FpdCByZXMudGV4dCgpKTtcclxuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgcmV0dXJuIGpzb24uYXNzZXNzbWVudHMgYXMgRURTQXNzZXNzbWVudFtdOyAgICBcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHJpZXZlIHN0dWR5cGxhbnMgZm9yIGN1cnJlbnQgbG9nZ2VkLWluIHVzZXJcclxuICAgKi9cclxuICBhc3luYyBnZXRTdHVkZW50R29hbHMoKSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmh0dHAuZ2V0KFwic3R1ZGVudGdvYWxzXCIsIHRoaXMucHJpdmF0aXppbmdDYWNoZUJ1c3QoKSk7XHJcbiAgICBpZiAocmVzLnN0YXR1cyAhPSAyMDApIHRocm93IG5ldyBIdHRwRXJyb3IocmVzLnN0YXR1cywgYXdhaXQgcmVzLnRleHQoKSk7XHJcbiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgIHJldHVybiBqc29uLnN0dWRlbnRHb2FscyBhcyBFRFNTdHVkeVBsYW5bXTsgICAgXHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRTdHVkZW50RnV0dXJlQWJpbGl0aWVzKCkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5odHRwLmdldChcInN0dWRlbnRGdXR1cmVBYmlsaXRpZXNcIiwgdGhpcy5wcml2YXRpemluZ0NhY2hlQnVzdCgpKTtcclxuICAgIGlmIChyZXMuc3RhdHVzICE9IDIwMCkgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXMuc3RhdHVzLCBhd2FpdCByZXMudGV4dCgpKTtcclxuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgcmV0dXJuIGpzb24uc3R1ZGVudEZ1dHVyZUFiaWxpdGllcyBhcyBFRFNTdHVkZW50RnV0dXJlQWJpbGl0eVtdO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0VGVhY2hlclR1dG9yU3R1ZGVudHMoKSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmh0dHAuZ2V0KFwidGVhY2hlcnR1dG9yc3R1ZGVudHNcIiwgdGhpcy5wcml2YXRpemluZ0NhY2hlQnVzdCgpKTtcclxuICAgIGlmIChyZXMuc3RhdHVzICE9IDIwMCkgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXMuc3RhdHVzLCBhd2FpdCByZXMudGV4dCgpKTtcclxuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgcmV0dXJuIGpzb24uc3R1ZGVudHMgYXMgRURTU3R1ZGVudFtdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogZ2V0U2Nob29sVHVpdGlvbkdyb3VwcygpXHJcbiAgICogXHJcbiAgICogUmV0dXJuIHR1aXRpb25ncm91cHMgZm9yIHNjaG9vbFxyXG4gICAqIFxyXG4gICAqIEBwYXJhbSBzY2hvb2xOYW1lIC0gbmFtZSBvZiBzY2hvb2xcclxuICAgKiBAcGFyYW0gY291cnNlQ29kZSAtIFNrb2x2ZXJrZXRzIGNvZGUgZm9yIGNvdXJzZVxyXG4gICAqL1xyXG4gIGFzeW5jIGdldFNjaG9vbFR1aXRpb25Hcm91cHMocToge3NjaG9vbE5hbWU6IHN0cmluZywgY291cnNlQ29kZTogc3RyaW5nfSkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5odHRwLmdldChcIlNjaG9vbFR1aXRpb25Hcm91cHNcIiwgey4uLnRoaXMucHJpdmF0aXppbmdDYWNoZUJ1c3QoKSwgLi4ucX0pO1xyXG4gICAgaWYgKHJlcy5zdGF0dXMgIT0gMjAwKSB0aHJvdyBuZXcgSHR0cEVycm9yKHJlcy5zdGF0dXMsIGF3YWl0IHJlcy50ZXh0KCkpO1xyXG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XHJcbiAgICByZXR1cm4ganNvbi5zY2hvb2xUdWl0aW9uR3JvdXBzIGFzIEVEU1R1aXRpb25Hcm91cFtdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogZ2V0VHVpdGlvbkdyb3VwU3R1ZGVudHMoKVxyXG4gICAqIFxyXG4gICAqIFJldHVybiBuYW1lIGFuZCBtYWlsYWRyZXNzZXMgZm9yIHR1dGl0aW9uZ3JvdXBzIGluIHNjaG9vbHNcclxuICAgKiBcclxuICAgKiBAcGFyYW0gc2Nob29sTmFtZSAtIG5hbWUgb2Ygc2Nob29sXHJcbiAgICogQHBhcmFtIHR1aXRpb25Hcm91cE5hbWUgLSB0dWl0aW9uIGdydW9wIG5hbWUgaW4gRURTXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0VHVpdGlvbkdyb3VwU3R1ZGVudHMocToge3NjaG9vbE5hbWU6IHN0cmluZywgdHVpdGlvbkdyb3VwTmFtZTogc3RyaW5nfSkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5odHRwLmdldChcIlR1aXRpb25Hcm91cFN0dWRlbnRzXCIsIHsuLi50aGlzLnByaXZhdGl6aW5nQ2FjaGVCdXN0KCksIC4uLnF9KTtcclxuICAgIGlmIChyZXMuc3RhdHVzICE9IDIwMCkgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXMuc3RhdHVzLCBhd2FpdCByZXMudGV4dCgpKTtcclxuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgcmV0dXJuIGpzb24udHVpdGlvbkdyb3VwU3R1ZGVudHMgYXMgRURTVHVpdGlvblN0dWRlbnRbXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGdldFNjaG9vbFRlYWNoZXJzKClcclxuICAgKiBcclxuICAgKiBSZXR1cm4gbmFtZSBhbmQgbWFpbGFkcmVzc2VzIGZvciB0dXRpdGlvbmdyb3VwcyBpbiBzY2hvb2xzXHJcbiAgICogXHJcbiAgICogQHBhcmFtIHNjaG9vbE5hbWUgLSBuYW1lIG9mIHNjaG9vbFxyXG4gICAqL1xyXG4gIGFzeW5jIGdldFNjaG9vbFRlYWNoZXJzKHE6IHtzY2hvb2xOYW1lOiBzdHJpbmd9KSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmh0dHAuZ2V0KFwiU2Nob29sVGVhY2hlcnNcIiwgey4uLnRoaXMucHJpdmF0aXppbmdDYWNoZUJ1c3QoKSwgLi4ucX0pO1xyXG4gICAgaWYgKHJlcy5zdGF0dXMgIT0gMjAwKSB0aHJvdyBuZXcgSHR0cEVycm9yKHJlcy5zdGF0dXMsIGF3YWl0IHJlcy50ZXh0KCkpO1xyXG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XHJcbiAgICByZXR1cm4ganNvbi5zY2hvb2xUZWFjaGVycyBhcyBFRFNUZWFjaGVyW107XHJcbiAgfVxyXG4gIC8vIHdlIGFzc3VtZSB0aGF0IHRoZSBFRFMgd2lsbCByZXR1cm4gdGhlIGN1cnJlbnQgYWNhZGVtaWMgeWVhciBkYXRlcyBkZXRlcm1pbmVkIGJ5IHRoZSBjdXJyZW50IGRhdGVcclxuICBhc3luYyBnZXRBY2FkZW1pY1llYXJUZXJtcyhzY2hvb2xMb2NhbGU6IHN0cmluZywgZGF0ZTogRGF0ZSkge1xyXG4gICAgLy8gbW9jayBkYXRhXHJcbiAgICBzd2l0Y2ggKHNjaG9vbExvY2FsZSkge1xyXG4gICAgICBjYXNlICdlbl9zaW4nOlxyXG4gICAgICByZXR1cm4gbW9ja0pzb25GaWxlLlNvdXRoSW5kaWEuZmlsdGVyKGYgPT4gbW9tZW50KGRhdGUpLmlzU2FtZU9yQWZ0ZXIoZi5maXJzdFRlcm0uc3RhcnREYXRlKSAmJiBtb21lbnQoZGF0ZSkuaXNTYW1lT3JCZWZvcmUoZi5zZWNvbmRUZXJtLmVuZERhdGUpKVswXSBhcyBNb2NrRURTQWNhZGVtaWNZZWFyO1xyXG4gICAgICBjYXNlICdlbl9uaW4nOlxyXG4gICAgICByZXR1cm4gbW9ja0pzb25GaWxlLk5vcnRoSW5kaWEuZmlsdGVyKGYgPT4gbW9tZW50KGRhdGUpLmlzU2FtZU9yQWZ0ZXIoZi5maXJzdFRlcm0uc3RhcnREYXRlKSAmJiBtb21lbnQoZGF0ZSkuaXNTYW1lT3JCZWZvcmUoZi5zZWNvbmRUZXJtLmVuZERhdGUpKVswXSBhcyBNb2NrRURTQWNhZGVtaWNZZWFyO1xyXG4gICAgICBjYXNlICdzdic6XHJcbiAgICAgIHtcclxuICAgICAgdmFyIGhvbGlkYXlzID0gW10gYXMgTW9ja0VEU0RhdGVSYW5nZVtdO1xyXG4gICAgICB2YXIgZmlyc3RUZXJtTW9tZW50ID0gZ2V0VGVybVN0YXJFbmREYXRlKGRhdGUsIHRydWUpO1xyXG4gICAgICB2YXIgc2Vjb25kVGVybU1vbWVudCA9IGdldFRlcm1TdGFyRW5kRGF0ZShkYXRlLCBmYWxzZSk7XHJcblxyXG4gICAgICB2YXIgc3RhcnRGaXJzdFRlcm1EYXRlID0gZmlyc3RUZXJtTW9tZW50WzBdO1xyXG4gICAgICB2YXIgc3RhcnRTZWNvbmRUZXJtRGF0ZSA9IHNlY29uZFRlcm1Nb21lbnRbMF07XHJcbiAgICAgIHZhciBlbmRGaXJzdFRlcm1EYXRlID0gZmlyc3RUZXJtTW9tZW50WzFdO1xyXG4gICAgICB2YXIgZW5kU2Vjb25kVGVybURhdGUgPSBzZWNvbmRUZXJtTW9tZW50WzFdO1xyXG5cclxuICAgICAgY29uc3QgZmlyc3RUZXJtID0ge3N0YXJ0RGF0ZTogbmV3IERhdGUoc3RhcnRGaXJzdFRlcm1EYXRlLnllYXIoKSwgc3RhcnRGaXJzdFRlcm1EYXRlLm1vbnRoKCksIHN0YXJ0Rmlyc3RUZXJtRGF0ZS5kYXRlKCkpLnRvRGF0ZVN0cmluZygpLCBlbmREYXRlOiBuZXcgRGF0ZShzdGFydEZpcnN0VGVybURhdGUueWVhcigpLCBlbmRGaXJzdFRlcm1EYXRlLm1vbnRoKCksIGVuZEZpcnN0VGVybURhdGUuZGF0ZSgpKS50b0RhdGVTdHJpbmcoKX07XHJcbiAgICAgIGNvbnN0IHNlY29uZFRlcm0gPSB7c3RhcnREYXRlOiBuZXcgRGF0ZShzdGFydFNlY29uZFRlcm1EYXRlLnllYXIoKSwgc3RhcnRTZWNvbmRUZXJtRGF0ZS5tb250aCgpLCBzdGFydFNlY29uZFRlcm1EYXRlLmRhdGUoKSkudG9EYXRlU3RyaW5nKCksIGVuZERhdGU6IG5ldyBEYXRlKHN0YXJ0U2Vjb25kVGVybURhdGUueWVhcigpLCBlbmRTZWNvbmRUZXJtRGF0ZS5tb250aCgpLCBlbmRTZWNvbmRUZXJtRGF0ZS5kYXRlKCkpLnRvRGF0ZVN0cmluZygpfTtcclxuICAgICAgcmV0dXJuIHtmaXJzdFRlcm0sIHNlY29uZFRlcm0sIGhvbGlkYXlzfTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgRURTUGVyaW9kIHtcclxuICBwZXJpb2Q6IHN0cmluZztcclxuICB0ZXJtOiAnQVQnIHwgJ1NUJztcclxuICB5ZWFyOiBudW1iZXI7XHJcbiAgY29uc3RydWN0b3IgKHBlcmlvZFN0cmluZ09yU2Nob29sVGVybTogc3RyaW5nIHwgU2Nob29sTW9tZW50KSB7XHJcbiAgICBpZiAodHlwZW9mIHBlcmlvZFN0cmluZ09yU2Nob29sVGVybSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgdGhpcy5wZXJpb2QgPSBwZXJpb2RTdHJpbmdPclNjaG9vbFRlcm07XHJcbiAgICAgIHRoaXMudGVybSA9IHRoaXMucGVyaW9kLnN0YXJ0c1dpdGgoJ0hUJykgPyAnQVQnIDogJ1NUJztcclxuICAgICAgdGhpcy55ZWFyID0gcGFyc2VJbnQodGhpcy5wZXJpb2Quc3Vic3RyKDIpKTtcclxuICAgICAgaWYgKGlzTmFOKHRoaXMueWVhcikpIHRocm93IG5ldyBFcnJvciAoYEludmFsaWQgcGVyaW9kOiAke3RoaXMucGVyaW9kfWApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3Qgc2Nob29sVGVybSA9IG5ldyBTY2hvb2xUZXJtKHBlcmlvZFN0cmluZ09yU2Nob29sVGVybSk7XHJcbiAgICAgIHRoaXMucGVyaW9kID0gKHNjaG9vbFRlcm0udGVybSA9PT0gJ0FUJyA/IFwiSFRcIiA6IFwiVlRcIikgKyBzY2hvb2xUZXJtLnllYXI7XHJcbiAgICAgIHRoaXMudGVybSA9IHNjaG9vbFRlcm0udGVybTtcclxuICAgICAgdGhpcy55ZWFyID0gc2Nob29sVGVybS55ZWFyO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0IHNjaG9vbFRlcm0gKCkgOiBTY2hvb2xUZXJtIHtcclxuICAgIHJldHVybiBuZXcgU2Nob29sVGVybSh7XHJcbiAgICAgIGFjYWRlbWljWWVhcjogdGhpcy50ZXJtID09PSAnQVQnID9cclxuICAgICAgICBgJHt0aGlzLnllYXJ9LyR7dGhpcy55ZWFyICsgMX1gIDpcclxuICAgICAgICBgJHt0aGlzLnllYXItMX0vJHt0aGlzLnllYXJ9YCxcclxuICAgICAgdGVybTogdGhpcy50ZXJtXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHRvU3RyaW5nKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucGVyaW9kO1xyXG4gIH1cclxuXHJcbiAgdmFsdWVPZigpIHtcclxuICAgIHJldHVybiB0aGlzLnllYXIgKyBcIjpcIiArICh0aGlzLnRlcm0gPT09ICdTVCcgPyBcIjFcIiA6IFwiMlwiKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUpzb25EYXRlX29sZCAoanNvbkRhdGVTdHI6IHN0cmluZykgOiBEYXRlIHtcclxuICBjb25zdCBkYXRlID0gZGF0ZVRpbWVSZXZpdmVyKFwiXCIsIGpzb25EYXRlU3RyKTtcclxuICBpZiAoIShkYXRlIGluc3RhbmNlb2YgRGF0ZSkpIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgSlNPTiBkYXRlIHN0cmluZzogXCIgKyBqc29uRGF0ZVN0cik7XHJcbiAgcmV0dXJuIGRhdGU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGF2b2lkU2ltdWx0YW5vdXNDYWxsczxULEE+KG1ldGhvZDogKC4uLmFyZ3M6QVtdKT0+UHJvbWlzZTxUPikgOiAoLi4uYXJnczpBW10pPT5Qcm9taXNlPFQ+IHtcclxuICBsZXQgb25nb2luZ1Byb21pc2VzOiB7W2FyZ3NKc29uOiBzdHJpbmddOiBQcm9taXNlPFQ+fSA9IHt9O1xyXG4gIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgIGNvbnN0IGFyZ3NKc29uID0gSlNPTi5zdHJpbmdpZnkoW10uc2xpY2UuY2FsbChhcmd1bWVudHMpKTtcclxuICAgIGlmICghb25nb2luZ1Byb21pc2VzW2FyZ3NKc29uXSkge1xyXG4gICAgICBvbmdvaW5nUHJvbWlzZXNbYXJnc0pzb25dID0gbWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykudGhlbihyZXN1bHQ9PntcclxuICAgICAgICBkZWxldGUgb25nb2luZ1Byb21pc2VzW2FyZ3NKc29uXTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBvbmdvaW5nUHJvbWlzZXNbYXJnc0pzb25dO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBCZWFyZXJQcm92aWRlciB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgR29vZ2xlQ2xpZW50IH0gZnJvbSAnLi9nb29nbGUtY2xpZW50JztcclxuXHJcbmV4cG9ydCBjbGFzcyBHb29nbGVDYWxlbmRhciBleHRlbmRzIEdvb2dsZUNsaWVudCB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGdvb2dsZVRva2VuUHJvdmlkZXI6IEJlYXJlclByb3ZpZGVyKSB7XHJcbiAgICBzdXBlcignaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZGlzY292ZXJ5L3YxL2FwaXMvY2FsZW5kYXIvdjMvcmVzdCcpO1xyXG4gICAgdGhpcy5zZXRCZWFyZXJQcm92aWRlcihnb29nbGVUb2tlblByb3ZpZGVyKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGxpc3RDYWxlbmRhcnMoKSB7XHJcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUluaXRlZCgpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZ2FwaS5jbGllbnQuY2FsZW5kYXIuY2FsZW5kYXJMaXN0Lmxpc3Qoe30pO1xyXG4gICAgICAvLyBUT0RPOiBXaGF0IGlzIHRoZSBub3JtYWwgcmVzLnN0YXR1cz8gMjAwPyBUaHJvdyBpZiBub3QgMjAwP1xyXG4gICAgICByZXR1cm4gcmVzLnJlc3VsdC5pdGVtcztcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAvLyBUT0RPOiBQYXJzZSBvdXQgZXJyb3IgZnJvbSBlcnIgKHdoaWNoIGlzIGFuIG9iamVjdCEpXHJcbiAgICAgIHRocm93IGVyci5lcnJvcjsgLy8gSXMgdGhpcyBjb3JyZWN0PyBUZXN0IVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgYmF0Y2hFdmVudHMoeyBjYWxlbmRhckxpc3QsIHRpbWVNaW4sIHRpbWVNYXggfSkge1xyXG4gICAgYXdhaXQgdGhpcy5lbnN1cmVJbml0ZWQoKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGJhdGNoID0gZ2FwaS5jbGllbnQubmV3QmF0Y2goKTtcclxuICAgICAgY2FsZW5kYXJMaXN0LmZvckVhY2goKGNhbCkgPT4ge1xyXG4gICAgICAgIGJhdGNoLmFkZChnYXBpLmNsaWVudC5jYWxlbmRhci5ldmVudHMubGlzdCh7XHJcbiAgICAgICAgICAnY2FsZW5kYXJJZCc6IGNhbC5pZCB8fCAncHJpbWFyeScsXHJcbiAgICAgICAgICAndGltZU1pbic6IHRpbWVNaW4gJiYgKG5ldyBEYXRlKHRpbWVNaW4pKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgJ3RpbWVNYXgnOiB0aW1lTWF4ICYmIChuZXcgRGF0ZSh0aW1lTWF4KSkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICdzaG93RGVsZXRlZCc6IGZhbHNlLFxyXG4gICAgICAgICAgJ3NpbmdsZUV2ZW50cyc6IHRydWUsXHJcbiAgICAgICAgICAnZmllbGRzJzogJ2l0ZW1zL2lkLGl0ZW1zL3N0YXJ0LGl0ZW1zL2VuZCxpdGVtcy9zdW1tYXJ5LGl0ZW1zL2xvY2F0aW9uLGl0ZW1zL2h0bWxMaW5rLGl0ZW1zL2Rlc2NyaXB0aW9uJyxcclxuICAgICAgICAgICdtYXhSZXN1bHRzJzogMjUwMCxcclxuICAgICAgICAgICdvcmRlckJ5JzogJ3N0YXJ0VGltZSdcclxuICAgICAgICB9KSwgPGFueT57J2lkJzogY2FsLmlkfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gYmF0Y2gudGhlbihyZXNwID0+IHtcclxuICAgICAgICBsZXQgbmV3Q2FscyA9IHt9O1xyXG4gICAgICAgIGZvciAodmFyIGkgaW4gY2FsZW5kYXJMaXN0KSB7XHJcbiAgICAgICAgICBjb25zdCBjYWxJZCA9IGNhbGVuZGFyTGlzdFtpXS5pZDtcclxuICAgICAgICAgIGNvbnN0IGV2ZW50cyA9IChyZXNwLnJlc3VsdFtjYWxJZF0ucmVzdWx0ICBhcyBnYXBpLmNsaWVudC5jYWxlbmRhci5FdmVudHMpLml0ZW1zO1xyXG4gICAgICAgICAgbmV3Q2Fsc1tjYWxJZF0gPSB7Y2FsZW5kYXI6IGNhbGVuZGFyTGlzdFtpXSwgZXZlbnRzfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ld0NhbHM7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBjYXRjaChlcnIpIHtcclxuICAgICAgdGhyb3cgZXJyLmVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBCZWFyZXJQcm92aWRlciB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgZW52IH0gZnJvbSAnLi4vZ2xvYmFscy9LRUQuZW52JztcclxuXHJcbmV4cG9ydCBjbGFzcyBHb29nbGVDbGllbnQge1xyXG4gIHRva2VuRXhwaXJhdGlvbjogRGF0ZTtcclxuICBnb29nbGVUb2tlblByb3ZpZGVyOiBCZWFyZXJQcm92aWRlcjtcclxuICBkaXNjb3ZlcnlEb2NzOiBzdHJpbmdbXTtcclxuICB0b2tlbjogc3RyaW5nO1xyXG5cclxuICBjb25zdHJ1Y3RvcihkaXNjb3ZlcnlEb2NzOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuZ29vZ2xlVG9rZW5Qcm92aWRlciA9IGVudi5nb29nbGVUb2tlblByb3ZpZGVyO1xyXG4gICAgdGhpcy5kaXNjb3ZlcnlEb2NzID0gW107XHJcbiAgICB0aGlzLmRpc2NvdmVyeURvY3MucHVzaChkaXNjb3ZlcnlEb2NzKTtcclxuICB9XHJcblxyXG4gIHNldEJlYXJlclByb3ZpZGVyKGdvb2dsZVRva2VuUHJvdmlkZXI6IEJlYXJlclByb3ZpZGVyKSB7XHJcbiAgICB0aGlzLmdvb2dsZVRva2VuUHJvdmlkZXIgPSBnb29nbGVUb2tlblByb3ZpZGVyO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZW5zdXJlSW5pdGVkKCkge1xyXG4gICAgLy8gTG9hZCBHQVBJIGFuZCBlbnN1cmUgYWxsIG9mIGl0cyBjb21wb25lbnRzIGFyZSBsb2FkZWRcclxuICAgIGlmICh0eXBlb2YgZ2FwaSA9PT0gJ3VuZGVmaW5lZCcgfHwgIWdhcGkuY2xpZW50IHx8ICFnYXBpLmNsaWVudC5zZXRUb2tlbikgYXdhaXQgdGhpcy5sb2FkR2FwaSgpO1xyXG5cclxuICAgIC8vIFNldCB0b2tlblxyXG4gICAgaWYgKCF0aGlzLnRva2VuRXhwaXJhdGlvbiB8fCB0aGlzLnRva2VuRXhwaXJhdGlvbiA8IG5ldyBEYXRlKCkpIHtcclxuICAgICAgY29uc3QgdG9rZW5SZXN1bHQgPSBhd2FpdCB0aGlzLmdvb2dsZVRva2VuUHJvdmlkZXIuZ2V0QmVhcmVyKCk7XHJcbiAgICAgIHRoaXMudG9rZW5FeHBpcmF0aW9uID0gbmV3IERhdGUodG9rZW5SZXN1bHQuZXhwaXJlcyk7XHJcbiAgICAgIHRoaXMudG9rZW4gPSB0b2tlblJlc3VsdC50b2tlbjtcclxuICAgICAgZ2FwaS5jbGllbnQuc2V0VG9rZW4oe1xyXG4gICAgICAgIGFjY2Vzc190b2tlbjogdG9rZW5SZXN1bHQudG9rZW5cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTG9hZCBhbGwgZGlzY292eWVyRG9jc1xyXG4gICAgYXdhaXQgZ2FwaS5jbGllbnQuaW5pdCh7XHJcbiAgICAgIGRpc2NvdmVyeURvY3M6IHRoaXMuZGlzY292ZXJ5RG9jc1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBsb2FkR2FwaSgpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICBpZiAodHlwZW9mIGdhcGkgIT09ICd1bmRlZmluZWQnICYmIGdhcGkuY2xpZW50ICYmIGdhcGkuY2xpZW50LnNldFRva2VuKSByZXR1cm4gcmVzb2x2ZSgpO1xyXG4gICAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgc2NyaXB0LnNyYyA9IFwiaHR0cHM6Ly9hcGlzLmdvb2dsZS5jb20vanMvY2xpZW50LmpzP29ubG9hZD1nYWFwaV9sb2FkZWRcIjtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcbiAgICAgICh3aW5kb3cgYXMgYW55KS5nYWFwaV9sb2FkZWQgPSByZXNvbHZlO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsIlxyXG5leHBvcnQgaW50ZXJmYWNlIEtlZExlYXJuaW5nR29hbHNEYXRhIHtcclxuICBtb2R1bGVOYW1lOiBzdHJpbmdcclxuICBzdWJqZWN0OiB7XHJcbiAgICBuYW1lOiBzdHJpbmdcclxuICAgIGNvdXJzZToge1xyXG4gICAgICBuYW1lOiBzdHJpbmdcclxuICAgICAgdXJsOiBzdHJpbmdcclxuICAgIH1cclxuICB9XHJcbiAgc3RlcD86IG51bWJlclxyXG4gIGNvbW1vblRhc2tzOiBLZWRMZWFybmluZ1Rhc2tbXVxyXG4gIGxlYXJuaW5nR29hbHM6IEtlZExlYXJuaW5nR29hbFtdXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgS2VkTGVhcm5pbmdUYXNrIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIG5hbWU6IHN0cmluZztcclxuICB1cmw6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBLZWRMZWFybmluZ0dvYWwge1xyXG4gIG5hbWU6IHN0cmluZztcclxuICB0YXNrczogS2VkTGVhcm5pbmdUYXNrW107XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRMZWFybmluZ0dvYWxzQW5kVGFza3MoYXBpUGF0aDogc3RyaW5nLCBwYWdlSWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoIChgJHthcGlQYXRofT9ub2RlSUQ9JHtwYWdlSWR9YCwge2NyZWRlbnRpYWxzOiBcInNhbWUtb3JpZ2luXCJ9KTtcclxuICBjb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICByZXR1cm4gZGF0YSBhcyBLZWRMZWFybmluZ0dvYWxzRGF0YTtcclxufVxyXG4iLCJleHBvcnQgZnVuY3Rpb24gY291cnNlTmFtZVRvQ3NzQ2xhc3MoY3NzUHJlZml4OiBzdHJpbmcsIGNvdXJzZU5hbWU6IHN0cmluZykge1xyXG4gIHJldHVybiBgJHtjc3NQcmVmaXh9JHtjb3Vyc2VOYW1lLnN1YnN0cigwLDMpLnRvTG93ZXJDYXNlKCl9YDtcclxufVxyXG4iLCJpbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IGZsYXR0ZW4sIGRpc3RpbmN0LCBjb21wYXJlUHJvcCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgU3R1ZGVudENhbGVuZGFyRXZlbnQgfSBmcm9tICcuL21vZGVscyc7XHJcblxyXG5pbnRlcmZhY2UgRXZlbnRNZXRhIHtcclxuICBpbmRleD86IG51bWJlcixcclxuICBwcmV2T3ZlcmxhcHM/OiBTdHVkZW50Q2FsZW5kYXJFdmVudFtdICBcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNydW5jaENvbGxpZGluZ0V2ZW50cyAoXHJcbiAgZXZlbnRzOiBTdHVkZW50Q2FsZW5kYXJFdmVudFtdLFxyXG4gIGlzTGFzdENhbGw/OiBib29sZWFuKVxyXG46IFN0dWRlbnRDYWxlbmRhckV2ZW50W11cclxue1xyXG4gIGNvbnN0IHJlc3VsdDogKFN0dWRlbnRDYWxlbmRhckV2ZW50ICYgRXZlbnRNZXRhKVtdID0gW107XHJcbiAgZXZlbnRzLmZvckVhY2goKGV2ZW50LCBldmVudEluZGV4KSA9PiB7XHJcbiAgICAgIGNvbnN0IG92ZXJsYXBzID0gcmVzdWx0LmZpbHRlcih4ID0+IHguc3RhcnRNb21lbnQgJiYgeC5lbmRNb21lbnQgJiZcclxuICAgICAgICAgICh4LnN0YXJ0TW9tZW50IDw9IGV2ZW50LnN0YXJ0TW9tZW50KSAmJlxyXG4gICAgICAgICAgKHguZW5kTW9tZW50ID4gZXZlbnQuc3RhcnRNb21lbnQpKTtcclxuICAgICAgbGV0IGFsbE92ZXJsYXBzID0gb3ZlcmxhcHMuY29uY2F0KGZsYXR0ZW4gKG92ZXJsYXBzLm1hcChvID0+IG8ucHJldk92ZXJsYXBzKSkpO1xyXG4gICAgICBhbGxPdmVybGFwcyA9IGRpc3RpbmN0KGFsbE92ZXJsYXBzLCBvID0+IG8uaW5kZXgpO1xyXG4gICAgICBhbGxPdmVybGFwcy5zb3J0KGNvbXBhcmVQcm9wKFwic3RhcnRNb21lbnRcIikpO1xyXG4gICAgICBsZXQgd2lkdGg7Ly8gPSBNYXRoLnJvdW5kKDEwMCAvIE1hdGgubWF4KChhbGxPdmVybGFwcy5sZW5ndGggKyAxKSwgMSkpO1xyXG4gICAgICBsZXQgcG9zID0gMDtcclxuICAgICAgYWxsT3ZlcmxhcHMuZm9yRWFjaCgob3ZlcmxhcCwgaSkgPT4ge1xyXG4gICAgICAgIGlmIChpICUgNCA9PT0gMCkge1xyXG4gICAgICAgICAgd2lkdGggPSBNYXRoLm1heCgyNSwgTWF0aC5yb3VuZCgxMDAgLyBNYXRoLm1heChhbGxPdmVybGFwcy5sZW5ndGggLSBpICsgMSwgMSkpKTtcclxuICAgICAgICAgIHBvcyA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG92ZXJsYXAud2lkdGggPSB3aWR0aDtcclxuICAgICAgICBvdmVybGFwLmNsYXNzTmFtZSA9IChvdmVybGFwLmNsYXNzTmFtZSB8fCBcIlwiKS5zcGxpdCgnICcpXHJcbiAgICAgICAgICAuZmlsdGVyKGNuID0+IGNuICE9PSAnc3BsaXR0ZWQnKVxyXG4gICAgICAgICAgLmNvbmNhdChcInNwbGl0dGVkXCIpXHJcbiAgICAgICAgICAuam9pbignICcpLFxyXG4gICAgICAgIG92ZXJsYXAucG9zID0gcG9zO1xyXG4gICAgICAgIHBvcyArPSB3aWR0aDtcclxuICAgICAgfSk7XHJcbiAgICAgIHJlc3VsdC5wdXNoKHtcclxuICAgICAgICAuLi5ldmVudCxcclxuICAgICAgICBpbmRleDogZXZlbnRJbmRleCxcclxuICAgICAgICBwb3M6IHBvcyxcclxuICAgICAgICB3aWR0aCxcclxuICAgICAgICBjbGFzc05hbWU6IHdpZHRoIDwgMTAwID9cclxuICAgICAgICAgIChldmVudC5jbGFzc05hbWUgPyBldmVudC5jbGFzc05hbWUgKyBcIiBzcGxpdHRlZFwiIDogXCJzcGxpdHRlZFwiKSA6XHJcbiAgICAgICAgICBldmVudC5jbGFzc05hbWUsXHJcbiAgICAgICAgcHJldk92ZXJsYXBzOiBhbGxPdmVybGFwc1xyXG4gICAgICB9KTtcclxuICAgICAgLyppZiAoaXNMYXN0Q2FsbCAmJiBtb21lbnQoZXZlbnQuc3RhcnQpLmRheSgpID09PSAxKSB7XHJcbiAgICAgICAgaWYgKC9TdmUyLy50ZXN0KGV2ZW50LnRleHQpKSB7XHJcbiAgICAgICAgICBkZWJ1Z2dlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKC9GcmFuc2thLy50ZXN0KGV2ZW50LnRleHQpKSB7XHJcbiAgICAgICAgICBkZWJ1Z2dlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKC9UeXNrYS8udGVzdChldmVudC50ZXh0KSkge1xyXG4gICAgICAgICAgZGVidWdnZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgvc3BhbnNrLy50ZXN0KGV2ZW50LnRleHQpKSBkZWJ1Z2dlcjtcclxuICAgICAgICBpZiAoL0VuZzYvLnRlc3QoZXZlbnQudGV4dCkpIGRlYnVnZ2VyO1xyXG4gICAgICB9Ki9cclxuICB9KTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQge01JTlVURX0gZnJvbSAnLi4vLi4vdXRpbHMvY29uc3RhbnRzJztcclxuaW1wb3J0IHtMfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gICAgaWQ6IHN0cmluZyxcclxuICAgIGRheVN0YXJ0LFxyXG4gICAgc3RhcnRNb21lbnQ6IG1vbWVudC5Nb21lbnQsXHJcbiAgICBlbmRNb21lbnQ6IG1vbWVudC5Nb21lbnQsXHJcbiAgICB0ZXh0OiBzdHJpbmcsXHJcbiAgICBsb2NhdGlvbjogc3RyaW5nLFxyXG4gICAgZGVzY3JpcHRpb246IHN0cmluZyxcclxuICAgIHdpZHRoOiBudW1iZXIsXHJcbiAgICBwb3M6IG51bWJlcixcclxuICAgIGxvY2FsZTogc3RyaW5nLFxyXG4gICAgem9vbTogbnVtYmVyLFxyXG4gICAgaHRtbExpbms6IHN0cmluZyxcclxuICAgIGNsYXNzTmFtZTogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIERheVZpZXdFdmVudCAoe1xyXG4gICAgaWQsXHJcbiAgICBkYXlTdGFydCxcclxuICAgIHN0YXJ0TW9tZW50LFxyXG4gICAgZW5kTW9tZW50LFxyXG4gICAgdGV4dCxcclxuICAgIGxvY2F0aW9uLFxyXG4gICAgZGVzY3JpcHRpb24sXHJcbiAgICB3aWR0aCxcclxuICAgIHBvcyxcclxuICAgIGxvY2FsZSxcclxuICAgIHpvb20sXHJcbiAgICBodG1sTGluayxcclxuICAgIGNsYXNzTmFtZVxyXG59OiBQcm9wcykge1xyXG4gICAgY29uc3QgdG9wID0gKG1vbWVudChzdGFydE1vbWVudCkuZGlmZihkYXlTdGFydCkgLyBNSU5VVEUpICogem9vbTtcclxuICAgIGNvbnN0IGhlaWdodCA9IChtb21lbnQoZW5kTW9tZW50KS5kaWZmKHN0YXJ0TW9tZW50KSAvIE1JTlVURSkgKiB6b29tO1xyXG4gICAgY29uc3QgbG9jYWxlVGltZU9wdGlvbnMgPSB7aG91cjogJ251bWVyaWMnLCBtaW51dGU6ICcyLWRpZ2l0J307XHJcbiAgICBjb25zdCBsb2NhbGVTdGFydFRpbWUgPSBzdGFydE1vbWVudC50b0RhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcobG9jYWxlLCBsb2NhbGVUaW1lT3B0aW9ucyk7XHJcbiAgICBjb25zdCBsb2NhbGVFbmRUaW1lID0gZW5kTW9tZW50LnRvRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZyhsb2NhbGUsIGxvY2FsZVRpbWVPcHRpb25zKTtcclxuXHJcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9e1wiZGF5dmlld2V2ZW50IFwiICsgY2xhc3NOYW1lfSBzdHlsZT17e1xyXG4gICAgICAgIHBvc2l0aW9uOidhYnNvbHV0ZScsXHJcbiAgICAgICAgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsXHJcbiAgICAgICAgdG9wLFxyXG4gICAgICAgIGxlZnQ6IChwb3MgfHwgMCkgKyBcIiVcIixcclxuICAgICAgICB3aWR0aDogKHdpZHRoIHx8IDEwMCkgKyAnJScsXHJcbiAgICAgICAgaGVpZ2h0LFxyXG4gICAgICAgIG1heEhlaWdodDogaGVpZ2h0LFxyXG4gICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJ319XHJcblxyXG4gICAgICAgIHRpdGxlPXtgJHtsb2NhbGVTdGFydFRpbWV9IC0gJHtsb2NhbGVFbmRUaW1lfSAke3RleHR9YCArXHJcbiAgICAgICAgICAgIChsb2NhdGlvbiA/XHJcbiAgICAgICAgICAgICAgICBcIlxcblwiICsgTGBQbGF0czogJHtsb2NhdGlvbn1gIDpcclxuICAgICAgICAgICAgICAgIFwiXCIgKSArXHJcbiAgICAgICAgICAgIChkZXNjcmlwdGlvbiA/XHJcbiAgICAgICAgICAgICAgICBcIlxcblwiICsgZGVzY3JpcHRpb24gOlxyXG4gICAgICAgICAgICAgICAgXCJcIiApXHJcbiAgICAgICAgfVxyXG4gICAgICAgID5cclxuICAgICAgICA8YSBjbGFzc05hbWU9XCJldmVudC10aXRsZVwiIGhyZWY9e2h0bWxMaW5rfSB0YXJnZXQ9XCJjYWxlbmRhci1ldmVudFwiPlxyXG4gICAgICAgICAgICB7dGV4dH1cclxuICAgICAgICA8L2E+XHJcbiAgICAgICAgPHAgY2xhc3NOYW1lPVwiZXZlbnQtcGVyaW9kXCI+XHJcbiAgICAgICAgICAgIHtsb2NhbGVTdGFydFRpbWV9IC0ge2xvY2FsZUVuZFRpbWV9XHJcbiAgICAgICAgPC9wPlxyXG4gICAgICAgIHtsb2NhdGlvbiAmJlxyXG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJldmVudC1sb2NhdGlvblwiPlxyXG4gICAgICAgICAgICAgICAge2xvY2F0aW9ufVxyXG4gICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHtkZXNjcmlwdGlvbiAmJlxyXG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJldmVudC1kZXNjcmlwdGlvblwiPlxyXG4gICAgICAgICAgICAgICAge2Rlc2NyaXB0aW9ufVxyXG4gICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgfVxyXG4gICAgPC9kaXY+O1xyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgRGF5Vmlld0V2ZW50IGZyb20gJy4vZGF5LXZpZXctZXZlbnQnO1xyXG5pbXBvcnQgVGltZUxpbmVzIGZyb20gJy4vdGltZS1saW5lcyc7XHJcbmltcG9ydCB7TUlOVVRFfSBmcm9tICcuLi8uLi91dGlscy9jb25zdGFudHMnO1xyXG5pbXBvcnQge2NydW5jaENvbGxpZGluZ0V2ZW50c30gZnJvbSAnLi9jcnVuY2gtY29sbGlkaW5nLWV2ZW50cyc7XHJcbmltcG9ydCB7IFN0dWRlbnRDYWxlbmRhckV2ZW50IH0gZnJvbSAnLi9tb2RlbHMnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICAgIGRheVN0YXJ0OiBtb21lbnQuTW9tZW50OyAgIC8vIE1pbGxpc2Vjb25kcyBhdCBzdGFydCBvZiB0aGUgZGF5IChmb3IgZXhhbXBsZSAwODowMCB0aGUgZGF5KVxyXG4gICAgZGF5RW5kOiBtb21lbnQuTW9tZW50OyAgICAgLy8gTWlsbGlzZWNvbmRzIGF0IGVuZCBvZiB0aGUgZGF5IChmb3IgZXhhbXBsZSAxNzowMCB0aGUgZGF5KVxyXG4gICAgZXZlbnRzOiBTdHVkZW50Q2FsZW5kYXJFdmVudFtdLCAgICAgLy8gRXZlbnRzIHRvIHNob3dcclxuICAgIGxvY2FsZTogc3RyaW5nLFxyXG4gICAgem9vbTogbnVtYmVyLFxyXG4gICAgaXNMYXN0Q2FsbDogYm9vbGVhblxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBEYXlWaWV3ICh7XHJcbiAgICBkYXlTdGFydCwgICAvLyBNaWxsaXNlY29uZHMgYXQgc3RhcnQgb2YgdGhlIGRheSAoZm9yIGV4YW1wbGUgMDg6MDAgdGhlIGRheSlcclxuICAgIGRheUVuZCwgICAgIC8vIE1pbGxpc2Vjb25kcyBhdCBlbmQgb2YgdGhlIGRheSAoZm9yIGV4YW1wbGUgMTc6MDAgdGhlIGRheSlcclxuICAgIGV2ZW50cywgICAgIC8vIEV2ZW50cyB0byBzaG93XHJcbiAgICBsb2NhbGUsXHJcbiAgICB6b29tLFxyXG4gICAgaXNMYXN0Q2FsbFxyXG59OiBQcm9wcykge1xyXG4gICAgY29uc3QgaGVpZ2h0ID0gKG1vbWVudChkYXlFbmQpLmRpZmYoZGF5U3RhcnQpIC8gTUlOVVRFKSAqIHpvb207XHJcblxyXG4gICAgY29uc3QgY3J1bmNoZWRFdmVudHMgPSBjcnVuY2hDb2xsaWRpbmdFdmVudHMoZXZlbnRzLCBpc0xhc3RDYWxsKTtcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGF5dmlld1wiIHN0eWxlPXt7XHJcbiAgICAgICAgICAgIHRvcDogMCxcclxuICAgICAgICAgICAgaGVpZ2h0LFxyXG4gICAgICAgICAgICBtYXhIZWlnaHQ6IGhlaWdodCxcclxuICAgICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXHJcbiAgICAgICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJ1xyXG4gICAgICAgIH19PlxyXG5cclxuICAgICAgICAgICAgPFRpbWVMaW5lcyBkYXlTdGFydD17ZGF5U3RhcnR9IGRheUVuZD17ZGF5RW5kfSB6b29tPXt6b29tfSAvPlxyXG5cclxuICAgICAgICAgICAge2NydW5jaGVkRXZlbnRzLm1hcCAoZXYgPT4gPERheVZpZXdFdmVudFxyXG4gICAgICAgICAgICAgICAga2V5PXtldi5pZH1cclxuICAgICAgICAgICAgICAgIGlkPXtldi5pZH1cclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17ZXYuY2xhc3NOYW1lfVxyXG4gICAgICAgICAgICAgICAgZGF5U3RhcnQ9e2RheVN0YXJ0fVxyXG4gICAgICAgICAgICAgICAgc3RhcnRNb21lbnQ9e2V2LnN0YXJ0TW9tZW50fVxyXG4gICAgICAgICAgICAgICAgZW5kTW9tZW50PXtldi5lbmRNb21lbnR9XHJcbiAgICAgICAgICAgICAgICB0ZXh0PXtldi50ZXh0fVxyXG4gICAgICAgICAgICAgICAgbG9jYXRpb249e2V2LmxvY2F0aW9ufVxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb249e2V2LmRlc2NyaXB0aW9ufVxyXG4gICAgICAgICAgICAgICAgd2lkdGg9e2V2LndpZHRofVxyXG4gICAgICAgICAgICAgICAgcG9zPXtldi5wb3N9XHJcbiAgICAgICAgICAgICAgICBsb2NhbGU9e2xvY2FsZX1cclxuICAgICAgICAgICAgICAgIHpvb209e3pvb219XHJcbiAgICAgICAgICAgICAgICBodG1sTGluaz17ZXYuaHRtbExpbmt9XHJcbiAgICAgICAgICAgIC8+KX1cclxuICAgICAgICA8L2Rpdj5cclxuICAgICk7XHJcbn1cclxuXHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSG91ck1hcmtlciAoe3N0YXJ0SG91ciwgZW5kSG91ciwgbG9jYWxlLCB6b29tfSkge1xyXG4gICAgY29uc3QgaG91clBpeGVscyA9IDYwICogem9vbTtcclxuXHJcbiAgICBjb25zdCBob3VycyA9IFtdO1xyXG4gICAgZm9yIChsZXQgaG91ciA9IHN0YXJ0SG91cjsgaG91ciA8PSBlbmRIb3VyOyArK2hvdXIpIHtcclxuICAgICAgICBob3Vycy5wdXNoKGhvdXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImhvdXJtYXJrZXJcIiBzdHlsZT17e1xyXG4gICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxyXG4gICAgICAgIGxlZnQ6IDAsXHJcbiAgICAgICAgdG9wOiAwLFxyXG4gICAgICAgIG92ZXJmbG93OiAndmlzaWJsZScsXHJcbiAgICAgICAgaGVpZ2h0OiAoZW5kSG91ciAtIHN0YXJ0SG91cikgKiBob3VyUGl4ZWxzXHJcbiAgICB9fT5cclxuICAgICAge2hvdXJzLm1hcCgoaG91ciwgaSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHlwb3MgPSBpICogaG91clBpeGVscztcclxuICAgICAgICByZXR1cm4gPHNwYW4ga2V5PXtob3VyfT48ZGl2IHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuICAgICAgICAgICAgICAgIGxlZnQ6IDAsXHJcbiAgICAgICAgICAgICAgICB0b3A6IHlwb3MsXHJcbiAgICAgICAgICAgICAgICBtYXJnaW5Ub3A6ICctNHB4JywgLy8gQ1NTIVxyXG4gICAgICAgICAgICAgICAgcGFkZGluZzogMFxyXG4gICAgICAgICAgICB9fT5cclxuICAgICAgICAgICAgICAgIHttb21lbnQoKS5ob3VyKGhvdXIpLm1pbnV0ZSgwKS50b0RhdGUoKS50b0xvY2FsZVN0cmluZyhsb2NhbGUsIHtob3VyOiBcIjItZGlnaXRcIiwgbWludXRlOiBcIjItZGlnaXRcIn0pfVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgey8qPGRpdiBjbGFzc05hbWU9XCJob3VybGluZVwiXHJcbiAgICAgICAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNlZWVlRjInLCAvLyBDU1MhXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogJzI0cHgnLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnNnB4JyxcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMCxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcxcHgnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogeXBvc1xyXG4gICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAge2hvdXIgPCBlbmRIb3VyICYmIDxkaXYgY2xhc3NOYW1lPVwiaGFsdmhvdXJsaW5lXCJcclxuICAgICAgICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI2VlZWVGMicsIC8vIENTUyFcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiAnMjZweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICc0cHgnLFxyXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMCxcclxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogJzFweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiB5cG9zICsgKGhvdXJQaXhlbHMgLyAyKSArIDFcclxuICAgICAgICAgICAgfX0gLz4gfSAqL31cclxuICAgICAgICA8L3NwYW4+O1xyXG4gICAgfSl9PC9kaXY+O1xyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IFdlZWtWaWV3IGZyb20gJy4vd2Vlay12aWV3JztcclxuaW1wb3J0IHtHb29nbGVDYWxlbmRhcn0gZnJvbSAnLi4vLi4vYXBpcy9nb29nbGUtY2FsZW5kYXInO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7Y2xvbmUsIGZsYXR0ZW4sIEx9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IFN0YXR1c0JhciBmcm9tICcuL3N0YXR1cy1iYXInO1xyXG5pbXBvcnQge2NvdXJzZU5hbWVUb0Nzc0NsYXNzfSBmcm9tICcuL2NvdXJzZS1uYW1lLXRvLWNzcy1jbGFzcyc7XHJcbmltcG9ydCB7c2hvdWxkSW5jbHVkZUNhbGVuZGFyfSBmcm9tICcuL3Nob3VsZC1pbmNsdWRlLWNhbGVuZGFyJztcclxuaW1wb3J0IHsgbG9jYWxNb21lbnQgfSBmcm9tICcuLi8uLi9nbG9iYWxzL21vbWVudC1zdi1sb2NhbGUnO1xyXG5pbXBvcnQgZW52LCB7IEVudiB9IGZyb20gJy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IExhbmd1YWdlQ29udGV4dCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9MYW5ndWFnZUNvbnRleHQnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICAgIGZpcnN0RGF5OiBtb21lbnQuTW9tZW50IHwgc3RyaW5nIHwgbnVtYmVyO1xyXG4gICAgbnVtRGF5czogbnVtYmVyO1xyXG4gICAgaW5pdGlhbFN0YXJ0SG91cjogbnVtYmVyO1xyXG4gICAgaW5pdGlhbEVuZEhvdXI6IG51bWJlcjtcclxuICAgIGluaXRpYWxab29tOiBudW1iZXI7XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgICBmaXJzdERheTogbW9tZW50Lk1vbWVudCxcclxuICAgIHN0YXJ0SG91cjogbnVtYmVyLFxyXG4gICAgZW5kSG91cjogbnVtYmVyLFxyXG4gICAgem9vbTogbnVtYmVyLFxyXG4gICAgY2FsZW5kYXJzOiB7W2NhbGVuZGFySWQ6IHN0cmluZ106IHtcclxuICAgICAgICBjYWxlbmRhcjogZ2FwaS5jbGllbnQuY2FsZW5kYXIuQ2FsZW5kYXJMaXN0RW50cnksXHJcbiAgICAgICAgZXZlbnRzOiBnYXBpLmNsaWVudC5jYWxlbmRhci5FdmVudFtdIH19LFxyXG4gICAgY2FsZW5kYXJzQmVpbmdMb2FkZWQ6IHN0cmluZ1tdLFxyXG4gICAgc3RhdHVzOiBzdHJpbmcsXHJcbiAgICBlcnJvcjogRXJyb3IgfCBudWxsIFxyXG59XHJcbiAgXHJcbmV4cG9ydCBjbGFzcyBDYWxlbmRhciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyAmIHtlbnY6IEVudn0sIFN0YXRlPiB7XHJcbiAgICBnY2FsOiBHb29nbGVDYWxlbmRhcjtcclxuICAgIHN0YXRpYyBjb250ZXh0VHlwZSA9IExhbmd1YWdlQ29udGV4dDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvciAocHJvcHM6IFByb3BzICYge2VudjogRW52fSkge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICAvLyBQcm9wc1xyXG4gICAgICAgIGxldCB7Zmlyc3REYXl9ID0gcHJvcHM7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBmaXJzdERheSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGZpcnN0RGF5ID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICBmaXJzdERheSA9IG1vbWVudCgpLnN0YXJ0T2YoJ3dlZWsnKS53ZWVrZGF5KGZpcnN0RGF5IGFzIG51bWJlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgaW5pdGlhbFN0YXJ0SG91cixcclxuICAgICAgICAgICAgaW5pdGlhbEVuZEhvdXIsXHJcbiAgICAgICAgICAgIGluaXRpYWxab29tXHJcbiAgICAgICAgfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU3RhdGVcclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBmaXJzdERheSxcclxuICAgICAgICAgICAgc3RhcnRIb3VyOiBpbml0aWFsU3RhcnRIb3VyLFxyXG4gICAgICAgICAgICBlbmRIb3VyOiBpbml0aWFsRW5kSG91cixcclxuICAgICAgICAgICAgem9vbTogaW5pdGlhbFpvb20sXHJcbiAgICAgICAgICAgIGNhbGVuZGFyczoge30sXHJcbiAgICAgICAgICAgIGNhbGVuZGFyc0JlaW5nTG9hZGVkOiBbXSxcclxuICAgICAgICAgICAgc3RhdHVzOiAnTG9hZGluZyBjYWxlbmRhcnMuLi4gKGF1dGhlbnRpY2F0aW5nLi4uKScsXHJcbiAgICAgICAgICAgIGVycm9yOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCB7Z29vZ2xlVG9rZW5Qcm92aWRlcn0gPSBwcm9wcy5lbnYgfHwgZW52O1xyXG4gICAgICAgIHRoaXMuZ2NhbCA9IG5ldyBHb29nbGVDYWxlbmRhcihnb29nbGVUb2tlblByb3ZpZGVyKTtcclxuXHJcbiAgICAgICAgLy8gU3RhcnQgY2FsbGluZyBvbiBHb29nbGUgQVBJIHJpZ2h0IGF3YXkuIFN0b3JlIHByb21pc2UgaW4gcHJvcGVydHkuXHJcbiAgICAgICAgdGhpcy5nY2FsLmVuc3VyZUluaXRlZCgpLnRoZW4oKCk9PntcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9hZERhdGEoZmlyc3REYXkpO1xyXG4gICAgICAgIH0pLmNhdGNoIChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgaWYgKCFlcnJvcikgZXJyb3IgPSBcIlVua25vd24gZXJyb3JcIjtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtlcnJvcn0pO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IgKGVycm9yLnN0YWNrIHx8IGVycm9yKTsgLy8gS2VlcCFcclxuICAgIH1cclxuXHJcbiAgICBsb2FkRGF0YShmaXJzdERheSkge1xyXG4gICAgICAgIC8vIFByb3BzXHJcbiAgICAgICAgY29uc3Qge251bURheXN9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBjb25zdCB7aW50bH0gPSB0aGlzLmNvbnRleHQ7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGZpcnN0RGF5LFxyXG4gICAgICAgICAgICBjYWxlbmRhcnM6IHt9LFxyXG4gICAgICAgICAgICBjYWxlbmRhcnNCZWluZ0xvYWRlZDogW10sXHJcbiAgICAgICAgICAgIGVycm9yOiBudWxsLFxyXG4gICAgICAgICAgICBzdGF0dXM6IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6XCJjYWxlbmRhci5sb2FkaW5nQ2FsZW5kYXJcIiwgZGVmYXVsdE1lc3NhZ2U6IFwiTG9hZGluZyBjYWxlbmRhcnMuLi4gKGxpc3RpbmcuLi4pXCJ9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBJbXBvcnRhbnQgdG8gcmV0dXJuIHRoZSBQcm9taXNlIHNvIHRoYXQgY2FsbGVyIHdpbGwgY2F0Y2ggYW55IGVycm9yLlxyXG4gICAgICAgIHJldHVybiB0aGlzLmdjYWwubGlzdENhbGVuZGFycygpLnRoZW4oY2FsZW5kYXJzID0+IHtcclxuICAgICAgICAgICAgLy8gSWdub3JlIHRoZSBcIndlZWsgbnVtYmVyc1wiIGNhbGVuZGFyIGFzIHdlIGFscmVhZHkgaW5jbHVkZSB3ZWVrIG51bWJlcnMgaW4gb3VyIHZpZXdcclxuICAgICAgICAgICAgY2FsZW5kYXJzID0gY2FsZW5kYXJzLmZpbHRlcihjYWwgPT4gc2hvdWxkSW5jbHVkZUNhbGVuZGFyKGNhbCkpO1xyXG4gICAgICAgICAgICAvLyEvV2VlayBOdW1iZXJzL2lnLnRlc3QoYy5zdW1tYXJ5KVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coY2FsZW5kYXJzLm1hcChjID0+ICh7YmdDb2xvcjogYy5iYWNrZ3JvdW5kQ29sb3IsIHByaW1hcnk6IGMucHJpbWFyeSwgc3VtbWFyeTogYy5zdW1tYXJ5LCB4OiBjfSkpKTtcclxuICAgICAgICAgICAgLy8gQ2FsZW5kYXJzIFN1Y2Nlc3NmdWxseSBsaXN0ZWQuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOlwiY2FsZW5kYXIubG9hZENhbGVuZGFyRXZlbnRzXCIsIGRlZmF1bHRNZXNzYWdlOiBcIkxvYWQgY2FsZW5kYXIgZXZlbnRzLi4uXCJ9KVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5nY2FsLmJhdGNoRXZlbnRzKHtcclxuICAgICAgICAgICAgICAgIGNhbGVuZGFyTGlzdDogY2FsZW5kYXJzLFxyXG4gICAgICAgICAgICAgICAgdGltZU1pbjogbW9tZW50KGZpcnN0RGF5KS5zdGFydE9mKCdkYXknKSxcclxuICAgICAgICAgICAgICAgIHRpbWVNYXg6IG1vbWVudChmaXJzdERheSkuYWRkKG51bURheXMsICdkYXlzJykuZW5kT2YoJ2RheScpXHJcbiAgICAgICAgICAgIH0pLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2NhbGVuZGFyczogcmVzdWx0LCBzdGF0dXM6ICcnfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG5hdmlnYXRlVG9QcmV2aW91c1dlZWsoKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkRGF0YShtb21lbnQodGhpcy5zdGF0ZS5maXJzdERheSkuYWRkKC0xLCBcIndlZWtcIikpLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbmF2aWdhdGVUb05leHRXZWVrKCkge1xyXG4gICAgICAgIHRoaXMubG9hZERhdGEobW9tZW50KHRoaXMuc3RhdGUuZmlyc3REYXkpLmFkZCgxLCBcIndlZWtcIikpLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyICgpIHtcclxuICAgICAgICAvLyBQcm9wc1xyXG4gICAgICAgIGNvbnN0IHsgbnVtRGF5cyB9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBjb25zdCB7aW50bH0gPSB0aGlzLmNvbnRleHQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU3RhdGVcclxuICAgICAgICBjb25zdCB7XHJcbiAgICAgICAgICAgIGZpcnN0RGF5LFxyXG4gICAgICAgICAgICBzdGFydEhvdXIsXHJcbiAgICAgICAgICAgIGVuZEhvdXIsXHJcbiAgICAgICAgICAgIHpvb20sXHJcbiAgICAgICAgICAgIGNhbGVuZGFycyxcclxuICAgICAgICAgICAgc3RhdHVzLFxyXG4gICAgICAgICAgICBlcnJvclxyXG4gICAgICAgIH0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgICAgICBjb25zdCBldmVudFNldHMgPSBPYmplY3Qua2V5cyhjYWxlbmRhcnMpXHJcbiAgICAgICAgICAgIC5tYXAoY2FsZW5kYXJJZCA9PiBjYWxlbmRhcnNbY2FsZW5kYXJJZF0pXHJcbiAgICAgICAgICAgIC5tYXAoKHtjYWxlbmRhciwgZXZlbnRzfSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNTY2hlZHVsZSA9IGNhbGVuZGFyLnN1bW1hcnkgPT09ICdTa29sc2NoZW1hJyAmJiBjYWxlbmRhci5kZXNjcmlwdGlvbiA9PT0gXCJTeW5jaHJvbml6ZWRcIjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzSG9saWRheSA9IC9ob2xpZGF5Ly50ZXN0KGNhbGVuZGFyLmlkKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzQ2xhc3NSb29tID0gL2NsYXNzcm9vbS8udGVzdChjYWxlbmRhci5pZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2xhc3NOYW1lcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGVuZGFyLmNvbG9ySWQpIGNsYXNzTmFtZXMucHVzaChcImdjYWwtcGFsZXR0ZS1cIiArIGNhbGVuZGFyLmNvbG9ySWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzU2NoZWR1bGUpIGNsYXNzTmFtZXMucHVzaChcImNvdXJzZS1ldmVudFwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChpc0hvbGlkYXkpIGNsYXNzTmFtZXMucHVzaChcImhvbGlkYXktZXZlbnRcIik7XHJcbiAgICAgICAgICAgICAgICAvLyBNYXAgR29vZ2xlIENhbGVuZGFyIGV2ZW50cyB0byBvdXIgb3duIGZvcm1hdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBldmVudHMubWFwKGV2ZW50ID0+ICh7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGV2ZW50LmlkLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBldmVudC5zdGFydCxcclxuICAgICAgICAgICAgICAgICAgICBlbmQ6IGV2ZW50LmVuZCxcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBldmVudC5zdW1tYXJ5LFxyXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBldmVudC5sb2NhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogZXZlbnQuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgLy9iZ0NvbG9yOiBjYWxlbmRhci5iYWNrZ3JvdW5kQ29sb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgLy9mZ0NvbG9yOiBjYWxlbmRhci5mb3JlZ3JvdW5kQ29sb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbExpbms6IGV2ZW50Lmh0bWxMaW5rLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogKGlzU2NoZWR1bGUgJiYgZXZlbnQuc3VtbWFyeSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZXMuY29uY2F0KGNvdXJzZU5hbWVUb0Nzc0NsYXNzKCdjb3Vyc2UtZXZlbnQtJywgZXZlbnQuc3VtbWFyeSkpIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lcykuam9pbihcIiBcIilcclxuICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGV2ZW50cyA9IGZsYXR0ZW4oZXZlbnRTZXRzKTtcclxuXHJcbiAgICAgICAgLy8gRWxzZSwgcmVuZGVyIHRoZSBXZWVrVmlldyBub3cuIEFueSBlcnJvciBzaG91bGQgYmUgZGlzcGxheWVkIGFzIHJlZCBzdGF0dXNcclxuICAgICAgICByZXR1cm4gPGRpdiBzdHlsZT17e3Bvc2l0aW9uOiAncmVsYXRpdmUnLCB0b3A6IDAsIGxlZnQ6IDB9fT5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidG4tdG9vbGJhciB3ZWVrLW5hdmlnYXRpb25cIiA+XHJcbiAgICAgICAgICAgICAgICB7Lyo8ZGl2IGNsYXNzTmFtZT1cImJ0bi1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtMYElkYWdgfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+Ki99XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ0bi1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuXCIgb25DbGljaz17KCk9PnRoaXMubmF2aWdhdGVUb1ByZXZpb3VzV2VlaygpfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtYW5nbGUtbGVmdFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ0blwiIG9uQ2xpY2s9eygpPT50aGlzLm5hdmlnYXRlVG9OZXh0V2VlaygpfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtYW5nbGUtcmlnaHRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnRuLWdyb3VwXCI+ICBcclxuICAgICAgICAgICAgICAgICAgICB7aW50bC5mb3JtYXRNZXNzYWdlKHtpZDpcImNhbGVuZGFyLmN1cnJlbnREYXRlXCIsIGRlZmF1bHRNZXNzYWdlOiBcIlZlY2thIHt3ZWVrfSwge3llYXJ9XCJ9LCB7d2VlazogbW9tZW50KGZpcnN0RGF5KS53ZWVrKCksIHllYXI6bW9tZW50KGZpcnN0RGF5KS55ZWFyKCl9KX1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPFdlZWtWaWV3XHJcbiAgICAgICAgICAgICAgICBsb2NhbGU9e2ludGwubG9jYWxlfVxyXG4gICAgICAgICAgICAgICAgZmlyc3REYXk9e2ZpcnN0RGF5fVxyXG4gICAgICAgICAgICAgICAgc3RhcnRIb3VyPXtzdGFydEhvdXJ9XHJcbiAgICAgICAgICAgICAgICBlbmRIb3VyPXtlbmRIb3VyfVxyXG4gICAgICAgICAgICAgICAgbnVtRGF5cz17bnVtRGF5c31cclxuICAgICAgICAgICAgICAgIHpvb209e3pvb219XHJcbiAgICAgICAgICAgICAgICBldmVudHM9e2V2ZW50c31cclxuICAgICAgICAgICAgICAgIHN0YXR1cz17c3RhdHVzfVxyXG4gICAgICAgICAgICAgICAgZXJyb3I9e2Vycm9yfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgfVxyXG59XHJcbiIsIi8qIENhbGVuZGFycyB0byBzaG93OlxyXG5cclxuICAgIHN1bW1hcnk6IFwiTWF0c2VkZWxcIixcclxuICAgIHN1bW1hcnk6IFwiU2tvbHNjaGVtYVwiLFxyXG4gICAgcHJpbWFyeTogdHJ1ZVxyXG4gICAgaWQuaW5jbHVkZXMoJ2NsYXNzcm9vbScpXHJcbiAgICBpZC5pbmNsdWRlcygnaG9saWRheScpXHJcbiovXHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZEluY2x1ZGVDYWxlbmRhciAoY2FsOiBnYXBpLmNsaWVudC5jYWxlbmRhci5DYWxlbmRhckxpc3RFbnRyeSkge1xyXG4gIGNvbnN0IHN1bW1hcnkgPSBjYWwuc3VtbWFyeSB8fCBcIlwiO1xyXG4gIGNvbnN0IGlzT3duZXIgPSAvb3duZXIvaWcudGVzdChjYWwuYWNjZXNzUm9sZSk7XHJcbiAgY29uc3QgaXNQcmltYXJ5ID0gISFjYWwucHJpbWFyeTtcclxuICBjb25zdCBpc0NsYXNzcm9vbUNhbGVuZGFyID0gL2NsYXNzcm9vbS9pZy50ZXN0KGNhbC5pZCk7XHJcbiAgY29uc3QgaXNIb2xpZGF5Q2FsZW5kYXIgPSAvaG9saWRheS9pZy50ZXN0KGNhbC5pZCk7XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICBpc1ByaW1hcnkgfHxcclxuICAgIGlzQ2xhc3Nyb29tQ2FsZW5kYXIgfHxcclxuICAgIGlzSG9saWRheUNhbGVuZGFyIHx8XHJcbiAgICAvLy9tYXRzZWRlbC9pZy50ZXN0KHN1bW1hcnkpIHx8XHJcbiAgICAoL3NjaGVtYS9pZy50ZXN0KHN1bW1hcnkpICYmIGlzT3duZXIpXHJcbiAgKTtcclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBTdGF0dXNCYXIgKHtzdGF0dXMsIGVycm9yfSkge1xyXG4gICAgaWYgKCFzdGF0dXMgJiYgIWVycm9yKSByZXR1cm4gbnVsbDtcclxuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cInN0YXR1c2JhclwiPlxyXG4gICAgICAgIHtlcnJvciA/XHJcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImVycm9yXCI+eycnK2Vycm9yfTwvcD4gOlxyXG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJzdGF0dXNcIj57c3RhdHVzfTwvcD59XHJcbiAgICA8L2Rpdj5cclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFRpbWVMaW5lcyAoe2RheVN0YXJ0LCBkYXlFbmQsIHpvb219KSB7XHJcbiAgICBjb25zdCBob3VyUGl4ZWxzID0gNjAgKiB6b29tO1xyXG4gICAgY29uc3Qgc3RhcnRIb3VyID0gbW9tZW50KGRheVN0YXJ0KS5ob3VyKCk7XHJcbiAgICBjb25zdCBlbmRIb3VyID0gbW9tZW50KGRheUVuZCkuaG91cigpO1xyXG5cclxuICAgIGNvbnN0IGhvdXJzID0gW107XHJcbiAgICBmb3IgKGxldCBob3VyID0gc3RhcnRIb3VyOyBob3VyIDw9IGVuZEhvdXI7ICsraG91cikge1xyXG4gICAgICAgIGhvdXJzLnB1c2goaG91cik7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIDxkaXY+XHJcbiAgICAgICAge2hvdXJzLm1hcChob3VyID0+IFxyXG4gICAgICAgICAgICA8ZGl2IGtleT17aG91cn0gY2xhc3NOYW1lPVwidGltZWxpbmVcIiBzdHlsZT17e1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgICAgICAgICAgIGJveFNpemluZzogJ2JvcmRlci1ib3gnLFxyXG4gICAgICAgICAgICAgICAgbWFyZ2luOiBgJHtob3VyUGl4ZWxzIC8gMn1weCAwIDAgMGAsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGhvdXJQaXhlbHMgLyAyXHJcbiAgICAgICAgfX0gLz4gKX1cclxuICAgIDwvZGl2PjtcclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuaW1wb3J0IERheVZpZXcgZnJvbSAnLi9kYXktdmlldyc7XHJcbmltcG9ydCBIb3VyTWFya2VyIGZyb20gJy4vaG91ci1tYXJrZXInO1xyXG5pbXBvcnQge2NhcGl0YWxpemVGaXJzdCwgY2xvbmUsIEx9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IFN0YXR1c0JhciBmcm9tICcuL3N0YXR1cy1iYXInO1xyXG5pbXBvcnQgeyBTdHVkZW50Q2FsZW5kYXJFdmVudCwgRGF5RGF0YSB9IGZyb20gJy4vbW9kZWxzJztcclxuaW1wb3J0IHsgTGFuZ3VhZ2VDb250ZXh0IH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL0xhbmd1YWdlQ29udGV4dCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gICAgZmlyc3REYXk6IG1vbWVudC5Nb21lbnQsICAvLyB7bW9tZW50fSBUaGUgZGF5IHRvIHN0YXJ0IHdpdGggKG5vcm1hbGx5IGEgbW9uZGF5KVxyXG4gICAgc3RhcnRIb3VyOiBudW1iZXIsIC8vIHtudW1iZXJ9IFRoZSBob3VyIHRvIHN0YXJ0IG9uXHJcbiAgICBlbmRIb3VyOiBudW1iZXIsICAgLy8ge251bWJlcn0gVGhlIGhvdXIgdG8gZW5kIHJlbmRlcmluZyBwZXIgZGF5XHJcbiAgICBudW1EYXlzOiBudW1iZXIsICAgLy8ge251bWJlcn0gTnVtYmVyIG9mIGRheXMsIG5vcm1hbGx5IDUuXHJcbiAgICBldmVudHM6IFN0dWRlbnRDYWxlbmRhckV2ZW50W10sICAgIC8vIEFycmF5IG9mIGV2ZW50cyB0byBkaXNwbGF5IGluIHRoZSB3ZWVrLlxyXG4gICAgbG9jYWxlOiBzdHJpbmcsICAgIC8vIExvY2FsZSB0byB1c2UgZm9yIHNob3dpbmcgd2VlayBkYXlzIGFuZCBob3VyIG1hcmtzLlxyXG4gICAgem9vbTogbnVtYmVyLCAgICAgIC8vIHtudW1iZXJ9IFpvb20gd2hlcmUgMSBtZWFucyB0aGF0IDEgbWludXRlID0gMSBwaXhlbC4gIFxyXG4gICAgc3RhdHVzPzogc3RyaW5nLFxyXG4gICAgZXJyb3I/OiBFcnJvclxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXZWVrVmlldyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcz4ge1xyXG4gICAgc3RhdGljIGNvbnRleHRUeXBlID0gTGFuZ3VhZ2VDb250ZXh0O1xyXG4gICAgcmVuZGVyICgpIHtcclxuICAgICAgICAvLyBQcm9wczpcclxuICAgICAgICBjb25zdCB7XHJcbiAgICAgICAgICAgIGZpcnN0RGF5LCAgLy8ge21vbWVudH0gVGhlIGRheSB0byBzdGFydCB3aXRoIChub3JtYWxseSBhIG1vbmRheSlcclxuICAgICAgICAgICAgc3RhcnRIb3VyLCAvLyB7bnVtYmVyfSBUaGUgaG91ciB0byBzdGFydCBvblxyXG4gICAgICAgICAgICBlbmRIb3VyLCAgIC8vIHtudW1iZXJ9IFRoZSBob3VyIHRvIGVuZCByZW5kZXJpbmcgcGVyIGRheVxyXG4gICAgICAgICAgICBudW1EYXlzLCAgIC8vIHtudW1iZXJ9IE51bWJlciBvZiBkYXlzLCBub3JtYWxseSA1LlxyXG4gICAgICAgICAgICBldmVudHMsICAgIC8vIEFycmF5IG9mIGV2ZW50cyB0byBkaXNwbGF5IGluIHRoZSB3ZWVrLlxyXG4gICAgICAgICAgICBsb2NhbGUsICAgIC8vIExvY2FsZSB0byB1c2UgZm9yIHNob3dpbmcgd2VlayBkYXlzIGFuZCBob3VyIG1hcmtzLlxyXG4gICAgICAgICAgICB6b29tLCAgICAgIC8vIHtudW1iZXJ9IFpvb20gd2hlcmUgMSBtZWFucyB0aGF0IDEgbWludXRlID0gMSBwaXhlbC4gIFxyXG4gICAgICAgICAgICBzdGF0dXMsXHJcbiAgICAgICAgICAgIGVycm9yXHJcbiAgICAgICAgfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgICAgIGNvbnN0IHtpbnRsfSA9IHRoaXMuY29udGV4dDtcclxuXHJcbiAgICAgICAgLy8gUHJlcGFyZSBEYXlWaWV3IGRhdGFzIFxyXG4gICAgICAgIGNvbnN0IGRheURhdGFzOiBEYXlEYXRhW10gPSBbXTtcclxuICAgICAgICBsZXQgZGF5ID0gbW9tZW50KGZpcnN0RGF5KTtcclxuICAgICAgICBmb3IgKGxldCBpPTA7aTxudW1EYXlzOyArK2kpIHtcclxuICAgICAgICAgICAgY29uc3QgZGF5U3RhcnQgPSBtb21lbnQoZGF5KS5ob3VyKHN0YXJ0SG91cik7XHJcbiAgICAgICAgICAgIGNvbnN0IGRheUVuZCA9IG1vbWVudChkYXkpLmhvdXIoZW5kSG91cik7XHJcbiAgICAgICAgICAgIGNvbnN0IGRheURhdGUgPSBtb21lbnQoZGF5KS5mb3JtYXQoJ3l5eXktTU0tREQnKTtcclxuICAgICAgICAgICAgY29uc3QgaXNUb2RheSA9IG1vbWVudChkYXlTdGFydCkuc3RhcnRPZihcImRheVwiKS52YWx1ZU9mKCkgPT09IG1vbWVudCgpLnN0YXJ0T2YoXCJkYXlcIikudmFsdWVPZigpO1xyXG4gICAgICAgICAgICBkYXlEYXRhcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IGNhcGl0YWxpemVGaXJzdChkYXlTdGFydC50b0RhdGUoKS50b0xvY2FsZVN0cmluZyhsb2NhbGUsIHtcclxuICAgICAgICAgICAgICAgICAgICB3ZWVrZGF5OiAnbG9uZycsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF5OidudW1lcmljJyxcclxuICAgICAgICAgICAgICAgICAgICBtb250aDogJ3Nob3J0J30pKSxcclxuICAgICAgICAgICAgICAgIGRheVN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgZGF5RW5kLFxyXG4gICAgICAgICAgICAgICAgaXNUb2RheSxcclxuICAgICAgICAgICAgICAgIGV2ZW50czogZXZlbnRzLmZpbHRlcihldmVudCA9PlxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0YXJ0ICYmIGV2ZW50LmVuZCAmJiBldmVudC5zdGFydC5kYXRlVGltZSAmJiBldmVudC5lbmQuZGF0ZVRpbWUgJiZcclxuICAgICAgICAgICAgICAgICAgICAobW9tZW50KGV2ZW50LnN0YXJ0LmRhdGVUaW1lKS5pc0JldHdlZW4oZGF5U3RhcnQsIGRheUVuZCkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgbW9tZW50KGV2ZW50LmVuZC5kYXRlVGltZSkuaXNCZXR3ZWVuKGRheVN0YXJ0LCBkYXlFbmQpKSlcclxuICAgICAgICAgICAgICAgICAgICAgLy8gQ2hhbmdlIHN0YXJ0IC8gZW5kIHRvIGRpcmVjdGx5IHBvaW50IHRvIHRoZSBkYXRlVGltZVxyXG4gICAgICAgICAgICAgICAgICAgICAubWFwKGV2ZW50ID0+IGNsb25lKGV2ZW50LCB7c3RhcnRNb21lbnQ6IG1vbWVudChldmVudC5zdGFydC5kYXRlVGltZSksIGVuZE1vbWVudDogbW9tZW50KGV2ZW50LmVuZC5kYXRlVGltZSl9KSlcclxuICAgICAgICAgICAgICAgICAgICAgLnNvcnQoKGEsYikgPT4gYS5zdGFydE1vbWVudC52YWx1ZU9mID4gYi5zdGFydE1vbWVudC52YWx1ZU9mID8gMSA6IGEuc3RhcnRNb21lbnQgPCBiLnN0YXJ0TW9tZW50ID8gLTEgOiAwKSxcclxuICAgICAgICAgICAgICAgIGZ1bGxEYXlFdmVudHM6IGV2ZW50cy5maWx0ZXIoZXZlbnQgPT5cclxuICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZnkgdGhhdCBpdCBpcyBhIGZ1bGwtZGF5LWV2ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RhcnQgJiYgZXZlbnQuZW5kICYmIGV2ZW50LnN0YXJ0LmRhdGUgJiYgZXZlbnQuZW5kLmRhdGUgJiZcclxuICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZnkgaXQgYXBwbGllcyB0byBjdXJyZW50IGRheVxyXG4gICAgICAgICAgICAgICAgICAgIChldmVudC5zdGFydC5kYXRlIDw9IGRheURhdGUgJiYgZXZlbnQuZW5kLmRhdGUgPiBkYXlEYXRlKSkgXHJcbiAgICAgICAgICAgICAgICAgICAgIC8vIENoYW5nZSBzdGFydCAvIGVuZCB0byBkaXJlY3RseSBwb2ludCB0byB0aGUgZGF0ZSBvYmplY3RcclxuICAgICAgICAgICAgICAgICAgICAubWFwKGV2ZW50ID0+IGNsb25lKGV2ZW50LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZTogZXZlbnQuc3RhcnQuZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kRGF0ZTogZXZlbnQuZW5kLmRhdGV9KSlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRheSA9IG1vbWVudChkYXkpIC8vIGNsb25lIGl0XHJcbiAgICAgICAgICAgICAgICAuYWRkKDEsICdkYXlzJyk7IC8vIEFkZCBhbm90aGVyIGRheVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVuZGVyXHJcbiAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwidmVtZW5kby13ZWVrdmlld1wiPlxyXG4gICAgICAgICAgPHRhYmxlPjx0Ym9keT5cclxuICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgPHRkIHN0eWxlPXt7Ym9yZGVyOiAwfX0+PC90ZD5cclxuICAgICAgICAgICAgICAgIHtkYXlEYXRhcy5tYXAoZCA9PiA8dGQga2V5PXtkLmRheVN0YXJ0LnRvSVNPU3RyaW5nKCl9IGNsYXNzTmFtZT17ZC5pc1RvZGF5ID8gXCJ0b2RheVwiIDogbnVsbH0+XHJcbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZGF5bmFtZVwiPntkLm5hbWV9PC9wPlxyXG4gICAgICAgICAgICAgICAgPC90ZD4pfVxyXG4gICAgICAgICAgICA8L3RyPjx0cj5cclxuICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT17e2JvcmRlcjogMH19PjxwIGNsYXNzTmFtZT1cIndlZWstbnVtYmVyXCI+e2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6XCJjYWxlbmRhci53ZWVrTnVtYmVyXCIsIGRlZmF1bHRNZXNzYWdlOlwiVnt3ZWVrTnVtYmVyfVwifSwge3dlZWtOdW1iZXI6bW9tZW50KGZpcnN0RGF5KS53ZWVrKCl9KX08L3A+PC90ZD5cclxuICAgICAgICAgICAgICAgIHtkYXlEYXRhcy5tYXAoZGF5ID0+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkIGtleT17ZGF5LmRheVN0YXJ0LnRvSVNPU3RyaW5nKCl9IGNsYXNzTmFtZT17ZGF5LmlzVG9kYXkgPyBcInRvZGF5XCIgOiBudWxsfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAge2RheS5mdWxsRGF5RXZlbnRzLm1hcCgoe2lkLCB0ZXh0LCBsb2NhdGlvbiwgZGVzY3JpcHRpb24sIGh0bWxMaW5rLCBjbGFzc05hbWV9KSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2lkfSBjbGFzc05hbWU9e1wiZGF5dmlld2V2ZW50IGZ1bGwtZGF5IFwiICsgY2xhc3NOYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtgJHt0ZXh0fWAgKyAobG9jYXRpb24gP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxcblwiICsgaW50bC5mb3JtYXRNZXNzYWdlKHtpZDpcImNhbGVuZGFyLmZ1bGxEYXlFdmVudExvY2F0aW9uXCIsIGRlZmF1bHRNZXNzYWdlOlwiUGxhdHM6IHtsb2NhdGlvbn1cIn0sIHtsb2NhdGlvbjpsb2NhdGlvbn0pIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcIikgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZGVzY3JpcHRpb24gP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcXG5cIiArIGRlc2NyaXB0aW9uIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cImV2ZW50LXRpdGxlXCIgaHJlZj17aHRtbExpbmt9IHRhcmdldD1cImNhbGVuZGFyLWV2ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0ZXh0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bG9jYXRpb24gJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZXZlbnQtbG9jYXRpb25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsb2NhdGlvbn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7ZGVzY3JpcHRpb24gJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZXZlbnQtZGVzY3JpcHRpb25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkZXNjcmlwdGlvbn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgIDwvdHI+PHRyPlxyXG4gICAgICAgICAgICA8dGQgc3R5bGU9e3tib3JkZXI6IDB9fT5cclxuICAgICAgICAgICAgICAgIDxIb3VyTWFya2VyXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRIb3VyPXtzdGFydEhvdXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgZW5kSG91cj17ZW5kSG91cn1cclxuICAgICAgICAgICAgICAgICAgICBsb2NhbGU9e2xvY2FsZX1cclxuICAgICAgICAgICAgICAgICAgICB6b29tPXt6b29tfSAvPlxyXG4gICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAge2RheURhdGFzLm1hcChkYXkgPT4gPHRkIGtleT17ZGF5LmRheVN0YXJ0LnRvSVNPU3RyaW5nKCl9IGNsYXNzTmFtZT17ZGF5LmlzVG9kYXkgPyBcInRvZGF5XCIgOiBudWxsfT48RGF5Vmlld1xyXG4gICAgICAgICAgICAgICAgICAgIGtleT17ZGF5LmRheVN0YXJ0LnRvSVNPU3RyaW5nKCl9XHJcbiAgICAgICAgICAgICAgICAgICAgZGF5U3RhcnQ9e2RheS5kYXlTdGFydH1cclxuICAgICAgICAgICAgICAgICAgICBkYXlFbmQ9e2RheS5kYXlFbmR9XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRzPXtkYXkuZXZlbnRzfVxyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsZT17bG9jYWxlfVxyXG4gICAgICAgICAgICAgICAgICAgIHpvb209e3pvb219XHJcbiAgICAgICAgICAgICAgICAgICAgaXNMYXN0Q2FsbD17c3RhdHVzID09ICcnfSAvPiA8L3RkPil9XHJcbiAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIChzdGF0dXMgfHwgZXJyb3IpICYmICghZXJyb3IgfHwgZXJyb3IubmFtZSAhPT0gXCJVbmF1dGhvcml6ZWRFcnJvclwiKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2hvdyBzdGF0dXMgLyBlcnJvclxyXG4gICAgICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAgICAgPHRyPjx0ZCBzdHlsZT17e2JvcmRlcjogMH19PjwvdGQ+PHRkIHN0eWxlPXt7Ym9yZGVyOiAwfX0gY29sU3Bhbj17bnVtRGF5c30+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxTdGF0dXNCYXIgc3RhdHVzPXtzdGF0dXN9IGVycm9yPXtlcnJvcn0gLz5cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPjwvdHI+XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIDwvdGJvZHk+PC90YWJsZT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIH1cclxufSIsImltcG9ydCB7IFVzZXJUYXNrc0JveFByb3BzIH0gZnJvbSBcIi4uL3dlZWtwbGFubmVyL3VzZXItdGFza3MtYm94XCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0V2Vla3BsYW5uZXJQcm9ncmVzc0RhdGEodGFza1NldHM6IFBhcnRpYWw8VXNlclRhc2tzQm94UHJvcHM+W10pIHtcclxuICAgIHZhciBjaGFydFRhc2tzOiB7XHJcbiAgICAgICAgY29tcGxldGVkVGFza3M6IG51bWJlciwgXHJcbiAgICAgICAgdG90YWxOdW1iZXJPZlRhc2tzOiBudW1iZXIsXHJcbiAgICAgICAgc3ViamVjdERhdGE6IHtcclxuICAgICAgICAgICAgW2NvbHVtbkhlYWRlcjogc3RyaW5nXTogeyBjb21wbGV0ZWROdW1iZXJPZlRhc2tzOiBudW1iZXIsIG51bWJlck9mVGFza3M6IG51bWJlciB9XHJcbiAgICAgICAgfVxyXG4gICAgfSA9IHtjb21wbGV0ZWRUYXNrczogMCwgdG90YWxOdW1iZXJPZlRhc2tzOiAwICwgc3ViamVjdERhdGE6IHt9fTtcclxuXHJcbiAgICB0YXNrU2V0cy5mb3JFYWNoKGVsZW0gPT4gZWxlbS5sZWFybmluZ0dvYWxzLmZvckVhY2goeCA9PiB7XHJcbiAgICAgICAgdmFyIHN1YmplY3RDb21wbGV0ZWRUYXNrcyA9IHgudGFza3MuZmlsdGVyKHQgPT4gdC5kb25lKS5sZW5ndGg7XHJcbiAgICAgICAgbGV0IGNvdXJzZVN1YmplY3REYXRhID0gY2hhcnRUYXNrcy5zdWJqZWN0RGF0YVtlbGVtLmNvdXJzZU5hbWVdO1xyXG4gICAgICAgIGlmICghY291cnNlU3ViamVjdERhdGEpIHtcclxuICAgICAgICAgICAgY291cnNlU3ViamVjdERhdGEgPSBjaGFydFRhc2tzLnN1YmplY3REYXRhW2VsZW0uY291cnNlTmFtZV0gPSB7XHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWROdW1iZXJPZlRhc2tzOiAwLFxyXG4gICAgICAgICAgICAgICAgbnVtYmVyT2ZUYXNrczogMFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb3Vyc2VTdWJqZWN0RGF0YS5jb21wbGV0ZWROdW1iZXJPZlRhc2tzICs9IHN1YmplY3RDb21wbGV0ZWRUYXNrcztcclxuICAgICAgICBjb3Vyc2VTdWJqZWN0RGF0YS5udW1iZXJPZlRhc2tzICs9IHgudGFza3MubGVuZ3RoO1xyXG5cclxuICAgICAgICBjaGFydFRhc2tzLmNvbXBsZXRlZFRhc2tzICs9IHN1YmplY3RDb21wbGV0ZWRUYXNrcztcclxuICAgICAgICBjaGFydFRhc2tzLnRvdGFsTnVtYmVyT2ZUYXNrcyArPSB4LnRhc2tzLmxlbmd0aDtcclxuICAgIH0pKTtcclxuICAgIHJldHVybiBjaGFydFRhc2tzO1xyXG59IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICAgIHBlcmNlbnRhZ2U6IG51bWJlcjtcclxuICAgIGJhY2tncm91bmRDb2xvcj86IHN0cmluZztcclxuICAgIHByb2dyZXNzQ29sb3I/OiBzdHJpbmc7XHJcbiAgICBlcnJvck1lc3NhZ2U/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBEb3VnaG51dCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcz4ge1xyXG4gICAgcHVibGljIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XHJcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcIiNlZmVmZWZcIixcclxuICAgICAgICBwcm9ncmVzc0NvbG9yOiBcIiMzZGJjYTJcIixcclxuICAgICAgICBlcnJvck1lc3NhZ2U6IG51bGxcclxuICAgIH07XHJcblxyXG4gICAgcmVuZGVyKCl7XHJcbiAgICAgICAgY29uc3Qge3BlcmNlbnRhZ2UsIGVycm9yTWVzc2FnZSwgYmFja2dyb3VuZENvbG9yLCBwcm9ncmVzc0NvbG9yfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgICAgLy9kZWZhdWx0IHZhbHVlc1xyXG4gICAgICAgIHZhciBzdHJva2UgPSAyO1xyXG4gICAgICAgIC8vZXF1YWxzIHdpdGggaGUgY2lyY3VtZmVyZW5jZS8ySUlcclxuICAgICAgICB2YXIgcmFkaXVzID0gMTAwIC8gKDIgKiAzLjE0KTtcclxuICAgICAgICAvL3Rha2UgaW50byBhY2NvdW50IHRoZSBzdHJva2VcclxuICAgICAgICB2YXIgY2VudGVyID0gcmFkaXVzICsgc3Ryb2tlOyBcclxuICAgICAgICB2YXIgdmlld2JveFcgPSBjZW50ZXIgKiAyO1xyXG4gICAgICAgIHZhciB2aWV3dmJveEggPSBjZW50ZXIgKiAyO1xyXG4gICAgICAgIGNvbnN0IHJvdW5kZWRQZXJjZW50YWdlID0gTWF0aC5yb3VuZChwZXJjZW50YWdlKTtcclxuICAgICAgICB2YXIgc3RhcnRFcnJvclRleHQgPSAxMDtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8c3ZnIGNsYXNzTmFtZT1cImRvdWdobnV0LWNoYXJ0XCIgdmlld0JveD17YDAgMCAke3ZpZXdib3hXfSAke3ZpZXd2Ym94SH1gfSB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCI+XHJcbiAgICAgICAgICAgICAgICA8Y2lyY2xlIGNsYXNzTmFtZT1cImNpcmNsZS1jaGFydC1iYWNrZ3JvdW5kXCIgc3Ryb2tlPXtiYWNrZ3JvdW5kQ29sb3J9IHN0cm9rZVdpZHRoPXtzdHJva2UgKyAxfSBmaWxsPVwibm9uZVwiIGN4PXtjZW50ZXJ9IGN5PXtjZW50ZXJ9IHI9e3JhZGl1c30gLz5cclxuICAgICAgICAgICAgICAgIDxjaXJjbGUgY2xhc3NOYW1lPVwiY2lyY2xlLWNoYXJ0LWNpcmNsZVwiIHN0cm9rZT17cHJvZ3Jlc3NDb2xvcn0gcmVmPVwicHJvZ3Jlc3NDaXJjbGVcIiBzdHJva2VXaWR0aD17c3Ryb2tlfSBzdHlsZT17eyBzdHJva2VEYXNoYXJyYXk6IGAke3JvdW5kZWRQZXJjZW50YWdlfSwgMTAwYCB9fSBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBmaWxsPVwibm9uZVwiIGN4PXtjZW50ZXJ9IGN5PXtjZW50ZXJ9IHI9e3JhZGl1c30gLz5cclxuICAgICAgICAgICAgICAgIDxnIGNsYXNzTmFtZT1cImNpcmNsZS1jaGFydC1pbmZvXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgeyFlcnJvck1lc3NhZ2UgPyA8dGV4dCBjbGFzc05hbWU9XCJjaXJjbGUtY2hhcnQtcGVyY2VudFwiIHg9e2NlbnRlcn0geT17Y2VudGVyfSBhbGlnbm1lbnRCYXNlbGluZT1cImNlbnRyYWxcIiB0ZXh0QW5jaG9yPVwibWlkZGxlXCI+e2Ake3JvdW5kZWRQZXJjZW50YWdlfSVgfTwvdGV4dD4gOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGV4dCBjbGFzc05hbWU9XCJjaXJjbGUtY2hhcnQtcGVyY2VudC1lcnJvclwiIHg9e2NlbnRlcn0geT17Y2VudGVyfSBhbGlnbm1lbnRCYXNlbGluZT1cImNlbnRyYWxcIiBmb250U2l6ZT1cIjVcIiB0ZXh0QW5jaG9yPVwibWlkZGxlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlLnNwbGl0KCcgJykubWFwKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHNwYW4gPSA8dHNwYW4ga2V5PXtlbGVtZW50fSB4PXtjZW50ZXJ9IHk9e3N0YXJ0RXJyb3JUZXh0fT57ZWxlbWVudH08L3RzcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydEVycm9yVGV4dCArPSA1O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHNwYW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZXh0Pn1cclxuICAgICAgICAgICAgICAgIDwvZz5cclxuICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG59IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICAgIG51bWJlck9mVGFza3M6IG51bWJlcjtcclxuICAgIGNvbXBsZXRlZE51bWJlck9mVGFza3M6IG51bWJlcjtcclxuICAgIG1heGltdW1UYXNrc0Rpc3BsYXllZD86IG51bWJlcjtcclxuICAgIGJhY2tncm91bmRDb2xvcj86IHN0cmluZztcclxuICAgIHByb2dyZXNzQ29sb3I/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBHb2FsUHJvZ3Jlc3MgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHM+IHtcclxuICAgIHB1YmxpYyBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xyXG4gICAgICAgIG51bWJlcm9mVGFza3M6IDAsXHJcbiAgICAgICAgY29tcGxldGVkTnVtYmVyT2ZUYXNrczogMCxcclxuICAgICAgICBtYXhpbXVtVGFza3NEaXNwbGF5ZWQ6IDEwLFxyXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJsaWdodGdyZXlcIixcclxuICAgICAgICBwcm9ncmVzc0NvbG9yOiBcIiMzZGJjYTJcIixcclxuICAgIH07XHJcblxyXG4gICAgY3JlYXRlUHJvZ3Jlc3MgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBudW1iZXJPZlRhc2tzLCBjb21wbGV0ZWROdW1iZXJPZlRhc2tzLCBtYXhpbXVtVGFza3NEaXNwbGF5ZWQsIGJhY2tncm91bmRDb2xvciwgcHJvZ3Jlc3NDb2xvciB9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBsZXQgcHJvZ3Jlc3MgPSBbXTtcclxuICAgICAgICBpZihudW1iZXJPZlRhc2tzID4gbWF4aW11bVRhc2tzRGlzcGxheWVkKXtcclxuICAgICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJwcm9ncmVzcy1vdmVydmlld1wiPiB7Y29tcGxldGVkTnVtYmVyT2ZUYXNrc30gLyB7bnVtYmVyT2ZUYXNrc30gPC9kaXY+O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgdGFza05vID0gMTsgdGFza05vIDw9IG51bWJlck9mVGFza3M7IHRhc2tObysrKSB7XHJcbiAgICAgICAgICAgIHByb2dyZXNzLnB1c2goXHJcbiAgICAgICAgICAgIDxzdmcga2V5PXt0YXNrTm99PlxyXG4gICAgICAgICAgICAgICAgPGNpcmNsZSBjbGFzc05hbWU9XCJjaXJjbGUtY2hhcnQtYmFja2dyb3VuZFwiIGZpbGw9e3Rhc2tObyA+IGNvbXBsZXRlZE51bWJlck9mVGFza3MgPyBiYWNrZ3JvdW5kQ29sb3IgOiBwcm9ncmVzc0NvbG9yfSBjeD1cIjhcIiBjeT1cIjhcIiByPVwiOFwiIC8+XHJcbiAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcHJvZ3Jlc3M7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCl7ICBcclxuICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJnb2Fscy1wcm9ncmVzc1wiPnt0aGlzLmNyZWF0ZVByb2dyZXNzKCl9PC9kaXY+XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gICAgcGVyY2VudGFnZTogbnVtYmVyO1xyXG4gICAgYmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xyXG4gICAgcHJvZ3Jlc3NDb2xvcj86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFByb2dyZXNzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzPiB7XHJcbiAgICBwdWJsaWMgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICBwZXJjZW50YWdlOiAwLFxyXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjRjFGNUY0XCIsXHJcbiAgICAgICAgcHJvZ3Jlc3NDb2xvcjogXCIjM2RiY2EyXCIsXHJcbiAgICB9O1xyXG5cclxuICAgIHJlbmRlcigpe1xyXG4gICAgICAgIGNvbnN0IHtwZXJjZW50YWdlLCBiYWNrZ3JvdW5kQ29sb3IsIHByb2dyZXNzQ29sb3J9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBjb25zdCByb3VuZGVkUGVyY2VudGFnZSA9IE1hdGgucm91bmQocGVyY2VudGFnZSk7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJwcm9ncmVzcy1jaGFydFwiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjI1XCI+XHJcbiAgICAgICAgICAgIDxyZWN0IGZpbGw9e2JhY2tncm91bmRDb2xvcn0gIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIiByeD1cIjRcIi8+XHJcbiAgICAgICAgICAgIDxyZWN0IGNsYXNzTmFtZT1cImZpbGxcIiBmaWxsPXtwcm9ncmVzc0NvbG9yfSB3aWR0aD17YCR7cm91bmRlZFBlcmNlbnRhZ2V9JWB9IGhlaWdodD1cIjEwMCVcIiByeD1cIjRcIi8+XHJcbiAgICAgICAgICAgIDx0ZXh0IGNsYXNzTmFtZT1cImZpbGxlZC10ZXh0XCIgdGV4dEFuY2hvcj1cIm1pZGRsZVwiIHg9XCI1MCVcIiB5PVwiNTAlXCIgZHk9XCIuM2VtXCI+e2Ake3JvdW5kZWRQZXJjZW50YWdlfSVgfTwvdGV4dD5cdFxyXG4gICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICApXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEwgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvdXRpbHNcIjtcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgb25DbGljayxcclxuICBjbGFzc05hbWU/LFxyXG4gIHN0eWxlPyxcclxuICB0aXRsZT9cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBSZW1vdmVJdGVtID0gKHsgb25DbGljaywgY2xhc3NOYW1lLCBzdHlsZSwgdGl0bGUgfTogUHJvcHMpID0+XHJcblxyXG4gIDxkaXZcclxuICAgIHRpdGxlPXt0aXRsZSB8fCBMYFJhZGVyYWB9XHJcbiAgICBjbGFzc05hbWU9e1wicmVtb3ZlSXRlbSBcIiArIChjbGFzc05hbWUgfHwgXCJcIil9XHJcbiAgICBvbkNsaWNrPXtvbkNsaWNrfSBzdHlsZT17c3R5bGV9IC8+XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuXHJcbmV4cG9ydCBjb25zdCBTcGlubmVyID0gKCk9PiA8c3Bhbj48aSBjbGFzc05hbWU9XCJmYSBmYS1zcGlubmVyIGZhLXNwaW5cIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+Jm5ic3A7PC9zcGFuPjtcclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICB2aXNpYmxlOiBib29sZWFuO1xyXG4gIHRleHQ6IHN0cmluZztcclxuICBjbGFzc05hbWU/OiBzdHJpbmc7XHJcbiAgb25Db25maXJtOiAoKT0+dm9pZDtcclxuICBvbkNhbmNlbDogKCk9PnZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBDb25maXJtYXRpb24gKHByb3BzOiBQcm9wcykge1xyXG4gIHJldHVybiA8ZGl2XHJcbiAgICBjbGFzc05hbWU9e2Bjb25maXJtYXRpb24tYm94ICR7cHJvcHMuY2xhc3NOYW1lfSR7cHJvcHMudmlzaWJsZSA/IFwiIHZpc2libGVcIiA6IFwiXCJ9YH0+XHJcbiAgICA8cD57cHJvcHMudGV4dH08L3A+XHJcbiAgICA8YnV0dG9uIG9uQ2xpY2s9eygpPT5wcm9wcy5vbkNvbmZpcm0oKX0+T0s8L2J1dHRvbj5cclxuICAgIDxidXR0b24gb25DbGljaz17KCk9PnByb3BzLm9uQ2FuY2VsKCl9PkF2YnJ5dDwvYnV0dG9uPlxyXG4gIDwvZGl2PjtcclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IExlYXJuaW5nTW9kdWxlVGFzaywgVGFza0xpc3QgfSBmcm9tICcuL3Rhc2stbGlzdCc7XHJcbmltcG9ydCB7IExhbmd1YWdlQ29udGV4dCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9MYW5ndWFnZUNvbnRleHQnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBjb21tb25UYXNrczogTGVhcm5pbmdNb2R1bGVUYXNrW11cclxuICBsZWFybmluZ0dvYWxzOiBMZWFybmluZ0dvYWxbXVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIExlYXJuaW5nR29hbCB7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIGxlYXJuaW5nVGFza3M6IExlYXJuaW5nTW9kdWxlVGFza1tdO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTGVhcm5pbmdHb2Fsc0xpc3QgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHM+IHtcclxuICBzdGF0aWMgY29udGV4dFR5cGUgPSBMYW5ndWFnZUNvbnRleHQ7XHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qge2NvbW1vblRhc2tzLCBsZWFybmluZ0dvYWxzfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCB7aW50bH0gPSB0aGlzLmNvbnRleHQ7XHJcbiAgICByZXR1cm4gPGRpdj57bGVhcm5pbmdHb2Fscy5tYXAobGcgPT4gPGRpdiBrZXk9e2xnLm5hbWV9PlxyXG4gICAgICA8aDU+e2xnLm5hbWV9PC9oNT5cclxuICAgICAgPFRhc2tMaXN0IGxlYXJuaW5nVGFza3M9e2xnLmxlYXJuaW5nVGFza3N9IC8+XHJcbiAgICA8L2Rpdj4pfVxyXG4gICAge2NvbW1vblRhc2tzLmxlbmd0aCA+IDAgJiYgPGRpdj5cclxuICAgICAge2xlYXJuaW5nR29hbHMubGVuZ3RoID4gMCAmJiA8aDU+e2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6XCJsZWFybmluZ0dvYWxzTG9zdC5vdmVyYWxsXCIsIGRlZmF1bHRNZXNzYWdlOlwiw5Z2ZXJncmlwYW5kZVwifSkgfTwvaDU+fSBcclxuICAgICAgPFRhc2tMaXN0IGxlYXJuaW5nVGFza3M9e2NvbW1vblRhc2tzfSAvPlxyXG4gICAgPC9kaXY+fVxyXG4gICAgPC9kaXY+O1xyXG4gIH1cclxufSIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgQ291cnNlLCBDb3Vyc2VNb2R1bGUsIFRhc2ssIFVzZXJUYXNrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUgfSBmcm9tIFwiLi4vLi4vd2Vla3BsYW5uZXIvd2Vla3BsYW5uZXItcGVyc2lzdGVkLXN0YXRlXCI7XHJcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuaW1wb3J0IHsgY3JlYXRlVVVJRCwgQmF0Y2hSdW5uZXIsIERvY3VtZW50QWNjZXNzIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQgeyB1c2VyVGFza3NSZXBvIH0gZnJvbSAnLi4vLi4vLi4vcmVwb3MvdXNlci10YXNrcy1yZXBvJztcclxuaW1wb3J0IHsgYXJyYXlUb01hcCwgTCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgU3Bpbm5lciB9IGZyb20gJy4uLy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3NwaW5uZXInO1xyXG5pbXBvcnQgeyBDb25maXJtYXRpb24gfSBmcm9tICcuL2NvbmZpcm1hdGlvbic7XHJcbmltcG9ydCB7IExhbmd1YWdlQ29udGV4dCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9MYW5ndWFnZUNvbnRleHQnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBsZWFybmluZ1Rhc2tzOiBMZWFybmluZ01vZHVsZVRhc2tbXVxyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIHdlZWtEYXRlOiBudW1iZXI7XHJcbiAgdXNlclRhc2tzOiBVc2VyVGFza1tdO1xyXG4gIGNvbmZpcm1hdGlvbnM6IHN0cmluZ1tdO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIExlYXJuaW5nTW9kdWxlVGFzayB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgdXJsOiBzdHJpbmc7XHJcbiAgLyoqIGNvdXJzZU5hbWVcclxuICAgKiBGb3IgS0c6IGNvdXJzZU5hbWVcclxuICAgKiBGb3IgS1M6IFN1YmplY3QgbmFtZVxyXG4gICAqL1xyXG4gIGNvdXJzZU5hbWU6IHN0cmluZztcclxuICAvKiogbGVhcm5pbmdHb2FsXHJcbiAgICogRm9yIEtHOiBtb2R1bGUgbmFtZSBvciBsZWFybmluZyBnb2FsIG9mIHRoZSB0YXNrXHJcbiAgICogRm9yIEtTL3N0ZXAtY291cnNlOiBjb3Vyc2UgbmFtZVxyXG4gICAqIEZvciBLUy90aGVtZS1jb3Vyc2U6IGxlYXJuaW5nIGdvYWxcclxuICAgKi9cclxuICBsZWFybmluZ0dvYWw6IHN0cmluZztcclxuICAvKiogU3RlcFxyXG4gICAqIE9ubHkgcHJlc2VudCBpbiBLUy9zdGVwLWNvdXJzZVxyXG4gICAqL1xyXG4gIHN0ZXA/OiBudW1iZXI7XHJcbiAgLyoqIHRhc2tcclxuICAgKiBPbmx5IGZvciBjb3Vyc2VzIGJ1aWx0IGJ5IGNvdXJzZWJ1aWxkZXJcclxuICAgKi9cclxuICB0YXNrPzogVGFzaztcclxuICAvKiogY291cnNlXHJcbiAgICogT25seSBmb3IgY291cnNlcyBidWlsdCBieSBjb3Vyc2VidWlsZGVyXHJcbiAgICovXHJcbiAgY291cnNlPzogQ291cnNlO1xyXG4gIC8qKiBjb3Vyc2VJbmZvXHJcbiAgICogT25seSBmb3IgY291cnNlcyBidWlsZCBieSBzdWJqZWN0cGxhbm5lclxyXG4gICAqL1xyXG4gIGNvdXJzZUluZm8/OiB7XHJcbiAgICBzY2hvb2w6IHN0cmluZyAvLyBTY2hvb2wgbmFtZVxyXG4gICAgY291cnNlOiBzdHJpbmcgLy8gQ291cnNlIEluc3RhbmNlIElEXHJcbiAgICB0YWI6IHN0cmluZyAgICAvLyBDb3Vyc2VUYWIgSURcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUYXNrTGlzdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIHN0YXRpYyBjb250ZXh0VHlwZSA9IExhbmd1YWdlQ29udGV4dDtcclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIHVzZXJUYXNrczogW10sXHJcbiAgICAgIHdlZWtEYXRlOiBEYXRlLm5vdygpLFxyXG4gICAgICBjb25maXJtYXRpb25zOiBbXVxyXG4gICAgfVxyXG4gICAgdGhpcy5vbkNoYW5nZSA9IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKTsgICAgXHJcbiAgfVxyXG5cclxuICBvbkNoYW5nZSAodXNlclRhc2tzOiBVc2VyVGFza1tdLCBwZXJzaXN0ZWQ6IFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUpIHtcclxuICAgIGlmIChwZXJzaXN0ZWQud2Vla0RhdGUgIT09IHRoaXMuc3RhdGUud2Vla0RhdGUpIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgY29uZmlybWF0aW9uczogW11cclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICB1c2VyVGFza3MsXHJcbiAgICAgIHdlZWtEYXRlOiBwZXJzaXN0ZWQud2Vla0RhdGVcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICB1c2VyVGFza3NSZXBvLnN1YnNjcmliZSh0aGlzLm9uQ2hhbmdlKTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgdXNlclRhc2tzUmVwby51bnN1YnNjcmliZSh0aGlzLm9uQ2hhbmdlKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHRvZ2dsZVRhc2sgKGxlYXJuaW5nVGFzazogTGVhcm5pbmdNb2R1bGVUYXNrKSB7XHJcbiAgICBjb25zdCB1c2VyVGFza3MgPSB0aGlzLnN0YXRlLnVzZXJUYXNrcy5maWx0ZXIodXQgPT4ge1xyXG4gICAgICByZXR1cm4gbGVhcm5pbmdUYXNrLnRhc2sgP1xyXG4gICAgICAgIHV0LnRhc2sgJiYgdXQudGFzay5zb21lKHQgPT4gdC5pZCA9PT0gbGVhcm5pbmdUYXNrLmlkKSA6XHJcbiAgICAgICAgdXQuc2l0ZVZpc2lvblBhZ2VJZCA9PT0gbGVhcm5pbmdUYXNrLmlkO1xyXG4gICAgfSk7XHJcbiAgICBjb25zdCB7d2Vla0RhdGV9ID0gdGhpcy5zdGF0ZTtcclxuICAgIFxyXG4gICAgaWYgKHVzZXJUYXNrcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgLy8gTm8gdGFzayBtYXRjaGVzIHRoaXMgbGVhcm5pbmdNb2R1bGVUYXNrIC0gbm90IHByZXNlbnQgaW4gd2Vla3BsYW5uZXIuXHJcbiAgICAgIGxldCBsYXRlc3RUaW1lU3RhbXAgPSBNYXRoLm1heC5hcHBseShcclxuICAgICAgICBNYXRoLm1heCxcclxuICAgICAgICBbd2Vla0RhdGVdLmNvbmNhdCh0aGlzLnN0YXRlLnVzZXJUYXNrcy5tYXAodCA9PiB0LmRhdGVUaW1lKSkpO1xyXG5cclxuICAgICAgY29uc3QgdXNlclRhc2s6IFVzZXJUYXNrID0ge1xyXG4gICAgICAgIGlkOiBjcmVhdGVVVUlEKCksXHJcbiAgICAgICAgY291cnNlTmFtZTogbGVhcm5pbmdUYXNrLmNvdXJzZU5hbWUsXHJcbiAgICAgICAgZGF0ZVRpbWU6IGxhdGVzdFRpbWVTdGFtcCArIDIwMDAsXHJcbiAgICAgICAgbGVhcm5pbmdHb2FsOiBsZWFybmluZ1Rhc2subGVhcm5pbmdHb2FsLFxyXG4gICAgICAgIG5hbWU6IGxlYXJuaW5nVGFzay5uYW1lLFxyXG4gICAgICAgIHVybDogbGVhcm5pbmdUYXNrLnVybCxcclxuICAgICAgICBhY2w6IFtcclxuICAgICAgICAgIC8vIERlZmF1bHQgQUNMOiBMZXQgdXNlciBzZWxmIGhhdmUgZnVsbCBjb250cm9sIG92ZXIgdGhpcyBpdGVtOlxyXG4gICAgICAgICAgbmV3IERvY3VtZW50QWNjZXNzKFwiZW1haWxcIiwgZW52LmN1cnJlbnRVc2VyLm1haWwsIFwiU1wiKSxcclxuICAgICAgICAgIC8vIEFkZGl0aW9uYWwgQUNMOiBMZXQgZW1wbG95ZWVzIG9uIHNhbWUgc2Nob29sIGhhdmUgcmVhZCBhY2Nlc3MgdG8gaXQuXHJcbiAgICAgICAgICAvLyBUaGlzIGN1cnJlbnRseSBvbmx5IGFwcGxpZXMgdG8gdGFza3MgdGhhdCByZWZlciB0byBjb3Vyc2UgdGFza3MgKG5vdCBjdXN0b20gdGFza3MhKVxyXG4gICAgICAgICAgbmV3IERvY3VtZW50QWNjZXNzKFwic2Nob29sUm9sZVwiLCBgJHtlbnYuY3VycmVudFVzZXIuc2Nob29sfS9FTVBMT1lFRWAsIFwiUlwiKVxyXG4gICAgICAgIF0ubWFwKGFjID0+IGFjLnRvU3RyaW5nKCkpXHJcbiAgICAgIH07XHJcbiAgICAgIGlmIChsZWFybmluZ1Rhc2sudGFzayAmJiBsZWFybmluZ1Rhc2sudGFzay5kZWFkbGluZSkge1xyXG4gICAgICAgIHVzZXJUYXNrLmRlYWRsaW5lID0gbGVhcm5pbmdUYXNrLnRhc2suZGVhZGxpbmU7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGxlYXJuaW5nVGFzay50YXNrKSB7XHJcbiAgICAgICAgdXNlclRhc2sudGFzayA9IFtsZWFybmluZ1Rhc2sudGFza107XHJcbiAgICAgICAgaWYgKGxlYXJuaW5nVGFzay5jb3Vyc2UpIHtcclxuICAgICAgICAgIHVzZXJUYXNrLmNvdXJzZSA9IFtsZWFybmluZ1Rhc2suY291cnNlXTtcclxuICAgICAgICB9IGVsc2UgaWYgKGxlYXJuaW5nVGFzay5jb3Vyc2VJbmZvKSB7XHJcbiAgICAgICAgICB1c2VyVGFzay5jb3Vyc2VJbmZvID0gbGVhcm5pbmdUYXNrLmNvdXJzZUluZm87XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHVzZXJUYXNrLnNpdGVWaXNpb25QYWdlSWQgPSBsZWFybmluZ1Rhc2suaWQ7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGxlYXJuaW5nVGFzay5zdGVwKSB7XHJcbiAgICAgICAgdXNlclRhc2suc3RlcCA9IGxlYXJuaW5nVGFzay5zdGVwO1xyXG4gICAgICB9XHJcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICB1c2VyVGFza3NSZXBvLnNldFdlZWtQbGFubmVyQm94T3BlbihsZWFybmluZ1Rhc2suY291cnNlTmFtZSwgdHJ1ZSksXHJcbiAgICAgICAgdXNlclRhc2tzUmVwby5pbnNlcnQoW3VzZXJUYXNrXSldKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIEFscmVhZHkgcHJlc2VudCBpbiB3ZWVrcGxhbm5lci4gSXQncyB0aW1lIHRvIGRlbGV0ZSB0aG9zZSB0aGF0IG1hdGNoZWQgdXMuXHJcbiAgICAgIGF3YWl0IHVzZXJUYXNrc1JlcG8uZGVsZXRlKHVzZXJUYXNrcy5tYXAodCA9PiB0LmlkKSk7XHJcbiAgICB9XHJcbiAgICBcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHtpbnRsfSA9IHRoaXMuY29udGV4dDtcclxuICAgIGNvbnN0IHtsZWFybmluZ1Rhc2tzfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCB1c2VyVGFza3MgPSBhcnJheVRvTWFwKHRoaXMuc3RhdGUudXNlclRhc2tzLCB1dCA9PiB1dC50YXNrICYmIHV0LnRhc2subGVuZ3RoID4gMCA/XHJcbiAgICAgIHV0LnRhc2subWFwKHQgPT4gdC5pZClbMF0gOiAvLyBjb3Vyc2UtYnVpbGRlciB0YXNrcyBsb29rZWQgdXAgYnkgaWRcclxuICAgICAgdXQuc2l0ZVZpc2lvblBhZ2VJZCA/IHV0LnNpdGVWaXNpb25QYWdlSWQgOiAvLyBub24tY291cnNlLWJ1aWxkZXIgdGFza3NcclxuICAgICAgdXQudXJsKTtcclxuICAgIGNvbnN0IHtjb25maXJtYXRpb25zfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCB3ZWVrUGxhbm5lcldlZWsgPSBtb21lbnQodGhpcy5zdGF0ZS53ZWVrRGF0ZSkud2VlaygpO1xyXG4gICAgY29uc3QgY3VycmVudFdlZWsgPSBtb21lbnQoKS53ZWVrKCk7XHJcbiAgICBjb25zdCBmb3JXZWVrU3RyaW5nID0gd2Vla1BsYW5uZXJXZWVrID09PSBjdXJyZW50V2VlayA/IFwiXCIgOlxyXG4gICAgd2Vla1BsYW5uZXJXZWVrID09PSBjdXJyZW50V2VlayArIDEgPyBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOlwidGFza0xpc3QubmV4dFdlZWtUYXNrXCIsIGRlZmF1bHRNZXNzYWdlOlwiZsO2ciBuw6RzdGEgdmVja2EgKHZ7d2Vla30pXCJ9LCB7d2Vlazogd2Vla1BsYW5uZXJXZWVrfSkgOlxyXG4gICAgd2Vla1BsYW5uZXJXZWVrID09PSBjdXJyZW50V2VlayAtIDEgPyBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOlwidGFza0xpc3QubGFzdFdlZWtUYXNrXCIsIGRlZmF1bHRNZXNzYWdlOlwiZsO2ciBmw7ZycmEgdmVja2FuICh2e3dlZWt9KVwifSwge3dlZWs6IHdlZWtQbGFubmVyV2Vla30pIDpcclxuICAgIGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6XCJ0YXNrTGlzdC5jdXJyZW50V2Vla1Rhc2tcIiwgZGVmYXVsdE1lc3NhZ2U6XCJmw7ZyIHZlY2thIHt3ZWVrfVwifSwge3dlZWs6IHdlZWtQbGFubmVyV2Vla30pO1xyXG5cclxuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cInRhc2tDb250YWluZXJcIj5cclxuICAgICAge2xlYXJuaW5nVGFza3MubWFwKChsZWFybmluZ1Rhc2ssIGlkeCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRhc2tMb29rdXBJZCA9IGxlYXJuaW5nVGFzay5pZDtcclxuICAgICAgICBjb25zdCB1c2VyVGFzayA9IHVzZXJUYXNrc1t0YXNrTG9va3VwSWRdIHx8IHskbWV0YTogJ2RlbGV0ZWQnfSBhcyBQYXJ0aWFsPFVzZXJUYXNrPjsgLy8gTm8gZXhpc3QgPSAkbWV0YTogJ2RlbGV0ZWQnXHJcbiAgICAgICAgY29uc3QgaXNXb3JraW5nID0gdXNlclRhc2suJG1ldGEgPT09ICdhZGRpbmcnIHx8IHVzZXJUYXNrLiRtZXRhID09PSAnZGVsZXRpbmcnO1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkID0gdXNlclRhc2suJG1ldGEgIT09ICdkZWxldGVkJyAmJiB1c2VyVGFzay4kbWV0YSAhPT0gJ2RlbGV0aW5nJztcclxuICAgICAgICBjb25zdCBkZXNjcmliZWRBY3Rpb24gPSBzZWxlY3RlZCA/XHJcbiAgICAgICAgaW50bC5mb3JtYXRNZXNzYWdlKHtpZDpcInRhc2tMaXN0LnJlbW92ZVRhc2tGcm9tV2Vla2x5UGxhbm5pbmdcIiwgZGVmYXVsdE1lc3NhZ2U6XCJUYSBib3J0IHVwcGdpZnRlbiBmcsOlbiBlZ2VuIHZlY2tvcGxhbmVyaW5nIHt3ZWVrfVwifSwge3dlZWs6IGZvcldlZWtTdHJpbmd9KTpcclxuICAgICAgICBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOlwidGFza0xpc3QuYWRkVGFza1RvV2Vla2x5UGxhbm5pbmdcIiwgZGVmYXVsdE1lc3NhZ2U6XCJMw6RnZyB0aWxsIHVwcGdpZnRlbiBpIGVnZW4gdmVja29wbGFuZXJpbmcge3dlZWt9XCJ9LCB7d2VlazogZm9yV2Vla1N0cmluZ30pXHJcbiAgICAgICAgY29uc3QgY29uZmlybWF0aW9uVmlzaWJsZSA9XHJcbiAgICAgICAgICBjb25maXJtYXRpb25zLnNvbWUodGlkID0+IHRhc2tMb29rdXBJZCA9PT0gdGlkKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIDxkaXYga2V5PXtsZWFybmluZ1Rhc2suaWR9PjxkaXYga2V5PXt0YXNrTG9va3VwSWR9IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgc2VsZWN0ZWRCb3gke3NlbGVjdGVkID8gJyBzZWxlY3RlZCcgOiAnJ31gfVxyXG4gICAgICAgICAgICAgICAgc3R5bGU9e2lzV29ya2luZyA/IHtvcGFjaXR5OiAwLjV9OiB7fX1cclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpPT4haXNXb3JraW5nICYmIHdlZWtQbGFubmVyV2VlayA9PT0gY3VycmVudFdlZWsgP1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVRhc2sobGVhcm5pbmdUYXNrKSA6XHJcbiAgICAgICAgICAgICAgICAgIGNvbmZpcm1hdGlvblZpc2libGUgPyBcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtjb25maXJtYXRpb25zOiBjb25maXJtYXRpb25zLmZpbHRlcih0aWQgPT4gdGlkICE9PSB0YXNrTG9va3VwSWQpfSkgOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2NvbmZpcm1hdGlvbnM6IFsuLi5jb25maXJtYXRpb25zXS5jb25jYXQodGFza0xvb2t1cElkKX0pfVxyXG4gICAgICAgICAgICAgICAgdGl0bGU9e2Rlc2NyaWJlZEFjdGlvbn0+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgIDxhIGhyZWY9e2xlYXJuaW5nVGFzay51cmx9PntsZWFybmluZ1Rhc2submFtZX08L2E+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8Q29uZmlybWF0aW9uXHJcbiAgICAgICAgICAgIHZpc2libGU9e2NvbmZpcm1hdGlvblZpc2libGV9XHJcbiAgICAgICAgICAgIHRleHQ9e2Rlc2NyaWJlZEFjdGlvbn1cclxuICAgICAgICAgICAgb25Db25maXJtPXsoKT0+e1xyXG4gICAgICAgICAgICAgIHRoaXMudG9nZ2xlVGFzayhsZWFybmluZ1Rhc2spO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2NvbmZpcm1hdGlvbnM6IGNvbmZpcm1hdGlvbnMuZmlsdGVyKHRpZCA9PiB0aWQgIT09IHRhc2tMb29rdXBJZCl9KTtcclxuICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgb25DYW5jZWw9eygpPT57XHJcbiAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7Y29uZmlybWF0aW9uczogY29uZmlybWF0aW9ucy5maWx0ZXIodGlkID0+IHRpZCAhPT0gdGFza0xvb2t1cElkKX0pO1xyXG4gICAgICAgICAgICB9fSAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIH1cclxuICAgICAgKX1cclxuICAgIDwvZGl2PlxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7S0dUZXJtUGxhbm5lcn0gZnJvbSAnLi9rZy10ZXJtcGxhbm5lcic7XHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBLR1Rlcm1QbGFubmVyU2VsZiAoKSB7XHJcbiAgcmV0dXJuIDxLR1Rlcm1QbGFubmVyIGVudj17ZW52fSB0dXRvcmVkPXtmYWxzZX0gLz47XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQge0tHVGVybVBsYW5uZXJ9IGZyb20gJy4va2ctdGVybXBsYW5uZXInO1xyXG5pbXBvcnQgeyBUdXRvcmFibGVDb21wb25lbnQgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvdHV0b3JhYmxlLWNvbXBvbmVudCc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gS0dUZXJtUGxhbm5lclR1dG9yZWQgKCkge1xyXG4gIHJldHVybiA8VHV0b3JhYmxlQ29tcG9uZW50XHJcbiAgICB0dXRvcmVkPXt0cnVlfVxyXG4gICAgY3JlYXRlQ29tcG9uZW50PXtlbnYgPT5cclxuICAgICAgPEtHVGVybVBsYW5uZXJcclxuICAgICAgICBrZXk9e2Vudi5jdXJyZW50VXNlci5tYWlsfVxyXG4gICAgICAgIGVudj17ZW52fVxyXG4gICAgICAgIHR1dG9yZWQ9e3RydWV9IC8+XHJcbiAgICB9XHJcbiAgLz47XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG4vL2ltcG9ydCBlbnYgZnJvbSAnLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgRURTQ291cnNlLCBFRFNTdHVkeVBsYW4gfSBmcm9tICcuLi8uLi9jb250cmFjdHMvZWRzJztcclxuaW1wb3J0IHsgRURTUGVyaW9kIH0gZnJvbSAnLi4vLi4vYXBpcy9lZHNjbGllbnQnO1xyXG5pbXBvcnQgeyBnZXRTY2hvb2xNb21lbnQsIGdldEZpcnN0QW5kTGFzdFdlZWtPZlRlcm0sIGdldFRlcm1TdGFyRW5kRGF0ZSB9IGZyb20gJy4uLy4uL3V0aWxzL3NjaG9vbC1tb21lbnQnO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IFNwaW5uZXIgfSBmcm9tICcuLi9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9zcGlubmVyJztcclxuaW1wb3J0IHsgS0dUZXJtUGxhbm5lcldlZWtQbGFuLCBLR1Rlcm1QbGFubmVyV2Vla1BsYW5FbnRyeSwgS0dUZXJtUGxhbm5lclR1dG9yTm90ZSwgS0dUZXJtUGxhbm5lcldlZWtQbGFuT3JUdXRvck5vdGUgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IERpYWxvZ3MgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvZGlhbG9ncyc7XHJcbmltcG9ydCB7IFdlZWtOb3RlRGlhbG9nIH0gZnJvbSAnLi93ZWVrLW5vdGUtZGlhbG9nJztcclxuaW1wb3J0IHsgS0dUZXJtUGxhbm5lclJlcG8gfSBmcm9tICcuLi8uLi9yZXBvcy9rZy10ZXJtcGxhbm5lci1yZXBvJztcclxuaW1wb3J0IHsgZGlzdGluY3QsIHNob3dFcnJvciB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgS0VEV2VlayB9IGZyb20gJy4uLy4uL3V0aWxzL3dlZWt1dGlsJztcclxuaW1wb3J0IHsgS2VkQmFja2VuZENsaWVudCwgRG9jdW1lbnRBY2Nlc3MsIGNyZWF0ZVVVSUQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IFVzZXIgfSBmcm9tICcuLi8uLi9jb250cmFjdHMva2VkLW1vZGVscyc7XHJcbmltcG9ydCB7IEVudiB9IGZyb20gJy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IFR1dG9yRGlhbG9nIH0gZnJvbSAnLi4va3MtdGVybXBsYW5uZXIvdHV0b3ItZGlhbG9nJztcclxuaW1wb3J0IHsgZmVhdHVyZXMgfSBmcm9tICcuLi8uLi9mZWF0dXJlcyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGVudjogRW52O1xyXG4gIHR1dG9yZWQ6IGJvb2xlYW47XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgbm93OiBEYXRlLFxyXG4gIGNvdXJzZXM6IEVEU0NvdXJzZVtdO1xyXG4gIHdlZWtQbGFuczogS0dUZXJtUGxhbm5lcldlZWtQbGFuT3JUdXRvck5vdGVbXTtcclxuICBpc0xvYWRpbmdDb3Vyc2VzOiBib29sZWFuO1xyXG4gIGlzTG9hZGluZ1dlZWtQbGFuczogYm9vbGVhbjtcclxuICBkaWFsb2dzOiBhbnlbXTtcclxuICAvL2dvYWxzOiBFRFNTdHVkeVBsYW5bXTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEtHVGVybVBsYW5uZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgbm93LFxyXG4gICAgICBjb3Vyc2VzOiBbXSxcclxuICAgICAgd2Vla1BsYW5zOiBbXSxcclxuICAgICAgaXNMb2FkaW5nQ291cnNlczogdHJ1ZSxcclxuICAgICAgaXNMb2FkaW5nV2Vla1BsYW5zOiB0cnVlLFxyXG4gICAgICBkaWFsb2dzOiBbXVxyXG4gICAgICAvL2dvYWxzOiBbXVxyXG4gICAgfVxyXG4gICAgdGhpcy51cGRhdGVXZWVrUGxhbnMgPSB0aGlzLnVwZGF0ZVdlZWtQbGFucy5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICB0aGlzLmxvYWRFRFNDb3Vyc2VzKCk7XHJcbiAgICB0aGlzLnByb3BzLmVudi5rZ1Rlcm1QbGFubmVyUmVwby5tZW0uc3Vic2NyaWJlKHRoaXMudXBkYXRlV2Vla1BsYW5zKTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgdGhpcy5wcm9wcy5lbnYua2dUZXJtUGxhbm5lclJlcG8ubWVtLnVuc3Vic2NyaWJlKHRoaXMudXBkYXRlV2Vla1BsYW5zKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVdlZWtQbGFucyh3ZWVrUGxhbnM6IEtHVGVybVBsYW5uZXJXZWVrUGxhbltdKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHt3ZWVrUGxhbnMsIGlzTG9hZGluZ1dlZWtQbGFuczogZmFsc2V9KTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGxvYWRFRFNDb3Vyc2VzKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc2Nob29sTW9tZW50ID0gZ2V0U2Nob29sTW9tZW50KG1vbWVudCh0aGlzLnN0YXRlLm5vdykpO1xyXG4gICAgICBjb25zdCBwZXJpb2ROYW1lID0gbmV3IEVEU1BlcmlvZChzY2hvb2xNb21lbnQpLnBlcmlvZDtcclxuICAgICAgY29uc3QgY291cnNlcyA9IGRpc3RpbmN0KGF3YWl0IHRoaXMucHJvcHMuZW52LmVkc0NsaWVudC5nZXRBY3RpdmVDb3Vyc2VzKHtwZXJpb2ROYW1lfSksIGNvdXJzZSA9PiBjb3Vyc2UubmFtZSk7XHJcbiAgICAgIC8vY29uc29sZS5sb2coXCJjb3Vyc2VzOlwiICsgSlNPTi5zdHJpbmdpZnkoY291cnNlcywgbnVsbCwgMikpO1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHsgY291cnNlcyB9KTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBpc0xvYWRpbmdDb3Vyc2VzOiBmYWxzZSB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uTm90ZUNsaWNrKHdlZWtOdW1iZXI6IG51bWJlciwgd2Vla0RhdGU6IG51bWJlciwgY291cnNlTmFtZTogc3RyaW5nLCB3ZWVrUGxhbj86IEtHVGVybVBsYW5uZXJXZWVrUGxhbiwgbm90ZT86IEtHVGVybVBsYW5uZXJXZWVrUGxhbkVudHJ5KSB7XHJcbiAgICB0aGlzLm9wZW5EaWFsb2coPFdlZWtOb3RlRGlhbG9nXHJcbiAgICAgIHdlZWtOdW1iZXI9e3dlZWtOdW1iZXJ9XHJcbiAgICAgIHdlZWtEYXRlPXt3ZWVrRGF0ZX1cclxuICAgICAgY291cnNlTmFtZT17Y291cnNlTmFtZX1cclxuICAgICAgd2Vla1BsYW49e3dlZWtQbGFufVxyXG4gICAgICBub3RlPXtub3RlfVxyXG4gICAgICBlbnY9e3RoaXMucHJvcHMuZW52fVxyXG4gICAgICBjbG9zZURpYWxvZz17KCk9PnRoaXMuY2xvc2VEaWFsb2coKX0gLz4pO1xyXG4gIH1cclxuXHJcbiAgICAvKipcclxuICAgKiBcclxuICAgKiBAcGFyYW0gd2Vla051bWJlciBcclxuICAgKiBAcGFyYW0gY29tbWVudCBcclxuICAgKiBcclxuICAgKiBBZGQgYSBjb21tZW50IGZyb20gdHV0b3JcclxuICAgKi9cclxuICBvblR1dG9yQ2xpY2sodHV0b3JOb3RlOiBLR1Rlcm1QbGFubmVyVHV0b3JOb3RlLCB3ZWVrTnVtYmVyOiBudW1iZXIpIHtcclxuICAgIHRoaXMub3BlbkRpYWxvZyg8VHV0b3JEaWFsb2dcclxuICAgICAgd2Vla051bWJlcj17d2Vla051bWJlcn1cclxuICAgICAgY29tbWVudD17dHV0b3JOb3RlLnZhbHVlfVxyXG4gICAgICB1cGRhdGVEYXRhID0ge25ld1ZhbHVlID0+IHRoaXMudXBkYXRlVHV0b3JOb3RlRmllbGQodHV0b3JOb3RlLCBuZXdWYWx1ZSl9XHJcbiAgICAgIGRlbGV0ZU5vdGVEYXRhID0geygpID0+IHRoaXMuZGVsZXRlVHV0b3JOb3RlRmllbGQodHV0b3JOb3RlLmlkKX1cclxuICAgICAgY2xvc2VEaWFsb2c9eygpPT50aGlzLmNsb3NlRGlhbG9nKCl9IC8+KTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGRlbGV0ZVR1dG9yTm90ZUZpZWxkKG5vdGVJZDogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCB0aGlzLnByb3BzLmVudi5rZ1Rlcm1QbGFubmVyUmVwby5kZWxldGUoW25vdGVJZF0pO1xyXG4gICAgfSBjYXRjaCAoc2hvd0Vycm9yKXt9XHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGVUdXRvck5vdGVGaWVsZCh0dXRvck5vdGU6IEtHVGVybVBsYW5uZXJUdXRvck5vdGUsIG5ld1ZhbHVlOiBzdHJpbmcpe1xyXG4gICAgY29uc3Qgb2xkVmFsdWUgPSAodHV0b3JOb3RlICYmIHR1dG9yTm90ZS52YWx1ZSkgfHwgXCJcIjtcclxuICAgIGlmIChvbGRWYWx1ZSA9PT0gbmV3VmFsdWUpIHJldHVybjtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICB0dXRvck5vdGUudmFsdWUgPSBuZXdWYWx1ZTtcclxuICAgICAgLy9zZXQgZG9jdW1lbnQgQUNMXHJcbiAgICAgIHR1dG9yTm90ZS5hY2wgPSBbXHJcbiAgICAgICAgbmV3IERvY3VtZW50QWNjZXNzKFwidHV0b3JGb3JcIiwgdGhpcy5wcm9wcy5lbnYuY3VycmVudFVzZXIubWFpbCwgXCJTXCIpLnRvU3RyaW5nKCksXHJcbiAgICAgICAgbmV3IERvY3VtZW50QWNjZXNzKFwiZW1haWxcIiwgdGhpcy5wcm9wcy5lbnYuY3VycmVudFVzZXIubWFpbCwgXCJSXCIpLnRvU3RyaW5nKCksXHJcbiAgICAgIF07XHJcblxyXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9wcy5lbnYua2dUZXJtUGxhbm5lclJlcG8udXBzZXJ0KHR1dG9yTm90ZSwgXHJcbiAgICAgICAgKG5vdGUgOiBLR1Rlcm1QbGFubmVyVHV0b3JOb3RlKSA9PiBub3RlLnZhbHVlID0gbmV3VmFsdWUpO1xyXG4gICAgICB9IGNhdGNoIChzaG93RXJyb3Ipe31cclxuICB9XHJcblxyXG4gIFxyXG4gIG9wZW5EaWFsb2coZGlhbG9nKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHsgZGlhbG9nczogWy4uLnRoaXMuc3RhdGUuZGlhbG9ncywgZGlhbG9nXSB9KTtcclxuICB9XHJcblxyXG4gIGNsb3NlRGlhbG9nKCkge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRpYWxvZ3M6IHRoaXMuc3RhdGUuZGlhbG9ncy5zbGljZSgwLCB0aGlzLnN0YXRlLmRpYWxvZ3MubGVuZ3RoIC0gMSkgfSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7IGNvdXJzZXMsIG5vdywgaXNMb2FkaW5nQ291cnNlcywgaXNMb2FkaW5nV2Vla1BsYW5zLCB3ZWVrUGxhbnMsIGRpYWxvZ3MgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCBpc0xvYWRpbmcgPSBpc0xvYWRpbmdDb3Vyc2VzIHx8IGlzTG9hZGluZ1dlZWtQbGFucztcclxuICAgIGNvbnN0IHdlZWtzOiB7IHdlZWtOdW1iZXI6IG51bWJlciwgd2Vla0RhdGU6IG51bWJlciwgd2Vla1BsYW46IEtHVGVybVBsYW5uZXJXZWVrUGxhbiB9W10gPSBbXTtcclxuICAgIGNvbnN0IHR1dG9yTm90ZXM6IHsgd2Vla051bWJlcjogbnVtYmVyLCB0dXRvclZhbHVlOiBLR1Rlcm1QbGFubmVyVHV0b3JOb3RlIH1bXSA9IFtdO1xyXG4gICAgY29uc3Qgc2Nob29sTW9tZW50ID0gZ2V0U2Nob29sTW9tZW50KG1vbWVudChub3cpKTtcclxuICAgIGNvbnN0IFt0ZXJtU3RhcnQsIHRlcm1FbmRdID0gZ2V0VGVybVN0YXJFbmREYXRlKG5vdywgc2Nob29sTW9tZW50LnRlcm0gPT09ICdBVCcpO1xyXG4gICAgY29uc3QgW2ZpcnN0V2VlaywgbGFzdFdlZWtdID0gZ2V0Rmlyc3RBbmRMYXN0V2Vla09mVGVybShzY2hvb2xNb21lbnQudGVybSk7XHJcbiAgICBjb25zdCBzaG93S2dUdXRvckNvbW1lbnRGaWVsZCA9IGZlYXR1cmVzLmtnVHV0b3JDb21tZW50O1xyXG5cclxuICAgIGxldCBjdXJyZW50V2Vla1BsYW5zIDogS0dUZXJtUGxhbm5lcldlZWtQbGFuW10gPSB3ZWVrUGxhbnMuZmlsdGVyKCh4IDogS0dUZXJtUGxhbm5lcldlZWtQbGFuKSA9PiAheC50eXBlKSBhcyBLR1Rlcm1QbGFubmVyV2Vla1BsYW5bXTtcclxuICAgIGxldCBjdXJyZW50VHV0b3JOb3RlcyA6IEtHVGVybVBsYW5uZXJUdXRvck5vdGVbXSA9IHdlZWtQbGFucy5maWx0ZXIoKHggOiBLR1Rlcm1QbGFubmVyVHV0b3JOb3RlKSA9PiB4LnR5cGUgPT09ICd0dXRvci1ub3RlJykgYXMgS0dUZXJtUGxhbm5lclR1dG9yTm90ZVtdO1xyXG5cclxuICAgIGZvciAobGV0IHdlZWtNb21lbnQgPSB0ZXJtU3RhcnQuY2xvbmUoKTtcclxuICAgICAgd2Vla01vbWVudC52YWx1ZU9mKCkgPCB0ZXJtRW5kLnZhbHVlT2YoKTtcclxuICAgICAgd2Vla01vbWVudCA9IHdlZWtNb21lbnQuY2xvbmUoKS5hZGQoMSwgJ3dlZWsnKS5zdGFydE9mKCd3ZWVrJykpXHJcbiAgICB7XHJcbiAgICAgIGNvbnN0IHdlZWtOdW1iZXIgPSB3ZWVrTW9tZW50LndlZWsoKTtcclxuICAgICAgY29uc3Qgd2Vla1llYXIgPSB3ZWVrTW9tZW50LnllYXIoKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGtlZFdlZWsgPSBLRURXZWVrKHdlZWtZZWFyLCB3ZWVrTnVtYmVyKTtcclxuICAgICAgaWYgKHdlZWtOdW1iZXIgPj0gZmlyc3RXZWVrICYmIHdlZWtOdW1iZXIgPD0gbGFzdFdlZWspIHtcclxuICAgICAgICBjb25zdCB3ZWVrUGxhbiA9IGN1cnJlbnRXZWVrUGxhbnMuZmlsdGVyKHdwID0+XHJcbiAgICAgICAgICB3cC5kYXRlVGltZSA+PSBrZWRXZWVrLm5vdEJlZm9yZSAmJlxyXG4gICAgICAgICAgd3AuZGF0ZVRpbWUgPD0ga2VkV2Vlay5ub3RBZnRlcilbMF07XHJcblxyXG4gICAgICAgIGNvbnN0IHR1dG9yTm90ZSA9IGN1cnJlbnRUdXRvck5vdGVzLmZpbHRlcih3cCA9PlxyXG4gICAgICAgICAgd3AuZGF0ZVRpbWUgPj0ga2VkV2Vlay5ub3RCZWZvcmUgJiZcclxuICAgICAgICAgIHdwLmRhdGVUaW1lIDw9IGtlZFdlZWsubm90QWZ0ZXIpWzBdO1xyXG5cclxuICAgICAgICBjb25zdCBzdGFydE9mV2VlayA9IHdlZWtNb21lbnQuY2xvbmUoKS5zdGFydE9mKCd3ZWVrJykudmFsdWVPZigpO1xyXG4gICAgICAgIHdlZWtzLnB1c2goe1xyXG4gICAgICAgICAgd2Vla051bWJlcixcclxuICAgICAgICAgIHdlZWtEYXRlOiBzdGFydE9mV2VlayxcclxuICAgICAgICAgIHdlZWtQbGFuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdHV0b3JOb3Rlcy5wdXNoKHtcclxuICAgICAgICAgIHdlZWtOdW1iZXIsXHJcbiAgICAgICAgICB0dXRvclZhbHVlOiB0dXRvck5vdGUgfHwge3ZhbHVlOiAnJywgZGF0ZVRpbWU6IHN0YXJ0T2ZXZWVrLCBpZDogY3JlYXRlVVVJRCgpLCB0eXBlOiAndHV0b3Itbm90ZSd9XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIFxyXG5cclxuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImtlZF9ib3hlZFwiPlxyXG4gICAgICA8aDQ+XHJcbiAgICAgICAgVGVybWluc3BsYW5lcmluZ1xyXG4gICAgICAgPC9oND5cclxuICAgICAgPGhyIC8+XHJcbiAgICAgIHtpc0xvYWRpbmcgP1xyXG4gICAgICAgIDxTcGlubmVyIC8+IDogY291cnNlcy5sZW5ndGggPT09IDAgPyA8ZGl2PlxyXG4gICAgICAgICAgVGVybWluc3BsYW5lcmFyZW4gYWt0aXZlcmFzIG7DpHIgZHUgc2tyaXZpdHMgaW4gcMOlIGRpbmEga3Vyc2VyXHJcbiAgICAgICAgICA8L2Rpdj4gOiBcclxuICAgICAgICAgIDx0YWJsZSBjbGFzc05hbWU9XCJ0ZXJtcGxhbm5lci10YWJsZSB6ZWJyYVwiPlxyXG4gICAgICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgPHRoPlZlY2thPC90aD5cclxuICAgICAgICAgICAgICAgIHsvKmdvYWxzLm1hcCgoe2NvdXJzZVVuaXRJZCwgY291cnNlVW5pdE5hbWV9KSA9PlxyXG4gICAgICAgICAgICAgICAgICA8dGgga2V5PXtjb3Vyc2VVbml0SWR9IGNsYXNzTmFtZT1cInRlcm1Db3Vyc2VIZWFkZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRlcm1Db3Vyc2VUZXh0XCI+e2NvdXJzZVVuaXROYW1lfTwvZGl2PjwvdGg+KSovfVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICBjb3Vyc2VzLm1hcCgoYywgaWR4KSA9PiA8dGgga2V5PXtpZHh9IGNsYXNzTmFtZT1cImtnQ291cnNlSGVhZGVyXCI+e2MubmFtZX08L3RoPilcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHtzaG93S2dUdXRvckNvbW1lbnRGaWVsZCAmJiA8dGggY2xhc3NOYW1lPVwidHV0b3JIZWFkZXJcIj48L3RoPn1cclxuICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAge3dlZWtzLm1hcCgodywgaWR4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc0N1cnJlbnRXZWVrID0gdy53ZWVrTnVtYmVyID09PSBtb21lbnQoKS53ZWVrKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBub3RlVmFsdWUgPSB0dXRvck5vdGVzICYmIHR1dG9yTm90ZXMuZmluZCh0biA9PiB0bi53ZWVrTnVtYmVyID09PSB3LndlZWtOdW1iZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiA8dHIga2V5PXtpZHh9IGNsYXNzTmFtZT17aXNDdXJyZW50V2VlayA/IFwiY3VycmVudFdlZWtcIiA6IFwiXCJ9PlxyXG4gICAgICAgICAgICAgICAgICA8dGQ+e3cud2Vla051bWJlcn08L3RkPlxyXG4gICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291cnNlcy5tYXAoKGMsaWR4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm90ZSA9IHcud2Vla1BsYW4gJiYgdy53ZWVrUGxhbi5wbGFuc1tjLm5hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA8dGRcclxuICAgICAgICAgICAgICAgICAgICAgIGtleT17aWR4fVxyXG4gICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtub3RlPyBgY291cnNlTm90ZSBub3RlLWNvbG9yLSR7bm90ZS5jb2xvcn1gIDogXCJjb3Vyc2VOb3RlXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRvb2x0aXA9e25vdGUgJiYgbm90ZS5kZXNjcmlwdGlvbn1cclxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtub3RlICYmIG5vdGUuZGVzY3JpcHRpb259XHJcbiAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKT0+dGhpcy5vbk5vdGVDbGljayh3LndlZWtOdW1iZXIsIHcud2Vla0RhdGUsIGMubmFtZSwgdy53ZWVrUGxhbiwgbm90ZSl9PlxyXG4gICAgICAgICAgICAgICAgICAgICAge25vdGU/IDxpIGNsYXNzTmFtZT1cImZhcyBmYS1hbGlnbi1jZW50ZXJcIi8+IDogJyd9XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD59XHJcbiAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgc2hvd0tnVHV0b3JDb21tZW50RmllbGQgJiYgKHRoaXMucHJvcHMudHV0b3JlZCA/XHJcbiAgICAgICAgICAgICAgICAgICA8dGQga2V5PXtpZHh9IG9uQ2xpY2s9eygpID0+IHRoaXMub25UdXRvckNsaWNrKG5vdGVWYWx1ZS50dXRvclZhbHVlLCB3LndlZWtOdW1iZXIpfSBjbGFzc05hbWU9XCJ0dXRvckNlbGxcIj5cclxuICAgICAgICAgICAgICAgICAgICB7bm90ZVZhbHVlLnR1dG9yVmFsdWUudmFsdWUgPyA8ZGl2IGtleT17aWR4fSBkYXRhLXRvb2x0aXA9e25vdGVWYWx1ZS50dXRvclZhbHVlLnZhbHVlfT48aSBjbGFzc05hbWU9XCJmYXMgZmEtY29tbWVudC1kb3RzXCI+PC9pPjwvZGl2PjogPGRpdiBrZXk9e2lkeH0+PGkgY2xhc3NOYW1lPVwiZmFzIGZhLWNvbW1lbnQtbWVkaWNhbFwiPjwvaT48L2Rpdj59XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA6XHJcbiAgICAgICAgICAgICAgICAgICAgbm90ZVZhbHVlLnR1dG9yVmFsdWUudmFsdWUgPyA8dGQgY2xhc3NOYW1lPVwidHV0b3JDZWxsXCI+PGRpdiBkYXRhLXRvb2x0aXA9e25vdGVWYWx1ZS50dXRvclZhbHVlLnZhbHVlfT48aSBjbGFzc05hbWU9XCJmYXIgZmEtY29tbWVudC1kb3RzXCI+PC9pPjwvZGl2PjwvdGQ+IDogPHRkPjwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgIDx0Zm9vdD5cclxuICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICA8dGgga2V5PVwicG9pbnRzXCI+UG/DpG5nPC90aD5cclxuICAgICAgICAgICAgICAgIHtjb3Vyc2VzLm1hcCgoYywgaWR4KSA9PiA8dGgga2V5PXtpZHh9IGNsYXNzTmFtZT1cInN0ZXBDZWxsXCI+e2MuY3JlZGl0c308L3RoPil9XHJcbiAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICA8dGg+QmV0eWdzbcOlbDwvdGg+XHJcbiAgICAgICAgICAgICAgICB7Lypnb2Fscy5tYXAoZyA9PlxyXG4gICAgICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT1cInN0ZXBDZWxsXCI+e2cucGVyaW9kR29hbHMuZmlsdGVyKHBnID0+IHBnLnBlcmlvZE5hbWUgPT09ICBwZXJpb2QucGVyaW9kKVxyXG4gICAgICAgICAgICAgICAgICAubWFwKHBnPT5wZy5ncmFkZU5hbWUpWzBdIHx8IGcuZmluYWxHb2FsR3JhZGV9PC90aD4pKi99XHJcbiAgICAgICAgICAgICAgICB7Y291cnNlcy5tYXAoKGMsIGlkeCkgPT5cclxuICAgICAgICAgICAgICAgICAgPHRoIGtleT17aWR4fSBjbGFzc05hbWU9XCJzdGVwQ2VsbFwiPntjLnBlcmlvZEdvYWxHcmFkZX08L3RoPil9XHJcbiAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgPC90Zm9vdD5cclxuICAgICAgICAgIDwvdGFibGU+fVxyXG4gICAgICAgICAgPERpYWxvZ3NcclxuICAgICAgICBkaWFsb2dzPXtkaWFsb2dzfVxyXG4gICAgICAgIHBvcERpYWxvZz17KCkgPT4gdGhpcy5zZXRTdGF0ZSh7IGRpYWxvZ3M6IGRpYWxvZ3Muc2xpY2UoMCwgZGlhbG9ncy5sZW5ndGggLSAxKSB9KX0gLz5cclxuICAgICAgICAgIFxyXG4gICAgPC9kaXY+XHJcbiAgfVxyXG59IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBLR1Rlcm1QbGFubmVyV2Vla1BsYW4sIEtHVGVybVBsYW5uZXJXZWVrUGxhbkVudHJ5IH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBjcmVhdGVVVUlEIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQgeyBFbnYgfSBmcm9tICcuLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICB3ZWVrTnVtYmVyOiBudW1iZXI7XHJcbiAgd2Vla0RhdGU6IG51bWJlcjtcclxuICBjb3Vyc2VOYW1lOiBzdHJpbmc7XHJcbiAgd2Vla1BsYW4/OiBLR1Rlcm1QbGFubmVyV2Vla1BsYW47XHJcbiAgbm90ZT86IEtHVGVybVBsYW5uZXJXZWVrUGxhbkVudHJ5O1xyXG4gIGNsb3NlRGlhbG9nOiAoKT0+dm9pZDtcclxuICBlbnY6IEVudjtcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gIGNvbG9yOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBXZWVrTm90ZURpYWxvZyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGRlc2NyaXB0aW9uOiBwcm9wcy5ub3RlID8gcHJvcHMubm90ZS5kZXNjcmlwdGlvbiA6ICcnLFxyXG4gICAgICBjb2xvcjogcHJvcHMubm90ZSA/IHByb3BzLm5vdGUuY29sb3IgOiAneWVsbG93J1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGVsZXRlKCkge1xyXG4gICAgY29uc3QgeyB3ZWVrTnVtYmVyLCB3ZWVrRGF0ZSwgY291cnNlTmFtZSwgd2Vla1BsYW4sIG5vdGUsIGNsb3NlRGlhbG9nLCBlbnYgfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCB7IGRlc2NyaXB0aW9uLCBjb2xvcn0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgIGNsb3NlRGlhbG9nKCk7XHJcblxyXG4gICAgaWYgKE9iamVjdC5rZXlzKHdlZWtQbGFuLnBsYW5zKS5sZW5ndGggPT09IDEpIHtcclxuICAgICAgYXdhaXQgZW52LmtnVGVybVBsYW5uZXJSZXBvLmRlbGV0ZShbd2Vla1BsYW4uaWRdKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGF3YWl0IGVudi5rZ1Rlcm1QbGFubmVyUmVwby51cGRhdGUoW3dlZWtQbGFuXSwgd3AgPT4ge1xyXG4gICAgICAgIGRlbGV0ZSB3cC5wbGFuc1tjb3Vyc2VOYW1lXVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIHNhdmUoKSB7XHJcbiAgICBjb25zdCB7IHdlZWtOdW1iZXIsIHdlZWtEYXRlLCBjb3Vyc2VOYW1lLCB3ZWVrUGxhbiwgbm90ZSwgY2xvc2VEaWFsb2csIGVudiB9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IHsgZGVzY3JpcHRpb24sIGNvbG9yfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgY2xvc2VEaWFsb2coKTtcclxuXHJcbiAgICBpZiAoZGVzY3JpcHRpb24ubGVuZ3RoID09IDApIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHdlZWtQbGFuKSB7XHJcbiAgICAgIGF3YWl0IGVudi5rZ1Rlcm1QbGFubmVyUmVwby51cGRhdGUoW3dlZWtQbGFuXSwgd3AgPT4gd3AucGxhbnNbY291cnNlTmFtZV0gPSB7ZGVzY3JpcHRpb24sIGNvbG9yfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBwbGFucyA9IHt9O1xyXG4gICAgICBwbGFuc1tjb3Vyc2VOYW1lXSA9IHtkZXNjcmlwdGlvbiwgY29sb3J9O1xyXG4gICAgICBhd2FpdCBlbnYua2dUZXJtUGxhbm5lclJlcG8uaW5zZXJ0KFt7XHJcbiAgICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcclxuICAgICAgICBkYXRlVGltZTogd2Vla0RhdGUsXHJcbiAgICAgICAgcGxhbnNcclxuICAgICAgfV0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3QgeyB3ZWVrTnVtYmVyLCBjb3Vyc2VOYW1lLCB3ZWVrUGxhbiwgbm90ZSwgZW52IH0gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3QgeyBkZXNjcmlwdGlvbiwgY29sb3IgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCByZWFkT25seSA9IGVudi50dXRvcmVkO1xyXG5cclxuICAgIHJldHVybiA8ZGl2PlxyXG4gICAgICA8ZGl2PlxyXG4gICAgICAgIDxoMj5Iw6RuZGVsc2UgZsO2ciB2ZWNrYSB7d2Vla051bWJlcn0gb2NoIHtjb3Vyc2VOYW1lfTwvaDI+XHJcbiAgICAgICAgPGhyIC8+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi10YWJsZVwiPlxyXG4gICAgICAgICAgPGRpdj5CZXNrcml2bmluZzo8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZnVsbFdpZHRoXCI+XHJcbiAgICAgICAgICAgIDx0ZXh0YXJlYSBhdXRvRm9jdXMgdmFsdWU9e2Rlc2NyaXB0aW9ufSBkaXNhYmxlZD17cmVhZE9ubHl9IG9uQ2hhbmdlPXtldiA9PiB0aGlzLnNldFN0YXRlKHtkZXNjcmlwdGlvbjogZXYudGFyZ2V0LnZhbHVlfSl9IC8+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLXRhYmxlXCI+XHJcbiAgICAgICAgICA8ZGl2PkbDpHJnOjwvZGl2PlxyXG4gICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgPHNlbGVjdCB2YWx1ZT17Y29sb3J9IGRpc2FibGVkPXtyZWFkT25seX0gb25DaGFuZ2U9e2V2ID0+IHRoaXMuc2V0U3RhdGUoe2NvbG9yOiBldi50YXJnZXQudmFsdWV9KX0+XHJcbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cInllbGxvd1wiPkd1bDwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJ5ZWxsb3dMaWdodFwiPkxqdXNndWw8L29wdGlvbj5cclxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiY3lhblwiPkdyw7ZuPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cImN5YW5MaWdodFwiPkxqdXNncsO2bjwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJwdXJwbGVcIj5MaWxhPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cInB1cnBsZUxpZ2h0XCI+TGp1c2xpbGE8L29wdGlvbj5cclxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwicmVkXCI+UsO2ZDwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJyZWRMaWdodFwiPlJvc2E8L29wdGlvbj5cclxuICAgICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXY+XHJcbiAgICAgICAge3JlYWRPbmx5ID9cclxuICAgICAgICAgIDxidXR0b24gdGFiSW5kZXg9ezF9IGNsYXNzTmFtZT1cImJ0biBidG4tbGFyZ2UgYnRuLWRlZmF1bHRcIiBvbkNsaWNrPXsoKT0+dGhpcy5wcm9wcy5jbG9zZURpYWxvZygpfT5BdmJyeXQ8L2J1dHRvbj4gOlxyXG4gICAgICAgICAgPD5cclxuICAgICAgICAgICAgPGJ1dHRvbiB0YWJJbmRleD17MX0gY2xhc3NOYW1lPVwiYnRuIGJ0bi1sYXJnZSBidG4tZGVmYXVsdFwiIG9uQ2xpY2s9eygpPT50aGlzLnNhdmUoKX0+U3BhcmE8L2J1dHRvbj5cclxuICAgICAgICAgICAge25vdGUgJiYgPGEgdGFiSW5kZXg9ezF9IGNsYXNzTmFtZT1cImJ0biBidG4td2FybmluZyBidG4tbGFyZ2UgcHVsbC1yaWdodFwiIG9uQ2xpY2s9eygpPT50aGlzLmRlbGV0ZSgpfT5UYSBib3J0PC9hPn1cclxuICAgICAgICAgIDwvPlxyXG4gICAgICAgIH1cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBFRFNTdHVkZW50RnV0dXJlQWJpbGl0eSB9IGZyb20gJy4uLy4uL2NvbnRyYWN0cy9lZHMnO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IGZsYXR0ZW4gfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IEZ1dHVyZUFiaWxpdGllc1ZpZXdNb2RlbCB9IGZyb20gJy4vZnV0dXJlLWFiaWxpdGllcy12aWV3bW9kZWwnO1xyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBsb2FkaW5nOiBib29sZWFuLFxyXG4gIGRhdGE6IEVEU1N0dWRlbnRGdXR1cmVBYmlsaXR5W10sXHJcbiAgZXJyb3I6IHN0cmluZyB8IG51bGxcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEZ1dHVyZUFiaWxpdGllc1RhYmxlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PHt9LCBTdGF0ZT4ge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBsb2FkaW5nOiBmYWxzZSxcclxuICAgICAgZGF0YTogW10sXHJcbiAgICAgIGVycm9yOiBudWxsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50V2lsbE1vdW50KCkge1xyXG4gICAgdGhpcy5sb2FkKCk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBsb2FkKCkge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7IGxvYWRpbmc6IHRydWUgfSk7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgZW52LmVkc0NsaWVudC5nZXRTdHVkZW50RnV0dXJlQWJpbGl0aWVzKCk7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBkYXRhIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGVycm9yIH0pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7IGxvYWRpbmc6IGZhbHNlIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qgdmlld01vZGVsID0gbmV3IEZ1dHVyZUFiaWxpdGllc1ZpZXdNb2RlbCAodGhpcy5zdGF0ZS5kYXRhKTtcclxuICAgIGNvbnN0IHtjb2x1bW5IZWFkZXJzLCB2dEh0cywgY2FwYWJSb3dzfSA9IHZpZXdNb2RlbDtcclxuXHJcbiAgICByZXR1cm4gPGRpdj5cclxuICAgICAgPGg1PkZyYW10aWRzZsO2cm3DpWdvcjwvaDU+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFydGlhbEVkaXRTdHVkeVBsYW5WaWV3TW9kZVwiPlxyXG4gICAgICAgIDx0YWJsZSBzdHlsZT17eyB3aWR0aDogJzEwMCUnIH19IGNsYXNzTmFtZT1cInNtYWxsRm9udFwiPlxyXG4gICAgICAgICAgPHRoZWFkPlxyXG4gICAgICAgICAgICA8dHI+e2NvbHVtbkhlYWRlcnMubWFwKCh7IG5hbWUsIHR5cGUgfSwgaSkgPT5cclxuICAgICAgICAgICAgICB0eXBlID09PSAnaGVhZGVyJyA/XHJcbiAgICAgICAgICAgICAgICA8dGgga2V5PXtpfSByb3dTcGFuPXsyfT57bmFtZX08L3RoPiA6XHJcbiAgICAgICAgICAgICAgICA8dGgga2V5PXtpfSBjb2xTcGFuPXsyfT57bmFtZX08L3RoPil9PC90cj5cclxuICAgICAgICAgICAgPHRyIGNsYXNzTmFtZT1cImhlYWRlclwiPlxyXG4gICAgICAgICAgICAgIHt2dEh0cy5tYXAoKHZ0SHQsIGkpID0+IDx0aCBrZXk9e2l9Pnt2dEh0fTwvdGg+KX1cclxuICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgIDwvdGhlYWQ+XHJcbiAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgIHtjYXBhYlJvd3MubWFwKChyb3csIGkpID0+IDx0ciBrZXk9e2l9IGNsYXNzTmFtZT17KE1hdGguZmxvb3IoaS8zKSAlIDIpICYmICd0YWJsZU9kZCd9PlxyXG4gICAgICAgICAgICAgIHtyb3cubWFwKChjb2wsIGkpID0+IGNvbC50eXBlID09PSAnYWJpbGl0eScgP1xyXG4gICAgICAgICAgICAgICAgPHRkIGtleT17aX0gcm93U3Bhbj17M30gY2xhc3NOYW1lPVwiZ29hbHNTdWJqZWN0XCI+e2NvbC5uYW1lfTwvdGQ+IDpcclxuICAgICAgICAgICAgICAgIGNvbC50eXBlID09PSAnY2FwYWJpbGl0eScgP1xyXG4gICAgICAgICAgICAgICAgICA8dGQga2V5PXtpfSBjbGFzc05hbWU9XCJnb2Fsc1N1YmplY3RcIj57Y29sLm5hbWV9PC90ZD4gOlxyXG4gICAgICAgICAgICAgICAgICBjb2wuc2VsZWN0ZWQgP1xyXG4gICAgICAgICAgICAgICAgICAgIDx0ZCBrZXk9e2l9IGNsYXNzTmFtZT1cImVkc1NlbGVjdGVkXCI+PGRpdiBjbGFzc05hbWU9XCJtYXJrZWRJdGVtXCI+PC9kaXY+PC90ZD4gOlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZCBrZXk9e2l9IC8+KX1cclxuICAgICAgICAgICAgPC90cj4pfVxyXG4gICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICA8L3RhYmxlPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PjtcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBFRFNTdHVkZW50RnV0dXJlQWJpbGl0eSB9IGZyb20gJy4uLy4uL2NvbnRyYWN0cy9lZHMnO1xyXG5pbXBvcnQgeyBmbGF0dGVuIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5cclxudHlwZSBBYmlsaXR5Q2VsbCA9IHsgdHlwZTogJ2FiaWxpdHknLCBuYW1lOiBzdHJpbmcgfTtcclxudHlwZSBDYXBhYkNlbGwgPSB7IHR5cGU6ICdjYXBhYmlsaXR5JywgbmFtZTogc3RyaW5nIH07XHJcbnR5cGUgVGVybUNlbGwgPSB7IHR5cGU6ICd0ZXJtJywgc2VsZWN0ZWQ6IGJvb2xlYW4gfTtcclxudHlwZSBDZWxsID0gQWJpbGl0eUNlbGwgfCBDYXBhYkNlbGwgfCBUZXJtQ2VsbDtcclxuXHJcbmV4cG9ydCBjbGFzcyBGdXR1cmVBYmlsaXRpZXNWaWV3TW9kZWwge1xyXG4gIGNvbHVtbkhlYWRlcnM6IHtuYW1lOiBzdHJpbmcsIHR5cGU6IHN0cmluZ31bXTtcclxuICB2dEh0czogc3RyaW5nW107XHJcbiAgY2FwYWJSb3dzOiBDZWxsW11bXTtcclxuXHJcbiAgY29uc3RydWN0b3IoZGF0YTogRURTU3R1ZGVudEZ1dHVyZUFiaWxpdHlbXSkge1xyXG4gICAgLy8gV2lsbCBidWlsZCB0aGUgdG90YWwgeWVhcnNcclxuICAgIGNvbnN0IGZvcm1OYW1lczoge1tuYW1lOiBzdHJpbmddOiB0cnVlfSA9IHt9O1xyXG4gICAgZGF0YS5mb3JFYWNoKGEgPT4gYS5jYXBhYmlsaXRpZXMuZm9yRWFjaChjID0+IGZvcm1OYW1lc1tjLmZvcm1OYW1lXSA9IHRydWUpKTtcclxuICAgIGNvbnN0IHllYXJzID0gT2JqZWN0LmtleXMoZm9ybU5hbWVzKTtcclxuICAgIFxyXG4gICAgLy8gY29sdW1uSGVhZGVyc1xyXG4gICAgdGhpcy5jb2x1bW5IZWFkZXJzID0gW3tcclxuICAgICAgbmFtZTogXCJGcmFtdGlkc2bDtnJtw6VnYVwiLFxyXG4gICAgICB0eXBlOiBcImhlYWRlclwiXHJcbiAgICB9LCB7XHJcbiAgICAgIG5hbWU6IFwiT21yw6VkZVwiLFxyXG4gICAgICB0eXBlOiBcImhlYWRlclwiXHJcbiAgICB9XS5jb25jYXQoeWVhcnMubWFwKHllYXIgPT4gKHtcclxuICAgICAgbmFtZTogeWVhcixcclxuICAgICAgdHlwZTogJ3llYXInXHJcbiAgICB9KSkpO1xyXG5cclxuICAgIC8vIHZ0SHRzXHJcbiAgICB0aGlzLnZ0SHRzID0gZmxhdHRlbih5ZWFycy5tYXAoeWVhciA9PiBbXCJIVFwiLCBcIlZUXCJdKSk7XHJcblxyXG4gICAgLy8gY2FiYWJSb3dzXHJcbiAgICBjb25zdCByb3dzOiBDZWxsW11bXSA9IFtdO1xyXG4gICAgZGF0YS5mb3JFYWNoKGEgPT4ge1xyXG4gICAgICBsZXQgcm93OiBDZWxsW10gPSBbe3R5cGU6ICdhYmlsaXR5JywgbmFtZTogYS5hYmlsaXR5TmFtZX1dO1xyXG4gICAgICBjb25zdCBhZGRlZENhcGFicyA6IHtbbmFtZTogc3RyaW5nXTogdHJ1ZX0gPSB7fTtcclxuICAgICAgYS5jYXBhYmlsaXRpZXMuZm9yRWFjaChjID0+IHtcclxuICAgICAgICBjb25zdCBjZWxsczogVGVybUNlbGxbXSA9IFtcclxuICAgICAgICAgIHt0eXBlOiAndGVybScsIHNlbGVjdGVkOiBjLmh0SGFzVmFsdWUgIT09IGZhbHNlfSxcclxuICAgICAgICAgIHt0eXBlOiAndGVybScsIHNlbGVjdGVkOiBjLnZ0SGFzVmFsdWUgIT09IGZhbHNlfVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgLy9pZiAoYy5odEhhc1ZhbHVlIHx8IGMudnRIYXNWYWx1ZSkgZGVidWdnZXI7XHJcblxyXG4gICAgICAgIGlmICghYWRkZWRDYXBhYnNbYy5jYXBhYmlsaXR5TmFtZV0pIHtcclxuICAgICAgICAgIC8vaWYgKCFpc0ZpcnN0Q2FwYWJpbGl0eSkgcm93cy5wdXNoKHJvdyk7XHJcbiAgICAgICAgICBpZiAocm93Lmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgcm93cy5wdXNoKHJvdyk7XHJcbiAgICAgICAgICAgIHJvdyA9IFtdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYWRkZWRDYXBhYnNbYy5jYXBhYmlsaXR5TmFtZV0gPSB0cnVlO1xyXG4gICAgICAgICAgcm93LnB1c2goe3R5cGU6ICdjYXBhYmlsaXR5JywgbmFtZTogYy5jYXBhYmlsaXR5TmFtZX0pO1xyXG4gICAgICAgICAgY2VsbHMuZm9yRWFjaChjZWxsID0+IHJvdy5wdXNoKGNlbGwpKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJvdykge1xyXG4gICAgICAgICAgLy9hZGRlZENhcGFic1tjLmNhcGFiaWxpdHlOYW1lXS5jb25jYXQoY2VsbHMpO1xyXG4gICAgICAgICAgY2VsbHMuZm9yRWFjaChjZWxsID0+IHJvdy5wdXNoKGNlbGwpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBpZiAocm93KSByb3dzLnB1c2gocm93KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuY2FwYWJSb3dzID0gcm93cztcclxuICB9XHJcbn0iLCJpbXBvcnQge0VEU1N0dWR5UGxhbn0gZnJvbSAnLi4vLi4vY29udHJhY3RzL2Vkcyc7XHJcbmltcG9ydCB7IEVEU1BlcmlvZCB9IGZyb20gJy4uLy4uL2FwaXMvZWRzY2xpZW50JztcclxuXHJcbmV4cG9ydCBjbGFzcyBWaWV3TW9kZWwge1xyXG4gICAgc3ViamVjdHM6IEFycmF5PHtcclxuICAgICAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgYXRHb2FsOiBzdHJpbmc7XHJcbiAgICAgICAgc3RHb2FsOiBzdHJpbmc7XHJcbiAgICAgICAgZmluYWxHb2FsOiBzdHJpbmc7XHJcbiAgICAgICAgc3RyYXRlZ2llczogc3RyaW5nO1xyXG4gICAgfT47XHJcblxyXG4gICAgY29uc3RydWN0b3IgKHN0dWR5UGxhbnM6IEVEU1N0dWR5UGxhbltdKSB7XHJcbiAgICAgICAgdGhpcy5zdWJqZWN0cyA9IHN0dWR5UGxhbnMubWFwKHNwID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcGVyaW9kR29hbHMgPSBzcC5wZXJpb2RHb2Fsc1xyXG4gICAgICAgICAgICAgICAgLm1hcChnID0+ICh7cGVyaW9kOiBuZXcgRURTUGVyaW9kKGcucGVyaW9kTmFtZSksIGdvYWw6IGcuZ3JhZGVOYW1lfSkpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogc3AuY291cnNlVW5pdE5hbWUsXHJcbiAgICAgICAgICAgICAgICBhdEdvYWw6IHBlcmlvZEdvYWxzLmZpbHRlciAoKHtwZXJpb2R9KT0+IHBlcmlvZC50ZXJtID09PSAnQVQnKS5tYXAoKHtnb2FsfSkgPT4gZ29hbClbMF0sXHJcbiAgICAgICAgICAgICAgICBzdEdvYWw6IHBlcmlvZEdvYWxzLmZpbHRlciAoKHtwZXJpb2R9KT0+IHBlcmlvZC50ZXJtID09PSAnU1QnKS5tYXAoKHtnb2FsfSkgPT4gZ29hbClbMF0sXHJcbiAgICAgICAgICAgICAgICBmaW5hbEdvYWw6IHNwLmZpbmFsR29hbEdyYWRlLFxyXG4gICAgICAgICAgICAgICAgc3RyYXRlZ2llczogc3Auc3RyYXRlZ3lUZXh0XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBWaWV3TW9kZWwgfSBmcm9tICcuL2dvYWxzLXZpZXdtb2RlbCc7XHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgRURTU3R1ZHlQbGFuIH0gZnJvbSAnLi4vLi4vY29udHJhY3RzL2Vkcyc7XHJcbmltcG9ydCB7IEZ1dHVyZUFiaWxpdGllc1RhYmxlIH0gZnJvbSAnLi9mdXR1cmUtYWJpbGl0aWVzLXRhYmxlJztcclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgbG9hZGluZ1N0dWR5UGxhbnM6IGJvb2xlYW4sXHJcbiAgc3R1ZHlQbGFuczogRURTU3R1ZHlQbGFuW10sXHJcbiAgZXJyb3I6IHN0cmluZyB8IG51bGxcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEtTR29hbHMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8e30sIFN0YXRlPiB7XHJcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGxvYWRpbmdTdHVkeVBsYW5zOiBmYWxzZSxcclxuICAgICAgc3R1ZHlQbGFuczogW10sXHJcbiAgICAgIGVycm9yOiBudWxsXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsTW91bnQoKSB7XHJcbiAgICB0aGlzLmxvYWQoKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGxvYWQoKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtsb2FkaW5nU3R1ZHlQbGFuczogdHJ1ZX0pO1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc3R1ZHlQbGFucyA9IGF3YWl0IGVudi5lZHNDbGllbnQuZ2V0U3R1ZGVudEdvYWxzKCk7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe3N0dWR5UGxhbnN9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2Vycm9yfSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFN0YXRlKHtsb2FkaW5nU3R1ZHlQbGFuczogZmFsc2V9KTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHZpZXdNb2RlbCA9IG5ldyBWaWV3TW9kZWwodGhpcy5zdGF0ZS5zdHVkeVBsYW5zKTtcclxuICAgIGNvbnN0IHNob3dUZXJtR29hbHMgPVxyXG4gICAgICAgKCcnK2Vudi5jdXJyZW50VXNlci5zY2hvb2xUeXBlKS50b0xvd2VyQ2FzZSgpICE9PSBcImd5bW5hc2l1bVwiO1xyXG5cclxuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImtlZF9ib3hlZFwiPlxyXG4gICAgICA8aDQ+XHJcbiAgICAgICAge0xgTcOlbGB9XHJcbiAgICAgIDwvaDQ+XHJcbiAgICAgIDxociAvPlxyXG4gICAgICA8dGFibGUgY2xhc3NOYW1lPVwic21hbGxGb250XCI+XHJcbiAgICAgICAgPHRoZWFkPlxyXG4gICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICA8dGg+e0xgw4RtbmVgfTwvdGg+XHJcbiAgICAgICAgICAgIHtzaG93VGVybUdvYWxzICYmIDx0aD57TGBIVGB9PC90aD59XHJcbiAgICAgICAgICAgIHtzaG93VGVybUdvYWxzICYmIDx0aD57TGBWVGB9PC90aD59XHJcbiAgICAgICAgICAgIDx0aD57TGBTbHV0bcOlbGB9PC90aD5cclxuICAgICAgICAgICAgPHRoPntMYFN0cmF0ZWdpZXJgfTwvdGg+XHJcbiAgICAgICAgICA8L3RyPlxyXG4gICAgICAgIDwvdGhlYWQ+XHJcbiAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAge3ZpZXdNb2RlbC5zdWJqZWN0cy5tYXAoKHMsIGkpID0+XHJcbiAgICAgICAgICA8dHIga2V5PXtzLm5hbWV9IGNsYXNzTmFtZT17aSAlIDIgJiYgXCJ0YWJsZU9kZFwifT5cclxuICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cImdvYWxzU3ViamVjdFwiPntzLm5hbWV9PC90ZD5cclxuICAgICAgICAgICAge3Nob3dUZXJtR29hbHMgJiYgPHRkIGNsYXNzTmFtZT1cImdvYWxzVGVybVwiPntzLmF0R29hbH08L3RkPn1cclxuICAgICAgICAgICAge3Nob3dUZXJtR29hbHMgJiYgPHRkIGNsYXNzTmFtZT1cImdvYWxzVGVybVwiPntzLnN0R29hbH08L3RkPn1cclxuICAgICAgICAgICAgPHRkIGNsYXNzTmFtZT1cImdvYWxzRW5kXCI+e3MuZmluYWxHb2FsfTwvdGQ+XHJcbiAgICAgICAgICAgIDx0ZD57cy5zdHJhdGVnaWVzfTwvdGQ+XHJcbiAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgKX1cclxuICAgICAgICA8L3Rib2R5PjwvdGFibGU+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkaXZpZGVyXCIgLz5cclxuICAgICAgICA8RnV0dXJlQWJpbGl0aWVzVGFibGUgLz5cclxuICAgIDwvZGl2PlxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7S1NUZXJtUGxhbm5lcn0gZnJvbSAnLi90ZXJtcGxhbm5lcic7XHJcbmltcG9ydCB7IFR1dG9yYWJsZUNvbXBvbmVudCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy90dXRvcmFibGUtY29tcG9uZW50JztcclxuaW1wb3J0IHsgSW5qZWN0ZWRJbnRsUHJvcHMgfSBmcm9tICdyZWFjdC1pbnRsJztcclxuaW1wb3J0IHsgTGFuZ3VhZ2VDb250ZXh0IH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL0xhbmd1YWdlQ29udGV4dCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMgZXh0ZW5kcyBJbmplY3RlZEludGxQcm9wc3tcclxuICB2aWV3Q291cnNlVXJsOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBLU1Rlcm1QbGFubmVyVHV0b3JlZCAocHJvcHM6IFByb3BzKSB7XHJcbiAgY29uc3Qge2ludGx9ID0gcHJvcHM7XHJcbiAgcmV0dXJuIDxMYW5ndWFnZUNvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3tpbnRsfX0+XHJcbiAgPFR1dG9yYWJsZUNvbXBvbmVudFxyXG4gICAgdHV0b3JlZD17dHJ1ZX1cclxuICAgIGNyZWF0ZUNvbXBvbmVudD17ZW52ID0+XHJcbiAgICAgIDxLU1Rlcm1QbGFubmVyXHJcbiAgICAgICAga2V5PXtlbnYuY3VycmVudFVzZXIubWFpbH1cclxuICAgICAgICBlbnY9e2Vudn1cclxuICAgICAgICB0dXRvcmVkPXt0cnVlfSBcclxuICAgICAgICBpbml0aWFsRGF0ZT17bmV3IERhdGUoKX0vPlxyXG4gICAgfVxyXG4gIC8+PC9MYW5ndWFnZUNvbnRleHQuUHJvdmlkZXI+O1xyXG59XHJcbiIsImltcG9ydCB7VGVybX0gZnJvbSAnLi4vLi4vY29udHJhY3RzL2tlZC1tb2RlbHMnO1xyXG5pbXBvcnQge0VEU0NvdXJzZX0gZnJvbSAnLi4vLi4vY29udHJhY3RzL2Vkcyc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rmlyc3RBbmRMYXN0V2Vlayh0ZXJtOiBUZXJtKSB7XHJcbiAgcmV0dXJuIHRlcm0gPT09ICdBVCcgP1xyXG4gICAgWzMzLCA1MF0gOiAgLy8gVGhpcyBpcyBhIGd1ZXNzISBOZWVkIGRhdGEhIFNob3VsZCBiZSBwb3NzaWJsZSB0byBnZXQgZnJvbSBza29sYTI0P1xyXG4gICAgWzIsIDIzXTsgICAgLy8gVGhpcyBpcyBhIGd1ZXNzISBOZWVkIGRhdGEhXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBMQVNUX1NURVBfU1BSSU5HID0gMjg7IC8vIFdlZWsgMjggaXMgaW4gc3VtbWVyLiBVc2UgaXQgYXMgcGxhY2Vob2xkZXIgZm9yIFwibGFzdCBzdGVwXCJcclxuZXhwb3J0IGNvbnN0IExBU1RfU1RFUF9BVVRVTU4gPSA1MjsgLy8gV2VlayBtdXN0IGJlIHZhbGlkLiBVc2UgaXQgYXMgcGxhY2Vob2xkZXIgZm9yIFwibGFzdCBzdGVwXCJcclxuXHJcbi8qKlxyXG4gKiBOb3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBpcyB0aWdodGx5IGNvdXBsZWQgdG8gdGhlIHN3ZWRpc2ggc2Nob29sLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRDb3Vyc2VGcm9tQ29sdW1uSGVhZGVyKFxyXG4gIGNvdXJzZXM6IEVEU0NvdXJzZVtdLFxyXG4gIGNvbHVtbkhlYWRlcjogc3RyaW5nKSA6IEVEU0NvdXJzZSB8IG51bGxcclxue1xyXG4gIHN3aXRjaCAoY29sdW1uSGVhZGVyKSB7XHJcbiAgICBjYXNlICdNLnNwcic6IHJldHVybiBjb3Vyc2VzXHJcbiAgICAgIC5maWx0ZXIoY291cnNlID0+IGNvdXJzZS5zaG9ydE5hbWUgIT09ICdNQScgJiYgY291cnNlLnNob3J0TmFtZS5zdGFydHNXaXRoKCdNJykpWzBdIHx8IG51bGw7XHJcbiAgICBjYXNlICdNYSc6IHJldHVybiBjb3Vyc2VzLmZpbHRlcihjID0+IGMuc2hvcnROYW1lID09PSBcIk1BXCIpWzBdIHx8IG51bGw7XHJcbiAgICBjYXNlICdTdi9TdkEnOiByZXR1cm4gY291cnNlcy5maWx0ZXIoYyA9PiBjLnNob3J0TmFtZS5zdGFydHNXaXRoKFwiU1ZcIikpWzBdIHx8IG51bGw7XHJcbiAgICBjYXNlICdFbmcnOiByZXR1cm4gY291cnNlcy5maWx0ZXIoYyA9PiBjLnNob3J0TmFtZSA9PT0gXCJFTlwiKVswXSB8fCBudWxsO1xyXG4gIH1cclxuICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbHVtbnNIZWFkZXIobG9jYWxlOiBzdHJpbmcpOiBzdHJpbmdbXVxyXG57XHJcbiAgc3dpdGNoKGxvY2FsZSlcclxuICB7XHJcbiAgICBjYXNlICdzdic6XHJcbiAgICByZXR1cm4gWydNLnNwcicsJ01hJywgJ1N2L1N2QScsICdFbmcnXTtcclxuICAgIGNhc2UgJ2VuX3Npbic6XHJcbiAgICByZXR1cm4gWydNRkwnLCdNYScsICdIaScsICdFbmcnLCAnWW9nYScsICdJQ1QnXTtcclxuICAgIGNhc2UgJ2VuX25pbic6XHJcbiAgICByZXR1cm4gWydNRkwnLCdNYScsICdIaScsICdFbmcnLCAnWW9nYScsICdJQ1QnXTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBOb3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBpcyB0aWdodGx5IGNvdXBsZWQgdG8gdGhlIHN3ZWRpc2ggc2Nob29sLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbHVtbkhlYWRlckZyb21Db3Vyc2UoY291cnNlOiBFRFNDb3Vyc2UpIDogc3RyaW5nXHJcbntcclxuICBjb25zdCBzaG9ydE5hbWUgPSBjb3Vyc2Uuc2hvcnROYW1lO1xyXG4gIGlmIChzaG9ydE5hbWUgPT09IFwiTUFcIikgcmV0dXJuICdNYSc7XHJcbiAgaWYgKHNob3J0TmFtZSA9PT0gXCJFTlwiKSByZXR1cm4gJ0VuZyc7XHJcbiAgaWYgKHNob3J0TmFtZS5zdGFydHNXaXRoKFwiU1ZcIikpIHJldHVybiAnU3YvU3ZBJztcclxuICBpZiAoc2hvcnROYW1lLnN0YXJ0c1dpdGgoXCJNMlwiKSkgcmV0dXJuICdNLnNwcic7XHJcbiAgcmV0dXJuIG51bGw7XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBHZW5lcmljU2Nob29sVGVybSB9IGZyb20gJy4uLy4uL3V0aWxzL2dlbmVyaWMtc2Nob29sLXRlcm0nO1xyXG5pbXBvcnQge0VEU0NvdXJzZX0gZnJvbSAnLi4vLi4vY29udHJhY3RzL2Vkcyc7XHJcbmltcG9ydCB7Vmlld01vZGVsfSBmcm9tICcuL3ZpZXdtb2RlbCc7XHJcbmltcG9ydCB7IENvbnRlbnRFZGl0YWJsZUZpZWxkfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvY29udGVudC1lZGl0YWJsZS1maWVsZCc7XHJcbmltcG9ydCAgeyBFbnYgfSBmcm9tICcuLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBLU1Rlcm1QbGFubmVyV2Vla1BsYW4sIFRlcm1QbGFubmVyVHV0b3JOb3RlLCBUZXJtcGxhbm5lcldlZWtPclR1dG9yIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgJy4uLy4uL3JlcG9zL2tzLXRlcm1wbGFubmVyLXJlcG8taW5zdGFuY2UnO1xyXG5pbXBvcnQge0xhbmd1YWdlQ29udGV4dH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL0xhbmd1YWdlQ29udGV4dCc7XHJcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XHJcbmltcG9ydCBjZmcgZnJvbSAnLi4vLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuaW1wb3J0IHsgU3Bpbm5lciB9IGZyb20gJy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3NwaW5uZXInO1xyXG5pbXBvcnQgeyBEb3VnaG51dCB9IGZyb20gJy4uL2NoYXJ0cy9kb3VnaG51dCc7XHJcbmltcG9ydCB7IGdldFNjaG9vbFRyYW5zbGF0ZWRTdWJqZWN0RnVsbG5hbWUgfSBmcm9tICcuLi8uLi91dGlscy9nZW5lcmljLXNjaG9vbC11dGlscyc7XHJcbmltcG9ydCB7IERpYWxvZ3MgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvZGlhbG9ncyc7XHJcbmltcG9ydCB7IFR1dG9yRGlhbG9nIH0gZnJvbSAnLi90dXRvci1kaWFsb2cnO1xyXG5pbXBvcnQgeyBEb2N1bWVudEFjY2VzcyB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgZmVhdHVyZXMgfSBmcm9tICcuLi8uLi9mZWF0dXJlcyc7XHJcbmltcG9ydCB7IE9wZW5DbG9zZUJveCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9vcGVuLWNsb3NlLWJveCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGluaXRpYWxEYXRlOiBEYXRlO1xyXG4gIHR1dG9yZWQ6IGJvb2xlYW47XHJcbiAgZW52OiBFbnY7XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgc2Nob29sVGVybTogR2VuZXJpY1NjaG9vbFRlcm07XHJcbiAgd2Vla1BsYW5zOiBUZXJtcGxhbm5lcldlZWtPclR1dG9yW107XHJcbiAgYWN0aXZlQ291cnNlczogRURTQ291cnNlW107XHJcbiAgbG9hZGluZ1dlZWtQbGFuczogYm9vbGVhbjtcclxuICBsb2FkaW5nQWN0aXZlQ291cnNlczogYm9vbGVhbjtcclxuICBlcnJvcjogRXJyb3IgfCBzdHJpbmcgfCBudWxsO1xyXG4gIGluaXRpYWxMb2FkOiBib29sZWFuO1xyXG4gIGRpYWxvZ3M6IGFueVtdO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIEtTVGVybVBsYW5uZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsU3RhdGU+IHtcclxuICB0YWJsZTogSFRNTFRhYmxlRWxlbWVudDtcclxuICBmbG93SWQ6IG51bWJlcjtcclxuICBzdGF0aWMgY29udGV4dFR5cGUgPSBMYW5ndWFnZUNvbnRleHQ7XHJcbiAgZmllbGRzOiBDb250ZW50RWRpdGFibGVGaWVsZFtdW107XHJcbiAgdW5tb3VudGVkOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgc2Nob29sVGVybTogbmV3IEdlbmVyaWNTY2hvb2xUZXJtKHByb3BzLmluaXRpYWxEYXRlKSxcclxuICAgICAgYWN0aXZlQ291cnNlczogW10sXHJcbiAgICAgIHdlZWtQbGFuczogW10sXHJcbiAgICAgIGVycm9yOiBudWxsLFxyXG4gICAgICBsb2FkaW5nQWN0aXZlQ291cnNlczogZmFsc2UsXHJcbiAgICAgIGxvYWRpbmdXZWVrUGxhbnM6IGZhbHNlLFxyXG4gICAgICBpbml0aWFsTG9hZDogdHJ1ZSxcclxuICAgICAgZGlhbG9nczogW11cclxuICAgIH1cclxuICAgIHRoaXMuZmxvd0lkID0gMTtcclxuICAgIHRoaXMudXBkYXRlV2Vla1BsYW5zID0gdGhpcy51cGRhdGVXZWVrUGxhbnMuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgYXdhaXQgdGhpcy5sb2FkKHRoaXMuc3RhdGUuc2Nob29sVGVybSk7XHJcbiAgICBpZiAoIXRoaXMudW5tb3VudGVkKSB0aGlzLnByb3BzLmVudi5rc1Rlcm1QbGFubmVyUmVwby5tZW0uc3Vic2NyaWJlKHRoaXMudXBkYXRlV2Vla1BsYW5zKTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgdGhpcy51bm1vdW50ZWQgPSB0cnVlO1xyXG4gICAgdGhpcy5wcm9wcy5lbnYua3NUZXJtUGxhbm5lclJlcG8ubWVtLnVuc3Vic2NyaWJlKHRoaXMudXBkYXRlV2Vla1BsYW5zKTtcclxuICB9ICBcclxuXHJcbiAgdXBkYXRlV2Vla1BsYW5zKHdlZWtQbGFuc09yVHV0b3JDb21tOiBUZXJtcGxhbm5lcldlZWtPclR1dG9yW10sIGVycm9yPzogRXJyb3IpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe3dlZWtQbGFuczogd2Vla1BsYW5zT3JUdXRvckNvbW0sIGxvYWRpbmdXZWVrUGxhbnM6IGZhbHNlLCBlcnJvcjogZXJyb3IgfHwgbnVsbH0pO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgbG9hZChzY2hvb2xUZXJtOiBHZW5lcmljU2Nob29sVGVybSkge1xyXG4gICAgY29uc3QgZmxvd0lkID0gKyt0aGlzLmZsb3dJZDtcclxuICAgIHRoaXMuZmllbGRzID0gW107XHJcblxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIC8vbG9hZGluZ1dlZWtQbGFuczogdHJ1ZSxcclxuICAgICAgbG9hZGluZ0FjdGl2ZUNvdXJzZXM6IHRydWVcclxuICAgIH0pO1xyXG4gICAgY29uc3Qge2tzVGVybVBsYW5uZXJSZXBvfSA9IHRoaXMucHJvcHMuZW52O1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHRlcm0gPSBhd2FpdCB0aGlzLmxvYWRBY2FkZW1pY1llYXJEYXRlcyhzY2hvb2xUZXJtLCBjZmcuS0VEX1NDSE9PTF9MT0NBTEUpO1xyXG4gICAgICBpZiAodGhpcy5mbG93SWQgIT09IGZsb3dJZCkgcmV0dXJuO1xyXG4gICAgICB2YXIgY3VycmVudFNjaG9vbFRlcm0gPSBuZXcgR2VuZXJpY1NjaG9vbFRlcm0oc2Nob29sVGVybS5zZWxlY3RlZERhdGUsIHRoaXMuY29udGV4dC5pbnRsLmxvY2FsZSwgdGVybSk7XHJcbiAgICAgIC8vcmVmcmVzaCBzYXZlZCBkYXRhXHJcbiAgICAgIGtzVGVybVBsYW5uZXJSZXBvLnJlZnJlc2hEYXRhKGN1cnJlbnRTY2hvb2xUZXJtLmdldFRlcm1TdGFydEFuZEVuZCh0cnVlKSk7XHJcblxyXG4gICAgICAvL3JlbG9hZCBjb3Vyc2VzIGJhc2VkIG9uIHRoZSBjdXJyZW50IGRhdGVcclxuICAgICAgbGV0IGFjdGl2ZUNvdXJzZXMgPSBbXTtcclxuICAgICAgaWYoY2ZnLktFRF9TQ0hPT0xfTE9DQUxFID09PSAnc3YnKXtcclxuICAgICAgICBhY3RpdmVDb3Vyc2VzID0gYXdhaXQgdGhpcy5sb2FkQWN0aXZlQ291cnNlcyhjdXJyZW50U2Nob29sVGVybSk7XHJcbiAgICAgICAgaWYgKHRoaXMuZmxvd0lkICE9PSBmbG93SWQpIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnNldFN0YXRlKHtzY2hvb2xUZXJtOiBjdXJyZW50U2Nob29sVGVybSwgaW5pdGlhbExvYWQ6IGZhbHNlLCBhY3RpdmVDb3Vyc2VzLCBsb2FkaW5nQWN0aXZlQ291cnNlczogZmFsc2V9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGlmICh0aGlzLmZsb3dJZCAhPT0gZmxvd0lkKSByZXR1cm47XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe3NjaG9vbFRlcm06IGN1cnJlbnRTY2hvb2xUZXJtLCBsb2FkaW5nQWN0aXZlQ291cnNlczogZmFsc2UsIGVycm9yfSk7ICBcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGxvYWRBY2FkZW1pY1llYXJEYXRlcyhzY2hvb2xUZXJtOiBHZW5lcmljU2Nob29sVGVybSwgc2Nob29sTG9jYWxlOnN0cmluZyl7XHJcbiAgICBjb25zdCB0ZXJtRGF0ZXMgPSBhd2FpdCB0aGlzLnByb3BzLmVudi5lZHNDbGllbnQuZ2V0QWNhZGVtaWNZZWFyVGVybXMoc2Nob29sTG9jYWxlLCBzY2hvb2xUZXJtLnNlbGVjdGVkRGF0ZSk7XHJcbiAgICByZXR1cm4gdGVybURhdGVzO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgbG9hZEFjdGl2ZUNvdXJzZXMoc2Nob29sVGVybTogR2VuZXJpY1NjaG9vbFRlcm0pIHtcclxuICAgIC8vQ3VzdG9tIGZvciBub3cgaW4gb3JkZXIgdG8gY2hhbmdlIEVEU1BlcmlvZFxyXG4gICAgLy9jb25zdCBwZXJpb2ROYW1lID0gbmV3IEVEU1BlcmlvZChzY2hvb2xUZXJtKS5wZXJpb2Q7IFxyXG4gICAgY29uc3QgcGVyaW9kTmFtZSA9IHNjaG9vbFRlcm0uZ2V0RWRzUGVyaW9kTmFtZSgpOyAvL3RlbXBvcmFyeSBmaXggXHJcbiAgICBjb25zdCBhY3RpdmVDb3Vyc2VzID0gYXdhaXQgdGhpcy5wcm9wcy5lbnYuZWRzQ2xpZW50LmdldEFjdGl2ZUNvdXJzZXMoe3BlcmlvZE5hbWV9KTtcclxuICAgIHJldHVybiBhY3RpdmVDb3Vyc2VzO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgdXBkYXRlQ2VsbCh3ZWVrUGxhbjogS1NUZXJtUGxhbm5lcldlZWtQbGFuLCBjb2x1bW5OYW1lOiBzdHJpbmcsIG5ld1ZhbHVlOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IG9sZFZhbHVlID0gKHdlZWtQbGFuICYmIHdlZWtQbGFuLmNlbGxWYWx1ZXNbY29sdW1uTmFtZV0pIHx8IFwiXCI7XHJcbiAgICBpZiAob2xkVmFsdWUgPT09IG5ld1ZhbHVlKSByZXR1cm47XHJcbiAgICB0cnkge1xyXG4gICAgICB3ZWVrUGxhbi5jZWxsVmFsdWVzW2NvbHVtbk5hbWVdID0gbmV3VmFsdWU7XHJcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb3BzLmVudi5rc1Rlcm1QbGFubmVyUmVwby51cHNlcnQgKFxyXG4gICAgICAgIHdlZWtQbGFuLFxyXG4gICAgICAgICh3cCA6IEtTVGVybVBsYW5uZXJXZWVrUGxhbikgPT4gIHdwLmNlbGxWYWx1ZXNbY29sdW1uTmFtZV0gPSBuZXdWYWx1ZSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yLnN0YWNrIHx8IGVycm9yKTtcclxuICAgICAgaWYgKGVycm9yLm5hbWUgPT09IFwiaHR0cDQwM1wiKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZXJyb3I6ICB0aGlzLmNvbnRleHQuaW50bCh7aWQ6XCJjb21tb24uY2hhbmdlc05vdFNhdmVkVW5hdXRob3JpemVkXCIsIGRlZmF1bHRNZXNzYWdlOlwiw4RuZHJpbmdhcm5hIHNwYXJhZGVzIGludGUgcC5nLmEuIG90aWxscsOkY2tsaWcgYmVow7ZyaWdoZXQuXCJ9KX0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe2Vycm9yOiB0aGlzLmNvbnRleHQuaW50bCh7aWQ6XCJjb21tb24uY2hhbmdlc05vdFNhdmVkRXJyb3JPY2N1cmVkXCIsIGRlZmF1bHRNZXNzYWdlOlwiRsO2ciB0aWxsZsOkbGxldCBwcm9ibGVtIGF0dCBzcGFyYSBkYXRhLiBEaW5hIMOkbmRyaW5nYXIgc3BhcmFkZXMgaW50ZS5cIn0pfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFxyXG4gICAqIEBwYXJhbSB0dXRvck5vdGUgXHJcbiAgICogQHBhcmFtIG5ld1ZhbHVlIFxyXG4gICAqIFxyXG4gICAqIFVwZGF0ZSB0dXRvciBmaWVsZCB2YWx1ZVxyXG4gICAqL1xyXG4gIGFzeW5jIHVwZGF0ZVR1dG9yTm90ZUZpZWxkKHR1dG9yTm90ZTogVGVybVBsYW5uZXJUdXRvck5vdGUsIG5ld1ZhbHVlOiBzdHJpbmcpe1xyXG4gICAgY29uc3Qgb2xkVmFsdWUgPSAodHV0b3JOb3RlICYmIHR1dG9yTm90ZS5jb250ZW50KSB8fCBcIlwiO1xyXG4gICAgaWYgKG9sZFZhbHVlID09PSBuZXdWYWx1ZSkgcmV0dXJuO1xyXG4gICAgdHJ5IHtcclxuICAgICAgdHV0b3JOb3RlLmNvbnRlbnQgPSBuZXdWYWx1ZTtcclxuICAgICAgLy9zZXQgZG9jdW1lbnQgQUNMXHJcbiAgICAgIHR1dG9yTm90ZS5hY2wgPSBbXHJcbiAgICAgICAgbmV3IERvY3VtZW50QWNjZXNzKFwidHV0b3JGb3JcIiwgdGhpcy5wcm9wcy5lbnYuY3VycmVudFVzZXIubWFpbCwgXCJTXCIpLnRvU3RyaW5nKCksXHJcbiAgICAgICAgbmV3IERvY3VtZW50QWNjZXNzKFwiZW1haWxcIiwgdGhpcy5wcm9wcy5lbnYuY3VycmVudFVzZXIubWFpbCwgXCJSXCIpLnRvU3RyaW5nKCksXHJcbiAgICAgIF07XHJcblxyXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9wcy5lbnYua3NUZXJtUGxhbm5lclJlcG8udXBzZXJ0KHR1dG9yTm90ZSwgXHJcbiAgICAgICAgKG5vdGUgOiBUZXJtUGxhbm5lclR1dG9yTm90ZSkgPT4gbm90ZS5jb250ZW50ID0gbmV3VmFsdWUpO1xyXG4gICAgICB9IGNhdGNoIChzaG93RXJyb3Ipe31cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIERlbGV0ZSB0dXRvciBjb21tZW50IGJ5IElkXHJcbiAgICogQHBhcmFtIG5vdGVJZFxyXG4gICAqL1xyXG4gIGFzeW5jIGRlbGV0ZVR1dG9yTm90ZUZpZWxkKG5vdGVJZDogc3RyaW5nKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCB0aGlzLnByb3BzLmVudi5rc1Rlcm1QbGFubmVyUmVwby5kZWxldGUoW25vdGVJZF0pO1xyXG4gICAgfSBjYXRjaCAoc2hvd0Vycm9yKXt9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGQgYSBjb21tZW50IGZyb20gdHV0b3JcclxuICAgKiBAcGFyYW0gd2Vla051bWJlciBcclxuICAgKiBAcGFyYW0gY29tbWVudCBcclxuICAgKiBcclxuICAgKi9cclxuICBvblR1dG9yQ2xpY2sobm90ZTogVGVybVBsYW5uZXJUdXRvck5vdGUpIHtcclxuICAgIHRoaXMub3BlbkRpYWxvZyg8VHV0b3JEaWFsb2dcclxuICAgICAgd2Vla051bWJlcj17bm90ZS53ZWVrTnVtYmVyfVxyXG4gICAgICBjb21tZW50PXtub3RlLmNvbnRlbnR9XHJcbiAgICAgIGludGw9e3RoaXMuY29udGV4dC5pbnRsfVxyXG4gICAgICB1cGRhdGVEYXRhID0ge3ZhbCA9PiB0aGlzLnVwZGF0ZVR1dG9yTm90ZUZpZWxkKG5vdGUsIHZhbCl9XHJcbiAgICAgIGRlbGV0ZU5vdGVEYXRhID0geygpID0+IHRoaXMuZGVsZXRlVHV0b3JOb3RlRmllbGQobm90ZS5pZCl9XHJcbiAgICAgIGNsb3NlRGlhbG9nPXsoKT0+dGhpcy5jbG9zZURpYWxvZygpfSAvPik7XHJcbiAgfVxyXG5cclxuICBvcGVuRGlhbG9nKGRpYWxvZykge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRpYWxvZ3M6IFsuLi50aGlzLnN0YXRlLmRpYWxvZ3MsIGRpYWxvZ10gfSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZURpYWxvZygpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoeyBkaWFsb2dzOiB0aGlzLnN0YXRlLmRpYWxvZ3Muc2xpY2UoMCwgdGhpcy5zdGF0ZS5kaWFsb2dzLmxlbmd0aCAtIDEpIH0pO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIE5hdmlnYXRlIHRvIGFkamFjZW50IGZpZWxkIGRlcGVuZGluZyBvbiBkaXJlY3Rpb25cclxuICAgKiBAcGFyYW0gcG9zIGN1cnJlbnQgcG9zaXRpb24gaW4gZmllbGQtbWF0cml4XHJcbiAgICogQHBhcmFtIGRpcmVjdGlvbiBkaXJlY3Rpb24gdG8gdGFrZVxyXG4gICAqL1xyXG4gIG5hdmlnYXRlKHBvczoge3JvdzpudW1iZXIsIGNvbDpudW1iZXJ9LCBkaXJlY3Rpb246c3RyaW5nKSB7XHJcbiAgICBsZXQgbmV3cG9zID0gey4uLnBvc307XHJcbiAgICBsZXQgbWF4Um93cyA9IHRoaXMuZmllbGRzLmxlbmd0aDtcclxuICAgIGxldCBtYXhDb2xzID0gTWF0aC5tYXgoLi4uIHRoaXMuZmllbGRzLm1hcChyb3cgPT4gcm93Lmxlbmd0aCkpO1xyXG5cclxuICAgIHN3aXRjaChkaXJlY3Rpb24pIHtcclxuICAgICAgY2FzZSAndXAnOlxyXG4gICAgICAgIG5ld3Bvcy5yb3cgPSBNYXRoLm1heChwb3Mucm93IC0gMSwgMCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2Rvd24nOlxyXG4gICAgICAgIG5ld3Bvcy5yb3cgPSBNYXRoLm1pbihwb3Mucm93ICsgMSwgbWF4Um93cyk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2xlZnQnOlxyXG4gICAgICAgIG5ld3Bvcy5jb2wgPSBNYXRoLm1heChwb3MuY29sIC0gMSwgMClcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAncmlnaHQnOlxyXG4gICAgICAgIG5ld3Bvcy5jb2wgPSBNYXRoLm1pbihwb3MuY29sICsgMSwgbWF4Q29scylcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmZpZWxkc1tuZXdwb3Mucm93XSAmJiB0aGlzLmZpZWxkc1tuZXdwb3Mucm93XVtuZXdwb3MuY29sXSlcclxuICAgICAgdGhpcy5maWVsZHNbbmV3cG9zLnJvd11bbmV3cG9zLmNvbF0ubXlzZWxmLmN1cnJlbnQuZm9jdXMoKTtcclxuICB9XHJcblxyXG4gIFxyXG4gIC8qKlxyXG4gICAqIEFkZHMgZmllbGQgdG8gZmllbGQtbWF0cml4IHRvIGVuYWJsZSBuYXZpZ2F0aW9uIGluIHRoZWUgdGFibGVcclxuICAgKiBAcGFyYW0gZmllbGQgY3VycmVudCBmaWVsZFxyXG4gICAqIEBwYXJhbSBwb3MgcG9zaXRpb24gb2YgZmllbGQgaW4gZmllbGQtbWF0cml4XHJcbiAgICovXHJcbiAgYWRkRmllbGQoZmllbGQ6Q29udGVudEVkaXRhYmxlRmllbGQsIHBvczp7cm93Om51bWJlciwgY29sOm51bWJlcn0pIHtcclxuICAgIGlmICh0aGlzLmZpZWxkc1twb3Mucm93XSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHRoaXMuZmllbGRzW3Bvcy5yb3ddID0gW107XHJcbiAgICB9XHJcbiAgICB0aGlzLmZpZWxkc1twb3Mucm93XVtwb3MuY29sXSA9IGZpZWxkO1xyXG4gIH1cclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgdGhlIGNlbGwgaW4gdGhlIHRlcm1wbGFubmVyIHRhYmxlXHJcbiAgICogQHBhcmFtIHJvd0luZGV4IGluZGV4IG9mIHJvdyBpbiB0YWJsZVxyXG4gICAqIEBwYXJhbSBjb2xJbmRleCBpbmRleCBvZiBjb2x1bW4gaW4gdGFibGVcclxuICAgKiBAcGFyYW0gc3ViamVjdE5hbWUgbmFtZSBmaWVsZFxyXG4gICAqIEBwYXJhbSBtb2RlbCAtLXVudXNlZD9cclxuICAgKiBAcGFyYW0gd2Vla1BsYW4gY3VycmVudCByb3cgZnJvbSB3ZWVrUGxhblxyXG4gICAqIEBwYXJhbSByZWFkT25seUNlbGxzIGlmIGNlbGxzIGFyZSByZWFkb25seVxyXG4gICAqL1xyXG4gIGdldFRhYmxlQ2VsbChyb3dJbmRleDogbnVtYmVyLCBjb2xJbmRleDogbnVtYmVyLCBzdWJqZWN0TmFtZTogc3RyaW5nLCBtb2RlbDogVmlld01vZGVsLCBcclxuICAgIHdlZWtQbGFuOiBUZXJtcGxhbm5lcldlZWtPclR1dG9yLCByZWFkT25seUNlbGxzOiBib29sZWFuLCBjb2xUeXBlOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHsgY29tcGxldGVkU3RlcHMgfSA9IG1vZGVsO1xyXG4gICAgY29uc3QgcG9zID0ge3Jvdzogcm93SW5kZXgsIGNvbDogY29sSW5kZXh9O1xyXG4gICAgXHJcbiAgICBpZiAoY29sVHlwZSA9PT0gJ1R1dG9yJykge1xyXG4gICAgICB2YXIgdHV0b3JlZFdlZWtQbGFuID0gd2Vla1BsYW4gYXMgVGVybVBsYW5uZXJUdXRvck5vdGU7XHJcbiAgICAgIGNvbnN0IHtjb250ZW50fSA9IHR1dG9yZWRXZWVrUGxhbjtcclxuICAgICAgaWYgKHRoaXMucHJvcHMudHV0b3JlZCkge1xyXG4gICAgICAgIHJldHVybiA8dGQga2V5PXtcInR1dG9ybm90ZVwiICsgY29sSW5kZXh9IG9uQ2xpY2s9eygpID0+IHRoaXMub25UdXRvckNsaWNrKHR1dG9yZWRXZWVrUGxhbil9IGNsYXNzTmFtZT1cInR1dG9yQ2VsbFwiPlxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBjb250ZW50ID8gPGRpdiBrZXk9e2NvbEluZGV4fSBkYXRhLXRvb2x0aXA9e2NvbnRlbnR9PjxpIGtleT17Y29sSW5kZXh9IGNsYXNzTmFtZT1cImZhcyBmYS1jb21tZW50LWRvdHNcIj48L2k+PC9kaXY+IDogXHJcbiAgICAgICAgICAgIDxkaXYga2V5PXtjb2xJbmRleH0+PGkga2V5PXtjb2xJbmRleH0gY2xhc3NOYW1lPVwiZmFzIGZhLWNvbW1lbnQtbWVkaWNhbFwiPjwvaT48L2Rpdj5cclxuICAgICAgICAgIH1cclxuICAgICAgICA8L3RkPlxyXG4gICAgICB9XHJcblxyXG4gICAgcmV0dXJuIDx0ZCBrZXk9e1widHV0b3Jub3RlXCIgKyBjb2xJbmRleH0gY2xhc3NOYW1lPVwidHV0b3JDZWxsXCI+e2NvbnRlbnQgJiYgPGRpdiBrZXk9e2NvbEluZGV4fSBkYXRhLXRvb2x0aXA9e2NvbnRlbnR9PjxpIGtleT17Y29sSW5kZXh9IGNsYXNzTmFtZT1cImZhciBmYS1jb21tZW50LWRvdHNcIj48L2k+PC9kaXY+fTwvdGQ+XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgIHZhciBjdXJyZW50V2Vla1BsYW4gPSB3ZWVrUGxhbiBhcyBLU1Rlcm1QbGFubmVyV2Vla1BsYW47XHJcbiAgICBjb25zdCB7Y2VsbFZhbHVlc30gPSBjdXJyZW50V2Vla1BsYW47XHJcbiAgICAvLyBhbiBvdXRlciB0ZCBjZWxsIGFuZCBpbm5lciBkaXYgaXMgdXNlZCB0byByZWd1bGF0ZSB0aGUgaGVpZ2h0IGFuZCBhbGxvdyBmb3IgZWxsaXBzZXMgb24gdGV4dC1vdmVyZmxvd1xyXG4gICAgcmV0dXJuIDx0ZCBjbGFzc05hbWU9e3RoaXMuZ2V0Q2VsbENsYXNzTmFtZShjb21wbGV0ZWRTdGVwcywgY2VsbFZhbHVlcywgc3ViamVjdE5hbWUpfT5cclxuICAgICAgPENvbnRlbnRFZGl0YWJsZUZpZWxkXHJcbiAgICAgICAga2V5PXtjb2xJbmRleH1cclxuICAgICAgICByZWY9e2ZpZWxkID0+IHRoaXMuYWRkRmllbGQoZmllbGQsIHBvcyl9XHJcbiAgICAgICAgdGV4dD17Y2VsbFZhbHVlc1tzdWJqZWN0TmFtZV19XHJcbiAgICAgICAgdGFnPSdkaXYnXHJcbiAgICAgICAgdmFsaWRhdGVWYWx1ZT17Y29sVHlwZSA9PSAnU3RlcCcgPyAvXlxcZCokLyA6IHVuZGVmaW5lZH1cclxuICAgICAgICBtYXhDaGFycz17Y29sVHlwZSA9PSAnQ29tbWVudCc/IDEwMDogKGNvbFR5cGUgPT0gJ0NvdXJzZScgPyAzMCA6IDMpfVxyXG4gICAgICAgIG9uQ2hhbmdlPXt0aGlzLnVwZGF0ZUNlbGwuYmluZCh0aGlzLCB3ZWVrUGxhbiwgc3ViamVjdE5hbWUpfVxyXG4gICAgICAgIHJlYWRPbmx5PXtyZWFkT25seUNlbGxzIHx8IGNvbFR5cGUgPT0gJ1R1dG9yJ31cclxuICAgICAgICBhbGxvd05hdmlnYXRpb249e3RydWV9XHJcbiAgICAgICAgb25OYXZpZ2F0ZT17dGhpcy5uYXZpZ2F0ZS5iaW5kKHRoaXMsIHBvcyl9XHJcbiAgICAgIC8+XHJcbiAgICA8L3RkPlxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGNsYXNzbmFtZSBmb3IgY2VsbFxyXG4gICAqIEBwYXJhbSBjb21wbGV0ZWRTdGVwcyBcclxuICAgKiBAcGFyYW0gY2VsbFZhbHVlcyBcclxuICAgKiBAcGFyYW0gc3ViamVjdE5hbWUgXHJcbiAgICovXHJcbiAgZ2V0Q2VsbENsYXNzTmFtZShjb21wbGV0ZWRTdGVwcywgY2VsbFZhbHVlcywgc3ViamVjdE5hbWUpe1xyXG4gICAgY29uc3QgY29sVHlwZSA9IHRoaXMuZ2V0Q29sdW1uVHlwZShzdWJqZWN0TmFtZSk7XHJcbiAgICBpZiAoY29sVHlwZSA9PSAnU3RlcCcgJiYgY29tcGxldGVkU3RlcHNbc3ViamVjdE5hbWUgKyBjZWxsVmFsdWVzW3N1YmplY3ROYW1lXV0pIHtcclxuICAgICAgcmV0dXJuICdzdGVwQ2VsbCBjb21wbGV0ZWRTdGVwJztcclxuICAgIH1cclxuICAgIHJldHVybiBjb2xUeXBlLnRvTG93ZXJDYXNlKCkgKyAnQ2VsbCc7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGVzIHRoZSBjZWxsIGluIHRoZSB0ZXJtcGxhbm5lciB0YWJsZXMgZm9vdGVyXHJcbiAgICogQHBhcmFtIHJvd0luZGV4IGluZGV4IG9mIHJvdyBpbiB0YWJsZVxyXG4gICAqIEBwYXJhbSBjb2xJbmRleCBpbmRleCBvZiBjb2x1bW4gaW4gdGFibGVcclxuICAgKiBAcGFyYW0gc3ViamVjdE5hbWUgbmFtZSBmaWVsZFxyXG4gICAqIEBwYXJhbSBtb2RlbFxyXG4gICAqIEBwYXJhbSByZWFkT25seUNlbGxzIGlmIGNlbGxzIGFyZSByZWFkb25seVxyXG4gICAqL1xyXG4gIGdldEZvb3RlckNlbGwocm93SW5kZXg6IG51bWJlciwgY29sSW5kZXg6IG51bWJlciwgc3ViamVjdE5hbWU6IHN0cmluZywgbW9kZWw6IFZpZXdNb2RlbCwgcmVhZE9ubHlDZWxsczogYm9vbGVhbil7XHJcbiAgICBjb25zdCBwb3MgPSB7cm93OiByb3dJbmRleCwgY29sOiBjb2xJbmRleH07XHJcbiAgICBjb25zdCBjb2xUeXBlID0gdGhpcy5nZXRDb2x1bW5UeXBlKHN1YmplY3ROYW1lKTtcclxuICAgIHJldHVybiA8dGggY2xhc3NOYW1lPXtgJHtjb2xUeXBlfUZvb3RlcmB9XHJcbiAgICA+PENvbnRlbnRFZGl0YWJsZUZpZWxkXHJcbiAgICAgIGtleT17XCJzdGVwRm9vdGVyQ2VsbFwiICsgY29sSW5kZXh9XHJcbiAgICAgIHJlZj17ZmllbGQgPT4gdGhpcy5hZGRGaWVsZChmaWVsZCwgcG9zKX1cclxuICAgICAgdGFnPSdkaXYnXHJcbiAgICAgIHRleHQ9e21vZGVsLmxhc3RTdGVwcy5jZWxsVmFsdWVzW3N1YmplY3ROYW1lXX1cclxuICAgICAgb25DaGFuZ2U9e3RoaXMudXBkYXRlQ2VsbC5iaW5kKHRoaXMsIG1vZGVsLmxhc3RTdGVwcywgc3ViamVjdE5hbWUpfVxyXG4gICAgICByZWFkT25seT17cmVhZE9ubHlDZWxsc31cclxuICAgICAgbWF4Q2hhcnM9ezEwfVxyXG4gICAgICBhbGxvd05hdmlnYXRpb249e3RydWV9XHJcbiAgICAgIG9uTmF2aWdhdGU9e3RoaXMubmF2aWdhdGUuYmluZCh0aGlzLCBwb3MpfVxyXG4gICAgLz48L3RoPlxyXG4gIH1cclxuXHJcbiAgZ2V0U3RlcEhlYWRlckNvbHVtbihpbmRleDogbnVtYmVyLCB0cmFuc2xhdGVkQ29sdW1uSGVhZGVyOiBzdHJpbmcsIGNvbFR5cGU6IHN0cmluZyl7XHJcbiAgICByZXR1cm4gPHRoIGtleT17YHN0ZXBIZWFkZXJDZWxsXyR7aW5kZXh9YH0gY2xhc3NOYW1lPXtgJHtjb2xUeXBlLnRvTG93ZXJDYXNlKCl9SGVhZGVyYH0+e2NvbFR5cGUgIT0gJ1R1dG9yJyA/IHRyYW5zbGF0ZWRDb2x1bW5IZWFkZXI6ICcnfTwvdGg+XHJcbiAgfVxyXG5cclxuICBnZXRDb2x1bW5UeXBlKG5hbWUpIHtcclxuICAgIGNvbnN0IGNvbFR5cGVzID0geydLb21tZW50YXInOiAnQ29tbWVudCcsICdLdXJzJzogJ0NvdXJzZScsICdUdXRvckNvbW1lbnQnOiAnVHV0b3InIH07XHJcbiAgICByZXR1cm4gY29sVHlwZXMuaGFzT3duUHJvcGVydHkobmFtZSk/IGNvbFR5cGVzW25hbWVdIDogJ1N0ZXAnO1xyXG4gIH1cclxuXHJcbiAgb3BlbkNsb3NlUHJvZ3Jlc3NDaGFydHModmFsdWUpeyAgIFxyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ1Rlcm1wbGFubmVyQm94Q2hhcnRzJywgdmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0U3RlcENoYXJ0cyhjb2x1bW5zOiB7IG5hbWU6IHN0cmluZywgdHJhbnNsYXRlZE5hbWU/OiBzdHJpbmcsIGlzRml4ZWQ/OiBib29sZWFuIH1bXSwgc3ViamVjdFByb2dyZXNzOiB7W2NvbHVtbkhlYWRlcjogc3RyaW5nXToge2ZpbmFsU3RlcENvbXBsZXRlZDogYm9vbGVhbiwgdmFsdWU6IG51bWJlcn19KSB7XHJcbiAgICB2YXIgY2hhcnRzQm94U3RhdGUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdUZXJtcGxhbm5lckJveENoYXJ0cycpKSBhcyBib29sZWFuO1xyXG4gICAgcmV0dXJuIDxPcGVuQ2xvc2VCb3ggaGVhZGVyT3Blbj17Y2hhcnRzQm94U3RhdGV9IG9uT3BlbkNsb3NlPXt0aGlzLm9wZW5DbG9zZVByb2dyZXNzQ2hhcnRzfSB0aXRsZT17dGhpcy5jb250ZXh0LmludGwuZm9ybWF0TWVzc2FnZSh7aWQ6XCJ0ZXJtcGxhbm5lci5jaGFydHNCb3hUaXRsZVwiLCBkZWZhdWx0TWVzc2FnZTpcIkZyYW1zdGVnIGRpYWdyYW1cIn0pfT48ZGl2IGNsYXNzTmFtZT1cImNoYXJ0cy1jb250YWluZXJcIj5cclxuICAgICAge1xyXG4gICAgICAgIGNvbHVtbnMubWFwKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgaWYgKCFlbGVtZW50LmlzRml4ZWQpIHtcclxuICAgICAgICAgICAgY29uc3QgcGVyY2VudGFnZSA9IHN1YmplY3RQcm9ncmVzc1tlbGVtZW50Lm5hbWVdID8gc3ViamVjdFByb2dyZXNzW2VsZW1lbnQubmFtZV0udmFsdWUgOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBzdWJqZWN0UHJvZ3Jlc3NbZWxlbWVudC5uYW1lXS5maW5hbFN0ZXBDb21wbGV0ZWQgPyBudWxsIDogXHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5pbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiBcInRlcm1wbGFubmVyLm5vRmluYWxTdGVwQXZhaWxhYmxlXCIsIGRlZmF1bHRNZXNzYWdlOlwiSW5nZXQgc2x1dHN0ZWcgdGlsbGfDpG5nbGlndFwifSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdHJhbnNsYXRlZENvbHVtbnMgPSBnZXRTY2hvb2xUcmFuc2xhdGVkU3ViamVjdEZ1bGxuYW1lKHRoaXMuY29udGV4dC5pbnRsKTtcclxuICAgICAgICAgICAgcmV0dXJuIDxkaXYga2V5PXtlbGVtZW50Lm5hbWV9IGNsYXNzTmFtZT1cImNoYXJ0LWJveFwiPlxyXG4gICAgICAgICAgICAgIDxoND57dHJhbnNsYXRlZENvbHVtbnNbZWxlbWVudC5uYW1lXX08L2g0PlxyXG4gICAgICAgICAgICAgIDxkaXYga2V5PXtlbGVtZW50Lm5hbWV9IGNsYXNzTmFtZT1cImlubmVyLWNoYXJ0LWJveFwiPlxyXG4gICAgICAgICAgICAgICAgPERvdWdobnV0IGtleT17ZWxlbWVudC5uYW1lfSBwZXJjZW50YWdlPXtwZXJjZW50YWdlfSBlcnJvck1lc3NhZ2U9e2Vycm9yTWVzc2FnZX0gLz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgPC9kaXY+XHJcbiAgICA8L09wZW5DbG9zZUJveD5cclxufVxyXG5cclxuICBnZXRXZWVrVHV0b3JOb3RlKHdlZWtQbGFuc09yVHV0b3JOb3RlOiBUZXJtcGxhbm5lcldlZWtPclR1dG9yW10sIHdlZWtOdW1iZXI6IG51bWJlcil7XHJcbiAgICByZXR1cm4gd2Vla1BsYW5zT3JUdXRvck5vdGUuZmluZCgoeDogVGVybVBsYW5uZXJUdXRvck5vdGUpID0+IHgudHlwZSA9PT0gXCJ0dXRvci1ub3RlXCIgJiYgeC53ZWVrTnVtYmVyID09PSB3ZWVrTnVtYmVyKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHtpbnRsfSA9IHRoaXMuY29udGV4dDtcclxuICAgIGNvbnN0IHNob3dUdXRvckNvbW1lbnRGaWVsZCA9IGZlYXR1cmVzLmtzVHV0b3JDb21tZW50O1xyXG4gICAgY29uc3Qgc2hvd0RvdWdobnV0Q2hhcnRzID0gZmVhdHVyZXMudGVybXBsYW5uZXJDaGFydHM7XHJcbiAgICBjb25zdCBtb2RlbCA9IG5ldyBWaWV3TW9kZWwoXHJcbiAgICAgIHRoaXMuc3RhdGUud2Vla1BsYW5zLFxyXG4gICAgICB0aGlzLnN0YXRlLmFjdGl2ZUNvdXJzZXMsXHJcbiAgICAgIHRoaXMuc3RhdGUuc2Nob29sVGVybSxcclxuICAgICAgY2ZnLktFRF9TQ0hPT0xfTE9DQUxFLFxyXG4gICAgICBpbnRsLFxyXG4gICAgICBzaG93VHV0b3JDb21tZW50RmllbGQpO1xyXG5cclxuICAgIGNvbnN0IHt0ZXJtR29hbHMsIGNvbHVtbnN9ID0gbW9kZWw7XHJcbiAgICBjb25zdCB7dHV0b3JlZH0gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3Qge2xvYWRpbmdXZWVrUGxhbnMsIGVycm9yLCB3ZWVrUGxhbnM6IGRiV2Vla1BsYW5zLCBkaWFsb2dzfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCBmYWlsZWRJbml0aWFsTG9hZCA9IGRiV2Vla1BsYW5zLmxlbmd0aCA9PT0gMCAmJiAhIWVycm9yO1xyXG4gICAgY29uc3QgcmVhZE9ubHlDZWxscyA9IGZhaWxlZEluaXRpYWxMb2FkIHx8IHR1dG9yZWQgfHwgbG9hZGluZ1dlZWtQbGFucztcclxuICAgIGxldCByb3dPZmZzZXQgPSAwO1xyXG4gICAgdmFyIGZpbHRlcmVkV2Vla3BsYW5zID0gIG1vZGVsLndlZWtQbGFuc09yVHV0b3JOb3RlLmZpbHRlcigoeDogS1NUZXJtUGxhbm5lcldlZWtQbGFuKT0+ICF4LnR5cGUpIGFzIEtTVGVybVBsYW5uZXJXZWVrUGxhbltdO1xyXG5cclxuICAgIHJldHVybiB0aGlzLnN0YXRlLmluaXRpYWxMb2FkID8gPHA+PFNwaW5uZXIvPjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwidGVybXBsYW5uZXIubG9hZGluZ1Rlcm1wbGFubmVyXCIgZGVmYXVsdE1lc3NhZ2U9XCJWLmcuIHbDpG50YSBtZWRhbiB0ZXJtaW5zcGxhbmVyIGxhZGRhcy4uLlwiLz48L3A+IDpcclxuICAgICA8ZGl2IGNsYXNzTmFtZT17XHJcbiAgICAgICAgXCJ0ZXJtcGxhbm5lclwiICsgXHJcbiAgICAgICAgKHRoaXMuc3RhdGUubG9hZGluZ1dlZWtQbGFucyA/IFwiIGxvYWRpbmctd2Vla3BsYW5zXCIgOiBcIlwiKSArXHJcbiAgICAgICAgKHRoaXMuc3RhdGUubG9hZGluZ0FjdGl2ZUNvdXJzZXMgPyBcIiBsb2FkaW5nLWNvdXJzZXNcIiA6IFwiXCIpXHJcbiAgICAgIH0+XHJcbiAgICAgIHtzaG93RG91Z2hudXRDaGFydHMgJiYgdGhpcy5zdGF0ZS5hY3RpdmVDb3Vyc2VzLmxlbmd0aCA+IDAgICYmIHRoaXMuZ2V0U3RlcENoYXJ0cyhjb2x1bW5zLCBtb2RlbC5zdWJqZWN0UHJvZ3Jlc3MpfVxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImtlZF9ib3hlZFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwid2Vla1NlbGVjdFwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbVwiPlxyXG4gICAgICAgICAgICA8cD57dGhpcy5zdGF0ZS5zY2hvb2xUZXJtLnRvTG9jYWxlU3RyaW5nKGludGwsIHRydWUpfTwvcD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbVwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ0bi1ncm91cFwiPlxyXG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuXCIgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRlcm0gPSB0aGlzLnN0YXRlLnNjaG9vbFRlcm0ucHJldlRlcm0oKTtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkKHRlcm0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9PlxyXG4gICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtYW5nbGUtbGVmdFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cclxuICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ0blwiIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciB0ZXJtID0gdGhpcy5zdGF0ZS5zY2hvb2xUZXJtLm5leHRUZXJtKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWQodGVybSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0+XHJcbiAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1hbmdsZS1yaWdodFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cclxuICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cInRlcm1wbGFubmVyLnRlcm1QbGFubmluZ1wiIGRlZmF1bHRNZXNzYWdlPVwiVGVybWluc3BsYW5lcmluZ1wiIHRhZ05hbWU9XCJoNFwiLz5cclxuICAgICAgICA8aHIgLz5cclxuICAgICAgICA8dGFibGUgY2xhc3NOYW1lPVwidGVybXBsYW5uZXItdGFibGUgemVicmFcIj5cclxuICAgICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgPHRoIGNsYXNzTmFtZT1cIndlZWtDb2x1bW5cIj5cclxuICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ0ZXJtcGxhbm5lci53ZWVrTnVtYmVyXCIgZGVmYXVsdE1lc3NhZ2U9XCJWZWNrYVwiIC8+XHJcbiAgICAgICAgICAgICAgICA8L3RoPlxyXG4gICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbHVtbnMubWFwKCAoZWxlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgY29sVHlwZSA9IHRoaXMuZ2V0Q29sdW1uVHlwZShlbGVtLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTdGVwSGVhZGVyQ29sdW1uKGluZGV4LCBlbGVtLnRyYW5zbGF0ZWROYW1lLCBjb2xUeXBlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgPC90aGVhZD5cclxuICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAge2ZpbHRlcmVkV2Vla3BsYW5zLmZpbHRlcih3ayA9PiB3ay5jZWxsVmFsdWVzKS5tYXAoKHdlZWtQbGFuLCByb3dJbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgIHJvd09mZnNldCA9IHJvd0luZGV4O1xyXG4gICAgICAgICAgICAgIGNvbnN0IHt3ZWVrTnVtYmVyLCBhY2FkZW1pY1dlZWtOdW1iZXJ9ID0gd2Vla1BsYW47XHJcbiAgICAgICAgICAgICAgY29uc3Qgd2VlayA9IHdlZWtOdW1iZXI7XHJcbiAgICAgICAgICAgICAgY29uc3QgaXNDdXJyZW50V2VlayA9IHRoaXMuc3RhdGUuc2Nob29sVGVybS5pc0N1cnJlbnRXZWVrKHdlZWtQbGFuLmRhdGVUaW1lKTtcclxuICAgICAgICAgICAgICByZXR1cm4gPHRyIGtleT17bW9kZWwueWVhciArICc6JyArIHdlZWt9IGNsYXNzTmFtZT17aXNDdXJyZW50V2VlayA/IFwiY3VycmVudFdlZWtcIiA6IFwiXCJ9PlxyXG4gICAgICAgICAgICAgIDx0ZD57aW50bC5sb2NhbGUgPT09IFwic3ZcIiA/IHdlZWsgOiBhY2FkZW1pY1dlZWtOdW1iZXJ9PC90ZD5cclxuICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb2x1bW5zLm1hcCgoZWxlbSwgY29sSW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgY29sVHlwZSA9IHRoaXMuZ2V0Q29sdW1uVHlwZShlbGVtLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICB2YXIgdHV0b3JWYWx1ZSA9IHRoaXMuZ2V0V2Vla1R1dG9yTm90ZShtb2RlbC53ZWVrUGxhbnNPclR1dG9yTm90ZSwgd2Vla051bWJlcik7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBjb2xUeXBlID09PSBcIlR1dG9yXCIgPyBcclxuICAgICAgICAgICAgICAgICAgdHV0b3JWYWx1ZSAmJiBzaG93VHV0b3JDb21tZW50RmllbGQgJiYgdGhpcy5nZXRUYWJsZUNlbGwocm93SW5kZXgsIGNvbEluZGV4LCBlbGVtLm5hbWUsIG1vZGVsLCB0dXRvclZhbHVlLCByZWFkT25seUNlbGxzLCBjb2xUeXBlKSA6ICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgdGhpcy5nZXRUYWJsZUNlbGwocm93SW5kZXgsIGNvbEluZGV4LCBlbGVtLm5hbWUsIG1vZGVsLCB3ZWVrUGxhbiwgcmVhZE9ubHlDZWxscywgY29sVHlwZSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICA8L3RyPiBcclxuICAgICAgICAgICAgfSl9XHJcblxyXG4gICAgICAgICAgPC90Ym9keT5cclxuICAgICAgICAgIDx0Zm9vdD5cclxuICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgIDx0aD48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cInRlcm1wbGFubmVyLmZpbmFsU3RlcFwiIGRlZmF1bHRNZXNzYWdlPVwiU2x1dHN0ZWdcIi8+PC90aD5cclxuICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb2x1bW5zLmZpbHRlcihjID0+ICFjLmlzRml4ZWQpLm1hcCgoZWxlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rm9vdGVyQ2VsbChyb3dPZmZzZXQgKyAxLCBpbmRleCwgZWxlbS5uYW1lLCBtb2RlbCwgcmVhZE9ubHlDZWxscyk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICA8dGg+LTwvdGg+XHJcbiAgICAgICAgICAgICAgPHRoPjwvdGg+XHJcbiAgICAgICAgICAgICAge3Nob3dUdXRvckNvbW1lbnRGaWVsZCAmJiA8dGg+PC90aD59ICAgICAgICAgIFxyXG4gICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgPHRoPjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwidGVybXBsYW5uZXIuZWRzR29hbEdyYWRlc1wiIGRlZmF1bHRNZXNzYWdlPVwiVGVybWluc23DpWxcIi8+PC90aD5cclxuICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb2x1bW5zLmZpbHRlcihjID0+ICFjLmlzRml4ZWQpLm1hcCgoZWxlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgY29sVHlwZSA9IHRoaXMuZ2V0Q29sdW1uVHlwZShlbGVtLm5hbWUpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiA8dGgga2V5PXtgZ3JhZGVzXyR7aW5kZXh9YH0gY2xhc3NOYW1lPXtgJHtjb2xUeXBlfUZvb3RlcmB9Pnt0ZXJtR29hbHNbZWxlbS5uYW1lXX08L3RoPjtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIDx0aD4tPC90aD5cclxuICAgICAgICAgICAgICA8dGg+e3RoaXMuc3RhdGUuZXJyb3IgJiYgPHAgY2xhc3NOYW1lPVwiZXJyb3JcIj57JycrdGhpcy5zdGF0ZS5lcnJvcn08L3A+fTwvdGg+XHJcbiAgICAgICAgICAgICAge3Nob3dUdXRvckNvbW1lbnRGaWVsZCAmJiA8dGg+PC90aD59ICAgICBcclxuICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgIDwvdGZvb3Q+XHJcbiAgICAgICAgICA8L3RhYmxlPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPERpYWxvZ3NcclxuICAgICAgICBkaWFsb2dzPXtkaWFsb2dzfVxyXG4gICAgICAgIHBvcERpYWxvZz17KCkgPT4gdGhpcy5zZXRTdGF0ZSh7IGRpYWxvZ3M6IGRpYWxvZ3Muc2xpY2UoMCwgZGlhbG9ncy5sZW5ndGggLSAxKSB9KX0gLz4gICAgXHJcbiAgICA8L2Rpdj5cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBGb3JtYXR0ZWRNZXNzYWdlLCBJbmplY3RlZEludGwgfSBmcm9tICdyZWFjdC1pbnRsJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgd2Vla051bWJlcjogbnVtYmVyO1xyXG4gIGNvbW1lbnQ6IHN0cmluZztcclxuICBjbG9zZURpYWxvZzogKCk9PiB2b2lkO1xyXG4gIHVwZGF0ZURhdGE6ICh2YWx1ZTogc3RyaW5nKT0+IHZvaWQ7XHJcbiAgZGVsZXRlTm90ZURhdGE6ICgpID0+IHZvaWQ7XHJcbiAgaW50bD86IEluamVjdGVkSW50bFxyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIGNvbW1lbnQ6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFR1dG9yRGlhbG9nIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xyXG4gIFxyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgY29tbWVudDogcHJvcHMuY29tbWVudCA/IHByb3BzLmNvbW1lbnQgOiAnJ1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGVsZXRlKCkge1xyXG4gICAgY29uc3QgeyBjbG9zZURpYWxvZ30gPSB0aGlzLnByb3BzO1xyXG4gICAgY2xvc2VEaWFsb2coKTtcclxuICAgIHRoaXMucHJvcHMuZGVsZXRlTm90ZURhdGEoKTtcclxuICB9XHJcblxyXG5cclxuICBhc3luYyBzYXZlKCkge1xyXG4gICAgY29uc3QgeyBjbG9zZURpYWxvZ30gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3QgeyBjb21tZW50IH0gPSB0aGlzLnN0YXRlOyAgXHJcbiAgICBjbG9zZURpYWxvZygpO1xyXG4gICAgdGhpcy5wcm9wcy51cGRhdGVEYXRhKGNvbW1lbnQpO1xyXG5cclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHsgd2Vla051bWJlciwgaW50bH0gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3QgeyBjb21tZW50IH0gPSB0aGlzLnN0YXRlO1xyXG5cclxuICAgIHJldHVybiA8ZGl2PlxyXG4gICAgICA8ZGl2PlxyXG4gICAgICAgIDxoMj57aW50bD8gaW50bC5mb3JtYXRNZXNzYWdlKHtpZDpcInR1dG9yTm90ZURpYWxvZy53ZWVrQ29tbWVudFwiLCBkZWZhdWx0TWVzc2FnZTpcIktvbW1lbnRhciBmw7ZyIHZlY2thIHt3ZWVrTnVtYmVyfVwifSwge3dlZWtOdW1iZXJ9KTogYEtvbW1lbnRhciBmw7ZyIHZlY2thICR7d2Vla051bWJlcn1gfTwvaDI+XHJcbiAgICAgICAgPGhyIC8+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi10YWJsZVwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmdWxsV2lkdGhcIj5cclxuICAgICAgICAgICAgPHRleHRhcmVhIGF1dG9Gb2N1cyB2YWx1ZT17Y29tbWVudH0gb25DaGFuZ2U9e2V2ID0+IHRoaXMuc2V0U3RhdGUoe2NvbW1lbnQ6IGV2LnRhcmdldC52YWx1ZX0pfSAvPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgIDw+XHJcbiAgICAgICAgICAgIDxidXR0b24gdGFiSW5kZXg9ezF9IGNsYXNzTmFtZT1cImJ0biBidG4tbGFyZ2UgYnRuLWRlZmF1bHRcIiBvbkNsaWNrPXsoKT0+dGhpcy5zYXZlKCl9PntpbnRsID8gaW50bC5mb3JtYXRNZXNzYWdlKHtpZDpcImNvbW1vbi5zYXZlXCIsIGRlZmF1bHRNZXNzYWdlOlwiU3BhcmFcIn0pIDogJ1NwYXJhJ30gPC9idXR0b24+XHJcbiAgICAgICAgICAgIHtjb21tZW50ICYmIDxhIHRhYkluZGV4PXsxfSBjbGFzc05hbWU9XCJidG4gYnRuLXdhcm5pbmcgYnRuLWxhcmdlIHB1bGwtcmlnaHRcIiBvbkNsaWNrPXsoKT0+dGhpcy5kZWxldGUoKX0+e2ludGwgPyBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOlwiY29tbW9uLnJlbW92ZVwiLCBkZWZhdWx0TWVzc2FnZTpcIlRhIGJvcnRcIn0pOiBcIlRhIGJvcnRcIiB9PC9hPn1cclxuICAgICAgICAgIDwvPlxyXG4gICAgICAgIH1cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgS1NUZXJtUGxhbm5lcldlZWtQbGFuLCBUZXJtUGxhbm5lclR1dG9yTm90ZSwgVGVybXBsYW5uZXJXZWVrT3JUdXRvciB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgRURTQ291cnNlIH0gZnJvbSAnLi4vLi4vY29udHJhY3RzL2Vkcyc7XHJcbmltcG9ydCB7XHJcbiAgZ2V0Q29sdW1uc0hlYWRlcixcclxuICBnZXRDb2x1bW5IZWFkZXJGcm9tQ291cnNlLFxyXG59IGZyb20gJy4vdGVybXBsYW5uZXItdXRpbHMnO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IGNyZWF0ZVVVSUQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IEtFRFdlZWsgfSBmcm9tICcuLi8uLi91dGlscy93ZWVrdXRpbCc7XHJcbmltcG9ydCB7SW5qZWN0ZWRJbnRsfSBmcm9tICdyZWFjdC1pbnRsJztcclxuaW1wb3J0IHsgR2VuZXJpY1NjaG9vbFRlcm0gfSBmcm9tICcuLi8uLi91dGlscy9nZW5lcmljLXNjaG9vbC10ZXJtJztcclxuaW1wb3J0IHsgZ2V0U2Nob29sVHJhbnNsYXRlZFN1YmplY3RzIH0gZnJvbSAnLi4vLi4vdXRpbHMvZ2VuZXJpYy1zY2hvb2wtdXRpbHMnO1xyXG5cclxuaW50ZXJmYWNlIENvbHVtbiB7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIHRyYW5zbGF0ZWROYW1lPzogc3RyaW5nO1xyXG4gIGlzRml4ZWQ/OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVmlld01vZGVsIHtcclxuICB3ZWVrUGxhbnNPclR1dG9yTm90ZTogVGVybXBsYW5uZXJXZWVrT3JUdXRvcltdO1xyXG4gIC8vd2Vla1R1dG9yTm90ZXM6IFRlcm1QbGFubmVyVHV0b3JOb3RlW107XHJcbiAgbGFzdFN0ZXBzOiBLU1Rlcm1QbGFubmVyV2Vla1BsYW47XHJcbiAgY29tcGxldGVkU3RlcHM6IHsgW2NvbHVtbkhlYWRlckFuZHN0ZXA6IHN0cmluZ106IHRydWUgfTtcclxuICB0ZXJtR29hbHM6IHsgW2NvbHVtbkhlYWRlcjogc3RyaW5nXTogc3RyaW5nIH07XHJcbiAgeWVhcjogbnVtYmVyO1xyXG4gIHN1YmplY3RQcm9ncmVzczoge1tjb2x1bW5IZWFkZXI6IHN0cmluZ106IHtmaW5hbFN0ZXBDb21wbGV0ZWQ6IGJvb2xlYW4sIHZhbHVlOiBudW1iZXJ9fSA9IHt9O1xyXG4gIGNvbHVtbnM6IENvbHVtbltdID0gW107XHJcblxyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgZGJXZWVrUGxhbnM6IFRlcm1wbGFubmVyV2Vla09yVHV0b3JbXSxcclxuICAgIC8vZGJUdXRvck5vdGVzOiBUZXJtUGxhbm5lclR1dG9yTm90ZVtdLFxyXG4gICAgY291cnNlczogRURTQ291cnNlW10sXHJcbiAgICBjdXJyZW50U2Nob29sVGVybTogR2VuZXJpY1NjaG9vbFRlcm0sXHJcbiAgICBjdXJyZW50U2Nob29sTG9jYWxlOiBzdHJpbmcsXHJcbiAgICBpbnRsOiBJbmplY3RlZEludGwsXHJcbiAgICBzaG93VHV0b3JDb21tZW50RmllbGQ6IGJvb2xlYW5cclxuICApIHtcclxuICAgIHRoaXMud2Vla1BsYW5zT3JUdXRvck5vdGUgPSBbXTtcclxuICAgIGlmIChjdXJyZW50U2Nob29sVGVybS5zY2hvb2xNb21lbnQpIHtcclxuICAgICAgY29uc3QgW3Rlcm1TdGFydCwgdGVybUVuZF0gPSBjdXJyZW50U2Nob29sVGVybS5nZXRUZXJtU3RhcnRBbmRFbmQoKTtcclxuICAgICAgdGhpcy55ZWFyID0gdGVybVN0YXJ0LnllYXIoKTtcclxuICAgICAgLy9pbml0IGNvbHVtbnNcclxuICAgICAgdmFyIGNvbHVtbkhlYWRlcnMgPSBnZXRDb2x1bW5zSGVhZGVyKGN1cnJlbnRTY2hvb2xMb2NhbGUpO1xyXG4gICAgICBjb2x1bW5IZWFkZXJzLmZvckVhY2goYyA9PiB0aGlzLmNvbHVtbnMucHVzaCh7IG5hbWU6IGMgfSkpO1xyXG4gICAgICAvL2RlZmluZSBmaXhlZCBjb2x1bW5zIC0gd2Uga2VlcCB0aGVzZSBzZXBhcmF0ZWQsIGluIGNhc2UgdGhhdCB0aGUgb3RoZXIgY29sdW1ucyB3aWxsIGJlIGR5bmFtaWNhbGx5IHJldHJpZXZlZFxyXG4gICAgICBjb25zdCBmaXhlZENvbHVtbnMgPSBbeyBuYW1lOiBcIkt1cnNcIiwgaXNGaXhlZDogdHJ1ZSB9LCB7IG5hbWU6IFwiS29tbWVudGFyXCIsIGlzRml4ZWQ6IHRydWUgfV07XHJcbiAgICAgIGlmKHNob3dUdXRvckNvbW1lbnRGaWVsZCl7XHJcbiAgICAgICAgZml4ZWRDb2x1bW5zLnB1c2goIHsgbmFtZTogXCJUdXRvckNvbW1lbnRcIiwgaXNGaXhlZDogdHJ1ZX0pO1xyXG4gICAgICB9XHJcbiAgICAgIC8vQWRkIGZpeGVkIGNvbHVtbnMgbmFtZXNcclxuICAgICAgdGhpcy5jb2x1bW5zLnB1c2goLi4uZml4ZWRDb2x1bW5zKTtcclxuICAgICAgLy9wb3B1bGF0ZSB0cmFuc2xhdGlvbnNcclxuICAgICAgdmFyIHRyYW5zbGF0ZWRDb2x1bW5zID0gZ2V0U2Nob29sVHJhbnNsYXRlZFN1YmplY3RzKGN1cnJlbnRTY2hvb2xMb2NhbGUsIGludGwpO1xyXG4gICAgICB0aGlzLmNvbHVtbnMuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICBlbGVtZW50LnRyYW5zbGF0ZWROYW1lID0gdHJhbnNsYXRlZENvbHVtbnNbZWxlbWVudC5uYW1lXTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB2YXIgY3VycmVudFRlcm1Ib2xpZGF5cyA9IGN1cnJlbnRTY2hvb2xUZXJtLnNjaG9vbE1vbWVudC5hY2FkZW1pY1llYXJTdHJ1Y3R1cmUuaG9saWRheXM7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRUZXJtID0gY3VycmVudFNjaG9vbFRlcm0uc2Nob29sTW9tZW50LnRlcm07XHJcbiAgICAgIC8vXHJcbiAgICAgIC8vIHdlZWtQbGFuc1xyXG4gICAgICAvL1xyXG4gICAgIGxldCB3ZWVrcGxhblZhbHVlczogS1NUZXJtUGxhbm5lcldlZWtQbGFuW10gPSBkYldlZWtQbGFucy5maWx0ZXIoKHg6IEtTVGVybVBsYW5uZXJXZWVrUGxhbikgPT4gIXgudHlwZSkgYXMgS1NUZXJtUGxhbm5lcldlZWtQbGFuW107XHJcbiAgICAgbGV0IHR1dG9yVmFsdWVzIDogVGVybVBsYW5uZXJUdXRvck5vdGVbXSA9IGRiV2Vla1BsYW5zLmZpbHRlcigodzogVGVybVBsYW5uZXJUdXRvck5vdGUpID0+IHcudHlwZSA9PT0gJ3R1dG9yLW5vdGUnKSBhcyBUZXJtUGxhbm5lclR1dG9yTm90ZVtdO1xyXG5cclxuICAgICAgdmFyIHN0YXJ0QWNhZGVtaWNZZWFyTnVtYmVyID0gY3VycmVudFNjaG9vbFRlcm0uc2Nob29sTW9tZW50LmFjYWRlbWljWWVhclN0cnVjdHVyZS5hY2FkZW1pY1N0YXJ0V2VlaztcclxuICAgICAgZm9yIChsZXQgd2Vla01vbWVudCA9IHRlcm1TdGFydC5jbG9uZSgpO1xyXG4gICAgICAgIHdlZWtNb21lbnQudmFsdWVPZigpIDwgdGVybUVuZC52YWx1ZU9mKCk7XHJcbiAgICAgICAgd2Vla01vbWVudCA9IHdlZWtNb21lbnQuY2xvbmUoKS5hZGQoMSwgJ3dlZWsnKS5zdGFydE9mKCd3ZWVrJykpIHtcclxuXHJcbiAgICAgICAgdmFyIGhvbGlkYXlQZXJpb2QgPSBjdXJyZW50VGVybUhvbGlkYXlzLmZpbHRlcihoPT4gd2Vla01vbWVudC53ZWVrKCkgPj0gbW9tZW50KGguc3RhcnREYXRlKS5zdGFydE9mKFwid2Vla1wiKS53ZWVrKCkgJiYgXHJcbiAgICAgICAgd2Vla01vbWVudC53ZWVrKCkgPD0gbW9tZW50KGguZW5kRGF0ZSkuZW5kT2YoJ3dlZWsnKS53ZWVrKCkpO1xyXG4gICAgICAgIC8vaWYgdGhlIGN1cnJlbnQgd2VlayBpcyBhIGhvbGlkYXkgd2Vlaywgc2tpcCBpdFxyXG4gICAgICAgIGlmKGhvbGlkYXlQZXJpb2QubGVuZ3RoID4gMCl7XHJcbiAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgd2Vla051bWJlciA9IHdlZWtNb21lbnQud2VlaygpO1xyXG4gICAgICAgIGNvbnN0IGtlZFdlZWsgPSBLRURXZWVrKHdlZWtNb21lbnQueWVhcigpLCB3ZWVrTnVtYmVyKTtcclxuICAgICAgICAvL0EgdGVybSBjYW4gZW5kIGFuZCBzdGFydCBvbiB0aGUgc2FtZSB3ZWVrIGZvciBJbmRpYVxyXG4gICAgICAgIC8vaW4gdGhpcyBjYXNlIHdlIHNob3VsZCBmaWx0ZXIgdGhlbSBieSB0aGUgdGVybVxyXG4gICAgICAgIC8vVGhpcyBpcyBub3QgdGhlIGNhc2UgZm9yIHN2IGxvY2FsZSBhbmQgd2Ugd2FudCB0byBza2lwIHRoaXMgY2hlY2sgXHJcbiAgICAgICAgLy9iZWNhdXNlIGRhdGEgaXMgYWxyZWFkeSBzYXZlZCBpbiB0aGUgZGF0YWJhc2VcclxuICAgICAgICBjb25zdCB3ZWVrUGxhbiA9IHdlZWtwbGFuVmFsdWVzLmZpbHRlcih3cCA9PlxyXG4gICAgICAgICAgd3AuZGF0ZVRpbWUgPj0ga2VkV2Vlay5ub3RCZWZvcmUgJiZcclxuICAgICAgICAgIHdwLmRhdGVUaW1lIDw9IGtlZFdlZWsubm90QWZ0ZXIgJiZcclxuICAgICAgICAgICghd3AuaXNGaW5hbFN0ZXAgJiZcclxuICAgICAgICAgIHdwLnRlcm0gPT09IGN1cnJlbnRUZXJtIHx8IGludGwubG9jYWxlID09PSBcInN2XCIpKVswXTtcclxuXHJcbiAgICAgICAgY29uc3QgdHV0b3JOb3RlID0gdHV0b3JWYWx1ZXMuZmlsdGVyKHdwID0+IFxyXG4gICAgICAgICAgd3AuZGF0ZVRpbWUgPj0ga2VkV2Vlay5ub3RCZWZvcmUgJiZcclxuICAgICAgICAgIHdwLmRhdGVUaW1lIDw9IGtlZFdlZWsubm90QWZ0ZXIgJiZcclxuICAgICAgICAgICh3cC50ZXJtID09PSBjdXJyZW50VGVybSB8fCBpbnRsLmxvY2FsZSA9PT0gXCJzdlwiKSlbMF07XHJcblxyXG4gICAgICAgIHRoaXMud2Vla1BsYW5zT3JUdXRvck5vdGUucHVzaCh7XHJcbiAgICAgICAgICAuLi53ZWVrUGxhbiB8fCB7fSxcclxuICAgICAgICAgIGlkOiB3ZWVrUGxhbiA/IHdlZWtQbGFuLmlkIDogY3JlYXRlVVVJRCgpLFxyXG4gICAgICAgICAgZGF0ZVRpbWU6IHdlZWtQbGFuID8gd2Vla1BsYW4uZGF0ZVRpbWUgOiB3ZWVrTW9tZW50LnZhbHVlT2YoKSxcclxuICAgICAgICAgIGNlbGxWYWx1ZXM6IHdlZWtQbGFuID8gd2Vla1BsYW4uY2VsbFZhbHVlcyA6IHt9LFxyXG4gICAgICAgICAgd2Vla051bWJlcixcclxuICAgICAgICAgIGFjYWRlbWljV2Vla051bWJlcjogc3RhcnRBY2FkZW1pY1llYXJOdW1iZXIrKyxcclxuICAgICAgICAgIHRlcm06IGN1cnJlbnRUZXJtXHJcbiAgICAgICAgfSBhcyBLU1Rlcm1QbGFubmVyV2Vla1BsYW4pO1xyXG5cclxuICAgICAgICB0aGlzLndlZWtQbGFuc09yVHV0b3JOb3RlLnB1c2goe1xyXG4gICAgICAgICAgLi4udHV0b3JOb3RlIHx8IHt9LFxyXG4gICAgICAgICAgaWQ6IHR1dG9yTm90ZSA/IHR1dG9yTm90ZS5pZCA6IGNyZWF0ZVVVSUQoKSxcclxuICAgICAgICAgIHR5cGU6ICd0dXRvci1ub3RlJyxcclxuICAgICAgICAgIGRhdGVUaW1lOiB0dXRvck5vdGUgPyB0dXRvck5vdGUuZGF0ZVRpbWUgOiB3ZWVrTW9tZW50LnZhbHVlT2YoKSxcclxuICAgICAgICAgIGNvbnRlbnQ6IHR1dG9yTm90ZSA/IHR1dG9yTm90ZS5jb250ZW50IDogJycsXHJcbiAgICAgICAgICB3ZWVrTnVtYmVyLFxyXG4gICAgICAgICAgdGVybTogY3VycmVudFRlcm0gIFxyXG4gICAgICAgIH0gYXMgVGVybVBsYW5uZXJUdXRvck5vdGUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvL1xyXG4gICAgICAvLyBsYXN0U3RlcHNcclxuICAgICAgLy9cclxuICAgICAgY29uc3QgbGFzdFN0ZXBXZWVrID0gY3VycmVudFNjaG9vbFRlcm0uZ2V0TGFzdFN0ZXBXZWVrKGludGwubG9jYWxlKTtcclxuICAgICAgY29uc3QgbGFzdFN0ZXBLZWRXZWVrID0gS0VEV2Vlayh0ZXJtRW5kLnllYXIoKSwgbGFzdFN0ZXBXZWVrKTtcclxuICAgICAgdGhpcy5sYXN0U3RlcHMgPSB3ZWVrcGxhblZhbHVlcy5maWx0ZXIod3AgPT5cclxuICAgICAgICB3cC5kYXRlVGltZSA+PSBsYXN0U3RlcEtlZFdlZWsubm90QmVmb3JlICYmXHJcbiAgICAgICAgd3AuZGF0ZVRpbWUgPD0gbGFzdFN0ZXBLZWRXZWVrLm5vdEFmdGVyICYmIFxyXG4gICAgICAgICh3cC5pc0ZpbmFsU3RlcCAmJlxyXG4gICAgICAgIHdwLnRlcm0gPT09IGN1cnJlbnRUZXJtIHx8IGludGwubG9jYWxlID09PSBcInN2XCIpKVswXSB8fCB7XHJcbiAgICAgICAgICBpZDogY3JlYXRlVVVJRCgpLFxyXG4gICAgICAgICAgZGF0ZVRpbWU6IG1vbWVudCh0ZXJtRW5kKS5jbG9uZSgpLndlZWsobGFzdFN0ZXBXZWVrKS5zdGFydE9mKCd3ZWVrJykudmFsdWVPZigpLFxyXG4gICAgICAgICAgY2VsbFZhbHVlczoge30sXHJcbiAgICAgICAgICB3ZWVrTnVtYmVyOiBsYXN0U3RlcFdlZWssXHJcbiAgICAgICAgICB0ZXJtOiBjdXJyZW50VGVybSxcclxuICAgICAgICAgIGlzRmluYWxTdGVwOiB0cnVlXHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICB0aGlzLmNvbXBsZXRlZFN0ZXBzID0ge307XHJcbiAgICAgIHRoaXMudGVybUdvYWxzID0ge307XHJcbiAgICAgIHZhciBtYXhTdWJqZWN0U3RlcCA9IHt9O1xyXG4gICAgICBmb3IgKGNvbnN0IGNvdXJzZSBvZiBjb3Vyc2VzKSB7XHJcbiAgICAgICAgY29uc3QgY29sdW1uSGVhZGVyID0gZ2V0Q29sdW1uSGVhZGVyRnJvbUNvdXJzZShjb3Vyc2UpO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gY29tcGxldGVkU3RlcHNcclxuICAgICAgICAvL1xyXG4gICAgICAgIGZvciAoY29uc3Qgc3RlcCBvZiBjb3Vyc2UuY291cnNlU3RlcHMpIHtcclxuICAgICAgICAgIGlmIChzdGVwLmlzQ29tcGxldGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcGxldGVkU3RlcHNbY29sdW1uSGVhZGVyICsgc3RlcC5zaG9ydE5hbWVdID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIC8vc2V0IHRoZSBtYXhpbXVtIHZhbHVlIG9mIHRoZSBjb21wbGV0ZWQgc3RlcCBmb3IgZWFjaCBzdWJqZWN0XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50U3RlcFZhbHVlID0gcGFyc2VJbnQoc3RlcC5zaG9ydE5hbWUpO1xyXG4gICAgICAgICAgICBpZiAoIWlzTmFOKGN1cnJlbnRTdGVwVmFsdWUpICYmIGN1cnJlbnRTdGVwVmFsdWUgPiAobWF4U3ViamVjdFN0ZXBbY29sdW1uSGVhZGVyXSA/IG1heFN1YmplY3RTdGVwW2NvbHVtbkhlYWRlcl0gOiAwKSkge1xyXG4gICAgICAgICAgICAgIG1heFN1YmplY3RTdGVwW2NvbHVtbkhlYWRlcl0gPSBjdXJyZW50U3RlcFZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvKmNvbnN0IHdlZWtQbGFucyA9IGZpbmRXZWVrUGxhbnNCeVN0ZXAodGhpcy53ZWVrUGxhbnMsIHN0ZXAuU2hvcnROYW1lKTtcclxuICAgICAgICAgICAgd2Vla1BsYW5zLmZvckVhY2god2Vla1BsYW4gPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wbGV0ZWRTdGVwc1t3ZWVrUGxhbi53ZWVrICsgY29sdW1uSGVhZGVyXSA9IHRydWU7XHJcbiAgICAgICAgICAgIH0pKi9cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyB0ZXJtR29hbHNcclxuICAgICAgICAvL1xyXG4gICAgICAgIHRoaXMudGVybUdvYWxzW2NvbHVtbkhlYWRlcl0gPSBjb3Vyc2UucGVyaW9kR29hbEdyYWRlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZihjb3Vyc2VzKSB7XHJcbiAgICAgICAgLy9pbml0XHJcbiAgICAgICAgY29sdW1uSGVhZGVycy5mb3JFYWNoKGVsZW0gPT4ge1xyXG4gICAgICAgICAgdGhpcy5zdWJqZWN0UHJvZ3Jlc3NbZWxlbV0gPSB7ZmluYWxTdGVwQ29tcGxldGVkOmZhbHNlLCB2YWx1ZTogMH07XHJcbiAgICAgICAgfSlcclxuICAgICAgICAvL2NvbXB1dGUgY2hhcnRzIGJ5IGNvbXB1dGluZyAgY29tcGxldGVkIGdvYWwgKHNhdmVkIGRhdGEgZnJvbSBrZWRiYWNrZW5kIGlzIG5vdCB0YWtlbiBpbnRvIGFjY291bnQpL2xhc3RTdGVwVmFsdWVcclxuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmxhc3RTdGVwcy5jZWxsVmFsdWVzKS5mb3JFYWNoKCh2YWwpID0+IHtcclxuICAgICAgICAgIC8vZXhjbHVkZSB0aGUgZml4ZWQgY29sdW1ucy4gQ2hhcnRzIHNob3VsZCBub3QgYmUgZGlzcGxheWVkIGZvciB0aG9zZVxyXG4gICAgICAgICAgaWYgKCFmaXhlZENvbHVtbnNbdmFsXSkge1xyXG4gICAgICAgICAgdmFyIGhhc05vRmluYWxTdGVwVmFsdWUgPSBpc05hTihwYXJzZUludCh0aGlzLmxhc3RTdGVwcy5jZWxsVmFsdWVzW3ZhbF0pKSB8fCAhdGhpcy5sYXN0U3RlcHMuY2VsbFZhbHVlc1t2YWxdO1xyXG4gICAgICAgICAgdmFyIGZpbmFsU3RlcFZhbHVlID0gaGFzTm9GaW5hbFN0ZXBWYWx1ZSA/IDAgOiBwYXJzZUludCh0aGlzLmxhc3RTdGVwcy5jZWxsVmFsdWVzW3ZhbF0pO1xyXG4gICAgICAgICAgdmFyIHBlcmNlblZhbHVlID0gZmluYWxTdGVwVmFsdWUgPiAwID8gbWF4U3ViamVjdFN0ZXBbdmFsXSAqIDEwMCAvIGZpbmFsU3RlcFZhbHVlIDogMDtcclxuICAgICAgICAgIHRoaXMuc3ViamVjdFByb2dyZXNzW3ZhbF0gPSB7ZmluYWxTdGVwQ29tcGxldGVkOiAhaGFzTm9GaW5hbFN0ZXBWYWx1ZSwgdmFsdWU6IHBlcmNlblZhbHVlfTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZmluZFdlZWtQbGFuc0J5U3RlcCh3ZWVrUGxhbnM6IEtTVGVybVBsYW5uZXJXZWVrUGxhbltdLCBzdGVwOiBzdHJpbmcpOiBLU1Rlcm1QbGFubmVyV2Vla1BsYW5bXSB7XHJcbiAgcmV0dXJuIHdlZWtQbGFucy5maWx0ZXIod3AgPT4gT2JqZWN0LmtleXMod3AuY2VsbFZhbHVlcykubWFwKGNvbHVtbiA9PiB3cC5jZWxsVmFsdWVzW2NvbHVtbl0gPT09IHN0ZXApKTtcclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IEVEU0Fzc2Vzc21lbnQgfSBmcm9tICcuLi8uLi9jb250cmFjdHMvZWRzJztcclxuaW1wb3J0IGVudiBmcm9tICcuLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBsaW1pdD86IG51bWJlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBsb2FkaW5nOiBib29sZWFuLFxyXG4gIGFzc2Vzc21lbnRzOiBFRFNBc3Nlc3NtZW50W10sXHJcbiAgZXJyb3I6IHN0cmluZyB8IG51bGxcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIExhdGVzdEFzc2Vzc21lbnRzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLFN0YXRlPiB7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgYXNzZXNzbWVudHM6IFtdLFxyXG4gICAgICBlcnJvcjogbnVsbCxcclxuICAgICAgbG9hZGluZzogZmFsc2VcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcclxuICAgIHRoaXMubG9hZCgpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgbG9hZCgpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe2xvYWRpbmc6IHRydWV9KTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGFzc2Vzc21lbnRzID0gYXdhaXQgZW52LmVkc0NsaWVudC5nZXRMYXRlc3RBc3Nlc3NtZW50cyh0aGlzLnByb3BzLmxpbWl0KTtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7YXNzZXNzbWVudHN9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2Vycm9yfSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFN0YXRlKHtsb2FkaW5nOiBmYWxzZX0pOyAgICBcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IGhhc0dyYWRlcyA9IHRoaXMuc3RhdGUuYXNzZXNzbWVudHMuc29tZShhID0+ICEhYS5ncmFkZU5hbWUpO1xyXG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwia2VkX2JveGVkXCI+XHJcbiAgICAgIDxoND57TGBTZW5hc3RlIGJlZMO2bW5pbmdhcmB9PC9oND5cclxuICAgICAgPGhyIC8+XHJcbiAgICAgIDx1bCBjbGFzc05hbWU9XCJsYXRlc3QtYXNzZXNtZW50cyB6ZWJyYVwiPlxyXG4gICAgICB7dGhpcy5zdGF0ZS5hc3Nlc3NtZW50cy5tYXAoKGEsIGkpID0+IFxyXG4gICAgICAgICAgICA8bGkga2V5PXtpfT5cclxuICAgICAgICAgICAgICB7KGhhc0dyYWRlcyAmJiAgYS5ncmFkZU5hbWUgIT0gXCJcIikgJiYgPHNwYW4gY2xhc3NOYW1lPVwiZ3JhZGUgcGlsbCBwdWxsLXJpZ2h0XCI+e2EuZ3JhZGVOYW1lfTwvc3Bhbj59XHJcbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZGF0ZSBwaWxsIHB1bGwtbGVmdFwiPnthLnB1Ymxpc2hEYXRlVGltZS5zdWJzdHIoMCwgMTApfTwvc3Bhbj5cclxuICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBhLmNvdXJzZU5hbWUgPT0gYS5jb3Vyc2VVbml0TmFtZSA/IFxyXG4gICAgICAgICAgICAgICAgICA8aDU+PHN0cm9uZz57YS5jb3Vyc2VOYW1lfTwvc3Ryb25nPjwvaDU+IDogPGg1PjxzdHJvbmc+e2EuY291cnNlTmFtZX08L3N0cm9uZz4gLyA8ZW0+e2EuY291cnNlVW5pdE5hbWV9PC9lbT48L2g1PlxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICA8YnIgLz5cclxuICAgICAgICAgICAgICA8cD57YS50ZXh0fTwvcD5cclxuICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICl9XHJcbiAgICAgIDwvdWw+XHJcbiAgICA8L2Rpdj47XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgZ2V0TGVhcm5pbmdHb2Fsc0FuZFRhc2tzLCBLZWRMZWFybmluZ0dvYWxzRGF0YSB9IGZyb20gJy4uLy4uL2FwaXMva2VkLWxlYXJuaW5nZ29hbHMnO1xyXG5pbXBvcnQgeyBMZWFybmluZ01vZHVsZVRhc2ssIFRhc2tMaXN0IH0gZnJvbSAnLi4vY291cnNlLXZpZXdlci9zdWJjb21wb25lbnRzL3Rhc2stbGlzdCc7XHJcbmltcG9ydCB7IGZsYXR0ZW4gfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IExlYXJuaW5nR29hbCwgTGVhcm5pbmdHb2Fsc0xpc3QgfSBmcm9tICcuLi9jb3Vyc2Utdmlld2VyL3N1YmNvbXBvbmVudHMvbGVhcm5pbmctZ29hbHMtbGlzdCc7XHJcbmltcG9ydCB7IHNldHVwSW50bCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9TZXR1cExhbmd1YWdlSW50bCc7XHJcbmltcG9ydCB7IGluamVjdEludGwsIEluamVjdGVkSW50bFByb3BzIH0gZnJvbSAncmVhY3QtaW50bCc7XHJcbmltcG9ydCB7IExhbmd1YWdlQ29udGV4dCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9MYW5ndWFnZUNvbnRleHQnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIGV4dGVuZHMgSW5qZWN0ZWRJbnRsUHJvcHN7XHJcbiAgYXBpUGF0aDogc3RyaW5nOyAvLyBcIi80LjU2NjdjNjMxMTVlZDZjMDM3OTBhNGM4Yy8xMi4xZjk1YTY3YTE1ZWUzMWVhMWM0NDQ3YjIuanNvblwiXHJcbiAgcGFnZUlkOiBzdHJpbmc7IC8vIHN2LlBhZ2VDb250ZXh0LnBhZ2VJZFxyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIGRhdGE6IEtlZExlYXJuaW5nR29hbHNEYXRhIHwgbnVsbFxyXG59XHJcblxyXG5jbGFzcyBfTGVhcm5pbmdUYXNrcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGRhdGE6IG51bGxcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldExlYXJuaW5nR29hbHNBbmRUYXNrcyhcclxuICAgICAgdGhpcy5wcm9wcy5hcGlQYXRoLFxyXG4gICAgICB0aGlzLnByb3BzLnBhZ2VJZCk7XHJcblxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7IGRhdGEgfSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBpZiAoIXRoaXMuc3RhdGUuZGF0YSkgcmV0dXJuIDxkaXY+PC9kaXY+O1xyXG4gICAgY29uc3QgeyBtb2R1bGVOYW1lLCBzdWJqZWN0LCBjb21tb25UYXNrcywgbGVhcm5pbmdHb2Fscywgc3RlcCB9ID0gdGhpcy5zdGF0ZS5kYXRhO1xyXG4gICAgY29uc3Qge2ludGx9ID0gdGhpcy5wcm9wcztcclxuICAgIC8vY29uc3Qgc3RlcCA9IHVuZGVmaW5lZDsgLy8gbW9kdWxlTmFtZS50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoXCJzdGVnIFwiKSAmJiBwYXJzZUludChtb2R1bGVOYW1lLnN1YnN0cig1KSk7XHJcbiAgICBjb25zdCBjb21tb25UYXNrc0xpc3Q6IExlYXJuaW5nTW9kdWxlVGFza1tdID1cclxuICAgICAgY29tbW9uVGFza3MubWFwKHRhc2sgPT4gKHtcclxuICAgICAgICBpZDogdGFzay5pZCxcclxuICAgICAgICBuYW1lOiB0YXNrLm5hbWUsXHJcbiAgICAgICAgdXJsOiB0YXNrLnVybCxcclxuICAgICAgICBjb3Vyc2VOYW1lOiBzdWJqZWN0Lm5hbWUsXHJcbiAgICAgICAgbGVhcm5pbmdHb2FsOiBzdGVwICYmIGxlYXJuaW5nR29hbHMubGVuZ3RoID4gMCA/IGAke21vZHVsZU5hbWV9IC0gw7Z2ZXJncmlwYW5kZWAgOiBtb2R1bGVOYW1lXHJcbiAgICAgIH0pKTtcclxuICAgICAgXHJcbiAgICBjb25zdCBsZWFybmluZ0dvYWxzTGlzdDogTGVhcm5pbmdHb2FsW10gPSBsZWFybmluZ0dvYWxzLm1hcChsZWFybmluZ0dvYWwgPT4gKHtcclxuICAgICAgbmFtZTogbGVhcm5pbmdHb2FsLm5hbWUsXHJcbiAgICAgIGxlYXJuaW5nVGFza3M6IGxlYXJuaW5nR29hbC50YXNrcy5tYXAodGFzayA9PiAoe1xyXG4gICAgICAgIGlkOiB0YXNrLmlkLFxyXG4gICAgICAgIG5hbWU6IHRhc2submFtZSxcclxuICAgICAgICB1cmw6IHRhc2sudXJsLFxyXG4gICAgICAgIGNvdXJzZU5hbWU6IHN1YmplY3QubmFtZSxcclxuICAgICAgICBsZWFybmluZ0dvYWw6IGxlYXJuaW5nR29hbC5uYW1lXHJcbiAgICAgIH0pKVxyXG4gICAgfSkpO1xyXG5cclxuICAgIGlmIChzdGVwKSB7XHJcbiAgICAgIGNvbW1vblRhc2tzTGlzdC5mb3JFYWNoKHRhc2sgPT4gdGFzay5zdGVwID0gc3RlcCk7XHJcbiAgICAgIGxlYXJuaW5nR29hbHNMaXN0LmZvckVhY2gobGcgPT4gbGcubGVhcm5pbmdUYXNrcy5mb3JFYWNoKHRhc2sgPT4gdGFzay5zdGVwID0gc3RlcCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiA8TGFuZ3VhZ2VDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7IGludGwgfX0+XHJcbiAgICAgIDxMZWFybmluZ0dvYWxzTGlzdFxyXG4gICAgICAgIGNvbW1vblRhc2tzPXtjb21tb25UYXNrc0xpc3R9XHJcbiAgICAgICAgbGVhcm5pbmdHb2Fscz17bGVhcm5pbmdHb2Fsc0xpc3R9IC8+XHJcbiAgICA8L0xhbmd1YWdlQ29udGV4dC5Qcm92aWRlcj5cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBMZWFybmluZ1Rhc2tzID0gc2V0dXBJbnRsKGluamVjdEludGwoX0xlYXJuaW5nVGFza3MpKTtcclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBDb3Vyc2UsIFNjaG9vbCwgVXNlckhpZGRlbkNvdXJzZSB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IGNmZyBmcm9tICcuLi8uLi9nbG9iYWxzL0tFRC5jZmcnO1xyXG5pbXBvcnQgeyBzaG93RXJyb3IsIGZsYXR0ZW4sIGNvbXBhcmVQcm9wLCBzaG93SW5mbywgTCB9IGZyb20gXCIuLi8uLi91dGlscy91dGlsc1wiO1xyXG5pbXBvcnQgeyBjcmVhdGVVVUlEIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQgeyBTcGlubmVyIH0gZnJvbSBcIi4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3NwaW5uZXJcIjtcclxuaW1wb3J0IHsgcGFyc2VRdWVyeVN0cmluZywgZ2VuZXJhdGVRdWVyeVN0cmluZyB9IGZyb20gXCIuLi8uLi91dGlscy9xdWVyeS1zdHJpbmdcIjtcclxuaW1wb3J0IHsgcHJlc2VydmVJbXBlcnNvbmF0aW9uUXVlcnkgfSBmcm9tICcuLi8uLi9hY2Nlc3MtY29udHJvbC9pbmRleCc7XHJcbmltcG9ydCB7IGhpZGRlbkNvdXJzZXNSZXBvLCBDb3Vyc2VXaXRoSGlkZGVuU3RhdGUgfSBmcm9tICcuLi8uLi9yZXBvcy9oaWRkZW4tY291cnNlcy1yZXBvJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgaXNMb2FkaW5nOiBib29sZWFuXHJcbiAgY291cnNlczogQ291cnNlV2l0aEhpZGRlblN0YXRlW11cclxuICBoZWFkZXJPcGVuOiBib29sZWFuXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBMaXN0Q291cnNlcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgaXNMb2FkaW5nOiB0cnVlLFxyXG4gICAgICBjb3Vyc2VzOiBbXSxcclxuICAgICAgaGVhZGVyT3BlbjogZmFsc2VcclxuICAgIH07XHJcbiAgICB0aGlzLnVwZGF0ZUhpZGRlbkNvdXJzZXMgPSB0aGlzLnVwZGF0ZUhpZGRlbkNvdXJzZXMuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxNb3VudCgpIHtcclxuICAgIGhpZGRlbkNvdXJzZXNSZXBvLnN1YnNjcmliZSh0aGlzLnVwZGF0ZUhpZGRlbkNvdXJzZXMsIHtmdWxsQ291cnNlOiB0cnVlfSk7XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgIGhpZGRlbkNvdXJzZXNSZXBvLnVuc3Vic2NyaWJlKHRoaXMudXBkYXRlSGlkZGVuQ291cnNlcyk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVIaWRkZW5Db3Vyc2VzKGNvdXJzZXM6IENvdXJzZVdpdGhIaWRkZW5TdGF0ZVtdKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtjb3Vyc2VzLCBpc0xvYWRpbmc6IGZhbHNlfSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBoaWRlQ291cnNlKGNvdXJzZTogQ291cnNlV2l0aEhpZGRlblN0YXRlKSB7XHJcbiAgICBzaG93SW5mbyhMYFNwYXJhci4uLmApO1xyXG4gICAgYXdhaXQgaGlkZGVuQ291cnNlc1JlcG8uaGlkZUNvdXJzZShjb3Vyc2UpO1xyXG4gICAgc2hvd0luZm8oXCJcIik7XHJcbiAgfVxyXG5cclxuICBhc3luYyBzaG93Q291cnNlKGNvdXJzZTogQ291cnNlV2l0aEhpZGRlblN0YXRlKSB7XHJcbiAgICBzaG93SW5mbyhMYFNwYXJhci4uLmApO1xyXG4gICAgYXdhaXQgaGlkZGVuQ291cnNlc1JlcG8uc2hvd0NvdXJzZShjb3Vyc2UpO1xyXG4gICAgc2hvd0luZm8oXCJcIik7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBpZiAodGhpcy5zdGF0ZS5pc0xvYWRpbmcpIHJldHVybiA8U3Bpbm5lciAvPjtcclxuICAgIGNvbnN0IHtjb3Vyc2VzfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCB2aXNpYmxlQ291cnNlcyA9IGNvdXJzZXMuZmlsdGVyKGNvdXJzZSA9PiBjb3Vyc2UudmlzaWJsZSk7XHJcbiAgICBjb25zdCBoaWRkZW5Db3Vyc2VzID0gY291cnNlcy5maWx0ZXIoY291cnNlID0+ICFjb3Vyc2UudmlzaWJsZSk7XHJcbiAgICBjb25zdCBxdWVyeSA9IHBhcnNlUXVlcnlTdHJpbmcobG9jYXRpb24uc2VhcmNoKTtcclxuICAgIGNvbnN0IHZpZXdDb3Vyc2VVcmwgPSBjZmcuS0VEX0NPVVJTRV9WSUVXRVJfVVJMO1xyXG5cclxuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImtlZF9ib3hlZFwiPlxyXG4gICAgICA8aDM+U2tvbGFucyBrdXJzZXI8L2gzPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhc2tDb250YWluZXIgb2RkLWV2ZW5cIj5cclxuICAgICAgICB7dmlzaWJsZUNvdXJzZXMubWFwKGNvdXJzZSA9PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdHVkZW50Q291cnNlXCIga2V5PXtjb3Vyc2UuaWR9PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcCBwdWxsLXJpZ2h0XCI+XHJcbiAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJoaWRlSXRlbVwiIG9uQ2xpY2s9eygpID0+IHRoaXMuaGlkZUNvdXJzZShjb3Vyc2UpfSAvPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgICAgICA8YSBocmVmPXtwcmVzZXJ2ZUltcGVyc29uYXRpb25RdWVyeSh2aWV3Q291cnNlVXJsLCB7Y291cnNlSWQ6IGNvdXJzZS5pZH0pfT57Y291cnNlLm5hbWV9PC9hPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJzbWFsbFwiPntjb3Vyc2UuZGVzY3JpcHRpb259PC9wPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2Pil9XHJcbiAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9e1wib3BlbkNsb3NlXCIgKyAodGhpcy5zdGF0ZS5oZWFkZXJPcGVuID8gXCIgb3BlblwiIDogXCJcIil9PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3BlbkhlYWRlclwiIG9uQ2xpY2s9eygpID0+IHRoaXMuc2V0U3RhdGUoeyBoZWFkZXJPcGVuOiAhdGhpcy5zdGF0ZS5oZWFkZXJPcGVuIH0pfT5cclxuICAgICAgICAgIDxoNT5Eb2xkYSBrdXJzZXI8L2g1PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3BlbkNvbnRlbnRcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFza0NvbnRhaW5lciBvZGQtZXZlblwiPlxyXG4gICAgICAgICAgICB7aGlkZGVuQ291cnNlcy5tYXAoY291cnNlID0+IFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN0dWRlbnRDb3Vyc2VcIiBrZXk9e2NvdXJzZS5pZH0+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcCBwdWxsLXJpZ2h0XCI+XHJcbiAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cInNob3dJdGVtXCIgb25DbGljaz17KCkgPT4gdGhpcy5zaG93Q291cnNlKGNvdXJzZSl9PjwvYT5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGEgaHJlZj17Z2VuZXJhdGVRdWVyeVN0cmluZyh7Li4ucXVlcnksIGNvdXJzZUlkOiBjb3Vyc2UuaWR9KX0+e2NvdXJzZS5uYW1lfTwvYT5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwic21hbGxcIj57Y291cnNlLmRlc2NyaXB0aW9ufTwvcD5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+KX1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IENvdXJzZSwgVXNlckhpZGRlbkNvdXJzZSwgU2Nob29sIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBoaWRkZW5Db3Vyc2VzUmVwbywgQ291cnNlV2l0aEhpZGRlblN0YXRlIH0gZnJvbSAnLi4vLi4vcmVwb3MvaGlkZGVuLWNvdXJzZXMtcmVwbyc7XHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgZmxhdHRlbiwgY29tcGFyZVByb3AsIGFycmF5VG9NYXAsIGFycmF5VG9Mb29rdXAgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IHByZXNlcnZlSW1wZXJzb25hdGlvblF1ZXJ5IH0gZnJvbSAnLi4vLi4vYWNjZXNzLWNvbnRyb2wnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XHJcbiAgdmlld0NvdXJzZVVybDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFN0YXRlIHtcclxuICBjb3Vyc2VzOiBDb3Vyc2VXaXRoSGlkZGVuU3RhdGVbXTtcclxuICBpc0xvYWRpbmc6IGJvb2xlYW47XHJcbiAgZXJyb3I/OiBFcnJvcjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE15Q291cnNlcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgY291cnNlczogW10sXHJcbiAgICAgIGlzTG9hZGluZzogdHJ1ZVxyXG4gICAgfVxyXG4gICAgdGhpcy51cGRhdGVIaWRkZW5Db3Vyc2VzU3RhdGUgPSB0aGlzLnVwZGF0ZUhpZGRlbkNvdXJzZXNTdGF0ZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICBoaWRkZW5Db3Vyc2VzUmVwby5zdWJzY3JpYmUodGhpcy51cGRhdGVIaWRkZW5Db3Vyc2VzU3RhdGUsIHtmdWxsQ291cnNlOiBmYWxzZX0pO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlSGlkZGVuQ291cnNlc1N0YXRlKGNvdXJzZXM6IENvdXJzZVdpdGhIaWRkZW5TdGF0ZVtdKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtjb3Vyc2VzLCBpc0xvYWRpbmc6IGZhbHNlfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XHJcbiAgICBoaWRkZW5Db3Vyc2VzUmVwby51bnN1YnNjcmliZSh0aGlzLnVwZGF0ZUhpZGRlbkNvdXJzZXNTdGF0ZSk7XHJcbiAgfVxyXG5cclxuICBnZXRDb3Vyc2VVcmwoY291cnNlSWQ6IHN0cmluZykge1xyXG4gICAgcmV0dXJuIHByZXNlcnZlSW1wZXJzb25hdGlvblF1ZXJ5KHRoaXMucHJvcHMudmlld0NvdXJzZVVybCwgeyBjb3Vyc2VJZCB9KTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHt2aWV3Q291cnNlVXJsfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCB7aXNMb2FkaW5nLCBlcnJvciwgY291cnNlcyB9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IHZpc2libGVDb3Vyc2VzID0gdGhpcy5zdGF0ZS5jb3Vyc2VzLmZpbHRlcihjID0+IGMudmlzaWJsZSk7XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPD5cclxuICAgICAgICB7aXNMb2FkaW5nID8gKFxyXG4gICAgICAgICAgPGxpIGNsYXNzTmFtZT1cImx2bDIgaGVhZGVyXCI+XHJcbiAgICAgICAgICAgIDxhPkxhZGRhci4uLjwvYT5cclxuICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgKSA6IGVycm9yID8gKFxyXG4gICAgICAgICAgPGxpIGNsYXNzTmFtZT1cImx2MTJcIj5cclxuICAgICAgICAgICAgPGE+S3VuZGUgaW50ZSBsYWRkYSBrdXJzZXIuPC9hPlxyXG4gICAgICAgICAgPC9saT5cclxuICAgICAgICAgKSA6IChcclxuICAgICAgICAgIHZpc2libGVDb3Vyc2VzLm1hcCgoe25hbWUsIGlkfSkgPT4gKFxyXG4gICAgICAgICAgICA8bGkga2V5PXtpZH0gY2xhc3NOYW1lPVwibHZsMlwiPlxyXG4gICAgICAgICAgICAgIDxhIGhyZWY9e3RoaXMuZ2V0Q291cnNlVXJsKGlkKX0+e25hbWV9PC9hPlxyXG4gICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgKVxyXG4gICAgICAgICkpXHJcbiAgICAgICAgfVxyXG5cdFx0XHQ8Lz5cclxuICAgICk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IGVudiBmcm9tICcuLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBFRFNTdHVkZW50IH0gZnJvbSAnLi4vLi4vY29udHJhY3RzL2Vkcyc7XHJcbmltcG9ydCB7IGNvbXBhcmVQcm9wcyB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgU3Bpbm5lciB9IGZyb20gJy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3NwaW5uZXInO1xyXG5pbXBvcnQgdHV0b3JFbnYgZnJvbSAnLi4vLi4vZ2xvYmFscy9LRUQudHV0b3JFbnYnO1xyXG5pbXBvcnQge3JlcXVlc3RUdXRvcmVkVG9rZW5zfSBmcm9tICcuLi8uLi91dGlscy9yZXF1ZXN0LXR1dG9yZWQtdG9rZW5zJztcclxuaW1wb3J0IHsgVXNlciB9IGZyb20gJy4uLy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcclxuXHJcbmludGVyZmFjZSBTdHVkZW50SW5mbyB7XHJcbiAgbWFpbDogc3RyaW5nO1xyXG4gIGRpc3BsYXlOYW1lOiBzdHJpbmc7XHJcbn1cclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcblxyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIGlzTG9hZGluZzogYm9vbGVhbjtcclxuICBzdHVkZW50czogU3R1ZGVudEluZm9bXTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFR1dG9yc1NlbGVjdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcclxuXHJcbiAgY29uc3RydWN0b3IgKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgaXNMb2FkaW5nOiB0cnVlLFxyXG4gICAgICBzdHVkZW50czogW11cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgdGhpcy5sb2FkKCk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBsb2FkKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZWRzU3R1ZGVudHMgPSBhd2FpdCBlbnYuZWRzQ2xpZW50LmdldFRlYWNoZXJUdXRvclN0dWRlbnRzKCk7XHJcbiAgICAgIGVkc1N0dWRlbnRzLnNvcnQoY29tcGFyZVByb3BzKFtcImxhc3ROYW1lXCIsIFwiZmlyc3ROYW1lXCJdKSk7XHJcbiAgICAgIGNvbnN0IHN0dWRlbnRzID0gZWRzU3R1ZGVudHMubGVuZ3RoID4gMCA/XHJcbiAgICAgICAgZWRzU3R1ZGVudHMubWFwKCh7ZW1haWwsIGZpcnN0TmFtZSwgbGFzdE5hbWV9KT0+KHtcclxuICAgICAgICAgIG1haWw6IGVtYWlsLFxyXG4gICAgICAgICAgZGlzcGxheU5hbWU6IGAke2ZpcnN0TmFtZX0gJHtsYXN0TmFtZX1gXHJcbiAgICAgICAgfSkpIDpcclxuICAgICAgICBbZW52LmN1cnJlbnRVc2VyXTtcclxuICAgICAgYXdhaXQgdGhpcy5zZXRTdGF0ZSh7c3R1ZGVudHN9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJDb3VsZCBub3QgbGlzdCB0dXRvciBzdHVkZW50c1wiLCBlcnJvcik7XHJcbiAgICAgIGF3YWl0IHRoaXMuc2V0U3RhdGUoe3N0dWRlbnRzOiBbZW52LmN1cnJlbnRVc2VyXX0pXHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHtpc0xvYWRpbmc6IGZhbHNlfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvblNlbGVjdFVzZXIoZW1haWw6IHN0cmluZykge1xyXG4gICAgY29uc3QgY2hvb3NlblN0dWRlbnQgPSB0aGlzLnN0YXRlLnN0dWRlbnRzLmZpbHRlcihzID0+IHMubWFpbCA9PT0gZW1haWwpWzBdO1xyXG4gICAgY29uc3QgdXNlcjogVXNlciA9IHtcclxuICAgICAgLi4uY2hvb3NlblN0dWRlbnQsXHJcbiAgICAgIHJvbGVzOiBbXCJVU0VSXCJdLFxyXG5cclxuICAgIH1cclxuICAgIFxyXG4gICAgdHV0b3JFbnYuc2V0TmV3RW52KHVzZXIsICgpPT5yZXF1ZXN0VHV0b3JlZFRva2VucyhlbWFpbCwgZW1haWwpKVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qge2lzTG9hZGluZywgc3R1ZGVudHN9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGlmIChpc0xvYWRpbmcpIHJldHVybiA8U3Bpbm5lciAvPjtcclxuXHJcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJ0dXRvcnMtc2VsZWN0XCI+XHJcbiAgICAgIDxzZWxlY3Qgb25DaGFuZ2U9e2V2ID0+IGV2LnRhcmdldC52YWx1ZSAmJiB0aGlzLm9uU2VsZWN0VXNlcihldi50YXJnZXQudmFsdWUpfT5cclxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwiXCI+VsOkbGogZWxldjwvb3B0aW9uPlxyXG4gICAgICAgIHtzdHVkZW50cy5tYXAoc3R1ZGVudCA9PlxyXG4gICAgICAgICAgPG9wdGlvbiBrZXk9e3N0dWRlbnQubWFpbH0gdmFsdWU9e3N0dWRlbnQubWFpbH0+XHJcbiAgICAgICAgICAgIHtzdHVkZW50LmRpc3BsYXlOYW1lfSAoe3N0dWRlbnQubWFpbH0pXHJcbiAgICAgICAgICA8L29wdGlvbj4pfVxyXG4gICAgICA8L3NlbGVjdD5cclxuICAgIDwvZGl2PjtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IHtUdXRvcnNWaWV3VGVzdH0gZnJvbSAnLi90dXRvcnMtdmlldyc7XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7VHV0b3JzU2VsZWN0fSBmcm9tICcuLi90dXRvcnMtc2VsZWN0L3R1dG9ycy1zZWxlY3QnO1xyXG5pbXBvcnQge0tTVGVybVBsYW5uZXJ9IGZyb20gJy4uL2tzLXRlcm1wbGFubmVyL3Rlcm1wbGFubmVyJztcclxuaW1wb3J0IHsgS0dUZXJtUGxhbm5lclR1dG9yZWQgfSBmcm9tICcuLi9rZy10ZXJtcGxhbm5lci9rZy10ZXJtcGxhbm5lci10dXRvcmVkJztcclxuaW1wb3J0IHsgV2Vla1BsYW5uZXJUdXRvcmVkIH0gZnJvbSAnLi4vd2Vla3BsYW5uZXIvd2Vla3BsYW5uZXItdHV0b3JlZCc7XHJcbmltcG9ydCB7IENhbGVuZGFyIH0gZnJvbSAnLi4vY2FsZW5kYXInO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IFdlZWtQbGFubmVyIH0gZnJvbSAnLi4vd2Vla3BsYW5uZXInO1xyXG5pbXBvcnQgeyBUdXRvcmFibGVDb21wb25lbnQgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvdHV0b3JhYmxlLWNvbXBvbmVudCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG5cclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUdXRvcnNWaWV3VGVzdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcclxuICByZW5kZXIoKSB7XHJcbiAgICByZXR1cm4gPGRpdj5cclxuICAgICAgPFR1dG9yc1NlbGVjdCAvPlxyXG4gICAgICA8VHV0b3JhYmxlQ29tcG9uZW50XHJcbiAgICAgICAgdHV0b3JlZD17dHJ1ZX1cclxuICAgICAgICBjcmVhdGVDb21wb25lbnQ9e2VudiA9PlxyXG4gICAgICAgICAgPEtTVGVybVBsYW5uZXJcclxuICAgICAgICAgICAga2V5PXtlbnYuY3VycmVudFVzZXIubWFpbH1cclxuICAgICAgICAgICAgZW52PXtlbnZ9XHJcbiAgICAgICAgICAgIHR1dG9yZWQ9e3RydWV9XHJcbiAgICAgICAgICAgIGluaXRpYWxEYXRlPXtuZXcgRGF0ZSgpfSAvPlxyXG4gICAgICAgIH1cclxuICAgICAgLz5cclxuICAgICAgPEtHVGVybVBsYW5uZXJUdXRvcmVkIC8+XHJcbiAgICAgIDxUdXRvcmFibGVDb21wb25lbnRcclxuICAgICAgICAgICAgICB0dXRvcmVkPXt0cnVlfVxyXG4gICAgICAgICAgICAgIGNyZWF0ZUNvbXBvbmVudD17ZW52ID0+XHJcbiAgICAgICAgICAgICAgICA8V2Vla1BsYW5uZXJcclxuICAgICAgICAgICAgICAgICAga2V5PXtlbnYuY3VycmVudFVzZXIubWFpbH1cclxuICAgICAgICAgICAgICAgICAgZW52PXtlbnZ9XHJcbiAgICAgICAgICAgICAgICAgIHZpZXdDb3Vyc2VVcmw9XCJodHRwczovL3d3dy5zdnQuc2VcIi8+XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgIDxUdXRvcmFibGVDb21wb25lbnRcclxuICAgICAgdHV0b3JlZD17dHJ1ZX1cclxuICAgICAgY3JlYXRlQ29tcG9uZW50PXtlbnYgPT5cclxuICAgICAgICA8Q2FsZW5kYXJcclxuICAgICAgICBlbnYgPSB7ZW52fVxyXG4gICAgICAgIGZpcnN0RGF5ID0ge21vbWVudCgpLnN0YXJ0T2YoJ3dlZWsnKS53ZWVrZGF5KDEpfVxyXG4gICAgICAgIGluaXRpYWxTdGFydEhvdXI9ezd9XHJcbiAgICAgICAgaW5pdGlhbEVuZEhvdXI9ezE4fVxyXG4gICAgICAgIGluaXRpYWxab29tPXswLjc1fVxyXG4gICAgICAgIG51bURheXM9ezV9XHJcbiAgICAgICAgIC8+XHJcbiAgICAgIH1cclxuICAgIC8+XHJcbiAgICA8L2Rpdj47XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuZXhwb3J0IGNvbnN0IExhbmd1YWdlQ29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQoe2ludGw6IG51bGx9KTsiLCJpbXBvcnQge0ludGxQcm92aWRlciwgYWRkTG9jYWxlRGF0YX0gZnJvbSAncmVhY3QtaW50bCc7XHJcbmltcG9ydCBsb2NhbGVfZW4gZnJvbSAncmVhY3QtaW50bC9sb2NhbGUtZGF0YS9lbic7XHJcbmltcG9ydCBsb2NhbGVfc3YgZnJvbSAncmVhY3QtaW50bC9sb2NhbGUtZGF0YS9zdic7XHJcbmltcG9ydCBtZXNzYWdlc19zdiBmcm9tIFwiLi4vLi4vdHJhbnNsYXRpb25zL3N2Lmpzb25cIjtcclxuaW1wb3J0IG1lc3NhZ2VzX2VuIGZyb20gXCIuLi8uLi90cmFuc2xhdGlvbnMvZW4uanNvblwiO1xyXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBjZmcgZnJvbSAnLi4vLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5cclxuZXhwb3J0IGNvbnN0IHNldHVwSW50bCA9IDxQIGV4dGVuZHMgb2JqZWN0PihDb21wb25lbnQ6IFJlYWN0LkNvbXBvbmVudFR5cGU8UD4pID0+XHJcbiAgICBjbGFzcyBfU2V0dXBMYW5ndWFnZUludGwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UD57XHJcbiAgICAgICAgbWVzc2FnZXMgOiBvYmplY3Q7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKHByb3BzKXtcclxuICAgICAgICAgICAgc3VwZXIocHJvcHMpO1xyXG4gICAgICAgICAgICBhZGRMb2NhbGVEYXRhKFsuLi5sb2NhbGVfZW4sLi4ubG9jYWxlX3N2XSk7XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZXMgPSB7XHJcbiAgICAgICAgICAgICdzdic6IG1lc3NhZ2VzX3N2LFxyXG4gICAgICAgICAgICAnZW4nOiBtZXNzYWdlc19lblxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBtb21lbnQoKS5sb2NhbGUoY2ZnLktFRF9MT0NBTEUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVuZGVyKCl7XHJcbiAgICAgICAgICAgIHJldHVybiA8SW50bFByb3ZpZGVyIGxvY2FsZT17Y2ZnLktFRF9MT0NBTEV9IG1lc3NhZ2VzPXt0aGlzLm1lc3NhZ2VzW2NmZy5LRURfTE9DQUxFXX0+XHJcbiAgICAgICAgICAgICAgICA8Q29tcG9uZW50IHsuLi50aGlzLnByb3BzIGFzIFB9IC8+XHJcbiAgICAgICAgICAgIDwvSW50bFByb3ZpZGVyPlxyXG4gICAgICAgIH1cclxuICAgIH0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcblxyXG5pbnRlcmZhY2UgQ0VQcm9wcyB7XHJcbiAgICB0ZXh0OiBzdHJpbmc7IC8vIFRleHQgdG8gYmUgc2hvd24gaW4gZmllbGRcclxuICAgIHRhZz86ICd0ZCcgfCAndGgnIHwgJ2RpdicgfCAnc3BhbicgfCAncCcgfCAnaDEnIHwgJ2gyJyB8ICdoMyc7IC8vIGFsbG93ZCB0YWdzIC0tIHNob3VsZCB3ZSBhZGQgbW9yZT9cclxuICAgIG9uQ2hhbmdlOiAobmV3TmFtZTogc3RyaW5nKSA9PiB2b2lkO1xyXG4gICAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7IC8vIElmIHRleHQgaXMgZW1wdHksIHRoaXMgd2lsbCBiZSB0aGUgcGxhY2Vob2xkZXJcclxuICAgIG1heENoYXJzPzogbnVtYmVyO1xyXG4gICAgcmVhZE9ubHk/OiBib29sZWFuO1xyXG4gICAgY2xhc3NOYW1lPzogc3RyaW5nO1xyXG4gICAgcGxhY2VIb2xkZXI/OiBzdHJpbmc7XHJcblxyXG4gICAgdmFsaWRhdGVWYWx1ZT86IFJlZ0V4cDtcclxuXHJcbiAgICAvLyBGb3IgbmF2aWdhdGlvblxyXG4gICAgYWxsb3dOYXZpZ2F0aW9uPzogYm9vbGVhbjsgLy8gdG8gYWN0aXZhdGUgbmF2aWdhdGlvblxyXG4gICAgb25OYXZpZ2F0ZT86IChkaXJlY3Rpb246IHN0cmluZykgPT4gdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvbnRlbnRFZGl0YWJsZUZpZWxkIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxDRVByb3BzPiB7XHJcbiAgICBteXNlbGY6IFJlYWN0LlJlZk9iamVjdDxhbnk+O1xyXG4gICAgcHJvcGFnYXRlZE9uQ2hhbmdlOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJvcHM6IENFUHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy5teXNlbGYgPSBSZWFjdC5jcmVhdGVSZWY8SFRNTEVsZW1lbnQ+KCk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgdGV4dDogcHJvcHMudGV4dCB8fCAnJ1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgY29uc3Qge3RhZywgdGV4dCwgcmVhZE9ubHl9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBjb25zdCBUYWdUeXBlID0gdGFnO1xyXG4gICAgICAgIHJldHVybiA8VGFnVHlwZVxyXG4gICAgICAgICAgICBjb250ZW50RWRpdGFibGU9eyFyZWFkT25seX1cclxuICAgICAgICAgICAgZGF0YS1wbGFjZWhvbGRlcj17dGhpcy5wcm9wcy5wbGFjZWhvbGRlcn1cclxuICAgICAgICAgICAgcmVmPXt0aGlzLm15c2VsZn1cclxuICAgICAgICAgICAgY2xhc3NOYW1lPXt0aGlzLnByb3BzLmNsYXNzTmFtZX1cclxuICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25DaGFuZ2UuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgb25LZXlEb3duPXt0aGlzLm9uS2V5RG93bi5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICBvbktleVVwPXt0aGlzLm9uS2V5VXAuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgb25CbHVyPXt0aGlzLm9uQmx1ci5iaW5kKHRoaXMpfVxyXG4gICAgICAgICAgICBvblBhc3RlPXt0aGlzLm9uUGFzdGUuYmluZCh0aGlzKX1cclxuICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IHRleHR9fSAvPlxyXG4gICAgfVxyXG5cclxuICAgIG9uQ2hhbmdlKGU6IEV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHRleHQ6IHRoaXMubXlzZWxmLmN1cnJlbnQuaW5uZXJUZXh0IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGFrZSBhY3Rpb24gZGVwZW5kaW5nIG9uIGtleS1ldmVudFxyXG4gICAgICogQHBhcmFtIGUgZXZlbnQgZnJvbSBmaWVsZFxyXG4gICAgICogXHJcbiAgICAgKiBJZiBhbGxvd05hdmlnYXRpb24gdGhlbiBsaXN0ZW4gdG8gYXJyb3cta2V5c1xyXG4gICAgICogTGltaXRzIHRvIG1heENoYXJzXHJcbiAgICAgKi9cclxuICAgIG9uS2V5RG93bihlOiBLZXlib2FyZEV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgdGV4dCA9IHRoaXMubXlzZWxmLmN1cnJlbnQuaW5uZXJUZXh0O1xyXG4gICAgICAgIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgICAgICAgdGhpcy5teXNlbGYuY3VycmVudC5pbm5lclRleHQgPSB0aGlzLnByb3BzLnRleHQgfHwgXCJcIjtcclxuICAgICAgICAgICAgdGhpcy5teXNlbGYuY3VycmVudC5ibHVyKCk7XHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmKGUua2V5ID09PSAnRW50ZXInKXtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLm5hdmlnYXRlKHRleHQsICdkb3duJyk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ1RhYicpIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9wYWdhdGVPbkNoYW5nZSh0ZXh0KTtcclxuICAgICAgICB9ICBlbHNlIGlmKHRleHQubGVuZ3RoID49IHRoaXMucHJvcHMubWF4Q2hhcnMgJiYgKFxyXG4gICAgICAgICAgICAvXltcXGRcXHdcXHNdJC8udGVzdChlLmtleSkgJiYgIShlLm1ldGFLZXkgfHwgZS5jdHJsS2V5KVxyXG4gICAgICAgICkpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5hbGxvd05hdmlnYXRpb24gPT09IHRydWUpIHtcclxuICAgICAgICAgICAgY29uc3QgbmF2RGlyID0gZS5rZXkuc3RhcnRzV2l0aCgnQXJyb3cnKSA/IGUua2V5LnJlcGxhY2UoJ0Fycm93JywgJycpLnRvTG93ZXJDYXNlKCkgOiBmYWxzZTtcclxuICAgICAgICAgICAgY29uc3QgY2FyZXQgPSBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKS5nZXRSYW5nZUF0KDApLmVuZE9mZnNldDsgLy8gb25seSB3b3JrcyBmb3IgcGxhaW50ZXh0XHJcbiAgICAgICAgICAgIGlmIChuYXZEaXIgJiYgdGV4dC5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZSh0ZXh0LCBuYXZEaXIpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5hdkRpciAmJiAobmF2RGlyID09ICd1cCcgfHwgbmF2RGlyID09ICdkb3duJykpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGUodGV4dCwgbmF2RGlyKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChuYXZEaXIgJiYgKFxyXG4gICAgICAgICAgICAgICAgKG5hdkRpciA9PSAnbGVmdCcgJiYgY2FyZXQgPT0gMCkgfHxcclxuICAgICAgICAgICAgICAgIChuYXZEaXIgPT0gJ3JpZ2h0JyAmJiBjYXJldCA9PSB0ZXh0Lmxlbmd0aClcclxuICAgICAgICAgICAgKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZSh0ZXh0LCBuYXZEaXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gZSBldmVudCBmcm9tIGZpZWxkXHJcbiAgICAgKiBTb2xlbHkgdXNlZCB0byBoYW5kZSB2YWxpZGF0aW9ucy1pc3N1ZXNcclxuICAgICAqL1xyXG4gICAgb25LZXlVcChlOiBLZXlib2FyZEV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgdGV4dCA9IHRoaXMubXlzZWxmLmN1cnJlbnQuaW5uZXJUZXh0O1xyXG4gICAgICAgIGlmICh0aGlzLnByb3BzLnZhbGlkYXRlVmFsdWUgIT09IHVuZGVmaW5lZCAmJiAhdGhpcy5wcm9wcy52YWxpZGF0ZVZhbHVlLnRlc3QodGV4dCkpIHtcclxuICAgICAgICAgICAgdGhpcy5teXNlbGYuY3VycmVudC5pbm5lclRleHQgPSB0aGlzLnByb3BzLnRleHQgfHwgXCJcIjtcclxuICAgICAgICAgICAgdGhpcy5teXNlbGYuY3VycmVudC5ibHVyKCk7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgdmFsdWUgYW5kIHBhc3MgdG8gcGFyZW50cyBuYXZpZ2F0ZS1mdW5jaXRvblxyXG4gICAgICogQHBhcmFtIHRleHQgXHJcbiAgICAgKiBAcGFyYW0gZGlyZWN0aW9uIFxyXG4gICAgICovXHJcbiAgICBuYXZpZ2F0ZSh0ZXh0OiBzdHJpbmcsIGRpcmVjdGlvbjogc3RyaW5nKSB7XHJcbiAgICAgICAgLy8gZmlyc3QgdXBkYXRlIGNlbGxcclxuICAgICAgICB0aGlzLnByb3BhZ2F0ZU9uQ2hhbmdlKHRleHQpO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyB0ZXh0OiB0ZXh0fSApO1xyXG4gICAgICAgIC8vIHRoZW4gbmF2aWdhdGUgYXdheVxyXG4gICAgICAgIHRoaXMucHJvcHMub25OYXZpZ2F0ZShkaXJlY3Rpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWFrZSBzdXJlIHBhc3RlZCB0ZXh0IGlzIHB1cmUgdGV4dFxyXG4gICAgICogQHBhcmFtIGUgdGhlIHBhc2V0IGV2ZW50XHJcbiAgICAgKi9cclxuICAgIG9uUGFzdGUoZTogQ2xpcGJvYXJkRXZlbnQpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgY29uc3QgdGV4dCA9IChlLmNsaXBib2FyZERhdGEgJiYgZS5jbGlwYm9hcmREYXRhLmdldERhdGEpPyAgZS5jbGlwYm9hcmREYXRhLmdldERhdGEoXCJ0ZXh0L3BsYWluXCIpIDogJyc7XHJcbiAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoXCJpbnNlcnRIVE1MXCIsIGZhbHNlLCB0ZXh0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSB2YWx1ZSBvbiBleGl0IGZyb20gZmllbGRcclxuICAgICAqIEBwYXJhbSBlIFxyXG4gICAgICovXHJcbiAgICBvbkJsdXIoZTogRXZlbnQpIHtcclxuICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5teXNlbGYuY3VycmVudC5pbm5lclRleHQ7XHJcbiAgICAgICAgdGhpcy5wcm9wYWdhdGVPbkNoYW5nZSh0ZXh0KTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgdGV4dDogdGV4dCB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE9ubHkgdXBkYXRlIHZhbHVlIGlmIGl0IGhhcyBjaGFuZ2VkXHJcbiAgICAgKiBAcGFyYW0gbmV3VmFsdWUgXHJcbiAgICAgKi9cclxuICAgIHByb3BhZ2F0ZU9uQ2hhbmdlKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvcGFnYXRlZE9uQ2hhbmdlICE9IG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvcGFnYXRlZE9uQ2hhbmdlID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25DaGFuZ2UobmV3VmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgUmVtb3ZlSXRlbSB9IGZyb20gJy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3JlbW92ZS1pdGVtJztcclxuaW1wb3J0IHsgZmluZERPTU5vZGUgfSBmcm9tICdyZWFjdC1kb20nO1xyXG5pbXBvcnQgJCBmcm9tICdqcXVlcnknO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBkaWFsb2dzOiBSZWFjdC5Db21wb25lbnRbXTtcclxuICBwb3BEaWFsb2c6ICgpPT52b2lkO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRGlhbG9ncyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcz4ge1xyXG4gIGxhc3REaXY6IEhUTUxEaXZFbGVtZW50IHwgbnVsbDtcclxuXHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBQcm9wcykge1xyXG4gICAgaWYgKHRoaXMubGFzdERpdiAhPT0gbnVsbCAmJiBwcmV2UHJvcHMuZGlhbG9ncy5sZW5ndGggPiB0aGlzLnByb3BzLmRpYWxvZ3MubGVuZ3RoKSB7XHJcbiAgICAgIC8vIEEgZGlhbG9nIHdhcyBjbG9zZWQuIE5vdyBmb2N1cyB0aGUgbGFzdCBkaWFsb2c6XHJcbiAgICAgICQoZmluZERPTU5vZGUodGhpcy5sYXN0RGl2KSkuZmluZCgnOmlucHV0JykuZmlyc3QoKS5mb2N1cygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyICgpIHtcclxuICAgIHRoaXMubGFzdERpdiA9IG51bGw7XHJcbiAgICBjb25zdCB7ZGlhbG9ncywgcG9wRGlhbG9nfSA9IHRoaXMucHJvcHM7XHJcbiAgICAkKCdib2R5JykuYXR0cignYXJpYS1kaXNhYmxlZCcsIGRpYWxvZ3MubGVuZ3RoID4gMCk7XHJcbiAgICAkKCdib2R5JykuY3NzKCdvdmVyZmxvdycsIGRpYWxvZ3MubGVuZ3RoID4gMCA/ICdoaWRkZW4nIDogJ2F1dG8nKTtcclxuXHJcbiAgICByZXR1cm4gZGlhbG9ncy5sZW5ndGggPiAwICYmIDxkaXY+XHJcbiAgICAgIHtkaWFsb2dzLm1hcCgoZGlhbG9nLCBpZHgpID0+IHtcclxuICAgICAgICBsZXQgZGl2OiBIVE1MRGl2RWxlbWVudDtcclxuICAgICAgICBmdW5jdGlvbiBvbktleVByZXNzKGV2OiBSZWFjdC5LZXlib2FyZEV2ZW50PEhUTUxEaXZFbGVtZW50Pikge1xyXG4gICAgICAgICAgaWYgKGV2LndoaWNoID09PSAxMyAmJiAoIWV2LnRhcmdldCB8fCAoZXYudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS50YWdOYW1lICE9PSAnVEVYVEFSRUEnKSkge1xyXG4gICAgICAgICAgICAkKGZpbmRET01Ob2RlKGRpdikpLmZpbmQoJy5idG4tZGVmYXVsdCcpLmNsaWNrKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gb25LZXlEb3duKGV2KSB7XHJcbiAgICAgICAgICBpZiAoZXYud2hpY2ggPT09IDI3KSB7IC8vIEVzY2FwZVxyXG4gICAgICAgICAgICBwb3BEaWFsb2coKTtcclxuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmIChldi53aGljaCA9PT0gODMgJiYgKGV2LmN0cmxLZXkgfHwgZXYubWV0YUtleSkpIHsgLy8gQ1RSTC1TXHJcbiAgICAgICAgICAgIGNvbnN0IGRvbU5vZGUgPSBmaW5kRE9NTm9kZShkaXYpO1xyXG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0QnV0dG9uID0gJChkb21Ob2RlKS5maW5kKCcuYnRuLWRlZmF1bHQnKTtcclxuICAgICAgICAgICAgZGVmYXVsdEJ1dHRvbi5jbGljaygpO1xyXG4gICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIDxkaXYga2V5PXtpZHh9PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImRhcmtlblwiIC8+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kYWwtcGFnZS13cmFwXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb2RhbC1wYWdlXCIgcmVmPXtlbGVtID0+IHtcclxuICAgICAgICAgIGRpdiA9IGVsZW07XHJcbiAgICAgICAgICBpZiAoaWR4ID09PSBkaWFsb2dzLmxlbmd0aCAtIDEpIHRoaXMubGFzdERpdiA9IGVsZW07XHJcbiAgICAgICAgfX1cclxuICAgICAgICAgICAgdGFiSW5kZXg9ezB9XHJcbiAgICAgICAgICAgIGFyaWEtZGlzYWJsZWQ9e2lkeCA8IGRpYWxvZ3MubGVuZ3RoIC0gMX1cclxuICAgICAgICAgICAgb25LZXlQcmVzcz17b25LZXlQcmVzc31cclxuICAgICAgICAgICAgb25LZXlEb3duPXtvbktleURvd259PlxyXG4gICAgICAgICAge2RpYWxvZ31cclxuICAgICAgICAgIDxSZW1vdmVJdGVtIG9uQ2xpY2s9e3BvcERpYWxvZ30gLz5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3RvcEZsb2F0c1wiPjwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2Pn0pfVxyXG4gIDwvZGl2PjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBGb3JtRmllbGQgfSBmcm9tICcuL2Zvcm0tZmllbGQnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBsYWJlbDogYW55O1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgdmFsdWU6IHN0cmluZztcclxuICBwbGFjZWhvbGRlcj86IHN0cmluZztcclxuICBhdXRvRm9jdXM/OiBib29sZWFuO1xyXG4gIG9uQ2hhbmdlOiAodmFsdWU6IHN0cmluZykgPT4gdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRleHRJbnB1dCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcz4ge1xyXG4gIGNvbnN0cnVjdG9yIChwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxGb3JtRmllbGQgbGFiZWw9e3RoaXMucHJvcHMubGFiZWx9PlxyXG4gICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGF1dG9Gb2N1cz17dGhpcy5wcm9wcy5hdXRvRm9jdXN9IGlkPXt0aGlzLnByb3BzLmlkfSBzaXplPXszNX0gdmFsdWU9e3RoaXMucHJvcHMudmFsdWV9XHJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2V2ID0+IHRoaXMucHJvcHMub25DaGFuZ2UoZXYudGFyZ2V0LnZhbHVlKX1cclxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dGhpcy5wcm9wcy5wbGFjZWhvbGRlcn0gLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICA8L0Zvcm1GaWVsZD5cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEZvcm1GaWVsZCB9IGZyb20gJy4vZm9ybS1maWVsZCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGxhYmVsOiBhbnk7XHJcbiAgaWQ6IHN0cmluZztcclxuICB2YWx1ZTogc3RyaW5nO1xyXG4gIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xyXG4gIGF1dG9Gb2N1cz86IGJvb2xlYW47XHJcbiAgcm93cz86IG51bWJlcjtcclxuICBjaGlsZHJlbj87XHJcbiAgb25DaGFuZ2U6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVGV4dEFyZWFGb3JtRmllbGQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHM+IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8Rm9ybUZpZWxkIGxhYmVsPXt0aGlzLnByb3BzLmxhYmVsfSBpZD17dGhpcy5wcm9wcy5pZH0+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICA8dGV4dGFyZWEgYXV0b0ZvY3VzPXt0aGlzLnByb3BzLmF1dG9Gb2N1c30gaWQ9e3RoaXMucHJvcHMuaWR9IGNvbHM9ezM1fSByb3dzPXt0aGlzLnByb3BzLnJvd3MgfHwgNX0gdmFsdWU9e3RoaXMucHJvcHMudmFsdWV9XHJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2V2ID0+IHRoaXMucHJvcHMub25DaGFuZ2UoZXYudGFyZ2V0LnZhbHVlKX1cclxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17dGhpcy5wcm9wcy5wbGFjZWhvbGRlcn0gLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgeyEhdGhpcy5wcm9wcy5jaGlsZHJlbiAmJiA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtXCI+XHJcbiAgICAgICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxyXG4gICAgICAgICAgPC9kaXY+fVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L0Zvcm1GaWVsZD5cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGxhYmVsOiBhbnk7XHJcbiAgY2hpbGRyZW46IGFueTtcclxuICBpZD86IHN0cmluZztcclxufVxyXG5cclxuZnVuY3Rpb24gZmluZElkKG5vZGUpIHtcclxuICBjb25zdCByZWN1Y2hlY2sgPSBuZXcgU2V0KCk7XHJcbiAgcmV0dXJuIChmdW5jdGlvbiBmaW5kSWQobm9kZSl7XHJcbiAgICBpZiAodHlwZW9mIG5vZGUgPT09ICdzdHJpbmcnKSByZXR1cm4gbnVsbDtcclxuICAgIGlmIChyZWN1Y2hlY2suaGFzKG5vZGUpKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHJlY3VjaGVjay5hZGQobm9kZSk7XHJcbiAgICBpZiAobm9kZS5wcm9wcykge1xyXG4gICAgICBpZiAobm9kZS5wcm9wcy5pZCkgcmV0dXJuIG5vZGUucHJvcHMuaWQ7XHJcbiAgICAgIGlmIChub2RlLnByb3BzLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgcmV0dXJuIGZpbmRJZChub2RlLnByb3BzLmNoaWxkcmVuKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAobm9kZS5sZW5ndGgpIHtcclxuICAgICAgZm9yIChsZXQgaT0wO2k8bm9kZS5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIGNvbnN0IGNoaWxkID0gbm9kZVtpXTtcclxuICAgICAgICBpZiAoY2hpbGQpIHtcclxuICAgICAgICAgIGNvbnN0IGNoaWxkSWQgPSBmaW5kSWQoY2hpbGQpO1xyXG4gICAgICAgICAgaWYgKGNoaWxkSWQpIHJldHVybiBjaGlsZElkO1xyXG4gICAgICAgICAgLy9jb25zb2xlLmxvZyhjaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSkobm9kZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBGb3JtRmllbGQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHM+IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICByZXR1cm4gPD5cclxuICAgICAgICA8bGFiZWwgY2xhc3NOYW1lPVwia2NsYWJlbFwiIGh0bWxGb3I9e3RoaXMucHJvcHMuaWQgfHwgZmluZElkKHRoaXMucHJvcHMuY2hpbGRyZW4pfT57dGhpcy5wcm9wcy5sYWJlbH08L2xhYmVsPlxyXG4gICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxyXG4gICAgPC8+XHJcbiAgfVxyXG59XHJcbiIsIi8qIFJFRkFDVE9SOiBNb3ZlIHRoaXMgY29tcG9uZW50IG91dHNpZGUgY291cnNlYnVpbGRlciFcclxuICAgVGhpcyBpcyBhIGdlbmVyYWwtcHVycG9zZSBjb21wb25lbnRcclxuKi9cclxuXHJcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgR29hbFByb2dyZXNzIH0gZnJvbSAnLi4vY2hhcnRzL2dvYWwtcHJvZ3Jlc3MnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICB0aXRsZTogc3RyaW5nIHwgSlNYLkVsZW1lbnQ7XHJcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xyXG4gIGhlYWRlckNsYXNzTmFtZT86IHN0cmluZztcclxuICBjb250ZW50Q2xhc3NOYW1lPzogc3RyaW5nO1xyXG4gIGhlYWRlck9wZW4/OiBib29sZWFuO1xyXG4gIGluYWN0aXZhdGVkPzogYm9vbGVhbjtcclxuICBpbmFjdGl2YXRlZFJlbmRlcj86ICdjaGlsZHJlbicgfCAndGl0bGVBbmRDaGlsZHJlbic7XHJcbiAgb25PcGVuQ2xvc2U/OiAoYmVjYW1lT3BlbjogYm9vbGVhbikgPT4gdm9pZDtcclxuICBkaXNwbGF5UHJvZ3Jlc3M/OiBib29sZWFuO1xyXG4gIHByb2dyZXNzRGF0YT86IHtjb21wbGV0ZWROdW1iZXJPZlRhc2tzOiBudW1iZXIsIG51bWJlck9mVGFza3M6IG51bWJlcn07XHJcbiAgY2hpbGRyZW47XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgaGVhZGVyT3BlbjogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIE9wZW5DbG9zZUJveCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgaGVhZGVyT3BlbjogcHJvcHMuaGVhZGVyT3BlbiB8fCBmYWxzZVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgKG5leHRQcm9wczogUHJvcHMpIHtcclxuICAgIGlmIChuZXh0UHJvcHMuaGVhZGVyT3BlbiAhPT0gdGhpcy5wcm9wcy5oZWFkZXJPcGVuKSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2hlYWRlck9wZW46IG5leHRQcm9wcy5oZWFkZXJPcGVufSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7IHRpdGxlLCBjbGFzc05hbWUsIGNoaWxkcmVuLCBoZWFkZXJDbGFzc05hbWUsIGNvbnRlbnRDbGFzc05hbWUsIGRpc3BsYXlQcm9ncmVzcywgcHJvZ3Jlc3NEYXRhLFxyXG4gICAgICBpbmFjdGl2YXRlZCwgaW5hY3RpdmF0ZWRSZW5kZXIgfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCB7IGhlYWRlck9wZW4gfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgaWYgKGluYWN0aXZhdGVkKSByZXR1cm4gaW5hY3RpdmF0ZWRSZW5kZXIgPT09ICd0aXRsZUFuZENoaWxkcmVuJyA/IDw+XHJcbiAgICAgIDw+e3RpdGxlfTwvPlxyXG4gICAgICA8PntjaGlsZHJlbn08Lz5cclxuICAgIDwvPiA6IDw+XHJcbiAgICAgIHtjaGlsZHJlbn1cclxuICAgIDwvPjtcclxuXHJcbiAgICAvL3ZhciBjdXJyZW50UHJvZ3Jlc3NEYXRhID0gLy9wcm9ncmVzc0RhdGEoKTtcclxuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT17KGNsYXNzTmFtZXx8JycpICsgXCIgb3BlbkNsb3NlXCIgKyAoaGVhZGVyT3BlbiA/IFwiIG9wZW5cIiA6IFwiXCIpfT5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9e1wib3BlbkhlYWRlclwiICsgKGhlYWRlckNsYXNzTmFtZSA/IFwiIFwiICsgaGVhZGVyQ2xhc3NOYW1lIDogXCJcIil9XHJcbiAgICAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgaWYgKHRoaXMucHJvcHMub25PcGVuQ2xvc2UpIHRoaXMucHJvcHMub25PcGVuQ2xvc2UoIXRoaXMuc3RhdGUuaGVhZGVyT3Blbik7XHJcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgaGVhZGVyT3BlbjogIXRoaXMuc3RhdGUuaGVhZGVyT3BlbiB9KTtcclxuICAgICAgICB9fSA+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJvcGVuSGVhZGVyQ29udGFpbmVyXCI+XHJcbiAgICAgICAgICA8ZGl2Pnt0aXRsZX08L2Rpdj5cclxuICAgICAgICAgIHtkaXNwbGF5UHJvZ3Jlc3MgJiYgPEdvYWxQcm9ncmVzcyB7Li4ucHJvZ3Jlc3NEYXRhfS8+fVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9e1wib3BlbkNvbnRlbnRcIiArIChjb250ZW50Q2xhc3NOYW1lID8gXCIgXCIgKyBjb250ZW50Q2xhc3NOYW1lIDogXCJcIil9PlxyXG4gICAgICAgIHtjaGlsZHJlbn1cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj47XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IGN1cnJlbnRVc2VyRW52LCB7IEVudiB9IGZyb20gJy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB0dXRvckVudiBmcm9tICcuLi8uLi9nbG9iYWxzL0tFRC50dXRvckVudic7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHR1dG9yZWQ6IGJvb2xlYW47XHJcbiAgY3JlYXRlQ29tcG9uZW50OiAoZW52OiBFbnYpPT5SZWFjdC5SZWFjdE5vZGVcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBlbnY6IEVudjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFR1dG9yYWJsZUNvbXBvbmVudCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMub25FbnZVcGRhdGVkID0gdGhpcy5vbkVudlVwZGF0ZWQuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGVudjogcHJvcHMudHV0b3JlZCA/IG51bGwgOiBjdXJyZW50VXNlckVudlxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICBpZiAodGhpcy5wcm9wcy50dXRvcmVkKSB7XHJcbiAgICAgIHR1dG9yRW52LnN1YnNjcmliZSh0aGlzLm9uRW52VXBkYXRlZCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgIGlmICh0aGlzLnByb3BzLnR1dG9yZWQpIHtcclxuICAgICAgdHV0b3JFbnYudW5zdWJzY3JpYmUodGhpcy5vbkVudlVwZGF0ZWQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25FbnZVcGRhdGVkKGVudjogRW52KSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtlbnZ9KTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHtlbnZ9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGlmICghZW52KSByZXR1cm4gPGRpdj48L2Rpdj47XHJcbiAgICBpZiAoIWVudi5rZWRCYWNrZW5kQ2xpZW50KSB7XHJcbiAgICAgIHJldHVybiA8ZGl2PkxhZGRhci4uLjwvZGl2PjtcclxuICAgIH1cclxuICAgIC8vY29uc3Qge2N1cnJlbnRVc2VyLCBlZHNDbGllbnQsIGtlZEJhY2tlbmRDbGllbnQsIGtnVGVybVBsYW5uZXJSZXBvfSA9IGVudjtcclxuICAgIC8vY29uc3Qge3R1dG9yZWR9ID0gdGhpcy5wcm9wcztcclxuICAgIHJldHVybiB0aGlzLnByb3BzLmNyZWF0ZUNvbXBvbmVudChlbnYpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgZXhlYyBmcm9tICcuL2V4ZWMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gIGJvbGQ6IHtcclxuICAgIGljb246ICc8Yj5GPC9iPicsXHJcbiAgICB0aXRsZTogJ0ZldHN0aWwnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdib2xkJylcclxuICB9LFxyXG4gIGl0YWxpYzoge1xyXG4gICAgaWNvbjogJzxpPks8L2k+JyxcclxuICAgIHRpdGxlOiAnS3Vyc2l2JyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnaXRhbGljJylcclxuICB9LFxyXG4gIHVuZGVybGluZToge1xyXG4gICAgaWNvbjogJzx1PlU8L3U+JyxcclxuICAgIHRpdGxlOiAnVW5kZXJzdHJ1a2VuJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygndW5kZXJsaW5lJylcclxuICB9LFxyXG4gIHN0cmlrZXRocm91Z2g6IHtcclxuICAgIGljb246ICc8c3RyaWtlPlM8L3N0cmlrZT4nLFxyXG4gICAgdGl0bGU6ICdTdHJ1a2VuJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnc3RyaWtlVGhyb3VnaCcpXHJcbiAgfSxcclxuICBoZWFkaW5nMToge1xyXG4gICAgaWNvbjogJzxiPkg8c3ViPjE8L3N1Yj48L2I+JyxcclxuICAgIHRpdGxlOiAnUnVicmlrIDEnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8SDE+JylcclxuICB9LFxyXG4gIGhlYWRpbmcyOiB7XHJcbiAgICBpY29uOiAnPGI+SDxzdWI+Mjwvc3ViPjwvYj4nLFxyXG4gICAgdGl0bGU6ICdSdWJyaWsgMicsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxIMj4nKVxyXG4gIH0sXHJcbiAgaGVhZGluZzM6IHtcclxuICAgIGljb246ICc8Yj5IPHN1Yj4zPC9zdWI+PC9iPicsXHJcbiAgICB0aXRsZTogJ1J1YnJpayAzJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnZm9ybWF0QmxvY2snLCAnPEgzPicpXHJcbiAgfSxcclxuICBwYXJhZ3JhcGg6IHtcclxuICAgIGljb246ICcmIzE4MjsnLFxyXG4gICAgdGl0bGU6ICdQYXJhZ3JhZicsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxQPicpXHJcbiAgfSxcclxuICBxdW90ZToge1xyXG4gICAgaWNvbjogJyYjODIyMDsgJiM4MjIxOycsXHJcbiAgICB0aXRsZTogJ0NpdGF0JyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnZm9ybWF0QmxvY2snLCAnPEJMT0NLUVVPVEU+JylcclxuICB9LFxyXG4gIG9saXN0OiB7XHJcbiAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1saXN0LW9sXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPicsXHJcbiAgICB0aXRsZTogJ09yZG5hZCBsaXN0YScsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2luc2VydE9yZGVyZWRMaXN0JylcclxuICB9LFxyXG4gIHVsaXN0OiB7XHJcbiAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1saXN0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPicsXHJcbiAgICB0aXRsZTogJ1B1bmt0bGlzdGEnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdpbnNlcnRVbm9yZGVyZWRMaXN0JylcclxuICB9LFxyXG4gIG91dGRlbnQ6IHtcclxuICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLW91dGRlbnRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JyxcclxuICAgIHRpdGxlOiAnTWluc2thIGluZHJhZycsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoXCJvdXRkZW50XCIpXHJcbiAgfSxcclxuICBpbmRlbnQ6IHtcclxuICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWluZGVudFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nLFxyXG4gICAgdGl0bGU6ICfDlmthIGluZHJhZycsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoXCJpbmRlbnRcIiksXHJcbiAgfSxcclxuICBjb2RlOiB7XHJcbiAgICBpY29uOiAnJmx0Oy8mZ3Q7JyxcclxuICAgIHRpdGxlOiAnUHJvZ3JhbWtvZCcsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxQUkU+JylcclxuICB9LFxyXG4gIGxpbmU6IHtcclxuICAgIGljb246ICcmIzgyMTM7JyxcclxuICAgIHRpdGxlOiAnVsOlZ3LDpHQgbGluamUnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdpbnNlcnRIb3Jpem9udGFsUnVsZScpXHJcbiAgfSxcclxuICBsaW5rOiB7XHJcbiAgICBpY29uOiAnPGkgY2xhc3M9XCJmYSBmYS1saW5rXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPicsXHJcbiAgICB0aXRsZTogJ0luZm9nYSBsw6RuaycsXHJcbiAgICByZXN1bHQ6ICgpID0+IHtcclxuICAgICAgY29uc3QgdXJsID0gd2luZG93LnByb21wdCgnQW5nZSBsw6Rua2VucyBVUkwnKVxyXG4gICAgICBpZiAodXJsKSBleGVjKCdjcmVhdGVMaW5rJywgdXJsKVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgaW1hZ2U6IHtcclxuICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLXBpY3R1cmUtb1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nLFxyXG4gICAgdGl0bGU6ICdJbmZvZ2EgYmlsZCcsXHJcbiAgICBwcm9tcHRNc2c6ICdBbmdlIGJpbGRlbnMgVVJMJyxcclxuICAgIHJlc3VsdCAoZXYsIGNvbXBvbmVudCkge1xyXG4gICAgICBjb25zdCB1cmwgPSB3aW5kb3cucHJvbXB0KHRoaXMucHJvbXB0TXNnKTtcclxuICAgICAgaWYgKHVybCkge1xyXG4gICAgICAgIC8vZXhlYygnaW5zZXJ0SW1hZ2UnLCB1cmwpO1xyXG4gICAgICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICAgICAgaW1nLnNyYyA9IHVybDtcclxuICAgICAgICBpbWcudGFiSW5kZXggPSAxO1xyXG4gICAgICAgIGluc2VydEVsZW1lbnQoaW1nKTtcclxuICAgICAgICBpbWcub25mb2N1cyA9IGNvbXBvbmVudC5vbkZvY3VzO1xyXG4gICAgICAgIGltZy5vbmJsdXIgPSBjb21wb25lbnQub25CbHVyO1xyXG4gICAgICAgIGNvbXBvbmVudC5wcm9wcy5vbkNoYW5nZShjb21wb25lbnQuY29udGVudERpdi5pbm5lckhUTUwpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBpbnNlcnRFbGVtZW50KGVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XHJcbiAgICB2YXIgc2VsLCByYW5nZTtcclxuICAgIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uICYmIChzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkpLnJhbmdlQ291bnQpIHtcclxuICAgICAgICByYW5nZSA9IHNlbC5nZXRSYW5nZUF0KDApO1xyXG4gICAgICAgIHJhbmdlLmNvbGxhcHNlKHRydWUpO1xyXG4gICAgICAgIHJhbmdlLmluc2VydE5vZGUoZWxlbWVudCk7XHJcbiAgICAgICAgLy8gTW92ZSB0aGUgY2FyZXQgaW1tZWRpYXRlbHkgYWZ0ZXIgdGhlIGluc2VydGVkIHNwYW5cclxuICAgICAgICByYW5nZS5zZXRTdGFydEFmdGVyKGVsZW1lbnQpO1xyXG4gICAgICAgIHJhbmdlLmNvbGxhcHNlKHRydWUpO1xyXG4gICAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTtcclxuICAgICAgICBzZWwuYWRkUmFuZ2UocmFuZ2UpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBleGVjIGZyb20gJy4vZXhlYyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgYm9sZDoge1xyXG4gICAgaWNvbjogJzxiPkI8L2I+JyxcclxuICAgIHRpdGxlOiAnQm9sZCcsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2JvbGQnKVxyXG4gIH0sXHJcbiAgaXRhbGljOiB7XHJcbiAgICBpY29uOiAnPGk+STwvaT4nLFxyXG4gICAgdGl0bGU6ICdJdGFsaWMnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdpdGFsaWMnKVxyXG4gIH0sXHJcbiAgdW5kZXJsaW5lOiB7XHJcbiAgICBpY29uOiAnPHU+VTwvdT4nLFxyXG4gICAgdGl0bGU6ICdVbmRlcmxpbmUnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCd1bmRlcmxpbmUnKVxyXG4gIH0sXHJcbiAgc3RyaWtldGhyb3VnaDoge1xyXG4gICAgaWNvbjogJzxzdHJpa2U+Uzwvc3RyaWtlPicsXHJcbiAgICB0aXRsZTogJ1N0cmlrZS10aHJvdWdoJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnc3RyaWtlVGhyb3VnaCcpXHJcbiAgfSxcclxuICBoZWFkaW5nMToge1xyXG4gICAgaWNvbjogJzxiPkg8c3ViPjE8L3N1Yj48L2I+JyxcclxuICAgIHRpdGxlOiAnSGVhZGluZyAxJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnZm9ybWF0QmxvY2snLCAnPEgxPicpXHJcbiAgfSxcclxuICBoZWFkaW5nMjoge1xyXG4gICAgaWNvbjogJzxiPkg8c3ViPjI8L3N1Yj48L2I+JyxcclxuICAgIHRpdGxlOiAnSGVhZGluZyAyJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnZm9ybWF0QmxvY2snLCAnPEgyPicpXHJcbiAgfSxcclxuICBoZWFkaW5nMzoge1xyXG4gICAgaWNvbjogJzxiPkg8c3ViPjM8L3N1Yj48L2I+JyxcclxuICAgIHRpdGxlOiAnSGVhZGluZyAzJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnZm9ybWF0QmxvY2snLCAnPEgzPicpXHJcbiAgfSxcclxuICBwYXJhZ3JhcGg6IHtcclxuICAgIGljb246ICcmIzE4MjsnLFxyXG4gICAgdGl0bGU6ICdQYXJhZ3JhcGgnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8UD4nKVxyXG4gIH0sXHJcbiAgcXVvdGU6IHtcclxuICAgIGljb246ICcmIzgyMjA7ICYjODIyMTsnLFxyXG4gICAgdGl0bGU6ICdRdW90ZScsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxCTE9DS1FVT1RFPicpXHJcbiAgfSxcclxuICBvbGlzdDoge1xyXG4gICAgaWNvbjogJyYjMzU7JyxcclxuICAgIHRpdGxlOiAnT3JkZXJlZCBMaXN0JyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnaW5zZXJ0T3JkZXJlZExpc3QnKVxyXG4gIH0sXHJcbiAgdWxpc3Q6IHtcclxuICAgIGljb246ICcmIzgyMjY7JyxcclxuICAgIHRpdGxlOiAnVW5vcmRlcmVkIExpc3QnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdpbnNlcnRVbm9yZGVyZWRMaXN0JylcclxuICB9LFxyXG4gIG91dGRlbnQ6IHtcclxuICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLW91dGRlbnRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JyxcclxuICAgIHRpdGxlOiAnT3V0ZGVudCcsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoXCJvdXRkZW50XCIpXHJcbiAgfSxcclxuICBpbmRlbnQ6IHtcclxuICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWluZGVudFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nLFxyXG4gICAgdGl0bGU6ICdJbmRlbnQnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKFwiaW5kZW50XCIpLFxyXG4gIH0sXHJcbiAgY29kZToge1xyXG4gICAgaWNvbjogJyZsdDsvJmd0OycsXHJcbiAgICB0aXRsZTogJ0NvZGUnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8UFJFPicpXHJcbiAgfSxcclxuICBsaW5lOiB7XHJcbiAgICBpY29uOiAnJiM4MjEzOycsXHJcbiAgICB0aXRsZTogJ0hvcml6b250YWwgTGluZScsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2luc2VydEhvcml6b250YWxSdWxlJylcclxuICB9LFxyXG4gIGxpbms6IHtcclxuICAgIGljb246ICcmIzEyODI3OTsnLFxyXG4gICAgdGl0bGU6ICdMaW5rJyxcclxuICAgIHJlc3VsdDogKCkgPT4ge1xyXG4gICAgICBjb25zdCB1cmwgPSB3aW5kb3cucHJvbXB0KCdFbnRlciB0aGUgbGluayBVUkwnKVxyXG4gICAgICBpZiAodXJsKSBleGVjKCdjcmVhdGVMaW5rJywgdXJsKVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgaW1hZ2U6IHtcclxuICAgIGljb246ICcmIzEyODI0NzsnLFxyXG4gICAgdGl0bGU6ICdJbWFnZScsXHJcbiAgICBwcm9tcHRNc2c6ICdFbnRlciB0aGUgVVJMIG9mIHRoZSBpbWFnZScsXHJcbiAgICByZXN1bHQgKCkge1xyXG4gICAgICBjb25zdCB1cmwgPSB3aW5kb3cucHJvbXB0KHRoaXMucHJvbXB0TXNnKVxyXG4gICAgICBpZiAodXJsKSBleGVjKCdpbnNlcnRJbWFnZScsIHVybClcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgKGNvbW1hbmQsIHZhbHVlID0gbnVsbCkgPT4ge1xyXG4gIGRvY3VtZW50LmV4ZWNDb21tYW5kKGNvbW1hbmQsIGZhbHNlLCB2YWx1ZSlcclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpbWFnZUVkaXRBY3Rpb25zKGNiKSB7XHJcbiAgcmV0dXJuIFt7XHJcbiAgICBuYW1lOiAnZmxvYXQtbGVmdCcsXHJcbiAgICBpY29uOiBgPGRpdiBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlXCI+XHJcbiAgICAgIDxpIGNsYXNzPVwiZmEgZmEtYWxpZ24tcmlnaHRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgIDxkaXYgc3R5bGU9XCJwb3NpdGlvbjphYnNvbHV0ZTsgbGVmdDotNHB4O3RvcDowOyB0cmFuc2Zvcm06IHNjYWxlKDAuNSk7IHRyYW5zZm9ybS1vcmlnaW46IGxlZnQgdG9wXCI+XHJcbiAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1waWN0dXJlLW9cIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+YCxcclxuICAgIHRpdGxlOiAnTMOldCBiaWxkZW4gZmx5dGEgdsOkbnN0ZXIgb20gdGV4dCcsXHJcbiAgICByZXN1bHQ6ICgpID0+IGNiKCdmbG9hdC1sZWZ0JylcclxuICB9LCB7XHJcbiAgICBuYW1lOiAnZmxvYXQtcmlnaHQnLFxyXG4gICAgaWNvbjogYDxkaXYgc3R5bGU9XCJwb3NpdGlvbjpyZWxhdGl2ZVwiPlxyXG4gICAgICA8aSBjbGFzcz1cImZhIGZhLWFsaWduLWxlZnRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgIDxkaXYgc3R5bGU9XCJwb3NpdGlvbjphYnNvbHV0ZTsgcmlnaHQ6LTRweDt0b3A6MDsgdHJhbnNmb3JtOiBzY2FsZSgwLjUpOyB0cmFuc2Zvcm0tb3JpZ2luOiByaWdodCB0b3BcIj5cclxuICAgICAgICA8aSBjbGFzcz1cImZhIGZhLXBpY3R1cmUtb1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5gLFxyXG4gICAgdGl0bGU6ICdMw6V0IGJpbGRlbiBmbHl0YSBow7ZnZXIgb20gdGV4dCcsXHJcbiAgICByZXN1bHQ6ICgpID0+IGNiKCdmbG9hdC1yaWdodCcpXHJcbiAgfSwge1xyXG4gICAgbmFtZTogJ3VuZmxvYXQnLFxyXG4gICAgaWNvbjogYDxkaXYgc3R5bGU9XCJwb3NpdGlvbjpyZWxhdGl2ZTtcIiBhcmlhLWhpZGRlbj1cInRydWVcIj5cclxuICAgICAgPGRpdiBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MFwiPiYjODI1NDs8L2Rpdj5cclxuICAgICAgPGRpdiBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlO3RvcDowOmxlZnQ6MDt0cmFuc2Zvcm06IHNjYWxlKDAuNSk7IHRyYW5zZm9ybS1vcmlnaW46IGxlZnQgYm90dG9tXCI+XHJcbiAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1waWN0dXJlLW9cIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IHN0eWxlPVwicG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowXCI+XzwvZGl2PlxyXG4gICAgPC9kaXY+YCxcclxuICAgIHRpdGxlOiAnUGxhY2VyYSBiaWxkZW4gcMOlIGVnZW4gcmFkJyxcclxuICAgIHJlc3VsdDogKCkgPT4gY2IoJ3VuZmxvYXQnKVxyXG4gIH1dO1xyXG59XHJcblxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBleGVjIGZyb20gJy4vZXhlYyc7XHJcbmltcG9ydCB7d2FzaEh0bWx9IGZyb20gJy4vd2FzaC1odG1sJztcclxuaW1wb3J0IGltYWdlRWRpdEFjdGlvbnMgZnJvbSAnLi9pbWFnZS1lZGl0LWFjdGlvbnMnO1xyXG5pbXBvcnQgYWN0aW9ucyBmcm9tICcuL2FjdGlvbnMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBY3Rpb24ge1xyXG4gIG5hbWU/OiBzdHJpbmc7XHJcbiAgaWNvbjogc3RyaW5nO1xyXG4gIHRpdGxlOiBzdHJpbmc7XHJcbiAgcHJvbXB0TXNnPzogc3RyaW5nO1xyXG4gIHJlc3VsdDogKGV2OiBSZWFjdC5Nb3VzZUV2ZW50PEhUTUxCdXR0b25FbGVtZW50PiwgY29tcG9uZW50OiBXeXNpd3lnKSA9PiB2b2lkO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGNsYXNzTmFtZT86IHN0cmluZztcclxuICBodG1sOiBzdHJpbmc7XHJcbiAgb25DaGFuZ2U/OiAoaHRtbDogc3RyaW5nKSA9PiB2b2lkO1xyXG4gIHJlcG9ydE51bUNoYXJzPzogKG51bUNoYXJzOiBudW1iZXIpID0+IHZvaWQ7XHJcbiAgbWF4Q2hhcnM/OiBudW1iZXI7XHJcbiAgZGVmYXVsdEFjdGlvbnM/OiB7W25hbWU6IHN0cmluZ106IEFjdGlvbn07XHJcbiAgYWN0aW9ucz86IChQYXJ0aWFsPEFjdGlvbj4gfCBzdHJpbmcpW107XHJcbiAgcmVhZE9ubHk/OiBib29sZWFuO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIGZvY3VzUmVjdDogQ2xpZW50UmVjdCB8IG51bGw7XHJcbn1cclxuXHJcbmNvbnN0IGNsYXNzZXMgPSB7XHJcbiAgYWN0aW9uYmFyOiAnd3lzaXd5Zy1hY3Rpb25iYXInLFxyXG4gIGJ1dHRvbjogJ3d5c2l3eWctYnV0dG9uJyxcclxuICBjb250ZW50OiAnd3lzaXd5Zy1jb250ZW50JyxcclxuICBmb2N1c3JlY3Q6ICd3eXNpd3lnLWZvY3VzcmVjdCcsXHJcbiAgZm9jdXNwb2ludDogJ3d5c2l3eWctZm9jdXNwb2ludCcsXHJcbiAgcmVhZG9ubHlDb250ZW50OiAnd3lzaXd5Zy1jb250ZW50IHJlYWRvbmx5J1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgV3lzaXd5ZyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIGNvbnRlbnREaXY6IEhUTUxEaXZFbGVtZW50O1xyXG4gIGZvY3VzUmVjdERpdjogSFRNTERpdkVsZW1lbnQ7XHJcbiAgZm9jdXNFbGVtOiBIVE1MRWxlbWVudCB8IG51bGw7XHJcbiAgY29ybmVyOiBzdHJpbmc7XHJcbiAgcmVzaXplU3RhcnRYOiBudW1iZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yIChwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7Zm9jdXNSZWN0OiBudWxsfTtcclxuICAgIHRoaXMub25Gb2N1cyA9IHRoaXMub25Gb2N1cy5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5vbkJsdXIgPSB0aGlzLm9uQmx1ci5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5vbk1vdXNlRG93biA9IHRoaXMub25Nb3VzZURvd24uYmluZCh0aGlzKTtcclxuICAgIHRoaXMub25Nb3VzZU1vdmUgPSB0aGlzLm9uTW91c2VNb3ZlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLm9uTW91c2VVcCA9IHRoaXMub25Nb3VzZVVwLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgIGlmICghdGhpcy5wcm9wcy5yZWFkT25seSkge1xyXG4gICAgICBBcnJheS5mcm9tKHRoaXMuY29udGVudERpdi5xdWVyeVNlbGVjdG9yQWxsKFwiaW1nLGFcIikpLm1hcChlbGVtID0+IChlbGVtIGFzIChIVE1MSW1hZ2VFbGVtZW50IHwgSFRNTEFuY2hvckVsZW1lbnQpKSlcclxuICAgICAgLmZvckVhY2goZWxlbSA9PiB7XHJcbiAgICAgICAgZWxlbS50YWJJbmRleCA9IDE7XHJcbiAgICAgICAgZWxlbS5vbmZvY3VzID0gdGhpcy5vbkZvY3VzO1xyXG4gICAgICAgIGVsZW0ub25ibHVyID0gdGhpcy5vbkJsdXIgYXMgYW55O1xyXG4gICAgICB9KTtcclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53eXNpd3lnLWNvbnRlbnRcIikuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bik7XHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud3lzaXd5Zy1jb250ZW50XCIpLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmUpO1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnd5c2l3eWctY29udGVudFwiKS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vbk1vdXNlVXApO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMucHJvcHMucmVwb3J0TnVtQ2hhcnMpIHtcclxuICAgICAgdGhpcy5wcm9wcy5yZXBvcnROdW1DaGFycygodGhpcy5jb250ZW50RGl2ICYmIHRoaXMuY29udGVudERpdi5pbm5lclRleHQgJiYgdGhpcy5jb250ZW50RGl2LmlubmVyVGV4dC5sZW5ndGgpIHx8IDApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xyXG4gICAgQXJyYXkuZnJvbSh0aGlzLmNvbnRlbnREaXYucXVlcnlTZWxlY3RvckFsbChcImltZyxhXCIpKS5tYXAoZWxlbSA9PiAoZWxlbSBhcyAoSFRNTEltYWdlRWxlbWVudCB8IEhUTUxBbmNob3JFbGVtZW50KSkpXHJcbiAgICAuZm9yRWFjaChlbGVtID0+IHtcclxuICAgICAgZWxlbS50YWJJbmRleCA9IDE7XHJcbiAgICAgIGVsZW0ub25mb2N1cyA9IHRoaXMub25Gb2N1cztcclxuICAgICAgZWxlbS5vbmJsdXIgPSB0aGlzLm9uQmx1ciBhcyBhbnk7XHJcbiAgICB9KTtcclxuICAgIGlmICh0aGlzLnByb3BzLnJlcG9ydE51bUNoYXJzKSB7XHJcbiAgICAgIHRoaXMucHJvcHMucmVwb3J0TnVtQ2hhcnMoKHRoaXMuY29udGVudERpdiAmJiB0aGlzLmNvbnRlbnREaXYuaW5uZXJUZXh0ICYmIHRoaXMuY29udGVudERpdi5pbm5lclRleHQubGVuZ3RoKSB8fCAwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53eXNpd3lnLWNvbnRlbnRcIikucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bik7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnd5c2l3eWctY29udGVudFwiKS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud3lzaXd5Zy1jb250ZW50XCIpLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcCk7XHJcbiAgfVxyXG5cclxuICBzaG91bGRDb21wb25lbnRVcGRhdGUobmV4dFByb3BzOiBQcm9wcywgbmV4dFN0YXRlOiBTdGF0ZSkge1xyXG4gICAgLy90aGlzLmNvbnRlbnREaXYub25mb2N1cyA9IHRoaXMub25Gb2N1cztcclxuICAgIC8vdGhpcy5jb250ZW50RGl2Lm9uYmx1ciA9IHRoaXMub25CbHVyO1xyXG4gICAgcmV0dXJuICF0aGlzLmNvbnRlbnREaXYgfHxcclxuICAgICAgbmV4dFN0YXRlICE9IHRoaXMuc3RhdGUgfHxcclxuICAgICAgbmV4dFByb3BzLnJlYWRPbmx5ICE9PSB0aGlzLnByb3BzLnJlYWRPbmx5IHx8XHJcbiAgICAgIHdhc2hIdG1sKG5leHRQcm9wcy5odG1sKSAhPT0gd2FzaEh0bWwodGhpcy5jb250ZW50RGl2LmlubmVySFRNTCk7XHJcbiAgfVxyXG5cclxuICB0cmlnZ2VyT25DaGFuZ2UoaHRtbDogc3RyaW5nKSB7XHJcbiAgICB0aGlzLnByb3BzLm9uQ2hhbmdlICYmIHRoaXMucHJvcHMub25DaGFuZ2Uod2FzaEh0bWwoaHRtbCkpO1xyXG4gIH1cclxuXHJcbiAgb25Gb2N1cyhldjogRm9jdXNFdmVudCkge1xyXG4gICAgY29uc3QgZWxlbSA9IGV2LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuICAgIGlmICghZWxlbSB8fCAhZWxlbS50YWdOYW1lKSByZXR1cm47XHJcbiAgICBpZiAoZWxlbS50YWdOYW1lICE9PSAnSU1HJyAmJiBlbGVtLnRhZ05hbWUgIT09ICdBJykgcmV0dXJuO1xyXG4gICAgY29uc3QgY29udGVudFBhcmVudCA9IHRoaXMuY29udGVudERpdi5wYXJlbnRFbGVtZW50O1xyXG4gICAgY29uc3QgbmV3U3RhdGUgPSB7XHJcbiAgICAgIGZvY3VzUmVjdDogZ2V0UmVsYXRhdGl2ZUNsaWVudFJlY3QoY29udGVudFBhcmVudCwgZWxlbSksXHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKGVsZW0udGFnTmFtZSkge1xyXG4gICAgICBjYXNlICdBJzpcclxuICAgICAgY2FzZSAnSU1HJzpcclxuXHJcbiAgICAgIGRlZmF1bHQ6IGJyZWFrO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zZXRTdGF0ZShuZXdTdGF0ZSk7XHJcbiAgICB0aGlzLmZvY3VzRWxlbSA9IGVsZW07XHJcbiAgfVxyXG5cclxuICBvbkJsdXIoZXY6IFJlYWN0LkZvY3VzRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSB7XHJcbiAgICAvKmlmIChldi5yZWxhdGVkVGFyZ2V0KSB7XHJcbiAgICAgIGNvbnN0IHJlbGF0ZWRUYXJnZXQgPSBldi5yZWxhdGVkVGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICBpZiAocmVsYXRlZFRhcmdldC5jbGFzc05hbWUgJiYgcmVsYXRlZFRhcmdldC5jbGFzc05hbWUuc3BsaXQoJyAnKS5pbmRleE9mKGNsYXNzZXMuYnV0dG9uKSA+PSAwKSB7XHJcbiAgICAgICAgLy8gQSBpbWFnZSBhY3Rpb24gYnV0dG9uIHdhcyBwcmVzc2VkXHJcbiAgICAgICAgc2V0XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB9Ki9cclxuICAgIGlmICgoZXYudGFyZ2V0ID09PSB0aGlzLmZvY3VzRWxlbSAmJiBldi5yZWxhdGVkVGFyZ2V0ICE9PSB0aGlzLmZvY3VzUmVjdERpdikgfHxcclxuICAgICAgZXYudGFyZ2V0ID09PSB0aGlzLmZvY3VzUmVjdERpdilcclxuICAgIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7Zm9jdXNSZWN0OiBudWxsfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBtYWtlQ2xpY2thYmxlKGVsZW06IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgZWxlbS50YWJJbmRleCA9IDE7XHJcbiAgfVxyXG5cclxuICBvbk1vdXNlRG93bihldikge1xyXG4gICAgaWYgKChldi50YXJnZXQuY2xhc3NOYW1lIHx8IFwiXCIpLnNwbGl0KCcgJykuaW5kZXhPZihjbGFzc2VzLmZvY3VzcG9pbnQpID49IDApIHtcclxuICAgICAgY29uc3QgY29ybmVyID0gdGhpcy5nZXRSZWN0Q29ybmVyKGV2KTtcclxuICAgICAgdGhpcy5jb3JuZXIgPSBjb3JuZXI7XHJcbiAgICAgIHRoaXMucmVzaXplU3RhcnRYID0gZXYuY2xpZW50WDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uTW91c2VNb3ZlKGV2OiBNb3VzZUV2ZW50KSB7XHJcbiAgICBpZiAodGhpcy5jb3JuZXIgJiYgdGhpcy5zdGF0ZS5mb2N1c1JlY3QgJiYgdGhpcy5mb2N1c0VsZW0pIHtcclxuICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgLy8gVE9ETzogUsOka25hIHV0IGJhc2VyYXQgcMOlIHRoaXMuY29ybmVyIGh1ciBiaWxkZW5zIHN0b3JsZWsgYm9yZGUgw6RuZHJhcy5cclxuICAgICAgLy8gTGV0YSB1cHAgYmlsZGVuIHBlciBJRCBmcsOlbiB0aGlzLmNvbnRlbnREaXZcclxuICAgICAgLy8gU8OkdHQgRElWOmVucyBzdHlsZSBhdHRyaWJ1dCB3aWR0aCB0aWxsIG55IHdpZHRoLlxyXG4gICAgICAvLyBPbSBESVY6ZW4gcmVkYW4gaGFkZSBoZWlnaHQsIHPDpHR0IG55IGhlaWdodCBtZWQgc2FtbWEgYXNwZWN0IHJhdGlvIHNvbSBpbm5hbixcclxuICAgICAgLy8gYW5uYXJzLCBzw6R0dCBpbnRlIGhlaWdodCBhbGxzIChlbGxlciBtw7ZqbGlndHZpcyB0aWxsIGF1dG8pKVxyXG4gICAgICBjb25zdCBmb2N1c1JlY3QgPSB0aGlzLmZvY3VzUmVjdERpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgaWYgKGZvY3VzUmVjdC53aWR0aCA8IDMyKSByZXR1cm47XHJcbiAgICAgIC8vY29uc3QgY3VycmVudFdpZHRoID0gZm9jdXNSZWN0LndpZHRoO1xyXG4gICAgICAvL2NvbnN0IGN1cnJlbnRIZWlnaHQgPSBmb2N1c1JlY3QuaGVpZ2h0O1xyXG4gICAgICAvL2NvbnN0IGhhc0hlaWdodFN0eWxlID0gIXRoaXMuZm9jdXNFbGVtLnN0eWxlLmhlaWdodCB8fCB0aGlzLmZvY3VzRWxlbS5zdHlsZS5oZWlnaHQgPT09IFwiYXV0b1wiO1xyXG4gICAgICBjb25zdCBuZXdXaWR0aCA9IE1hdGgubWF4KDMyLCB0aGlzLmNvcm5lci5lbmRzV2l0aCgnbCcpID9cclxuICAgICAgICBmb2N1c1JlY3Qud2lkdGggKyAodGhpcy5yZXNpemVTdGFydFggLSBldi5jbGllbnRYKSA6XHJcbiAgICAgICAgLy9mb2N1c1JlY3QucmlnaHQgLSBldi5jbGllbnRYIDpcclxuICAgICAgICBmb2N1c1JlY3Qud2lkdGggLSAodGhpcy5yZXNpemVTdGFydFggLSBldi5jbGllbnRYKSk7XHJcbiAgICAgIHRoaXMucmVzaXplU3RhcnRYID0gZXYuY2xpZW50WDtcclxuICAgICAgICAvL2V2LmNsaWVudFggLSBmb2N1c1JlY3QubGVmdDtcclxuICAgICAgY29uc3QgZmFjdG9yID0gbmV3V2lkdGggLyBmb2N1c1JlY3Qud2lkdGg7XHJcbiAgICAgIGNvbnN0IG5ld0hlaWdodCA9IGZvY3VzUmVjdC5oZWlnaHQgKiBmYWN0b3I7XHJcbiAgICAgIHRoaXMuZm9jdXNFbGVtLnN0eWxlLndpZHRoID0gbmV3V2lkdGggKyBcInB4XCI7XHJcbiAgICAgIHRoaXMuZm9jdXNFbGVtLnN0eWxlLmhlaWdodCA9IG5ld0hlaWdodCArIFwicHhcIjtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgZm9jdXNSZWN0OiBnZXRSZWxhdGF0aXZlQ2xpZW50UmVjdCh0aGlzLmNvbnRlbnREaXYucGFyZW50RWxlbWVudCwgdGhpcy5mb2N1c0VsZW0pLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uTW91c2VVcChldikge1xyXG4gICAgaWYgKHRoaXMuY29ybmVyICYmIHRoaXMuc3RhdGUuZm9jdXNSZWN0ICYmIHRoaXMuZm9jdXNFbGVtKSB7XHJcbiAgICAgIHRoaXMuY29ybmVyID0gbnVsbDtcclxuICAgICAgdGhpcy50cmlnZ2VyT25DaGFuZ2UodGhpcy5jb250ZW50RGl2LmlubmVySFRNTCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRSZWN0Q29ybmVyKGV2KSB7XHJcbiAgICBmb3IgKGNvbnN0IGNsYXNzTmFtZSBvZiAoZXYudGFyZ2V0LmNsYXNzTmFtZSB8fCAnJykuc3BsaXQoJyAnKSkge1xyXG4gICAgICBzd2l0Y2ggKGNsYXNzTmFtZSkge1xyXG4gICAgICAgIGNhc2UgJ2ZwdWwnOlxyXG4gICAgICAgICAgcmV0dXJuICd1bCc7XHJcbiAgICAgICAgY2FzZSAnZnB1cic6XHJcbiAgICAgICAgICByZXR1cm4gJ2ZwdXInO1xyXG4gICAgICAgIGNhc2UgJ2ZwbHInOlxyXG4gICAgICAgICAgcmV0dXJuICdscic7XHJcbiAgICAgICAgY2FzZSAnZnBsbCc6XHJcbiAgICAgICAgICByZXR1cm4gJ2xsJztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBleGVjSW1hZ2VFZGl0QWN0aW9uIChjbWQ6IHN0cmluZykge1xyXG4gICAgLy9jb25zb2xlLmxvZyhjbWQpO1xyXG4gICAgaWYgKCF0aGlzLmZvY3VzRWxlbSkgcmV0dXJuO1xyXG4gICAgLy9jb25zb2xlLmxvZyhcImRvaW5nIGl0XCIpO1xyXG4gICAgc3dpdGNoIChjbWQpIHtcclxuICAgICAgY2FzZSAnZmxvYXQtbGVmdCc6XHJcbiAgICAgICAgdGhpcy5mb2N1c0VsZW0uc3R5bGUuY3NzRmxvYXQgPSAnbGVmdCc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ2Zsb2F0LXJpZ2h0JzpcclxuICAgICAgICB0aGlzLmZvY3VzRWxlbS5zdHlsZS5jc3NGbG9hdCA9ICdyaWdodCc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ3VuZmxvYXQnOlxyXG4gICAgICAgIHRoaXMuZm9jdXNFbGVtLnN0eWxlLmNzc0Zsb2F0ID0gJyc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICB0aGlzLnRyaWdnZXJPbkNoYW5nZSh0aGlzLmNvbnRlbnREaXYuaW5uZXJIVE1MKTtcclxuICAgIHRoaXMuc2V0U3RhdGUoe2ZvY3VzUmVjdDogZ2V0UmVsYXRhdGl2ZUNsaWVudFJlY3QodGhpcy5jb250ZW50RGl2LnBhcmVudEVsZW1lbnQsIHRoaXMuZm9jdXNFbGVtKX0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3QgZGVmYXVsdEFjdGlvbnMgPSB0aGlzLnByb3BzLmRlZmF1bHRBY3Rpb25zIHx8IGFjdGlvbnM7XHJcbiAgICBsZXQgYWN0aW9uc1RvVXNlID0gdGhpcy5wcm9wcy5hY3Rpb25zID8gdGhpcy5wcm9wcy5hY3Rpb25zLm1hcChhY3Rpb24gPT5cclxuICAgICAgdHlwZW9mIGFjdGlvbiA9PT0gJ3N0cmluZycgP1xyXG4gICAgICAgIGRlZmF1bHRBY3Rpb25zW2FjdGlvbl0gOlxyXG4gICAgICAgIGRlZmF1bHRBY3Rpb25zW2FjdGlvbi5uYW1lXSA/XHJcbiAgICAgICAgICB7IC4uLmRlZmF1bHRBY3Rpb25zW2FjdGlvbi5uYW1lXSwgLi4uYWN0aW9uIH0gOlxyXG4gICAgICAgICAgYWN0aW9uKVxyXG4gICAgOiBPYmplY3Qua2V5cyhkZWZhdWx0QWN0aW9ucykubWFwKGFjdGlvbiA9PiBkZWZhdWx0QWN0aW9uc1thY3Rpb25dKTtcclxuXHJcbiAgICBpZiAodGhpcy5zdGF0ZS5mb2N1c1JlY3QpIHtcclxuICAgICAgYWN0aW9uc1RvVXNlID0gYWN0aW9uc1RvVXNlLmNvbmNhdChpbWFnZUVkaXRBY3Rpb25zKGNtZCA9PiB0aGlzLmV4ZWNJbWFnZUVkaXRBY3Rpb24oY21kKSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHtmb2N1c1JlY3R9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IHtyZWFkT25seSwgcmVwb3J0TnVtQ2hhcnMsIG1heENoYXJzfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPXt0aGlzLnByb3BzLmNsYXNzTmFtZX0+XHJcbiAgICAgIHshcmVhZE9ubHkgJiYgPGRpdiBjbGFzc05hbWU9e2NsYXNzZXMuYWN0aW9uYmFyfT5cclxuICAgICAgICB7YWN0aW9uc1RvVXNlLm1hcCgoYWN0aW9uLCBpZHgpID0+XHJcbiAgICAgICAgICA8YnV0dG9uIGtleT17aWR4fSBjbGFzc05hbWU9e2NsYXNzZXMuYnV0dG9ufVxyXG4gICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogYWN0aW9uLmljb259fVxyXG4gICAgICAgICAgICB0aXRsZT17YWN0aW9uLnRpdGxlfVxyXG4gICAgICAgICAgICBvbk1vdXNlRG93bj17ZXY9PnthY3Rpb24ucmVzdWx0KGV2LCB0aGlzKX19XHJcbiAgICAgICAgICAgIG9uTW91c2VVcD17ZXY9PnNldFRpbWVvdXQoKCk9PnRoaXMuY29udGVudERpdi5mb2N1cygpLCAxMCl9XHJcbiAgICAgICAgICAvPil9XHJcbiAgICAgIDwvZGl2Pn1cclxuICAgICAgPGRpdiBjbGFzc05hbWU9e3JlYWRPbmx5ID8gY2xhc3Nlcy5yZWFkb25seUNvbnRlbnQgOiBjbGFzc2VzLmNvbnRlbnR9IHN0eWxlPXt7cG9zaXRpb246ICdyZWxhdGl2ZScsIHRvcDogMCwgbGVmdDogMH19PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZWRpdG9yXCJcclxuICAgICAgICAgIHJlZj17ZGl2ID0+IHRoaXMuY29udGVudERpdiA9IGRpdn1cclxuICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7X19odG1sOiB3YXNoSHRtbCh0aGlzLnByb3BzLmh0bWwpfX1cclxuICAgICAgICAgIGNvbnRlbnRFZGl0YWJsZT17IXJlYWRPbmx5fVxyXG4gICAgICAgICAgb25QYXN0ZT17ZXYgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWlzTmFOKG1heENoYXJzKSkge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHt0YXJnZXQsIGN1cnJlbnRUYXJnZXR9ID0gZXY7XHJcbiAgICAgICAgICAgICAgLy9jb25zdCB0ZXh0QmVpbmdPdmVyd3JpdHRlbiA9ICh0YXJnZXQgYXMgYW55KS5pbm5lclRleHQgfHwgXCJcIjtcclxuICAgICAgICAgICAgICBjb25zdCBlZGl0b3JUZXh0ID0gKGN1cnJlbnRUYXJnZXQgJiYgY3VycmVudFRhcmdldC5pbm5lclRleHQpIHx8IFwiXCI7XHJcbiAgICAgICAgICAgICAgY29uc3QgdGV4dEJlaW5nUGFzdGVkID0gZXYuY2xpcGJvYXJkRGF0YS5nZXREYXRhKFwidGV4dC9wbGFpblwiKSB8fCBcIlwiO1xyXG4gICAgICAgICAgICAgIGlmIChlZGl0b3JUZXh0Lmxlbmd0aCArIHRleHRCZWluZ1Bhc3RlZC5sZW5ndGggPiBtYXhDaGFycykge1xyXG4gICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH19XHJcbiAgICAgICAgICBvbktleVVwPXtyZXBvcnROdW1DaGFycyA/IGV2ID0+IHtcclxuICAgICAgICAgICAgY29uc3Qge2lubmVyVGV4dH0gPSAoZXYudGFyZ2V0IGFzIGFueSk7XHJcbiAgICAgICAgICAgIHJlcG9ydE51bUNoYXJzKGlubmVyVGV4dCA/IGlubmVyVGV4dC5sZW5ndGggOiAwKTtcclxuICAgICAgICAgIH0gOiBudWxsfVxyXG4gICAgICAgICAgb25LZXlQcmVzcz17IWlzTmFOKG1heENoYXJzKSA/IGV2ID0+IHtcclxuICAgICAgICAgICAgY29uc3Qge2lubmVyVGV4dH0gPSAoZXYudGFyZ2V0IGFzIGFueSk7XHJcbiAgICAgICAgICAgIGlmIChpbm5lclRleHQgJiYgaW5uZXJUZXh0Lmxlbmd0aCA+PSBtYXhDaGFycykge1xyXG4gICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gOiBudWxsfVxyXG4gICAgICAgICAgb25JbnB1dD17ZXYgPT4gdGhpcy50cmlnZ2VyT25DaGFuZ2UoKGV2LnRhcmdldCBhcyBhbnkpLmlubmVySFRNTCl9XHJcbiAgICAgICAgICBvbktleURvd249e2V2ID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlYWRPbmx5KSByZXR1cm47XHJcbiAgICAgICAgICAgIGlmIChyZXBvcnROdW1DaGFycyAmJiBldi5jdXJyZW50VGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgcmVwb3J0TnVtQ2hhcnMoKGV2LmN1cnJlbnRUYXJnZXQuaW5uZXJUZXh0IHx8IFwiXCIpLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJLZXk6IFwiICsgZXYud2hpY2gpO1xyXG4gICAgICAgICAgICBpZiAoZXYud2hpY2ggPj0gMzUgJiYgZXYud2hpY2ggPD0gNDApIHsvLyBob21lL2VuZC91cC9kb3duL2xlZnQvcmlnaHRcclxuICAgICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgLy8gUHJldmVudCBlbnRpcmUgcGFnZSBmcm9tIHNjcm9sbGluZz8/XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2LndoaWNoID09PSA5KSB7XHJcbiAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsvLyBUQUJcclxuICAgICAgICAgICAgICBpZiAoZXYuc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgIGV4ZWMoXCJvdXRkZW50XCIpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBleGVjKFwiaW5kZW50XCIpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgIChldi5rZXlDb2RlID09PSA4IHx8IGV2LmtleUNvZGUgPT09IDQ2KSAmJiAvLyBEZWxldGUgb3IgQmFjayBidXR0b25zXHJcbiAgICAgICAgICAgICAgdGhpcy5mb2N1c0VsZW0gJiYgdGhpcy5zdGF0ZS5mb2N1c1JlY3QpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBpZiAodGhpcy5mb2N1c0VsZW0gJiYgdGhpcy5mb2N1c0VsZW0ucGFyZW50RWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mb2N1c0VsZW0ucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLmZvY3VzRWxlbSk7IC8vIFJlbW92ZSBtYXJrZWQgaW1hZ2VcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgdGhpcy5mb2N1c0VsZW0gPSBudWxsO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2ZvY3VzUmVjdDogbnVsbH0pO1xyXG4gICAgICAgICAgICAgIHRoaXMudHJpZ2dlck9uQ2hhbmdlKHRoaXMuY29udGVudERpdi5pbm5lckhUTUwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgIC8+XHJcbiAgICAgICAge2ZvY3VzUmVjdCAmJiA8ZGl2XHJcbiAgICAgICAgICByZWY9e2RpdiA9PiB0aGlzLmZvY3VzUmVjdERpdiA9IGRpdn1cclxuICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3Nlcy5mb2N1c3JlY3R9XHJcbiAgICAgICAgICBvbkJsdXI9e3RoaXMub25CbHVyfVxyXG4gICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICBvdXRsaW5lOiAwLFxyXG4gICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuICAgICAgICAgICAgdG9wOiB0aGlzLnN0YXRlLmZvY3VzUmVjdC50b3AsXHJcbiAgICAgICAgICAgIGxlZnQ6IHRoaXMuc3RhdGUuZm9jdXNSZWN0LmxlZnQsXHJcbiAgICAgICAgICAgIHdpZHRoOiB0aGlzLnN0YXRlLmZvY3VzUmVjdC53aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLnN0YXRlLmZvY3VzUmVjdC5oZWlnaHR9fT5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc2VzLmZvY3VzcG9pbnQgKyBcIiBmcHVsXCJ9IHN0eWxlPXt7cG9zaXRpb246J2Fic29sdXRlJywgdG9wOjAsIGxlZnQ6MH19IC8+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3Nlcy5mb2N1c3BvaW50ICsgXCIgZnB1clwifSBzdHlsZT17e3Bvc2l0aW9uOidhYnNvbHV0ZScsIHRvcDowLCByaWdodDowfX0gLz5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc2VzLmZvY3VzcG9pbnQgKyBcIiBmcGxyXCJ9IHN0eWxlPXt7cG9zaXRpb246J2Fic29sdXRlJywgYm90dG9tOjAsIHJpZ2h0OjB9fSAvPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzZXMuZm9jdXNwb2ludCArIFwiIGZwbGxcIn0gc3R5bGU9e3twb3NpdGlvbjonYWJzb2x1dGUnLCBib3R0b206MCwgbGVmdDowfX0gLz5cclxuICAgICAgICA8L2Rpdj59XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRSZWxhdGF0aXZlQ2xpZW50UmVjdCAocGFyZW50OiBIVE1MRWxlbWVudCwgY2hpbGQ6IEhUTUxFbGVtZW50KSA6IENsaWVudFJlY3Qge1xyXG4gIGNvbnN0IHBhcmVudFJlY3QgPSBwYXJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgY29uc3QgY2hpbGRSZWN0ID0gY2hpbGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgcmV0dXJuIHtcclxuICAgIHRvcDogY2hpbGRSZWN0LnRvcCAtIHBhcmVudFJlY3QudG9wICsgcGFyZW50LnNjcm9sbFRvcCxcclxuICAgIGxlZnQ6IGNoaWxkUmVjdC5sZWZ0IC0gcGFyZW50UmVjdC5sZWZ0ICsgcGFyZW50LnNjcm9sbExlZnQsXHJcbiAgICBib3R0b206IGNoaWxkUmVjdC5ib3R0b20gLSBwYXJlbnRSZWN0LnRvcCArIHBhcmVudC5zY3JvbGxUb3AsXHJcbiAgICByaWdodDogY2hpbGRSZWN0LnJpZ2h0IC0gcGFyZW50UmVjdC5sZWZ0ICsgcGFyZW50LnNjcm9sbExlZnQsXHJcbiAgICB3aWR0aDogY2hpbGRSZWN0LndpZHRoLFxyXG4gICAgaGVpZ2h0OiBjaGlsZFJlY3QuaGVpZ2h0XHJcbiAgfTtcclxufVxyXG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xyXG5cclxuY29uc3QgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpO1xyXG5cclxudHlwZSBIVE1MUG9saWN5ID0ge1t0YWdOYW1lTG93ZXI6IHN0cmluZ106IHtbYXR0cmlidXRlTG93ZXI6IHN0cmluZ106IGJvb2xlYW59fTtcclxuXHJcbi8qKiBUYWdzIC8gQXR0cmlidXRlcyBXaGl0ZWxpc3RcclxuICogXHJcbiAqL1xyXG5jb25zdCBIVE1MX1dBU0hfUE9MSUNZOiBIVE1MUG9saWN5ID0ge1xyXG4gIGI6IHt9LCAgLy8gYm9sZFxyXG4gIGk6IHt9LCAgLy8gaXRhbGljXHJcbiAgcDoge30sICAvLyBwYXJhZ3JhcGhcclxuICB1OiB7fSwgIC8vIHVuZGVybGluZVxyXG4gIHN0cmlrZToge30sIC8vIHN0cmlrZS10aHJvdWdoXHJcbiAgcHJlOiB7fSwgLy8gdW5mb3JtYXR0ZWRcclxuICBoMToge30sIC8vIGhlYWRpbmcgMVxyXG4gIGgyOiB7fSwgLy8gaGVhZGluZyAyXHJcbiAgaDM6IHt9LCAvLyBoZWFkaW5nIDNcclxuICBoNDoge30sIC8vIGhlYWRpbmcgNFxyXG4gIGg1OiB7fSwgLy8gaGVhZGluZyA1XHJcbiAgaW1nOiB7c3JjOiB0cnVlLCBjbGFzczogdHJ1ZSwgc3R5bGU6IHRydWUsIHRhYmluZGV4OiB0cnVlfSwgLy8gaW1hZ2UuIFdlIHNldCBzdHlsZSBhbmQgdGFiaW5kZXggb3Vyc2VsdmVzLiBBY2NlcHQgdGhhdC5cclxuICBhOiB7aHJlZjogdHJ1ZSwgdGFyZ2V0OiB0cnVlLCB0YWJpbmRleDogdHJ1ZX0sIC8vIGxpbmtcclxuICB1bDoge30sIC8vIFVub3JkZXJlZCBsaXN0XHJcbiAgb2w6IHt9LCAvLyBPcmRlcmVkIGxpc3RcclxuICBsaToge30sIC8vIGxpc3QgaXRlbVxyXG4gIGhyOiB7fSwgLy8gSG9yaXpvbnRhbCBydWxlXHJcbiAgYnI6IHt9LCAvLyBCcmVhayBsaW5lXHJcbiAgZGl2OiB7fSwvLyBPZiBzb21lIHJlYXNvbiwgZGl2cyBhcmUgc29tZXRpbWVzIGluc2VydGVkIHdoZW4gcHJlc3NpbmcgRU5URVIgaW4gdGhlIHd5c2l3eWcgZWRpdG9yLlxyXG4gIHNwYW46IHt9LC8vIFNwYW5zIGFyZSBoYXJtbGVzcywganVzdCByZW1vdmUgdGhlaXIgc3R5bGUgYW5kIG90aGVyIGF0dHJpYnV0ZXMgYW5kIEkgZmVlbCBncmVhdC5cclxuICAvLyB0YWJsZSB0YWdzOlxyXG4gIHRhYmxlOiB7Ym9yZGVyOiB0cnVlfSxcclxuICB0Ym9keToge30sXHJcbiAgdGhlYWQ6IHt9LFxyXG4gIHRmb290OiB7fSxcclxuICB0cjoge30sXHJcbiAgdGQ6IHtoZWFkZXJzOiB0cnVlLCBjb2xzcGFuOiB0cnVlLCByb3dzcGFuOiB0cnVlfSxcclxuICB0aDoge2FiYnI6IHRydWUsIGhlYWRlcnM6IHRydWUsIHNjb3BlOiB0cnVlLCBzb3J0ZWQ6IHRydWUsIGNvbHNwYW46IHRydWUsIHJvd3NwYW46IHRydWV9XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gd2FzaEh0bWwgKGh0bWw6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgY29uc3QgZG9jID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhodG1sLCBcInRleHQvaHRtbFwiKTtcclxuICBjb25zdCB7Y2hpbGROb2Rlc30gPSBkb2MuYm9keTtcclxuICBsZXQgbW9kaWZpZWQgPSBmYWxzZTtcclxuICBmb3IgKGxldCBpPTA7IGk8Y2hpbGROb2Rlcy5sZW5ndGg7ICsraSkge1xyXG4gICAgaWYgKHdhc2hOb2RlKGNoaWxkTm9kZXMuaXRlbShpKSkpIHtcclxuICAgICAgbW9kaWZpZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gbW9kaWZpZWQgP1xyXG4gICAgZG9jLmJvZHkuaW5uZXJIVE1MIDpcclxuICAgIGh0bWw7IC8vIEJ5IHJldHVybmluZyB0aGUgb3JpZ2luYWwgSFRNTCBzdHJpbmcsIHdlIHNwYXJlIHRoZSB1c2VyIGZyb20gcmVmcmVzaGluZyB0aGUgZWRpdCBhcmVhLFxyXG4gICAgICAgICAgLy8gd2hpY2ggd291bGQgb3RoZXJ3aXNlIHB1dCB0aGUgY3Vyc29yIGF0IHRoZSB0b3AsIGxvc2luZyB0aGUgcG9zaXRpb24gd2hlcmUgdXNlciB3aGVyZS5cclxufVxyXG5cclxuZnVuY3Rpb24gd2FzaE5vZGUobm9kZTogTm9kZSB8IEVsZW1lbnQgfCBIVE1MRWxlbWVudCk6IGJvb2xlYW4ge1xyXG4gIGxldCBtb2RpZmllZCA9IGZhbHNlO1xyXG4gIGlmIChpc0VsZW1lbnQobm9kZSkpIHtcclxuICAgIGlmICh3YXNoRWxlbWVudChub2RlKSkge1xyXG4gICAgICBtb2RpZmllZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGlmICh3YXNoQ2hpbGROb2Rlcyhub2RlKSkge1xyXG4gICAgbW9kaWZpZWQgPSB0cnVlO1xyXG4gIH1cclxuICByZXR1cm4gbW9kaWZpZWQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHdhc2hDaGlsZE5vZGVzKG5vZGU6IE5vZGUpIHtcclxuICBsZXQgbW9kaWZpZWQgPSBmYWxzZTtcclxuICBjb25zdCB7Y2hpbGROb2Rlc30gPSBub2RlO1xyXG4gIGZvciAobGV0IGk9MDsgaTxjaGlsZE5vZGVzLmxlbmd0aDsgKytpKSB7XHJcbiAgICBpZiAod2FzaE5vZGUoY2hpbGROb2Rlcy5pdGVtKGkpKSkge1xyXG4gICAgICBtb2RpZmllZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBtb2RpZmllZDtcclxufSBcclxuXHJcbi8qKiBSZXBsYWNlIGFuIGVsZW1lbnQgd2l0aCBpdHMgY2hpbGQgbm9kZXMuXHJcbiAqIFxyXG4gKi9cclxuZnVuY3Rpb24gcmVtb3ZlTWlkZGxlRWxlbWVudChlbGVtZW50OiBFbGVtZW50KSB7XHJcbiAgY29uc3Qge2NoaWxkTm9kZXN9ID0gZWxlbWVudDtcclxuICBmb3IgKGxldCBpPTA7IGk8Y2hpbGROb2Rlcy5sZW5ndGg7ICsraSkge1xyXG4gICAgZWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjaGlsZE5vZGVzLml0ZW0oaSksIGVsZW1lbnQpO1xyXG4gIH1cclxuICBlbGVtZW50LnJlbW92ZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB3YXNoRWxlbWVudChlbGVtZW50OiBFbGVtZW50KTogYm9vbGVhbiB7XHJcbiAgY29uc3QgcG9saWN5ID0gZWxlbWVudC50YWdOYW1lICYmIEhUTUxfV0FTSF9QT0xJQ1lbZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCldO1xyXG4gIGlmICghcG9saWN5KSB7XHJcbiAgICBjb25zb2xlLndhcm4oXCJXeXNpd3lnOiBub3QgYWxsb3dlZCB0YWdcIiwgZWxlbWVudC50YWdOYW1lKTtcclxuICAgIHdhc2hDaGlsZE5vZGVzKGVsZW1lbnQpO1xyXG4gICAgcmVtb3ZlTWlkZGxlRWxlbWVudChlbGVtZW50KTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuICBsZXQgbW9kaWZpZWQgPSBmYWxzZTtcclxuICBmb3IgKGxldCBpPTA7IGk8ZWxlbWVudC5hdHRyaWJ1dGVzLmxlbmd0aDsgKytpKSB7XHJcbiAgICBjb25zdCBhdHRyID0gZWxlbWVudC5hdHRyaWJ1dGVzLml0ZW0oaSk7XHJcbiAgICBjb25zdCBhbGxvd2VkID0gYXR0ci5uYW1lICYmICEhcG9saWN5W2F0dHIubmFtZS50b0xvd2VyQ2FzZSgpXTtcclxuICAgIGlmICghYWxsb3dlZCkge1xyXG4gICAgICBtb2RpZmllZCA9IHRydWU7XHJcbiAgICAgIGNvbnNvbGUud2FybihcIld5c2l3eWc6IG5vdCBhbGxvd2VkIGF0dHJpYnV0ZVwiLCBhdHRyLm5hbWUsIFwiVGFnOiBcIiwgZWxlbWVudC50YWdOYW1lKTtcclxuICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoYXR0ci5uYW1lKTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG1vZGlmaWVkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc0VsZW1lbnQobm9kZTogTm9kZSkgOiBub2RlIGlzIEVsZW1lbnQge1xyXG4gIHJldHVybiAhIShub2RlIGFzIEVsZW1lbnQpLnRhZ05hbWU7XHJcbn1cclxuIiwiZXhwb3J0ICogZnJvbSAnLi93ZWVrLW5vdGVib29rJztcclxuZXhwb3J0ICogZnJvbSAnLi9yb290LXdlZWstbm90ZWJvb2snO1xyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEluamVjdGVkSW50bFByb3BzIH0gZnJvbSAncmVhY3QtaW50bCc7XHJcbmltcG9ydCB7IExhbmd1YWdlQ29udGV4dCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9MYW5ndWFnZUNvbnRleHQnO1xyXG5pbXBvcnQgeyBXZWVrTm90ZWJvb2sgfSBmcm9tICcuJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBSb290V2Vla05vdGVib29rIChwcm9wcyA6IEluamVjdGVkSW50bFByb3BzKSB7XHJcbiAgICBjb25zdCB7aW50bH0gPSBwcm9wcztcclxuICAgIHJldHVybiA8TGFuZ3VhZ2VDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7aW50bH19PlxyXG4gICAgICAgICAgICAgIDxXZWVrTm90ZWJvb2sgLz5cclxuICAgICAgICAgICA8L0xhbmd1YWdlQ29udGV4dC5Qcm92aWRlcj47XHJcbiAgfSIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHdlZWtOb3Rlc1JlcG8gfSBmcm9tICcuLi8uLi9yZXBvcy93ZWVrLW5vdGVzLXJlcG8nO1xyXG5pbXBvcnQgeyBXZWVrTm90ZSB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgUGVuZGluZ0pvYiB9IGZyb20gJy4uLy4uL3V0aWxzL3BlbmRpbmctam9iJztcclxuaW1wb3J0IHsgY3JlYXRlVVVJRCwgRG9jdW1lbnRBY2Nlc3MgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgV3lzaXd5ZyB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnJztcclxuaW1wb3J0IGFjdGlvbnNfc3dlZGlzaCBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zy9hY3Rpb25zLXN2JztcclxuaW1wb3J0IGFjdGlvbnNfZW4gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL3d5c2l3eWcvYWN0aW9ucyc7XHJcbmltcG9ydCB7IFNwaW5uZXIgfSBmcm9tICcuLi9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9zcGlubmVyJztcclxuaW1wb3J0IHsgaWZUYWtlc1RpbWUgfSBmcm9tICcuLi8uLi91dGlscy9pZi10YWtlcy10aW1lJztcclxuaW1wb3J0IHsgSW5qZWN0ZWRJbnRsLCBGb3JtYXR0ZWRNZXNzYWdlIH0gZnJvbSAncmVhY3QtaW50bCc7XHJcbmltcG9ydCB7IExhbmd1YWdlQ29udGV4dCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9MYW5ndWFnZUNvbnRleHQnO1xyXG5cclxuY29uc3QgTUFYX05PVEVfTEVOR1RIID0gMTYzODQ7XHJcblxyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICB3ZWVrTm90ZT86IFdlZWtOb3RlO1xyXG4gIG5vdGVzOiBzdHJpbmc7XHJcbiAgLy93ZWVrOiBudW1iZXI7XHJcbiAgaXNMb2FkaW5nOiBib29sZWFuO1xyXG4gIHNob3dMb2FkaW5nUHJvZ3Jlc3M6IGJvb2xlYW47XHJcbiAgc2hvd1NhdmluZ1Byb2dyZXNzOiBib29sZWFuO1xyXG4gIGV2ZXJFZGl0ZWQ6IGJvb2xlYW47XHJcbiAgZXJyb3I/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBXZWVrTm90ZWJvb2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XHJcbiAgYXV0b1NhdmVyOiBQZW5kaW5nSm9iO1xyXG4gIHRpbWVvdXRIYW5kbGU6IGFueTtcclxuICBzdGF0aWMgY29udGV4dFR5cGUgPSBMYW5ndWFnZUNvbnRleHQ7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5vbkNoYW5nZSA9IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuYXV0b1NhdmVyID0gbmV3IFBlbmRpbmdKb2IoKCk9PnRoaXMuc2F2ZSgpKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGlzTG9hZGluZzogdHJ1ZSxcclxuICAgICAgc2hvd0xvYWRpbmdQcm9ncmVzczogZmFsc2UsXHJcbiAgICAgIHNob3dTYXZpbmdQcm9ncmVzczogZmFsc2UsXHJcbiAgICAgIGV2ZXJFZGl0ZWQ6IGZhbHNlLFxyXG4gICAgICBub3RlczogXCJcIixcclxuICAgICAgLy93ZWVrOiBtb21lbnQoKS53ZWVrKClcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICB0aGlzLnNob3dQcm9ncmVzc0lmTG9hZGluZ1Rha2VzVGltZSgpO1xyXG4gICAgd2Vla05vdGVzUmVwby5tZW0uc3Vic2NyaWJlKHRoaXMub25DaGFuZ2UpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzaG93UHJvZ3Jlc3NJZkxvYWRpbmdUYWtlc1RpbWUoKSB7XHJcbiAgICB0aGlzLnRpbWVvdXRIYW5kbGUgPSBzZXRUaW1lb3V0KCgpPT50aGlzLnN0YXRlLmlzTG9hZGluZyAmJiB0aGlzLnNldFN0YXRlKHtzaG93TG9hZGluZ1Byb2dyZXNzOiB0cnVlfSksIDMwMCk7ICAgIFxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XHJcbiAgICB3ZWVrTm90ZXNSZXBvLm1lbS51bnN1YnNjcmliZSh0aGlzLm9uQ2hhbmdlKTtcclxuICAgIHRoaXMuYXV0b1NhdmVyLnN0b3AoKTtcclxuICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRIYW5kbGUpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBfc2F2ZSgpIHtcclxuICAgIGZvciAobGV0IG1heEl0ZXJhdGlvbnM9MzsgdGhpcy5pc05vdGVzRWRpdGVkKCkgJiYgbWF4SXRlcmF0aW9uczsgLS1tYXhJdGVyYXRpb25zKSB7XHJcbiAgICAgIGF3YWl0IHdlZWtOb3Rlc1JlcG8udXBzZXJ0KHRoaXMuc3RhdGUud2Vla05vdGUsIHduID0+IHtcclxuICAgICAgICB3bi5jb250ZW50ID0gdGhpcy5zdGF0ZS5ub3RlcztcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIHNhdmUoKSB7XHJcbiAgICBpZiAoIXRoaXMuc3RhdGUuc2hvd1NhdmluZ1Byb2dyZXNzICYmICF0aGlzLnN0YXRlLmlzTG9hZGluZyAmJiB0aGlzLmlzTm90ZXNFZGl0ZWQoKSkge1xyXG4gICAgICBhd2FpdCB0aGlzLnNldFN0YXRlKHtlcnJvcjogdW5kZWZpbmVkfSk7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgaWZUYWtlc1RpbWUoMzAwLCAoKT0+dGhpcy5fc2F2ZSgpLCAoKT0+dGhpcy5zZXRTdGF0ZSh7c2hvd1NhdmluZ1Byb2dyZXNzOiB0cnVlfSkpO1xyXG4gICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zZXRTdGF0ZSh7ZXJyb3I6IHRoaXMuY29udGV4dC5pbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOlwiY29tbW9uLmVycm9yU2F2aW5nRGF0YVwiLCBkZWZhdWx0TWVzc2FnZTogXCJLdW5kZSBpbnRlIHNwYXJhLlwifSl9KTtcclxuICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICBhd2FpdCB0aGlzLnNldFN0YXRlKHtzaG93U2F2aW5nUHJvZ3Jlc3M6IGZhbHNlfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlzTm90ZXNFZGl0ZWQoKSB7XHJcbiAgICBjb25zdCB7IHdlZWtOb3RlLCBub3RlcyB9ID0gdGhpcy5zdGF0ZTtcclxuICAgIHJldHVybiAhIXdlZWtOb3RlICYmIChub3RlcyAhPT0gd2Vla05vdGUuY29udGVudCk7XHJcbiAgfSAgXHJcblxyXG4gIC8vSWYgdGhlIG5vdGVib29rIHNob3VsZCBiZSB1c2VkIGluIG11bHRpcGxlIG1vZHVsZXMsIG1vdmUgdGhpcyBmdW5jdGlvbnMgaW50byBhbiB1dGlsaXR5IGZpbGVcclxuICBnZXRUcmFuc2xhdGVkQWN0aW9ucyhpbnRsOiBJbmplY3RlZEludGwpe1xyXG4gICAgLy9hY3Rpb25zIG1pZ2h0IGhhdmUgZGlmZmVyZW50IGljb25zIGZvciBlYWNoIGxhbmd1YWdlXHJcbiAgICAvL3dlIGtlZXAgdGhlIHNhbWUgc3RydWN0dXJlIG9mIHRoZSBhY3Rpb25zLCBidXQgd2UgcmVwbGFjZSB0aGUgdGV4dHMgd2l0aCB0aGUgb25lcyBmcm9tIHRoZSB0cmFuc2xhdGVkIGZpbGVzXHJcbiAgICB2YXIgbG9jYWxlQWN0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIGludGwubG9jYWxlID09PSBcInN2XCIgPyBhY3Rpb25zX3N3ZWRpc2ggOiBhY3Rpb25zX2VuKTtcclxuICAgIE9iamVjdC5rZXlzKGxvY2FsZUFjdGlvbnMpLmZvckVhY2goZWxlbSA9PiB7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRUaXRsZSA9IGFjdGlvbnNfc3dlZGlzaFtlbGVtXS50aXRsZTtcclxuICAgICAgbG9jYWxlQWN0aW9uc1tlbGVtXS50aXRsZSA9IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6YHd5c2l3eWcuJHtlbGVtfWAsIGRlZmF1bHRNZXNzYWdlOiBjdXJyZW50VGl0bGV9KTtcclxuICAgICAgXHJcbiAgICAgIC8vYmVjYXVzZSB0aGUgaW1hZ2UgYWN0aW9uIG5lZWRzIGEgY3VzdG9tIHRyYW5zbGF0aW9uLCB3ZSB0cmVhdCB0aGlzIHNlcGFyYXRlbHlcclxuICAgICAgaWYoZWxlbSA9PT0gXCJpbWFnZVwiKXtcclxuICAgICAgICBsb2NhbGVBY3Rpb25zW2VsZW1dLnByb21wdE1zZyA9IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6XCJ3eXNpd3lnLmltYWdlUHJvbXB0TXNnXCIsIGRlZmF1bHRNZXNzYWdlOiBhY3Rpb25zX3N3ZWRpc2hbZWxlbV0ucHJvbXB0TXNnfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGxvY2FsZUFjdGlvbnM7XHJcbiAgfVxyXG5cclxuICBvbkNoYW5nZSh3ZWVrTm90ZXM6IFdlZWtOb3RlW10pIHtcclxuICAgIGNvbnN0IHdlZWtOb3RlID0gd2Vla05vdGVzLmxlbmd0aCA+IDAgP1xyXG4gICAgICB3ZWVrTm90ZXNbd2Vla05vdGVzLmxlbmd0aCAtIDFdIDpcclxuICAgICAge1xyXG4gICAgICAgIGlkOiBjcmVhdGVVVUlEKCksXHJcbiAgICAgICAgZGF0ZVRpbWU6IERhdGUubm93KCksXHJcbiAgICAgICAgLy9kYXRlVGltZTogd2Vla05vdGVzUmVwby5nZXRDdXJyZW50V2VlaygpLnRvRGF0ZSgpLmdldFRpbWUoKSxcclxuICAgICAgICBjb250ZW50OiBcIlwiLFxyXG4gICAgICAgIGFjbDogW1xyXG4gICAgICAgICAgLy8gRGVmYXVsdCBBQ0w6IExldCB1c2VyIHNlbGYgaGF2ZSBmdWxsIGNvbnRyb2wgb3ZlciB0aGlzIGl0ZW06XHJcbiAgICAgICAgICBuZXcgRG9jdW1lbnRBY2Nlc3MoXCJlbWFpbFwiLCBlbnYuY3VycmVudFVzZXIubWFpbCwgXCJTXCIpXHJcbiAgICAgICAgXS5tYXAoYWMgPT4gYWMudG9TdHJpbmcoKSlcclxuICAgICAgfTtcclxuICAgIFxyXG4gICAgY29uc3QgbmV3U3RhdGU6IFBhcnRpYWw8U3RhdGU+ID0ge1xyXG4gICAgICB3ZWVrTm90ZSxcclxuICAgICAgLy93ZWVrOiB3ZWVrTm90ZXNSZXBvLmdldEN1cnJlbnRXZWVrKCkud2VlaygpLFxyXG4gICAgICBpc0xvYWRpbmc6IGZhbHNlLFxyXG4gICAgICBzaG93TG9hZGluZ1Byb2dyZXNzOiBmYWxzZVxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoIXRoaXMuc3RhdGUud2Vla05vdGUgfHwgdGhpcy5zdGF0ZS53ZWVrTm90ZS5pZCAhPT0gd2Vla05vdGUuaWQgfHwgd2Vla05vdGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBuZXdTdGF0ZS5ub3RlcyA9IHdlZWtOb3RlLmNvbnRlbnQ7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFN0YXRlKG5ld1N0YXRlIGFzIFN0YXRlKTtcclxuICB9XHJcblxyXG4gIC8qYXN5bmMgY2hhbmdlV2VlayhkaXJlY3Rpb246IG51bWJlcikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgaXNMb2FkaW5nOiB0cnVlLFxyXG4gICAgICAgIGV2ZXJFZGl0ZWQ6IGZhbHNlLFxyXG4gICAgICAgIHdlZWtOb3RlOiBudWxsLFxyXG4gICAgICAgIGVycm9yOiB1bmRlZmluZWRcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuc2hvd1Byb2dyZXNzSWZMb2FkaW5nVGFrZXNUaW1lKCk7XHJcbiAgICAgIGF3YWl0IHdlZWtOb3Rlc1JlcG8uY2hhbmdlV2VlayhkaXJlY3Rpb24pO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgYXdhaXQgdGhpcy5zZXRTdGF0ZSh7ZXJyb3I6IFwiS3VuZGUgaW50ZSBsYWRkYSBkYXRhXCJ9KTtcclxuICAgIH0gXHJcbiAgfVxyXG5cclxuICBwcmV2V2VlaygpIHtcclxuICAgIHRoaXMuY2hhbmdlV2VlaygtMSk7XHJcbiAgfVxyXG5cclxuICBuZXh0V2VlaygpIHtcclxuICAgIHRoaXMuY2hhbmdlV2VlaygxKTtcclxuICB9Ki9cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qge25vdGVzLCBzaG93TG9hZGluZ1Byb2dyZXNzLCBpc0xvYWRpbmcsIHNob3dTYXZpbmdQcm9ncmVzcywgZXJyb3IsIGV2ZXJFZGl0ZWR9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICBjb25zdCB7aW50bH0gPSB0aGlzLmNvbnRleHQ7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2PlxyXG4gICAgICAgIHsvKjxkaXYgY2xhc3NOYW1lPXtga2VkX2JveGVkIGtlZE5vdGVwYWQke3dlZWtOdW1iZXIgPT09IGN1cnJlbnRXZWVrID8gXCIgY3VycmVudFdlZWtcIiA6IFwiXCJ9YH0+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgd2Vla1NlbGVjdGB9PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW1cIj5cclxuICAgICAgICAgICAgICAgIDxwPntMYFZlY2thICR7d2Vla051bWJlcn1gfTwvcD5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ0bi1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ0blwiIG9uQ2xpY2s9eygpID0+IHRoaXMucHJldldlZWsoKX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtYW5nbGUtbGVmdFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuXCIgb25DbGljaz17KCkgPT4gdGhpcy5uZXh0V2VlaygpfT5cclxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1hbmdsZS1yaWdodFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKi9cclxuICAgICAgICB9XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BrZWRfYm94ZWQga2VkTm90ZXBhZGB9PlxyXG4gICAgICAgICAgPGgzPjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwid2Vla05vdGVib29rLnRpdGxlXCIgZGVmYXVsdE1lc3NhZ2U9XCJBbnRlY2tuaW5nYXJcIi8+PC9oMz5cclxuICAgICAgICAgIDxXeXNpd3lnXHJcbiAgICAgICAgICAgIGFjdGlvbnM9e1tcclxuICAgICAgICAgICAgICBcImJvbGRcIixcclxuICAgICAgICAgICAgICBcIml0YWxpY1wiLFxyXG4gICAgICAgICAgICAgIFwidW5kZXJsaW5lXCIsXHJcbiAgICAgICAgICAgICAgXCJzdHJpa2V0aHJvdWdoXCIsXHJcbiAgICAgICAgICAgICAgXCJoZWFkaW5nMVwiLFxyXG4gICAgICAgICAgICAgIFwiaGVhZGluZzJcIixcclxuICAgICAgICAgICAgICBcImhlYWRpbmczXCIsXHJcbiAgICAgICAgICAgICAgXCJvbGlzdFwiLFxyXG4gICAgICAgICAgICAgIFwidWxpc3RcIixcclxuICAgICAgICAgICAgICBcIm91dGRlbnRcIixcclxuICAgICAgICAgICAgICBcImluZGVudFwiLFxyXG4gICAgICAgICAgICAgIFwibGluZVwiXX1cclxuICAgICAgICAgICAgZGVmYXVsdEFjdGlvbnM9e3RoaXMuZ2V0VHJhbnNsYXRlZEFjdGlvbnMoaW50bCl9XHJcbiAgICAgICAgICAgIGh0bWw9e2lzTG9hZGluZyA/IFwiPGRpdj48L2Rpdj5cIiA6IG5vdGVzLnN1YnN0cigwLCBNQVhfTk9URV9MRU5HVEgpfVxyXG4gICAgICAgICAgICBvbkNoYW5nZT17IWlzTG9hZGluZyAmJiAoaHRtbCA9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBub3RlczogaHRtbC5zdWJzdHIoMCwgTUFYX05PVEVfTEVOR1RIKSxcclxuICAgICAgICAgICAgICAgIGV2ZXJFZGl0ZWQ6IHRydWVcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB0aGlzLmF1dG9TYXZlci50cmlnZ2VyQ2hhbmdlKDUwMCk7XHJcbiAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICAgIDxoci8+XHJcbiAgICAgICAgICB7ZXJyb3IgP1xyXG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJlcnJvclwiPntlcnJvcn08L3A+IDpcclxuICAgICAgICAgICAgc2hvd0xvYWRpbmdQcm9ncmVzcyA/XHJcbiAgICAgICAgICAgICAgPHNwYW4+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJjb21tb24ubG9hZGluZ1wiIGRlZmF1bHRNZXNzYWdlPVwiTGFkZGFyLi4uXCIvPjxTcGlubmVyIC8+PC9zcGFuPiA6XHJcbiAgICAgICAgICAgICAgc2hvd1NhdmluZ1Byb2dyZXNzID8gPD5cclxuICAgICAgICAgICAgICAgIDxzcGFuPjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwiY29tbW9uLnNhdmluZ1wiIGRlZmF1bHRNZXNzYWdlPVwiU3BhcmFyLi4uXCIvPiAmbmJzcDsgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPFNwaW5uZXIgLz5cclxuICAgICAgICAgICAgICA8Lz4gOlxyXG4gICAgICAgICAgICAgIHRoaXMuaXNOb3Rlc0VkaXRlZCgpID8gXHJcbiAgICAgICAgICAgICAgICA8PiZuYnNwOzwvPiA6XHJcbiAgICAgICAgICAgICAgICAgIGV2ZXJFZGl0ZWQgP1xyXG4gICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cImNvbW1vbi5zYXZlZFwiIGRlZmF1bHRNZXNzYWdlPVwiU3BhcmFkXCIvPiA6XHJcbiAgICAgICAgICAgICAgICAgICAgPD4mbmJzcDs8Lz59XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGxlYXJuaW5nR29hbD86IHN0cmluZztcclxuICBvblNhdmU6IChsZWFybmluZ0dvYWw6IHN0cmluZykgPT4gdm9pZDtcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBsZWFybmluZ0dvYWw6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEFkZEN1c3RvbUdvYWwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsU3RhdGU+IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcylcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGxlYXJuaW5nR29hbDogcHJvcHMubGVhcm5pbmdHb2FsIHx8ICcnXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7bGVhcm5pbmdHb2FsfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCB7b25TYXZlfSA9IHRoaXMucHJvcHM7XHJcbiAgICByZXR1cm4gPGRpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdi1odG1sLXBvcnRsZXQgc3YtcG9ydGxldCBzdi1za2lwLXNwYWNlclwiPlxyXG4gICAgICAgICAgPGgyPjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwid2Vla3BsYW5uZXIuYWRkTGVhcm5pbmdHb2FsVGl0bGVcIiBkZWZhdWx0TWVzc2FnZT1cIkzDpGdnIHRpbGwgZWdldCBsw6RyYW5kZW3DpWxcIi8+PC9oMj5cclxuICAgICAgICAgIDxociAvPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwid2Vla3BsYW5uZXIuYWRkTGVhcm5pbmdHb2FsXCIgZGVmYXVsdE1lc3NhZ2U9XCJNw6VsXCIvPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiB0YWJJbmRleD17MX0gc2l6ZT17NTB9IGF1dG9Gb2N1c1xyXG4gICAgICAgICAgICAgICAgdmFsdWU9e2xlYXJuaW5nR29hbH1cclxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHRoaXMuc2V0U3RhdGUoe2xlYXJuaW5nR29hbDogZS50YXJnZXQudmFsdWV9KX0gLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wIHNwYWNlZFwiIC8+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxiciAvPjwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0XCI+XHJcbiAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJidG4gYnRuLWxhcmdlIGJ0bi1kZWZhdWx0XCJcclxuICAgICAgICAgIG9uQ2xpY2s9eygpPT5vblNhdmUobGVhcm5pbmdHb2FsKX0+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJjb21tb24uc2F2ZVwiIGRlZmF1bHRNZXNzYWdlPVwic2F2ZVwiLz48L2J1dHRvbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgVGV4dElucHV0IH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL2Zvcm0tZmllbGQtdGV4dC1pbnB1dCc7XHJcbmltcG9ydCB7IFRleHRBcmVhRm9ybUZpZWxkIH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL2Zvcm0tZmllbGQtdGV4dGFyZWEnO1xyXG5pbXBvcnQge0xhbmd1YWdlQ29udGV4dH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL0xhbmd1YWdlQ29udGV4dCc7XHJcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGlzVGFzazogYm9vbGVhblxyXG4gIG9uU2F2ZTogKG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZywgdXJsOiBzdHJpbmcpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgdXJsOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBZGRDdXN0b21UYXNrIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLFN0YXRlPiB7XHJcbiAgc3RhdGljIGNvbnRleHRUeXBlID0gTGFuZ3VhZ2VDb250ZXh0O1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpXHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBuYW1lOiAnJyxcclxuICAgICAgZGVzY3JpcHRpb246ICcnLFxyXG4gICAgICB1cmw6ICcnXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7IG5hbWUsIGRlc2NyaXB0aW9uLCB1cmwgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCB7IGlzVGFzaywgb25TYXZlIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3Qge2ludGx9ID0gdGhpcy5jb250ZXh0O1xyXG4gICAgcmV0dXJuIDxkaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXQgc3Ytc2tpcC1zcGFjZXJcIj5cclxuICAgICAgICA8aDI+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJjdXN0b21UYXNrLmFkZFdvcmtHb2FsVGl0bGVcIiBkZWZhdWx0TWVzc2FnZT1cIkzDpGdnIHRpbGwgZWdldCBhcmJldHNtw6VsXCIvPjwvaDI+XHJcbiAgICAgICAgPGhyIC8+XHJcbiAgICAgICAgPFRleHRJbnB1dFxyXG4gICAgICAgICAgbGFiZWw9e2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J2NvbW1vbi5uYW1lTGFiZWwnLCBkZWZhdWx0TWVzc2FnZTogJ05hbW4nfSl9XHJcbiAgICAgICAgICBpZD1cIkFkZEN1c3RvbVRhc2s6bmFtZVwiXHJcbiAgICAgICAgICBwbGFjZWhvbGRlcj17aW50bC5mb3JtYXRNZXNzYWdlKHtpZDonY3VzdG9tVGFzay5lbnRlck5hbWVQbGhkJywgZGVmYXVsdE1lc3NhZ2U6ICdBbmdlIG5hbW4uLi4nfSl9XHJcbiAgICAgICAgICB2YWx1ZT17bmFtZX1cclxuICAgICAgICAgIGF1dG9Gb2N1c1xyXG4gICAgICAgICAgb25DaGFuZ2U9e25hbWUgPT4gdGhpcy5zZXRTdGF0ZSh7bmFtZX0pfSAvPlxyXG5cclxuICAgICAgICA8VGV4dEFyZWFGb3JtRmllbGRcclxuICAgICAgICAgIHJvd3M9ezd9XHJcbiAgICAgICAgICBsYWJlbD0ge2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J2NvbW1vbi5kZXNjcmlwdGlvbkxhYmVsJywgZGVmYXVsdE1lc3NhZ2U6J0Jlc2tyaXZuaW5nJ30pfVxyXG4gICAgICAgICAgaWQ9XCJBZGRDdXN0b21UYXNrOmRlc2NyaXB0aW9uXCJcclxuICAgICAgICAgIHBsYWNlaG9sZGVyPXtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOidjb21tb24uYWRkRGVzY3JpcHRpb25QbGhkJywgZGVmYXVsdE1lc3NhZ2U6IFwiTMOkZ2cgdGlsbCBlbiBiZXNrcml2bmluZy4uLlwifSl9XHJcbiAgICAgICAgICB2YWx1ZT17ZGVzY3JpcHRpb259XHJcbiAgICAgICAgICBvbkNoYW5nZT17ZGVzY3JpcHRpb249PnRoaXMuc2V0U3RhdGUoe2Rlc2NyaXB0aW9ufSl9IC8+XHJcblxyXG4gICAgICAgIDxUZXh0SW5wdXRcclxuICAgICAgICAgIGxhYmVsPSB7aW50bC5mb3JtYXRNZXNzYWdlKHtpZDonY29tbW9uLmxpbmtMYWJlbCcsIGRlZmF1bHRNZXNzYWdlOidMw6Ruayd9KX0gXHJcbiAgICAgICAgICBpZD1cIkFkZEN1c3RvbVRhc2s6dXJsXCJcclxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiaHR0cDovL3d3dy4uLlwiXHJcbiAgICAgICAgICB2YWx1ZT17dXJsfVxyXG4gICAgICAgICAgb25DaGFuZ2U9e3VybCA9PiB0aGlzLnNldFN0YXRlKHt1cmx9KX0gLz5cclxuXHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0XCI+XHJcbiAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJidG4gYnRuLWxhcmdlIGJ0bi1kZWZhdWx0XCJcclxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9uU2F2ZShuYW1lLCBkZXNjcmlwdGlvbiwgdXJsKX0+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJjb21tb24uc2F2ZVwiIGRlZmF1bHRNZXNzYWdlPVwiU3BhcmFcIi8+PC9idXR0b24+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFRleHRJbnB1dCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9mb3JtLWZpZWxkLXRleHQtaW5wdXQnO1xyXG5pbXBvcnQgeyBUZXh0QXJlYUZvcm1GaWVsZCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9mb3JtLWZpZWxkLXRleHRhcmVhJztcclxuaW1wb3J0IHsgVXNlclRhc2ssIFVzZXJTdWJUYXNrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBjcmVhdGVVVUlEIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQgeyBVc2VyVGFza3NSZXBvIH0gZnJvbSAnLi4vLi4vcmVwb3MvdXNlci10YXNrcy1yZXBvJztcclxuaW1wb3J0IHtGb3JtYXR0ZWRNZXNzYWdlfSBmcm9tICdyZWFjdC1pbnRsJztcclxuaW1wb3J0IHtMYW5ndWFnZUNvbnRleHR9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9MYW5ndWFnZUNvbnRleHQnO1xyXG5cclxudHlwZSBQcm9wcyA9IHtcclxuICAvLyBFZGl0IE1vZGVcclxuICBtb2RlOiAnYWRkJztcclxuICB1c2VyVGFzazogVXNlclRhc2s7XHJcbiAgY2xvc2VEaWFsb2c7XHJcbiAgdXNlclRhc2tzUmVwbzogVXNlclRhc2tzUmVwb1xyXG59IHwge1xyXG4gIG1vZGU6ICdlZGl0JztcclxuICB1c2VyVGFzazogVXNlclRhc2s7XHJcbiAgc3ViVGFzazogVXNlclN1YlRhc2s7XHJcbiAgY2xvc2VEaWFsb2c6ICgpPT52b2lkO1xyXG4gIHVzZXJUYXNrc1JlcG86IFVzZXJUYXNrc1JlcG9cclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgZGVzY3JpcHRpb246IHN0cmluZztcclxuICB1cmw6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEFkZE9yRWRpdFN1YlRhc2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsU3RhdGU+IHtcclxuICBzdGF0aWMgY29udGV4dFR5cGUgPSBMYW5ndWFnZUNvbnRleHQ7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgaWYgKHByb3BzLm1vZGUgPT09ICdlZGl0Jykge1xyXG4gICAgICBjb25zdCB7c3ViVGFza30gPSBwcm9wcztcclxuICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICBuYW1lOiBzdWJUYXNrLm5hbWUgfHwgJycsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IHN1YlRhc2suZGVzY3JpcHRpb24gfHwgJycsXHJcbiAgICAgICAgdXJsOiBzdWJUYXNrLnVybCB8fCAnJ1xyXG4gICAgICB9O1xyXG4gICAgfSBlbHNlIHsgIFxyXG4gICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgIG5hbWU6ICcnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnJyxcclxuICAgICAgICB1cmw6ICcnXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzYXZlKCkge1xyXG4gICAgLy8gVXBkYXRlIHJlcG86XHJcbiAgICBjb25zdCB7cHJvcHN9ID0gdGhpcztcclxuICAgIGNvbnN0IHt1c2VyVGFzaywgY2xvc2VEaWFsb2csIHVzZXJUYXNrc1JlcG99ID0gcHJvcHM7XHJcbiAgICBjb25zdCB7bmFtZSwgZGVzY3JpcHRpb24sIHVybH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgaWYgKHByb3BzLm1vZGUgPT09ICdlZGl0Jykge1xyXG4gICAgICAvLyBFZGl0IGV4aXN0aW5nOlxyXG4gICAgICB1c2VyVGFza3NSZXBvLnVwZGF0ZShbdXNlclRhc2tdLCB1dCA9PiB7XHJcbiAgICAgICAgY29uc3Qge3N1YlRhc2tzfSA9IHV0O1xyXG4gICAgICAgIGlmIChzdWJUYXNrcykge1xyXG4gICAgICAgICAgdXQuc3ViVGFza3MgPSBzdWJUYXNrcy5tYXAoc3QgPT5cclxuICAgICAgICAgICAgc3QuaWQgPT09IHByb3BzLnN1YlRhc2suaWQgPyB7Li4uc3QsIG5hbWUsIGRlc2NyaXB0aW9uLCB1cmx9IDpcclxuICAgICAgICAgICAgey4uLnN0fVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gQ3JlYXRlIG5ldyB0YXNrXHJcbiAgICAgIGNvbnN0IG5ld1N1YlRhc2sgPSB7XHJcbiAgICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uLFxyXG4gICAgICAgIHVybFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gVXBkYXRlIHJlcG86XHJcbiAgICAgIHVzZXJUYXNrc1JlcG8udXBkYXRlKFt1c2VyVGFza10sIHV0ID0+IHtcclxuICAgICAgICBpZiAoIXV0LnN1YlRhc2tzKSB7XHJcbiAgICAgICAgICB1dC5zdWJUYXNrcyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB1dC5zdWJUYXNrcyA9IHV0LnN1YlRhc2tzLmNvbmNhdChuZXdTdWJUYXNrKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2xvc2UgZGlhbG9nXHJcbiAgICBjbG9zZURpYWxvZygpOyAgICBcclxuICB9XHJcblxyXG4gIGRlbGV0ZSgpIHtcclxuICAgIC8vIFVwZGF0ZSByZXBvOlxyXG4gICAgY29uc3QgcHJvcHMgPSB0aGlzLnByb3BzOyAgXHJcbiAgICBpZiAocHJvcHMubW9kZSAhPT0gJ2VkaXQnKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbiBvbmx5IGRlbGV0ZSBpbiBlZGl0IG1vZGVcIik7XHJcbiAgICB9XHJcbiAgICBwcm9wcy51c2VyVGFza3NSZXBvLnVwZGF0ZShbcHJvcHMudXNlclRhc2tdLCB1dCA9PiB7XHJcbiAgICAgIGlmICh1dC5zdWJUYXNrcykge1xyXG4gICAgICAgIHV0LnN1YlRhc2tzID0gdXQuc3ViVGFza3MuZmlsdGVyKHQgPT4gdC5pZCAhPT0gcHJvcHMuc3ViVGFzay5pZCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIENsb3NlIGRpYWxvZzpcclxuICAgIHByb3BzLmNsb3NlRGlhbG9nKCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7bmFtZSwgZGVzY3JpcHRpb24sIHVybH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgY29uc3Qge3Byb3BzfSA9IHRoaXM7XHJcbiAgICBjb25zdCBpc0VkaXRNb2RlID0gcHJvcHMubW9kZSA9PT0gJ2VkaXQnO1xyXG4gICAgY29uc3Qge2ludGx9ID0gdGhpcy5jb250ZXh0O1xyXG4gICAgcmV0dXJuIDw+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXQgc3Ytc2tpcC1zcGFjZXJcIj5cclxuICAgICAgICA8aDI+e2lzRWRpdE1vZGUgPyA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cImFkZGVkaXRzdWJ0YXNrLmVkaXRTdWJ0YXNrXCIgZGVmYXVsdE1lc3NhZ2U9J1JlZGlnZXJhIHVuZGVydXBwZ2lmdCcvPiA6IDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwiYWRkZWRpdHN1YnRhc2suYWRkU3VidGFza1wiIGRlZmF1bHRNZXNzYWdlPSdMw6RnZyB0aWxsIHVuZGVydXBwZ2lmdCcvPiB9PC9oMj5cclxuICAgICAgICA8aHIgLz5cclxuICAgICAgICA8VGV4dElucHV0XHJcbiAgICAgICAgICBhdXRvRm9jdXNcclxuICAgICAgICAgIGxhYmVsPSB7aW50bC5mb3JtYXRNZXNzYWdlKHtpZDonYWRkZWRpdHN1YnRhc2submFtZUxhYmVsJywgZGVmYXVsdE1lc3NhZ2U6J1VuZGVydXBwZ2lmdGVucyBuYW1uJ30pfVxyXG4gICAgICAgICAgaWQ9XCJBZGRVc2VyU3ViVGFzazpuYW1lXCJcclxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiXCJcclxuICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLm5hbWV9XHJcbiAgICAgICAgICBvbkNoYW5nZT17bmFtZSA9PiB0aGlzLnNldFN0YXRlKHtuYW1lfSl9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgPFRleHRBcmVhRm9ybUZpZWxkXHJcbiAgICAgICAgICBsYWJlbD0ge2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J2NvbW1vbi5kZXNjcmlwdGlvbkxhYmVsJywgZGVmYXVsdE1lc3NhZ2U6J0Jlc2tyaXZuaW5nJ30pfVxyXG4gICAgICAgICAgaWQ9XCJBZGRVc2VyU3ViVGFzazpkZXNjcmlwdGlvblwiXHJcbiAgICAgICAgICByb3dzPXs3fVxyXG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJcIlxyXG4gICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUuZGVzY3JpcHRpb259XHJcbiAgICAgICAgICBvbkNoYW5nZT17ZGVzY3JpcHRpb24gPT4gdGhpcy5zZXRTdGF0ZSh7ZGVzY3JpcHRpb259KX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICA8VGV4dElucHV0XHJcbiAgICAgICAgICBsYWJlbD0ge2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J2NvbW1vbi5saW5rTGFiZWwnLCBkZWZhdWx0TWVzc2FnZTonTMOkbmsnfSl9XHJcbiAgICAgICAgICBpZD1cIkFkZFVzZXJTdWJUYXNrOnVybFwiXHJcbiAgICAgICAgICBwbGFjZWhvbGRlcj1cIlwiXHJcbiAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS51cmx9XHJcbiAgICAgICAgICBvbkNoYW5nZT17dXJsID0+IHRoaXMuc2V0U3RhdGUoe3VybH0pfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgIDxiciAvPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdi1odG1sLXBvcnRsZXQgc3YtcG9ydGxldFwiPlxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHByb3BzLm1vZGUgPT09ICdlZGl0JyAmJiA8YnV0dG9uIGNsYXNzTmFtZT1cImJ0biBidG4td2FybmluZyBidG4tbGFyZ2UgcHVsbC1yaWdodFwiXHJcbiAgICAgICAgICBvbkNsaWNrPXtldiA9PiB0aGlzLmRlbGV0ZSgpfT5cclxuICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwiYWRkZWRpdHN1YnRhc2suZGVsZXRlU3VidGFza1wiIGRlZmF1bHRNZXNzYWdlPVwiVGEgYm9ydCB1bmRlcnVwcGdpZnRcIi8+PC9idXR0b24+fVxyXG4gICAgICAgIDxidXR0b25cclxuICAgICAgICAgIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi1sYXJnZSBidG4tZGVmYXVsdFwiXHJcbiAgICAgICAgICBvbkNsaWNrPXsoKT0+dGhpcy5zYXZlKCl9PjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwiY29tbW9uLnNhdmVcIiBkZWZhdWx0TWVzc2FnZT1cIlNwYXJhXCIvPjwvYnV0dG9uPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvPlxyXG4gIH1cclxufVxyXG5cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBVc2VyVGFzaywgVXNlclN1YlRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IFJlbmFtZWFibGVUZXh0IH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL3JlbmFtZWFibGUtdGV4dCc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IGdldFRhc2tUeXBlIH0gZnJvbSAnLi9nZXQtdGFzay10eXBlJztcclxuaW1wb3J0IFJlYWN0RGF0ZVBpY2tlciwgeyBSZWFjdERhdGVQaWNrZXJQcm9wcyB9IGZyb20gJ3JlYWN0LWRhdGVwaWNrZXInO1xyXG5pbXBvcnQgJy4uLy4uL2dsb2JhbHMvbW9tZW50LXN2LWxvY2FsZSc7XHJcbmltcG9ydCB7VGV4dElucHV0fSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvZm9ybS1maWVsZC10ZXh0LWlucHV0JztcclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBGb3JtRmllbGQgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvZm9ybS1maWVsZCc7XHJcbmltcG9ydCB7IEFkZE9yRWRpdFN1YlRhc2sgfSBmcm9tICcuL2FkZC1vci1lZGl0LXN1Yi10YXNrJztcclxuaW1wb3J0IHsgY3JlYXRlVVVJRCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHVwZGF0ZSBmcm9tICdyZWFjdC1hZGRvbnMtdXBkYXRlJztcclxuaW1wb3J0IHsgVXNlclRhc2tzUmVwbyB9IGZyb20gJy4uLy4uL3JlcG9zL3VzZXItdGFza3MtcmVwbyc7XHJcbmltcG9ydCB7IFRleHRBcmVhRm9ybUZpZWxkIH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL2Zvcm0tZmllbGQtdGV4dGFyZWEnO1xyXG5pbXBvcnQgeyBGb3JtYXR0ZWRNZXNzYWdlIH0gZnJvbSAncmVhY3QtaW50bCc7XHJcbmltcG9ydCB7TGFuZ3VhZ2VDb250ZXh0fSBmcm9tIFwiLi4vdXRpbGl0eS1jb21wb25lbnRzL0xhbmd1YWdlQ29udGV4dFwiXHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHVzZXJUYXNrOiBVc2VyVGFzaztcclxuICBvblVwZGF0ZTogKHVwZGF0ZXI6ICh1c2VyVGFzazogVXNlclRhc2spID0+IHZvaWQpID0+IHZvaWQ7XHJcbiAgb25EZWxldGU6ICh1c2VyVGFza0lkOiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgb3BlbkRpYWxvZzogKGRpYWxvZykgPT4gdm9pZDtcclxuICBjbG9zZURpYWxvZzogKCk9PnZvaWQ7XHJcbiAgdXNlclRhc2tzUmVwbzogVXNlclRhc2tzUmVwb1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIHVzZXJUYXNrOiBVc2VyVGFzaztcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XHJcbiAgZGVhZGxpbmU/OiBzdHJpbmc7XHJcbiAgdXJsOiBzdHJpbmc7XHJcbiAgc3ViVGFza3M/OiBVc2VyU3ViVGFza1tdO1xyXG4gIHNob3dDYWxlbmRhcj86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBFZGl0VXNlclRhc2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsU3RhdGU+IHtcclxuICBkYXRlUGlja2VyOiBhbnk7XHJcbiAgc3RhdGljIGNvbnRleHRUeXBlID0gTGFuZ3VhZ2VDb250ZXh0O1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIHVzZXJUYXNrOiBwcm9wcy51c2VyVGFzayxcclxuICAgICAgbmFtZTogcHJvcHMudXNlclRhc2submFtZSxcclxuICAgICAgZGVzY3JpcHRpb246IHByb3BzLnVzZXJUYXNrLmRlc2NyaXB0aW9uLFxyXG4gICAgICB1cmw6IHByb3BzLnVzZXJUYXNrLnVybCxcclxuICAgICAgZGVhZGxpbmU6IHByb3BzLnVzZXJUYXNrLmRlYWRsaW5lLFxyXG4gICAgICBzdWJUYXNrczogcHJvcHMudXNlclRhc2suc3ViVGFza3NcclxuICAgIH1cclxuICAgIHRoaXMub25Vc2VyVGFza3NDaGFuZ2VkID0gdGhpcy5vblVzZXJUYXNrc0NoYW5nZWQuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgdGhpcy5wcm9wcy51c2VyVGFza3NSZXBvLnN1YnNjcmliZSh0aGlzLm9uVXNlclRhc2tzQ2hhbmdlZCk7XHJcbiAgfVxyXG5cclxuICBvblVzZXJUYXNrc0NoYW5nZWQodXNlclRhc2tzOiBVc2VyVGFza1tdKSB7XHJcbiAgICBjb25zdCBteVVzZXJUYXNrID0gdXNlclRhc2tzLmZpbmQodXQgPT4gdXQuaWQgPT09IHRoaXMucHJvcHMudXNlclRhc2suaWQpO1xyXG4gICAgaWYgKCFteVVzZXJUYXNrKSB7XHJcbiAgICAgIHRoaXMucHJvcHMuY2xvc2VEaWFsb2coKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIHVzZXJUYXNrOiBteVVzZXJUYXNrLFxyXG4gICAgICBzdWJUYXNrczogbXlVc2VyVGFzay5zdWJUYXNrc1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgIHRoaXMucHJvcHMudXNlclRhc2tzUmVwby51bnN1YnNjcmliZSh0aGlzLm9uVXNlclRhc2tzQ2hhbmdlZCk7XHJcbiAgfVxyXG5cclxuICBpc01vZGlmaWVkKCkge1xyXG4gICAgLy8gRG9uJ3QgY291bnQgc3VidGFzayBjaGFuZ2VzISBUaGV5IGxpdmUgdGhlaXIgb3duIGxpZmUgYW5kIGlzIG1haW50YWluZWRcclxuICAgIC8vIGluIGFkZC1vci1lZGl0LXN1Yi10YXNrLnRzeC4gUmVhc29uOiBVc2VyIHdvdWxkIGV4cGVjdCBhZGRlZCAvZWRpdGVkIHN1YnRhc2tzXHJcbiAgICAvLyB0byBiZSBwZXJzaXN0ZWQgcmlnaHQgYXdheS4gTWF5IGNsaWNrIGF3YXkgdGhpcyBkaWFsb2cuXHJcbiAgICAvLyBBbHNvIHJlYXNvbjogQ2FuIGludm9rZSB0aGF0IGRpYWxvZyBieSBpdHNlbGYgZnJvbSBvdGhlciBjb21wb25lbnRzLiBGcm9tIFdlZWtQbGFubmVyXHJcbiAgICAvLyB3aGVuIGNsaWNraW5nIHRoZSBzdWJ0YXNrIGZvciBleGFtcGxlIVxyXG5cclxuICAgIGNvbnN0IHtkZWFkbGluZSwgZGVzY3JpcHRpb24sIG5hbWUsIHVybCwgdXNlclRhc2t9ID0gdGhpcy5zdGF0ZTtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIGRlYWRsaW5lICE9PSB1c2VyVGFzay5kZWFkbGluZSB8fFxyXG4gICAgICBkZXNjcmlwdGlvbiAhPT0gdXNlclRhc2suZGVzY3JpcHRpb24gfHxcclxuICAgICAgbmFtZSAhPT0gdXNlclRhc2submFtZSB8fFxyXG4gICAgICB1cmwgIT09IHVzZXJUYXNrLnVybCk7XHJcbiAgfVxyXG5cclxuICBhZGRTdWJUYXNrKCk6IGFueSB7XHJcbiAgICB0aGlzLnByb3BzLm9wZW5EaWFsb2coPEFkZE9yRWRpdFN1YlRhc2tcclxuICAgICAgbW9kZT1cImFkZFwiXHJcbiAgICAgIHVzZXJUYXNrPXt0aGlzLnN0YXRlLnVzZXJUYXNrfVxyXG4gICAgICBjbG9zZURpYWxvZz17dGhpcy5wcm9wcy5jbG9zZURpYWxvZ31cclxuICAgICAgdXNlclRhc2tzUmVwbz17dGhpcy5wcm9wcy51c2VyVGFza3NSZXBvfVxyXG4gICAgLz4pO1xyXG4gIH1cclxuXHJcbiAgZWRpdFN1YlRhc2soc3ViVGFzazogVXNlclN1YlRhc2spIHtcclxuICAgIHRoaXMucHJvcHMub3BlbkRpYWxvZyg8QWRkT3JFZGl0U3ViVGFza1xyXG4gICAgICBtb2RlPVwiZWRpdFwiXHJcbiAgICAgIHN1YlRhc2s9e3N1YlRhc2t9XHJcbiAgICAgIHVzZXJUYXNrPXt0aGlzLnN0YXRlLnVzZXJUYXNrfVxyXG4gICAgICBjbG9zZURpYWxvZz17dGhpcy5wcm9wcy5jbG9zZURpYWxvZ31cclxuICAgICAgdXNlclRhc2tzUmVwbz17dGhpcy5wcm9wcy51c2VyVGFza3NSZXBvfVxyXG4gICAgLz4pO1xyXG4gIH1cclxuICBcclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7IG5hbWUsIGRlc2NyaXB0aW9uLCB1cmwsIGRlYWRsaW5lLCBzdWJUYXNrcywgc2hvd0NhbGVuZGFyLCB1c2VyVGFzayB9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IHsgaWQsIGNvdXJzZU5hbWUgfSA9IHVzZXJUYXNrO1xyXG4gICAgY29uc3QgeyBvblVwZGF0ZSwgb25EZWxldGUgfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCBpc01vZGlmaWVkID0gdGhpcy5pc01vZGlmaWVkKCk7XHJcblxyXG4gICAgY29uc3QgdGFza1R5cGUgPSBnZXRUYXNrVHlwZSh1c2VyVGFzayk7XHJcbiAgICBjb25zdCBpc0N1c3RvbVRhc2sgPSB0YXNrVHlwZSA9PT0gJ2N1c3RvbVRhc2snO1xyXG4gICAgY29uc3QgZXhwaXJlZCA9IG1vbWVudCh1c2VyVGFzay5kZWFkbGluZSkgPCBtb21lbnQoKTtcclxuICAgIGNvbnN0IHtpbnRsfSA9IHRoaXMuY29udGV4dDtcclxuXHJcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJlZGl0VGFza0RpYWxvZyBzdi1odG1sLXBvcnRsZXQgc3YtcG9ydGxldCBzdi1za2lwLXNwYWNlclwiPlxyXG4gICAgICA8aDI+e2lzQ3VzdG9tVGFzayA/IFxyXG4gICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwidGFzay5lZGl0V29ya0dvYWxzXCIgZGVmYXVsdE1lc3NhZ2U9J1JlZGlnZXJhIGFyYmV0c23DpWwnLz4gOiBcclxuICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cInRhc2suZWRpdFRhc2tcIiBkZWZhdWx0TWVzc2FnZT0nUmVkaWdlcmEgdXBwZ2lmdCcvPn1cclxuICAgICAgPC9oMj5cclxuICAgICAgPGhyIC8+XHJcbiAgICAgIDxUZXh0SW5wdXRcclxuICAgICAgICBhdXRvRm9jdXNcclxuICAgICAgICBsYWJlbD17aXNDdXN0b21UYXNrID8gaW50bC5mb3JtYXRNZXNzYWdlKHtpZDogJ3Rhc2sudGFyZ2V0TmFtZUxhYmVsJywgZGVmYXVsdE1lc3NhZ2U6ICdBcmJldHNtw6VsZXRzIG5hbW4nfSkgIDogaW50bC5mb3JtYXRNZXNzYWdlKHtpZDogJ3Rhc2sudGFza05hbWVMYWJlbCcsIGRlZmF1bHRNZXNzYWdlOiAnVXBwZ2lmdGVucyBuYW1uJ30pfVxyXG4gICAgICAgIGlkPVwiRWRpdFVzZXJUYXNrOm5hbWVcIlxyXG4gICAgICAgIHBsYWNlaG9sZGVyPXtpc0N1c3RvbVRhc2sgPyBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiAndGFzay53aGF0U2hvdWxkWW91RG9QbGhkJywgZGVmYXVsdE1lc3NhZ2U6ICdWYWQgc2thIGR1IGfDtnJhPyd9KSA6IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6ICd0YXNrLmVudGVyVGFza05hbWVQbGhkJywgZGVmYXVsdE1lc3NhZ2U6ICdBbmdlIHVwcGdpZnRlbnMgbmFtbi4uLid9KSB9XHJcbiAgICAgICAgdmFsdWU9e25hbWV9XHJcbiAgICAgICAgb25DaGFuZ2U9e25hbWUgPT4gdGhpcy5zZXRTdGF0ZSh7bmFtZX0pfSAvPlxyXG4gICAgICBcclxuICAgICAge2lzQ3VzdG9tVGFzayAmJiA8PlxyXG4gICAgICAgIDxUZXh0QXJlYUZvcm1GaWVsZFxyXG4gICAgICAgICAgcm93cz17NX1cclxuICAgICAgICAgIGxhYmVsPSB7aW50bC5mb3JtYXRNZXNzYWdlKHtpZDogJ2NvbW1vbi5kZXNjcmlwdGlvbkxhYmVsJywgZGVmYXVsdE1lc3NhZ2U6ICdCZXNrcml2bmluZyd9KX1cclxuICAgICAgICAgIGlkPVwiRWRpdFVzZXJUYXNrOmRlc2NyaXB0aW9uXCJcclxuICAgICAgICAgIHBsYWNlaG9sZGVyPXtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiAnY29tbW9uLmFkZERlc2NyaXB0aW9uUGxoZCcsIGRlZmF1bHRNZXNzYWdlOiAnTMOkZ2cgdGlsbCBlbiBiZXNrcml2bmluZy4uLid9KX1cclxuICAgICAgICAgIHZhbHVlPXtkZXNjcmlwdGlvbn1cclxuICAgICAgICAgIG9uQ2hhbmdlPXtkZXNjcmlwdGlvbj0+dGhpcy5zZXRTdGF0ZSh7ZGVzY3JpcHRpb259KX0gLz5cclxuXHJcbiAgICAgICAgPFRleHRJbnB1dFxyXG4gICAgICAgICAgbGFiZWw9e2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J2NvbW1vbi5saW5rTGFiZWwnLCBkZWZhdWx0TWVzc2FnZTpcIkzDpG5rXCJ9KX1cclxuICAgICAgICAgIGlkPVwiRWR1dFVzZXJUYXNrOnVybFwiXHJcbiAgICAgICAgICBwbGFjZWhvbGRlcj1cImh0dHAocyk6Ly8uLi5cIlxyXG4gICAgICAgICAgdmFsdWU9e3VybH1cclxuICAgICAgICAgIG9uQ2hhbmdlPXt1cmwgPT4gdGhpcy5zZXRTdGF0ZSh7dXJsfSl9ID5cclxuXHJcbiAgICAgICAgPC9UZXh0SW5wdXQ+PC8+fVxyXG5cclxuICAgICAgICA8Rm9ybUZpZWxkIGxhYmVsPXtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiAndGFzay5zZXREZWFkbGluZScsIGRlZmF1bHRNZXNzYWdlOiAnQW5nZSBkZWFkbGluZSd9KX0+XHJcbiAgICAgICAgICB7KGRlYWRsaW5lIHx8IHNob3dDYWxlbmRhcikgP1xyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgICAgPFJlYWN0RGF0ZVBpY2tlciByZWY9e2VsZW0gPT4gdGhpcy5kYXRlUGlja2VyID0gZWxlbX1cclxuICAgICAgICAgICAgICAgICAgaWQ9XCJFZGl0VXNlclRhc2s6ZGVhZGxpbmVcIlxyXG4gICAgICAgICAgICAgICAgICBuZXh0TW9udGhCdXR0b25MYWJlbD1cIlwiIFxyXG4gICAgICAgICAgICAgICAgICBwcmV2aW91c01vbnRoQnV0dG9uTGFiZWw9XCJcIiBcclxuICAgICAgICAgICAgICAgICAgc2hvd1dlZWtOdW1iZXJzPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICBzZWxlY3RlZD17ZGVhZGxpbmUgJiYgbW9tZW50KGRlYWRsaW5lKS50b0RhdGUoKX1cclxuICAgICAgICAgICAgICAgICAgYXV0b0ZvY3VzPXtzaG93Q2FsZW5kYXJ9XHJcbiAgICAgICAgICAgICAgICAgIGRhdGVGb3JtYXQ9XCJ5eXl5LU1NLWRkXCJcclxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtleHBpcmVkID8gXCJleHBpcmVkXCIgOiB1bmRlZmluZWR9XHJcbiAgICAgICAgICAgICAgICAgIGxvY2FsZT17aW50bC5sb2NhbGV9XHJcbiAgICAgICAgICAgICAgICAgIHBvcHBlclBsYWNlbWVudD17aXNDdXN0b21UYXNrID8gXCJ0b3Atc3RhcnRcIiA6IFwiYm90dG9tLXN0YXJ0XCJ9XHJcbiAgICAgICAgICAgICAgICAgIG9uQmx1cj17KCk9PnRoaXMuc2V0U3RhdGUoe3Nob3dDYWxlbmRhcjogZmFsc2V9KX1cclxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3ZhbHVlPT57XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICBkZWFkbGluZTogdmFsdWUgJiYgbW9tZW50KHZhbHVlKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgc2hvd0NhbGVuZGFyOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwiZGVsZXRlRGF0ZVwiIGhyZWY9XCIjXCIgdGl0bGU9e2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6ICd0YXNrLnJlbW92ZURlYWRsaW5lJywgZGVmYXVsdE1lc3NhZ2U6ICdUYSBib3J0IGRlYWRsaW5lJ30pfSBvbkNsaWNrPXtldj0+e1xyXG4gICAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtkZWFkbGluZTogbnVsbCwgc2hvd0NhbGVuZGFyOiBmYWxzZX0pO1xyXG4gICAgICAgICAgICAgICAgfX0+PC9hPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj4gOlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRvcFwiIHJlZj17KCk9Pnt0aGlzLmRhdGVQaWNrZXIgPSBudWxsfX0+XHJcbiAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJidG5cIiBvbkNsaWNrPXtldiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGVQaWNrZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVQaWNrZXIuc2V0T3Blbih0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBzaG93Q2FsZW5kYXI6IHRydWVcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9fT5cclxuICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWNhbGVuZGFyXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwidGFzay5zZXREZWFkbGluZUxhYmVsXCIgZGVmYXVsdE1lc3NhZ2U9XCJBbmdlIGRlYWRsaW5lLi4uXCIvPlxyXG4gICAgICAgICAgICAgIDwvYT4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8L2Rpdj59XHJcbiAgICAgICAgPC9Gb3JtRmllbGQ+XHJcbiAgICAgIDxGb3JtRmllbGQgbGFiZWw9e2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6ICd0YXNrLnN1YlRhc2tzJywgZGVmYXVsdE1lc3NhZ2U6ICdVbmRlcnVwcGdpZnRlcid9KX0gPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGVhcm5pbmdHb2FsVGFza3NcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFza0NvbnRhaW5lclwiPlxyXG5cclxuICAgICAgICAgICAgICB7c3ViVGFza3MgJiYgc3ViVGFza3MubWFwKHN1YlRhc2sgPT4gPGRpdiBrZXk9e3N1YlRhc2suaWR9IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+PGFcclxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCk9PnRoaXMuZWRpdFN1YlRhc2soc3ViVGFzayl9XHJcbiAgICAgICAgICAgICAgICAgIGhyZWY9XCIjXCI+e3N1YlRhc2submFtZX08L2E+PC9kaXY+XHJcbiAgICAgICAgICAgICAgPC9kaXY+KX1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0b3BcIj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cIkVkaXRVc2VyVGFzazphZGRTdWJUYXNrXCIgY2xhc3NOYW1lPVwiYnRuXCJcclxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKT0+dGhpcy5hZGRTdWJUYXNrKCl9PlxyXG4gICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLXBsdXNcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+IDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwidGFzay5hZGRTdWJ0YXNrXCIgZGVmYXVsdE1lc3NhZ2U9XCJMw6RnZyB0aWxsIHVuZGVydXBwZ2lmdFwiLz5cclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9Gb3JtRmllbGQ+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGl2aWRlciBsYXJnZVwiIC8+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEJ1dHRvbiB0b3BcIj5cclxuICAgICAgICAgIDxidXR0b24gdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tZGVmYXVsdFwiXHJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpPT57XHJcbiAgICAgICAgICAgICAgaXNNb2RpZmllZCA/IG9uVXBkYXRlKHVzZXJUYXNrID0+IHtcclxuICAgICAgICAgICAgICAgIHVzZXJUYXNrLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgICAgICAgICAgdXNlclRhc2suZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgICAgIHVzZXJUYXNrLnVybCA9IHVybDtcclxuICAgICAgICAgICAgICAgIHVzZXJUYXNrLmRlYWRsaW5lID0gZGVhZGxpbmU7XHJcbiAgICAgICAgICAgICAgfSkgOiB0aGlzLnByb3BzLmNsb3NlRGlhbG9nKCk7XHJcbiAgICAgICAgICAgIH19PjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwiY29tbW9uLnNhdmVcIiBkZWZhdWx0TWVzc2FnZT1cIlNwYXJhXCIvPiBcclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsQnV0dG9uIHRvcFwiPlxyXG4gICAgICAgICAgPGJ1dHRvbiB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuXCJcclxuICAgICAgICAgICAgb25DbGljaz17KCk9PntcclxuICAgICAgICAgICAgICB0aGlzLnByb3BzLmNsb3NlRGlhbG9nKCk7XHJcbiAgICAgICAgICAgIH19PjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwiY29tbW9uLmNhbmNlbFwiIGRlZmF1bHRNZXNzYWdlPVwiQXZicnl0XCIvPjwvYnV0dG9uPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29uZmlybSB0b3AgcHVsbC1yaWdodFwiPlxyXG4gICAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi13YXJuaW5nXCJcclxuICAgICAgICAgICAgb25DbGljaz17KCk9PntcclxuICAgICAgICAgICAgICBvbkRlbGV0ZShpZCk7XHJcbiAgICAgICAgICAgIH19Pntpc0N1c3RvbVRhc2sgP1xyXG4gICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwidGFzay5yZW1vdmVXb3JrR29hbHNcIiBkZWZhdWx0TWVzc2FnZT1cIlRhIGJvcnQgYXJiZXRzbcOlbFwiLz4gOlxyXG4gICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwidGFzay5yZW1vdmVUaGlzVGFza1wiIGRlZmF1bHRNZXNzYWdlPVwiVGEgYm9ydCBkZW4gaMOkciB1cHBnaWZ0ZW5cIi8+XHJcbiAgICAgICAgICB9PC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICBcclxuICAgICAgey8qPGRpdiBjbGFzc05hbWU9XCJidG4gYnRuLXdhcm5pbmcgYnRuLWxhcmdlIHB1bGwtcmlnaHRcIiBvbkNsaWNrPXtldiA9PiBvbkRlbGV0ZShpZCl9PlxyXG4gICAgICAgIHtMYFRhIGJvcnQgYXJiZXRzbcOlbGB9PC9kaXY+XHJcbiAgICAgIHtpc01vZGlmaWVkICYmXHJcbiAgICAgICAgPGRpdlxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi1sYXJnZSBidG4tZGVmYXVsdFwiXHJcbiAgICAgICAgICB0YWJJbmRleD17MH1cclxuICAgICAgICAgIG9uQ2xpY2s9eygpPT5vblVwZGF0ZSh1c2VyVGFzayA9PiB7XHJcbiAgICAgICAgICAgIHVzZXJUYXNrLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgICAgICB1c2VyVGFzay5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICB1c2VyVGFzay51cmwgPSB1cmw7XHJcbiAgICAgICAgICB9KX0+IFNwYXJhPC9kaXY+fSovfVxyXG4gICAgPC9kaXY+XHJcbiAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgeyBVc2VyVGFzayB9IGZyb20gXCJrZWRiYWNrZW5kL21vZGVsc1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRhc2tUeXBlICh1c2VyVGFzazogVXNlclRhc2spIDogJ2NvdXJzZUJ1aWxkZXJUYXNrJyB8ICdzaXRlVmlzaW9uVGFzaycgfCAnc3ViamVjdFBsYW5uZXJUYXNrJyB8ICdjdXN0b21UYXNrJyB7XHJcbiAgcmV0dXJuIHVzZXJUYXNrLmNvdXJzZSAmJiB1c2VyVGFzay50YXNrICYmIHVzZXJUYXNrLmNvdXJzZS5sZW5ndGggPiAwICYmIHVzZXJUYXNrLnRhc2subGVuZ3RoID4gMCA/XHJcbiAgICAnY291cnNlQnVpbGRlclRhc2snIDpcclxuICAgIHVzZXJUYXNrLnNpdGVWaXNpb25QYWdlSWQgP1xyXG4gICAgICAnc2l0ZVZpc2lvblRhc2snIDpcclxuICAgICAgICB1c2VyVGFzay5jb3Vyc2VJbmZvID9cclxuICAgICAgICAgICdzdWJqZWN0UGxhbm5lclRhc2snIDpcclxuICAgICAgICAgICdjdXN0b21UYXNrJztcclxufVxyXG4iLCJleHBvcnQge1dlZWtQbGFubmVyfSBmcm9tICcuL3dlZWtwbGFubmVyJztcclxuIiwiaW1wb3J0IHsgVXNlclRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IFVzZXJUYXNrc0JveFByb3BzIH0gZnJvbSAnLi91c2VyLXRhc2tzLWJveCc7XHJcbmltcG9ydCB7IGFycmF5VG9NYXAsIGFycmF5VG9Mb29rdXAsIGNvbXBhcmVQcm9wLCBMIH0gZnJvbSBcIi4uLy4uL3V0aWxzL3V0aWxzXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFZpcnR1YWxMZWFybmluZ0dvYWwge1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBhbGxUYXNrczogVXNlclRhc2tbXTtcclxuICBzdGVwPzogbnVtYmVyO1xyXG4gIHVybD86IHN0cmluZztcclxuICB0YXNrczogVXNlclRhc2tbXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlZmluZSh0YXNrczogVXNlclRhc2tbXSkge1xyXG4gIGNvbnN0IHJlc3VsdCA9IFtdIGFzIFBhcnRpYWw8VXNlclRhc2tzQm94UHJvcHM+W107XHJcbiAgY29uc3QgbWFwcGVyID0ge30gYXMgeyBbbmFtZTogc3RyaW5nXTogVXNlclRhc2tzQm94UHJvcHMgfTtcclxuICBjb25zdCB0YXNrc1BlckNvdXJzZSA9IGFycmF5VG9Mb29rdXAodGFza3MsIHQgPT4gdC5jb3Vyc2VOYW1lIHx8ICcnKTtcclxuICBmb3IgKGNvbnN0IGNvdXJzZU5hbWUgb2YgT2JqZWN0LmtleXModGFza3NQZXJDb3Vyc2UpLnNvcnQoKS5maWx0ZXIoeCA9PiB4KS5jb25jYXQodGFza3NQZXJDb3Vyc2VbJyddID9cclxuICAgIFsnJ10gOiBbXSkpIHtcclxuICAgIGNvbnN0IGNvdXJzZVRhc2tzID0gdGFza3NQZXJDb3Vyc2VbY291cnNlTmFtZV0gfHwgdGFza3NQZXJDb3Vyc2VbJyddO1xyXG4gICAgY29uc3QgdGFza3NQZXJMZWFybmluZ0dvYWwgPSBhcnJheVRvTG9va3VwKGNvdXJzZVRhc2tzLCB0ID0+IHQubGVhcm5pbmdHb2FsKTtcclxuICAgIGNvbnN0IHJlc3VsdExlYXJuaW5nR29hbHM6IFZpcnR1YWxMZWFybmluZ0dvYWxbXSA9IFtdO1xyXG4gICAgZm9yIChjb25zdCBsZWFybmluZ0dvYWwgb2YgT2JqZWN0LmtleXModGFza3NQZXJMZWFybmluZ0dvYWwpKSB7XHJcbiAgICAgIGNvbnN0IGxnVGFza3MgPSB0YXNrc1BlckxlYXJuaW5nR29hbFtsZWFybmluZ0dvYWxdLnNvcnQoY29tcGFyZVByb3AoXCJkYXRlVGltZVwiKSk7XHJcbiAgICAgIGNvbnN0IGxlYXJuaW5nR29hbFRhc2sgPSBsZ1Rhc2tzXHJcbiAgICAgICAgLmZpbHRlcih0ID0+IHQubmFtZSA9PSBudWxsKSAvLyBJZiBuYW1lIGlzIHVuZGVmaW5lZCBvciBudWxsLCB0aGlzIHJlcHJlc2VudHMgYSBsZWFybmluZyBnb2FsXHJcbiAgICAgICAgWzBdO1xyXG4gICAgICBjb25zdCB1cmwgPSBsZWFybmluZ0dvYWxUYXNrICYmIGxlYXJuaW5nR29hbFRhc2sudXJsO1xyXG4gICAgICByZXN1bHRMZWFybmluZ0dvYWxzLnB1c2goe1xyXG4gICAgICAgIG5hbWU6IGxlYXJuaW5nR29hbCxcclxuICAgICAgICBhbGxUYXNrczogbGdUYXNrcyxcclxuICAgICAgICB1cmwsXHJcbiAgICAgICAgc3RlcDogbGdUYXNrcy5tYXAodCA9PiB0LnN0ZXApLmZpbHRlcihzdGVwID0+IHN0ZXApWzBdLFxyXG4gICAgICAgIHRhc2tzOiBsZ1Rhc2tzLmZpbHRlcih0ID0+IHQubmFtZSlcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXN1bHQucHVzaCh7XHJcbiAgICAgIGNvdXJzZU5hbWUsXHJcbiAgICAgIGxlYXJuaW5nR29hbHM6IHJlc3VsdExlYXJuaW5nR29hbHNcclxuICAgIH0pO1xyXG4gIH1cclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgVXNlclRhc2ssIFRhc2ssIFVzZXJTdWJUYXNrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBPcGVuQ2xvc2VCb3ggfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvb3Blbi1jbG9zZS1ib3gnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBwcmVzZXJ2ZUltcGVyc29uYXRpb25RdWVyeSB9IGZyb20gJy4uLy4uL2FjY2Vzcy1jb250cm9sJztcclxuaW1wb3J0IHsgY291cnNlTmFtZVRvQ3NzQ2xhc3MgfSBmcm9tICcuLi9jYWxlbmRhci9jb3Vyc2UtbmFtZS10by1jc3MtY2xhc3MnO1xyXG5pbXBvcnQgeyBnZXRUYXNrVHlwZSB9IGZyb20gJy4vZ2V0LXRhc2stdHlwZSc7XHJcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuaW1wb3J0IHsgVmlydHVhbExlYXJuaW5nR29hbCB9IGZyb20gJy4vcmVmaW5lcic7XHJcbmltcG9ydCB7IEZlYXR1cmVzIH0gZnJvbSAnLi4vLi4vZmVhdHVyZXMnO1xyXG5pbXBvcnQgY2ZnIGZyb20gJy4uLy4uL2dsb2JhbHMvS0VELmNmZyc7XHJcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XHJcbmltcG9ydCB7TGFuZ3VhZ2VDb250ZXh0fSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvTGFuZ3VhZ2VDb250ZXh0JztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVXNlclRhc2tzQm94UHJvcHMge1xyXG4gIGNvdXJzZU5hbWU6IHN0cmluZztcclxuICBsZWFybmluZ0dvYWxzOiBWaXJ0dWFsTGVhcm5pbmdHb2FsW10sXHJcbiAgdmlld0NvdXJzZVVybDogc3RyaW5nO1xyXG4gIG9wZW5Db3Vyc2VzPzogeyBbcGF0aDogc3RyaW5nXTogYm9vbGVhbiB9O1xyXG4gIHNldElzT3Blbj86IChjb3Vyc2VOYW1lOiBzdHJpbmcsIGlzT3BlbjogYm9vbGVhbikgPT4gdm9pZDtcclxuICBzZXRUYXNrRG9uZT86ICh0YXNrOiBVc2VyVGFzaywgZG9uZTogYm9vbGVhbikgPT4gdm9pZDtcclxuICBzZXRTdWJUYXNrRG9uZTogKHRhc2s6IFVzZXJUYXNrLCBzdWJUYXNrOiBVc2VyU3ViVGFzaywgZG9uZTogYm9vbGVhbikgPT4gdm9pZDtcclxuICBhZGRPd25UYXNrPzogKGNvdXJzZU5hbWU6IHN0cmluZywgbGVhcm5pbmdHb2FsTmFtZTogc3RyaW5nKSA9PiB2b2lkO1xyXG4gIGVkaXRUYXNrOiAodGFzazogVXNlclRhc2spID0+IHZvaWQ7XHJcbiAgZWRpdFN1YlRhc2s6ICh0YXNrOiBVc2VyVGFzaywgc3ViVGFzazogVXNlclN1YlRhc2spID0+IHZvaWQ7XHJcbiAgcmVtb3ZlTGVhcm5pbmdHb2FsOiAobGc6IFZpcnR1YWxMZWFybmluZ0dvYWwpPT52b2lkO1xyXG4gIGRpc3BsYXlQcm9ncmVzczogYm9vbGVhbjtcclxuICBwcm9ncmVzc0RhdGE6IHtjb21wbGV0ZWROdW1iZXJPZlRhc2tzOiBudW1iZXIsIG51bWJlck9mVGFza3M6IG51bWJlcn07XHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgVXNlclRhc2tzQm94IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFVzZXJUYXNrc0JveFByb3BzPiB7XHJcbiAgc3RhdGljIGNvbnRleHRUeXBlID0gTGFuZ3VhZ2VDb250ZXh0O1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBVc2VyVGFza3NCb3hQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gIH1cclxuXHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgY291cnNlTmFtZSxcclxuICAgICAgbGVhcm5pbmdHb2FscywgXHJcbiAgICAgIHByb2dyZXNzRGF0YSxcclxuICAgICAgZGlzcGxheVByb2dyZXNzXHJcbiAgICB9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IGlzT3BlbiA9ICEhdGhpcy5wcm9wcy5vcGVuQ291cnNlc1tjb3Vyc2VOYW1lXTtcclxuICAgIGNvbnN0IGZlYXR1cmVzID0gbmV3IEZlYXR1cmVzKCk7XHJcbiAgICBjb25zdCB7aW50bH0gPSB0aGlzLmNvbnRleHQ7XHJcblxyXG4gICAgcmV0dXJuIDxPcGVuQ2xvc2VCb3hcclxuICB0aXRsZT17PGg1Pntjb3Vyc2VOYW1lIHx8IDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwidXNlclRhc2tzLmdvYWxzXCIgIGRlZmF1bHRNZXNzYWdlPVwiRWduYSBsw6RyYW5kZW3DpWxcIi8+IH08L2g1Pn1cclxuICAgICAgaGVhZGVyT3Blbj17aXNPcGVufVxyXG4gICAgICBjbGFzc05hbWU9e2NvdXJzZU5hbWUgJiYgY291cnNlTmFtZVRvQ3NzQ2xhc3MoJ3dwLWNvdXJzZS0nLCBjb3Vyc2VOYW1lKX1cclxuICAgICAgb25PcGVuQ2xvc2U9e2JlY2FtZU9wZW4gPT4gdGhpcy5wcm9wcy5zZXRJc09wZW4oY291cnNlTmFtZSwgYmVjYW1lT3Blbil9XHJcbiAgICAgIGRpc3BsYXlQcm9ncmVzcz0ge2Rpc3BsYXlQcm9ncmVzc30gICAgICAgXHJcbiAgICAgIHByb2dyZXNzRGF0YSA9IHtwcm9ncmVzc0RhdGF9XHJcbiAgICAgID5cclxuICAgICAge2xlYXJuaW5nR29hbHMubWFwKGxnID0+XHJcbiAgICAgICAgPGRpdiBrZXk9e2xnLm5hbWV9IGNsYXNzTmFtZT1cImxlYXJuaW5nR29hbENvbnRhaW5lclwiPlxyXG4gICAgICAgICAge2xnLnN0ZXAgJiYgPGRpdiBjbGFzc05hbWU9XCJzdGVwSW5kaWNhdG9yXCI+e2xnLnN0ZXB9PC9kaXY+fVxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGVhcm5pbmdHb2FsVGV4dCBob3Jpem9udGFsSXRlbSB0b3BcIj57bGcubmFtZX08L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbVwiPlxyXG4gICAgICAgICAgICAgICZuYnNwOzxhXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0cmFzaFwiXHJcbiAgICAgICAgICAgICAgICBocmVmPVwiI1wiXHJcbiAgICAgICAgICAgICAgICAgdGl0bGU9e2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J3VzZXJUYXNrcy5kZWxldGVMZWFybmluZ0dvYWwnLCBkZWZhdWx0TWVzc2FnZTogJ1RhIGJvcnQgbMOkcmFuZGVtw6VsZXQgb2NoIGRlc3MgdXBwZ2lmdGVyJ30pfVxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17ZXY9PntcclxuICAgICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5yZW1vdmVMZWFybmluZ0dvYWwobGcpO1xyXG4gICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS10cmFzaFwiIC8+XHJcbiAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGVhcm5pbmdHb2FsVGFza3NcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YXNrQ29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAge2xnLnRhc2tzLm1hcCh1c2VyVGFzayA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc1dvcmtpbmcgPSB1c2VyVGFzay4kbWV0YSA9PT0gJ2FkZGluZycgfHwgdXNlclRhc2suJG1ldGEgPT09ICdkZWxldGluZycgfHwgdXNlclRhc2suJG1ldGEgPT09ICd1cGRhdGluZyc7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFza1R5cGUgPSBnZXRUYXNrVHlwZSh1c2VyVGFzayk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBleHBpcmVkID0gbW9tZW50KHVzZXJUYXNrLmRlYWRsaW5lKS5zdGFydE9mKCdkYXknKSA8IG1vbWVudCgpLnN0YXJ0T2YoJ2RheScpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiA8ZGl2IGtleT17dXNlclRhc2suaWR9IHN0eWxlPXtpc1dvcmtpbmcgPyB7IG9wYWNpdHk6IDAuNSB9IDoge319PlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e1wiY2hlY2tCb3hcIiArICh1c2VyVGFzay5kb25lID8gXCIgY2hlY2tlZFwiIDogXCJcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2V2ID0+ICFpc1dvcmtpbmcgJiYgdGhpcy5wcm9wcy5zZXRUYXNrRG9uZSh1c2VyVGFzaywgIXVzZXJUYXNrLmRvbmUpfT5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICB7dGFza1R5cGUgPT09ICdjb3Vyc2VCdWlsZGVyVGFzaycgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPXtnZXRUYXNrVXJsKHVzZXJUYXNrLCB0aGlzLnByb3BzLnZpZXdDb3Vyc2VVcmwpfT57dXNlclRhc2submFtZX08L2E+IDpcclxuICAgICAgICAgICAgICAgICAgICAgICB0YXNrVHlwZSA9PT0gJ3N1YmplY3RQbGFubmVyVGFzaycgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPXtnZXRTdWJqZWN0UGxhbm5lclRhc2tVcmwodXNlclRhc2spfT57dXNlclRhc2submFtZX08L2E+IDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFza1R5cGUgPT09ICdzaXRlVmlzaW9uVGFzaycgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9e3VzZXJUYXNrLnVybH0+e3VzZXJUYXNrLm5hbWV9PC9hPiA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17IXVzZXJUYXNrLnVybCA/IFwibGluay1sZXNzXCI6IFwiXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPXt1c2VyVGFzay51cmwgfHwgdW5kZWZpbmVkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0PXsodXNlclRhc2sudXJsKycnKS50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgobG9jYXRpb24uaG9zdC50b0xvd2VyQ2FzZSgpKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiX3NlbGZcIiA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiX2JsYW5rXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPnt1c2VyVGFzay5uYW1lfTwvYT59XHJcbiAgICAgICAgICAgICAgICAgICAgICB7dXNlclRhc2suZGVhZGxpbmUgJiYgPGRpdiBjbGFzc05hbWU9e1wiZGF0ZVNldFwiICsgKGV4cGlyZWQgPyAnIGV4cGlyZWQnIDogJycpfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgdGl0bGU9e21vbWVudCh1c2VyVGFzay5kZWFkbGluZSkuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKX0gY2xhc3NOYW1lPVwiZmEgZmEtY2FsZW5kYXJcIiBhcmlhLWhpZGRlbj1cInRydWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpPT57fX0+PC9pPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+fVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wIHRhc2tFZGl0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cImVkaXRJdGVtXCIgb25DbGljaz17KCkgPT4gdGhpcy5wcm9wcy5lZGl0VGFzayh1c2VyVGFzayl9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAge3VzZXJUYXNrLnN1YlRhc2tzICYmIDxkaXYgY2xhc3NOYW1lPVwic3VidGFza3NcIj5cclxuICAgICAgICAgICAgICAgICAgICB7dXNlclRhc2suc3ViVGFza3MubWFwKHN1YlRhc2sgPT5cclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtzdWJUYXNrLmlkfSA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcImNoZWNrQm94XCIgKyAoc3ViVGFzay5kb25lID8gXCIgY2hlY2tlZFwiIDogXCJcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtldiA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhaXNXb3JraW5nICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuc2V0U3ViVGFza0RvbmUodXNlclRhc2ssIHN1YlRhc2ssICFzdWJUYXNrLmRvbmUpfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9e3N1YlRhc2sudXJsIHx8IHVuZGVmaW5lZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldD17KHVzZXJUYXNrLnVybCsnJykudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKGxvY2F0aW9uLmhvc3QudG9Mb3dlckNhc2UoKSkgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJfc2VsZlwiIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiX2JsYW5rXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJUYXNrLnVybCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbGluay1sZXNzJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0+e3N1YlRhc2submFtZX08L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcCB0YXNrRWRpdFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cImVkaXRJdGVtXCIgb25DbGljaz17KCkgPT4gdGhpcy5wcm9wcy5lZGl0U3ViVGFzayh1c2VyVGFzaywgc3ViVGFzayl9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+KX1cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+fVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsZWFybmluZ0dvYWxUb29sc1wiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ0biBhZGRPd25Hb2FsXCJcclxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLnByb3BzLmFkZE93blRhc2sodGhpcy5wcm9wcy5jb3Vyc2VOYW1lLCBsZy5uYW1lKX0+XHJcbiAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtcGx1c1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4gPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9J3VzZXJUYXNrcy5hZGRMZWFybmluZ0dvYWwnIGRlZmF1bHRNZXNzYWdlPSdFZ2V0IGFyYmV0c23DpWwnLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxiciAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApfVxyXG4gICAgPC9PcGVuQ2xvc2VCb3g+XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRUYXNrVXJsKHVzZXJUYXNrOiBVc2VyVGFzaywgdmlld0NvdXJzZVVybDogc3RyaW5nKSB7XHJcbiAgaWYgKHVzZXJUYXNrLmNvdXJzZSAmJiB1c2VyVGFzay5jb3Vyc2UubGVuZ3RoID4gMCAmJiB1c2VyVGFzay50YXNrICYmIHVzZXJUYXNrLnRhc2subGVuZ3RoID4gMCkge1xyXG4gICAgY29uc3QgY291cnNlVXJsID0gcHJlc2VydmVJbXBlcnNvbmF0aW9uUXVlcnkodmlld0NvdXJzZVVybCwgeyBjb3Vyc2VJZDogdXNlclRhc2suY291cnNlWzBdLmlkIH0pO1xyXG4gICAgcmV0dXJuIGAke2NvdXJzZVVybH0jL3Rhc2svJHt1c2VyVGFzay50YXNrWzBdLmlkfWA7XHJcbiAgfVxyXG4gIHJldHVybiB1c2VyVGFzay51cmw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFN1YmplY3RQbGFubmVyVGFza1VybCh1c2VyVGFzazogVXNlclRhc2spIHtcclxuICBpZiAodXNlclRhc2suY291cnNlSW5mbyAmJiB1c2VyVGFzay50YXNrICYmIHVzZXJUYXNrLnRhc2subGVuZ3RoID4gMCkge1xyXG4gICAgY29uc3Qge3NjaG9vbCwgY291cnNlLCB0YWIgfSA9IHVzZXJUYXNrLmNvdXJzZUluZm87XHJcbiAgICBjb25zdCBjb3Vyc2VVcmwgPSBwcmVzZXJ2ZUltcGVyc29uYXRpb25RdWVyeShjZmcuS0VEX1NVQkpFQ1RfUExBTk5FUl9VUkwsIHt9KTtcclxuICAgIHJldHVybiBgJHtjb3Vyc2VVcmx9Iy8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZX0vdGFicy8ke3RhYn0vdGFza3MvJHt1c2VyVGFzay50YXNrWzBdLmlkfWA7XHJcbiAgfVxyXG4gIHJldHVybiB1c2VyVGFzay51cmw7XHJcbn1cclxuIiwiaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBsb2NhbE1vbWVudCB9IGZyb20gJy4uLy4uL2dsb2JhbHMvbW9tZW50LXN2LWxvY2FsZSc7XHJcblxyXG50eXBlIE1vbWVudCA9IG1vbWVudC5Nb21lbnQ7XHJcblxyXG5leHBvcnQgY2xhc3MgV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZSB7XHJcbiAgc3RhdGljIEVYUElSQVRJT05fSE9VUlMgPSAxMjtcclxuICBzdGF0aWMgVkVSU0lPTiA9IDI7XHJcblxyXG4gIHVzZXI6IHN0cmluZztcclxuICBsYXN0V3JpdGU6IG51bWJlcjtcclxuICB3ZWVrRGF0ZTogbnVtYmVyO1xyXG4gIG9wZW5Db3Vyc2VzOiB7IFtwYXRoOiBzdHJpbmddOiBib29sZWFuIH1cclxuXHJcbiAgY29uc3RydWN0b3IgKHVzZXJPckNvcHk6IHN0cmluZyB8IFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUpIHtcclxuICAgIGlmICh0eXBlb2YgdXNlck9yQ29weSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgdGhpcy51c2VyID0gdXNlck9yQ29weTtcclxuICAgICAgdGhpcy5sYXN0V3JpdGUgPSBEYXRlLm5vdygpO1xyXG4gICAgICB0aGlzLndlZWtEYXRlID0gbG9jYWxNb21lbnQoKS5zdGFydE9mKCd3ZWVrJykudmFsdWVPZigpO1xyXG4gICAgICB0aGlzLm9wZW5Db3Vyc2VzID0ge307XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBPYmplY3QuYXNzaWduKHRoaXMsIHVzZXJPckNvcHkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIGxvYWQodXNlcjogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBjb29raWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZTInKTtcclxuICAgIGNvbnN0IHN0b3JlZERhdGEgPSBjb29raWUgJiYgKEpTT04ucGFyc2UoY29va2llKSBhcyBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlKTtcclxuICAgIGNvbnN0IHN0YXRlID0gbmV3IFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUodXNlcik7XHJcbiAgICBpZiAoc3RvcmVkRGF0YSkgT2JqZWN0LmFzc2lnbihzdGF0ZSwgc3RvcmVkRGF0YSk7XHJcblxyXG4gICAgcmV0dXJuIHN0YXRlLnVzZXIgPT09IHVzZXIgJiYgIXN0YXRlLmlzRXhwaXJlZChtb21lbnQoKSkgP1xyXG4gICAgICBzdGF0ZSA6IG5ldyBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlKHVzZXIpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2F2ZSgpIHtcclxuICAgIHRoaXMubGFzdFdyaXRlID0gRGF0ZS5ub3coKTtcclxuICAgIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeSh0aGlzKTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlMicsIGpzb24pO1xyXG4gIH1cclxuXHJcbiAgaXNFeHBpcmVkIChhc09mOiBNb21lbnQpIHtcclxuICAgICAgcmV0dXJuIG1vbWVudCh0aGlzLmxhc3RXcml0ZSlcclxuICAgICAgICAuaXNCZWZvcmUoXHJcbiAgICAgICAgICAgIGFzT2YuYWRkKFxyXG4gICAgICAgICAgICAgICAgMC1XZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlLkVYUElSQVRJT05fSE9VUlMsICdob3VycycpXHJcbiAgICAgICAgKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBVc2VyVGFza3NCb3ggfSBmcm9tICcuL3VzZXItdGFza3MtYm94JztcclxuaW1wb3J0IHsgVXNlclRhc2ssIFVzZXJTdWJUYXNrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBjcmVhdGVVVUlELCBIdHRwRXJyb3IgfSBmcm9tIFwia2VkYmFja2VuZC9jbGllbnRcIjtcclxuaW1wb3J0IHsgcmVmaW5lLCBWaXJ0dWFsTGVhcm5pbmdHb2FsIH0gZnJvbSAnLi9yZWZpbmVyJztcclxuaW1wb3J0IHsgRW52IH0gZnJvbSAnLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgTCwgY29tcGFyZVByb3AgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuLy9pbXBvcnQgeyBDdXN0b21Hb2FsIH0gZnJvbSAnLi4vLi4vY29udHJhY3RzL2tlZC1tb2RlbHMnO1xyXG5pbXBvcnQgeyBUU09OIH0gZnJvbSAnLi4vLi4vdXRpbHMvdHNvbic7XHJcbmltcG9ydCB7IFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUgfSBmcm9tICcuL3dlZWtwbGFubmVyLXBlcnNpc3RlZC1zdGF0ZSc7XHJcbmltcG9ydCB7IFJlbW92ZUl0ZW0gfSBmcm9tICcuLi9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9yZW1vdmUtaXRlbSc7XHJcbmltcG9ydCB7IERpYWxvZ3MgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvZGlhbG9ncyc7XHJcbmltcG9ydCB7IEFkZEN1c3RvbUdvYWwgfSBmcm9tICcuL2FkZC1jdXN0b20tZ29hbCc7XHJcbmltcG9ydCB7IEFkZEN1c3RvbVRhc2sgfSBmcm9tICcuL2FkZC1jdXN0b20tdGFzayc7XHJcbmltcG9ydCB7IEVkaXRVc2VyVGFzayB9IGZyb20gJy4vZWRpdC11c2VyLXRhc2snO1xyXG5pbXBvcnQgeyBTcGlubmVyIH0gZnJvbSAnLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvc3Bpbm5lcic7XHJcbmltcG9ydCB7IE9wZW5DbG9zZUJveCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9vcGVuLWNsb3NlLWJveCc7XHJcbmltcG9ydCB7IFBlbmRpbmdKb2IgfSBmcm9tICcuLi8uLi91dGlscy9wZW5kaW5nLWpvYic7XHJcbmltcG9ydCB7IEFkZE9yRWRpdFN1YlRhc2sgfSBmcm9tICcuL2FkZC1vci1lZGl0LXN1Yi10YXNrJztcclxuaW1wb3J0IHsgZ2V0QWRqdXN0ZWRXZWVrLCBLRURXZWVrLCBnZXROZXh0V2Vla0RhdGUsIGdldFByZXZXZWVrRGF0ZSB9IGZyb20gJy4uLy4uL3V0aWxzL3dlZWt1dGlsJztcclxuaW1wb3J0IHsgRm9ybWF0dGVkTWVzc2FnZSB9IGZyb20gJ3JlYWN0LWludGwnO1xyXG5pbXBvcnQge0xhbmd1YWdlQ29udGV4dH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL0xhbmd1YWdlQ29udGV4dCc7XHJcbmltcG9ydCB7IFByb2dyZXNzIH0gZnJvbSAnLi4vY2hhcnRzL3Byb2dyZXNzJztcclxuaW1wb3J0IHtnZXRXZWVrcGxhbm5lclByb2dyZXNzRGF0YX0gZnJvbSAnLi4vY2hhcnRzL2NoYXJ0cy11dGlscydcclxuaW1wb3J0IHsgZmVhdHVyZXMgfSBmcm9tICcuLi8uLi9mZWF0dXJlcyc7XHJcblxyXG5jb25zdCBNQVhfU1RSQVRFR1lfTEVOR1RIID0gMTYzODQ7XHJcbmNvbnN0IE1BWF9BU1NFU1NNRU5UX0xFTkdUSCA9IDE2Mzg0O1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICB2aWV3Q291cnNlVXJsOiBzdHJpbmc7XHJcbiAgZW52OiBFbnY7XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgd2Vla0RhdGU6IG51bWJlcjtcclxuICBkaWFsb2dzOiBhbnlbXTtcclxuICB1c2VyVGFza3M6IFVzZXJUYXNrW107XHJcbiAgb3BlbkNvdXJzZXM6IHsgW3BhdGg6IHN0cmluZ106IGJvb2xlYW4gfVxyXG4gIHN0cmF0ZWd5Pzogc3RyaW5nO1xyXG4gIGFzc2Vzc21lbnQ/OiBzdHJpbmc7XHJcbiAgd2Vla1RleHRzVVQ6IFVzZXJUYXNrIHwgbnVsbDtcclxuICBzYXZpbmc6IGJvb2xlYW47XHJcbiAgaXNMb2FkaW5nOiBib29sZWFuO1xyXG4gIGlzQ29weWluZ1Rhc2tzOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgV2Vla1BsYW5uZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XHJcbiAgd2Vla1RleHRzU2F2aW5nSm9iOiBQZW5kaW5nSm9iO1xyXG4gIHN0YXRpYyBjb250ZXh0VHlwZSA9IExhbmd1YWdlQ29udGV4dDtcclxuXHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICB1c2VyVGFza3M6IFtdLFxyXG4gICAgICB3ZWVrRGF0ZTogRGF0ZS5ub3coKSxcclxuICAgICAgb3BlbkNvdXJzZXM6IHt9LFxyXG4gICAgICBkaWFsb2dzOiBbXSxcclxuICAgICAgc2F2aW5nOiBmYWxzZSxcclxuICAgICAgd2Vla1RleHRzVVQ6IG51bGwsXHJcbiAgICAgIGlzTG9hZGluZzogdHJ1ZSxcclxuICAgICAgaXNDb3B5aW5nVGFza3M6IGZhbHNlXHJcbiAgICB9XHJcbiAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy53ZWVrVGV4dHNTYXZpbmdKb2IgPSBuZXcgUGVuZGluZ0pvYigoKT0+dGhpcy5zYXZlV2Vla1RleHRzKCkpO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICB0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvLnN1YnNjcmliZSh0aGlzLm9uQ2hhbmdlKTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby51bnN1YnNjcmliZSh0aGlzLm9uQ2hhbmdlKTtcclxuICAgIHRoaXMud2Vla1RleHRzU2F2aW5nSm9iLnN0b3AoKTtcclxuICB9XHJcblxyXG4gIG9uQ2hhbmdlKHVzZXJUYXNrczogVXNlclRhc2tbXSwgcGVyc2lzdGVkOiBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlLCB3ZWVrVGV4dHNVVDogVXNlclRhc2spIHtcclxuICAgIGNvbnN0IG5ld1N0YXRlIDogUGFydGlhbDxTdGF0ZT4gPSB7XHJcbiAgICAgIHVzZXJUYXNrcyxcclxuICAgICAgd2Vla0RhdGU6IHBlcnNpc3RlZC53ZWVrRGF0ZSxcclxuICAgICAgb3BlbkNvdXJzZXM6IHBlcnNpc3RlZC5vcGVuQ291cnNlcyxcclxuICAgICAgd2Vla1RleHRzVVQsXHJcbiAgICAgIGlzTG9hZGluZzogZmFsc2VcclxuICAgIH1cclxuICAgIGlmICghdGhpcy5zdGF0ZS53ZWVrVGV4dHNVVCB8fCAod2Vla1RleHRzVVQuZGF0ZVRpbWUgIT09IHRoaXMuc3RhdGUud2Vla1RleHRzVVQuZGF0ZVRpbWUpKSB7XHJcbiAgICAgIC8vIENoYW5naW5nIHdlZWsuIFJlc2V0IHRvIG5ldyB3ZWVrJ3MgdmFsdWVzXHJcbiAgICAgIG5ld1N0YXRlLnN0cmF0ZWd5ID0gd2Vla1RleHRzVVQud2Vla1RleHRzLnN0cmF0ZWd5O1xyXG4gICAgICBuZXdTdGF0ZS5hc3Nlc3NtZW50ID0gd2Vla1RleHRzVVQud2Vla1RleHRzLmFzc2Vzc21lbnQ7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFN0YXRlKG5ld1N0YXRlIGFzIGFueSk7IC8vIFJlYWN0J3MgdXNlIG9mIFBpY2sgaW5zdGVhZCBvZiBQYXJ0aWFsIG1ha2VzIHRoaW5ncyBjb21wbGV4IGhlcmUuXHJcbiAgfVxyXG5cclxuICBpc1dlZWtUZXh0c0VkaXRlZCgpIHtcclxuICAgIGNvbnN0IHsgc3RyYXRlZ3ksIGFzc2Vzc21lbnQsIHdlZWtUZXh0c1VUIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgcmV0dXJuICEhd2Vla1RleHRzVVQgJiYgKHN0cmF0ZWd5ICE9PSB3ZWVrVGV4dHNVVC53ZWVrVGV4dHMuc3RyYXRlZ3kgfHwgYXNzZXNzbWVudCAhPT0gd2Vla1RleHRzVVQud2Vla1RleHRzLmFzc2Vzc21lbnQpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBzYXZlV2Vla1RleHRzKCkge1xyXG4gICAgY29uc29sZS5sb2coXCJTYXZpbmcgdGV4dHMuLi5cIik7XHJcbiAgICBjb25zdCB7IHN0cmF0ZWd5LCBhc3Nlc3NtZW50LCB3ZWVrVGV4dHNVVCB9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGlmICh0aGlzLmlzV2Vla1RleHRzRWRpdGVkKCkpIHtcclxuICAgICAgYXdhaXQgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby51cHNlcnQod2Vla1RleHRzVVQsIHV0ID0+IHtcclxuICAgICAgICB1dC53ZWVrVGV4dHMgPSB7IHN0cmF0ZWd5LCBhc3Nlc3NtZW50IH07XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJldldlZWsoKSB7XHJcbiAgICAvL3RoaXMuc2F2ZVdlZWtUZXh0cygpOyBcclxuICAgIHZhciBwcmV2V2Vla09iaiA9IGdldFByZXZXZWVrRGF0ZShtb21lbnQodGhpcy5zdGF0ZS53ZWVrRGF0ZSkpO1xyXG4gICAgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby5jaGFuZ2VXZWVrKHByZXZXZWVrT2JqLm5leHREYXRlLCBwcmV2V2Vla09iai5hZGp1c3RlZCk7XHJcbiAgfVxyXG5cclxuICBuZXh0V2VlaygpIHtcclxuICAgIC8vdGhpcy5zYXZlV2Vla1RleHRzKCk7XHJcbiAgICB2YXIgbmV4dFdlZWtPYmogPSBnZXROZXh0V2Vla0RhdGUobW9tZW50KHRoaXMuc3RhdGUud2Vla0RhdGUpKTtcclxuICAgIHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8uY2hhbmdlV2VlayhuZXh0V2Vla09iai5uZXh0RGF0ZSwgbmV4dFdlZWtPYmouYWRqdXN0ZWQpO1xyXG4gIH1cclxuXHJcbiAgb3BlbkRpYWxvZyhkaWFsb2cpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoeyBkaWFsb2dzOiBbLi4udGhpcy5zdGF0ZS5kaWFsb2dzLCBkaWFsb2ddIH0pO1xyXG4gIH1cclxuXHJcbiAgb3BlbkFkZEdvYWxEaWFsb2coKSB7XHJcbiAgICB0aGlzLm9wZW5EaWFsb2coPEFkZEN1c3RvbUdvYWxcclxuICAgICAgb25TYXZlPXthc3luYyAobGVhcm5pbmdHb2FsOiBzdHJpbmcpID0+IHtcclxuICAgICAgICBpZiAoIWxlYXJuaW5nR29hbCkgdGhyb3cgbmV3IEVycm9yICh0aGlzLmNvbnRleHQuaW50bC5mb3JtYXRNZXNzYWdlKHtpZDond2Vla3BsYW5uZXIuZW1wdHlMZWFybmluZ0dvYWxFcnInLCBkZWZhdWx0TWVzc2FnZTogJ0zDpHJhbmRlbcOlbGV0IGthbiBpbnRlIHZhcmEgdG9tdCd9KSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLnNhdmluZykge1xyXG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNhdmluZzogdHJ1ZSB9KTtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkQ3VzdG9tR29hbChsZWFybmluZ0dvYWwpO1xyXG4gICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNhdmluZzogZmFsc2UgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9fSAvPik7XHJcbiAgfVxyXG5cclxuICBvcGVuQWRkT3duVGFza0RpYWxvZyhjb3Vyc2VOYW1lOiBzdHJpbmcsIGxlYXJuaW5nR29hbE5hbWU6IHN0cmluZykge1xyXG4gICAgdGhpcy5vcGVuRGlhbG9nKDxBZGRDdXN0b21UYXNrXHJcbiAgICAgIGlzVGFzaz17IWNvdXJzZU5hbWV9XHJcbiAgICAgIG9uU2F2ZT17YXN5bmMgKG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZywgdXJsOiBzdHJpbmcpID0+IHtcclxuICAgICAgICBpZiAoIW5hbWUpIHRocm93IG5ldyBFcnJvciAodGhpcy5jb250ZXh0LmludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J3dlZWtwbGFubmVyLm5hbWVDYW5ub3RCZUVtcHR5JywgZGVmYXVsdE1lc3NhZ2U6ICdOYW1uZXQga2FuIGludGUgdmFyYSB0b210J30pKTtcclxuICAgICAgICBpZiAoIXRoaXMuc3RhdGUuc2F2aW5nKSB7XHJcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2F2aW5nOiB0cnVlIH0pO1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRDdXN0b21UYXNrKGNvdXJzZU5hbWUsIGxlYXJuaW5nR29hbE5hbWUsIG5hbWUsIGRlc2NyaXB0aW9uLCB1cmwpO1xyXG4gICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNhdmluZzogZmFsc2UgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9fSAvPik7XHJcbiAgfVxyXG5cclxuICBlZGl0VGFzayh1c2VyVGFzazogVXNlclRhc2spIHtcclxuICAgIHRoaXMub3BlbkRpYWxvZyg8RWRpdFVzZXJUYXNrXHJcbiAgICAgIHVzZXJUYXNrc1JlcG89e3RoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG99XHJcbiAgICAgIHVzZXJUYXNrPXt1c2VyVGFza31cclxuICAgICAgb25VcGRhdGU9e2FzeW5jICh1cGRhdGVyOiAodXQ6IFVzZXJUYXNrKSA9PiB2b2lkKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdGVzdCA9IHsuLi51c2VyVGFza307XHJcbiAgICAgICAgdXBkYXRlcih0ZXN0KTtcclxuICAgICAgICBpZiAoIXRlc3QubmFtZSkgdGhyb3cgbmV3IEVycm9yICh0aGlzLmNvbnRleHQuaW50bC5mb3JtYXRNZXNzYWdlKHtpZDond2Vla3BsYW5uZXIubmFtZU11c3ROb3RCZUVtcHR5JywgZGVmYXVsdE1lc3NhZ2U6ICdOYW1uZXQgZsOlciBpbnRlIHZhcmEgdG9tdCd9KSk7XHJcbiAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8udXBkYXRlKFt1c2VyVGFza10sIHVwZGF0ZXIpO1xyXG4gICAgICB9fVxyXG4gICAgICBvbkRlbGV0ZT17YXN5bmMgaWQgPT4ge1xyXG4gICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcclxuICAgICAgICBhd2FpdCB0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvLmRlbGV0ZShbaWRdKTtcclxuICAgICAgfX1cclxuICAgICAgb3BlbkRpYWxvZz17ZGlhbG9nPT50aGlzLm9wZW5EaWFsb2coZGlhbG9nKX1cclxuICAgICAgY2xvc2VEaWFsb2c9eygpPT50aGlzLmNsb3NlRGlhbG9nKCl9XHJcbiAgICAvPik7XHJcbiAgfVxyXG5cclxuICBlZGl0U3ViVGFzayh1c2VyVGFzazogVXNlclRhc2ssIHN1YlRhc2s6IFVzZXJTdWJUYXNrKSB7XHJcbiAgICB0aGlzLm9wZW5EaWFsb2coPEFkZE9yRWRpdFN1YlRhc2tcclxuICAgICAgdXNlclRhc2tzUmVwbz17dGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwb31cclxuICAgICAgbW9kZT1cImVkaXRcIlxyXG4gICAgICB1c2VyVGFzaz17dXNlclRhc2t9XHJcbiAgICAgIHN1YlRhc2s9e3N1YlRhc2t9XHJcbiAgICAgIGNsb3NlRGlhbG9nPXsoKT0+dGhpcy5jbG9zZURpYWxvZygpfVxyXG4gICAgLz4pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2VEaWFsb2coKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHsgZGlhbG9nczogdGhpcy5zdGF0ZS5kaWFsb2dzLnNsaWNlKDAsIHRoaXMuc3RhdGUuZGlhbG9ncy5sZW5ndGggLSAxKSB9KTtcclxuICB9XHJcblxyXG5cclxuXHJcbiAgYXN5bmMgYWRkQ3VzdG9tR29hbChsZWFybmluZ0dvYWw6IHN0cmluZykge1xyXG4gICAgbGV0IGxhdGVzdFRpbWVTdGFtcCA9IE1hdGgubWF4LmFwcGx5KFxyXG4gICAgICBNYXRoLm1heCxcclxuICAgICAgW3RoaXMuc3RhdGUud2Vla0RhdGVdLmNvbmNhdCh0aGlzLnN0YXRlLnVzZXJUYXNrcy5tYXAodCA9PiB0LmRhdGVUaW1lKSkpO1xyXG5cclxuICAgIGF3YWl0IHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8uaW5zZXJ0KFt7XHJcbiAgICAgIGlkOiBjcmVhdGVVVUlEKCksXHJcbiAgICAgIGxlYXJuaW5nR29hbCxcclxuICAgICAgZGF0ZVRpbWU6IGxhdGVzdFRpbWVTdGFtcCArIDIwMDBcclxuICAgIH1dKTtcclxuXHJcbiAgICBhd2FpdCB0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvLnNldFdlZWtQbGFubmVyQm94T3BlbihcIlwiLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHJlbW92ZUxlYXJuaW5nR29hbChsZWFybmluZ0dvYWw6IFZpcnR1YWxMZWFybmluZ0dvYWwpIHtcclxuICAgIGlmIChsZWFybmluZ0dvYWwudGFza3MubGVuZ3RoID4gMCkge1xyXG4gICAgICBpZiAoIWNvbmZpcm0odGhpcy5jb250ZXh0LmludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J3dlZWtwbGFubmVyLmNvbmZpcm1SZW1vdmVMZWFybmluZ09iamVjdGl2ZXMnLCBkZWZhdWx0TWVzc2FnZTogJ1RhIGJvcnQgbMOkcmFuZGVtw6VsIHNhbXQge2xlYXJuaW5nR29hbHNOdW1iZXJ9IHVwcGdpZnRlcj8nfSwge2xlYXJuaW5nR29hbHNOdW1iZXI6IGxlYXJuaW5nR29hbC50YXNrcy5sZW5ndGh9KSkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGF3YWl0IHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8uZGVsZXRlKGxlYXJuaW5nR29hbC5hbGxUYXNrcy5tYXAodCA9PiB0LmlkKSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBhZGRDdXN0b21UYXNrKGNvdXJzZU5hbWU6IHN0cmluZywgbGVhcm5pbmdHb2FsOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZywgdXJsOiBzdHJpbmcpIHtcclxuICAgIGxldCBsYXRlc3RUaW1lU3RhbXAgPSBNYXRoLm1heC5hcHBseShcclxuICAgICAgTWF0aC5tYXgsXHJcbiAgICAgIFt0aGlzLnN0YXRlLndlZWtEYXRlXS5jb25jYXQodGhpcy5zdGF0ZS51c2VyVGFza3MubWFwKHQgPT4gdC5kYXRlVGltZSkpKTtcclxuXHJcbiAgICAvKmNvbnN0IGVtcHR5TGVhcm5pbmdHb2FsUGxhY2Vob2xkZXIgPSB0aGlzLnN0YXRlLnVzZXJUYXNrcy5maW5kKHV0ID0+XHJcbiAgICAgIHV0Lm5hbWUgPT0gbnVsbCAmJlxyXG4gICAgICAhdXQuY291cnNlTmFtZSAmJlxyXG4gICAgICB1dC5sZWFybmluZ0dvYWwgPT09IGxlYXJuaW5nR29hbCk7XHJcblxyXG4gICAgaWYgKGVtcHR5TGVhcm5pbmdHb2FsUGxhY2Vob2xkZXIpIHtcclxuICAgICAgLy8gSGlqYWNrIGxlYXJuaW5nLWdvYWwgcGxhY2Vob2xkZXIgYW5kIG1ha2UgaXQgdGhlIHJlYWwgdGFzay5cclxuICAgICAgLy8gVGhpcyB3aWxsIG1ha2UgdGhlIGxlYXJuaW5nIGdvYWwgZGlzYXBwZWFyIG9uY2UgdGhpcyB0YXNrXHJcbiAgICAgIC8vIGlzIGRlbGV0ZWQuXHJcbiAgICAgIGF3YWl0IHVzZXJUYXNrc1JlcG8udXBkYXRlKFtlbXB0eUxlYXJuaW5nR29hbFBsYWNlaG9sZGVyXSwgdXQgPT4ge1xyXG4gICAgICAgIE9iamVjdC5hc3NpZ24odXQsIHsgbmFtZSwgZGVzY3JpcHRpb24sIHVybCB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2UgeyovXHJcbiAgICAgIC8vIEFkZCBhbm90aGVyIHRhc2sgdG8gc2FtZSBsZWFybmluZy1nb2FsXHJcbiAgICAgIGF3YWl0IHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8uaW5zZXJ0KFt7XHJcbiAgICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcclxuICAgICAgICBkYXRlVGltZTogbGF0ZXN0VGltZVN0YW1wICsgMjAwMCxcclxuICAgICAgICBjb3Vyc2VOYW1lLFxyXG4gICAgICAgIGxlYXJuaW5nR29hbCxcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uLFxyXG4gICAgICAgIHVybFxyXG4gICAgICB9XSk7XHJcbiAgICAvL31cclxuICB9XHJcblxyXG4gIHNldElzT3Blbihjb3Vyc2VOYW1lOiBzdHJpbmcsIGlzT3BlbjogYm9vbGVhbikge1xyXG4gICAgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby5zZXRXZWVrUGxhbm5lckJveE9wZW4oY291cnNlTmFtZSwgaXNPcGVuKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNldFRhc2tEb25lKHRhc2s6IFVzZXJUYXNrLCBkb25lOiBib29sZWFuKSB7XHJcbiAgICBhd2FpdCB0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvLnNldFRhc2tEb25lU3RhdGUodGFzaywgZG9uZSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBzZXRTdWJUYXNrRG9uZSh0YXNrOiBVc2VyVGFzaywgc3ViVGFzazogVXNlclN1YlRhc2ssIGRvbmU6IGJvb2xlYW4pIHtcclxuICAgIGF3YWl0IHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8uc2V0U3ViVGFza0RvbmVTdGF0ZSh0YXNrLCBzdWJUYXNrLmlkLCBkb25lKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGNvcHlGcm9tUHJldmlvdXNXZWVrKCkge1xyXG4gICAgYXdhaXQgdGhpcy5zZXRTdGF0ZSh7aXNDb3B5aW5nVGFza3M6IHRydWV9KTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgdXNlclRhc2tzLCBvcGVuQ291cnNlcywgd2Vla0RhdGUgfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgICBjb25zdCBwcmV2V2VlayA9IG1vbWVudCh3ZWVrRGF0ZSkuYWRkKC0xLCAnd2VlaycpO1xyXG4gICAgICBjb25zdCBwcmV2V2Vla05vID0gZ2V0QWRqdXN0ZWRXZWVrIChwcmV2V2Vlayk7XHJcbiAgICAgIGNvbnN0IHByZXZLRURXZWVrID0gS0VEV2VlayhwcmV2V2Vlay55ZWFyKCksIHByZXZXZWVrTm8pO1xyXG4gICAgICAvLyBSZWFkIGxhc3Qgd2VlaydzIGdvYWxzIGFuZCB0YXNrc1xyXG4gICAgICBsZXQgcHJldlRhc2tzID0gYXdhaXQgdGhpcy5wcm9wcy5lbnYua2VkQmFja2VuZENsaWVudC5saXN0PFVzZXJUYXNrPihcInVzZXJ0YXNrc1wiLCB7XHJcbiAgICAgICAgZnJvbTogcHJldktFRFdlZWsubm90QmVmb3JlLFxyXG4gICAgICAgIHRvOiBwcmV2S0VEV2Vlay5ub3RBZnRlcixcclxuICAgICAgICByb2xlOiBcIlVTRVJcIixcclxuICAgICAgICBpbmNsdWRlOiBbXCJ0YXNrXCIsIFwiY291cnNlXCIsIFwiYWNsXCJdLFxyXG4gICAgICAgIGZsYWdzOiBbXCJpbmNsdWRlSWRzT25seVwiXVxyXG4gICAgICB9KTtcclxuICAgICAgcHJldlRhc2tzID0gcHJldlRhc2tzXHJcbiAgICAgICAgLmZpbHRlcihwcmV2VGFzayA9PiAhcHJldlRhc2suZG9uZSkgIC8vIERvbid0IGNvcHkgZG9uZSB0YXNrc1xyXG4gICAgICAgIC5maWx0ZXIocHJldlRhc2sgPT4gISFwcmV2VGFzay5uYW1lKSAvLyBEb24ndCBjb3B5IGVtcHR5IGxlYXJuaW5nIGdvYWxzXHJcbiAgICAgICAgLmZpbHRlcihwcmV2VGFzayA9PiAhdXNlclRhc2tzLnNvbWUodGFza09mQ3VycmVudFdlZWsgPT5cclxuICAgICAgICAgIHRhc2tPZkN1cnJlbnRXZWVrLm5hbWUgPT09IHByZXZUYXNrLm5hbWUgJiZcclxuICAgICAgICAgIHRhc2tPZkN1cnJlbnRXZWVrLmxlYXJuaW5nR29hbCA9PT0gcHJldlRhc2subGVhcm5pbmdHb2FsICYmXHJcbiAgICAgICAgICB0YXNrT2ZDdXJyZW50V2Vlay5jb3Vyc2VOYW1lID09PSBwcmV2VGFzay5jb3Vyc2VOYW1lKSk7IC8vIElnbm9yZSBpZGVudGljYWwgdGFza3MgKGFscmVhZHkgY29waWVkKVxyXG4gICAgICAgICAgXHJcbiAgICAgIHZhciB0ZXN0ID0gW3dlZWtEYXRlXS5jb25jYXQodXNlclRhc2tzLm1hcCh0ID0+IHQuZGF0ZVRpbWUpKTtcclxuICAgICAgLy8gTm93IGNyZWF0ZSBjb3BpZXMgYnV0IHBsYWNlIHRoZW0gaW4gdGhlIGN1cnJlbnQgd2Vlay5cclxuICAgICAgbGV0IGxhdGVzdFRpbWVTdGFtcCA9IE1hdGgubWF4LmFwcGx5KE1hdGgubWF4LCBbd2Vla0RhdGVdLmNvbmNhdCh1c2VyVGFza3MubWFwKHQgPT4gdC5kYXRlVGltZSkpKTtcclxuXHJcbiAgICAgIGNvbnN0IGNvcGllcyA9IHByZXZUYXNrcy5zb3J0KGNvbXBhcmVQcm9wKFwiZGF0ZVRpbWVcIikpLm1hcCh0YXNrID0+IHtcclxuICAgICAgICBjb25zdCBjb3B5OiBVc2VyVGFzayA9IHsgLi4udGFzaywgZGF0ZVRpbWU6IGxhdGVzdFRpbWVTdGFtcCArPSAxMDAwIH07XHJcbiAgICAgICAgY29weS5pZCA9IGNyZWF0ZVVVSUQoKTtcclxuICAgICAgICBpZiAoY29weS5zdWJUYXNrcykge1xyXG4gICAgICAgICAgY29weS5zdWJUYXNrcyA9IGNvcHkuc3ViVGFza3MuZmlsdGVyKHN0ID0+ICFzdC5kb25lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVsZXRlIGNvcHkuJGV0YWc7XHJcbiAgICAgICAgcmV0dXJuIGNvcHk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gU3RvcmUgaXRcclxuICAgICAgYXdhaXQgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby5pbnNlcnQoY29waWVzKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2lzQ29weWluZ1Rhc2tzOiBmYWxzZX0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0SGVhZGVyVGl0bGUoKXtcclxuICAgIHJldHVybiA8aDQ+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ3ZWVrcGxhbm5lci5sb2dCb29rXCIgIGRlZmF1bHRNZXNzYWdlPVwiTG9nZ2Jva1wiLz48L2g0PjtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHdlZWtOdW1iZXIgPSBtb21lbnQodGhpcy5zdGF0ZS53ZWVrRGF0ZSkud2VlaygpO1xyXG4gICAgY29uc3Qgc2hvd1Byb2dyZXNzQ2hhcnRzID0gZmVhdHVyZXMud2Vla3BsYW5uZXJDaGFydHM7XHJcbiAgICAvL2NvbnNvbGUubG9nKFwiV2Vla3lkYXRlOiBcIiAgKyBuZXcgRGF0ZSh0aGlzLnN0YXRlLndlZWtEYXRlKSArIFwiIHdoaWNoIGlzIHdlZWsgbm8gXCIgKyB3ZWVrTnVtYmVyKTtcclxuICAgIGNvbnN0IGN1cnJlbnRXZWVrID0gbW9tZW50KCkud2VlaygpO1xyXG4gICAgY29uc3QgdGFza1NldHMgPSByZWZpbmUodGhpcy5zdGF0ZS51c2VyVGFza3MpO1xyXG4gICAgY29uc3QgeyBkaWFsb2dzLCB3ZWVrVGV4dHNVVCwgc3RyYXRlZ3ksIGFzc2Vzc21lbnQsIGlzTG9hZGluZywgaXNDb3B5aW5nVGFza3MgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCBpc1NhdmluZyA9IHdlZWtUZXh0c1VUICYmICh3ZWVrVGV4dHNVVC4kbWV0YSA9PT0gJ2FkZGluZycgfHwgd2Vla1RleHRzVVQuJG1ldGEgPT09ICd1cGRhdGluZycpO1xyXG4gICAgY29uc3QgaXNTdHJhdGVneUVkaXRlZCA9ICEhd2Vla1RleHRzVVQgJiYgKHN0cmF0ZWd5ICE9PSB3ZWVrVGV4dHNVVC53ZWVrVGV4dHMuc3RyYXRlZ3kpO1xyXG4gICAgY29uc3QgaXNBc3Nlc3NtZW50RWRpdGVkID0gISF3ZWVrVGV4dHNVVCAmJiAoYXNzZXNzbWVudCAhPT0gd2Vla1RleHRzVVQud2Vla1RleHRzLmFzc2Vzc21lbnQpO1xyXG4gICAgY29uc3QgZW5hYmxlU2F2ZUJ1dHRvbiA9ICFpc1NhdmluZyAmJiAoaXNTdHJhdGVneUVkaXRlZCB8fCBpc0Fzc2Vzc21lbnRFZGl0ZWQpO1xyXG5cclxuICAgIHZhciBjaGFydFRhc2tzID0gZ2V0V2Vla3BsYW5uZXJQcm9ncmVzc0RhdGEodGFza1NldHMpO1xyXG5cclxuICAgIHZhciBwZXJjZW50YWdlID0gdGFza1NldHMubGVuZ3RoID4gMCA/IGNoYXJ0VGFza3MuY29tcGxldGVkVGFza3MgLyBjaGFydFRhc2tzLnRvdGFsTnVtYmVyT2ZUYXNrcyAqIDEwMCA6IDA7XHJcbiAgICByZXR1cm4gPGRpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9e2BrZWRfYm94ZWQgd2Vla1BsYW5uZXIke3dlZWtOdW1iZXIgPT09IGN1cnJlbnRXZWVrID8gXCIgY3VycmVudFdlZWtcIiA6IFwiXCJ9YH1cclxuICAgICAgICBvbktleURvd249e2V2ID0+IHtcclxuICAgICAgICAgIGlmIChldi53aGljaCA9PT0gODMgJiYgZXYuY3RybEtleSkge1xyXG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAoIWlzU2F2aW5nICYmIHRoaXMuaXNXZWVrVGV4dHNFZGl0ZWQoKSkge1xyXG4gICAgICAgICAgICAgIHRoaXMud2Vla1RleHRzU2F2aW5nSm9iLnRyaWdnZXJDaGFuZ2UoMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9fT5cclxuICAgICAgICB7c2hvd1Byb2dyZXNzQ2hhcnRzICYmIHRoaXMuZ2V0SGVhZGVyVGl0bGUoKX1cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndpZGdldHNcIj5cclxuICAgICAgICAgIHtzaG93UHJvZ3Jlc3NDaGFydHMgPyA8ZGl2IGNsYXNzTmFtZT1cInByb2dyZXNzQmFyXCI+PFByb2dyZXNzIHBlcmNlbnRhZ2UgPSB7cGVyY2VudGFnZX0vPjwvZGl2PiA6IHRoaXMuZ2V0SGVhZGVyVGl0bGUoKX1cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgd2Vla1NlbGVjdGB9PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtXCI+XHJcbiAgICAgICAgICAgICAgPHA+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ3ZWVrcGxhbm5lci53ZWVrTnVtYmVyXCIgdmFsdWVzPXt7d2Vla051bWJlcjogd2Vla051bWJlcn19IGRlZmF1bHRNZXNzYWdlPVwiVmVja2Ege3dlZWtOdW1iZXJ9XCIvPjwvcD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW1cIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ0bi1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG5cIiBvbkNsaWNrPXsoKSA9PiB0aGlzLnByZXZXZWVrKCl9PlxyXG4gICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1hbmdsZS1sZWZ0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ0blwiIG9uQ2xpY2s9eygpID0+IHRoaXMubmV4dFdlZWsoKX0+XHJcbiAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWFuZ2xlLXJpZ2h0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIHt0YXNrU2V0cy5sZW5ndGggPiAwICYmIDxociAvPn1cclxuXHJcbiAgICAgICAge3Rhc2tTZXRzLm1hcChwcm9wcyA9PlxyXG4gICAgICAgICAgPFVzZXJUYXNrc0JveFxyXG4gICAgICAgICAgICBrZXk9e3Byb3BzLmNvdXJzZU5hbWV9XHJcbiAgICAgICAgICAgIHsuLi5wcm9wc31cclxuICAgICAgICAgICAgY291cnNlTmFtZT17cHJvcHMuY291cnNlTmFtZX1cclxuICAgICAgICAgICAgbGVhcm5pbmdHb2Fscz17cHJvcHMubGVhcm5pbmdHb2Fsc31cclxuICAgICAgICAgICAgdmlld0NvdXJzZVVybD17dGhpcy5wcm9wcy52aWV3Q291cnNlVXJsfVxyXG4gICAgICAgICAgICBvcGVuQ291cnNlcz17dGhpcy5zdGF0ZS5vcGVuQ291cnNlc31cclxuICAgICAgICAgICAgYWRkT3duVGFzaz17KGNvdXJzZU5hbWU6IHN0cmluZywgbGVhcm5pbmdHb2FsTmFtZTogc3RyaW5nKSA9PiB0aGlzLm9wZW5BZGRPd25UYXNrRGlhbG9nKGNvdXJzZU5hbWUsIGxlYXJuaW5nR29hbE5hbWUpfVxyXG4gICAgICAgICAgICBzZXRJc09wZW49e3RoaXMuc2V0SXNPcGVuLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgIHNldFRhc2tEb25lPXt0aGlzLnNldFRhc2tEb25lLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgIHNldFN1YlRhc2tEb25lPXt0aGlzLnNldFN1YlRhc2tEb25lLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgIGVkaXRUYXNrPXt0YXNrID0+IHRoaXMuZWRpdFRhc2sodGFzayl9XHJcbiAgICAgICAgICAgIGVkaXRTdWJUYXNrPXsodGFzaywgc3ViVGFzaykgPT4gdGhpcy5lZGl0U3ViVGFzayh0YXNrLCBzdWJUYXNrKX1cclxuICAgICAgICAgICAgcmVtb3ZlTGVhcm5pbmdHb2FsPXtsZyA9PiB0aGlzLnJlbW92ZUxlYXJuaW5nR29hbChsZyl9IFxyXG4gICAgICAgICAgICBkaXNwbGF5UHJvZ3Jlc3MgPSB7c2hvd1Byb2dyZXNzQ2hhcnRzfVxyXG4gICAgICAgICAgICBwcm9ncmVzc0RhdGEgPSB7Y2hhcnRUYXNrcy5zdWJqZWN0RGF0YVtwcm9wcy5jb3Vyc2VOYW1lXX0gLz4pfVxyXG5cclxuICAgICAgICA8aHIgLz5cclxuXHJcbiAgICAgICAge2lzTG9hZGluZyA/IDxTcGlubmVyIC8+IDogPGRpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnRuXCIgb25DbGljaz17ZXYgPT4gdGhpcy5vcGVuQWRkR29hbERpYWxvZygpfT5cclxuICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtbGlzdC1hbHRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwid2Vla3BsYW5uZXIubGVhcm5pbmdHb2FsXCIgZGVmYXVsdE1lc3NhZ2U9XCJFZ2V0IGzDpHJhbmRlbcOlbFwiLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidG5cIiBzdHlsZT17aXNDb3B5aW5nVGFza3MgPyB7b3BhY2l0eTogMC41fSA6IHVuZGVmaW5lZH0gb25DbGljaz17ZXYgPT4gKCFpc0NvcHlpbmdUYXNrcykgJiYgdGhpcy5jb3B5RnJvbVByZXZpb3VzV2VlaygpfT5cclxuICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtY2xvbmVcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwid2Vla3BsYW5uZXIuY29weVByZXZpb3VzV2Vla1Rha3NcIiBkZWZhdWx0TWVzc2FnZT1cIktvcGllcmEgZWoga2xhcmEgZnLDpW4gZsO2cmVnw6VlbmRlIHZlY2thXCIvPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8T3BlbkNsb3NlQm94XHJcbiAgICAgICAgICAgIHRpdGxlPXs8aDU+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ3ZWVrcGxhbm5lci5zdHJhdGVneUFuZEV2YWx1YXRpb25cIiBkZWZhdWx0TWVzc2FnZT1cIlN0cmF0ZWdpICYgVXR2w6RyZGVyaW5nXCIvPjwvaDU+fVxyXG4gICAgICAgICAgICBoZWFkZXJPcGVuPXt0aGlzLnN0YXRlLm9wZW5Db3Vyc2VzW1wiU3RyYXRVdHZcIl19XHJcbiAgICAgICAgICAgIG9uT3BlbkNsb3NlPXtiZWNhbWVPcGVuID0+IHRoaXMuc2V0SXNPcGVuKFwiU3RyYXRVdHZcIiwgYmVjYW1lT3Blbil9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIDxoMz48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cIndlZWtwbGFubmVyLnN0cmF0ZWd5XCIgZGVmYXVsdE1lc3NhZ2U9XCJTdHJhdGVnaVwiLz48L2gzPlxyXG4gICAgICAgICAgICA8cD48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cIndlZWtwbGFubmVyLnN0cmF0ZWd5RGVzY3JpcHRpb25cIiBkZWZhdWx0TWVzc2FnZT1cIkh1ciBqYWcgc2thIGfDtnJhIGbDtnIgYXR0IGzDpHJhIG1pZy5cIi8+PC9wPlxyXG4gICAgICAgICAgICA8aHIvPlxyXG4gICAgICAgICAgICA8dGV4dGFyZWFcclxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3ZWVrcGxhbm5lci10ZXh0YXJlYVwiXHJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e3RoaXMucHJvcHMuZW52LnR1dG9yZWR9XHJcbiAgICAgICAgICAgICAgdmFsdWU9e3N0cmF0ZWd5ICYmIHN0cmF0ZWd5LnN1YnN0cigwLCBNQVhfU1RSQVRFR1lfTEVOR1RIKX1cclxuICAgICAgICAgICAgICBvbkNoYW5nZT17ZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c3RyYXRlZ3k6IChldi50YXJnZXQudmFsdWUgfHwgJycpLnN1YnN0cigwLCBNQVhfU1RSQVRFR1lfTEVOR1RIKX0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy53ZWVrVGV4dHNTYXZpbmdKb2IudHJpZ2dlckNoYW5nZSg1MDApO1xyXG4gICAgICAgICAgICAgIH19IC8+XHJcblxyXG4gICAgICAgICAgICA8aDM+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ3ZWVrcGxhbm5lci5ldmFsdWF0aW9uXCIgZGVmYXVsdE1lc3NhZ2U9XCJVdHbDpHJkZXJpbmdcIi8+PC9oMz5cclxuICAgICAgICAgICAgPHA+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ3ZWVrcGxhbm5lci5ldmFsdWF0aW9uRGVzY3JpcHRpb25cIiBkZWZhdWx0TWVzc2FnZT1cIlJlZmxla3Rpb24ga3JpbmcgZGluIGFyYmV0c2luc2F0cyBvY2ggZGluYSB2YWxkYSBzdHJhdGVnaWVyIHVuZGVyIHZlY2thbi5VdHbDpHJkZXJhIGkgZsO2cmjDpWxsYW5kZSB0aWxsIGRpbmEgbcOlbC5cIi8+PC9wPlxyXG4gICAgICAgICAgICA8aHIvPlxyXG4gICAgICAgICAgICA8dGV4dGFyZWFcclxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3ZWVrcGxhbm5lci10ZXh0YXJlYVwiXHJcbiAgICAgICAgICAgICAgdmFsdWU9e2Fzc2Vzc21lbnQgJiYgYXNzZXNzbWVudC5zdWJzdHIoMCwgTUFYX0FTU0VTU01FTlRfTEVOR1RIKX1cclxuICAgICAgICAgICAgICBkaXNhYmxlZD17dGhpcy5wcm9wcy5lbnYudHV0b3JlZH1cclxuICAgICAgICAgICAgICBvbkNoYW5nZT17ZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YXNzZXNzbWVudDogKGV2LnRhcmdldC52YWx1ZSB8fCAnJykuc3Vic3RyKDAsIE1BWF9BU1NFU1NNRU5UX0xFTkdUSCl9KVxyXG4gICAgICAgICAgICAgICAgdGhpcy53ZWVrVGV4dHNTYXZpbmdKb2IudHJpZ2dlckNoYW5nZSg1MDApO1xyXG4gICAgICAgICAgICAgIH0gfS8+XHJcbiAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidG5cIlxyXG4gICAgICAgICAgICAgIHRhYkluZGV4PXswfVxyXG4gICAgICAgICAgICAgIHN0eWxlPXtlbmFibGVTYXZlQnV0dG9uID8ge30gOiB7b3BhY2l0eTogMC41fX1cclxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKT0+IWlzU2F2aW5nICYmIHRoaXMud2Vla1RleHRzU2F2aW5nSm9iLnRyaWdnZXJDaGFuZ2UoMCl9PlxyXG4gICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtZmxvcHB5LW9cIiBhcmlhLWhpZGRlbj1cInRydWVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICB7ZW5hYmxlU2F2ZUJ1dHRvbiA/IDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwiY29tbW9uLnNhdmVcIiBkZWZhdWx0TWVzc2FnZT1cIiBTcGFyYVwiLz4gOiA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cImNvbW1vbi5zYXZlZFwiIGRlZmF1bHRNZXNzYWdlPVwiIFNwYXJhZFwiLz59XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvT3BlbkNsb3NlQm94PlxyXG5cclxuICAgICAgICA8L2Rpdj59XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8RGlhbG9nc1xyXG4gICAgICAgIGRpYWxvZ3M9e2RpYWxvZ3N9XHJcbiAgICAgICAgcG9wRGlhbG9nPXsoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoXHJcbiAgICAgICAgICAgICAgKHtkaWFsb2dzfSkgPT4gKHsgZGlhbG9nczogZGlhbG9ncy5zbGljZSgwLCBkaWFsb2dzLmxlbmd0aCAtIDEpIH0pKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IC8+XHJcbiAgICA8L2Rpdj5cclxuICB9XHJcbn0iLCJpbXBvcnQgeyBwYXJzZVF1ZXJ5U3RyaW5nIH0gZnJvbSAnLi4vdXRpbHMvcXVlcnktc3RyaW5nJztcclxuaW1wb3J0IEZlYXR1cmVEZXNjcmlwdGlvbnMgZnJvbSAnLi9mZWF0dXJlLWZsYWdzLmpzb24nO1xyXG5pbXBvcnQgeyBjZmcgfSBmcm9tICcuLi9nbG9iYWxzL0tFRC5jZmcnO1xyXG5cclxudHlwZSBGZWF0dXJlRmxhZ3MgPSB7cmVhZG9ubHkgW1AgaW4ga2V5b2YgdHlwZW9mIEZlYXR1cmVEZXNjcmlwdGlvbnNdOiBib29sZWFufTtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRmVhdHVyZXMgZXh0ZW5kcyBGZWF0dXJlRmxhZ3Mge31cclxuXHJcbmV4cG9ydCBjbGFzcyBGZWF0dXJlcyB7XHJcbiAgcHJpdmF0ZSBfZmVhdHVyZXM6IEZlYXR1cmVGbGFncztcclxuICBwcml2YXRlIF9pbml0aWFsaXplZCA9IGZhbHNlO1xyXG5cclxuICBpbml0KCkge1xyXG4gICAgaWYgKHRoaXMuX2luaXRpYWxpemVkKSByZXR1cm47XHJcbiAgICBsZXQgdHVybmVkT25GZWF0dXJlcyA9IChjZmcuS0VEX0ZFQVRVUkVTIHx8IFwiXCIpLnNwbGl0KCcsJykubWFwKG5hbWUgPT4gbmFtZS50cmltKCkudG9Mb3dlckNhc2UoKSk7XHJcbiAgICBjb25zdCBxdWVyeSA9IHBhcnNlUXVlcnlTdHJpbmcobG9jYXRpb24uc2VhcmNoLCB7dG9Mb3dlcjogdHJ1ZX0pO1xyXG5cclxuICAgIGlmIChxdWVyeS50ZXN0dmVyc2lvbikge1xyXG4gICAgICB0dXJuZWRPbkZlYXR1cmVzID0gW1wiKlwiXTtcclxuICAgIH1cclxuICAgIGlmIChxdWVyeS5mZWF0dXJlcykge1xyXG4gICAgICB0dXJuZWRPbkZlYXR1cmVzID0gcXVlcnkuZmVhdHVyZXNcclxuICAgICAgICAuc3BsaXQoJywnKVxyXG4gICAgICAgIC5tYXAoZmVhdHVyZSA9PiBmZWF0dXJlLnRyaW0oKS50b0xvd2VyQ2FzZSgpKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHR1cm5PbkFsbCA9IHR1cm5lZE9uRmVhdHVyZXMuaW5jbHVkZXMoJyonKTtcclxuICAgIHRoaXMuX2ZlYXR1cmVzID0ge30gYXMgRmVhdHVyZUZsYWdzO1xyXG4gICAgZm9yIChjb25zdCBmZWF0dXJlTmFtZSBvZiBPYmplY3Qua2V5cyhGZWF0dXJlRGVzY3JpcHRpb25zKSkge1xyXG4gICAgICB0aGlzLl9mZWF0dXJlc1tmZWF0dXJlTmFtZV0gPSB0dXJuT25BbGwgfHxcclxuICAgICAgICB0dXJuZWRPbkZlYXR1cmVzLmluY2x1ZGVzKGZlYXR1cmVOYW1lLnRvTG93ZXJDYXNlKCkpXHJcbiAgICB9XHJcbiAgICB0aGlzLl9pbml0aWFsaXplZCA9IHRydWU7ICAgIFxyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IgKCkge1xyXG4gICAgZm9yIChjb25zdCBmZWF0dXJlTmFtZSBvZiBPYmplY3Qua2V5cyhGZWF0dXJlRGVzY3JpcHRpb25zKSkge1xyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgZmVhdHVyZU5hbWUsIHtcclxuICAgICAgICBnZXQoKSB7XHJcbiAgICAgICAgICBpZiAoIXRoaXMuX2luaXRpYWxpemVkKSB0aGlzLmluaXQoKTtcclxuICAgICAgICAgIHJldHVybiB0aGlzLl9mZWF0dXJlc1tmZWF0dXJlTmFtZV07XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQodmFsdWUpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmVhdHVyZSBmbGFncyBjYW5ub3QgYmUgc2V0IGhlcmUnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZmVhdHVyZXMgPSBuZXcgRmVhdHVyZXMoKTtcclxuIiwiZXhwb3J0ICogZnJvbSAnLi9mZWF0dXJlcyc7XHJcbiIsImltcG9ydCBjZmcgZnJvbSAnLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuXHJcbmRlY2xhcmUgdmFyIHByb2Nlc3M6IGFueTtcclxuXHJcbmNmZy5FTlZJUk9OTUVOVCA9IHByb2Nlc3MuZW52LkVOVklST05NRU5UIGFzIFwicHJvZHVjdGlvblwiIHwgXCJkZXZlbG9wbWVudFwiIHwgXCJ0ZXN0XCI7XHJcbmNmZy5LRURfQVBJX1VSTCA9IHByb2Nlc3MuZW52LktFRF9BUElfVVJMOyAvLyBcImh0dHBzOi8va2VkYmFja2VuZHRlc3QuYXp1cmV3ZWJzaXRlcy5uZXQvYXBpL1wiXHJcbmNmZy5FRFNfQVBJX1VSTCA9IHByb2Nlc3MuZW52LkVEU19BUElfVVJMOyAvLyBcImh0dHBzOi8vZWRzcG9ydGFsb3dpbmFwaS5henVyZXdlYnNpdGVzLm5ldC9hcGkvXCJcclxuY2ZnLktFRF9UT0tFTl9VUkwgPSBwcm9jZXNzLmVudi5LRURfVE9LRU5fVVJMOyAvLyBcImh0dHBzOi8va2VkYXV0aHRlc3QuYXp1cmV3ZWJzaXRlcy5uZXQvdG9rZW5cIlxyXG5jZmcuS0VEX0NMSUVOVF9JRCA9IHByb2Nlc3MuZW52LktFRF9DTElFTlRfSUQ7IC8vIFwiZGV2Y2xpZW50XCIsIFwidGVzdGNsaWVudFwiLCBcIi4uLlwiXHJcbmNmZy5LRURfQ0xJRU5UX1NFQ1JFVCA9IHByb2Nlc3MuZW52LktFRF9DTElFTlRfU0VDUkVUO1xyXG5jZmcuS0VEX1JFQUxNID0gcHJvY2Vzcy5lbnYuS0VEX1JFQUxNOyAvLyBcIlNFMVwiXHJcbmNmZy5LRURfTE9DQUxFID0gY2ZnLktFRF9MT0NBTEUgfHwgcHJvY2Vzcy5lbnYuS0VEX0xPQ0FMRTsgLy8gXCJzdlwiLCBcImVuXCIuIE9ubHkgc2V0IGZyb20gcHJvY2Vzcy5lbnYgaWYgbm90IHNldCBmcm9tIFNpdGVWaXNpb24gZWxlbWVudCBjb25maWcuXHJcbmNmZy5LRURfU0NIT09MX0xPQ0FMRSA9IGNmZy5LRURfU0NIT09MX0xPQ0FMRSB8fCBwcm9jZXNzLmVudi5LRURfU0NIT09MX0xPQ0FMRTsgLy8gXCJzdlwiLCBcImVuX3NpblwiLCBcImVuX25pblwiLiBPbmx5IHNldCBmcm9tIHByb2Nlc3MuZW52IGlmIG5vdCBzZXQgZnJvbSBTaXRlVmlzaW9uIGVsZW1lbnQgY29uZmlnLlxyXG5jZmcuS0VEX1JFU09VUkNFU19VUkwgPSBjZmcuS0VEX1JFU09VUkNFU19VUkwgfHwgcHJvY2Vzcy5lbnYuS0VEX1JFU09VUkNFU19VUkw7XHJcbiIsIi8qIFRoZXNlIHNjcmlwdHMgYXNzdW1lIHNvbWUgb2YgdGhlIGdsb2JhbCB2YXJzIGhhdmUgYWxyZWFkeSBiZWVuIHNldDpcclxuICAqIEtFRC5jZmdcclxuICAqIEtFRC5lbnYuY3VycmVudFVzZXJcclxuXHJcbiAgVGhlIHJlc3Qgd2lsbCBiZSBzZXQgaGVyZSAoY2xpZW50IHNpZGUpXHJcbiovXHJcbmltcG9ydCAnLi9jb25maWd1cmUnO1xyXG5pbXBvcnQgJy4vc2V0LWJlYXJlci1wcm92aWRlcnMnO1xyXG5pbXBvcnQgJy4vc2V0LWtlZC1iYWNrZW5kLWNsaWVudCc7XHJcbmltcG9ydCAnLi9zZXQtZWRzLWNsaWVudCc7XHJcbiIsImltcG9ydCB7IHBhcnNlUXVlcnlTdHJpbmcsIGdlbmVyYXRlUXVlcnlTdHJpbmcsIHNwbGl0VXJsQW5kUXVlcnkgfSBmcm9tIFwiLi4vdXRpbHMvcXVlcnktc3RyaW5nXCI7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRDbGllbnRXZWIsIFdlYlNlcnZlckJlYXJlclByb3ZpZGVyLCBpc29tb3JwaGljLCBzdG9yYWdlIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnR3ZWInO1xyXG5pbXBvcnQgeyBCZWFyZXJQcm92aWRlciwgS2VkQmVhcmVyUHJvdmlkZXIgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCBjZmcgZnJvbSAnLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuaW1wb3J0IGVudiBmcm9tICcuLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBVc2VyIH0gZnJvbSBcIi4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzXCI7XHJcbmltcG9ydCB7IElNUEVSU09OQVRJT05fUVVFUllfUEFSQU1TIH0gZnJvbSBcIi4uL2FjY2Vzcy1jb250cm9sL2luZGV4XCI7XHJcbmltcG9ydCB7IGNoZXJyeVBpY2tQcm9wcyB9IGZyb20gXCIuLi91dGlscy91dGlsc1wiO1xyXG5cclxuZnVuY3Rpb24gZ2V0TWVyZ2VkVG9rZW5QYXRoKHRva2VuUGF0aDogc3RyaW5nLCBsb2NhdGlvblNlYXJjaDogc3RyaW5nLCBzY29wZXM6IHN0cmluZ1tdKSB7XHJcbiAgLy8gTWVyZ2UgY29uZmlndXJlZCBxdWVyeSBwYXJhbXMgb2YgdG9rZW4gcGF0aCB3aXRoIHBhcmFtcyBnaXZlbiB0byBjdXJyZW50IHBhZ2VcclxuICBjb25zdCBjdXJyZW50UXVlcnkgPSBwYXJzZVF1ZXJ5U3RyaW5nKGxvY2F0aW9uU2VhcmNoKTtcclxuICBjb25zdCBpbXBlcnNvbmF0aW9uUHJvcHMgPSBjaGVycnlQaWNrUHJvcHMoY3VycmVudFF1ZXJ5LCBJTVBFUlNPTkFUSU9OX1FVRVJZX1BBUkFNUyk7XHJcbiAgY29uc3QgW3Rva2VuUGF0aFdpdGhvdXRRdWVyeSwgdG9rZW5RdWVyeVN0cmluZ10gPSBzcGxpdFVybEFuZFF1ZXJ5KHRva2VuUGF0aCk7XHJcbiAgY29uc3QgdG9rZW5QYXRoUXVlcnkgPSBwYXJzZVF1ZXJ5U3RyaW5nKHRva2VuUXVlcnlTdHJpbmcpO1xyXG4gIHJldHVybiB0b2tlblBhdGhXaXRob3V0UXVlcnkgKyBnZW5lcmF0ZVF1ZXJ5U3RyaW5nKHtcclxuICAgIC4uLnRva2VuUGF0aFF1ZXJ5LFxyXG4gICAgLi4uaW1wZXJzb25hdGlvblByb3BzLFxyXG4gICAgc2NvcGVzOiBzY29wZXMuam9pbignLCcpXHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFRva2VuSWQobWVyZ2VkVG9rZW5QYXRoOiBzdHJpbmcsIHVzZXJFbWFpbDogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIG1lcmdlZFRva2VuUGF0aCArIFwiL1wiICsgdXNlckVtYWlsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzYXZlVXNlckluZm8odXNlcjogVXNlciwgdG9rZW5JZDogc3RyaW5nKSB7XHJcbiAgZW52LmN1cnJlbnRVc2VyID0gdXNlcjtcclxuICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwidXNlckluZm9cIiArIHRva2VuSWQsIEpTT04uc3RyaW5naWZ5KHVzZXIpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZFVzZXJJbmZvKHRva2VuSWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IHN0b3JlZFNlc3Npb25Vc2VyID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcInVzZXJJbmZvXCIgKyB0b2tlbklkKTtcclxuICBpZiAoc3RvcmVkU2Vzc2lvblVzZXIpIHtcclxuICAgIGVudi5jdXJyZW50VXNlciA9IEpTT04ucGFyc2Uoc3RvcmVkU2Vzc2lvblVzZXIpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQmVhcmVyUHJvdmlkZXIobWVyZ2VkVG9rZW5QYXRoOiBzdHJpbmcsIHVzZXJFbWFpbDogc3RyaW5nKSB7XHJcbiAgY29uc3QgdG9rZW5JZCA9IGdldFRva2VuSWQobWVyZ2VkVG9rZW5QYXRoLCB1c2VyRW1haWwpO1xyXG4gIHJldHVybiBuZXcgV2ViU2VydmVyQmVhcmVyUHJvdmlkZXIobWVyZ2VkVG9rZW5QYXRoLCByZXNwb25zZVRleHQgPT4ge1xyXG4gICAgY29uc3QgcmVzID0gSlNPTi5wYXJzZShyZXNwb25zZVRleHQpIGFzIHsgb2s6IGJvb2xlYW4sIGVycm9yPzogc3RyaW5nLCB0b2tlbj86IHN0cmluZywgdXNlcj86IFVzZXIgfTtcclxuICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IocmVzLmVycm9yKTtcclxuICAgIGlmIChyZXMudXNlcikge1xyXG4gICAgICBzYXZlVXNlckluZm8ocmVzLnVzZXIsIHRva2VuSWQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHsgdG9rZW46IHJlcy50b2tlbiwgZXhwaXJlczogRGF0ZS5ub3coKSArIDU5ICogNjAgKiAxMDAwIH07XHJcbiAgfSwgdG9rZW5JZCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUdvb2dsZVRva2VuUHJvdmlkZXIobWVyZ2VkVG9rZW5QYXRoOiBzdHJpbmcsIHVzZXJFbWFpbDogc3RyaW5nKSB7XHJcbiAgY29uc3QgdG9rZW5JZCA9IGdldFRva2VuSWQobWVyZ2VkVG9rZW5QYXRoLCB1c2VyRW1haWwpO1xyXG4gIHJldHVybiBuZXcgV2ViU2VydmVyQmVhcmVyUHJvdmlkZXIobWVyZ2VkVG9rZW5QYXRoLCByZXNwb25zZVRleHQgPT4ge1xyXG4gICAgY29uc3QgcmVzID0gSlNPTi5wYXJzZShyZXNwb25zZVRleHQpIGFzIHsgb2s6IGJvb2xlYW4sIGVycm9yPzogc3RyaW5nLCB0b2tlbj86IHN0cmluZywgdXNlcj86IFVzZXIgfTtcclxuICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IocmVzLmVycm9yKTtcclxuICAgIHJldHVybiB7IHRva2VuOiByZXMudG9rZW4sIGV4cGlyZXM6IERhdGUubm93KCkgKyA1OSAqIDYwICogMTAwMCB9O1xyXG4gIH0sIHRva2VuSWQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVUZXN0VG9rZW5Qcm92aWRlcih0b2tlblVybDogc3RyaW5nLCB1c2VyOiBVc2VyLCBzY29wZXM6IHN0cmluZ1tdKSB7XHJcbiAgcmV0dXJuIG5ldyBLZWRCZWFyZXJQcm92aWRlcihcclxuICAgIGlzb21vcnBoaWMsXHJcbiAgICBzdG9yYWdlLFxyXG4gICAgdG9rZW5VcmwgKyB1c2VyLm1haWwgKyBsb2NhdGlvbi5zZWFyY2gsXHJcbiAgICBjZmcuS0VEX0NMSUVOVF9JRCxcclxuICAgIGNmZy5LRURfQ0xJRU5UX1NFQ1JFVCxcclxuICAgIHRva2VuVXJsLCB7XHJcbiAgICAgIGVtYWlsOiB1c2VyLm1haWwudG9Mb3dlckNhc2UoKSxcclxuICAgICAgcm9sZXM6IHVzZXIucm9sZXMsXHJcbiAgICAgIHNjaG9vbDogdXNlci5zY2hvb2wsXHJcbiAgICAgIHNjaG9vbFR5cGU6IHVzZXIuc2Nob29sVHlwZSxcclxuICAgICAgc2NvcGVzXHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gZW52LmN1cnJlbnRVc2VyLm1haWwgaXMgc2V0IGJ5IFNpdGVWaXNpb24gc2VydmVyIGluaXRpYWxseS5cclxuLy8gQSByZXNwb25zZSBmcm9tIC9hcGkvdG9rZW4gbWF5IGNoYW5nZSB0aGUgbWFpbCBhdHRyaWJ1dGUgb2YgdGhlIGN1cnJlbnRcclxuLy8gdXNlciwgc28gZW52LmN1cnJlbnRVc2VyLm1haWwgbWF5IGJlIGRpZmZlcmVudCBhZnRlciBnZXR0aW5nIGEgcmVzcG9uc2UuXHJcbi8vIEhvd2V2ZXIsIHRoZSBpbml0aWFsIHZhbHVlIGlzIHZhbHVhYmxlIGFsd2F5cyBpbiBvcmRlciB0byBkaXN0aW5ndWlzaCB0aGUgY2FzZVxyXG4vLyB3aGVuIG9uZSBub3JtYWwgdXNlciBsb2dzIG91dCBhbmQgYW5vdGhlciB1c2VyIGxvZ3MgaW4uXHJcbmNvbnN0IGluaXRpYWxVc2VyRW1haWwgPSBlbnYuY3VycmVudFVzZXIgJiYgZW52LmN1cnJlbnRVc2VyLm1haWw7IC8vIEluaXRpYWwgdmFsdWUgb2YgbWFpbC4gTWF5IGNoYW5nZS5cclxuaWYgKGluaXRpYWxVc2VyRW1haWwpIHtcclxuICAvLyBLRURcclxuICBpZiAoY2ZnLktFRF9UT0tFTl9QQVRIKSB7XHJcbiAgICAvL1xyXG4gICAgLy9cclxuICAgIC8vIFByb2R1Y3Rpb24gLyBTaXRlVmlzaW9uIHByb3hpZWQgL2FwaS90b2tlbiB0byByZXF1ZXN0IHRva2VucyBmcm9tOlxyXG4gICAgLy9cclxuICAgIC8vXHJcbiAgICBjb25zdCBtZXJnZWRUb2tlblBhdGggPSBnZXRNZXJnZWRUb2tlblBhdGgoXHJcbiAgICAgIGNmZy5LRURfVE9LRU5fUEFUSCxcclxuICAgICAgbG9jYXRpb24uc2VhcmNoLCBbXHJcbiAgICAgICAgXCJrZWRiYWNrZW5kXCIsXHJcbiAgICAgICAgXCJFRFNcIixcclxuICAgICAgXSk7XHJcbiAgICBlbnYuYmVhcmVyUHJvdmlkZXIgPSBjcmVhdGVCZWFyZXJQcm92aWRlcihtZXJnZWRUb2tlblBhdGgsIGluaXRpYWxVc2VyRW1haWwpO1xyXG4gICAgbG9hZFVzZXJJbmZvKGdldFRva2VuSWQobWVyZ2VkVG9rZW5QYXRoLCBpbml0aWFsVXNlckVtYWlsKSk7XHJcblxyXG4gICAgLy8gR29vZ2xlXHJcbiAgICBjb25zdCBnb29nbGVNZXJnZWRQYXRoID0gZ2V0TWVyZ2VkVG9rZW5QYXRoKFxyXG4gICAgICBjZmcuS0VEX1RPS0VOX1BBVEgsXHJcbiAgICAgIGxvY2F0aW9uLnNlYXJjaCwgW1xyXG4gICAgICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9jYWxlbmRhci5yZWFkb25seVwiLFxyXG4gICAgICAgIC8vXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2RyaXZlXCJcclxuICAgICAgXSk7XHJcbiAgICBlbnYuZ29vZ2xlVG9rZW5Qcm92aWRlciA9IGNyZWF0ZUdvb2dsZVRva2VuUHJvdmlkZXIoZ29vZ2xlTWVyZ2VkUGF0aCwgaW5pdGlhbFVzZXJFbWFpbCk7XHJcbiAgfSBlbHNlIGlmIChjZmcuS0VEX1RPS0VOX1VSTCAmJiBjZmcuS0VEX0NMSUVOVF9JRCAmJiBjZmcuS0VEX0NMSUVOVF9TRUNSRVQpIHtcclxuICAgIC8vXHJcbiAgICAvL1xyXG4gICAgLy8gVGVzdCAtIGdvIGRpcmVjdGx5IHRvIEtFREFVVEggc2VydmVyIHRvIHJldHJpZXZlIHRva2Vuc1xyXG4gICAgLy9cclxuICAgIC8vXHJcbiAgICBlbnYuYmVhcmVyUHJvdmlkZXIgPSBjcmVhdGVUZXN0VG9rZW5Qcm92aWRlcihjZmcuS0VEX1RPS0VOX1VSTCwgZW52LmN1cnJlbnRVc2VyLCBbXHJcbiAgICAgIFwia2VkYmFja2VuZFwiLFxyXG4gICAgICBcIkVEU1wiLFxyXG4gICAgXSk7XHJcbiAgICBlbnYuZ29vZ2xlVG9rZW5Qcm92aWRlciA9IGNyZWF0ZVRlc3RUb2tlblByb3ZpZGVyKGNmZy5LRURfVE9LRU5fVVJMICsgXCIvZ29vZ2xlXCIsIGVudi5jdXJyZW50VXNlciwgW1xyXG4gICAgICBcImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvY2FsZW5kYXIucmVhZG9ubHlcIixcclxuICAgICAgLy9cImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvZHJpdmVcIlxyXG4gICAgXSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBjb25maWd1cmF0aW9uIHBhcmFtZXRlciBLRURfVE9LRU5fUEFUSGApO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgZW52IGZyb20gJy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCBjZmcgZnJvbSAnLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuaW1wb3J0IHsgaXNvbW9ycGhpYyB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50d2ViJztcclxuaW1wb3J0IHsgRWRzQ2xpZW50IH0gZnJvbSAnLi4vYXBpcy9lZHNjbGllbnQnO1xyXG5cclxuZW52LmVkc0NsaWVudCA9IG5ldyBFZHNDbGllbnQgKFxyXG4gIGlzb21vcnBoaWMsXHJcbiAgY2ZnLkVEU19BUElfVVJMLFxyXG4gIGVudi5iZWFyZXJQcm92aWRlcixcclxuICAoKT0+ZW52LmN1cnJlbnRVc2VyLm1haWwpO1xyXG5cclxuIiwiaW1wb3J0IGVudiBmcm9tICcuLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgY2ZnIGZyb20gJy4uL2dsb2JhbHMvS0VELmNmZyc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRDbGllbnRXZWIgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudHdlYic7XHJcblxyXG5lbnYua2VkQmFja2VuZENsaWVudCA9IG5ldyBLZWRCYWNrZW5kQ2xpZW50V2ViIChcclxuICBjZmcuS0VEX0FQSV9VUkwsXHJcbiAgZW52LmJlYXJlclByb3ZpZGVyKTtcclxuXHJcbiIsImltcG9ydCBLRUQgZnJvbSAnLi9LRUQnO1xyXG5cclxuLyogVGhpcyBkZWZhdWx0IGNvbmZpZ3VyYXRpb24gaXMgdXNlZCBhcyBhIGZhbGxiYWNrLlxyXG5Ob3JtYWxseSBib3RoIHRlc3QgcGFnZXMgYW5kIHByb2R1Y3Rpb24gcGFnZXMgd2lsbCBvdmVycmlkZSB0aGVzZSBjb25maWdyYXRpb25zXHJcbiovXHJcbi8qY29uc3QgZGVmYXVsdENvbmZpZ3VyYXRpb24gPSB7XHJcbiAgLy8gRW52aXJvbm1lbnRcclxuICBFTlZJUk9OTUVOVDogJ2RldmVsb3BtZW50JyBhcyAncHJvZHVjdGlvbicgfCAnZGV2ZWxvcG1lbnQnIHwgJ3Rlc3QnLFxyXG4gIC8vIEF1dGhlbnRpY2F0aW9uIFNlcnZlcjpcclxuICBLRURfVE9LRU5fVVJMOiAnaHR0cHM6Ly9rZWRhdXRodGVzdC5henVyZXdlYnNpdGVzLm5ldC90b2tlbicsXHJcbiAgS0VEX1RPS0VOX1BBVEg6ICcvYXBpL3Rva2VuLlNrcmlwdC5wb3J0bGV0P3N2LmNvbnRlbnR0eXBlPWFwcGxpY2F0aW9uL2pzb24nLFxyXG4gIEtFRF9DTElFTlRfSUQ6ICdkZXZjbGllbnQnLFxyXG4gIEtFRF9DTElFTlRfU0VDUkVUOiAnNGZSZGZRcFd0SnFqVFdmJyxcclxuICAvLyBTZXJ2aWNlczpcclxuICBLRURfQVBJX1VSTDogJ2h0dHBzOi8va2VkYmFja2VuZHRlc3QuYXp1cmV3ZWJzaXRlcy5uZXQvYXBpLycsICBcclxuICBFRFNfQVBJX1VSTDogJ2h0dHBzOi8vZWRzcG9ydGFsb3dpbmFwaS5henVyZXdlYnNpdGVzLm5ldC9hcGkvJ1xyXG59Ki9cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUtlZENvbmZpZ3VyYXRpb24ge1xyXG4gIEVOVklST05NRU5UOiAncHJvZHVjdGlvbicgfCAnZGV2ZWxvcG1lbnQnIHwgJ3Rlc3QnO1xyXG4gIEtFRF9SRUFMTTogc3RyaW5nO1xyXG4gIEtFRF9UT0tFTl9VUkw6IHN0cmluZztcclxuICBLRURfVE9LRU5fUEFUSDogc3RyaW5nO1xyXG4gIEtFRF9DTElFTlRfSUQ6IHN0cmluZztcclxuICBLRURfQ0xJRU5UX1NFQ1JFVDogc3RyaW5nO1xyXG4gIEtFRF9BUElfVVJMOiBzdHJpbmc7XHJcbiAgRURTX0FQSV9VUkw6IHN0cmluZztcclxuICBLRURfTE9DQUxFOiBzdHJpbmc7XHJcbiAgS0VEX1NDSE9PTF9MT0NBTEU6IHN0cmluZztcclxuICBLRURfQ09VUlNFX0JVSUxERVJfVVJMOiBzdHJpbmc7XHJcbiAgS0VEX0NPVVJTRV9WSUVXRVJfVVJMOiBzdHJpbmc7XHJcbiAgS0VEX1NVQkpFQ1RfUExBTk5FUl9BRE1JTl9VUkw6IHN0cmluZztcclxuICBLRURfU1VCSkVDVF9QTEFOTkVSX1VSTDogc3RyaW5nO1xyXG4gIEtFRF9GRUFUVVJFUzogc3RyaW5nO1xyXG4gIEtFRF9LRUVQX0FMSVZFX1VSTDogc3RyaW5nO1xyXG4gIEtFRF9FTlVNX1dPUkRCQU5LU19VUkw6IHN0cmluZztcclxuICBLRURfV09SREJBTktTX1VSTDogc3RyaW5nO1xyXG4gIEtFRF9SRVNPVVJDRVNfVVJMOiBzdHJpbmc7XHJcbn07XHJcblxyXG5pZiAoIUtFRC5jZmcpIEtFRC5jZmcgPSB7fTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEtFRC5jZmcgYXMgSUtlZENvbmZpZ3VyYXRpb247XHJcbmV4cG9ydCBjb25zdCBjZmc6IElLZWRDb25maWd1cmF0aW9uID0gS0VELmNmZztcclxuIiwiaW1wb3J0IHtVc2VyLCBMZWFybmluZ01vZHVsZVRhc2tzfSBmcm9tICcuLi9jb250cmFjdHMva2VkLW1vZGVscyc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRDbGllbnQsIEJlYXJlclByb3ZpZGVyIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQge1VzZXJUYXNrfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7S2VkUmVwb30gZnJvbSAnLi4vcmVwb3Mva2VkLXJlcG8nO1xyXG5pbXBvcnQge0Vkc0NsaWVudH0gZnJvbSAnLi4vYXBpcy9lZHNjbGllbnQnO1xyXG5pbXBvcnQgS0VEIGZyb20gJy4va2VkJztcclxuaW1wb3J0IHsgS1NUZXJtUGxhbm5lclJlcG8gfSBmcm9tICcuLi9yZXBvcy9rcy10ZXJtcGxhbm5lci1yZXBvJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRW52IHtcclxuICAgIGN1cnJlbnRVc2VyPzogVXNlcjtcclxuICAgIGxlYXJuaW5nTW9kdWxlVGFza3M/OiBMZWFybmluZ01vZHVsZVRhc2tzO1xyXG4gICAgYmVhcmVyUHJvdmlkZXI/OiBCZWFyZXJQcm92aWRlcjtcclxuICAgIGdvb2dsZVRva2VuUHJvdmlkZXI/OiBCZWFyZXJQcm92aWRlcjtcclxuICAgIGtlZEJhY2tlbmRDbGllbnQ/OiBLZWRCYWNrZW5kQ2xpZW50O1xyXG4gICAgZWRzQ2xpZW50PzogRWRzQ2xpZW50O1xyXG4gICAgdXNlclRhc2tzUmVwbz87XHJcbiAgICBoaWRkZW5Db3Vyc2VzUmVwbz87XHJcbiAgICB3ZWVrTm90ZXNSZXBvPztcclxuICAgIGtnVGVybVBsYW5uZXJSZXBvPztcclxuICAgIGtzVGVybVBsYW5uZXJSZXBvPzogS1NUZXJtUGxhbm5lclJlcG9cclxuICAgIHR1dG9yZWQ6IGJvb2xlYW47XHJcbiAgICBlcnJvcj86IEVycm9yO1xyXG59XHJcblxyXG5pZiAoIUtFRC5lbnYpIEtFRC5lbnYgPSB7fTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEtFRC5lbnYgYXMgRW52O1xyXG5leHBvcnQgY29uc3QgZW52OiBFbnYgPSBLRUQuZW52O1xyXG4iLCJcclxuZXhwb3J0IGNvbnN0IEtFRF9OQU1FU1BBQ0UgPSBcIktFRFwiO1xyXG5cclxuZGVjbGFyZSB2YXIgS0VEOiBhbnk7XHJcblxyXG52YXIgcmVzdWx0ID0gdHlwZW9mIEtFRCA9PT0gJ3VuZGVmaW5lZCcgPyB7fSA6IEtFRDtcclxuXHJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgS0VEID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgd2luZG93W0tFRF9OQU1FU1BBQ0VdID0gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCByZXN1bHQ7XHJcbiIsImltcG9ydCB7VXNlciwgTGVhcm5pbmdNb2R1bGVUYXNrc30gZnJvbSAnLi4vY29udHJhY3RzL2tlZC1tb2RlbHMnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kQ2xpZW50LCBCZWFyZXJQcm92aWRlciB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IEtFRCBmcm9tICcuL2tlZCc7XHJcbmltcG9ydCBlbnYsIHtFbnZ9IGZyb20gJy4vS0VELmVudic7XHJcblxyXG5leHBvcnQgY2xhc3MgVHV0b3JFbnYge1xyXG4gIHN1YnNjcmliZXJzOiBBcnJheTwoZW52OiBFbnYpPT52b2lkPiA9IFtdO1xyXG4gIGVudjogRW52IHwgbnVsbCA9IG51bGw7XHJcbiAgdmVyc2lvbiA9IDE7XHJcbiAgLy9wcm9taXNlOiBQcm9taXNlPEVudiB8IG51bGw+ID0gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xyXG5cclxuICBhc3luYyBzdWJzY3JpYmUoc3Vic2NyaWJlcjogKGVudjogRW52KSA9PiB2b2lkKSB7XHJcbiAgICB0aGlzLnN1YnNjcmliZXJzLnB1c2goc3Vic2NyaWJlcik7XHJcbiAgICBzdWJzY3JpYmVyKHRoaXMuZW52KTtcclxuICB9XHJcblxyXG4gIHVuc3Vic2NyaWJlKHN1YnNjcmliZXI6IChlbnY6IEVudikgPT4gdm9pZCkge1xyXG4gICAgdGhpcy5zdWJzY3JpYmVycyA9IHRoaXMuc3Vic2NyaWJlcnMuZmlsdGVyIChzID0+IHMgIT09IHN1YnNjcmliZXIpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgbm90aWZ5U3Vic2NyaWJlcnMoKSB7XHJcbiAgICB0aGlzLnN1YnNjcmliZXJzLmZvckVhY2gocyA9PiBzKHRoaXMuZW52KSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBzZXROZXdFbnYodXNlcjogVXNlciwgZW52R2V0dGVyOiAoKT0+UHJvbWlzZTxFbnY+KSB7XHJcbiAgICBsZXQgdmVyc2lvbiA9ICsrdGhpcy52ZXJzaW9uO1xyXG4gICAgdGhpcy5lbnYgPSB7Y3VycmVudFVzZXI6IHVzZXIsIHR1dG9yZWQ6IHRydWV9O1xyXG4gICAgdGhpcy5ub3RpZnlTdWJzY3JpYmVycygpOyAvLyBNYWtlIHN1YnNjcmliZXIgZGlzcGxheSBcIkxvYWRpbmcuLi4gdXNlciBuYW1lXCJcclxuICAgIGNvbnN0IGVudjogRW52ID0gYXdhaXQgZW52R2V0dGVyKCkuY2F0Y2goZXJyID0+ICh7XHJcbiAgICAgIGN1cnJlbnRVc2VyOiB1c2VyLFxyXG4gICAgICB0dXRvcmVkOiB0cnVlLFxyXG4gICAgICBlcnJvcjogZXJyXHJcbiAgICB9KSk7XHJcbiAgICBpZiAodmVyc2lvbiA9PT0gdGhpcy52ZXJzaW9uKSB7XHJcbiAgICAgIC8vIE5vIG9uZSBlbHNlIGhhcyBjYWxsZWQgc2V0RW52IGR1cmluZyB0aGlzIGNhbGwuXHJcbiAgICAgICsrdGhpcy52ZXJzaW9uO1xyXG4gICAgICB0aGlzLmVudiA9IHsuLi5lbnYsIHR1dG9yZWQ6IHRydWV9O1xyXG4gICAgICB0aGlzLm5vdGlmeVN1YnNjcmliZXJzKCk7IC8vIE1ha2Ugc3Vic2NyaWJlcnMgZGlzcGxheSB0aGUgZGF0YS5cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmlmICghS0VELnR1dG9yRW52KSBLRUQudHV0b3JFbnYgPSBuZXcgVHV0b3JFbnYoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEtFRC50dXRvckVudiBhcyBUdXRvckVudjtcclxuIiwiXHJcbmV4cG9ydCBjb25zdCBLRURfTkFNRVNQQUNFID0gXCJLRURcIjtcclxuXHJcbmRlY2xhcmUgdmFyIEtFRDogYW55O1xyXG5cclxudmFyIHJlc3VsdCA9IHR5cGVvZiBLRUQgPT09ICd1bmRlZmluZWQnID8ge30gOiBLRUQ7XHJcblxyXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIEtFRCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHdpbmRvd1tLRURfTkFNRVNQQUNFXSA9IHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgcmVzdWx0O1xyXG4iLCJpbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCBjZmcgZnJvbSAnLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuXHJcbmlmIChjZmcuS0VEX0xPQ0FMRSA9PT0gXCJzdlwiKSB7XHJcbiAgICBtb21lbnQudXBkYXRlTG9jYWxlKCdzdicsIHtcclxuICAgICAgICBtb250aHM6ICdqYW51YXJpX2ZlYnJ1YXJpX21hcnNfYXByaWxfbWFqX2p1bmlfanVsaV9hdWd1c3RpX3NlcHRlbWJlcl9va3RvYmVyX25vdmVtYmVyX2RlY2VtYmVyJy5zcGxpdCgnXycpLFxyXG4gICAgICAgIG1vbnRoc1Nob3J0OiAnamFuX2ZlYl9tYXJfYXByX21hal9qdW5fanVsX2F1Z19zZXBfb2t0X25vdl9kZWMnLnNwbGl0KCdfJyksXHJcbiAgICAgICAgd2Vla2RheXM6ICdzw7ZuZGFnX23DpW5kYWdfdGlzZGFnX29uc2RhZ190b3JzZGFnX2ZyZWRhZ19sw7ZyZGFnJy5zcGxpdCgnXycpLFxyXG4gICAgICAgIHdlZWtkYXlzU2hvcnQ6ICdzw7ZuX23DpW5fdGlzX29uc190b3JfZnJlX2zDtnInLnNwbGl0KCdfJyksXHJcbiAgICAgICAgd2Vla2RheXNNaW46ICdzw7ZfbcOlX3RpX29uX3RvX2ZyX2zDticuc3BsaXQoJ18nKSxcclxuICAgICAgICBsb25nRGF0ZUZvcm1hdDoge1xyXG4gICAgICAgICAgICBMVDogJ0hIOm1tJyxcclxuICAgICAgICAgICAgTFRTOiAnSEg6bW06c3MnLFxyXG4gICAgICAgICAgICBMOiAnWVlZWS1NTS1ERCcsXHJcbiAgICAgICAgICAgIExMOiAnRCBNTU1NIFlZWVknLFxyXG4gICAgICAgICAgICBMTEw6ICdEIE1NTU0gWVlZWSBba2wuXSBISDptbScsXHJcbiAgICAgICAgICAgIExMTEw6ICdkZGRkIEQgTU1NTSBZWVlZIFtrbC5dIEhIOm1tJyxcclxuICAgICAgICAgICAgbGxsOiAnRCBNTU0gWVlZWSBISDptbScsXHJcbiAgICAgICAgICAgIGxsbGw6ICdkZGQgRCBNTU0gWVlZWSBISDptbSdcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNhbGVuZGFyOiB7XHJcbiAgICAgICAgICAgIHNhbWVEYXk6ICdbSWRhZ10gTFQnLFxyXG4gICAgICAgICAgICBuZXh0RGF5OiAnW0ltb3Jnb25dIExUJyxcclxuICAgICAgICAgICAgbGFzdERheTogJ1tJZ8Olcl0gTFQnLFxyXG4gICAgICAgICAgICBuZXh0V2VlazogJ1tQw6VdIGRkZGQgTFQnLFxyXG4gICAgICAgICAgICBsYXN0V2VlazogJ1tJXSBkZGRkW3NdIExUJyxcclxuICAgICAgICAgICAgc2FtZUVsc2U6ICdMJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVsYXRpdmVUaW1lOiB7XHJcbiAgICAgICAgICAgIGZ1dHVyZTogJ29tICVzJyxcclxuICAgICAgICAgICAgcGFzdDogJ2bDtnIgJXMgc2VkYW4nLFxyXG4gICAgICAgICAgICBzOiAnbsOlZ3JhIHNla3VuZGVyJyxcclxuICAgICAgICAgICAgc3M6ICclZCBzZWt1bmRlcicsXHJcbiAgICAgICAgICAgIG06ICdlbiBtaW51dCcsXHJcbiAgICAgICAgICAgIG1tOiAnJWQgbWludXRlcicsXHJcbiAgICAgICAgICAgIGg6ICdlbiB0aW1tZScsXHJcbiAgICAgICAgICAgIGhoOiAnJWQgdGltbWFyJyxcclxuICAgICAgICAgICAgZDogJ2VuIGRhZycsXHJcbiAgICAgICAgICAgIGRkOiAnJWQgZGFnYXInLFxyXG4gICAgICAgICAgICBNOiAnZW4gbcOlbmFkJyxcclxuICAgICAgICAgICAgTU06ICclZCBtw6VuYWRlcicsXHJcbiAgICAgICAgICAgIHk6ICdldHQgw6VyJyxcclxuICAgICAgICAgICAgeXk6ICclZCDDpXInXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0oZXxhKS8sXHJcbiAgICAgICAgb3JkaW5hbDogZnVuY3Rpb24gKG51bWJlcikge1xyXG4gICAgICAgICAgICB2YXIgYiA9IG51bWJlciAlIDEwLFxyXG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gKH5+KG51bWJlciAlIDEwMCAvIDEwKSA9PT0gMSkgPyAnZScgOlxyXG4gICAgICAgICAgICAgICAgICAgIChiID09PSAxKSA/ICdhJyA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChiID09PSAyKSA/ICdhJyA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYiA9PT0gMykgPyAnZScgOiAnZSc7XHJcbiAgICAgICAgICAgIHJldHVybiBudW1iZXIgKyBvdXRwdXQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB3ZWVrOiB7XHJcbiAgICAgICAgICAgIGRvdzogMSwgLy8gTW9uZGF5IGlzIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsuXHJcbiAgICAgICAgICAgIGRveTogNCAgLy8gVGhlIHdlZWsgdGhhdCBjb250YWlucyBKYW4gNHRoIGlzIHRoZSBmaXJzdCB3ZWVrIG9mIHRoZSB5ZWFyLlxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcbmV4cG9ydCBjb25zdCBsb2NhbE1vbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiBtb21lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKS5sb2NhbGUoY2ZnLktFRF9MT0NBTEUpO1xyXG59XHJcbiIsImltcG9ydCB7IEtlZFJlcG8gfSBmcm9tICcuL2tlZC1yZXBvJztcclxuaW1wb3J0IHsgVXNlckhpZGRlbkNvdXJzZSwgU2Nob29sLCBDb3Vyc2UgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgRURTQ291cnNlIH0gZnJvbSAnLi4vY29udHJhY3RzL2Vkcyc7XHJcbmltcG9ydCB7IHNob3dFcnJvciwgZmxhdHRlbiwgY29tcGFyZVByb3AsIGFycmF5VG9NYXAgfSBmcm9tICcuLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IGNyZWF0ZVVVSUQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IEVEU1BlcmlvZCB9IGZyb20gJy4uL2FwaXMvZWRzY2xpZW50JztcclxuaW1wb3J0IHsgZ2V0U2Nob29sTW9tZW50IH0gZnJvbSAnLi4vdXRpbHMvc2Nob29sLW1vbWVudCc7XHJcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuZXhwb3J0IGxldCBoaWRkZW5Db3Vyc2VzUmVwbyA9IGVudi5oaWRkZW5Db3Vyc2VzUmVwbyBhcyBIaWRkZW5Db3Vyc2VzUmVwbztcclxuXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENvdXJzZVdpdGhIaWRkZW5TdGF0ZSB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XHJcbiAgdmlzaWJsZTogYm9vbGVhbjtcclxuICBkZWZhdWx0VmlzaWJsZTogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgSGlkZGVuQ291cnNlc1N1YnNjcmliZXIgPSAoY291cnNlczogQ291cnNlV2l0aEhpZGRlblN0YXRlW10pID0+IHZvaWQ7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFN1YnNjcmliZXJPcHRpb25zIHtcclxuICBmdWxsQ291cnNlOiBib29sZWFuO1xyXG59XHJcblxyXG5jbGFzcyBIaWRkZW5Db3Vyc2VzUmVwbyB7XHJcbiAgcmVzdWx0OiBDb3Vyc2VXaXRoSGlkZGVuU3RhdGVbXSB8IG51bGwgPSBudWxsO1xyXG4gIHN1YnNjcmliZXJzOiB7c3Vic2NyaWJlcjogSGlkZGVuQ291cnNlc1N1YnNjcmliZXIsIG9wdGlvbnM6IFN1YnNjcmliZXJPcHRpb25zfVtdID0gW107XHJcbiAgZnVsbENvdXJzZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIGtlZENvdXJzZXNQcm9taXNlOiBQcm9taXNlPFBhcnRpYWw8Q291cnNlPltdPjtcclxuICBlZHNDb3Vyc2VzUHJvbWlzZTogUHJvbWlzZTxFRFNDb3Vyc2VbXT47XHJcbiAgdXNlckhpZGRlbkNvdXJzZXNQcm9taXNlOiBQcm9taXNlPFVzZXJIaWRkZW5Db3Vyc2VbXT47XHJcbiAga2VkUmVwbzogS2VkUmVwbzxVc2VySGlkZGVuQ291cnNlPjtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmtlZFJlcG8gPSBuZXcgS2VkUmVwbzxVc2VySGlkZGVuQ291cnNlPih7XHJcbiAgICAgIGdldENsaWVudDogKCkgPT4gZW52LmtlZEJhY2tlbmRDbGllbnQsXHJcbiAgICAgIG9wdGltaXN0aWM6IHRydWUsXHJcbiAgICAgIHRhYmxlOiBcInVzZXJoaWRkZW5jb3Vyc2VzXCIsXHJcbiAgICAgIHVzZXI6IGVudi5jdXJyZW50VXNlciA/IGVudi5jdXJyZW50VXNlci5tYWlsIDogXCJcIixcclxuICAgICAgZ2V0UXVlcnlPcHRpb25zOiBhc3luYyAoKSA9PiAoe3JvbGU6IFwiVVNFUlwifSksXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBpbml0UHJvbWlzZSA9IHRoaXMuaW5pdCgpO1xyXG5cclxuICAgIFByb21pc2UuYWxsKFtcclxuICAgICAgaW5pdFByb21pc2UsXHJcbiAgICAgIHRoaXMua2VkQ291cnNlc1Byb21pc2UsXHJcbiAgICAgIHRoaXMuZWRzQ291cnNlc1Byb21pc2VcclxuICAgIF0pLmNhdGNoKGVyciA9PiBzaG93RXJyb3IoZXJyKSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBpbml0KCkge1xyXG4gICAgLy8gV2FpdCB0aWxsIHdlIGhhdmUgYSBjdXJyZW50VXNlciB0aGF0IGlzIGFjY3VyYXRlIGFsc28gZm9yIGltcGVyc29uYXRlZCB1c2Vycy5cclxuICAgIGNvbnN0IGJlYXJlclByb21pc2UgPSBlbnYuYmVhcmVyUHJvdmlkZXIgPyBlbnYuYmVhcmVyUHJvdmlkZXIuZ2V0QmVhcmVyKCkgOiBQcm9taXNlLnJlc29sdmUoe30pO1xyXG5cclxuICAgIC8vIEluIHBhcmFsbGVsbCwgd2UgcmVxdWVzdDpcclxuICAgIC8vICAxKSBLRURCYWNrZW5kOiBTY2hvb2xzLmFjdGl2ZUNvdXJzZXNcclxuICAgIC8vICAyKSBFRFMuZ2V0QWN0aXZlQWNvdXJzZXMoKVxyXG4gICAgLy8gIDMpICh2aWEgc3Vic2NyaXB0aW9uKTogS0VEQmFja2VuZDogdXNlckhpZGRlbkNvdXJzZXNcclxuICAgIFxyXG4gICAgdGhpcy5rZWRDb3Vyc2VzUHJvbWlzZSA9IGJlYXJlclByb21pc2UudGhlbigoKT0+dGhpcy5saXN0S2VkQ291cnNlcygpKTtcclxuICAgIHRoaXMuZWRzQ291cnNlc1Byb21pc2UgPSBiZWFyZXJQcm9taXNlLnRoZW4oKCk9PnRoaXMubGlzdEVEU0NvdXJzZXMoKSk7XHJcbiAgICBsZXQgcmVzb2x2ZVVzZXJIaWRkZW5Db3Vyc2VzUHJvbWlzZTogKHg6IFVzZXJIaWRkZW5Db3Vyc2VbXSk9PnZvaWQ7XHJcbiAgICBsZXQgdXNlckhpZGRlbkNvdXJzZXNSZXNvbHZlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy51c2VySGlkZGVuQ291cnNlc1Byb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHJlc29sdmVVc2VySGlkZGVuQ291cnNlc1Byb21pc2UgPSB4ID0+IHtcclxuICAgICAgaWYgKHVzZXJIaWRkZW5Db3Vyc2VzUmVzb2x2ZWQpIHtcclxuICAgICAgICB0aGlzLnVzZXJIaWRkZW5Db3Vyc2VzUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSh4KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB1c2VySGlkZGVuQ291cnNlc1Jlc29sdmVkID0gdHJ1ZTtcclxuICAgICAgICByZXNvbHZlKHgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIGF3YWl0IGJlYXJlclByb21pc2U7XHJcblxyXG4gICAgdGhpcy5rZWRSZXBvLm1lbS5zdWJzY3JpYmUoYXN5bmMgdXNlckhpZGRlbkNvdXJzZXMgPT4ge1xyXG4gICAgICAvLyBDaGFuZ2Ugb3IgaW5pdGlhbCB2YWx1ZSByZWFkeSB0byBiZSBub3RpZmllZCBvdXQuXHJcbiAgICAgIC8vIEJ1dCBmaXJzdCwgY2hlY2sgd2UgaGF2ZSBhbGwgdGhlIHJlbGF0ZWQgZGF0YSByZXNwb25zZXMgd2UgbmVlZC5cclxuICAgICAgY29uc3QgW2FjdGl2ZUNvdXJzZXMsIGVkc0FjdGl2ZUNvdXJzZXNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG4gICAgICAgIHRoaXMua2VkQ291cnNlc1Byb21pc2UsIFxyXG4gICAgICAgIHRoaXMuZWRzQ291cnNlc1Byb21pc2VdKTtcclxuICAgICAgXHJcbiAgICAgIC8vIFJlZmluZSB0aGUgdGhyZWUgcmVzdWx0cyBpbnRvIGEgc2luZ2xlIHJlc3VsdFxyXG4gICAgICB0aGlzLnJlc3VsdCA9IGF3YWl0IHRoaXMuY3JlYXRlQ291cnNlc0xpc3QoZWRzQWN0aXZlQ291cnNlcywgdXNlckhpZGRlbkNvdXJzZXMsIGFjdGl2ZUNvdXJzZXMpO1xyXG4gICAgICAvLyBOb3RpZnkgb3VyIHN1YnNjcmliZXJzOlxyXG4gICAgICB0aGlzLnN1YnNjcmliZXJzLmZvckVhY2goc3Vic2NyaWJlciA9PiB0aGlzLm5vdGlmeVN1YnNjcmliZXIoc3Vic2NyaWJlci5zdWJzY3JpYmVyLCBzdWJzY3JpYmVyLm9wdGlvbnMpKTtcclxuICAgICAgcmVzb2x2ZVVzZXJIaWRkZW5Db3Vyc2VzUHJvbWlzZSh1c2VySGlkZGVuQ291cnNlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGxpc3RLZWRDb3Vyc2VzKCkge1xyXG4gICAgY29uc3QgZnVsbENvdXJzZSA9IHRoaXMuZnVsbENvdXJzZTtcclxuICAgIGNvbnNvbGUubG9nKFwiRnVsbENvdXJzZTogXCIrIGZ1bGxDb3Vyc2UpO1xyXG4gICAgY29uc3Qgc2Nob29scyA9IGF3YWl0IGVudi5rZWRCYWNrZW5kQ2xpZW50Lmxpc3Q8U2Nob29sPignc2Nob29scycsIHtcclxuICAgICAgcm9sZTogXCJVU0VSXCIsIC8vIFdvcmthcm91bmQgZnJvbSBzaG93aW5nIGFjdGl2YXRlZCB0ZW1wbGF0ZXMgYW1vbmcgY291cnNlcyBvZiB0aGUgc2Nob29sXHJcbiAgICAgIG5hbWU6IGVudi5jdXJyZW50VXNlci5zY2hvb2wsXHJcbiAgICAgIGluY2x1ZGU6IFwiYWN0aXZlQ291cnNlc1wiLFxyXG4gICAgICBmbGFnczogZnVsbENvdXJzZSA/IFtdIDogW1wiaW5jbHVkZUlkc0FuZE5hbWVzT25seVwiXSxcclxuICAgICAgY2FjaGVCdXN0OiBlbnYuY3VycmVudFVzZXIudXNlcm5hbWVcclxuICAgIH0pO1xyXG4gICAgY29uc3QgYWN0aXZlQ291cnNlcyA9IGZsYXR0ZW4oc2Nob29scy5tYXAoc2Nob29sID0+IHNjaG9vbC5hY3RpdmVDb3Vyc2VzKSkuc29ydChjb21wYXJlUHJvcChcIm5hbWVcIikpXHJcbiAgICByZXR1cm4gYWN0aXZlQ291cnNlcztcclxuICB9XHJcblxyXG4gIGxpc3RFRFNDb3Vyc2VzKCk6IFByb21pc2U8RURTQ291cnNlW10gfCBudWxsPiB7XHJcbiAgICBjb25zdCBwZXJpb2ROYW1lID0gbmV3IEVEU1BlcmlvZChnZXRTY2hvb2xNb21lbnQobW9tZW50KCkpKS5wZXJpb2Q7XHJcbiAgICByZXR1cm4gZW52LmN1cnJlbnRVc2VyLnJvbGVzLmluZGV4T2YoJ0VNUExPWUVFJykgPT09IC0xID9cclxuICAgICAgLy8gU1RVREVOVHMgc2hvdWxkLCBieSBkZWZhdWx0LCBvbmx5IHNob3cgY291cnNlcyB0aGF0IGlzIGxpc3RlZCBpbiBFRFNcclxuICAgICAgZW52LmVkc0NsaWVudC5nZXRBY3RpdmVDb3Vyc2VzKHtwZXJpb2ROYW1lfSkgOlxyXG4gICAgICAvLyBFTVBMT1lFRXMgc2hvdWxkLCBieSBkZWZhdWx0LCBzaG93IGFsbCBjb3Vyc2VzIG9uIHNjaG9vbCAtIG5vIG5lZWQgdG8gcXVlcnkgRURTXHJcbiAgICAgIG51bGw7XHJcbiAgfVxyXG5cclxuICBhc3luYyBjcmVhdGVDb3Vyc2VzTGlzdChcclxuICAgIGVkc0FjdGl2ZUNvdXJzZXM6IEVEU0NvdXJzZVtdIHwgbnVsbCxcclxuICAgIHVzZXJIaWRkZW5Db3Vyc2VzOiBVc2VySGlkZGVuQ291cnNlW10sXHJcbiAgICBhY3RpdmVDb3Vyc2VzOiBQYXJ0aWFsPENvdXJzZT5bXSkgOiBQcm9taXNlPENvdXJzZVdpdGhIaWRkZW5TdGF0ZVtdPlxyXG4gIHtcclxuICAgIGNvbnN0IGhpZGRlbkNvdXJzZXNNYXAgPSBhcnJheVRvTWFwKHVzZXJIaWRkZW5Db3Vyc2VzLmZpbHRlcihoYyA9PiAhaGMuc2hvdyksIGhjID0+IGhjLm5hbWUpO1xyXG4gICAgY29uc3QgdmlzaWJsZUNvdXJzZXNNYXAgPSBhcnJheVRvTWFwKHVzZXJIaWRkZW5Db3Vyc2VzLmZpbHRlcihoYyA9PiBoYy5zaG93KSwgaGMgPT4gaGMubmFtZSk7XHJcblxyXG4gICAgY29uc3QgaXNTdHVkZW50ID0gZW52LmN1cnJlbnRVc2VyLnJvbGVzLnNvbWUocm9sZSA9PiByb2xlID09PSAnU1RVREVOVCcpO1xyXG5cclxuICAgIGNvbnN0IGVkc0NvdXJzZU1hcCA9IGVkc0FjdGl2ZUNvdXJzZXMgP1xyXG4gICAgICBhcnJheVRvTWFwKGVkc0FjdGl2ZUNvdXJzZXMsIGMgPT4gYy5uYW1lKSA6XHJcbiAgICAgIHt9O1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFByb21pc2UuYWxsKGFjdGl2ZUNvdXJzZXMubWFwKGFzeW5jICh7aWQsIG5hbWUsIGRlc2NyaXB0aW9uLCBtb2RpZmllZEJ5fSkgPT4ge1xyXG5cclxuICAgICAgbGV0IGVkc0NvdXJzZSA9IGVkc0NvdXJzZU1hcFtuYW1lXTtcclxuXHJcbiAgICAgIGxldCBkZWZhdWx0VmlzaWJsZSA9IGlzU3R1ZGVudCA/XHJcbiAgICAgICAgZWRzQ291cnNlICE9IG51bGwgOiAvLyBDb3Vyc2UgbmFtZSBhbHNvIGxpc3RlZCBpbiBFRFNcclxuICAgICAgICB0cnVlOyAvLyBUZWFjaGVycyBub3QgZGVwZW5kZW50IG9uIEVEUyBsaXN0aW5nXHJcblxyXG4gICAgICBsZXQgdmlzaWJsZSA9IGRlZmF1bHRWaXNpYmxlID9cclxuICAgICAgICAhaGlkZGVuQ291cnNlc01hcFtpZF0gOiAvLyBWaXNpYmxlIHVubGVzcyB1c2VyIGhhcyBvdmVycmlkZGVuIHRoYXQuXHJcbiAgICAgICAgISF2aXNpYmxlQ291cnNlc01hcFtpZF07IC8vIEhpZGRlbiB1bmxlc3MgdXNlciBoYXMgb3ZlcnJpZGRlbiB0aGF0LlxyXG4gICAgICBcclxuICAgICAgLy8gUmVzb2x2ZSBkZXNjcmlwdGlvbjpcclxuICAgICAgaWYgKG1vZGlmaWVkQnkgJiYgbW9kaWZpZWRCeS5uYW1lICYmICFkZXNjcmlwdGlvbikge1xyXG4gICAgICAgIGRlc2NyaXB0aW9uID0gYCR7bW9kaWZpZWRCeS5uYW1lfXMgdmVyc2lvbmA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgaWQsXHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBkZXNjcmlwdGlvbixcclxuICAgICAgICB2aXNpYmxlLFxyXG4gICAgICAgIGRlZmF1bHRWaXNpYmxlXHJcbiAgICAgIH07XHJcbiAgICB9KSk7XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdC5zb3J0KCh7bmFtZTogYX0sIHtuYW1lOiBifSkgPT4gYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IDApO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgaGlkZUNvdXJzZShjOiBDb3Vyc2VXaXRoSGlkZGVuU3RhdGUpIHtcclxuICAgIGNvbnN0IG92ZXJyaWRlcyA9IHRoaXMua2VkUmVwby5tZW0uaXRlbXMuZmlsdGVyKGhjID0+IGhjLm5hbWUgPT09IGMuaWQpO1xyXG4gICAgaWYgKGMuZGVmYXVsdFZpc2libGUpIHtcclxuICAgICAgYXdhaXQgdGhpcy5rZWRSZXBvLmluc2VydChbe1xyXG4gICAgICAgIGlkOiBjcmVhdGVVVUlEKCksXHJcbiAgICAgICAgbmFtZTogYy5pZFxyXG4gICAgICB9XSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhd2FpdCB0aGlzLmtlZFJlcG8uZGVsZXRlKG92ZXJyaWRlcy5tYXAob3YgPT4gb3YuaWQpKTsgICAgICBcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIHNob3dDb3Vyc2UoYzogQ291cnNlV2l0aEhpZGRlblN0YXRlKSB7XHJcbiAgICBjb25zdCBvdmVycmlkZXMgPSB0aGlzLmtlZFJlcG8ubWVtLml0ZW1zLmZpbHRlcihoYyA9PiBoYy5uYW1lID09PSBjLmlkKTtcclxuICAgIGlmIChjLmRlZmF1bHRWaXNpYmxlKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMua2VkUmVwby5kZWxldGUob3ZlcnJpZGVzLm1hcChvdiA9PiBvdi5pZCkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYXdhaXQgdGhpcy5rZWRSZXBvLmluc2VydChbe1xyXG4gICAgICAgIGlkOiBjcmVhdGVVVUlEKCksXHJcbiAgICAgICAgbmFtZTogYy5pZCxcclxuICAgICAgICBzaG93OiB0cnVlXHJcbiAgICAgIH1dKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5vdGlmeVN1YnNjcmliZXIgPSAoc3Vic2NyaWJlcjogSGlkZGVuQ291cnNlc1N1YnNjcmliZXIsIG9wdGlvbnM6IFN1YnNjcmliZXJPcHRpb25zKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBzdWJzY3JpYmVyKG9wdGlvbnMuZnVsbENvdXJzZSA/IHRoaXMucmVzdWx0IDogdGhpcy5yZXN1bHQuZmlsdGVyKGMgPT4gYy52aXNpYmxlKSk7XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgc3Vic2NyaWJlIChzdWJzY3JpYmVyOiBIaWRkZW5Db3Vyc2VzU3Vic2NyaWJlciwgb3B0aW9uczogU3Vic2NyaWJlck9wdGlvbnMpIHtcclxuICAgIGlmICghdGhpcy5mdWxsQ291cnNlICYmIG9wdGlvbnMuZnVsbENvdXJzZSkge1xyXG4gICAgICAvLyBUaGUgc3Vic2NyaWJlciBkZW1hbmRzIGZ1bGwgY291cnNlc1xyXG4gICAgICAvLyBOZWVkIHRvIHF1ZXJ5IHRoYXQgYmVmb3JlIG5vdGlmeWluZ1xyXG4gICAgICAvLyBBbHNvIGFmZmVjdCBzdGF0ZSBmb3IgZnV0dXJlIGludGVybmFsIG5vdGlmaWNhdGlvblxyXG4gICAgICB0aGlzLmZ1bGxDb3Vyc2UgPSBvcHRpb25zLmZ1bGxDb3Vyc2U7XHJcbiAgICAgIHRoaXMua2VkQ291cnNlc1Byb21pc2UgPSB0aGlzLmxpc3RLZWRDb3Vyc2VzKCk7IC8vIFJlZG8gdGhpcyBjYWxsLCBub3cgbG9hZGluZyBmdWxsIGNvdXJzZXNcclxuICAgICAgLy8gV2FpdCBmb3IgYWxsIG91dHN0YW5kaW5nIGZldGNoKCkgY2FsbHMgdG8gY29tcGxldGU6XHJcbiAgICAgIGNvbnN0IFthY3RpdmVDb3Vyc2VzLCBlZHNBY3RpdmVDb3Vyc2VzLCB1c2VySGlkZGVuQ291cnNlc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgdGhpcy5rZWRDb3Vyc2VzUHJvbWlzZSwgXHJcbiAgICAgICAgdGhpcy5lZHNDb3Vyc2VzUHJvbWlzZSxcclxuICAgICAgICB0aGlzLnVzZXJIaWRkZW5Db3Vyc2VzUHJvbWlzZV0pO1xyXG4gICAgICAvLyBBc3NlbWJsZSByZXN1bHQ6XHJcbiAgICAgIHRoaXMucmVzdWx0ID0gYXdhaXQgdGhpcy5jcmVhdGVDb3Vyc2VzTGlzdChlZHNBY3RpdmVDb3Vyc2VzLCB1c2VySGlkZGVuQ291cnNlcywgYWN0aXZlQ291cnNlcyk7XHJcbiAgICB9XHJcbiAgICBhd2FpdCB0aGlzLnVzZXJIaWRkZW5Db3Vyc2VzUHJvbWlzZTsgLy8gU28gd2Uga25vdyB0aGF0IHRoaXMucmVzdWx0IGlzIHRoZXJlLlxyXG4gICAgdGhpcy5ub3RpZnlTdWJzY3JpYmVyKHN1YnNjcmliZXIsIG9wdGlvbnMpO1xyXG4gICAgdGhpcy5zdWJzY3JpYmVycy5wdXNoKHtzdWJzY3JpYmVyLCBvcHRpb25zfSk7XHJcbiAgfVxyXG5cclxuICB1bnN1YnNjcmliZSAoc3Vic2NyaWJlcjogSGlkZGVuQ291cnNlc1N1YnNjcmliZXIpIHtcclxuICAgIHRoaXMuc3Vic2NyaWJlcnMgPSB0aGlzLnN1YnNjcmliZXJzLmZpbHRlcihzID0+IHMuc3Vic2NyaWJlciAhPT0gc3Vic2NyaWJlcik7XHJcbiAgfVxyXG59XHJcblxyXG5pZiAoIWhpZGRlbkNvdXJzZXNSZXBvKSB7XHJcbiAgaGlkZGVuQ291cnNlc1JlcG8gPSBlbnYuaGlkZGVuQ291cnNlc1JlcG8gPSBuZXcgSGlkZGVuQ291cnNlc1JlcG8oKTtcclxufVxyXG4iLCJpbXBvcnQgeyBSZXBvLCBSZXBvQ29tbXVuaWNhdG9yfSBmcm9tICcuL3JlcG8nO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kQ2xpZW50LCBMaXN0T3B0aW9ucywgQmF0Y2hSdW5uZXIsIGNyZWF0ZVVVSUQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IERvY3VtZW50fSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEtlZFJlcG9PcHRpb25zPFQgZXh0ZW5kcyBEb2N1bWVudD4ge1xyXG4gIGdldENsaWVudDogKCk9PktlZEJhY2tlbmRDbGllbnQ7XHJcbiAgZ2V0UXVlcnlPcHRpb25zOiAoKT0+UHJvbWlzZTxMaXN0T3B0aW9ucz47XHJcbiAgb3B0aW1pc3RpYzogYm9vbGVhbjtcclxuICB0YWJsZTogc3RyaW5nO1xyXG4gIHVzZXI6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEtlZFJlcG88VCBleHRlbmRzIERvY3VtZW50PiB7XHJcbiAgbWVtOiBSZXBvPFQ+O1xyXG4gIG9wdGlvbnM6IEtlZFJlcG9PcHRpb25zPFQ+O1xyXG4gIFxyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IEtlZFJlcG9PcHRpb25zPFQ+KSB7XHJcbiAgICBjb25zdCB7dGFibGUsIGdldENsaWVudCwgZ2V0UXVlcnlPcHRpb25zfSA9IG9wdGlvbnM7XHJcbiAgICB0aGlzLm1lbSA9IG5ldyBSZXBvPFQ+KHtxdWVyeTogYXN5bmMgKCk9PntcclxuICAgICAgY29uc3QgcXVlcnlPcHRpb25zID0gYXdhaXQgZ2V0UXVlcnlPcHRpb25zKCk7XHJcbiAgICAgIHJldHVybiBhd2FpdCBnZXRDbGllbnQoKS5saXN0PFQ+KHRhYmxlLCB7XHJcbiAgICAgICAgLi4ucXVlcnlPcHRpb25zLFxyXG4gICAgICAgIGNhY2hlQnVzdDogdGhpcy5nZXRDYWNoZUJ1c3QoKX0pO1xyXG4gICAgfX0pO1xyXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0Q2FjaGVCdXN0KCkge1xyXG4gICAgY29uc3Qge3RhYmxlLCB1c2VyfSA9IHRoaXMub3B0aW9ucztcclxuICAgIGNvbnN0IGNhY2hlQnVzdCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYWNoZS1idXN0LScgKyB0YWJsZSArICctJyArIHVzZXIpO1xyXG4gICAgcmV0dXJuIGNhY2hlQnVzdCB8fCB0aGlzLnJlZ2VuZXJhdGVDYWNoZUJ1c3QoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVnZW5lcmF0ZUNhY2hlQnVzdCgpIHtcclxuICAgIGNvbnN0IHt0YWJsZSwgdXNlcn0gPSB0aGlzLm9wdGlvbnM7XHJcbiAgICBjb25zdCBjYWNoZUJ1c3QgPSBjcmVhdGVVVUlEKCk7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY2FjaGUtYnVzdC0nICsgdGFibGUgKyAnLScgKyB1c2VyLCBjYWNoZUJ1c3QpO1xyXG4gICAgcmV0dXJuIGNhY2hlQnVzdDtcclxuICB9XHJcblxyXG4gIGFzeW5jIHVwc2VydChpdGVtOiBULCB1cGRhdGVyOiAoaXRlbTogVCkgPT4gdm9pZCkge1xyXG4gICAgaWYgKCFpdGVtLiRldGFnKSB7XHJcbiAgICAgIC8vIEl0ZW1zIHdpdGhvdXQgJGV0YWcgY2Fubm90IGJlIHJldHJpZXZlZCBmcm9tIHNlcnZlciwgc28gaXQgc2hvdWxkIGJlIGluc2VydGVkLlxyXG4gICAgICBjb25zdCB1cGRhdGVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIGl0ZW0pO1xyXG4gICAgICB1cGRhdGVyKHVwZGF0ZWRJdGVtKTtcclxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuaW5zZXJ0KFt1cGRhdGVkSXRlbV0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gV2UgaGF2ZSBhbiAkZXRhZywgc28gd2UgY2FuIGV4cGVjdCBpdCB0byBsaXZlIG9uIHRoZSBzZXJ2ZXIuXHJcbiAgICAgIC8vIEhvd2V2ZXIsIHRha2UgY2FyZSBvZiB0aGUgdW5saWtlbHkgc2l0dWF0aW9uIHRoYXQgaXQgd2FzIGRlbGV0ZWQgZnJvbSBzZXJ2ZXIsXHJcbiAgICAgIC8vIGFuZCBpZiBzbywgaW5zZXJ0IGl0IGFnYWluLlxyXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZShbaXRlbV0sIHVwZGF0ZXIpLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgIGlmIChlLm5hbWUgPT09IFwiaHR0cDQwNFwiKSB7XHJcbiAgICAgICAgICBjb25zdCB1cGRhdGVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIGl0ZW0pO1xyXG4gICAgICAgICAgdXBkYXRlcih1cGRhdGVkSXRlbSk7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy5pbnNlcnQoW3VwZGF0ZWRJdGVtXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGUoaXRlbXM6IFRbXSwgdXBkYXRlcjogKGl0ZW06IFQpID0+IHZvaWQpIHtcclxuICAgIGNvbnN0IHtnZXRDbGllbnQsIG9wdGltaXN0aWMsIHRhYmxlfSA9IHRoaXMub3B0aW9ucztcclxuICAgIGNvbnN0IGNsaWVudCA9IGdldENsaWVudCgpO1xyXG4gICAgY29uc3QgbW9kaWZpZWRJdGVtczogVFtdID0gaXRlbXMubWFwKGl0ZW0gPT4ge1xyXG4gICAgICBjb25zdCBtZW1SZXBvSXRlbSA9IHRoaXMubWVtLml0ZW1zLmZpbmQoaXQgPT4gaXQuaWQgPT09IGl0ZW0uaWQpO1xyXG4gICAgICBpdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgbWVtUmVwb0l0ZW0gfHwgaXRlbSk7XHJcbiAgICAgIHVwZGF0ZXIoaXRlbSk7XHJcbiAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgfSk7XHJcbiAgICBpZiAob3B0aW1pc3RpYykgYXdhaXQgdGhpcy5tZW0udXBkYXRlKG1vZGlmaWVkSXRlbXMubWFwKHggPT4gT2JqZWN0LmFzc2lnbih7fSwgeCwgeyRtZXRhOiAndXBkYXRpbmcnfSkpKTtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGNsaWVudC5kbyAoYnIgPT4gbW9kaWZpZWRJdGVtcy5mb3JFYWNoKGl0ZW0gPT4gYnIucHV0KHRhYmxlLCBpdGVtKSkpXHJcbiAgICAuY2F0Y2goZSA9PiBlLm5hbWUgPT09IFwiaHR0cDQwOVwiID8gLy8gY29uZmxpY3RcclxuICAgICAgLy8gR2V0IGEgZnJlc2ggdmVyc2lvbiBmcm9tIHNlcnZlcjpcclxuICAgICAgY2xpZW50Lmxpc3Q8VD4odGFibGUsIHtpZHM6IGl0ZW1zLm1hcChpdGVtID0+IGl0ZW0uaWQpfSwge2NhY2hlOiAnbm8tY2FjaGUnfSkudGhlbihmcmVzaEl0ZW1zID0+IHtcclxuICAgICAgICAvLyBVcGRhdGUgbG9jYWwgdmVyc2lvbjpcclxuICAgICAgICBjb25zdCBtb2RpZmllZEl0ZW1zID0gZnJlc2hJdGVtcy5tYXAoZnJlc2hJdGVtID0+IHtcclxuICAgICAgICAgIC8vIENsb25lIHRoZSBmcmVzaCBpdGVtXHJcbiAgICAgICAgICBjb25zdCBtb2RpZmllZCA9IE9iamVjdC5hc3NpZ24oe30sIGZyZXNoSXRlbSk7XHJcbiAgICAgICAgICAvLyBSZS1ydW4gdGhlIHVwZGF0ZXIgb24gdGhlIGNsb25lOlxyXG4gICAgICAgICAgdXBkYXRlcihtb2RpZmllZCk7XHJcbiAgICAgICAgICByZXR1cm4gbW9kaWZpZWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gUmUtZG8gdGhlIHRoZSBwdXQgb3BlcmF0aW9uIHRvd2FyZHMgdGhlIHNlcnZlci5cclxuICAgICAgICByZXR1cm4gY2xpZW50LmRvKGJyID0+IG1vZGlmaWVkSXRlbXMuZm9yRWFjaChpdGVtID0+IGJyLnB1dCh0YWJsZSwgaXRlbSkpKTtcclxuICAgICAgfSkgOlxyXG4gICAgICAvLyBPdGhlciB1bmV4cGVjdGVkIGVycm9yOlxyXG4gICAgICBQcm9taXNlLnJlc29sdmUob3B0aW1pc3RpYyAmJlxyXG4gICAgICAgIHRoaXMubWVtLnVwZGF0ZShpdGVtcykpIC8vIFVuZG8gb3B0aW1pc3RpYyB1cGRhdGVcclxuICAgICAgLnRoZW4oKCk9PntcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7IC8vIFJlamVjdCB3aXRoIHRoZSBlcnJvciBubyBtYXR0ZXIuXHJcbiAgICAgIH0pKTtcclxuICAgIHRoaXMucmVnZW5lcmF0ZUNhY2hlQnVzdCgpO1xyXG4gICAgbW9kaWZpZWRJdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICBpdGVtLiRldGFnID0gcmVzLm5ld0V0YWdzW2l0ZW0uaWRdO1xyXG4gICAgICBpdGVtLiRtZXRhID0gdW5kZWZpbmVkO1xyXG4gICAgfSk7XHJcbiAgICBhd2FpdCB0aGlzLm1lbS51cGRhdGUobW9kaWZpZWRJdGVtcyk7IC8vIEVuc3VyZXMgbmV3IGV0YWcgaXMgaXMgYXBwbGllZCBvbiBuZXh0IGFjdGlvbi5cclxuICB9XHJcblxyXG4gIHN0cmlwR3JhcGhzIChpdGVtczogVFtdLCBncmFwaHM6IHN0cmluZ1tdKSB7XHJcbiAgICByZXR1cm4gaXRlbXMubWFwKGl0ZW0gPT4ge1xyXG4gICAgICBjb25zdCBjbG9uZSA9IE9iamVjdC5hc3NpZ24oe30sIGl0ZW0pO1xyXG4gICAgICBncmFwaHMuZm9yRWFjaChncmFwaCA9PiB7XHJcbiAgICAgICAgaWYgKGl0ZW1bZ3JhcGhdKSB7XHJcbiAgICAgICAgICBjbG9uZVtncmFwaF0gPSAoaXRlbVtncmFwaF0gYXMge2lkOnN0cmluZ31bXSkubWFwIChkb2MgPT4gKHtpZDogZG9jLmlkfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBjbG9uZTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgaW5zZXJ0KGl0ZW1zOiBUW10pIHtcclxuICAgIGNvbnN0IHtnZXRDbGllbnQsIG9wdGltaXN0aWMsIHRhYmxlLCBnZXRRdWVyeU9wdGlvbnN9ID0gdGhpcy5vcHRpb25zO1xyXG4gICAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50KCk7XHJcbiAgICBjb25zdCBxdWVyeU9wdGlvbnMgPSBhd2FpdCBnZXRRdWVyeU9wdGlvbnMoKTtcclxuICAgIGNvbnN0IGdyYXBocyA9IFtdLmNvbmNhdChxdWVyeU9wdGlvbnMuaW5jbHVkZSk7XHJcbiAgICAvLyBHaXZlIElEcyB0byBlYWNoIGl0ZW06XHJcbiAgICBpdGVtcyA9IGl0ZW1zLm1hcChpdGVtID0+IGl0ZW0uaWQgPyBpdGVtIDogT2JqZWN0LmFzc2lnbih7fSwgaXRlbSwge2lkOiBjcmVhdGVVVUlEKCl9KSk7XHJcbiAgICBjb25zdCBzdHJpcHBlZCA9IHRoaXMuc3RyaXBHcmFwaHMoaXRlbXMsIGdyYXBocyk7XHJcbiAgICBpZiAob3B0aW1pc3RpYykgYXdhaXQgdGhpcy5tZW0uaW5zZXJ0KHN0cmlwcGVkLm1hcCh4ID0+IE9iamVjdC5hc3NpZ24oe30sIHgsIHskbWV0YTogJ2FkZGluZyd9KSkpO1xyXG4gICAgY29uc3QgYnIgPSBuZXcgQmF0Y2hSdW5uZXIoKTtcclxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBzdHJpcHBlZCkge1xyXG4gICAgICAvLyBBbHNvIGFkZCBsaW5rcyB0byBhbGwgZm9yZWlnbiByZWxhdGVkIGl0ZW1zOlxyXG4gICAgICBmb3IgKGNvbnN0IGdyYXBoIG9mIGdyYXBocykge1xyXG4gICAgICAgIGNvbnN0IGZvcmVpZ25JdGVtczogRG9jdW1lbnRbXSA9IGl0ZW1bZ3JhcGhdO1xyXG4gICAgICAgIGlmIChmb3JlaWduSXRlbXMpIHtcclxuICAgICAgICAgIGZvcmVpZ25JdGVtcy5mb3JFYWNoKGRvYyA9PiB7XHJcbiAgICAgICAgICAgIGJyLmxpbmsyKHRhYmxlLCBpdGVtLmlkLCBncmFwaCwgZG9jLmlkKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBici5hZGQodGFibGUsIGl0ZW0pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgY2xpZW50LmJhdGNoKGJyLm11dGF0aW9uUmVxdWVzdHMpLmNhdGNoKGUgPT4ge1xyXG4gICAgICBpZiAob3B0aW1pc3RpYykgdGhpcy5tZW0uZGVsZXRlKGl0ZW1zLm1hcChpdGVtID0+IGl0ZW0uaWQpKTtcclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO1xyXG4gICAgfSlcclxuICAgIHRoaXMucmVnZW5lcmF0ZUNhY2hlQnVzdCgpO1xyXG4gICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IGl0ZW0uJGV0YWcgPSByZXMubmV3RXRhZ3NbaXRlbS5pZF0pO1xyXG4gICAgaWYgKG9wdGltaXN0aWMpXHJcbiAgICAgIGF3YWl0IHRoaXMubWVtLnVwZGF0ZShpdGVtcyk7IC8vIFVwZGF0ZSB3aXRoIG5ldyAkZXRhZy5cclxuICAgIGVsc2VcclxuICAgICAgYXdhaXQgdGhpcy5tZW0uaW5zZXJ0KGl0ZW1zKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGRlbGV0ZSAoaWRzOiBzdHJpbmdbXSkge1xyXG4gICAgY29uc3Qge2dldENsaWVudCwgb3B0aW1pc3RpYywgdGFibGV9ID0gdGhpcy5vcHRpb25zO1xyXG4gICAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50KCk7XHJcbiAgICBpZiAob3B0aW1pc3RpYykgYXdhaXQgdGhpcy5tZW0udXBkYXRlKGlkc1xyXG4gICAgICAubWFwKGlkID0+IHRoaXMubWVtLml0ZW1zLmZpbmQoeCA9PiB4LmlkID09PSBpZCkpXHJcbiAgICAgIC5maWx0ZXIoeCA9PiB4KVxyXG4gICAgICAubWFwKHggPT4gT2JqZWN0LmFzc2lnbih7fSwgeCwgeyRtZXRhOiAnZGVsZXRpbmcnfSkpKTtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGNsaWVudC5kbyAoYnIgPT4gaWRzLmZvckVhY2goaWQgPT4gYnIuZGVsZXRlKHRhYmxlLCBpZCkpKS5jYXRjaChhc3luYyBlID0+IHtcclxuICAgICAgaWYgKG9wdGltaXN0aWMpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLm1lbS51cGRhdGUoaWRzXHJcbiAgICAgICAgICAubWFwKGlkID0+IHRoaXMubWVtLml0ZW1zLmZpbmQoeCA9PiB4LmlkID09PSBpZCkpXHJcbiAgICAgICAgICAuZmlsdGVyKHggPT4geClcclxuICAgICAgICAgIC5tYXAoeCA9PiB7XHJcbiAgICAgICAgICAgIHggPSBPYmplY3QuYXNzaWduKHt9LCB4KTtcclxuICAgICAgICAgICAgZGVsZXRlIHguJG1ldGE7XHJcbiAgICAgICAgICAgIHJldHVybiB4O1xyXG4gICAgICAgICAgfSkpO1xyXG4gICAgICB9XHJcbiAgICAgIHRocm93IGU7XHJcbiAgICB9KTtcclxuICAgIHRoaXMucmVnZW5lcmF0ZUNhY2hlQnVzdCgpO1xyXG4gICAgYXdhaXQgdGhpcy5tZW0uZGVsZXRlKGlkcyk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7S2VkUmVwb30gZnJvbSAnLi9rZWQtcmVwbyc7XHJcbmltcG9ydCB7IEtHVGVybVBsYW5uZXJXZWVrUGxhbk9yVHV0b3JOb3RlIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IGdldFRlcm1TdGFyRW5kRGF0ZSB9IGZyb20gJy4uL3V0aWxzL3NjaG9vbC1tb21lbnQnO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRDbGllbnQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IFVzZXIgfSBmcm9tICcuLi9jb250cmFjdHMva2VkLW1vZGVscyc7XHJcblxyXG5leHBvcnQgY2xhc3MgS0dUZXJtUGxhbm5lclJlcG8gZXh0ZW5kcyBLZWRSZXBvPEtHVGVybVBsYW5uZXJXZWVrUGxhbk9yVHV0b3JOb3RlPiB7XHJcbiAgY29uc3RydWN0b3IoZ2V0Q2xpZW50OiAoKT0+S2VkQmFja2VuZENsaWVudCwgZ2V0Q3VycmVudFVzZXI6ICgpPT5Vc2VyKSB7XHJcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgY29uc3QgW3Rlcm1TdGFydCwgdGVybUVuZF0gPSBnZXRUZXJtU3RhckVuZERhdGUobm93LCBub3cuZ2V0TW9udGgoKSA+PSA3KTtcclxuICAgIHN1cGVyKHtcclxuICAgICAgZ2V0Q2xpZW50LFxyXG4gICAgICBvcHRpbWlzdGljOiB0cnVlLFxyXG4gICAgICB0YWJsZTogXCJ3ZWVrcGxhbnNcIixcclxuICAgICAgdXNlcjogY3VycmVudFVzZXIgPyBjdXJyZW50VXNlci5tYWlsIDogXCJcIixcclxuICAgICAgZ2V0UXVlcnlPcHRpb25zOiBhc3luYyAoKT0+e1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBmcm9tOiB0ZXJtU3RhcnQuc3RhcnRPZignd2VlaycpLmFkZCgtMiwgJ2RheXMnKS50b0RhdGUoKS52YWx1ZU9mKCksXHJcbiAgICAgICAgICB0bzogdGVybUVuZC5zdGFydE9mKCd3ZWVrJykuYWRkKDUsICdkYXlzJykudG9EYXRlKCkudmFsdWVPZigpLFxyXG4gICAgICAgICAgcm9sZTogXCJVU0VSXCJcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHRlcm1QbGFubmVyUmVwbyA9IG5ldyBLR1Rlcm1QbGFubmVyUmVwbygoKT0+ZW52LmtlZEJhY2tlbmRDbGllbnQsKCk9PmVudi5jdXJyZW50VXNlcik7XHJcbmVudi5rZ1Rlcm1QbGFubmVyUmVwbyA9IHRlcm1QbGFubmVyUmVwbztcclxuIiwiaW1wb3J0IGVudiBmcm9tICcuLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBLU1Rlcm1QbGFubmVyUmVwbyB9IGZyb20gJy4va3MtdGVybXBsYW5uZXItcmVwbyc7XHJcblxyXG5leHBvcnQgY29uc3QgdGVybVBsYW5uZXJSZXBvS1MgPSBuZXcgS1NUZXJtUGxhbm5lclJlcG8oKCk9PmVudi5rZWRCYWNrZW5kQ2xpZW50LCAoKT0+ZW52LmN1cnJlbnRVc2VyKTtcclxuZW52LmtzVGVybVBsYW5uZXJSZXBvID0gdGVybVBsYW5uZXJSZXBvS1M7XHJcbiIsImltcG9ydCB7IEtlZFJlcG8gfSBmcm9tICcuL2tlZC1yZXBvJztcclxuaW1wb3J0IHsgS1NUZXJtUGxhbm5lcldlZWtQbGFuLCBUZXJtUGxhbm5lclR1dG9yTm90ZSwgVGVybXBsYW5uZXJXZWVrT3JUdXRvciB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kQ2xpZW50IH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnLi4vY29udHJhY3RzL2tlZC1tb2RlbHMnO1xyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBLU1Rlcm1QbGFubmVyUmVwbyBleHRlbmRzIEtlZFJlcG88VGVybXBsYW5uZXJXZWVrT3JUdXRvcj4ge1xyXG4gIHN0YXJ0RGF0ZTogbW9tZW50Lk1vbWVudDtcclxuICBlbmREYXRlOiBtb21lbnQuTW9tZW50O1xyXG5cclxuICAgYXN5bmMgcmVmcmVzaERhdGEoZGF0ZUludGVydmFsIDogbW9tZW50Lk1vbWVudFtdKXtcclxuICAgIFt0aGlzLnN0YXJ0RGF0ZSwgdGhpcy5lbmREYXRlXSAgPSBkYXRlSW50ZXJ2YWw7XHJcbiAgICAgYXdhaXQgdGhpcy5tZW0ucmVmcmVzaEZyb21TZXJ2ZXIoKTtcclxuICAgfVxyXG5cclxuICBjb25zdHJ1Y3RvcihnZXRDbGllbnQ6ICgpPT5LZWRCYWNrZW5kQ2xpZW50LCBnZXRDdXJyZW50VXNlcjogKCk9PlVzZXIpIHtcclxuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gZ2V0Q3VycmVudFVzZXIoKTtcclxuICAgIHN1cGVyKHtcclxuICAgICAgZ2V0Q2xpZW50LFxyXG4gICAgICBvcHRpbWlzdGljOiB0cnVlLFxyXG4gICAgICB0YWJsZTogXCJ3ZWVrcGxhbnMta3NcIixcclxuICAgICAgdXNlcjogY3VycmVudFVzZXIgPyBjdXJyZW50VXNlci5tYWlsIDogXCJcIixcclxuICAgICAgZ2V0UXVlcnlPcHRpb25zOiBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc3RhcnREYXRlVmFsdWUgPSAodGhpcy5zdGFydERhdGUgJiYgdGhpcy5zdGFydERhdGUudmFsdWVPZigpKSB8fCBtb21lbnQoKS52YWx1ZU9mKCk7XHJcbiAgICAgICAgY29uc3QgZW5kRGF0ZVZhbHVlID0gKHRoaXMuZW5kRGF0ZSAmJiB0aGlzLmVuZERhdGUudmFsdWVPZigpKSB8fCBtb21lbnQoKS52YWx1ZU9mKCk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGZyb206IHN0YXJ0RGF0ZVZhbHVlLFxyXG4gICAgICAgICAgdG86IGVuZERhdGVWYWx1ZSxcclxuICAgICAgICAgIHJvbGU6IFwiVVNFUlwiXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJlcG9Db21tdW5pY2F0b3I8VCBleHRlbmRzIHtpZDogc3RyaW5nfT4ge1xyXG4gIHF1ZXJ5KCk6IFByb21pc2U8VFtdPjtcclxufVxyXG5cclxudHlwZSBTdWJzY3JpYmVyPFQ+ID0gKGl0ZW1zOlRbXSwgZXJyb3I6IHVuZGVmaW5lZCB8IEVycm9yKSA9PiBhbnk7XHJcblxyXG5leHBvcnQgY2xhc3MgUmVwbzxUIGV4dGVuZHMge2lkOiBzdHJpbmd9PiB7XHJcbiAgbGlzdFByb21pc2U6IFByb21pc2U8dm9pZD47XHJcbiAgaXRlbXM6IFRbXTtcclxuICBlcnJvcj86IEVycm9yO1xyXG4gIHN1YnNjcmliZXJzOiBTdWJzY3JpYmVyPFQ+W107XHJcblxyXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBjb21tOiBSZXBvQ29tbXVuaWNhdG9yPFQ+KSB7XHJcbiAgICB0aGlzLmxpc3RQcm9taXNlID0gbnVsbDtcclxuICAgIHRoaXMuaXRlbXMgPSBudWxsO1xyXG4gICAgdGhpcy5zdWJzY3JpYmVycyA9IFtdO1xyXG4gIH1cclxuXHJcbiAgc3Vic2NyaWJlKHN1YnNjcmliZXI6IFN1YnNjcmliZXI8VD4pIHtcclxuICAgIHJldHVybiB0aGlzLmVuc3VyZUhhc0RhdGEoKS50aGVuKCgpPT57XHJcbiAgICAgIHN1YnNjcmliZXIodGhpcy5pdGVtcywgdGhpcy5lcnJvcik7XHJcbiAgICAgIHRoaXMuc3Vic2NyaWJlcnMucHVzaChzdWJzY3JpYmVyKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdW5zdWJzY3JpYmUoc3Vic2NyaWJlcjogU3Vic2NyaWJlcjxUPikge1xyXG4gICAgdGhpcy5zdWJzY3JpYmVycyA9IHRoaXMuc3Vic2NyaWJlcnMuZmlsdGVyIChzID0+IHMgIT09IHN1YnNjcmliZXIpO1xyXG4gIH1cclxuXHJcbiAgbm90aWZ5U3Vic2NyaWJlcnMoKSB7XHJcbiAgICB0aGlzLnN1YnNjcmliZXJzLmZvckVhY2gocyA9PiBzKHRoaXMuaXRlbXMsIHRoaXMuZXJyb3IpKTtcclxuICB9XHJcblxyXG4gIGVuc3VyZUhhc0RhdGEoKSB7XHJcbiAgICBpZiAoIXRoaXMubGlzdFByb21pc2UpIHRoaXMucmVmcmVzaEZyb21TZXJ2ZXIoKTtcclxuICAgIHJldHVybiB0aGlzLmxpc3RQcm9taXNlO1xyXG4gIH1cclxuXHJcbiAgcmVmcmVzaEZyb21TZXJ2ZXIoKSB7XHJcbiAgICB0aGlzLmxpc3RQcm9taXNlID0gdGhpcy5jb21tLnF1ZXJ5KCkudGhlbihpdGVtcyA9PiB7XHJcbiAgICAgIHRoaXMuaXRlbXMgPSBpdGVtcztcclxuICAgICAgdGhpcy5lcnJvciA9IG51bGw7XHJcbiAgICAgIHRoaXMubm90aWZ5U3Vic2NyaWJlcnMoKTtcclxuICAgIH0pLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xyXG4gICAgICB0aGlzLml0ZW1zID0gdGhpcy5pdGVtcyB8fCBbXTtcclxuICAgICAgdGhpcy5ub3RpZnlTdWJzY3JpYmVycygpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5saXN0UHJvbWlzZTtcclxuICB9XHJcbiAgXHJcbiAgYXN5bmMgdXBkYXRlKGl0ZW06IFQgfCBUW10pIHtcclxuICAgIGF3YWl0IHRoaXMuZW5zdXJlSGFzRGF0YSgpO1xyXG4gICAgY29uc3QgdXBkYXRlZEl0ZW1zID0gQXJyYXkuaXNBcnJheShpdGVtKSA/IGl0ZW0gOiBbaXRlbV07XHJcbiAgICB0aGlzLml0ZW1zID0gdGhpcy5pdGVtcy5tYXAoaXQgPT4ge1xyXG4gICAgICBjb25zdCB1cGRhdGVkSXRlbSA9IHVwZGF0ZWRJdGVtcy5maW5kKCh7aWR9KSA9PiBpdC5pZCA9PT0gaWQpO1xyXG4gICAgICByZXR1cm4gdXBkYXRlZEl0ZW0gP1xyXG4gICAgICAgIE9iamVjdC5hc3NpZ24oe30sIHVwZGF0ZWRJdGVtKSA6XHJcbiAgICAgICAgaXQ7XHJcbiAgICB9KTtcclxuICAgIHRoaXMubm90aWZ5U3Vic2NyaWJlcnMoKTtcclxuICB9XHJcblxyXG4gIGluc2VydChpdGVtOiBUIHwgVFtdKSB7XHJcbiAgICByZXR1cm4gdGhpcy5lbnN1cmVIYXNEYXRhKCkudGhlbigoKT0+e1xyXG4gICAgICB0aGlzLml0ZW1zID0gdGhpcy5pdGVtcy5jb25jYXQoaXRlbSk7XHJcbiAgICAgIHRoaXMubm90aWZ5U3Vic2NyaWJlcnMoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlKGlkOiBzdHJpbmcgfCBzdHJpbmdbXSkge1xyXG4gICAgY29uc3QgaWRzID0gQXJyYXkuaXNBcnJheShpZCkgPyBpZCA6IFtpZF07XHJcbiAgICByZXR1cm4gdGhpcy5lbnN1cmVIYXNEYXRhKCkudGhlbigoKT0+e1xyXG4gICAgICB0aGlzLml0ZW1zID0gdGhpcy5pdGVtcy5maWx0ZXIoaXQgPT4gIWlkcy5zb21lKGlkID0+IGl0LmlkID09PSBpZCkpO1xyXG4gICAgICB0aGlzLm5vdGlmeVN1YnNjcmliZXJzKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHtLZWRSZXBvfSBmcm9tICcuL2tlZC1yZXBvJztcclxuaW1wb3J0IHsgVXNlclRhc2ssIFVzZXJTdWJUYXNrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUgfSBmcm9tIFwiLi4vY29tcG9uZW50cy93ZWVrcGxhbm5lci93ZWVrcGxhbm5lci1wZXJzaXN0ZWQtc3RhdGVcIjtcclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBjcmVhdGVVVUlELCBEb2N1bWVudEFjY2VzcywgS2VkQmFja2VuZENsaWVudCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgZ2V0QWRqdXN0ZWRXZWVrLCBLRURXZWVrIH0gZnJvbSAnLi4vdXRpbHMvd2Vla3V0aWwnO1xyXG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnLi4vY29udHJhY3RzL2tlZC1tb2RlbHMnO1xyXG5cclxuZXhwb3J0IGxldCB1c2VyVGFza3NSZXBvID0gZW52LnVzZXJUYXNrc1JlcG8gYXMgVXNlclRhc2tzUmVwbztcclxuXHJcbmV4cG9ydCBjbGFzcyBVc2VyVGFza3NSZXBvIGV4dGVuZHMgS2VkUmVwbzxVc2VyVGFzaz4ge1xyXG4gIHBlcnNpc3RlZFN0YXRlOiBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlIHwgbnVsbDtcclxuICBnZXRDdXJyZW50VXNlcjogKCk9PlVzZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGdldENsaWVudDogKCk9PktlZEJhY2tlbmRDbGllbnQsIGdldEN1cnJlbnRVc2VyOiAoKT0+VXNlcikgeyAgICBcclxuICAgIHN1cGVyKHtcclxuICAgICAgZ2V0Q2xpZW50LFxyXG4gICAgICBvcHRpbWlzdGljOiB0cnVlLFxyXG4gICAgICB0YWJsZTogXCJ1c2VydGFza3NcIixcclxuICAgICAgdXNlcjogZ2V0Q3VycmVudFVzZXIoKSA/IGdldEN1cnJlbnRVc2VyKCkubWFpbCA6IFwiXCIsXHJcbiAgICAgIGdldFF1ZXJ5T3B0aW9uczogYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gZ2V0Q3VycmVudFVzZXIoKTtcclxuICAgICAgICBjb25zdCB1c2VyRW1haWwgPSBjdXJyZW50VXNlciA/IGN1cnJlbnRVc2VyLm1haWwgOiBcIlwiO1xyXG4gICAgICAgIGlmICghdGhpcy5wZXJzaXN0ZWRTdGF0ZSlcclxuICAgICAgICAgIHRoaXMucGVyc2lzdGVkU3RhdGUgPSBhd2FpdCBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlLmxvYWQodXNlckVtYWlsKTtcclxuICAgICAgICBjb25zdCB7IHdlZWtEYXRlIH0gPSB0aGlzLnBlcnNpc3RlZFN0YXRlO1xyXG4gICAgICAgIGNvbnN0IHdlZWtOdW1iZXIgPSBtb21lbnQod2Vla0RhdGUpLndlZWsoKTtcclxuICAgICAgICBjb25zdCBrZWRXZWVrID0gS0VEV2Vlayhtb21lbnQod2Vla0RhdGUpLnllYXIoKSwgd2Vla051bWJlcik7XHJcbiAgICAgICAgLypjb25zdCBbZnJvbSwgdG9dID0gW21vbWVudCh3ZWVrRGF0ZSkuc3RhcnRPZignd2VlaycpLCBtb21lbnQod2Vla0RhdGUpLmVuZE9mKCd3ZWVrJyldXHJcbiAgICAgICAgICAubWFwKG0gPT4gbS50b0RhdGUoKS5nZXRUaW1lKCkpOyovXHJcbiAgICAgICAgXHJcbiAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBmcm9tOiBrZWRXZWVrLm5vdEJlZm9yZSxcclxuICAgICAgICAgICAgdG86IGtlZFdlZWsubm90QWZ0ZXIsXHJcbiAgICAgICAgICAgIHJvbGU6IFwiVVNFUlwiLFxyXG4gICAgICAgICAgICBpbmNsdWRlOiBbXCJ0YXNrXCIsIFwiY291cnNlXCJdLFxyXG4gICAgICAgICAgICBmbGFnczogW1wiaW5jbHVkZUlkc09ubHlcIl0sXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdGhpcy5wZXJzaXN0ZWRTdGF0ZSA9IG51bGw7XHJcbiAgICB0aGlzLmdldEN1cnJlbnRVc2VyID0gZ2V0Q3VycmVudFVzZXI7XHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGVQZXJzaXN0ZWRTdGF0ZShzdGF0ZUNoYW5nZXM6IFBhcnRpYWw8V2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZT4pIHtcclxuICAgIE9iamVjdC5hc3NpZ24odGhpcy5wZXJzaXN0ZWRTdGF0ZSwgc3RhdGVDaGFuZ2VzKTtcclxuICAgIGF3YWl0IHRoaXMucGVyc2lzdGVkU3RhdGUuc2F2ZSgpO1xyXG4gICAgdGhpcy5tZW0ubm90aWZ5U3Vic2NyaWJlcnMoKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNldFRhc2tEb25lU3RhdGUodXNlclRhc2s6IFVzZXJUYXNrLCBkb25lOiBib29sZWFuKSB7XHJcbiAgICBjb25zdCB7Z2V0Q2xpZW50LCBvcHRpbWlzdGljLCB0YWJsZX0gPSB0aGlzLm9wdGlvbnM7XHJcbiAgICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnQoKTtcclxuICAgIGNvbnN0IG1vZGlmaWVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHVzZXJUYXNrLCB7ZG9uZX0pO1xyXG4gICAgaWYgKG9wdGltaXN0aWMpIGF3YWl0IHRoaXMubWVtLnVwZGF0ZShPYmplY3QuYXNzaWduKHt9LCBtb2RpZmllZEl0ZW0sIHskbWV0YTogJ3VwZGF0aW5nJ30pKTtcclxuICAgIC8vIE5vdyBtYWtlIHN1cmUgdG8gY2hhbmdlIHRoZSBzdGF0ZSBmb3Igb3RoZXIgd2Vla3MgYXMgd2VsbDpcclxuICAgIGNvbnN0IHNpbWlsYXJUYXNrcyA9IGF3YWl0IGNsaWVudC5saXN0PFVzZXJUYXNrPigndXNlcnRhc2tzJywge1xyXG4gICAgICBuYW1lOiB1c2VyVGFzay5uYW1lLFxyXG4gICAgICByb2xlOiBcIlVTRVJcIixcclxuICAgICAgaW5jbHVkZTogW1widGFza1wiLFwiY291cnNlXCJdLFxyXG4gICAgICBmbGFnczogW1wiaW5jbHVkZUlkc09ubHlcIl0sXHJcbiAgICAgIGZyb206IG1vbWVudCh0aGlzLnBlcnNpc3RlZFN0YXRlLndlZWtEYXRlKS5hZGQoLTMsICd3ZWVrcycpLnZhbHVlT2YoKSxcclxuICAgICAgdG86IG1vbWVudCh0aGlzLnBlcnNpc3RlZFN0YXRlLndlZWtEYXRlKS5hZGQoMywgJ3dlZWtzJykudmFsdWVPZigpXHJcbiAgICB9LCB7XHJcbiAgICAgIGNhY2hlOiAnbm8tY2FjaGUnXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGlkZW50aWNhbFRhc2tzID0gc2ltaWxhclRhc2tzLmZpbHRlcih0ID0+XHJcbiAgICAgIHQuY291cnNlTmFtZSA9PT0gdXNlclRhc2suY291cnNlTmFtZSAmJlxyXG4gICAgICB0LmxlYXJuaW5nR29hbCA9PT0gdXNlclRhc2subGVhcm5pbmdHb2FsICYmXHJcbiAgICAgICghdXNlclRhc2sudGFzayB8fCB0LnRhc2subWFwKHQ9PnQuaWQpLmpvaW4oJycpID09PSB1c2VyVGFzay50YXNrLm1hcCh0PT50LmlkKS5qb2luKCcnKSkgJiZcclxuICAgICAgKCF1c2VyVGFzay5jb3Vyc2UgfHwgdC5jb3Vyc2UubWFwKGM9PmMuaWQpLmpvaW4oJycpID09PSB1c2VyVGFzay5jb3Vyc2UubWFwKGM9PmMuaWQpLmpvaW4oJycpKSk7XHJcbiAgICBpZiAoaWRlbnRpY2FsVGFza3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIC8vIFdvcmthcm91bmQgZm9yIGlzc3VlIGluIFN1YmplY3RQbGFubmVyIG1pZ3JhdGlvbiAodXNlcnRhc2tzIHdpdGggbG9uZyBuYW1lcyBpcyBub3QgZm91bmQpXHJcbiAgICAgIGlkZW50aWNhbFRhc2tzLnB1c2godXNlclRhc2spXHJcbiAgICB9XHJcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShpZGVudGljYWxUYXNrcywgdCA9PiB0LmRvbmUgPSBkb25lKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNldFN1YlRhc2tEb25lU3RhdGUgKHVzZXJUYXNrOiBVc2VyVGFzaywgc3ViVGFza0lkOiBzdHJpbmcsIGRvbmU6IGJvb2xlYW4pIHtcclxuICAgIGNvbnN0IHtnZXRDbGllbnQsIG9wdGltaXN0aWMsIHRhYmxlfSA9IHRoaXMub3B0aW9ucztcclxuICAgIGNvbnN0IGNsaWVudCA9IGdldENsaWVudCgpO1xyXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoW3VzZXJUYXNrXSxcclxuICAgICAgdCA9PiB0LnN1YlRhc2tzICYmIHQuc3ViVGFza3MuZmlsdGVyKHN0ID0+IHN0LmlkID09PSBzdWJUYXNrSWQpXHJcbiAgICAgICAgLmZvckVhY2goc3QgPT4gc3QuZG9uZSA9IGRvbmUpKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNldFdlZWtQbGFubmVyQm94T3Blbihjb3Vyc2VOYW1lOiBzdHJpbmcsIGlzT3BlbjogYm9vbGVhbikge1xyXG4gICAgY29uc3Qgb3BlbkNvdXJzZXMgPSB7IC4uLnRoaXMucGVyc2lzdGVkU3RhdGUub3BlbkNvdXJzZXMgfTtcclxuICAgIGlmIChpc09wZW4pXHJcbiAgICAgIG9wZW5Db3Vyc2VzW2NvdXJzZU5hbWVdID0gdHJ1ZTtcclxuICAgIGVsc2VcclxuICAgICAgZGVsZXRlIG9wZW5Db3Vyc2VzW2NvdXJzZU5hbWVdO1xyXG4gICAgYXdhaXQgdGhpcy51cGRhdGVQZXJzaXN0ZWRTdGF0ZSh7b3BlbkNvdXJzZXN9KTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGNoYW5nZVdlZWsod2Vla0RhdGU6IERhdGUsIGtlZXBDdXJyZW50RGF0ZT86IGJvb2xlYW4pIHtcclxuICAgIGxldCBwZXJzaXN0ZWRTdGF0ZSA9IHRoaXMucGVyc2lzdGVkU3RhdGU7XHJcbiAgICBpZiAoIXBlcnNpc3RlZFN0YXRlKSB7XHJcbiAgICAgIHBlcnNpc3RlZFN0YXRlID0gYXdhaXQgV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZS5sb2FkKHRoaXMub3B0aW9ucy51c2VyKTtcclxuICAgIH1cclxuICAgIGNvbnN0IG5ld1BlcnNpc3RlZCA9IG5ldyBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlKHBlcnNpc3RlZFN0YXRlKTtcclxuICAgIG5ld1BlcnNpc3RlZC53ZWVrRGF0ZSA9IGtlZXBDdXJyZW50RGF0ZSA/IG1vbWVudCh3ZWVrRGF0ZSkudmFsdWVPZigpIDogbW9tZW50KHdlZWtEYXRlKS5zdGFydE9mKCd3ZWVrJykudmFsdWVPZigpO1xyXG4gICAgbmV3UGVyc2lzdGVkLnNhdmUoKTtcclxuICAgIHRoaXMucGVyc2lzdGVkU3RhdGUgPSBuZXdQZXJzaXN0ZWQ7XHJcbiAgICBhd2FpdCB0aGlzLm1lbS5yZWZyZXNoRnJvbVNlcnZlcigpO1xyXG4gIH1cclxuXHJcbiAgc3Vic2NyaWJlKHN1YnNjcmliZXI6ICh1c2VyVGFza3M6IFVzZXJUYXNrW10sIHBlcnNpc3RlZFN0YXRlOiBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlLCB3ZWVrVGV4dHNVVDogVXNlclRhc2spID0+IHZvaWQpIHtcclxuICAgIGNvbnN0IHByb3h5U3Vic2NyaWJlciA9ICh1c2VyVGFza3M6IFVzZXJUYXNrW10pID0+IHtcclxuICAgICAgc3Vic2NyaWJlcihcclxuICAgICAgICB1c2VyVGFza3MuZmlsdGVyKHV0ID0+ICF1dC53ZWVrVGV4dHMpLFxyXG4gICAgICAgIHRoaXMucGVyc2lzdGVkU3RhdGUsXHJcbiAgICAgICAgdXNlclRhc2tzLmZpbHRlcih1dCA9PiAhIXV0LndlZWtUZXh0cylbMF0gfHwge1xyXG4gICAgICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcclxuICAgICAgICAgIGRhdGVUaW1lOiB0aGlzLnBlcnNpc3RlZFN0YXRlLndlZWtEYXRlLFxyXG4gICAgICAgICAgd2Vla1RleHRzOiB7YXNzZXNzbWVudDonJywgc3RyYXRlZ3k6Jyd9LFxyXG4gICAgICAgICAgYWNsOiBbXHJcbiAgICAgICAgICAgIC8vIERlZmF1bHQgQUNMOiBMZXQgdXNlciBzZWxmIGhhdmUgZnVsbCBjb250cm9sIG92ZXIgdGhpcyBpdGVtOlxyXG4gICAgICAgICAgICBuZXcgRG9jdW1lbnRBY2Nlc3MoXCJlbWFpbFwiLCB0aGlzLmdldEN1cnJlbnRVc2VyKCkubWFpbCwgXCJTXCIpLFxyXG4gICAgICAgICAgICAvLyBBZGRpdGlvbmFsIEFDTDogTGV0IGVtcGxveWVlcyBvbiBzYW1lIHNjaG9vbCBoYXZlIHJlYWQgYWNjZXNzIHRvIGl0LlxyXG4gICAgICAgICAgICAvLyBUaGlzIGN1cnJlbnRseSBvbmx5IGFwcGxpZXMgdG8gdGFza3MgdGhhdCByZWZlciB0byBjb3Vyc2UgdGFza3MgKG5vdCBvd24gdGFza3MhKVxyXG4gICAgICAgICAgICBuZXcgRG9jdW1lbnRBY2Nlc3MoXCJzY2hvb2xSb2xlXCIsIGAke3RoaXMuZ2V0Q3VycmVudFVzZXIoKS5zY2hvb2x9L0VNUExPWUVFYCwgXCJSXCIpXHJcbiAgICAgICAgICBdLm1hcChhYyA9PiBhYy50b1N0cmluZygpKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHByb3h5U3Vic2NyaWJlcltcInN1YnNjcmliZXJcIl0gPSBzdWJzY3JpYmVyO1xyXG4gICAgdGhpcy5tZW0uc3Vic2NyaWJlKHByb3h5U3Vic2NyaWJlcik7XHJcbiAgfVxyXG5cclxuICB1bnN1YnNjcmliZShzdWJzY3JpYmVyOiAodXNlclRhc2tzOiBVc2VyVGFza1tdLCBwZXJzaXN0ZWRTdGF0ZTogV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZSwgd2Vla1RleHRzVVQ6IFVzZXJUYXNrKSA9PiB2b2lkKSB7XHJcbiAgICB0aGlzLm1lbS5zdWJzY3JpYmVycyA9IHRoaXMubWVtLnN1YnNjcmliZXJzLmZpbHRlciAocyA9PiBzW1wic3Vic2NyaWJlclwiXSAhPT0gc3Vic2NyaWJlcik7XHJcbiAgfVxyXG4gIFxyXG59XHJcblxyXG5pZiAoIXVzZXJUYXNrc1JlcG8pIHtcclxuICB1c2VyVGFza3NSZXBvID0gZW52LnVzZXJUYXNrc1JlcG8gPSBuZXcgVXNlclRhc2tzUmVwbyhcclxuICAgICgpPT5lbnYua2VkQmFja2VuZENsaWVudCxcclxuICAgICgpPT5lbnYuY3VycmVudFVzZXIpO1xyXG4gIHVzZXJUYXNrc1JlcG8ubWVtLmVuc3VyZUhhc0RhdGEoKTtcclxufVxyXG4iLCJpbXBvcnQgeyBLZWRSZXBvIH0gZnJvbSAnLi9rZWQtcmVwbyc7XHJcbmltcG9ydCB7IFdlZWtOb3RlIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuaW1wb3J0IHsgY3JlYXRlVVVJRCwgRG9jdW1lbnRBY2Nlc3MgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IGdldEFkanVzdGVkV2VlaywgS0VEV2VlayB9IGZyb20gJy4uL3V0aWxzL3dlZWt1dGlsJztcclxuXHJcbmV4cG9ydCBsZXQgd2Vla05vdGVzUmVwbyA9IGVudi53ZWVrTm90ZXNSZXBvIGFzIFdlZWtOb3Rlc1JlcG87XHJcblxyXG5leHBvcnQgY2xhc3MgV2Vla05vdGVzUmVwbyBleHRlbmRzIEtlZFJlcG88V2Vla05vdGU+IHtcclxuICAvKnByaXZhdGUgY3VycmVudFdlZWs6IG1vbWVudC5Nb21lbnQ7XHJcblxyXG4gIGdldEN1cnJlbnRXZWVrKCkge1xyXG4gICAgaWYgKCF0aGlzLmN1cnJlbnRXZWVrKSB7XHJcbiAgICAgIGNvbnN0IHt3ZWVrTWlsbGlzLCBleHBpcmV9ID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFwid2Vlay1ub3Rlcy13ZWVrXCIpIHx8IFwie31cIikgYXMge3dlZWtNaWxsaXM/OiBudW1iZXIsIGV4cGlyZT86IG51bWJlcn07XHJcbiAgICAgIHRoaXMuY3VycmVudFdlZWsgPSB3ZWVrTWlsbGlzICYmIGV4cGlyZSAmJiBleHBpcmUgPiBEYXRlLm5vdygpID9cclxuICAgICAgICBtb21lbnQobmV3IERhdGUod2Vla01pbGxpcykpIDpcclxuICAgICAgICBtb21lbnQoKS5zdGFydE9mKCd3ZWVrJykuYWRkKDEsICdkYXlzJyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50V2Vlay5jbG9uZSgpO1xyXG4gIH1cclxuXHJcbiAgc2V0Q3VycmVudFdlZWsobmV3V2Vla01vbWVudDogbW9tZW50Lk1vbWVudCkge1xyXG4gICAgdGhpcy5jdXJyZW50V2VlayA9IG5ld1dlZWtNb21lbnQ7XHJcbiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwid2Vlay1ub3Rlcy13ZWVrXCIsIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgd2Vla01pbGxpczogbmV3V2Vla01vbWVudC50b0RhdGUoKS5nZXRUaW1lKCksXHJcbiAgICAgIGV4cGlyZTogbW9tZW50KCkuYWRkKDgsIFwiaG91cnNcIikudG9EYXRlKCkuZ2V0VGltZSgpXHJcbiAgICB9KSlcclxuICB9Ki9cclxuICBcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHN1cGVyKHtcclxuICAgICAgZ2V0Q2xpZW50KCkgeyByZXR1cm4gZW52LmtlZEJhY2tlbmRDbGllbnQ7IH0sXHJcbiAgICAgIG9wdGltaXN0aWM6IGZhbHNlLFxyXG4gICAgICB0YWJsZTogXCJub3Rlc1wiLCAvLyBcIndlZWstbm90ZXNcIlxyXG4gICAgICB1c2VyOiBlbnYuY3VycmVudFVzZXIgPyBlbnYuY3VycmVudFVzZXIubWFpbCA6IFwiXCIsXHJcbiAgICAgIGdldFF1ZXJ5T3B0aW9uczogYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIC8vY29uc3QgdXNlckVtYWlsID0gZW52LmN1cnJlbnRVc2VyID8gZW52LmN1cnJlbnRVc2VyLm1haWwgOiBcIlwiO1xyXG4gICAgICAgIC8vY29uc3QgY3VycmVudFdlZWsgPSB0aGlzLmdldEN1cnJlbnRXZWVrKCk7XHJcbiAgICAgICAgLy9jb25zdCB3ZWVrTnVtYmVyID0gY3VycmVudFdlZWsud2VlaygpO1xyXG4gICAgICAgIC8vY29uc3Qga2VkV2VlayA9IEtFRFdlZWsoY3VycmVudFdlZWsueWVhcigpLCB3ZWVrTnVtYmVyKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgLy9mcm9tOiBrZWRXZWVrLm5vdEJlZm9yZSxcclxuICAgICAgICAgIC8vdG86IGtlZFdlZWsubm90QWZ0ZXIsXHJcbiAgICAgICAgICByb2xlOiBcIlVTRVJcIlxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgLy90aGlzLmN1cnJlbnRXZWVrID0gbnVsbDtcclxuICB9XHJcblxyXG4gIC8qYXN5bmMgY2hhbmdlV2Vlayh3ZWVrc1RvQWRkOiBudW1iZXIpIHtcclxuICAgIHRoaXMuc2V0Q3VycmVudFdlZWsodGhpcy5nZXRDdXJyZW50V2VlaygpLmFkZCh3ZWVrc1RvQWRkLCBcIndlZWtzXCIpKTtcclxuICAgIGF3YWl0IHRoaXMubWVtLnJlZnJlc2hGcm9tU2VydmVyKCk7XHJcbiAgfSovXHJcbn1cclxuXHJcbmlmICghd2Vla05vdGVzUmVwbykge1xyXG4gIHdlZWtOb3Rlc1JlcG8gPSBlbnYud2Vla05vdGVzUmVwbyA9IG5ldyBXZWVrTm90ZXNSZXBvKCk7XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IENhbGVuZGFyIH0gZnJvbSAnLi4vY29tcG9uZW50cy9jYWxlbmRhcic7XHJcbmltcG9ydCB7IEtTR29hbHMgfSBmcm9tICcuLi9jb21wb25lbnRzL2tzLWdvYWxzL2dvYWxzJztcclxuaW1wb3J0IHsgTGF0ZXN0QXNzZXNzbWVudHMgfSBmcm9tICcuLi9jb21wb25lbnRzL2xhdGVzdC1hc3Nlc3NtZW50cy9sYXRlc3QtYXNzZXNzbWVudHMnO1xyXG5pbXBvcnQgeyBLR1Rlcm1QbGFubmVyU2VsZiBhcyBLR1Rlcm1QbGFubmVyIH0gZnJvbSAnLi4vY29tcG9uZW50cy9rZy10ZXJtcGxhbm5lci9rZy10ZXJtcGxhbm5lci1zZWxmJztcclxuaW1wb3J0IHsgS0dUZXJtUGxhbm5lclR1dG9yZWQgfSBmcm9tICcuLi9jb21wb25lbnRzL2tnLXRlcm1wbGFubmVyL2tnLXRlcm1wbGFubmVyLXR1dG9yZWQnO1xyXG5pbXBvcnQgeyBLU1Rlcm1QbGFubmVyfSBmcm9tICcuLi9jb21wb25lbnRzL2tzLXRlcm1wbGFubmVyL3Rlcm1wbGFubmVyJztcclxuaW1wb3J0IHsgS1NUZXJtUGxhbm5lclR1dG9yZWQgfSBmcm9tICcuLi9jb21wb25lbnRzL2tzLXRlcm1wbGFubmVyL2tzLXRlcm1wbGFubmVyLXR1dG9yZWQnO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IFdlZWtQbGFubmVyIH0gZnJvbSAnLi4vY29tcG9uZW50cy93ZWVrcGxhbm5lci93ZWVrcGxhbm5lcic7XHJcbmltcG9ydCB7IFdlZWtQbGFubmVyVHV0b3JlZCB9IGZyb20gJy4uL2NvbXBvbmVudHMvd2Vla3BsYW5uZXIvd2Vla3BsYW5uZXItdHV0b3JlZCc7XHJcbmltcG9ydCB7IExlYXJuaW5nVGFza3MgfSBmcm9tICcuLi9jb21wb25lbnRzL2xlYXJuaW5nLXRhc2tzJztcclxuaW1wb3J0IHsgTXlDb3Vyc2VzIH0gZnJvbSAnLi4vY29tcG9uZW50cy9teS1jb3Vyc2VzL215LWNvdXJzZXMnO1xyXG5pbXBvcnQgeyBMaXN0Q291cnNlcyB9IGZyb20gJy4uL2NvbXBvbmVudHMvbGlzdC1jb3Vyc2VzL2xpc3QtY291cnNlcyc7XHJcbmltcG9ydCB7IFdlZWtOb3RlYm9vayB9IGZyb20gJy4uL2NvbXBvbmVudHMvd2Vlay1ub3RlYm9vayc7XHJcbmltcG9ydCB7IFR1dG9yc1NlbGVjdCB9IGZyb20gJy4uL2NvbXBvbmVudHMvdHV0b3JzLXNlbGVjdC90dXRvcnMtc2VsZWN0JztcclxuaW1wb3J0IHsgVHV0b3JzVmlld1Rlc3R9IGZyb20gJy4uL2NvbXBvbmVudHMvdHV0b3JzLXZpZXcnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbXBvbmVudHMgPSB7XHJcbiAgTGF0ZXN0QXNzZXNzbWVudHM6IHtcclxuICAgIGNvbXBvbmVudDogTGF0ZXN0QXNzZXNzbWVudHMsXHJcbiAgICBwcm9wczogKCkgPT4gKHtcclxuICAgICAgbG9jYWxlOiBuYXZpZ2F0b3IubGFuZ3VhZ2UsXHJcbiAgICAgIGxpbWl0OiAxNVxyXG4gICAgfSlcclxuICB9LFxyXG4gIEtTR29hbHM6IHtcclxuICAgIGNvbXBvbmVudDogS1NHb2FscyxcclxuICAgIHByb3BzOiAoKSA9PiAoe30pXHJcbiAgfSxcclxuICBLU1Rlcm1QbGFubmVyOiB7XHJcbiAgICBjb21wb25lbnQ6IEtTVGVybVBsYW5uZXIsXHJcbiAgICBwcm9wczogKCkgPT4gKHtcclxuICAgICAgZW52OiBlbnYsXHJcbiAgICAgIHR1dG9yZWQ6IGZhbHNlLFxyXG4gICAgICBpbml0aWFsRGF0ZTpuZXcgRGF0ZSgpLFxyXG4gICAgfSlcclxuICB9LFxyXG4gIEtTVGVybVBsYW5uZXJUdXRvcmVkOiB7XHJcbiAgICBjb21wb25lbnQ6IEtTVGVybVBsYW5uZXJUdXRvcmVkLFxyXG4gICAgcHJvcHM6ICgpID0+ICh7fSlcclxuICB9LFxyXG4gIEtHVGVybVBsYW5uZXI6IHtcclxuICAgIGNvbXBvbmVudDogS0dUZXJtUGxhbm5lcixcclxuICAgIHByb3BzOiAoKSA9PiAoe30pXHJcbiAgfSxcclxuICBLR1Rlcm1QbGFubmVyVHV0b3JlZDoge1xyXG4gICAgY29tcG9uZW50OiBLR1Rlcm1QbGFubmVyVHV0b3JlZCxcclxuICAgIHByb3BzOiAoKSA9PiAoe30pXHJcbiAgfSxcclxuICBXZWVrUGxhbm5lcjoge1xyXG4gICAgY29tcG9uZW50OiBXZWVrUGxhbm5lcixcclxuICAgIHByb3BzOiAoKSA9PiAoe1xyXG4gICAgICB2aWV3Q291cnNlVXJsOiAnaHR0cDovL3N2dC5zZScsXHJcbiAgICAgIGVudjogZW52XHJcbiAgICB9KVxyXG4gIH0sXHJcbiAgVHV0b3JzVmlldzoge1xyXG4gICAgY29tcG9uZW50OiBUdXRvcnNWaWV3VGVzdCxcclxuICAgIHByb3BzOiAoKT0+KHt9KVxyXG4gIH0sXHJcbiAgVHV0b3JzU2VsZWN0OiB7XHJcbiAgICBjb21wb25lbnQ6IFR1dG9yc1NlbGVjdCxcclxuICAgIHByb3BzOiAoKSA9PiAoe30pXHJcbiAgfSxcclxuICBDYWxlbmRhcjoge1xyXG4gICAgY29tcG9uZW50OiBDYWxlbmRhcixcclxuICAgIHByb3BzOiAoKSA9PiAoe1xyXG4gICAgICBmaXJzdERheTogbW9tZW50KCkuc3RhcnRPZignd2VlaycpLndlZWtkYXkoMSksXHJcbiAgICAgIG51bURheXM6IDUsXHJcbiAgICAgIGluaXRpYWxTdGFydEhvdXI6IDcsXHJcbiAgICAgIGluaXRpYWxFbmRIb3VyOiAxOCxcclxuICAgICAgaW5pdGlhbFpvb206IDAuNzVcclxuICAgIH0pXHJcbiAgfSxcclxuICAvKkNvdXJzZU92ZXJ2aWV3OiB7XHJcbiAgICBjb21wb25lbnQ6IENvdXJzZU92ZXJ2aWV3LFxyXG4gICAgcHJvcHM6ICgpPT4oe1xyXG4gICAgICBsb2NhbGU6IG5hdmlnYXRvci5sYW5ndWFnZSxcclxuICAgIH0pXHJcbiAgfSwqL1xyXG4gIExlYXJuaW5nVGFza3M6IHtcclxuICAgIGNvbXBvbmVudDogTGVhcm5pbmdUYXNrcyxcclxuICAgIHByb3BzOiAoKSA9PiAoe1xyXG4gICAgICBhcGlQYXRoOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2VsZWN0ZWRMZWFybmluZ01vZHVsZVVybCcpLFxyXG4gICAgICBwYWdlSWQ6IFwiZHVtbXlcIlxyXG4gICAgfSlcclxuICB9LFxyXG4gIE15Q291cnNlczoge1xyXG4gICAgY29tcG9uZW50OiBNeUNvdXJzZXMsXHJcbiAgICBwcm9wczogKCk9PiAoe1xyXG4gICAgICB2aWV3Q291cnNlVXJsOiAnaHR0cHM6Ly9rZy10ZXN0LnNpdGV2aXNpb24uc2UvY291cnNldmlld2VyJ1xyXG4gICAgfSlcclxuICB9LFxyXG4gIExpc3RDb3Vyc2VzOiB7XHJcbiAgICBjb21wb25lbnQ6IExpc3RDb3Vyc2VzLFxyXG4gICAgcHJvcHM6ICgpID0+ICh7XHJcbiAgICAgIHZpZXdDb3Vyc2VVcmw6ICdodHRwczovL2tnLXRlc3Quc2l0ZXZpc2lvbi5zZS9jb3Vyc2V2aWV3ZXInXHJcbiAgICB9KVxyXG4gIH0sXHJcbiAgV2Vla05vdGVzOiB7XHJcbiAgICBjb21wb25lbnQ6IFdlZWtOb3RlYm9vayxcclxuICAgIHByb3BzOiAoKSA9PiAoe30pXHJcbiAgfVxyXG59O1xyXG4iLCJpbXBvcnQgeyBMZWFybmluZ01vZHVsZVRhc2tzIH0gZnJvbSAnLi4vLi4vY29udHJhY3RzL2tlZC1tb2RlbHMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGxlYXJuaW5nTW9kdWxlczogTGVhcm5pbmdNb2R1bGVUYXNrc1tdID0gW3tcclxuICAgIG1vZHVsZU5hbWU6IFwiU3RlZyAyMlwiLFxyXG4gICAgc3ViamVjdDoge1xyXG4gICAgICAgIG5hbWU6IFwiU3BhbnNrYVwiLFxyXG4gICAgICAgIGNvdXJzZToge1xyXG4gICAgICAgICAgICBuYW1lOiBcIlNwYW5za2FcIixcclxuICAgICAgICAgICAgdXJsOiBcIi9zdGVnL3NwYW5za2EuNC40YWU0ZTlkMjE1OWVmNGUwMTIwYWQ2ZDMuaHRtbFwiXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGNvbW1vblRhc2tzOiBbXSxcclxuICAgIGxlYXJuaW5nR29hbHM6IFt7XHJcbiAgICAgICAgbmFtZTogXCJBa3Rpdml0ZXRlciBpIGhlbW1ldFwiLFxyXG4gICAgICAgIHRhc2tzOiBbe1xyXG4gICAgICAgICAgICBuYW1lOiBcIkFrdGl2aXRldGVyIGkgaGVtbWV0IGhvcyBlbiBwZXJ1YW5zayBmYW1pbGpcIixcclxuICAgICAgICAgICAgdXJsOiBcIi9zdGVnL3NwYW5za2EvYmxvY2s1L3N0ZWcyMi91cHBnaWZ0ZXIvYWt0aXZpdGV0ZXJpaGVtbWV0L2FrdGl2aXRldGVyaWhlbW1ldGhvc2VucGVydWFuc2tmYW1pbGouNC40YWU0ZTlkMjE1OWVmNGUwMTIwYWRiNDAuaHRtbFwiXHJcbiAgICAgICAgfSwge1xyXG4gICAgICAgICAgICBuYW1lOiBcIlVwcGdpZnQgdGlsbCBha3Rpdml0ZXRlciBpIGhlbW1ldFwiLFxyXG4gICAgICAgICAgICB1cmw6IFwiL3N0ZWcvc3BhbnNrYS9ibG9jazUvc3RlZzIyL3VwcGdpZnRlci9ha3Rpdml0ZXRlcmloZW1tZXQvdXBwZ2lmdHRpbGxha3Rpdml0ZXRlcmloZW1tZXQuNC40YWU0ZTlkMjE1OWVmNGUwMTIwYWY4ODcuaHRtbFwiXHJcbiAgICAgICAgfV1cclxuICAgIH0sIHtcclxuICAgICAgICBuYW1lOiBcIkZhbWlsamVsaXZcIixcclxuICAgICAgICB0YXNrczogW3tcclxuICAgICAgICAgICAgbmFtZTogXCJWYWQgcMOlZ8OlciBpIGRpbiBmYW1pbGogbnU/XCIsXHJcbiAgICAgICAgICAgIHVybDogXCIvc3RlZy9zcGFuc2thL2Jsb2NrNS9zdGVnMjIvdXBwZ2lmdGVyL2ZhbWlsamVsaXYvdmFkcGFnYXJpZGluZmFtaWxqbnUuNC40YWU0ZTlkMjE1OWVmNGUwMTIwYjI1ZTkuaHRtbFwiXHJcbiAgICAgICAgfSwge1xyXG4gICAgICAgICAgICBuYW1lOiBcIlVwcGdpZnQgZmFtaWxqZWxpdlwiLFxyXG4gICAgICAgICAgICB1cmw6IFwiL3N0ZWcvc3BhbnNrYS9ibG9jazUvc3RlZzIyL3VwcGdpZnRlci9mYW1pbGplbGl2L3VwcGdpZnRmYW1pbGplbGl2LjQuNGFlNGU5ZDIxNTllZjRlMDEyMGFmNzNhLmh0bWxcIlxyXG4gICAgICAgIH1dXHJcbiAgICB9LCB7XHJcbiAgICAgICAgbmFtZTogXCJTYW10YWwgb20gZmFtaWxqZWxpdlwiLFxyXG4gICAgICAgIHRhc2tzOiBbe1xyXG4gICAgICAgICAgICBuYW1lOiBcIlNhbXRhbHNkb2t1bWVudCBmYW1pbGplbGl2XCIsXHJcbiAgICAgICAgICAgIHVybDogXCIvc3RlZy9zcGFuc2thL2Jsb2NrNS9zdGVnMjIvdXBwZ2lmdGVyL3NhbXRhbG9tZmFtaWxqZWxpdi9zYW10YWxzZG9rdW1lbnRmYW1pbGplbGl2LjQuNGFlNGU5ZDIxNTllZjRlMDEyMDlmZTAzLmh0bWxcIlxyXG4gICAgICAgIH0sIHtcclxuICAgICAgICAgICAgbmFtZTogXCJTYW10YWxza2FydGEtZmFtaWxqZWxpdlwiLFxyXG4gICAgICAgICAgICB1cmw6IFwiL3N0ZWcvc3BhbnNrYS9ibG9jazUvc3RlZzIyL3VwcGdpZnRlci9zYW10YWxvbWZhbWlsamVsaXYvc2FtdGFsc2thcnRhZmFtaWxqZWxpdi40LjRhZTRlOWQyMTU5ZWY0ZTAxMjBhZjZmZC5odG1sXCJcclxuICAgICAgICB9XVxyXG4gICAgfVxyXG4gICAgXVxyXG59LCB7XHJcbiAgICBtb2R1bGVOYW1lOiBcIlRla25pa1wiLFxyXG4gICAgc3ViamVjdDoge1xyXG4gICAgICAgIG5hbWU6IFwiVGVrbmlrXCIsXHJcbiAgICAgICAgY291cnNlOiB7XHJcbiAgICAgICAgICAgIG5hbWU6IFwiVHLDpWQgNVwiLFxyXG4gICAgICAgICAgICB1cmw6IFwiL2t1cnNlci9hcnNrdXJzOC90cmFkNS4xOS4yZDRmNDAwNTE1OWY4OTU0NzdhMTVjYy5odG1sXCJcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgY29tbW9uVGFza3M6IFt7XHJcbiAgICAgICAgbmFtZTogXCJUcnljayBcIixcclxuICAgICAgICB1cmw6IFwiL2t1cnNlci9hcnNrdXJzOC90cmFkNS9mb3JiZXJlZGVsc2UvdGVrbmlrL3VwcGdpZnRlci90cnljay40LjRhZTRlOWQyMTU5ZWY0ZTAxMjA5ZGNkZS5odG1sXCJcclxuICAgIH0sIHtcclxuICAgICAgICBuYW1lOiBcIkRpc2t1c3Npb25zZnLDpWdvciB0aWxsIGluZHVzdHJpZWxsYSByZXZvbHV0aW9uZW5cIixcclxuICAgICAgICB1cmw6IFwiL2t1cnNlci9hcnNrdXJzOC90cmFkNS9mb3JiZXJlZGVsc2UvdGVrbmlrL3VwcGdpZnRlci9kaXNrdXNzaW9uc2ZyYWdvcnRpbGxpbmR1c3RyaWVsbGFyZXZvbHV0aW9uZW4uNC40YWU0ZTlkMjE1OWVmNGUwMTIwYTZmYWIuaHRtbFwiXHJcbiAgICB9LCB7XHJcbiAgICAgICAgbmFtZTogXCJIdXIgZnVuZ2VyYXIgZW4gw6VuZ21hc2tpblwiLFxyXG4gICAgICAgIHVybDogXCIva3Vyc2VyL2Fyc2t1cnM4L3RyYWQ1L2ZvcmJlcmVkZWxzZS90ZWtuaWsvdXBwZ2lmdGVyL2h1cmZ1bmdlcmFyZW5hbmdtYXNraW4uNC40YWU0ZTlkMjE1OWVmNGUwMTIwYTEzMDkuaHRtbFwiXHJcbiAgICB9LCB7XHJcbiAgICAgICAgbmFtZTogXCLDhW5nbWFza2luZW5zIGJldHlkZWxzZVwiLFxyXG4gICAgICAgIHVybDogXCIva3Vyc2VyL2Fyc2t1cnM4L3RyYWQ1L2ZvcmJlcmVkZWxzZS90ZWtuaWsvdXBwZ2lmdGVyL2FuZ21hc2tpbmVuc2JldHlkZWxzZS40LjRhZTRlOWQyMTU5ZWY0ZTAxMjBhM2RlYi5odG1sXCJcclxuICAgIH1dLFxyXG4gICAgbGVhcm5pbmdHb2FsczogW3tcclxuICAgICAgICBuYW1lOiBcIklkZW50aWZpZXJhIG9jaCBhbmFseXNlcmEgw6VuZ21hc2tpbmVuIHV0aWZyw6VuIMOkbmRhbcOlbHNlbmxpZ2hldCBvY2ggZnVua3Rpb24sXCJcclxuICAgIH0sIHtcclxuICAgICAgICBuYW1lOiBcImFudsOkbmRhIHRla25pa29tcsOlZGV0cyBiZWdyZXBwIG9jaCB1dHRyeWNrc2Zvcm1cIlxyXG4gICAgfSwge1xyXG4gICAgICAgIG5hbWU6IFwidsOkcmRlcmEga29uc2VrdmVuc2VyIGF2IMOlbmdtYXNraW5lbiBmw7ZyIGluZGl2aWQsIHNhbWjDpGxsZSBvY2ggbWlsasO2LCBvY2hcIlxyXG4gICAgfSwge1xyXG4gICAgICAgIG5hbWU6IFwiYW5hbHlzZXJhIGRyaXZrcmFmdGVyIGJha29tIHRla25pa3V0dmVja2xpbmcgcnVudCDDpW5nbWFza2luZW4gb2NoIGh1ciB0ZWtuaWtlbiBoYXIgZsO2csOkbmRyYXRzw7Z2ZXIgdGlkLlwiXHJcbiAgICB9XVxyXG59XVxyXG5cclxuIiwiZXhwb3J0IGNvbnN0IGxlYXJuaW5nUGFnZVVybHMgPSBbXHJcbiAgXCJ0ZXN0ZGF0YS9sZWFybmluZy10YXNrcy9hbW5lc2ludGVncmVyYWQuanNvblwiLFxyXG4gIFwidGVzdGRhdGEvbGVhcm5pbmctdGFza3MvbG9vcGFkLmpzb25cIixcclxuICBcInRlc3RkYXRhL2xlYXJuaW5nLXRhc2tzL3N0ZWctbGFyYW5kZW1hbC5qc29uXCIsXHJcbiAgXCJ0ZXN0ZGF0YS9sZWFybmluZy10YXNrcy9zdGVnLW1hdHRlLmpzb25cIixcclxuICBcInRlc3RkYXRhL2xlYXJuaW5nLXRhc2tzL3ZhbmxpZy1rdXJzLmpzb25cIlxyXG5dO1xyXG4iLCJpbXBvcnQge1VzZXJ9IGZyb20gJy4uLy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcclxuXHJcbmV4cG9ydCBjb25zdCB1c2VycyA6IFVzZXJbXSA9IFt7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJBZG1pbmlzdHJhdMO2clwiLFxyXG4gICAgbWFpbDogXCJ2ZW1lbmRvQGtlZHNjaG9vbHMuY29tXCIsXHJcbiAgICByb2xlczogWydBRE1JTicsJ0VNUExPWUVFJ10sXHJcbiAgICBzY2hvb2w6ICdLRUQnLFxyXG4gICAgdXNlcm5hbWU6IFwiYWRtaW5cIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcIkRhdmlkXCIsXHJcbiAgICBtYWlsOiBcImRhdmlkLmZhaGxhbmRlckB2ZW1lbmRvLnNlXCIsXHJcbiAgICByb2xlczogWydBRE1JTicsJ0VNUExPWUVFJ10sXHJcbiAgICBzY2hvb2w6ICdLRUQnLFxyXG4gICAgdXNlcm5hbWU6IFwiZGF2aWRcIlxyXG59LFxyXG57XHJcbiAgICBkaXNwbGF5TmFtZTogXCJBbmRyZWlcIixcclxuICAgIG1haWw6IFwiYW5kcmVpLnNwYXRhcmVsdUB2ZW1lbmRvLnNlXCIsXHJcbiAgICByb2xlczogWydBRE1JTicsJ0VNUExPWUVFJywnU1RVREVOVCddLFxyXG4gICAgc2Nob29sOiAnS0VEJyxcclxuICAgIHVzZXJuYW1lOiBcImFuZHJlaVwiXHJcbn0se1xyXG4gICAgZGlzcGxheU5hbWU6IFwiQ2FybCBIb2xtYmVyZ1wiLFxyXG4gICAgbWFpbDogXCJjYXJsLmhvbG1iZXJnQGt1bnNrYXBzZ3ltbmFzaWV0LnNlXCIsXHJcbiAgICByb2xlczogWydBRE1JTicsJ0VNUExPWUVFJ10sXHJcbiAgICBzY2hvb2w6ICdOb3Jya8O2cGluZycsXHJcbiAgICB1c2VybmFtZTogXCJjYXJsLmhvbG1iZXJnQGt1bnNrYXBzZ3ltbmFzaWV0LnNlXCJcclxufSx7IFxyXG4gICAgZGlzcGxheU5hbWU6IFwiQ2FybFwiLFxyXG4gICAgbWFpbDogXCJjYXJsQGtlZHNjaG9vbHMuY29tXCIsXHJcbiAgICByb2xlczogWydBRE1JTicsJ0VNUExPWUVFJywnU1RVREVOVCddLFxyXG4gICAgc2Nob29sOiAnS0VEJyxcclxuICAgIHVzZXJuYW1lOiBcImNhcmxcIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcImRhdmlkLmZhaGxhbmRlckBrZWRzY2hvb2xzLmNvbVwiLFxyXG4gICAgbWFpbDogXCJkYXZpZC5mYWhsYW5kZXJAa2Vkc2Nob29scy5jb21cIixcclxuICAgIHJvbGVzOiBbXCJBRE1JTlwiLCBcIkVNUExPWUVFXCIsIFwiU1RVREVOVFwiXSxcclxuICAgIHNjaG9vbDogXCJLRURcIixcclxuICAgIHVzZXJuYW1lOiBcImRhdmlkLmZhaGxhbmRlckBrZWRzY2hvb2xzLmNvbVwiXHJcbn0se1xyXG4gICAgZGlzcGxheU5hbWU6IFwiVGVhY2hlciAxXCIsXHJcbiAgICBtYWlsOiBcInRlYWNoZXIxLmNsYXNzcm9vbUBrZWRzY2hvb2xzLmNvbVwiLFxyXG4gICAgcm9sZXM6IFsnRU1QTE9ZRUUnXSxcclxuICAgIHNjaG9vbDogJ0tFRCcsXHJcbiAgICB1c2VybmFtZTogXCJ0ZWFjaGVyMS5jbGFzc3Jvb21Aa2Vkc2Nob29scy5jb21cIlxyXG59LHsgXHJcbiAgICBkaXNwbGF5TmFtZTogXCJUZXN0LUxpdmUtRWxldjFcIixcclxuICAgIG1haWw6IFwidWJ3Njc1N0BlZHUua3Vuc2thcHNneW1uYXNpZXQuc2VcIixcclxuICAgIHJvbGVzOiBbJ1NUVURFTlQnXSxcclxuICAgIHNjaG9vbDogJ1VwcHNhbGEnLFxyXG4gICAgdXNlcm5hbWU6IFwidWJ3Njc1N0BlZHUua3Vuc2thcHNneW1uYXNpZXQuc2VcIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcIlRlc3QtTGl2ZS1FbGV2MlwiLFxyXG4gICAgbWFpbDogXCJ1bXM0MzAyQGVkdS5rdW5za2Fwc2d5bW5hc2lldC5zZVwiLFxyXG4gICAgcm9sZXM6IFsnU1RVREVOVCddLFxyXG4gICAgc2Nob29sOiAnVXBwc2FsYScsXHJcbiAgICB1c2VybmFtZTogXCJ1bXM0MzAyQGVkdS5rdW5za2Fwc2d5bW5hc2lldC5zZVwiXHJcbn0se1xyXG4gICAgZGlzcGxheU5hbWU6IFwiVGVzdC1MaXZlLUVsZXYzXCIsXHJcbiAgICBtYWlsOiBcInVoaDM0NjBAZWR1Lmt1bnNrYXBzZ3ltbmFzaWV0LnNlXCIsXHJcbiAgICByb2xlczogWydTVFVERU5UJ10sXHJcbiAgICBzY2hvb2w6ICdVcHBzYWxhJyxcclxuICAgIHVzZXJuYW1lOiBcInVoaDM0NjBAZWR1Lmt1bnNrYXBzZ3ltbmFzaWV0LnNlXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJUZXN0LUxpdmUtRWxldjQoZmVsIGdvYWxzIGlzc3VlKVwiLFxyXG4gICAgbWFpbDogXCJ1bXQ2ODI2QGVkdS5rdW5za2Fwc3Nrb2xhbi5zZVwiLFxyXG4gICAgcm9sZXM6IFtcIlNUVURFTlRcIl0sXHJcbiAgICBzY2hvb2w6IFwiVXBwc2FsYVwiLFxyXG4gICAgdXNlcm5hbWU6IFwidW10NjgyNkBlZHUua3Vuc2thcHNza29sYW4uc2VcIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcIlRlc3QtTGl2ZS1FbGV2NShmdXR1cmUgYWJpbGl0aWVzKVwiLFxyXG4gICAgbWFpbDogXCJ1amczODMzQGVkdS5rdW5za2Fwc3Nrb2xhbi5zZVwiLFxyXG4gICAgcm9sZXM6IFtcIlNUVURFTlRcIl0sXHJcbiAgICBzY2hvb2w6IFwiVXBwc2FsYVwiLFxyXG4gICAgdXNlcm5hbWU6IFwidWpnMzgzM0BlZHUua3Vuc2thcHNza29sYW4uc2VcIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcIlRlc3QtTGl2ZS1FbGV2NihmdXR1cmUgYWJpbGl0aWVzKVwiLFxyXG4gICAgbWFpbDogXCJ1anQxMzYzQGVkdS5rdW5za2Fwc3Nrb2xhbi5zZVwiLFxyXG4gICAgcm9sZXM6IFtcIlNUVURFTlRcIl0sXHJcbiAgICBzY2hvb2w6IFwiVXBwc2FsYVwiLFxyXG4gICAgdXNlcm5hbWU6IFwidWp0MTM2M0BlZHUua3Vuc2thcHNza29sYW4uc2VcIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcIlRlc3QtTGl2ZS1Mw6RyYXJlMVwiLFxyXG4gICAgbWFpbDogXCJyaWNrYXJkLmFsYmVydHNzb25Aa3Vuc2thcHNneW1uYXNpZXQuc2VcIixcclxuICAgIHJvbGVzOiBbJ0VNUExPWUVFJ10sXHJcbiAgICBzY2hvb2w6ICdVcHBzYWxhJyxcclxuICAgIHVzZXJuYW1lOiBcInJpY2thcmQuYWxiZXJ0c3NvbkBrdW5za2Fwc2d5bW5hc2lldC5zZVwiXHJcbn0se1xyXG4gICAgZGlzcGxheU5hbWU6IFwiRURTVGVzdFVzZXJHeW1uYXNpdW1cIixcclxuICAgIG1haWw6IFwidWhoMzIwMEBlZHUua3Vuc2thcHNneW1uYXNpZXQuc2VcIixcclxuICAgIC8vbWFpbDogXCJVSEgzMjAwQEVEVS5LVU5TS0FQU0dZTU5BU0lFVC5TRVwiLFxyXG4gICAgcm9sZXM6IFtcIlNUVURFTlRcIl0sXHJcbiAgICB1c2VybmFtZTogXCJFRFNUZXN0VXNlcjFcIixcclxuICAgIHNjaG9vbDogXCJLRURcIixcclxuICAgIHNjaG9vbFR5cGU6IFwiR3ltbmFzaXVtXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJ2ZW1lbmRvLmVsZXZAa2Vkc2Nob29scy5jb21cIixcclxuICAgIG1haWw6IFwidmVtZW5kby5lbGV2QGtlZHNjaG9vbHMuY29tXCIsXHJcbiAgICByb2xlczogW1wiU1RVREVOVFwiXSxcclxuICAgIHVzZXJuYW1lOiBcInZlbWVuZG8uZWxldkBrZWRzY2hvb2xzLmNvbVwiLFxyXG4gICAgc2Nob29sOiBcIktFRFwiLFxyXG4gICAgc2Nob29sVHlwZTogXCJHeW1uYXNpdW1cIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcIk1lZGFyYmV0YXJlIE5hY2thXCIsXHJcbiAgICBtYWlsOiBcIm1lZGFyYmV0YXJlLm5hY2thQGt1bnNrYXBzc2tvbGFuLnNlXCIsXHJcbiAgICByb2xlczogW1wiRU1QTE9ZRUVcIl0sXHJcbiAgICB1c2VybmFtZTogXCJtZWRhcmJldGFyZS5uYWNrYS9LU1wiLFxyXG4gICAgc2Nob29sOiBcIk5hY2thXCIsXHJcbiAgICBzY2hvb2xUeXBlOiBcIkdydW5kc2tvbG9yXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJNZWRhcmJldGFyZSBHbG9iZW5cIixcclxuICAgIG1haWw6IFwibWVkYXJiZXRhcmUuZ2xvYmVuQGt1bnNrYXBzZ3ltbmFzaWV0LnNlXCIsXHJcbiAgICByb2xlczogW1wiRU1QTE9ZRUVcIl0sXHJcbiAgICB1c2VybmFtZTogXCJtZWRhcmJldGFyZS5nbG9iZW4vS1NcIixcclxuICAgIHNjaG9vbDogXCJHbG9iZW5cIixcclxuICAgIHNjaG9vbFR5cGU6IFwiR3ltbmFzaXVtXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJFbGV2IEdsb2JlblwiLFxyXG4gICAgbWFpbDogXCJlbGV2Lmdsb2JlbkBlZHUua3Vuc2thcHNneW1uYXNpZXQuc2VcIixcclxuICAgIHNjaG9vbEdyYWRlOiAyLFxyXG4gICAgcm9sZXM6IFsnU1RVREVOVCddLFxyXG4gICAgdXNlcm5hbWU6IFwiZWxldi5nbG9iZW5cIixcclxuICAgIHNjaG9vbDogXCJHbG9iZW5cIixcclxuICAgIHNjaG9vbFR5cGU6IFwiR3ltbmFzaXVtXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJFbGV2IEJvcsOlc1wiLFxyXG4gICAgbWFpbDogXCJlbGV2LmJvcmFzQGVkdS5rdW5za2Fwc3Nrb2xhbi5zZVwiLFxyXG4gICAgc2Nob29sR3JhZGU6IDcsXHJcbiAgICByb2xlczogWydTVFVERU5UJ10sXHJcbiAgICB1c2VybmFtZTogXCJlbGV2LmJvcmFzXCIsXHJcbiAgICBzY2hvb2w6IFwiQm9yw6VzXCIsXHJcbiAgICBzY2hvb2xUeXBlOiBcIkdydW5kc2tvbG9yXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJFbGV2IEJvcmzDpG5nZVwiLFxyXG4gICAgbWFpbDogXCJlbGV2LmJvcmxhbmdlQGVkdS5rdW5za2Fwc3Nrb2xhbi5zZVwiLFxyXG4gICAgc2Nob29sR3JhZGU6IDksXHJcbiAgICByb2xlczogWydTVFVERU5UJ10sXHJcbiAgICB1c2VybmFtZTogJ2VsZXYuYm9ybGFuZ2UvS1MnLFxyXG4gICAgc2Nob29sOiAnQm9ybMOkbmdlJyxcclxuICAgIHNjaG9vbFR5cGU6IFwiR3ltbmFzaXVtXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJSb2xsLWzDtnNcIixcclxuICAgIG1haWw6IFwibm9uZUBrdW5za2Fwc3Nrb2xhbi5zZVwiLFxyXG4gICAgdXNlcm5hbWU6IFwibm9uZVwiLFxyXG4gICAgcm9sZXM6IFtdXHJcbn1dO1xyXG5cclxuIiwiaW1wb3J0IGVudiBmcm9tICcuLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyB1c2VycyB9IGZyb20gJy4vZGF0YS91c2Vycyc7XHJcbmltcG9ydCB7IHBhcnNlUXVlcnlTdHJpbmcgfSBmcm9tICcuLi91dGlscy9xdWVyeS1zdHJpbmcnO1xyXG5cclxuY29uc3QgdXNlcm5hbWUgPSBwYXJzZVF1ZXJ5U3RyaW5nIChsb2NhdGlvbi5zZWFyY2gpLnVzZXI7XHJcbmlmICh1c2VybmFtZSkge1xyXG4gIGNvbnN0IHVzZXIgPSB1c2Vycy5maW5kKHUgPT4gdS51c2VybmFtZSA9PT0gdXNlcm5hbWUpO1xyXG4gIGlmICh1c2VyKSB7XHJcbiAgICBlbnYuY3VycmVudFVzZXIgPSB1c2VyO1xyXG4gIH1cclxufVxyXG5cclxuY29uc3QgeyByb2xlLCBzY2hvb2wgfSA9IHBhcnNlUXVlcnlTdHJpbmcobG9jYXRpb24uc2VhcmNoKTtcclxuaWYgKGVudi5jdXJyZW50VXNlcikge1xyXG4gIGlmIChyb2xlKSB7XHJcbiAgICBlbnYuY3VycmVudFVzZXIucm9sZXMgPSByb2xlLnNwbGl0KCcsJyk7XHJcbiAgfVxyXG4gIGlmIChzY2hvb2wpIHtcclxuICAgIGVudi5jdXJyZW50VXNlci5zY2hvb2wgPSBzY2hvb2w7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBjZmcgZnJvbSAnLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuXHJcbmNmZy5LRURfTE9DQUxFID0gJ3N2JztcclxuY2ZnLktFRF9TQ0hPT0xfTE9DQUxFID0gJ3N2JztcclxuIiwiLy8gPEluaXRpYWxpemF0aW9uPlxyXG5pbXBvcnQgJy4vdGVzdC1jb25maWcnO1xyXG5pbXBvcnQgJy4vc2V0LWN1cnJlbnQtdXNlcic7IC8vIEVtdWxhdGUgc2VydmVyLXNpZGUgc2NyaXB0IHRvIHNldCBjdXJyZW50IHVzZXJcclxuaW1wb3J0ICcuLi9nbG9iYWwtc2V0dGVycy9zZXQtYWxsJzsgLy8gQ2xpZW50LXNpZGUgaW5pdGlhbGl6YXRpb25cclxuLy8gPC9Jbml0aWFsaXphdGlvbj5cclxuXHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IGNmZyBmcm9tICcuLi9nbG9iYWxzL0tFRC5jZmcnO1xyXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCAqIGFzIFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XHJcbmltcG9ydCB7IFVzZXIgfSBmcm9tICcuLi9jb250cmFjdHMva2VkLW1vZGVscyc7XHJcbmltcG9ydCB7IGxlYXJuaW5nTW9kdWxlcyB9IGZyb20gJy4vZGF0YS9sZWFybmluZ01vZHVsZXMnO1xyXG5pbXBvcnQgeyBsZWFybmluZ1BhZ2VVcmxzIH0gZnJvbSAnLi9kYXRhL2xlYXJuaW5nTW9kdWxlczInO1xyXG5pbXBvcnQgeyB1c2VycyB9IGZyb20gJy4vZGF0YS91c2Vycyc7XHJcbmltcG9ydCB7IFdlZWtQbGFubmVyIH0gZnJvbSAnLi4vY29tcG9uZW50cy93ZWVrcGxhbm5lcic7XHJcbmltcG9ydCB7IGNvbXBvbmVudHMgfSBmcm9tICcuL2NvbXBvbmVudHMnO1xyXG5pbXBvcnQgJCBmcm9tICdqcXVlcnknO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7S2VkQmFja2VuZENsaWVudFdlYlRlc3R9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50d2VidGVzdCc7XHJcbmltcG9ydCB7IENob29zZVVzZXIgfSBmcm9tICcuL3V0aWxzL2Nob29zZS11c2VyJztcclxuaW1wb3J0IHsgRm9ybWF0dGVkTWVzc2FnZSwgaW5qZWN0SW50bCwgSW5qZWN0ZWRJbnRsUHJvcHMgfSBmcm9tICdyZWFjdC1pbnRsJztcclxuaW1wb3J0IHsgc2V0dXBJbnRsIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL1NldHVwTGFuZ3VhZ2VJbnRsXCI7XHJcbmltcG9ydCB7TGFuZ3VhZ2VDb250ZXh0fSBmcm9tICcuLi9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9MYW5ndWFnZUNvbnRleHQnO1xyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBzZWxlY3RlZENvbXBvbmVudDogc3RyaW5nLFxyXG4gIHNlbGVjdGVkTGVhcm5pbmdNb2R1bGU6IG51bWJlcixcclxuICBzZWxlY3RlZExlYXJuaW5nTW9kdWxlVXJsOiBzdHJpbmcsXHJcbiAgc2VsZWN0ZWRDb21wb25lbnRSZWFsOiBSZWFjdC5SZWFjdFR5cGUsXHJcbiAgc2VsZWN0ZWRDb21wUHJvcHM6IGFueVxyXG59XHJcblxyXG5jbGFzcyBfVGVzdFBhZ2UgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SW5qZWN0ZWRJbnRsUHJvcHMsIFN0YXRlPiB7XHJcbiAgY29tcG9uZW50QXJlYTogSFRNTEVsZW1lbnQ7XHJcbiAgbWVzc2FnZXMgOiBvYmplY3Q7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcblxyXG4gICAgY29uc3Qgc2VsZWN0ZWRDb21wID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJzZWxlY3RlZENvbXBvbmVudFwiKSB8fCBPYmplY3Qua2V5cyhjb21wb25lbnRzKVswXTtcclxuICAgIHZhciBzZWxlY3RDb21wUHJvcHMgPSBjb21wb25lbnRzW3NlbGVjdGVkQ29tcF0ucHJvcHMoKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIHNlbGVjdGVkQ29tcG9uZW50OiBzZWxlY3RlZENvbXAsXHJcbiAgICAgIHNlbGVjdGVkTGVhcm5pbmdNb2R1bGU6IHBhcnNlSW50KGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2VsZWN0ZWRMZWFybmluZ01vZHVsZVwiKSB8fCBcIjBcIiksXHJcbiAgICAgIHNlbGVjdGVkTGVhcm5pbmdNb2R1bGVVcmw6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwic2VsZWN0ZWRMZWFybmluZ01vZHVsZVVybFwiKSB8fCBcIlwiLFxyXG4gICAgICBzZWxlY3RlZENvbXBvbmVudFJlYWw6IGNvbXBvbmVudHNbc2VsZWN0ZWRDb21wXS5jb21wb25lbnQsXHJcbiAgICAgIHNlbGVjdGVkQ29tcFByb3BzIDogey4uLnNlbGVjdENvbXBQcm9wc31cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcclxuICAgIHRoaXMucmVuZGVyVGVzdENvbXBvbmVudCgpO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICAvL3RoaXMucmVuZGVyVGVzdENvbXBvbmVudCgpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyVGVzdENvbXBvbmVudCgpIHtcclxuICAgIGVudi5sZWFybmluZ01vZHVsZVRhc2tzID0gbGVhcm5pbmdNb2R1bGVzW3RoaXMuc3RhdGUuc2VsZWN0ZWRMZWFybmluZ01vZHVsZV07XHJcbiAgICAkKHRoaXMuY29tcG9uZW50QXJlYSkuaHRtbChcIlwiKTtcclxuXHJcbiAgICBpZiAoZW52LmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgIGNvbnN0IHNlbGVjdGVkID0gY29tcG9uZW50c1t0aGlzLnN0YXRlLnNlbGVjdGVkQ29tcG9uZW50XSB8fFxyXG4gICAgICAgIGNvbXBvbmVudHNbT2JqZWN0LmtleXMoY29tcG9uZW50cylbMF1dO1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICBzZWxlY3RlZENvbXBvbmVudFJlYWw6IHNlbGVjdGVkLmNvbXBvbmVudCxcclxuICAgICAgICBzZWxlY3RlZENvbXBQcm9wcyA6IHsuLi5zZWxlY3RlZC5wcm9wcygpfVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3QgU2VsZWN0ZWRDb21wb25lbnQgPSB0aGlzLnN0YXRlLnNlbGVjdGVkQ29tcG9uZW50UmVhbCBhcyBSZWFjdC5SZWFjdFR5cGU7XHJcbiAgICBjb25zdCB7aW50bH0gPSB0aGlzLnByb3BzO1xyXG4gICAgcmV0dXJuIGVudi5jdXJyZW50VXNlciA/IFxyXG4gICAgPExhbmd1YWdlQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17e2ludGx9fT5cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwidGVzdC1wYWdlXCI+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaGVhZGVyXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXN0LXNlbGVjdHNcIj5cclxuICAgICAgICAgIDxmb3JtPlxyXG4gICAgICAgICAgICA8aDQ+XHJcbiAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ0ZXN0LnBhZ2VEZXNjcmlwdGlvblwiIGRlZmF1bHRNZXNzYWdlPVwiVGVzdHNpZGEgZsO2ciBrb21wb25lbnRlciB0aWxsIG55YSBzdGFydHNpZGFuXCIvPiBcclxuICAgICAgICAgICAgPC9oND5cclxuICAgICAgICAgICAgPHRhYmxlPjx0Ym9keT48dHI+XHJcbiAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cInRlc3RDb21wb25lbnRcIj5cclxuICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwidGVzdC5jaG9vc2VDb21wb25lbnRMYWJlbFwiIGRlZmF1bHRNZXNzYWdlPVwiS29tcG9uZW50XCIvPlxyXG4gICAgICAgICAgICAgIDwvbGFiZWw+PC90ZD5cclxuICAgICAgICAgICAgPHRkPjxzZWxlY3QgaWQ9XCJ0ZXN0Q29tcG9uZW50XCIgdmFsdWU9e3RoaXMuc3RhdGUuc2VsZWN0ZWRDb21wb25lbnR9IG9uQ2hhbmdlPXtldiA9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNlbGVjdGVkQ29tcG9uZW50OiBldi50YXJnZXQudmFsdWUgfSk7XHJcbiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJzZWxlY3RlZENvbXBvbmVudFwiLCBldi50YXJnZXQudmFsdWUpO1xyXG4gICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfX0+XHJcbiAgICAgICAgICAgICAge09iamVjdC5rZXlzKGNvbXBvbmVudHMpLm1hcChjID0+IDxvcHRpb24ga2V5PXtjfSB2YWx1ZT17Y30+e2N9PC9vcHRpb24+KX1cclxuICAgICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgICAgIDwvdGQ+PC90cj5cclxuXHJcbiAgICAgICAgICAgIHt0aGlzLnN0YXRlLnNlbGVjdGVkQ29tcG9uZW50ID09PSAnTGVhcm5pbmdHb2Fsc0FuZFRhc2tzJyAmJiA8dHI+PHRkPjxsYWJlbCBodG1sRm9yPVwidGVzdExlYXJuaW5nTW9kdWxlXCI+S3Vyc21vZHVsPC9sYWJlbD48L3RkPlxyXG4gICAgICAgICAgICA8dGQ+PHNlbGVjdCBpZD1cInRlc3RMZWFybmluZ01vZHVsZVwiIHZhbHVlPXt0aGlzLnN0YXRlLnNlbGVjdGVkTGVhcm5pbmdNb2R1bGV9IG9uQ2hhbmdlPXtcclxuICAgICAgICAgICAgICBldiA9PiB7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInNlbGVjdGVkTGVhcm5pbmdNb2R1bGVcIiwgZXYudGFyZ2V0LnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0+XHJcbiAgICAgICAgICAgICAge2xlYXJuaW5nTW9kdWxlcy5tYXAoKGxtLCBpKSA9PlxyXG4gICAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e2l9IHZhbHVlPXtpfT57XHJcbiAgICAgICAgICAgICAgICAgIGxtLnN1YmplY3QuY291cnNlLm5hbWUgKyBcIi9cIiArXHJcbiAgICAgICAgICAgICAgICAgIGxtLnN1YmplY3QubmFtZSArIFwiL1wiICtcclxuICAgICAgICAgICAgICAgICAgbG0ubW9kdWxlTmFtZX08L29wdGlvbj4pXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICA8L3NlbGVjdD48L3RkPjwvdHI+fVxyXG4gICAgICAgICAgICB7dGhpcy5zdGF0ZS5zZWxlY3RlZENvbXBvbmVudCA9PT0gJ0xlYXJuaW5nVGFza3MnICYmIDx0cj48dGQ+PGxhYmVsIGh0bWxGb3I9XCJ0ZXN0TGVhcm5pbmdNb2R1bGVVcmxcIj5LdXJzbW9kdWw8L2xhYmVsPjwvdGQ+XHJcbiAgICAgICAgICAgIDx0ZD48c2VsZWN0IGlkPVwidGVzdExlYXJuaW5nTW9kdWxlVXJsXCIgdmFsdWU9e3RoaXMuc3RhdGUuc2VsZWN0ZWRMZWFybmluZ01vZHVsZVVybH0gb25DaGFuZ2U9e1xyXG4gICAgICAgICAgICAgIGV2ID0+IHtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwic2VsZWN0ZWRMZWFybmluZ01vZHVsZVVybFwiLCBldi50YXJnZXQudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfT5cclxuICAgICAgICAgICAgICB7bGVhcm5pbmdQYWdlVXJscy5tYXAoKHVybCwgaSkgPT5cclxuICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtpfSB2YWx1ZT17dXJsfT57dXJsfTwvb3B0aW9uPilcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIDwvc2VsZWN0PjwvdGQ+PC90cj59XHJcbiAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8aHIgLz5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb21wb25lbnRSb3dcIj5cclxuICAgICAgICA8U2VsZWN0ZWRDb21wb25lbnQgey4uLnRoaXMuc3RhdGUuc2VsZWN0ZWRDb21wUHJvcHN9IC8+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb21wb25lbnRBcmVhXCIgcmVmPXtkaXYgPT4gdGhpcy5jb21wb25lbnRBcmVhID0gZGl2fT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndlZWstcGxhbm5lclwiPlxyXG4gICAgICAgICAge3RoaXMuc3RhdGUuc2VsZWN0ZWRDb21wb25lbnQgPT09ICdMZWFybmluZ1Rhc2tzJyAmJlxyXG4gICAgICAgICAgICA8V2Vla1BsYW5uZXIgdmlld0NvdXJzZVVybD1cImh0dHA6Ly93d3cuc3Z0LnNlL255aGV0ZXJcIiBlbnY9e2Vudn0vPlxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICAgPC9MYW5ndWFnZUNvbnRleHQuUHJvdmlkZXI+IDogPENob29zZVVzZXIgLz5cclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IFRlc3RQYWdlID0gc2V0dXBJbnRsKGluamVjdEludGwoX1Rlc3RQYWdlKSk7XHJcbmV4cG9ydCBkZWZhdWx0IFRlc3RQYWdlOyIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlcnMgfSBmcm9tICcuLi9kYXRhL3VzZXJzJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBDaG9vc2VVc2VyKCkge1xyXG4gIGxldCBzZWxlY3Q7XHJcbiAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwic3YtbGF5b3V0XCI+XHJcbiAgICA8aDI+VsOkbGogYW52w6RuZGFyZTwvaDI+XHJcbiAgICA8dGFibGUgY2xhc3NOYW1lPVwibG9naW4tdGFibGVcIj48dGhlYWQ+PHRyPlxyXG4gICAgICA8dGg+TmFtbjwvdGg+XHJcbiAgICAgIDx0aD5Sb2xsZXI8L3RoPlxyXG4gICAgICA8dGg+RS1wb3N0PC90aD5cclxuICAgICAgPHRoPlNrb2xhPC90aD5cclxuICAgIDwvdHI+PC90aGVhZD5cclxuICAgICAgPHRib2R5PlxyXG4gICAgICAgIHt1c2Vycy5tYXAoKHsgdXNlcm5hbWUsIGRpc3BsYXlOYW1lLCBtYWlsLCBzY2hvb2wsIHJvbGVzIH0pID0+XHJcbiAgICAgICAgICA8dHIga2V5PXttYWlsfSBvbkNsaWNrPXsoKSA9PiBsb2NhdGlvbi5zZWFyY2ggPSBgP3VzZXI9JHt1c2VybmFtZX1gfT5cclxuICAgICAgICAgICAgPHRkPntkaXNwbGF5TmFtZX08L3RkPlxyXG4gICAgICAgICAgICA8dGQgc3R5bGU9e3JvbGVzLmxlbmd0aCA9PT0gMCA/IHsgZm9udFN0eWxlOiAnaXRhbGljJyB9IDoge319Pntyb2xlcy5sZW5ndGggPT09IDAgPyBcInNha25hciByb2xsZXJcIiA6IHJvbGVzLmpvaW4oJywgJyl9PC90ZD5cclxuICAgICAgICAgICAgPHRkPnttYWlsfTwvdGQ+XHJcbiAgICAgICAgICAgIDx0ZCBzdHlsZT17c2Nob29sID8ge30gOiB7IGZvbnRTdHlsZTogJ2l0YWxpYycgfX0+e3NjaG9vbCB8fCBcInNha25hciBza29sYVwifTwvdGQ+XHJcbiAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICl9XHJcbiAgICAgIDwvdGJvZHk+PC90YWJsZT5cclxuICA8L2Rpdj5cclxufTtcclxuIiwiXHJcbmV4cG9ydCBjb25zdCBTRUNPTkQgPSAxMDAwO1xyXG5leHBvcnQgY29uc3QgTUlOVVRFID0gU0VDT05EICogNjA7XHJcbmV4cG9ydCBjb25zdCBIT1VSID0gTUlOVVRFICogNjA7XHJcblxyXG4iLCJpbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IEFjYWRlbWljWWVhclN0cnVjdHVyZSwgVGVybSB9IGZyb20gJy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcclxuaW1wb3J0IHsgTW9ja0VEU0FjYWRlbWljWWVhciB9IGZyb20gJy4uL2NvbnRyYWN0cy9lZHMnO1xyXG5pbXBvcnQgeyBHZW5lcmljU2Nob29sTW9tZW50LCBnZXRDdXJyZW50QWNhZGVtaWNZZWFyIH0gZnJvbSAnLi9nZW5lcmljLXNjaG9vbC11dGlscyc7XHJcbmltcG9ydCB7IEluamVjdGVkSW50bCB9IGZyb20gJ3JlYWN0LWludGwnO1xyXG5pbXBvcnQgeyBMQVNUX1NURVBfU1BSSU5HLCBMQVNUX1NURVBfQVVUVU1OIH0gZnJvbSAnLi4vY29tcG9uZW50cy9rcy10ZXJtcGxhbm5lci90ZXJtcGxhbm5lci11dGlscyc7XHJcblxyXG5leHBvcnQgY2xhc3MgR2VuZXJpY1NjaG9vbFRlcm0ge1xyXG4gIHNjaG9vbE1vbWVudDogR2VuZXJpY1NjaG9vbE1vbWVudDtcclxuICBzZWxlY3RlZERhdGU6IERhdGU7XHJcbiAgbG9jYWxlOiBzdHJpbmc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGN1cnJlbnREYXRlOiBEYXRlLCBjdXJyZW50TG9jYWxlPzogc3RyaW5nLCBhY2FkZW1pY1llYXJTdHJ1Y3R1cmU/OiBNb2NrRURTQWNhZGVtaWNZZWFyKSB7XHJcbiAgICB0aGlzLmxvY2FsZSA9IGN1cnJlbnRMb2NhbGUgfHwgXCJzdlwiO1xyXG4gICAgdGhpcy5zZWxlY3RlZERhdGUgPSBjdXJyZW50RGF0ZTtcclxuICAgIHRoaXMuc2Nob29sTW9tZW50ID0gYWNhZGVtaWNZZWFyU3RydWN0dXJlID8gZ2V0Q3VycmVudEFjYWRlbWljWWVhcihtb21lbnQoY3VycmVudERhdGUpLCBhY2FkZW1pY1llYXJTdHJ1Y3R1cmUpIDogbnVsbDtcclxuICB9XHJcblxyXG4gIGdldFRlcm1TdGFydEFuZEVuZChpbmNsdWRlRXh0cmFXZWVrPzogYm9vbGVhbik6IG1vbWVudC5Nb21lbnRbXSB7XHJcbiAgICAvL0luIGNhc2UgdGhhdCB0aGUgd2VlayBzdGFydCBkYXRlIGlzIGEgZGF0ZSBmcm9tIHRoZSBwcmV2aW91cyB5ZWFyXHJcbiAgICAvL0NvbnNpZGVyIHRoZSBzdGFydCBvZiB0aGUgd2VlayAoIHN0YXJ0IGRhdGUpIGFzIHRoZSBkYXkgb2YgdGhlIDAxLjAxLnllYXJcclxuICAgIHZhciBzdGFydE9mVGVybVdlZWsgPSB0aGlzLnNjaG9vbE1vbWVudC5hY2FkZW1pY1llYXJTdHJ1Y3R1cmUuc3RhcnREYXRlLmNsb25lKCkuc3RhcnRPZignd2VlaycpO1xyXG5cclxuICAgIGlmIChzdGFydE9mVGVybVdlZWsueWVhcigpIDwgdGhpcy5zY2hvb2xNb21lbnQuYWNhZGVtaWNZZWFyU3RydWN0dXJlLnN0YXJ0RGF0ZS55ZWFyKCkpIHtcclxuICAgICAgc3RhcnRPZlRlcm1XZWVrID0gdGhpcy5zY2hvb2xNb21lbnQuYWNhZGVtaWNZZWFyU3RydWN0dXJlLnN0YXJ0RGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgZW5kT2ZUZXJtV2VlayA9IHRoaXMuc2Nob29sTW9tZW50LmFjYWRlbWljWWVhclN0cnVjdHVyZS5lbmREYXRlO1xyXG5cclxuICAgIGlmKHRoaXMubG9jYWxlID09PSBcInN2XCIgJiYgaW5jbHVkZUV4dHJhV2VlayAmJiB0aGlzLnNjaG9vbE1vbWVudC50ZXJtID09PSBcIlNUXCIpe1xyXG4gICAgICBlbmRPZlRlcm1XZWVrID0gZW5kT2ZUZXJtV2Vlay5jbG9uZSgpLmFkZCgzLCAnd2Vla3MnKS5lbmRPZignd2VlaycpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZihpbmNsdWRlRXh0cmFXZWVrKXtcclxuICAgICAgaWYodGhpcy5sb2NhbGUgIT0gXCJzdlwiKXtcclxuICAgICAgICAvLyBmb3IgaW5kaWEgdGhlIGVuZCBkYXRlIGNhbiBiZSBpbiB0aGUgbWlkZGxlIG9mIHRoZSB3ZWVrXHJcbiAgICAgICAgZW5kT2ZUZXJtV2Vlaz0gdGhpcy5zY2hvb2xNb21lbnQuYWNhZGVtaWNZZWFyU3RydWN0dXJlLmVuZERhdGUuY2xvbmUoKTtcclxuICAgICAgfVxyXG4gICAgICBlbmRPZlRlcm1XZWVrID0gIHRoaXMuc2Nob29sTW9tZW50LmFjYWRlbWljWWVhclN0cnVjdHVyZS5lbmREYXRlLmNsb25lKCkuYWRkKDEsICd3ZWVrJykuZW5kT2YoJ3dlZWsnKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gW3N0YXJ0T2ZUZXJtV2VlaywgZW5kT2ZUZXJtV2Vla107XHJcbiAgfVxyXG5cclxuICBnZXRGaXJzdEFuZExhc3RXZWVrT2ZUZXJtKCkge1xyXG4gICAgcmV0dXJuIFt0aGlzLnNjaG9vbE1vbWVudC5hY2FkZW1pY1llYXJTdHJ1Y3R1cmUuc3RhcnREYXRlLndlZWsoKSwgdGhpcy5zY2hvb2xNb21lbnQuYWNhZGVtaWNZZWFyU3RydWN0dXJlLmVuZERhdGUud2VlaygpXTtcclxuICB9XHJcblxyXG4gIGlzQ3VycmVudFdlZWsoZGF0ZVRpbWU6IG51bWJlcikgOiBib29sZWFuIHtcclxuICAgIHZhciB0ZXJtRGF0ZSA9IG1vbWVudChkYXRlVGltZSlcclxuICAgIHJldHVybiB0ZXJtRGF0ZS55ZWFyKCkgPT09IG1vbWVudCgpLnllYXIoKSAmJiB0ZXJtRGF0ZS53ZWVrKCkgPT09IG1vbWVudCgpLndlZWsoKTtcclxuICB9XHJcblxyXG4gIGdldExhc3RTdGVwV2Vlayhsb2NhbGU6IHN0cmluZykge1xyXG4gICAgLy9UT0RPOiB0aGlzIHNob3VsZCBiZSByZWZhY3RvcmVkLiBUaGUgZ2VuZXJpYyBtZXRob2Qgc2hvdWxkIGJlIHVzZWRcclxuICAgIGlmKGxvY2FsZSA9PT0gXCJzdlwiKXtcclxuICAgICAgcmV0dXJuIHRoaXMuc2Nob29sTW9tZW50LnRlcm0gPT09IFwiU1RcIiA/IExBU1RfU1RFUF9TUFJJTkcgOiBMQVNUX1NURVBfQVVUVU1OO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuc2Nob29sTW9tZW50LmFjYWRlbWljWWVhclN0cnVjdHVyZS5lbmREYXRlLmNsb25lKCkuYWRkKDEsIFwid2Vla1wiKS53ZWVrKCk7XHJcbiAgfVxyXG5cclxuICB0b0xvY2FsZVN0cmluZyhpbnRsOiBJbmplY3RlZEludGwsIHNob3J0WWVhcj86IGJvb2xlYW4pIHtcclxuICAgIGlmKHRoaXMuc2Nob29sTW9tZW50KVxyXG4gICAge1xyXG4gICAgbGV0IHllYXIgPSB0aGlzLnNjaG9vbE1vbWVudC5hY2FkZW1pY1llYXJTdHJ1Y3R1cmUuZW5kRGF0ZS55ZWFyKCkudG9TdHJpbmcoKTtcclxuICAgIGxldCBhY2FkZW1pY1llYXIgPSB0aGlzLnNjaG9vbE1vbWVudC5hY2FkZW1pY1llYXJTdHJ1Y3R1cmUuYWNhZGVtaWNZZWFyO1xyXG4gICAgaWYgKHNob3J0WWVhciAmJiBpbnRsLmxvY2FsZSA9PT0gJ3N2Jykge1xyXG4gICAgICB5ZWFyID0geWVhci5zdWJzdHIoMik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB5ZWFyID0gYWNhZGVtaWNZZWFyO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZXR1cm4gdGhpcy5zY2hvb2xNb21lbnQudGVybSA9PT0gJ0FUJyA/IGludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAndGVybXBsYW5uZXIuZmlyc3RUZXJtJywgZGVmYXVsdE1lc3NhZ2U6ICdIVCB7eWVhcn0nIH0sIHsgeWVhcjogeWVhciB9KSA6XHJcbiAgICAgIGludGwuZm9ybWF0TWVzc2FnZSh7IGlkOiAndGVybXBsYW5uZXIuc2Vjb25kVGVybScsIGRlZmF1bHRNZXNzYWdlOiAnVlQge3llYXJ9JyB9LCB7IHllYXI6IHllYXIgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIG5leHRUZXJtKCkge1xyXG4gICAgLy9zd2l0Y2ggdG8gbmV4dCBzZW1lc3Rlciwgd2Ugc2V0IHRoZSBjdXJyZW50IGRhdGUgYXMgYWRkaW5nIDMgbW9udGhzIHRvIHRoZSBlbmQgb2YgdGhlIGN1cnJlbnQgc2VtZXN0ZXJcclxuICAgIHZhciBlbmREYXRlID0gdGhpcy5zY2hvb2xNb21lbnQgPyB0aGlzLnNjaG9vbE1vbWVudC5hY2FkZW1pY1llYXJTdHJ1Y3R1cmUuZW5kRGF0ZS5jbG9uZSgpIDogbW9tZW50KCk7XHJcbiAgICB2YXIgbmV4dERhdGUgPSBlbmREYXRlLmFkZCgzLCAnbW9udGhzJyk7XHJcbiAgICByZXR1cm4gbmV3IEdlbmVyaWNTY2hvb2xUZXJtKG5leHREYXRlLnRvRGF0ZSgpLCB0aGlzLmxvY2FsZSk7XHJcbiAgfVxyXG5cclxuICBwcmV2VGVybSgpIHtcclxuICAgIC8vdG8gc3dpdGNoIHRvIG5leHQgc2VtZXN0ZXIsIHdlIHNldCB0aGUgY3VycmVudCBkYXRlIGFzIHN1YnRyYWN0aW5nIDMgbW9udGhzIGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBjdXJyZW50IHNlbWVzdGVyXHJcbiAgICB2YXIgc3RhcnREYXRlID0gdGhpcy5zY2hvb2xNb21lbnQgPyAgdGhpcy5zY2hvb2xNb21lbnQuYWNhZGVtaWNZZWFyU3RydWN0dXJlLnN0YXJ0RGF0ZS5jbG9uZSgpIDogbW9tZW50KCk7XHJcbiAgICB2YXIgcHJldkRhdGUgPSBzdGFydERhdGUuc3VidHJhY3QoMywgJ21vbnRocycpO1xyXG4gICAgcmV0dXJuIG5ldyBHZW5lcmljU2Nob29sVGVybShwcmV2RGF0ZS50b0RhdGUoKSwgdGhpcy5sb2NhbGUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0RWRzUGVyaW9kTmFtZSgpe1xyXG4gICAgcmV0dXJuIHRoaXMuc2Nob29sTW9tZW50LnRlcm0gPT09ICdBVCcgPyBcIkhUXCIgOiBcIlZUXCIgKyB0aGlzLnNjaG9vbE1vbWVudC5hY2FkZW1pY1llYXJTdHJ1Y3R1cmUuZW5kRGF0ZS55ZWFyKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuaW1wb3J0IHtNb2NrRURTQWNhZGVtaWNZZWFyLCBNb2NrRURTRGF0ZVJhbmdlfSBmcm9tICcuLi9jb250cmFjdHMvZWRzJztcclxuaW1wb3J0IHtBY2FkZW1pY1llYXJTdHJ1Y3R1cmUsICBUZXJtIH0gZnJvbSAnLi4vY29udHJhY3RzL2tlZC1tb2RlbHMnO1xyXG5pbXBvcnQgeyBJbmplY3RlZEludGwgfSBmcm9tICdyZWFjdC1pbnRsJzsgIFxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBHZW5lcmljU2Nob29sTW9tZW50IHtcclxuICAgIGFjYWRlbWljWWVhclN0cnVjdHVyZTogQWNhZGVtaWNZZWFyU3RydWN0dXJlO1xyXG4gICAgdGVybTogVGVybTtcclxuICB9XHJcbiAgXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50QWNhZGVtaWNZZWFyKGN1cnJlbnREYXRlOiBtb21lbnQuTW9tZW50LCBhY2FkZW1pY1llYXI6IE1vY2tFRFNBY2FkZW1pY1llYXIpIDogR2VuZXJpY1NjaG9vbE1vbWVudFxyXG57XHJcbiAgdmFyIGZpcnN0VGVybVN0YXJ0RGF0ZSA9IG1vbWVudChuZXcgRGF0ZShhY2FkZW1pY1llYXIuZmlyc3RUZXJtLnN0YXJ0RGF0ZSkpO1xyXG4gIHZhciBmaXJzdFRlcm1FbmREYXRlID0gbW9tZW50KG5ldyBEYXRlKGFjYWRlbWljWWVhci5maXJzdFRlcm0uZW5kRGF0ZSkpO1xyXG4gIHZhciBzZWNvbmRUZXJtU3RhcnREYXRlID0gbW9tZW50KG5ldyBEYXRlKGFjYWRlbWljWWVhci5zZWNvbmRUZXJtLnN0YXJ0RGF0ZSkpO1xyXG4gIHZhciBzZWNvbmRUZXJtRW5kRGF0ZSA9IG1vbWVudChuZXcgRGF0ZShhY2FkZW1pY1llYXIuc2Vjb25kVGVybS5lbmREYXRlKSk7XHJcbiAgdmFyIGFjYWRlbWljUGVyaW9kID0gZmlyc3RUZXJtU3RhcnREYXRlLnllYXIoKS50b1N0cmluZygpLnN1YnN0cigyKSArIFwiL1wiICsgc2Vjb25kVGVybUVuZERhdGUueWVhcigpLnRvU3RyaW5nKCkuc3Vic3RyKDIpO1xyXG5cclxuICB2YXIgaG9saWRheXMgPSBfZ2V0VGVybUhvbGlkYXlzKGFjYWRlbWljWWVhci5ob2xpZGF5cywgZmlyc3RUZXJtU3RhcnREYXRlLCBmaXJzdFRlcm1FbmREYXRlKTsgXHJcbiAgaWYoY3VycmVudERhdGUgPCBmaXJzdFRlcm1FbmREYXRlKVxyXG4gIHtcclxuICAgIC8vY29tcHV0ZSBhY2FkZW1pYyB3ZWVrIG51bWJlcnNcclxuICAgIHZhciBhY2FkZW1pY1N0YXJ0V2VlayA9IDE7XHJcbiAgICB2YXIgYWNhZGVtaWNFbmRXZWVrID0gZmlyc3RUZXJtRW5kRGF0ZS53ZWVrKCkgLSBmaXJzdFRlcm1TdGFydERhdGUud2VlaygpO1xyXG4gICAgLy9nZXQgY3VycmVudCB0ZXJtIGhvbGlkYXlzXHJcbiAgICByZXR1cm4ge3Rlcm06ICdBVCcsIGFjYWRlbWljWWVhclN0cnVjdHVyZToge2FjYWRlbWljWWVhcjogYWNhZGVtaWNQZXJpb2QsIHN0YXJ0RGF0ZTogZmlyc3RUZXJtU3RhcnREYXRlLCBlbmREYXRlOiBmaXJzdFRlcm1FbmREYXRlLGFjYWRlbWljU3RhcnRXZWVrLCBhY2FkZW1pY0VuZFdlZWssIGhvbGlkYXlzfX07XHJcbiAgfVxyXG5cclxuICAvL2NvbXB1dGUgdGhlIG51bWJlciBvZiBmaXJzdCB0ZXJtIGhvbGlkYXlzIHdlZWsgbnVtYmVyc1xyXG4gIHZhciBudW1iZXJPZkhvbGlkYXlXZWVrcyA9IF9nZXRIb2xpZGF5V2Vla3NOdW1iZXIoaG9saWRheXMpO1xyXG4gIC8vY29tcHV0ZSBhY2FkZW1pYyB3ZWVrIG51bWJlcnNcclxuICB2YXIgYWNhZGVtaWNTdGFydFdlZWsgPSBzZWNvbmRUZXJtU3RhcnREYXRlLmNsb25lKCkuYWRkKDEsICd3ZWVrJykud2VlaygpIC0gZmlyc3RUZXJtU3RhcnREYXRlLndlZWsoKSAtIG51bWJlck9mSG9saWRheVdlZWtzO1xyXG4gIHZhciBhY2FkZW1pY0VuZFdlZWsgPSBzZWNvbmRUZXJtRW5kRGF0ZS5jbG9uZSgpLmFkZCgpLmFkZCgxLCAnd2VlaycpLndlZWsoKSAtIGZpcnN0VGVybVN0YXJ0RGF0ZS53ZWVrKCkgLSBudW1iZXJPZkhvbGlkYXlXZWVrcztcclxuICAvL2dldCBjdXJyZW50IHRlcm0gaG9saWRheXNcclxuICB2YXIgaG9saWRheXMgPSBfZ2V0VGVybUhvbGlkYXlzKGFjYWRlbWljWWVhci5ob2xpZGF5cywgc2Vjb25kVGVybVN0YXJ0RGF0ZSwgc2Vjb25kVGVybUVuZERhdGUpO1xyXG4gIHJldHVybiB7dGVybTogJ1NUJywgYWNhZGVtaWNZZWFyU3RydWN0dXJlOiB7YWNhZGVtaWNZZWFyOiBhY2FkZW1pY1BlcmlvZCwgc3RhcnREYXRlOiBzZWNvbmRUZXJtU3RhcnREYXRlLCBlbmREYXRlOiBzZWNvbmRUZXJtRW5kRGF0ZSwgYWNhZGVtaWNTdGFydFdlZWssIGFjYWRlbWljRW5kV2VlaywgaG9saWRheXN9fTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTY2hvb2xUcmFuc2xhdGVkU3ViamVjdHMoc2Nob29sTG9jYWxlOiBzdHJpbmcsIGludGw6IEluamVjdGVkSW50bCl7XHJcbiAgdmFyIHRyYW5zbGF0ZWRDb2x1bW5zID0ge307XHJcbiAgLy90aGVzZSBhcmUgZml4ZWQgZm9yIGFsbCBzY2hvb2wgbG9jYWxlc1xyXG4gIHRyYW5zbGF0ZWRDb2x1bW5zW1wiS3Vyc1wiXSA9IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6IFwidGVybXBsYW5uZXIuY291cnNlXCIsIGRlZmF1bHRNZXNzYWdlOiBcIkt1cnNcIn0pO1xyXG4gIHRyYW5zbGF0ZWRDb2x1bW5zW1wiS29tbWVudGFyXCJdID0gaW50bC5mb3JtYXRNZXNzYWdlKHtpZDogXCJ0ZXJtcGxhbm5lci5jb21tZW50c1wiLCBkZWZhdWx0TWVzc2FnZTogXCJLb21tZW50YXJcIn0pO1xyXG5cclxuICBpZihzY2hvb2xMb2NhbGUgPT09ICdzdicpe1xyXG4gICAgdHJhbnNsYXRlZENvbHVtbnNbXCJNLnNwclwiXSA9IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6IFwidGVybXBsYW5uZXIubW9kZXJuTGFuZ3VhZ2VcIiwgZGVmYXVsdE1lc3NhZ2U6IFwiTS5zcHJcIn0pO1xyXG4gICAgdHJhbnNsYXRlZENvbHVtbnNbXCJNYVwiXSA9IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6IFwidGVybXBsYW5uZXIubWF0aHNcIiwgZGVmYXVsdE1lc3NhZ2U6IFwiTWFcIn0pO1xyXG4gICAgdHJhbnNsYXRlZENvbHVtbnNbXCJTdi9TdkFcIl0gPSBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiBcInRlcm1wbGFubmVyLnN3ZWRpc2hMYW5ndWFnZVwiLCBkZWZhdWx0TWVzc2FnZTogXCJTdi9TdkFcIn0pO1xyXG4gICAgdHJhbnNsYXRlZENvbHVtbnNbXCJFbmdcIl0gPSBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiBcInRlcm1wbGFubmVyLmVuZ2xpc2hMYW5ndWFnZVwiLCBkZWZhdWx0TWVzc2FnZTogXCJFbmdcIn0pO1xyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIHRyYW5zbGF0ZWRDb2x1bW5zW1wiTUZMXCJdID0gaW50bC5mb3JtYXRNZXNzYWdlKHtpZDogXCJ0ZXJtcGxhbm5lci5tb2Rlcm5MYW5ndWFnZVwiLCBkZWZhdWx0TWVzc2FnZTogXCJNRkxcIn0pO1xyXG4gICAgdHJhbnNsYXRlZENvbHVtbnNbXCJNYVwiXSA9IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6IFwidGVybXBsYW5uZXIubWF0aHNcIiwgZGVmYXVsdE1lc3NhZ2U6IFwiTWF0aHNcIn0pO1xyXG4gICAgdHJhbnNsYXRlZENvbHVtbnNbXCJIaVwiXSA9IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6IFwidGVybXBsYW5uZXIuaGluZGlMYW5ndWFnZVwiLCBkZWZhdWx0TWVzc2FnZTogXCJIaW5kaVwifSk7XHJcbiAgICB0cmFuc2xhdGVkQ29sdW1uc1tcIkVuZ1wiXSA9IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6IFwidGVybXBsYW5uZXIuZW5nbGlzaExhbmd1YWdlXCIsIGRlZmF1bHRNZXNzYWdlOiBcIkVuZ2xpc2hcIn0pO1xyXG4gICAgdHJhbnNsYXRlZENvbHVtbnNbXCJZb2dhXCJdID0gaW50bC5mb3JtYXRNZXNzYWdlKHtpZDogXCJ0ZXJtcGxhbm5lci55b2dhXCIsIGRlZmF1bHRNZXNzYWdlOiBcIllvZ2FcIn0pO1xyXG4gICAgdHJhbnNsYXRlZENvbHVtbnNbXCJJQ1RcIl0gPSBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiBcInRlcm1wbGFubmVyLmljdFwiLCBkZWZhdWx0TWVzc2FnZTogXCJJQ1RcIn0pO1xyXG4gIH1cclxuICByZXR1cm4gdHJhbnNsYXRlZENvbHVtbnM7XHJcbn1cclxuXHJcbi8vdGhpcyBpcyByZWxhdGVkIHRvIGNoYXJ0cy4gSXQgaXMgdXNlZCBvbmx5IGZvciBzdiBsb2NhbGVcclxuZXhwb3J0IGZ1bmN0aW9uIGdldFNjaG9vbFRyYW5zbGF0ZWRTdWJqZWN0RnVsbG5hbWUoaW50bDogSW5qZWN0ZWRJbnRsKXtcclxuICB2YXIgdHJhbnNsYXRlZENvbHVtbnMgPSB7fTtcclxuXHJcbiAgdHJhbnNsYXRlZENvbHVtbnNbXCJNLnNwclwiXSA9IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6IFwidGVybXBsYW5uZXIubW9kZXJuTGFuZ3VhZ2VGdWxsbmFtZVwiLCBkZWZhdWx0TWVzc2FnZTogXCJNLnNwcsOla1wifSk7XHJcbiAgdHJhbnNsYXRlZENvbHVtbnNbXCJNYVwiXSA9IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6IFwidGVybXBsYW5uZXIubWF0aHNGdWxsbmFtZVwiLCBkZWZhdWx0TWVzc2FnZTogXCJNYXRlbWF0aWtcIn0pO1xyXG4gIHRyYW5zbGF0ZWRDb2x1bW5zW1wiU3YvU3ZBXCJdID0gaW50bC5mb3JtYXRNZXNzYWdlKHtpZDogXCJ0ZXJtcGxhbm5lci5zd2VkaXNoTGFuZ3VhZ2VGdWxsTmFtZVwiLCBkZWZhdWx0TWVzc2FnZTogXCJTdmVuc2thXCJ9KTtcclxuICB0cmFuc2xhdGVkQ29sdW1uc1tcIkVuZ1wiXSA9IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6IFwidGVybXBsYW5uZXIuZW5nbGlzaExhbmd1YWdlRnVsbE5hbWVcIiwgZGVmYXVsdE1lc3NhZ2U6IFwiRW5nZWxza2FcIn0pO1xyXG5cclxuICByZXR1cm4gdHJhbnNsYXRlZENvbHVtbnM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9nZXRUZXJtSG9saWRheXMoaG9saWRheXM6IE1vY2tFRFNEYXRlUmFuZ2VbXSwgdGVybVN0YXJ0RGF0ZTogbW9tZW50Lk1vbWVudCwgdGVybUVuZERhdGU6IG1vbWVudC5Nb21lbnQpe1xyXG4gIHJldHVybiBob2xpZGF5cy5maWx0ZXIoZWxlbSA9PiB7XHJcbiAgICByZXR1cm4gbW9tZW50KGVsZW0uc3RhcnREYXRlKS5pc0JldHdlZW4odGVybVN0YXJ0RGF0ZSwgdGVybUVuZERhdGUpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfZ2V0SG9saWRheVdlZWtzTnVtYmVyKGhvbGlkYXlzOk1vY2tFRFNEYXRlUmFuZ2VbXSl7XHJcbiAgdmFyIG51bWJlck9mV2Vla3MgPSAwO1xyXG4gIGhvbGlkYXlzLmZvckVhY2goZWxlbSA9PiB7XHJcbiAgICAvL3RoZSBudW1iZXIgb2Ygd2Vla3MgaXMgdGhlIGRpZmZlcmVuY2UgKyAxXHJcbiAgICBudW1iZXJPZldlZWtzKz0gbW9tZW50KGVsZW0uZW5kRGF0ZSkuYWRkKDEsICd3ZWVrJykud2VlaygpIC0gbW9tZW50KGVsZW0uc3RhcnREYXRlKS53ZWVrKCk7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIG51bWJlck9mV2Vla3M7XHJcbn0iLCJcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGlmVGFrZXNUaW1lKG1zOiBudW1iZXIsIHRhc2s6ICgpPT5Qcm9taXNlPGFueT4sIGFjdGlvbjogKCk9PmFueSkge1xyXG4gIGxldCB0aW1lb3V0UmVhY2hlZCA9IGZhbHNlO1xyXG4gIGNvbnN0IHRoID0gc2V0VGltZW91dCgoKT0+e1xyXG4gICAgdGltZW91dFJlYWNoZWQgPSB0cnVlO1xyXG4gICAgYWN0aW9uKCk7XHJcbiAgfSwgbXMpO1xyXG4gIGNvbnN0IHJ2ID0gYXdhaXQgdGFzaygpO1xyXG4gIGlmICghdGltZW91dFJlYWNoZWQpIGNsZWFyVGltZW91dCh0aCk7XHJcbiAgcmV0dXJuIHJ2O1xyXG59XHJcbiIsImNvbnN0IERFRkFVTFRfQ0FDSEVfRVhQSVJBVElPTiA9IDMwICogNjAgKiAxMDAwOyAvLyAzMCBtaW51dGVzLlxyXG5cclxudHlwZSBQcm9taXNlUmV0dXJuaW5nTWV0aG9kTmFtZXM8QVBJPiA9IHtcclxuICBbTUVUSE9EIGluIGtleW9mIEFQSV06IEFQSVtNRVRIT0RdIGV4dGVuZHMgKC4uLmFyZ3M6IGFueVtdKSA9PiBQcm9taXNlPGFueT4gPyBNRVRIT0QgOiBuZXZlclxyXG59XHJcblxyXG50eXBlIENvbnZlcnRNZXRob2RUb1N1c3BlbnNlPEY+ID0gRiBleHRlbmRzICguLi5hcmdzOiBpbmZlciBBKSA9PiBQcm9taXNlPGluZmVyIFI+ID9cclxuICAoLi4uYXJnczogQSkgPT4gUiA6XHJcbiAgRjtcclxuXHJcbmV4cG9ydCB0eXBlIFN1c3BlbnNlQmFzZWRBUEk8QVBJPiA9IHtcclxuICBbTUVUSE9EIGluIGtleW9mIFByb21pc2VSZXR1cm5pbmdNZXRob2ROYW1lczxBUEk+XTogQ29udmVydE1ldGhvZFRvU3VzcGVuc2U8QVBJW01FVEhPRF0+XHJcbn1cclxuXHJcbnR5cGUgT3B0aW9ucyA9IHtcclxuICBpc0FwaU1ldGhvZD86IChwcm9wOiBzdHJpbmcpPT5ib29sZWFuLFxyXG4gIGNhY2hlRXhwaXJhdGlvbj86IG51bWJlclxyXG59XHJcblxyXG5jb25zdCBkZWZhdWx0T3B0aW9uczogT3B0aW9ucyA9IHtcclxuICBpc0FwaU1ldGhvZDogZiA9PiB0eXBlb2YgZiA9PT0gJ2Z1bmN0aW9uJyxcclxuICBjYWNoZUV4cGlyYXRpb246IERFRkFVTFRfQ0FDSEVfRVhQSVJBVElPTlxyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VTdXNwZW5zZUFwaTxBUEk+KGFwaTogQVBJLCBvcHRpb25zID0gZGVmYXVsdE9wdGlvbnMpOiBTdXNwZW5zZUJhc2VkQVBJPEFQST5cclxue1xyXG4gIG9wdGlvbnMgPSB7Li4uZGVmYXVsdE9wdGlvbnMsIC4uLm9wdGlvbnN9O1xyXG4gIGNvbnN0IHtpc0FwaU1ldGhvZCwgY2FjaGVFeHBpcmF0aW9ufSA9IG9wdGlvbnM7XHJcblxyXG4gIGNvbnN0IHJ2OiBTdXNwZW5zZUJhc2VkQVBJPEFQST4gPSBPYmplY3QuY3JlYXRlKGFwaSBhcyBhbnkpIGFzIFN1c3BlbnNlQmFzZWRBUEk8QVBJPjtcclxuICBjb25zdCBjYWNoZToge1trZXk6IHN0cmluZ106IHt0aW1lb3V0OiBudW1iZXIsIHZhbHVlPzogYW55LCBlcnJvcj86IGFueSwgcHJvbWlzZT86IFByb21pc2U8YW55Pn19ID0ge307XHJcblxyXG4gIC8vIFdhbGsgdGhlIGluc3RhbmNlICsgcHJvdG90eXBlIGNoYWluIHRvIGdlbmVyYXRlIHN1c3BlbnNlIHZlcnNpb24gb2YgZWFjaCBwcm9taXNlIHJldHVybmluZyBtZXRob2RcclxuICBmb3IgKGxldCBwcm90byA9IGFwaTsgcHJvdG8gJiYgcHJvdG8gIT09IE9iamVjdC5wcm90b3R5cGU7IHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHByb3RvKSkge1xyXG4gICAgc3VzcGVuZGlmeShwcm90byk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzdXNwZW5kaWZ5KHByb3RvKSB7XHJcbiAgICBPYmplY3Qua2V5cyhwcm90bykuZm9yRWFjaChwcm9wID0+IHtcclxuICAgICAgaWYgKCFydi5oYXNPd25Qcm9wZXJ0eShwcm9wKSAmJiBpc0FwaU1ldGhvZChwcm9wKSkge1xyXG4gICAgICAgIHJ2W3Byb3BdID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcclxuICAgICAgICAgIGNvbnN0IGtleSA9IEpTT04uc3RyaW5naWZ5KFtwcm9wLCAuLi5hcmdzXSk7XHJcbiAgICAgICAgICBjb25zdCBjYWNoZWRFbnRyeSA9IGNhY2hlW2tleV07XHJcbiAgICAgICAgICBpZiAoY2FjaGVkRW50cnkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAoY2FjaGVkRW50cnkucHJvbWlzZSkgdGhyb3cgY2FjaGVkRW50cnkucHJvbWlzZTtcclxuICAgICAgICAgICAgaWYgKGNhY2hlZEVudHJ5LmVycm9yKSB0aHJvdyBjYWNoZWRFbnRyeS5lcnJvcjtcclxuICAgICAgICAgICAgaWYgKGNhY2hlZEVudHJ5LnRpbWVvdXQgPiBEYXRlLm5vdygpKSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlZEVudHJ5LnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBwcm9taXNlID0gcHJvdG9bcHJvcF0uYXBwbHkoYXBpLCBhcmdzKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgICAgY2FjaGVba2V5XSA9IHt0aW1lb3V0OiBEYXRlLm5vdygpICsgY2FjaGVFeHBpcmF0aW9uLCB2YWx1ZTogcmVzdWx0fTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgIGNhY2hlW2tleV0gPSB7dGltZW91dDogRGF0ZS5ub3coKSArIGNhY2hlRXhwaXJhdGlvbiwgZXJyb3J9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY2FjaGVba2V5XSA9IHt0aW1lb3V0OiBEYXRlLm5vdygpICsgY2FjaGVFeHBpcmF0aW9uLCBwcm9taXNlfTtcclxuICAgICAgICAgICAgdGhyb3cgcHJvbWlzZTtcclxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvci50aGVuKSB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgICAgY2FjaGVba2V5XSA9IHt0aW1lb3V0OiBEYXRlLm5vdygpICsgY2FjaGVFeHBpcmF0aW9uLCBlcnJvcn07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBhcyBhbnk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHJ2O1xyXG59XHJcbiIsIlxyXG5leHBvcnQgY2xhc3MgUGVuZGluZ0pvYiB7XHJcbiAgcHJpdmF0ZSB0aW1lb3V0SWQgPSBudWxsO1xyXG4gIHByaXZhdGUgY2FuY2VsbGVkID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBwZW5kaW5nID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBpc0pvYkV4ZWN1dGluZyA9IGZhbHNlO1xyXG4gIHByaXZhdGUgam9iQ2FsbGJhY2s6ICgpPT5Qcm9taXNlPGFueT47XHJcbiAgXHJcbiAgY29uc3RydWN0b3IoY2FsbGJhY2s6ICgpPT5Qcm9taXNlPGFueT4pIHtcclxuICAgIHRoaXMuam9iQ2FsbGJhY2sgPSBjYWxsYmFjaztcclxuICB9XHJcblxyXG4gIHRyaWdnZXJDaGFuZ2UodGhyb3R0bGU6IG51bWJlcik6IGFueSB7XHJcbiAgICBpZiAodGhpcy5jYW5jZWxsZWQpIHJldHVybjtcclxuICAgIHRoaXMucGVuZGluZyA9IHRydWU7XHJcbiAgICBpZiAodGhpcy50aW1lb3V0SWQgIT09IG51bGwpXHJcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRJZCk7XHJcbiAgICB0aGlzLnRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCk9PnRoaXMubGF1bmNoSm9iKCksIHRocm90dGxlKTtcclxuICB9XHJcblxyXG4gIHN0b3AoKSB7XHJcbiAgICBpZiAodGhpcy50aW1lb3V0SWQgIT09IG51bGwpXHJcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRJZCk7XHJcbiAgICB0aGlzLnRpbWVvdXRJZCA9IG51bGw7XHJcbiAgICB0aGlzLmNhbmNlbGxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGxhdW5jaEpvYigpIHtcclxuICAgIGlmICh0aGlzLmNhbmNlbGxlZCkgcmV0dXJuO1xyXG4gICAgaWYgKCF0aGlzLnBlbmRpbmcpIHJldHVybjtcclxuICAgIGlmICh0aGlzLmlzSm9iRXhlY3V0aW5nKSByZXR1cm47XHJcbiAgICB0aGlzLnRpbWVvdXRJZCA9IG51bGw7XHJcbiAgICB0cnkge1xyXG4gICAgICB0aGlzLmlzSm9iRXhlY3V0aW5nID0gdHJ1ZTtcclxuICAgICAgdGhpcy5wZW5kaW5nID0gZmFsc2U7XHJcbiAgICAgIGF3YWl0IHRoaXMuam9iQ2FsbGJhY2soKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHRoaXMuaXNKb2JFeGVjdXRpbmcgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnBlbmRpbmcpXHJcbiAgICAgIGF3YWl0IHRoaXMubGF1bmNoSm9iKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBpbnRlcmZhY2UgUGFyc2VRdWVyeVN0cmluZ09wdGlvbnMge1xyXG4gIHRvTG93ZXI/OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VRdWVyeVN0cmluZyhsb2NhdGlvblNlYXJjaDogc3RyaW5nLCBvcHRpb25zPzogUGFyc2VRdWVyeVN0cmluZ09wdGlvbnMpOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9IHtcclxuICBjb25zdCB7dG9Mb3dlcn0gPSAob3B0aW9ucyB8fMKge30pIGFzIFBhcnNlUXVlcnlTdHJpbmdPcHRpb25zO1xyXG4gIGNvbnN0IHJlc3VsdCA9IHt9O1xyXG4gIGlmIChsb2NhdGlvblNlYXJjaCAmJiBsb2NhdGlvblNlYXJjaC5sZW5ndGggPiAxKVxyXG4gICAgbG9jYXRpb25TZWFyY2guc3Vic3RyKDEpXHJcbiAgICAgIC5zcGxpdCgnJicpXHJcbiAgICAgIC5tYXAocGFydCA9PiBwYXJ0LnNwbGl0KCc9JykubWFwKHMgPT4gZGVjb2RlVVJJQ29tcG9uZW50KHMudHJpbSgpKSkpXHJcbiAgICAgIC5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHJlc3VsdFt0b0xvd2VyID8ga2V5LnRvTG93ZXJDYXNlKCkgOiBrZXldID0gdmFsdWUpO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVuY29kZVBhcmFtcyhwYXJhbXM6IHtba2V5OiBzdHJpbmddOnN0cmluZ30pIHtcclxuICByZXR1cm4gT2JqZWN0LmtleXMocGFyYW1zKS5maWx0ZXIoa2V5ID0+IHBhcmFtc1trZXldICE9PSB1bmRlZmluZWQpLm1hcChrZXkgPT4gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KGtleSl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtc1trZXldKX1gKS5qb2luKCcmJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVF1ZXJ5U3RyaW5nKHBhcmFtczoge1trZXk6IHN0cmluZ106c3RyaW5nfSkge1xyXG4gIHJldHVybiBcIj9cIiArIGVuY29kZVBhcmFtcyhwYXJhbXMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VIYXNoUXVlcnlTdHJpbmcobG9jYXRpb25IYXNoOiBzdHJpbmcsIG9wdGlvbnM/OiBQYXJzZVF1ZXJ5U3RyaW5nT3B0aW9ucykge1xyXG4gIHJldHVybiBwYXJzZVF1ZXJ5U3RyaW5nKGxvY2F0aW9uSGFzaCwgb3B0aW9ucyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUhhc2hRdWVyeVN0cmluZyhwYXJhbXM6IHtba2V5OiBzdHJpbmddOnN0cmluZ30pIHtcclxuICByZXR1cm4gXCIjXCIgKyBlbmNvZGVQYXJhbXMocGFyYW1zKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0VXJsQW5kUXVlcnkgKHVybFdpdGhQb3NzaWJsZVF1ZXJ5OiBzdHJpbmcpIHtcclxuICBjb25zdCBwUXVlcnkgPSB1cmxXaXRoUG9zc2libGVRdWVyeS5pbmRleE9mKCc/Jyk7XHJcbiAgcmV0dXJuIHBRdWVyeSA+PSAwID9cclxuICAgIFt1cmxXaXRoUG9zc2libGVRdWVyeS5zdWJzdHIoMCwgcFF1ZXJ5KSwgdXJsV2l0aFBvc3NpYmxlUXVlcnkuc3Vic3RyKHBRdWVyeSldIDpcclxuICAgIFt1cmxXaXRoUG9zc2libGVRdWVyeSwgXCJcIl07XHJcbn1cclxuIiwiaW1wb3J0IGVudiwgeyBFbnYgfSBmcm9tICcuLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgY2ZnIGZyb20gJy4uL2dsb2JhbHMvS0VELmNmZyc7XHJcbmltcG9ydCB7IFVzZXIgfSBmcm9tICcuLi9jb250cmFjdHMva2VkLW1vZGVscyc7XHJcbmltcG9ydCB7IEJlYXJlclRva2VuSW5mbywgS2VkQmFja2VuZENsaWVudCwgSHR0cEVycm9yIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQgeyBFZHNDbGllbnQgfSBmcm9tICcuLi9hcGlzL2Vkc2NsaWVudCc7XHJcbmltcG9ydCB7IGlzb21vcnBoaWMsIEtlZEJhY2tlbmRDbGllbnRXZWIgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudHdlYic7XHJcbmltcG9ydCB7IEtTVGVybVBsYW5uZXJSZXBvIH0gZnJvbSAnLi4vcmVwb3Mva3MtdGVybXBsYW5uZXItcmVwbyc7XHJcbmltcG9ydCB7IEtHVGVybVBsYW5uZXJSZXBvIH0gZnJvbSAnLi4vcmVwb3Mva2ctdGVybXBsYW5uZXItcmVwbyc7XHJcbmltcG9ydCB7IFVzZXJUYXNrc1JlcG8gfSBmcm9tICcuLi9yZXBvcy91c2VyLXRhc2tzLXJlcG8nO1xyXG5pbXBvcnQgeyBSZXN0Q2xpZW50IH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RUdXRvcmVkVG9rZW5zKHVzZXJFbWFpbDogc3RyaW5nLCBkaXNwbGF5TmFtZTogc3RyaW5nKTogUHJvbWlzZTxFbnY+IHtcclxuICAvL2xldCBiZWFyZXJQcm9taXNlOiBQcm9taXNlPEJlYXJlclRva2VuSW5mbz4gfCBudWxsID0gbnVsbDtcclxuICAvL2xldCBnb29nbGVCZWFyZXJQcm9taXNlOiBQcm9taXNlPEJlYXJlclRva2VuSW5mbz4gfCBudWxsID0gbnVsbDtcclxuXHJcbiAgY29uc3QgY3VycmVudFVzZXI6IFVzZXIgPSB7XHJcbiAgICBtYWlsOiB1c2VyRW1haWwsXHJcbiAgICBkaXNwbGF5TmFtZSxcclxuICAgIHJvbGVzOiBbXCJVU0VSXCJdLFxyXG4gICAgc2Nob29sOiBlbnYuY3VycmVudFVzZXIuc2Nob29sLFxyXG4gICAgdHV0b3JGb3I6IHVzZXJFbWFpbFxyXG4gIH07XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZUJlYXJlclByb3ZpZGVyIChjbGllbnQ6IFJlc3RDbGllbnQsIHRva2VuVXJsOiBzdHJpbmcsIHF1ZXJ5Pykge1xyXG4gICAgbGV0IGJlYXJlclByb21pc2U6IFByb21pc2U8QmVhcmVyVG9rZW5JbmZvPiB8IG51bGwgPSBudWxsO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGdldEJlYXJlcigpOiBQcm9taXNlPEJlYXJlclRva2VuSW5mbz4ge1xyXG4gICAgICAgIHJldHVybiBiZWFyZXJQcm9taXNlIHx8IHRoaXMucmVmcmVzaEJlYXJlcigpO1xyXG4gICAgICB9LFxyXG4gICAgICByZWZyZXNoQmVhcmVyKCk6IFByb21pc2U8QmVhcmVyVG9rZW5JbmZvPiB7XHJcbiAgICAgICAgcmV0dXJuIChiZWFyZXJQcm9taXNlID0gcmV0cmlldmVUb2tlbigpKTtcclxuICAgICAgfSxcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBmdW5jdGlvbiByZXRyaWV2ZVRva2VuKCk6IFByb21pc2U8QmVhcmVyVG9rZW5JbmZvPiB7XHJcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGNsaWVudC5nZXQodG9rZW5VcmwsIHF1ZXJ5KTtcclxuICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgIHJldHVybiAoYXdhaXQgcmVzLmpzb24oKSkgYXMgQmVhcmVyVG9rZW5JbmZvO1xyXG4gICAgICB9XHJcbiAgICAgIHRocm93IG5ldyBIdHRwRXJyb3IocmVzLnN0YXR1cyxcclxuICAgICAgICBcIkNvdWxkIG5vdCByZXRyaWV2ZSB0dXRvciB0b2tlbiBmb3IgXCIgK1xyXG4gICAgICAgIHVzZXJFbWFpbCArXHJcbiAgICAgICAgXCIuIEVycm9yIE1lc3NhZ2U6IFwiICsgYXdhaXQgcmVzLnRleHQoKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBUaGUgbWFpbiBiZWFyZXJwcm92aWRlciB3aWxsIHJlcXVlc3QgYSB0dXRvci10b2tlbiBiYXNlZCBvbiB0aGUgdXNlcidzIG5vcm1hbCB0b2tlbi5cclxuICBjb25zdCBiZWFyZXJQcm92aWRlciA9IGNyZWF0ZUJlYXJlclByb3ZpZGVyKGVudi5rZWRCYWNrZW5kQ2xpZW50Lmh0dHAsIFwidHV0b3IvdG9rZW5cIiwge3VzZXJFbWFpbH0pO1xyXG4gIGNvbnN0IHR1dG9yZWRLZWRCYWNrZW5kQ2xpZW50ID0gbmV3IEtlZEJhY2tlbmRDbGllbnQoaXNvbW9ycGhpYywgYmVhcmVyUHJvdmlkZXIsIGNmZy5LRURfQVBJX1VSTCk7XHJcbiAgLy8gTm93LCBjcmVhdGUgYmVhcmVyIHByb3ZpZGVycyBmb3IgRURTIGFuZCBHb29nbGUgdGhhdCBnZW5lcmF0ZXMgdG9rZW4gYnkgY29udmVydGluZyB0aGUgdHV0b3ItdG9rZW5cclxuICAvLyB0byBhbiBFRFMtIG9yIEdvb2dsZSB0b2tlbjpcclxuICAvL2NvbnN0IGVkc0JlYXJlclByb3ZpZGVyID0gY3JlYXRlQmVhcmVyUHJvdmlkZXIodHV0b3JlZEtlZEJhY2tlbmRDbGllbnQuaHR0cCwgXCJ0dXRvci9jb252ZXJ0LXRva2VuL2Vkc1wiKTtcclxuICBjb25zdCBnb29nbGVUb2tlblByb3ZpZGVyID0gY3JlYXRlQmVhcmVyUHJvdmlkZXIodHV0b3JlZEtlZEJhY2tlbmRDbGllbnQuaHR0cCwgXCJ0dXRvci9jb252ZXJ0LXRva2VuL2dvb2dsZVwiKTtcclxuXHJcbiAgY29uc3QgZWRzQ2xpZW50ID0gbmV3IEVkc0NsaWVudChpc29tb3JwaGljLCBjZmcuRURTX0FQSV9VUkwsIGJlYXJlclByb3ZpZGVyLCAoKT0+dXNlckVtYWlsKTtcclxuICBcclxuICBjb25zdCB0dXRvckVudjogRW52ID0ge1xyXG4gICAgY3VycmVudFVzZXIsXHJcbiAgICBiZWFyZXJQcm92aWRlcixcclxuICAgIGVkc0NsaWVudCxcclxuICAgIGdvb2dsZVRva2VuUHJvdmlkZXIsXHJcbiAgICBrZWRCYWNrZW5kQ2xpZW50OiB0dXRvcmVkS2VkQmFja2VuZENsaWVudCxcclxuICAgIHR1dG9yZWQ6IHRydWVcclxuICB9O1xyXG4gIHR1dG9yRW52LmtzVGVybVBsYW5uZXJSZXBvID0gbmV3IEtTVGVybVBsYW5uZXJSZXBvKCgpPT50dXRvcmVkS2VkQmFja2VuZENsaWVudCwgKCk9PmN1cnJlbnRVc2VyKTtcclxuICB0dXRvckVudi5rZ1Rlcm1QbGFubmVyUmVwbyA9IG5ldyBLR1Rlcm1QbGFubmVyUmVwbygoKT0+dHV0b3JlZEtlZEJhY2tlbmRDbGllbnQsICgpPT5jdXJyZW50VXNlcik7XHJcbiAgdHV0b3JFbnYudXNlclRhc2tzUmVwbyA9IG5ldyBVc2VyVGFza3NSZXBvKCgpPT50dXRvcmVkS2VkQmFja2VuZENsaWVudCwgKCk9PmN1cnJlbnRVc2VyKTtcclxuXHJcbiAgYXdhaXQgYmVhcmVyUHJvdmlkZXIuZ2V0QmVhcmVyKCkuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiB0dXRvckVudjsgIFxyXG59XHJcbiIsImltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuaW1wb3J0IHsgVGVybSwgQWNhZGVtaWNZZWFyIH0gZnJvbSAnLi4vY29udHJhY3RzL2tlZC1tb2RlbHMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTY2hvb2xNb21lbnQge1xyXG4gIGFjYWRlbWljWWVhcjogQWNhZGVtaWNZZWFyO1xyXG4gIHRlcm06IFRlcm07XHJcbiAgd2Vlaz86IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEZpcnN0QW5kTGFzdFdlZWtPZlRlcm0odGVybTogVGVybSkge1xyXG4gIHJldHVybiB0ZXJtID09PSAnQVQnID9cclxuICAgIFszMiwgNTFdIDpcclxuICAgIFsxLCAyNV07XHJcbn1cclxuXHJcbi8vTm90IHVzZWQgYW55bW9yZVxyXG4vLyBleHBvcnQgZnVuY3Rpb24gZ2V0VGVybVN0YXJ0QW5kRW5kKG5vdzogbW9tZW50Lk1vbWVudCkgOiBtb21lbnQuTW9tZW50W10ge1xyXG4vLyAgICAgcmV0dXJuIG5vdy5tb250aCgpID49IDYgPyAvLyA2ID0gSnVseSBpbiBKUyBEYXRlcyBhbmQgaW4gbW9tZW50IGFzIHdlbGwhXHJcbi8vICAgICBbbW9tZW50KG5ldyBEYXRlKG5vdy55ZWFyKCksIDcsIDEpKSwgbW9tZW50KG5ldyBEYXRlKG5vdy55ZWFyKCksIDExLCAzMSkpXSA6IC8vIGF1ZzEgLSBkZWMzMVxyXG4vLyAgICAgW21vbWVudChuZXcgRGF0ZShub3cueWVhcigpLCAwLCAxKSksIG1vbWVudChuZXcgRGF0ZShub3cueWVhcigpLCA2LCAzMSkpXTsgLy8gamFuMSAtIGp1bHkzMVxyXG4vLyB9XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGVybVN0YXJFbmREYXRlKGRhdGU6IERhdGUsIGlzRmlyc3RUZXJtOiBib29sZWFuKTogbW9tZW50Lk1vbWVudFtdIHtcclxuICB2YXIgYWRkWWVhciA9IGRhdGUuZ2V0TW9udGgoKSA+PSA3O1xyXG4gIHZhciB0ZXJtWWVhciA9IG51bGw7XHJcblxyXG4gIGlmIChhZGRZZWFyKSB7XHJcbiAgICB0ZXJtWWVhciA9IGlzRmlyc3RUZXJtID8gZGF0ZS5nZXRGdWxsWWVhcigpIDogZGF0ZS5nZXRGdWxsWWVhcigpICsgMTtcclxuICB9IGVsc2Uge1xyXG4gICAgdGVybVllYXIgPSBpc0ZpcnN0VGVybSA/IGRhdGUuZ2V0RnVsbFllYXIoKSAtIDEgOiBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgfVxyXG5cclxuICB2YXIgdGVybVllYXJNb21lbnQgPSBtb21lbnQodGVybVllYXIudG9TdHJpbmcoKSwgXCJZWVlZXCIpO1xyXG5cclxuICBpZiAodGVybVllYXJNb21lbnQud2VlaygpICE9IDEpIHtcclxuICAgIHRlcm1ZZWFyTW9tZW50ID0gdGVybVllYXJNb21lbnQuY2xvbmUoKS5hZGQoMSwgJ3dlZWsnKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBpc0ZpcnN0VGVybSA/IFttb21lbnQodGVybVllYXJNb21lbnQuY2xvbmUoKSkud2VlaygzMikuc3RhcnRPZignd2VlaycpLCBtb21lbnQodGVybVllYXJNb21lbnQuY2xvbmUoKSkud2Vlayg1MSkuZW5kT2YoJ3dlZWsnKV0gOlxyXG4gICAgW21vbWVudCh0ZXJtWWVhck1vbWVudC5jbG9uZSgpKSwgbW9tZW50KHRlcm1ZZWFyTW9tZW50LmNsb25lKCkpLndlZWsoMjUpLmVuZE9mKCd3ZWVrJyldO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2Nob29sTW9tZW50KG06IG1vbWVudC5Nb21lbnQpOiBTY2hvb2xNb21lbnQge1xyXG4gIGNvbnN0IHRoaXNZZWFyID0gbS55ZWFyKCk7XHJcbiAgY29uc3QgaXNBdXR1bW4gPSBtLm1vbnRoKCkgPj0gNjsgLy8gZGV0ZXJtaW5lIFxyXG4gIGNvbnN0IFthdXR1bW5ZZWFyLCBzcHJpbmdZZWFyXSA9IGlzQXV0dW1uID9cclxuICAgIFt0aGlzWWVhciwgdGhpc1llYXIgKyAxXSA6XHJcbiAgICBbdGhpc1llYXIgLSAxLCB0aGlzWWVhcl07XHJcbiAgY29uc3QgYWNhZGVtaWNZZWFyID0gJycgKyBhdXR1bW5ZZWFyICsgJy8nICsgc3ByaW5nWWVhcjtcclxuICBjb25zdCB0ZXJtID0gaXNBdXR1bW4gPyAnQVQnIDogJ1NUJztcclxuICBjb25zdCB3ZWVrID0gbS53ZWVrKCk7XHJcbiAgcmV0dXJuIHsgYWNhZGVtaWNZZWFyLCB0ZXJtLCB3ZWVrIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRZZWFyKGFZZWFyOiBBY2FkZW1pY1llYXIsIG51bVllYXJzVG9BZGQ6IG51bWJlcik6IEFjYWRlbWljWWVhciB7XHJcbiAgcmV0dXJuIGFZZWFyLnNwbGl0KCcvJylcclxuICAgIC5tYXAoeWVhclN0ciA9PiBwYXJzZUludCh5ZWFyU3RyKSArIG51bVllYXJzVG9BZGQpXHJcbiAgICAubWFwKHllYXIgPT4gJycgKyB5ZWFyKVxyXG4gICAgLmpvaW4oJy8nKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG5leHRBY2FkZW1pY1llYXIoYVllYXI6IEFjYWRlbWljWWVhcik6IEFjYWRlbWljWWVhciB7XHJcbiAgcmV0dXJuIGFkZFllYXIoYVllYXIsIDEpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcHJldkFjYWRlbWljWWVhcihhWWVhcjogQWNhZGVtaWNZZWFyKTogQWNhZGVtaWNZZWFyIHtcclxuICByZXR1cm4gYWRkWWVhcihhWWVhciwgLTEpO1xyXG59XHJcbiIsImltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuaW1wb3J0IHsgU2Nob29sTW9tZW50LCBnZXRTY2hvb2xNb21lbnQsIGFkZFllYXIgfSBmcm9tICcuL3NjaG9vbC1tb21lbnQnO1xyXG5pbXBvcnQgeyBBY2FkZW1pY1llYXIsIFRlcm0gfSBmcm9tICcuLi9jb250cmFjdHMva2VkLW1vZGVscyc7XHJcbmltcG9ydCB7SW5qZWN0ZWRJbnRsfSBmcm9tICdyZWFjdC1pbnRsJztcclxuXHJcbnR5cGUgTW9tZW50ID0gbW9tZW50Lk1vbWVudDtcclxuXHJcbmZ1bmN0aW9uIGlzU2Nob29sTW9tZW50KG9iajogRGF0ZSB8IFNjaG9vbE1vbWVudCk6IG9iaiBpcyBTY2hvb2xNb21lbnQge1xyXG4gIHJldHVybiAnYWNhZGVtaWNZZWFyJyBpbiBvYmo7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTY2hvb2xUZXJtIHtcclxuICBhY2FkZW1pY1llYXI6IEFjYWRlbWljWWVhcjtcclxuICB0ZXJtOiBUZXJtO1xyXG5cclxuICBjb25zdHJ1Y3RvcihkYXRlT3JTY2hvb2xNb21lbnQ6IERhdGUgfCBTY2hvb2xNb21lbnQpIHtcclxuICAgIGNvbnN0IHNjaG9vbE1vbWVudCA9IGlzU2Nob29sTW9tZW50KGRhdGVPclNjaG9vbE1vbWVudCkgP1xyXG4gICAgICBkYXRlT3JTY2hvb2xNb21lbnQgOiBnZXRTY2hvb2xNb21lbnQobW9tZW50KGRhdGVPclNjaG9vbE1vbWVudCkpO1xyXG4gICAgdGhpcy5hY2FkZW1pY1llYXIgPSBzY2hvb2xNb21lbnQuYWNhZGVtaWNZZWFyO1xyXG4gICAgdGhpcy50ZXJtID0gc2Nob29sTW9tZW50LnRlcm07XHJcbiAgfVxyXG5cclxuICBnZXQgeWVhcigpIHtcclxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLmFjYWRlbWljWWVhclxyXG4gICAgICAgIC5zcGxpdCgnLycpW3RoaXMudGVybSA9PT0gJ0FUJyA/IDAgOiAxXSk7XHJcbiAgfVxyXG5cclxuICBuZXh0VGVybSgpIHtcclxuICAgIHJldHVybiBuZXcgU2Nob29sVGVybSh0aGlzLnRlcm0gPT09ICdBVCcgP1xyXG4gICAgICB7XHJcbiAgICAgICAgdGVybTogJ1NUJyxcclxuICAgICAgICBhY2FkZW1pY1llYXI6IHRoaXMuYWNhZGVtaWNZZWFyXHJcbiAgICAgIH0gOlxyXG4gICAgICB7XHJcbiAgICAgICAgdGVybTogJ0FUJyxcclxuICAgICAgICBhY2FkZW1pY1llYXI6IGFkZFllYXIodGhpcy5hY2FkZW1pY1llYXIsIDEpXHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJldlRlcm0oKSB7XHJcbiAgICByZXR1cm4gbmV3IFNjaG9vbFRlcm0odGhpcy50ZXJtID09PSAnQVQnID9cclxuICAgICAge1xyXG4gICAgICAgIHRlcm06ICdTVCcsXHJcbiAgICAgICAgYWNhZGVtaWNZZWFyOiBhZGRZZWFyKHRoaXMuYWNhZGVtaWNZZWFyLCAtMSlcclxuICAgICAgfSA6XHJcbiAgICAgIHtcclxuICAgICAgICB0ZXJtOiAnQVQnLFxyXG4gICAgICAgIGFjYWRlbWljWWVhcjogdGhpcy5hY2FkZW1pY1llYXJcclxuICAgICAgfSk7XHJcbiAgICBcclxuICB9XHJcblxyXG4gIHRvTG9jYWxlU3RyaW5nKGludGw6IEluamVjdGVkSW50bCwgc2hvcnRZZWFyPzogYm9vbGVhbikge1xyXG4gICAgbGV0IHllYXIgPSB0aGlzLnRlcm0gPT09ICdBVCcgP1xyXG4gICAgICB0aGlzLmFjYWRlbWljWWVhci5zcGxpdCgnLycpWzBdOlxyXG4gICAgICB0aGlzLmFjYWRlbWljWWVhci5zcGxpdCgnLycpWzFdO1xyXG5cclxuICAgIGlmIChzaG9ydFllYXIpXHJcbiAgICAgIHllYXIgPSB5ZWFyLnN1YnN0cigyKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy50ZXJtID09PSAnQVQnID8gaW50bC5mb3JtYXRNZXNzYWdlKHtpZDondGVybXBsYW5uZXIuc2Vjb25kVGVybScsIGRlZmF1bHRNZXNzYWdlOidIVCB7eWVhcn0nfSwge3llYXI6IHllYXJ9KSA6IFxyXG4gICAgaW50bC5mb3JtYXRNZXNzYWdlKHtpZDondGVybXBsYW5uZXIuZmlyc3RUZXJtJywgZGVmYXVsdE1lc3NhZ2U6J1ZUIHt5ZWFyfSd9LCB7eWVhcjogeWVhcn0pO1xyXG4gIH1cclxufVxyXG4iLCJcclxuZXhwb3J0IGZ1bmN0aW9uIGNhcGl0YWxpemVGaXJzdCAoc3RyKSB7XHJcbiAgICBmb3IgKGxldCBpPTAsIGw9c3RyLmxlbmd0aDsgaTxsOyArK2kpIHtcclxuICAgICAgICBpZiAoc3RyLmNoYXJDb2RlQXQoaSkgPCAweDIwMDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0ci5zdWJzdHIoMCwgaSkgKyBzdHJbaV0udG9Mb2NhbGVVcHBlckNhc2UoKSArIHN0ci5zdWJzdHIoaSArIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBzdHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBleHRlbmQob2JqLCBleHRlbnNpb24pIHtcclxuICAgIGlmICh0eXBlb2YgZXh0ZW5zaW9uICE9PSAnb2JqZWN0JykgcmV0dXJuIG9iajtcclxuICAgIE9iamVjdC5rZXlzKGV4dGVuc2lvbikuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgIG9ialtrZXldID0gZXh0ZW5zaW9uW2tleV07XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBvYmo7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjbG9uZTxULEU+IChvYmogOiBULCBleHRlbnNpb24/OiBFKSB7XHJcbiAgICBsZXQgY2xvbmUgPSB7fTtcclxuICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaikuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjbG9uZSwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KSk7XHJcbiAgICB9KTtcclxuICAgIGlmIChleHRlbnNpb24pIGV4dGVuZChjbG9uZSwgZXh0ZW5zaW9uKTtcclxuICAgIHJldHVybiBjbG9uZSBhcyAoVCAmIEUpO1xyXG59XHJcblxyXG5jb25zdCBjb25jYXQgPSBbXS5jb25jYXQ7XHJcbmV4cG9ydCBmdW5jdGlvbiBmbGF0dGVuPFQ+IChhIDogKFQgfCBUW10pW10pIHtcclxuICAgIHJldHVybiBjb25jYXQuYXBwbHkoW10sIGEpIGFzIFRbXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhcmVQcm9wPFQ+KHByb3A6a2V5b2YgVCkge1xyXG4gICAgcmV0dXJuIChhOiBULGI6IFQpID0+IHtcclxuICAgICAgICBjb25zdCBhUHJvcCA9IGFbcHJvcF0sIGJQcm9wID0gYltwcm9wXTtcclxuICAgICAgICByZXR1cm4gYVByb3AgPiBiUHJvcCA/IDEgOiBhUHJvcCA8IGJQcm9wID8gLTEgOiAwO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZVByb3BzKFxyXG4gICAgcHJvcHM6IHN0cmluZyB8IHN0cmluZ1tdLFxyXG4gICAgbG9jYWxlcz86IHN0cmluZyB8IHN0cmluZ1tdLFxyXG4gICAgb3B0aW9ucz86IEludGwuQ29sbGF0b3JPcHRpb25zKTogKGE6IGFueSwgYjogYW55KSA9PiBudW1iZXJcclxue1xyXG4gICAgcHJvcHMgPSBBcnJheS5pc0FycmF5KHByb3BzKSA/IHByb3BzIDogW3Byb3BzXTtcclxuXHJcbiAgICBjb25zdCBsb2NhbGVDb21wYXJlID0gKGEsYikgPT5cclxuICAgICAgICB0eXBlb2YgYSA9PT0gJ3N0cmluZycgP1xyXG4gICAgICAgICAgICBhLmxvY2FsZUNvbXBhcmUoYiwgbG9jYWxlcywgb3B0aW9ucykgOlxyXG4gICAgICAgICAgICBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogMDtcclxuXHJcbiAgICBmdW5jdGlvbiBjbXBQYXJ0IChhLGIsZmlyc3RQYXJ0OiBzdHJpbmcscmVzdDogc3RyaW5nW10pIHtcclxuICAgICAgICBjb25zdCBmaXJzdEEgPSBhW2ZpcnN0UGFydF07XHJcbiAgICAgICAgY29uc3QgZmlyc3RCID0gYltmaXJzdFBhcnRdO1xyXG4gICAgICAgIGlmIChmaXJzdEEgPT09IGZpcnN0QikgcmV0dXJuIDA7XHJcbiAgICAgICAgaWYgKGZpcnN0QSA9PSBudWxsKSByZXR1cm4gLTE7XHJcbiAgICAgICAgaWYgKGZpcnN0QiA9PSBudWxsKSByZXR1cm4gMTtcclxuICAgICAgICByZXR1cm4gcmVzdC5sZW5ndGggPT09IDAgP1xyXG4gICAgICAgICAgICBsb2NhbGVDb21wYXJlKGZpcnN0QSwgZmlyc3RCKSA6XHJcbiAgICAgICAgICAgIGNtcFBhcnQoZmlyc3RBLCBmaXJzdEIsIHJlc3RbMF0sIHJlc3Quc2xpY2UoMSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBwcm9wc1xyXG4gICAgICAgIC5tYXAocHJvcCA9PiBwcm9wLnNwbGl0KCcuJykpXHJcbiAgICAgICAgLm1hcCgoW2ZpcnN0UGFydCwgLi4ucmVzdF0pID0+IChhLGIpID0+IGNtcFBhcnQoYSxiLCBmaXJzdFBhcnQsIHJlc3QpKVxyXG4gICAgICAgIC5yZWR1Y2UoKGNtcDEsIGNtcDIpID0+XHJcbiAgICAgICAgICAgIChhLGIpID0+IGNtcDEoYSxiKSB8fCBjbXAyKGEsYikpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gTCh0ZXh0LCAuLi5hcmdzKSB7XHJcbiAgICBsZXQgZmlyc3QgPSB0ZXh0WzBdO1xyXG4gICAgcmV0dXJuIGJ1aWxkTWVzc2FnZSh0ZXh0LCBhcmdzKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYnVpbGRNZXNzYWdlICh0ZXh0LCBhcmdzKSB7XHJcbiAgICBsZXQgcnYgPSB0ZXh0WzBdO1xyXG4gICAgZm9yIChsZXQgaT0xLCBsPXRleHQubGVuZ3RoOyBpPGw7ICsraSkge1xyXG4gICAgICAgIHJ2ICs9IGFyZ3NbaS0xXSArIHRleHRbaV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcnY7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUQzxUPiB7XHJcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZTogVCkge1xyXG4gICAgICAgIGV4dGVuZCh0aGlzLCB0ZW1wbGF0ZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkYXRlVGltZVJldml2ZXIgKGtleSwgdmFsdWUpIHtcclxuICAgIHZhciBhO1xyXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICBhID0gL1xcL0RhdGVcXCgoXFxkKilcXClcXC8vLmV4ZWModmFsdWUpO1xyXG4gICAgICAgIGlmIChhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSgrYVsxXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbHVlO1xyXG59XHJcblxyXG4vL2xldCBpbmZvU2VyaWFsID0gMTtcclxuZXhwb3J0IGZ1bmN0aW9uIHNob3dJbmZvIChtc2cpIHtcclxuICAgIHZhciBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnaW5mbycsIHsgJ2RldGFpbCc6IG1zZyB9KTtcclxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3dFcnJvciAoZXJyTXNnOiBzdHJpbmcgfCBFcnJvcikge1xyXG4gICAgY29uc3QgbXNnID0gdHlwZW9mIGVyck1zZyA9PT0gJ3N0cmluZycgPyBlcnJNc2cgOiBlcnJNc2cubWVzc2FnZTtcclxuICAgIHZhciBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnY3VzdG9tZXJyb3InLCB7ICdkZXRhaWwnOiBtc2cgfSk7XHJcbiAgICBjb25zb2xlLmVycm9yKGVyck1zZyk7XHJcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYXhMZW5ndGgoc3RyOiBzdHJpbmcsIG1heExlbjogbnVtYmVyKSB7XHJcbiAgICByZXR1cm4gc3RyLmxlbmd0aCA+IG1heExlbiA/XHJcbiAgICAgICAgc3RyLnN1YnN0cigwLCBtYXhMZW4gLSAzKSArIFwiLi4uXCIgOlxyXG4gICAgICAgIHN0cjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFycmF5VG9Mb29rdXA8VD4oYTogVFtdLCBrZXlBY2Nlc3NvcjogKGl0ZW06IFQpID0+IHN0cmluZyB8IG51bWJlcikge1xyXG4gICAgY29uc3QgcmVzdWx0IDoge1trZXk6IHN0cmluZ10gOiBUW119ID0ge307XHJcbiAgICBmb3IgKGxldCBpPTAsIGw9YS5sZW5ndGg7IGk8bDsgKytpKSB7XHJcbiAgICAgICAgY29uc3QgaXRlbSA9IGFbaV07XHJcbiAgICAgICAgY29uc3Qga2V5ID0ga2V5QWNjZXNzb3IoaXRlbSk7XHJcbiAgICAgICAgbGV0IGFycmF5ID0gcmVzdWx0W2tleV07XHJcbiAgICAgICAgaWYgKGFycmF5KSBhcnJheS5wdXNoKGl0ZW0pO1xyXG4gICAgICAgIGVsc2UgcmVzdWx0W2tleV0gPSBbaXRlbV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYXJyYXlUb01hcDxUPihhOiBUW10sIGtleUFjY2Vzc29yOiAoaXRlbTogVCkgPT4gc3RyaW5nIHwgbnVtYmVyKSB7XHJcbiAgICBjb25zdCByZXN1bHQgOiB7W2tleTogc3RyaW5nXSA6IFR9ID0ge307XHJcbiAgICBmb3IgKGxldCBpPTAsIGw9YS5sZW5ndGg7IGk8bDsgKytpKSB7XHJcbiAgICAgICAgY29uc3QgaXRlbSA9IGFbaV07XHJcbiAgICAgICAgY29uc3Qga2V5ID0ga2V5QWNjZXNzb3IoaXRlbSk7XHJcbiAgICAgICAgcmVzdWx0W2tleV0gPSBpdGVtO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZXJyeVBpY2tQcm9wczxUPiAob2JqOiBULCBwcm9wc1RvUGljazogc3RyaW5nW10pOiBQYXJ0aWFsPFQ+IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xyXG4gICAgZm9yIChjb25zdCBwYXJhbSBvZiBwcm9wc1RvUGljaykge1xyXG4gICAgICBpZiAocGFyYW0gaW4gb2JqKSByZXN1bHRbcGFyYW1dID0gb2JqW3BhcmFtXTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQgYXMgUGFydGlhbDxUPjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRpc3RpbmN0PFQ+IChhOiBUW10sIGtleUFjY2Vzc29yPzogKGl0ZW06IFQpID0+IGFueSkge1xyXG4gICAgY29uc3QgbWFwID0gYXJyYXlUb01hcChhLCBrZXlBY2Nlc3NvciB8fCAoeCA9PiB4KSk7XHJcbiAgICByZXR1cm4gT2JqZWN0LmtleXMobWFwKS5tYXAoa2V5ID0+IG1hcFtrZXldKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNoYWxsb3dFcXVhbHMoYTogYW55LCBiOiBhbnkpIHtcclxuICAgIGlmIChhID09PSBiKSByZXR1cm4gdHJ1ZTtcclxuICAgIGlmICghYSB8fCAhYikgcmV0dXJuIGZhbHNlO1xyXG4gICAgaWYgKHR5cGVvZiBhICE9PSAnb2JqZWN0JyB8fCB0eXBlb2YgYiAhPT0gJ29iamVjdCcpIHJldHVybiBmYWxzZTtcclxuICAgIGNvbnN0IGtleXNBID0gT2JqZWN0LmtleXMoYSk7XHJcbiAgICBjb25zdCBrZXlzQiA9IE9iamVjdC5rZXlzKGIpO1xyXG4gICAgaWYgKGtleXNBLmxlbmd0aCAhPT0ga2V5c0IubGVuZ3RoKSByZXR1cm4gZmFsc2U7XHJcbiAgICBmb3IgKGxldCBpPTAsIGw9a2V5c0EubGVuZ3RoOyBpPGw7ICsraSkge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IGtleXNBW2ldO1xyXG4gICAgICAgIGlmIChrZXlzQltpXSAhPT0ga2V5KSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgaWYgKGFba2V5XSAhPT0gYltrZXldKSByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG4iLCJpbXBvcnQgbW9tZW50LCB7IE1vbWVudCB9IGZyb20gXCJtb21lbnRcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBLRURXZWVrICh5ZWFyOiBudW1iZXIsIHdlZWs6IG51bWJlcikge1xyXG4gIGNvbnN0IG0gPSBtb21lbnQobmV3IERhdGUoeWVhciwgMSwgMSkpLndlZWsod2Vlayk7XHJcbiAgY29uc3QgcmVzID0ge1xyXG4gICAgeWVhcixcclxuICAgIHdlZWssXHJcbiAgICBub3RCZWZvcmU6IG0uY2xvbmUoKS5zdGFydE9mKCd3ZWVrJykuYWRkKC0yLCAnZGF5cycpLnRvRGF0ZSgpLmdldFRpbWUoKSxcclxuICAgIG5vdEFmdGVyOiBtLmNsb25lKCkuc3RhcnRPZignd2VlaycpLmFkZCg1LCAnZGF5cycpLnRvRGF0ZSgpLmdldFRpbWUoKVxyXG4gIH07XHJcbiAgcmV0dXJuIHJlcztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldE5leHRXZWVrRGF0ZShkYXRlOiBNb21lbnQpOiB7IGFkanVzdGVkOiBib29sZWFuLCBuZXh0RGF0ZTogRGF0ZSB9e1xyXG4gIHZhciBuZXh0RGF0ZSA9IG1vbWVudChkYXRlKS5hZGQoMSwgJ3dlZWsnKTtcclxuICAvL1NldCB0aGUgMDEuMDEgb2YgdGhlIG5leHQgeWVhciBpbiBjYXNlIHRoZSBuZXh0IHdlZWsgaXMgaW4gdGhlIHNhbWUgeWVhciBcclxuICAvL2FuZCB0aGUgcHJldmlvdXMgd2VlayBpcyB0aGUgbGFzdCB3ZWVrIG9mIHRoZSB5ZWFyXHJcbiAgaWYoZGF0ZS53ZWVrKCkgPT09IGRhdGUud2Vla3NJblllYXIoKSAmJiBuZXh0RGF0ZS55ZWFyKCkgPT09IGRhdGUueWVhcigpKXtcclxuICAgIHJldHVybiB7YWRqdXN0ZWQ6IHRydWUsIG5leHREYXRlOiBtb21lbnQoYCR7ZGF0ZS55ZWFyKCkgKyAxfS0wMS0wMWApLnRvRGF0ZSgpfTtcclxuICB9XHJcblxyXG4gIHJldHVybiB7YWRqdXN0ZWQ6IGZhbHNlLCBuZXh0RGF0ZTogbmV4dERhdGUudG9EYXRlKCl9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UHJldldlZWtEYXRlKGRhdGU6IE1vbWVudCk6IHsgYWRqdXN0ZWQ6IGJvb2xlYW4sIG5leHREYXRlOiBEYXRlIH17XHJcbiAgdmFyIHByZXZEYXRlID0gbW9tZW50KGRhdGUpLmFkZCgtMSwgJ3dlZWsnKTtcclxuICAvL1NldCB0aGUgMDEuMDEgb2YgdGhlIGN1cnJlbnQgeWVhciBpbiBjYXNlIHRoZSBwcmV2IHdlZWsgaXMgaW4gdGhlIHByZXZpb3VzIHllYXJcclxuICBpZihkYXRlLndlZWsoKSA9PT0gMiAmJiBwcmV2RGF0ZS55ZWFyKCkgIT09IGRhdGUueWVhcigpKXtcclxuICAgIHJldHVybiB7YWRqdXN0ZWQ6IHRydWUsIG5leHREYXRlOiBtb21lbnQoYCR7ZGF0ZS55ZWFyKCl9LTAxLTAxYCkudG9EYXRlKCl9O1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHthZGp1c3RlZDogZmFsc2UsIG5leHREYXRlOiBwcmV2RGF0ZS50b0RhdGUoKX07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRBZGp1c3RlZFdlZWsobTogTW9tZW50KSB7XHJcbiAgY29uc3QgY2xvbmUgPSBtLmNsb25lKCk7XHJcbiAgcmV0dXJuIG0ud2Vla2RheSgpID49IDUgPyAvLyBMw7ZyZGFnIDAwOjAwIC8gU8O2bmRhZyAwMDowMD9cclxuICAgICAgbS53ZWVrKCkgKyAxIDogLy8gVGlsbGjDtnIgbsOkc3RhIHZlY2thXHJcbiAgICAgIG0ud2VlaygpO1xyXG59XHJcblxyXG4vKmV4cG9ydCBmdW5jdGlvbiBnZXRXZWVrTGltaXRzIChtOiBNb21lbnQpIHtcclxuICBjb25zdCBjbG9uZWRTd2VkaXNoID0gbS5jbG9uZSgpLmxvY2FsZSgnc3YnKTtcclxuICBjb25zdCBsaW1pdHMgPSB7XHJcbiAgICBub3RCZWZvcmU6IGNsb25lZFN3ZWRpc2guc3RhcnRPZignd2VlaycpLmFkZCgtMiwgJ2RheXMnKSxcclxuICAgIG5vdEFmdGVyOiBjbG9uZWRTd2VkaXNoLnN0YXJ0T2YoJ3dlZWsnKS5hZGQoNSwgJ2RheXMnKVxyXG4gIH07XHJcbn1cclxuKi9cclxuIiwiLyogKGlnbm9yZWQpICovIiwiLyogKGlnbm9yZWQpICovIiwiLyogKGlnbm9yZWQpICovIiwibW9kdWxlLmV4cG9ydHMgPSBqUXVlcnk7IiwibW9kdWxlLmV4cG9ydHMgPSBSZWFjdDsiLCJtb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NOyJdLCJzb3VyY2VSb290IjoiIn0=