var testpagesp =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/ 		var executeModules = data[2];
/******/
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 		// add entry modules from loaded chunk to deferred list
/******/ 		deferredModules.push.apply(deferredModules, executeModules || []);
/******/
/******/ 		// run deferred modules when all chunks ready
/******/ 		return checkDeferredModules();
/******/ 	};
/******/ 	function checkDeferredModules() {
/******/ 		var result;
/******/ 		for(var i = 0; i < deferredModules.length; i++) {
/******/ 			var deferredModule = deferredModules[i];
/******/ 			var fulfilled = true;
/******/ 			for(var j = 1; j < deferredModule.length; j++) {
/******/ 				var depId = deferredModule[j];
/******/ 				if(installedChunks[depId] !== 0) fulfilled = false;
/******/ 			}
/******/ 			if(fulfilled) {
/******/ 				deferredModules.splice(i--, 1);
/******/ 				result = __webpack_require__(__webpack_require__.s = deferredModule[0]);
/******/ 			}
/******/ 		}
/******/
/******/ 		return result;
/******/ 	}
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		"testpagesp": 0
/******/ 	};
/******/
/******/ 	var deferredModules = [];
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	var jsonpArray = window["webpackJsonp_name_"] = window["webpackJsonp_name_"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// add entry module to deferred list
/******/ 	deferredModules.push(["./src/test/testpage-sp.tsx","vendors"]);
/******/ 	// run deferred modules when ready
/******/ 	return checkDeferredModules();
/******/ })
/************************************************************************/
/******/ ({

/***/ "./kedbackend/KED.Backend.API/schema.json":
/*!************************************************!*\
  !*** ./kedbackend/KED.Backend.API/schema.json ***!
  \************************************************/
/*! exports provided: accessClaimDefinitions, realmClaim, specialRoles, defaultAccessClaimTypes, defaultAcl, tables, default */
/***/ (function(module) {

module.exports = {"accessClaimDefinitions":{"email":"{http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress}","role":"{http://schemas.microsoft.com/ws/2008/06/identity/claims/role}","school":"{school}","schoolRole":"{school}/{http://schemas.microsoft.com/ws/2008/06/identity/claims/role}","tutorFor":"{tutorFor}"},"realmClaim":"realm","specialRoles":{"userRole":"USER","adminRole":"ADMIN"},"defaultAccessClaimTypes":["role"],"defaultAcl":["role:USER:R"],"tables":{"branches":{"accessClaimTypes":["role","schoolRole","email"],"sharingAccessPerRole":{"USER":{"email":["*"],"schoolRole":["*"],"role":["*"]}},"relationships":{"parents":"branches","approvedChildren":"branches"}},"global":{"accessClaimTypes":["role","schoolRole"],"relationships":{"courseInstances":"courseInstances"}},"courseInstances":{"accessClaimTypes":["role","schoolRole"],"sharingAccessPerRole":{"USER":{"schoolRole":["*"],"role":["*"]}},"defaultAcl":["role:USER:R","schoolRole:{school}/EMPLOYEE:S"],"relationships":{"abilities":"abilities","centralContent":"central-content","knowledgeRequirements":"knowledge-requirements","blocks":"courseBlocks","tabs":"courseTabs"}},"courseBlocks":{"accessClaimTypes":["role","schoolRole"],"sharingAccessPerRole":{"USER":{"schoolRole":["*"],"role":["*"]}},"defaultAcl":["role:USER:R","schoolRole:{school}/EMPLOYEE:S"],"relationships":{"abilities":"abilities","centralContent":"central-content","knowledgeRequirements":"knowledge-requirements","tabs":"courseTabs","tasks":"tasks"}},"courseTabs":{"accessClaimTypes":["role","schoolRole"],"sharingAccessPerRole":{"USER":{"schoolRole":["*"],"role":["*"]}},"defaultAcl":["role:USER:R","schoolRole:{school}/EMPLOYEE:S"],"relationships":{"abilities":"abilities","centralContent":"central-content","knowledgeRequirements":"knowledge-requirements","contents":"courseContents"}},"courseContents":{"accessClaimTypes":["role","schoolRole"],"sharingAccessPerRole":{"USER":{"schoolRole":["*"],"role":["*"]}},"defaultAcl":["role:USER:R","schoolRole:{school}/EMPLOYEE:S"],"relationships":{"tasks":"tasks"}},"weekplans":{"accessClaimTypes":["email","tutorFor"],"sharingAccessPerRole":{"USER":{"email":["{email}:*","{tutorFor}:*"],"tutorFor":["{tutorFor}:*"]}},"defaultAcl":["email:{email}:S"]},"weekplans-ks":{"accessClaimTypes":["email","tutorFor"],"sharingAccessPerRole":{"USER":{"email":["{email}:*","{tutorFor}:*"],"tutorFor":["{tutorFor}:*"]}},"defaultAcl":["email:{email}:S"]},"usertasks":{"accessClaimTypes":["email","schoolRole","tutorFor"],"sharingAccessPerRole":{"USER":{"email":["{email}:*","{tutorFor}:*"],"schoolRole":["{school}/EMPLOYEE:*"],"tutorFor":["{tutorFor}:*"]}},"defaultAcl":["email:{email}:S"],"relationships":{"task":"tasks","course":"courses"}},"userhiddencourses":{"accessClaimTypes":["email"],"sharingAccessPerRole":{"USER":{"email":["{email}:*"]}},"defaultAcl":["email:{email}:S"],"relationships":{}},"usercalendarvisibility":{"accessClaimTypes":["email"],"sharingAccessPerRole":{"USER":{"email":["{email}:*"]}},"defaultAcl":["email:{email}:S"],"relationships":{}},"subjects":{"relationships":{"courseTemplates":"courses","abilities":"abilities"}},"schools":{"accessClaimTypes":["role","schoolRole"],"relationships":{"courses":"courses","activeCourses":"courses"}},"courses":{"accessClaimTypes":["role","schoolRole"],"sharingAccessPerRole":{"EMPLOYEE":{"schoolRole":["{school}/EMPLOYEE:*"],"role":["USER:R"]}},"defaultAcl":["schoolRole:{school}/EMPLOYEE:*"],"relationships":{"templateChain":"courses","centralContent":"central-content","knowledgeRequirements":"knowledge-requirements","abilities":"abilities","images":"images","tasks":"tasks"}},"tasks":{"accessClaimTypes":["role","schoolRole"],"sharingAccessPerRole":{"EMPLOYEE":{"schoolRole":["{school}/EMPLOYEE:*"],"role":["USER:R"]}},"defaultAcl":["schoolRole:{school}/EMPLOYEE:S","role:USER:R"],"relationships":{"knowledgeRequirements":"knowledge-requirements","centralContent":"central-content","abilities":"abilities"}},"images":{"accessClaimTypes":["role","schoolRole","email"],"sharingAccessPerRole":{"EMPLOYEE":{"schoolRole":["{school}/EMPLOYEE:*"],"role":["USER:R"]},"USER":{"email":["{email}:*"]}}},"central-content":{"accessClaimTypes":["role"],"defaultAcl":["role:USER:R"]},"knowledge-requirements":{"accessClaimTypes":["role"],"defaultAcl":["role:USER:R"]},"abilities":{"accessClaimTypes":["role"],"defaultAcl":["role:USER:R"]},"notes":{"accessClaimTypes":["email"],"sharingAccessPerRole":{"USER":{"email":["{email}:*"]}},"defaultAcl":["email:{email}:S"],"relationships":{}}}};

/***/ }),

/***/ "./kedbackend/client.js":
/*!******************************!*\
  !*** ./kedbackend/client.js ***!
  \******************************/
/*! exports provided: KedBearerProvider, RestClient, HttpError, KedBackendClient, BatchRunner, createUUID, avoidSimultanousCalls, getGlobalId, computePredestinatedId, simpleDigest, buf2hex, updateArray, DocumentAccess, hasAccess */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/dist/js/ked-backend-client */ "./kedbackend/js/dist/js/ked-backend-client/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBearerProvider", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["KedBearerProvider"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RestClient", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["RestClient"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HttpError", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["HttpError"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendClient", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["KedBackendClient"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BatchRunner", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["BatchRunner"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createUUID", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["createUUID"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "avoidSimultanousCalls", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["avoidSimultanousCalls"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getGlobalId", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["getGlobalId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "computePredestinatedId", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["computePredestinatedId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "simpleDigest", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["simpleDigest"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "buf2hex", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["buf2hex"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "updateArray", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["updateArray"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DocumentAccess", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["DocumentAccess"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "hasAccess", function() { return _js_dist_js_ked_backend_client__WEBPACK_IMPORTED_MODULE_0__["hasAccess"]; });



/***/ }),

/***/ "./kedbackend/clientweb.js":
/*!*********************************!*\
  !*** ./kedbackend/clientweb.js ***!
  \*********************************/
/*! exports provided: storage, WebServerBearerProvider, isomorphic, KedBackendClientWeb */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/dist/js/ked-backend-client-web */ "./kedbackend/js/dist/js/ked-backend-client-web/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "storage", function() { return _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__["storage"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "WebServerBearerProvider", function() { return _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__["WebServerBearerProvider"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isomorphic", function() { return _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__["isomorphic"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendClientWeb", function() { return _js_dist_js_ked_backend_client_web__WEBPACK_IMPORTED_MODULE_0__["KedBackendClientWeb"]; });



/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client-web/bearer-storage-sessionstorage.js":
/*!***************************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client-web/bearer-storage-sessionstorage.js ***!
  \***************************************************************************************/
/*! exports provided: BearerStorageSessionStorage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BearerStorageSessionStorage", function() { return BearerStorageSessionStorage; });
var BearerStorageSessionStorage = /** @class */ (function () {
    function BearerStorageSessionStorage() {
    }
    BearerStorageSessionStorage.prototype.save = function (id, tokenInfo) {
        sessionStorage.setItem("bearer-" + id, JSON.stringify(tokenInfo));
    };
    BearerStorageSessionStorage.prototype.load = function (id) {
        try {
            var json = sessionStorage.getItem("bearer-" + id);
            return Promise.resolve(json ? JSON.parse(json) : { token: null, expires: 0 });
        }
        catch (ex) {
            return Promise.resolve({ token: null, expires: 0 });
        }
    };
    return BearerStorageSessionStorage;
}());

//# sourceMappingURL=bearer-storage-sessionstorage.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client-web/hash-restorer.js":
/*!***********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client-web/hash-restorer.js ***!
  \***********************************************************************/
/*! exports provided: rememberHashLocation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rememberHashLocation", function() { return rememberHashLocation; });
var redirHash = sessionStorage.getItem("redir-hash");
if (redirHash)
    try {
        var _a = JSON.parse(redirHash), time = _a.time, hash = _a.hash;
        if (time && time > Date.now() - 60000) {
            sessionStorage.removeItem("redir-hash");
            location.hash = hash;
        }
    }
    catch (_) { }
function rememberHashLocation() {
    sessionStorage.setItem("redir-hash", JSON.stringify({ time: Date.now(), hash: location.hash }));
}
//# sourceMappingURL=hash-restorer.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client-web/index.js":
/*!***************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client-web/index.js ***!
  \***************************************************************/
/*! exports provided: storage, WebServerBearerProvider, isomorphic, KedBackendClientWeb */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "storage", function() { return storage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WebServerBearerProvider", function() { return WebServerBearerProvider; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isomorphic", function() { return isomorphic; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendClientWeb", function() { return KedBackendClientWeb; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ked-backend-client */ "./kedbackend/js/dist/js/ked-backend-client/index.js");
/* harmony import */ var _bearer_storage_sessionstorage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./bearer-storage-sessionstorage */ "./kedbackend/js/dist/js/ked-backend-client-web/bearer-storage-sessionstorage.js");
/* harmony import */ var _ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ked-backend-client/utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");
/* harmony import */ var _ked_model_migrator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../ked-model-migrator */ "./kedbackend/js/dist/js/ked-model-migrator/index.js");
/* harmony import */ var _hash_restorer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./hash-restorer */ "./kedbackend/js/dist/js/ked-backend-client-web/hash-restorer.js");







Object(_ked_model_migrator__WEBPACK_IMPORTED_MODULE_4__["KedModelMigratorMixin"])(_ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["KedBackendClient"].prototype);
var storage = new _bearer_storage_sessionstorage__WEBPACK_IMPORTED_MODULE_2__["BearerStorageSessionStorage"]();
var timeOfPageLoad = Date.now();
var WebServerBearerProvider = /** @class */ (function () {
    function WebServerBearerProvider(tokenPath, tokenResponseMapper, tokenId) {
        this.tokenPath = tokenPath;
        this.tokenResponseMapper = tokenResponseMapper;
        this.tokenId = tokenId;
        this.tokenInfo = { token: null, expires: 0 };
        this.getBearer = Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_3__["avoidSimultanousCalls"])(this.getBearer.bind(this));
        this.refreshBearer = Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_3__["avoidSimultanousCalls"])(this.refreshBearer.bind(this));
    }
    WebServerBearerProvider.prototype.getBearer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        if (!!this.tokenInfo.token) return [3 /*break*/, 2];
                        if (!this.tokenId) return [3 /*break*/, 2];
                        _a = this;
                        return [4 /*yield*/, storage.load(this.tokenId)];
                    case 1:
                        _a.tokenInfo = _b.sent();
                        _b.label = 2;
                    case 2:
                        if (!(this.tokenInfo.expires < Date.now())) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.refreshBearer()];
                    case 3:
                        _b.sent();
                        _b.label = 4;
                    case 4: return [2 /*return*/, this.tokenInfo];
                }
            });
        });
    };
    WebServerBearerProvider.prototype.refreshBearer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, _c, _d;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_e) {
                switch (_e.label) {
                    case 0: return [4 /*yield*/, fetch(this.tokenPath, {
                            headers: { Accept: "text/plain; application/json" },
                            redirect: 'manual',
                            cache: 'no-cache',
                            credentials: "same-origin"
                        })];
                    case 1:
                        res = _e.sent();
                        if (res.status === 302 || (!res.status && res.type === "opaqueredirect")) {
                            // User session timed out and server wants to redirect entire page to login page
                            // Time to reload current page to force a redirect of the entire page instead for
                            // just redirecting to /api/token or whatever.
                            if (Date.now() - timeOfPageLoad > 60000) { // prohibit endless loop of reloading self.
                                this.wantsRedirect = true; // So that listeners to onbeforeunload could show alternate message.
                                console.log("Redirect wanted. Reload page.");
                                Object(_hash_restorer__WEBPACK_IMPORTED_MODULE_5__["rememberHashLocation"])();
                                window.location.reload(true);
                                throw new _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"](302, "Redirected");
                            }
                        }
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = Error.bind;
                        _b = "HTTP" + res.status + " ";
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(Error, [void 0, _b + (_e.sent())]))();
                    case 3:
                        _c = this;
                        _d = this.tokenResponseMapper;
                        return [4 /*yield*/, res.text()];
                    case 4:
                        _c.tokenInfo = _d.apply(this, [_e.sent()]);
                        storage.save(this.tokenId, this.tokenInfo);
                        return [2 /*return*/, this.tokenInfo];
                }
            });
        });
    };
    return WebServerBearerProvider;
}());

var isomorphic = { fetch: fetch.bind(self), btoa: btoa.bind(self) };
var KedBackendClientWeb = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](KedBackendClientWeb, _super);
    function KedBackendClientWeb(apiBaseUrl, providerOrTokenPath, options) {
        var _this = this;
        var bearerProvider = typeof providerOrTokenPath !== 'string' ?
            providerOrTokenPath :
            new WebServerBearerProvider(providerOrTokenPath, (options && options.tokenResponseMapper) || (function (x) { return ({ token: x, expires: Date.now() + 59 * 60 * 60 }); }), options && options.tokenId);
        _this = _super.call(this, isomorphic, bearerProvider, apiBaseUrl) || this;
        return _this;
    }
    return KedBackendClientWeb;
}(_ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["KedBackendClient"]));

//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/access-control.js":
/*!********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/access-control.js ***!
  \********************************************************************/
/*! exports provided: DocumentAccess, hasAccess */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DocumentAccess", function() { return DocumentAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasAccess", function() { return hasAccess; });
var DocumentAccess = /** @class */ (function () {
    function DocumentAccess(accessClaimType, accessClaimValue, right) {
        this.accessClaimType = accessClaimType;
        this.accessClaimValue = accessClaimValue;
        this.right = right;
    }
    DocumentAccess.fromString = function (ac) {
        if (!ac)
            return null;
        var split = ac.split(':');
        if (split.length < 3)
            throw new Error("Invalid access string: " + ac);
        var claimType = DocumentAccess.unescape(split[0]);
        var claimValue = DocumentAccess.unescape(split[1]);
        var right = split[2];
        if (right !== 'R' && right !== 'W' && right !== 'S')
            throw new Error("Invalid access string: " + ac);
        return new DocumentAccess(claimType, claimValue, right);
    };
    DocumentAccess.escape = function (accessComponent) {
        return accessComponent.replace(/\%/g, "%25").replace(/\:/g, "%3A");
    };
    DocumentAccess.unescape = function (accessComponent) {
        return accessComponent.replace(/\%3A/g, ":").replace(/\%25/g, "%");
    };
    DocumentAccess.prototype.toString = function () {
        return DocumentAccess.escape(this.accessClaimType) + ":" +
            DocumentAccess.escape(this.accessClaimValue) + ":" +
            this.right;
    };
    DocumentAccess.fromStringArray = function (acl) {
        return acl
            .map(function (ac) { return DocumentAccess.fromString(ac); })
            .filter(function (ac) { return ac; });
    };
    DocumentAccess.toStringArray = function (acl) {
        return acl.map(function (ac) { return ac.toString(); });
    };
    return DocumentAccess;
}());

function hasAccess(acl, userClaims, requestedRight) {
    if (userClaims.some(function (claim) { return claim.type === 'role' && claim.value === "ADMIN"; }))
        return true;
    return acl.some(function (a) {
        return userClaims.some(function (c) {
            return a.accessClaimType === c.type &&
                a.accessClaimValue === c.value && ((a.right === 'R' && requestedRight === 'R') ||
                (a.right === 'W' && ['R', 'W'].indexOf(requestedRight) >= 0) ||
                (a.right === 'S'));
        });
    });
}
//# sourceMappingURL=access-control.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/http-error.js":
/*!****************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/http-error.js ***!
  \****************************************************************/
/*! exports provided: HttpError */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HttpError", function() { return HttpError; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");

var HttpError = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](HttpError, _super);
    function HttpError(code, message) {
        var _this = _super.call(this, "HTTP" + code + " " + message) || this;
        _this.code = code;
        _this.message = message;
        _this.name = "http" + code;
        _this.message = "HTTP" + code + " " + message;
        return _this;
    }
    return HttpError;
}(Error));

//# sourceMappingURL=http-error.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/index.js":
/*!***********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/index.js ***!
  \***********************************************************/
/*! exports provided: KedBearerProvider, RestClient, HttpError, KedBackendClient, BatchRunner, createUUID, avoidSimultanousCalls, getGlobalId, computePredestinatedId, simpleDigest, buf2hex, updateArray, DocumentAccess, hasAccess */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendClient", function() { return KedBackendClient; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BatchRunner", function() { return BatchRunner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _restclient__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./restclient */ "./kedbackend/js/dist/js/ked-backend-client/restclient.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RestClient", function() { return _restclient__WEBPACK_IMPORTED_MODULE_1__["RestClient"]; });

/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "createUUID", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["createUUID"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "avoidSimultanousCalls", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["avoidSimultanousCalls"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getGlobalId", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["getGlobalId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "computePredestinatedId", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["computePredestinatedId"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "simpleDigest", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["simpleDigest"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "buf2hex", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["buf2hex"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "updateArray", function() { return _utils__WEBPACK_IMPORTED_MODULE_2__["updateArray"]; });

/* harmony import */ var _ked_bearer_provider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ked-bearer-provider */ "./kedbackend/js/dist/js/ked-backend-client/ked-bearer-provider.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBearerProvider", function() { return _ked_bearer_provider__WEBPACK_IMPORTED_MODULE_3__["KedBearerProvider"]; });

/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./access-control */ "./kedbackend/js/dist/js/ked-backend-client/access-control.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DocumentAccess", function() { return _access_control__WEBPACK_IMPORTED_MODULE_4__["DocumentAccess"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "hasAccess", function() { return _access_control__WEBPACK_IMPORTED_MODULE_4__["hasAccess"]; });

/* harmony import */ var _http_error__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./http-error */ "./kedbackend/js/dist/js/ked-backend-client/http-error.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "HttpError", function() { return _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"]; });

/* empty/unused harmony star reexport */








;
// | 'otherFlag' | 'thirdFlag';...
var KedBackendClient = /** @class */ (function () {
    function KedBackendClient(isomorphic, bearerProvider, baseUrl) {
        this.http = new _restclient__WEBPACK_IMPORTED_MODULE_1__["RestClient"](isomorphic, baseUrl, { bearerProvider: bearerProvider });
    }
    KedBackendClient.prototype.getMyClaims = function (table, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("me/claims/" + (table || ""), null, fetchOptions)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.get = function (table, id, options, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get(table + "/" + id, options, fetchOptions)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.list = function (table, options, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var query, res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        query = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, options);
                        if (location.search.includes('useSP')) {
                            query.flags = (query.flags || []).concat(['useSP']);
                        }
                        if (options && options.mutationsOnEmpty)
                            query.mutationsOnEmpty = JSON.stringify(options.mutationsOnEmpty);
                        return [4 /*yield*/, this.http.get("" + table, query, fetchOptions)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.batch = function (reqs, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        // Reorder operations so that 'add's come first and 'delete's come last:
                        reqs = reqs.slice().sort(function (req1, req2) {
                            return req1.op === 'add' ? -1 : req2.op === 'add' ? 1 :
                                req1.op === 'delete' ? 1 : req2.op === 'delete' ? -1 : 0;
                        });
                        return [4 /*yield*/, this.http.post("batch", reqs, fetchOptions)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.do = function (scopeFn) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var runner;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        runner = new BatchRunner();
                        scopeFn(runner);
                        return [4 /*yield*/, this.batch(runner.mutationRequests)];
                    case 1: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.deleteRealm = function (realm) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.delete("realms/" + realm)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = _http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_http_error__WEBPACK_IMPORTED_MODULE_5__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    KedBackendClient.prototype.add = function (table, doc, branchId) {
        return this.do(function (r) { return r.add(table, doc); });
    };
    KedBackendClient.prototype.put = function (table, doc) {
        return this.do(function (r) { return r.put(table, doc); });
    };
    KedBackendClient.prototype.update = function (table, id, deltaDoc, branchId) {
        return this.do(function (r) { return r.update(table, id, deltaDoc, branchId); });
    };
    KedBackendClient.prototype.merge = function (branchId, targetBranchId) {
        return this.do(function (r) { return r.merge(branchId, targetBranchId); });
    };
    KedBackendClient.prototype.clearBranch = function (branchId) {
        return this.do(function (r) { return r.clearBranch(branchId); });
    };
    KedBackendClient.prototype.delete = function (table, id) {
        return this.do(function (r) { return r.delete(table, id); });
    };
    KedBackendClient.prototype.share = function (table, id, acl) {
        return this.do(function (r) { return r.share(table, id, acl); });
    };
    KedBackendClient.prototype.unshare = function (table, id, acl) {
        return this.do(function (r) { return r.unshare(table, id, acl); });
    };
    KedBackendClient.prototype.link = function (sourceTable, sourceId, targetTable, targetId, label) {
        return this.do(function (r) { return r.link(sourceTable, sourceId, targetTable, targetId, label); });
    };
    KedBackendClient.prototype.link2 = function (sourceTable, sourceId, targetId, label, branchId) {
        return this.do(function (r) { return r.link2(sourceTable, sourceId, label, targetId, branchId); });
    };
    KedBackendClient.prototype.unlink = function (sourceTable, sourceId, targetTable, targetId, label) {
        return this.do(function (r) { return r.unlink(sourceTable, sourceId, targetTable, targetId, label); });
    };
    KedBackendClient.prototype.unlink2 = function (sourceTable, sourceId, targetId, label, branchId) {
        return this.do(function (r) { return r.unlink2(sourceTable, sourceId, label, targetId, branchId); });
    };
    KedBackendClient.prototype.undoLink = function (sourceTable, sourceId, targetId, label, branchId) {
        return this.do(function (r) { return r.undoLink(sourceTable, sourceId, label, targetId, branchId); });
    };
    return KedBackendClient;
}());

var BatchRunner = /** @class */ (function () {
    function BatchRunner() {
        this.mutationRequests = [];
    }
    BatchRunner.prototype.add = function (table, doc, branchId) {
        this.mutationRequests.push({ op: 'add', table: table, doc: doc, branchId: branchId });
        return this;
    };
    BatchRunner.prototype.put = function (table, doc) {
        doc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc);
        delete doc.acl; // Forbidden to send acl with put() calls.
        this.mutationRequests.push({ op: 'put', table: table, doc: doc });
        return this;
    };
    BatchRunner.prototype.update = function (table, id, deltaDoc, branchId) {
        deltaDoc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, deltaDoc);
        this.mutationRequests.push({ op: 'update', table: table, id: id, deltaDoc: deltaDoc, branchId: branchId });
    };
    BatchRunner.prototype.merge = function (branchId, targetBranchId) {
        this.mutationRequests.push({ op: 'merge', branchId: branchId, targetBranchId: targetBranchId });
    };
    BatchRunner.prototype.clearBranch = function (branchId) {
        this.mutationRequests.push({ op: 'clear-branch', branchId: branchId });
    };
    BatchRunner.prototype.delete = function (table, id) {
        this.mutationRequests.push({ op: 'delete', table: table, id: id });
        return this;
    };
    BatchRunner.prototype.share = function (table, id, acl) {
        this.mutationRequests.push({ op: 'share', table: table, id: id, acl: acl });
        return this;
    };
    BatchRunner.prototype.unshare = function (table, id, acl) {
        this.mutationRequests.push({ op: 'unshare', table: table, id: id, acl: acl });
        return this;
    };
    BatchRunner.prototype.link = function (sourceTable, sourceId, targetTable, targetId, label) {
        this.mutationRequests.push({ op: 'link', sourceTable: sourceTable, sourceId: sourceId, targetTable: targetTable, targetId: targetId, label: label });
        return this;
    };
    BatchRunner.prototype.link2 = function (sourceTable, sourceId, label, targetId, branchId) {
        this.mutationRequests.push({ op: 'link', sourceTable: sourceTable, sourceId: sourceId, targetId: targetId, label: label, branchId: branchId });
    };
    BatchRunner.prototype.unlink = function (sourceTable, sourceId, targetTable, targetId, label) {
        this.mutationRequests.push({ op: 'unlink', sourceTable: sourceTable, sourceId: sourceId, targetTable: targetTable, targetId: targetId, label: label });
        return this;
    };
    BatchRunner.prototype.unlink2 = function (sourceTable, sourceId, label, targetId, branchId) {
        this.mutationRequests.push({ op: 'unlink', sourceTable: sourceTable, sourceId: sourceId, targetId: targetId, label: label, branchId: branchId });
        return this;
    };
    BatchRunner.prototype.undoLink = function (sourceTable, sourceId, label, targetId, branchId) {
        this.mutationRequests.push({ op: 'undo-link', sourceTable: sourceTable, sourceId: sourceId, targetId: targetId, label: label, branchId: branchId });
    };
    return BatchRunner;
}());

//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/ked-bearer-provider.js":
/*!*************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/ked-bearer-provider.js ***!
  \*************************************************************************/
/*! exports provided: KedBearerProvider */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBearerProvider", function() { return KedBearerProvider; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _restclient__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./restclient */ "./kedbackend/js/dist/js/ked-backend-client/restclient.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");



var KedBearerProvider = /** @class */ (function () {
    function KedBearerProvider(isomorphic, storage, tokenId, clientId, clientSecret, tokenUrl, tokenQuery) {
        this.isomorphic = isomorphic;
        this.storage = storage;
        this.tokenId = tokenId;
        this.clientId = clientId;
        this.clientSecret = clientSecret;
        this.tokenUrl = tokenUrl;
        this.tokenQuery = tokenQuery;
        this.tokenInfo = { token: null, expires: 0 };
        this.client = new _restclient__WEBPACK_IMPORTED_MODULE_1__["RestClient"](isomorphic, "", {
            username: this.clientId,
            password: this.clientSecret
        });
        this.getBearer = Object(_utils__WEBPACK_IMPORTED_MODULE_2__["avoidSimultanousCalls"])(this.getBearer.bind(this));
        this.refreshBearer = Object(_utils__WEBPACK_IMPORTED_MODULE_2__["avoidSimultanousCalls"])(this.refreshBearer.bind(this));
    }
    KedBearerProvider.prototype.getBearer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, token, expires, _b, e_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _a = this.tokenInfo, token = _a.token, expires = _a.expires;
                        if (token && expires >= Date.now())
                            return [2 /*return*/, this.tokenInfo];
                        _c.label = 1;
                    case 1:
                        _c.trys.push([1, 4, , 6]);
                        _b = this;
                        return [4 /*yield*/, this.storage.load(this.clientId + "/" + this.tokenId)];
                    case 2:
                        _b.tokenInfo = _c.sent();
                        if (this.tokenInfo.token && this.tokenInfo.expires >= Date.now())
                            return [2 /*return*/, this.tokenInfo];
                        return [4 /*yield*/, this.refreshBearer()];
                    case 3:
                        _c.sent();
                        return [2 /*return*/, this.tokenInfo];
                    case 4:
                        e_1 = _c.sent();
                        return [4 /*yield*/, this.refreshBearer()];
                    case 5:
                        _c.sent();
                        return [2 /*return*/, this.tokenInfo];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    KedBearerProvider.prototype.refreshBearer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, retries, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        retries = 0;
                        _c.label = 1;
                    case 1:
                        if (!(retries < 6)) return [3 /*break*/, 5];
                        console.log("Retrieving token for " + this.tokenId);
                        return [4 /*yield*/, this.client.get(this.tokenUrl, this.tokenQuery, { cache: 'reload' })];
                    case 2:
                        res = _c.sent();
                        if (res.status !== 200) {
                            console.warn("Got " + res.status + " " + res.statusText);
                            return [3 /*break*/, 4];
                        }
                        _a = this;
                        _b = {};
                        return [4 /*yield*/, res.text()];
                    case 3:
                        _a.tokenInfo = (_b.token = _c.sent(), _b.expires = Date.now() + 59 * 60 * 1000, _b);
                        console.log("Got token for " + this.tokenId + ": " + JSON.stringify(this.tokenInfo));
                        this.storage.save(this.clientId + "/" + this.tokenId, this.tokenInfo);
                        return [2 /*return*/, this.tokenInfo];
                    case 4:
                        ++retries;
                        return [3 /*break*/, 1];
                    case 5: throw new Error("Failed to retrieve token for " + JSON.stringify(this.tokenId));
                }
            });
        });
    };
    return KedBearerProvider;
}());

//# sourceMappingURL=ked-bearer-provider.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/restclient.js":
/*!****************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/restclient.js ***!
  \****************************************************************/
/*! exports provided: RestClient */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RestClient", function() { return RestClient; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");
/* harmony import */ var _observable_emitter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../observable/emitter */ "./kedbackend/js/dist/js/observable/emitter.js");
/*
declare var Buffer; // node built-in


function basicAuthHeader(username, password) {
    return "Basic " + new Buffer(username + ":" + password).toString("base64");
}
*/



var RestClient = /** @class */ (function () {
    function RestClient(isomorphic, baseUrl, options) {
        this.isomorphic = isomorphic;
        this.baseUrl = baseUrl;
        this.options = options;
        this.numOutstandingOperations = 0;
        this._status = new _observable_emitter__WEBPACK_IMPORTED_MODULE_2__["Emitter"](this);
        this.fetchOptions = { mode: 'cors' };
        this.authHeader = options.bearer ?
            "Bearer " + options.bearer :
            options.username ?
                "Basic " + isomorphic.btoa(options.username + ":" + (options.password || "")) :
                null;
        this.bearerProvider = options.bearerProvider || null;
    }
    Object.defineProperty(RestClient.prototype, "status", {
        get: function () {
            return this._status;
        },
        enumerable: true,
        configurable: true
    });
    RestClient.prototype.fetch = function (path, method, headers, query, fetchOptions) {
        var _this = this;
        ++this.numOutstandingOperations;
        this._status.dispatch(this);
        return this._fetch(path, method, headers, query, fetchOptions)
            .then(function (res) {
            --_this.numOutstandingOperations;
            _this._status.dispatch(_this);
            return res;
        }).catch(function (err) {
            --_this.numOutstandingOperations;
            _this._status.dispatch(_this);
            return Promise.reject(err);
        });
    };
    RestClient.prototype._fetch = function (path, method, headers, query, fetchOptions) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var queryStr, _a, authHeader, tokenInfo, bearerProvider, _b, _c, url, res, wwwauth, _d;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_e) {
                switch (_e.label) {
                    case 0:
                        if (fetchOptions && fetchOptions.cache === 'no-cache') {
                            // Workaround for back-button not respecting cache control in Chrome/Opera.
                            // Append a query parameter to force a cache entry
                            query = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, query, { nocache: Object(_utils__WEBPACK_IMPORTED_MODULE_1__["createUUID"])() });
                        }
                        queryStr = query && Object.keys(query).filter(function (key) { return query[key] !== undefined; }).map(function (key) {
                            return encodeURIComponent(key) +
                                "=" +
                                encodeURIComponent(query[key]);
                        })
                            .join('&');
                        _a = this, authHeader = _a.authHeader, tokenInfo = _a.tokenInfo, bearerProvider = _a.bearerProvider;
                        if (!(!authHeader && !tokenInfo && bearerProvider)) return [3 /*break*/, 2];
                        _b = this;
                        return [4 /*yield*/, bearerProvider.getBearer()];
                    case 1:
                        _b.tokenInfo = tokenInfo = _e.sent();
                        _e.label = 2;
                    case 2:
                        if (!tokenInfo) return [3 /*break*/, 5];
                        if (!(tokenInfo.expires < Date.now())) return [3 /*break*/, 4];
                        console.log("Token expired. Refresh it:");
                        _c = this;
                        return [4 /*yield*/, bearerProvider.refreshBearer()];
                    case 3:
                        _c.tokenInfo = tokenInfo = _e.sent();
                        _e.label = 4;
                    case 4:
                        authHeader = "Bearer " + tokenInfo.token;
                        _e.label = 5;
                    case 5:
                        // In one way or another, we've concluded an Authorization header to use:
                        if (authHeader) {
                            headers.Authorization = authHeader;
                        }
                        url = this.baseUrl + path + (queryStr ? "?" + queryStr : "");
                        return [4 /*yield*/, this.isomorphic.fetch(url, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.fetchOptions, { headers: headers, method: method }, fetchOptions))];
                    case 6:
                        res = _e.sent();
                        if (!(res.status == 401 && this.bearerProvider)) return [3 /*break*/, 9];
                        wwwauth = res.headers.get("www-authenticate");
                        console.log("Got " + res.status + " from " + (this.baseUrl + path));
                        if (!(wwwauth && /Bearer/i.test(wwwauth))) return [3 /*break*/, 9];
                        _d = this;
                        return [4 /*yield*/, this.bearerProvider.refreshBearer()];
                    case 7:
                        _d.tokenInfo = _e.sent();
                        headers.Authorization = "Bearer " + this.tokenInfo.token;
                        return [4 /*yield*/, this.isomorphic.fetch(url, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.fetchOptions, { headers: headers, method: method }, fetchOptions))];
                    case 8:
                        res = _e.sent();
                        _e.label = 9;
                    case 9: return [2 /*return*/, res];
                }
            });
        });
    };
    RestClient.prototype.get = function (path, query, fetchOptions) {
        return this.fetch(path, "GET", { Accept: "application/json; text/plain" }, query, fetchOptions);
    };
    RestClient.prototype.post = function (path, data, fetchOptions) {
        return this.fetch(path, "POST", {
            "Content-Type": "application/json",
            "Accept": "application/json"
        }, null, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, fetchOptions, { body: JSON.stringify(data) }));
    };
    RestClient.prototype.delete = function (path, query, body, fetchOptions) {
        return this.fetch(path, "DELETE", { Accept: "application/json; text/plain" }, query, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, fetchOptions, { body: body }));
    };
    return RestClient;
}());

//# sourceMappingURL=restclient.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-client/utils.js":
/*!***********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-client/utils.js ***!
  \***********************************************************/
/*! exports provided: createUUID, avoidSimultanousCalls, getGlobalId, computePredestinatedId, simpleDigest, buf2hex, updateArray */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createUUID", function() { return createUUID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "avoidSimultanousCalls", function() { return avoidSimultanousCalls; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getGlobalId", function() { return getGlobalId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computePredestinatedId", function() { return computePredestinatedId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "simpleDigest", function() { return simpleDigest; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "buf2hex", function() { return buf2hex; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateArray", function() { return updateArray; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");

function createUUID() {
    // Decent solution from http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript
    var d = Date.now();
    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
        var r = (d + Math.random() * 16) % 16 | 0;
        d = Math.floor(d / 16);
        return (c === 'x' ? r : (r & 0x7 | 0x8)).toString(16);
    });
    return uuid;
}
function avoidSimultanousCalls(method) {
    var ongoingPromise = null;
    return function () {
        if (!ongoingPromise) {
            ongoingPromise = method.apply(this, arguments).then(function (result) {
                ongoingPromise = null;
                return result;
            });
        }
        return ongoingPromise;
    };
}
function getGlobalId(realm) {
    var prefix = 'ec96b3be-45fc-41d3-b69e-';
    var pad = ['50', '08', 'e1', '40', 'e4', 'e7'];
    if (realm.length > 6)
        throw new Error("Too long realm");
    for (var i = 0; i < realm.length; ++i) {
        var hex = realm.charCodeAt(i).toString(16);
        pad[i] = hex.length === 2 ?
            hex :
            '0' + hex;
    }
    return prefix + pad.join('');
}
function computePredestinatedId(input) {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var encoder, data, digest, _a, i;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
            switch (_b.label) {
                case 0:
                    encoder = new TextEncoder();
                    data = encoder.encode(input);
                    _a = Uint8Array.bind;
                    return [4 /*yield*/, crypto.subtle.digest('SHA-256', data)];
                case 1:
                    digest = new (_a.apply(Uint8Array, [void 0, _b.sent()]))();
                    i = 0;
                    return [2 /*return*/, 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
                            var nibble = digest[i++] % 16 | 0;
                            var washedNibble = c === 'x' ?
                                nibble :
                                nibble & 0x7 | 0x8;
                            return washedNibble.toString(16);
                        })];
            }
        });
    });
}
function simpleDigest(input) {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var encoder, inputBytes, digestBytes, _a;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
            switch (_b.label) {
                case 0:
                    encoder = new TextEncoder();
                    inputBytes = encoder.encode(input);
                    _a = Uint8Array.bind;
                    return [4 /*yield*/, crypto.subtle.digest('SHA-256', inputBytes)];
                case 1:
                    digestBytes = new (_a.apply(Uint8Array, [void 0, _b.sent(), 0, 16]))();
                    return [2 /*return*/, buf2hex(digestBytes)];
            }
        });
    });
}
function buf2hex(buffer) {
    return Array.prototype.map.call(buffer, function (x) { return ('00' + x.toString(16)).slice(-2); }).join('');
}
function updateArray(a, mapper) {
    var retval = a;
    for (var i = 0, l = a.length; i < l; ++i) {
        var t = a[i];
        var mapped = mapper(t);
        if (mapped !== t) {
            if (retval === a)
                retval = a.slice();
            retval[i] = mapped;
        }
    }
    return retval;
}
/*
export function updateArray<T>(a: T[], mapper: (t: T) => T | false): T[] {
  let retval = a;
  let j = 0;
  for (let i=0,l=a.length; i<l; ++i, ++j) {
    const t = a[i];
    const mapped = mapper(t);
    if (mapped === false) {
      // Mapper wants to delete this doc.
      if (retval === a) retval = a.slice();
      retval.splice(j, 1);
      --j; // compensate for ++j
    } else if (mapped !== t) {
      if (retval === a) retval = a.slice();
      retval[j] = mapped;
    }
  }
  return retval;
}
*/ 
//# sourceMappingURL=utils.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/cache-bust.js":
/*!**************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/cache-bust.js ***!
  \**************************************************************/
/*! exports provided: CacheBust */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CacheBust", function() { return CacheBust; });
/* harmony import */ var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json");
var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json", 1);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-repo/utils.js");


var CacheBust = /** @class */ (function () {
    function CacheBust() {
    }
    CacheBust.getCacheBust = function (table, query, user, includes) {
        var involvedItems = CacheBust.getInvolvedItems(table, query, includes);
        return involvedItems
            .map(function (item) { return localStorage.getItem("cache-bust-" + user + "-" + item); })
            .filter(function (value) { return !!value; })
            .join('/') || 'static';
    };
    CacheBust.invalidateCache = function (reqs, user) {
        for (var _i = 0, _a = CacheBust.getCacheInvalidations(reqs); _i < _a.length; _i++) {
            var item = _a[_i];
            localStorage.setItem("cache-bust-" + user + "-" + item, '' + Date.now());
        }
    };
    CacheBust.getInvolvedItems = function (table, query, includes) {
        var hasEdgesFrom = query.hasEdgesFrom;
        var relatedTables = includes
            .map(function (label) { return kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_0__["tables"][table].relationships[label]; })
            .filter(function (table) { return !!table; });
        if (hasEdgesFrom)
            relatedTables.push("hef" + table);
        return [table, 'master', query.branchId].filter(function (x) { return !!x; }).concat(relatedTables).sort();
    };
    CacheBust.getCacheInvalidations = function (reqs) {
        var invalidationSet = {};
        reqs.forEach(function (req) {
            switch (req.op) {
                case 'add':
                case 'put':
                case 'delete':
                case 'update':
                    invalidationSet[req.table] = true;
                    break;
                case 'link':
                case 'unlink':
                case 'undo-link':
                    invalidationSet[req.sourceTable] = true;
                    invalidationSet["hef-" + Object(_utils__WEBPACK_IMPORTED_MODULE_1__["getTableFromLabel"])(req.sourceTable, req.label)] = true;
                    break;
                case 'clear-branch':
                    invalidationSet[req.branchId] = true;
                    break;
                case 'merge':
                    invalidationSet[req.branchId] = true;
                    invalidationSet[req.targetBranchId || "master"] = true;
                    break;
            }
        });
        return Object.keys(invalidationSet);
    };
    return CacheBust;
}());

//# sourceMappingURL=cache-bust.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/delta-collection/apply-mutations-on-deltas.js":
/*!**********************************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/delta-collection/apply-mutations-on-deltas.js ***!
  \**********************************************************************************************/
/*! exports provided: applyMutationsOnDeltas */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "applyMutationsOnDeltas", function() { return applyMutationsOnDeltas; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _delta_merge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../delta-merge */ "./kedbackend/js/dist/js/ked-backend-repo/delta-merge.js");


function applyMutationsOnDeltas(branchId, deltas, mutations, optimistic, userDisplayName, hasAdditionalFilter) {
    var _loop_1 = function (m) {
        switch (m.op) {
            case 'add-related':
                //
                // AddRelated RepoMutation
                //
                if (!hasAdditionalFilter && m.branchId === branchId) {
                    deltas = [{
                            type: 'add',
                            sourceId: m.id,
                            targetId: m.relatedDoc.id,
                            label: m.graphProp,
                            sourceTable: m.table,
                            $meta: optimistic ? 'adding' : 'persisted',
                            dateTime: Date.now(),
                            targetName: m.relatedDoc.name,
                            contributor: userDisplayName
                        }].concat(deltas);
                }
                break;
            case 'clear-branch':
                //
                // ClearBranch RepoMutation
                //
                if (m.branchId === branchId) {
                    deltas = [];
                }
                break;
            case 'delete':
                //
                // Delete RepoMutation
                //
                // This type of mutation can not be performed onto branches. There's no branchId property on m.
                break;
            case 'merge':
                //
                // Merge RepoMutation
                //
                if (m.branchId === branchId) {
                    deltas = [];
                }
                else if (m.targetBranchId === branchId) {
                    // This change will append new deltas to our deltas array but we don't know what would come.
                    // Need to refetch from server.
                    if (!optimistic)
                        return { value: null }; // Caller should check for null and re-fetch data from server.
                }
                break;
            case 'remove-related':
                //
                // Remove-Related RepoMutation
                //
                if (hasAdditionalFilter || m.branchId !== branchId)
                    return "continue";
                deltas = [{
                        type: 'remove',
                        sourceId: m.id,
                        targetId: m.relatedDoc.id,
                        targetName: m.relatedDoc.name,
                        label: m.graphProp,
                        sourceTable: m.table,
                        contributor: userDisplayName,
                        dateTime: Date.now(),
                        $meta: optimistic ? 'adding' : 'persisted'
                    }].concat(deltas);
                break;
            case 'undo-link':
                //
                // Undo-Link RepoMutation
                //
                if (m.branchId !== branchId)
                    return "continue";
                {
                    var idx = deltas.findIndex(function (d) {
                        return (d.type === 'add' || d.type === 'remove' || d.type === 'undo-link') &&
                            d.sourceId === m.id &&
                            d.targetId === m.relatedId;
                    });
                    if (idx < 0)
                        return "continue";
                    // Found an "add" or "remove" delta to change:
                    if (optimistic) {
                        var deltaRelation = deltas[idx];
                        // Mark the existing add/remove delta as currenlty being deleted
                        deltas = deltas.slice(0, idx).concat([
                            tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, deltaRelation, { $meta: optimistic ? 'removing' : 'persisted' })
                        ], deltas.slice(idx + 1));
                    }
                    else {
                        // Persisted. Just remove it:
                        deltas = deltas.slice(0, idx).concat(deltas.slice(idx + 1));
                    }
                }
                break;
            case 'update':
                //
                // Update RepoMutation
                //
                if (m.branchId !== branchId)
                    return "continue";
                {
                    var idx = deltas.findIndex(function (delta) {
                        return delta.type === 'modify' &&
                            delta.targetId === m.id;
                    });
                    if (idx < 0 && !hasAdditionalFilter) {
                        deltas = [{
                                type: 'modify',
                                table: m.table,
                                targetId: m.id,
                                targetName: m.targetName,
                                data: m.deltaDoc,
                                dateTime: Date.now(),
                                contributors: [userDisplayName],
                                $meta: optimistic ? 'adding' : 'persisted',
                            }].concat(deltas);
                    }
                    else {
                        var existingDeltaDoc = deltas[idx];
                        var contributors = existingDeltaDoc.contributors.slice();
                        if (!contributors.includes(userDisplayName)) {
                            contributors.push(userDisplayName);
                        }
                        var newData = Object(_delta_merge__WEBPACK_IMPORTED_MODULE_1__["mergeDeltas"])(existingDeltaDoc.data, m.deltaDoc, { removeUnsetProps: true });
                        if (!optimistic && Object.keys(newData).length === 0) {
                            // Committed mutation that resets a deltaDoc. Remove the deltaDoc entirely:
                            deltas = deltas.slice(0, idx).concat(deltas.slice(idx + 1));
                        }
                        else {
                            // 
                            deltas = [
                                {
                                    type: 'modify',
                                    table: m.table,
                                    targetId: m.id,
                                    targetName: m.targetName,
                                    data: newData,
                                    dateTime: Date.now(),
                                    contributors: contributors,
                                    $meta: optimistic ? 'updating' : 'persisted',
                                }
                            ].concat(deltas.slice(0, idx), deltas.slice(idx + 1));
                        }
                    }
                }
                break;
        }
    };
    for (var _i = 0, mutations_1 = mutations; _i < mutations_1.length; _i++) {
        var m = mutations_1[_i];
        var state_1 = _loop_1(m);
        if (typeof state_1 === "object")
            return state_1.value;
    }
    return deltas;
}
//# sourceMappingURL=apply-mutations-on-deltas.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/delta-collection/delta-cache.js":
/*!********************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/delta-collection/delta-cache.js ***!
  \********************************************************************************/
/*! exports provided: DeltaCache */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeltaCache", function() { return DeltaCache; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../ked-backend-client */ "./kedbackend/js/dist/js/ked-backend-client/index.js");
/* harmony import */ var _apply_mutations_on_deltas__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./apply-mutations-on-deltas */ "./kedbackend/js/dist/js/ked-backend-repo/delta-collection/apply-mutations-on-deltas.js");



var DeltaCache = /** @class */ (function () {
    function DeltaCache(getClient, getUser, getUserDisplayName) {
        this.getClient = getClient;
        this.getUser = getUser;
        this.getUserDisplayName = getUserDisplayName;
        this.lookup = {};
    }
    DeltaCache.prototype.applyMutations = function (mutations, _a) {
        var optimistic = (_a === void 0 ? { optimistic: false } : _a).optimistic;
        // Apply mutations locally onto the DeltaCache and notify their subscribers
        for (var _i = 0, _b = Object.keys(this.lookup); _i < _b.length; _i++) {
            var queryKey = _b[_i];
            var cacheEntry = this.lookup[queryKey];
            if (cacheEntry.value) {
                // Instead here: Store the mutations on cacheEntry. No matter if it yet has value or not.
                // Then apply mutation whenever subscribing! (Better handling of mutations that arrives before fetch() is done)
                // (See how I handle this in query-set.ts)
                var newValue = Object(_apply_mutations_on_deltas__WEBPACK_IMPORTED_MODULE_2__["applyMutationsOnDeltas"])(cacheEntry.query.branchId, cacheEntry.value, mutations, optimistic, this.getUserDisplayName(), !!cacheEntry.query.tags);
                if (newValue === null) {
                    // The mutation requires cacheEntry to be refetched from server
                    if (!optimistic) {
                        // Caller has successfully performed the mutations and got success back from server.
                        // It's ok to refetch the deltas from server now:
                        cacheEntry.fetch();
                        // After fetch completes, it will notify the subscribers.
                    }
                }
                if (newValue !== cacheEntry.value) {
                    cacheEntry.optimisticValue = newValue;
                    if (!optimistic)
                        cacheEntry.value = newValue;
                    cacheEntry.notify(newValue);
                }
            }
        }
    };
    DeltaCache.prototype.subscribe = function (query, observer) {
        var _this = this;
        var cacheEntry = this.lookup[query.branchId + query.tags];
        if (!cacheEntry) {
            cacheEntry = new DeltaCacheEntry(this.getClient(), query);
            this.lookup[query.branchId + query.tags] = cacheEntry;
        }
        if (cacheEntry.cleanupTimer) {
            clearTimeout(cacheEntry.cleanupTimer);
            cacheEntry.cleanupTimer = null;
        }
        var subscription = {
            unsubscribe: function () {
                cacheEntry.subscribers = cacheEntry.subscribers.filter(function (_a) {
                    var o = _a.observer;
                    return o !== observer;
                });
                if (cacheEntry.subscribers.length === 0) {
                    cacheEntry.cleanupTimer = setTimeout(function () {
                        if (cacheEntry.subscribers.length === 0) {
                            delete _this.lookup[query.branchId + query.tags];
                        }
                    }, 100);
                }
            }
        };
        cacheEntry.subscribers.push({ observer: observer, subscription: subscription });
        if (cacheEntry.value) {
            // Value has been successfully retrieved already. Pick from cache.
            observer(cacheEntry.optimisticValue || cacheEntry.value, null, subscription);
        }
        else if (cacheEntry.isFetching) {
            // A value is on its way. Sit back and relax. All registered
            // observers (including this one) will be notified when data arrives
            // or fails.
        }
        else if (cacheEntry.error) {
            observer(null, cacheEntry.error, subscription);
        }
        else {
            cacheEntry.fetch();
        }
        return subscription;
    };
    return DeltaCache;
}());

var DeltaCacheEntry = /** @class */ (function () {
    function DeltaCacheEntry(client, query) {
        this.fetchOperationId = 0; // Makes sure a re-fetch will discard the result from any ongoing fetch.
        this.client = client;
        this.query = query;
        this.value = null;
        this.error = null;
        this.optimisticValue = null;
        this.subscribers = [];
        this.isFetching = false;
        this.cleanupTimer = null;
    }
    DeltaCacheEntry.prototype.fetch = function () {
        var _this = this;
        var fetchOperationId = ++this.fetchOperationId;
        this.isFetching = true;
        this.fetchFromServer().then(function (value) {
            // Success
            if (fetchOperationId === _this.fetchOperationId) {
                _this.isFetching = false;
                value.sort(function (a, b) { return b.dateTime - a.dateTime; }); // Latest first
                _this.value = value;
                _this.optimisticValue = value;
                _this.notify(value);
            }
        }).catch(function (error) {
            // Fail
            if (fetchOperationId === _this.fetchOperationId) {
                _this.isFetching = false;
                _this.error = error;
                _this.fail(error);
            }
        });
    };
    DeltaCacheEntry.prototype.fetchFromServer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        if (!this.query.branchId)
                            throw new Error('Deltas only available on branches');
                        return [4 /*yield*/, this.client.http.get('deltas', this.query)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status >= 300 || res.status < 200)) return [3 /*break*/, 3];
                        _a = _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(_ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4: return [2 /*return*/, _c.sent()];
                }
            });
        });
    };
    DeltaCacheEntry.prototype.notify = function (value) {
        for (var _i = 0, _a = this.subscribers; _i < _a.length; _i++) {
            var _b = _a[_i], observer = _b.observer, subscription = _b.subscription;
            observer(value, null, subscription);
        }
    };
    DeltaCacheEntry.prototype.fail = function (error) {
        var copy = this.subscribers.slice();
        this.subscribers = [];
        for (var _i = 0, copy_1 = copy; _i < copy_1.length; _i++) {
            var _a = copy_1[_i], observer = _a.observer, subscription = _a.subscription;
            observer(null, error, subscription);
        }
    };
    return DeltaCacheEntry;
}());
//# sourceMappingURL=delta-cache.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/delta-collection/delta-collection.js":
/*!*************************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/delta-collection/delta-collection.js ***!
  \*************************************************************************************/
/*! exports provided: DeltaCollection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeltaCollection", function() { return DeltaCollection; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../observable */ "./kedbackend/js/dist/js/observable/index.js");


var DeltaCollection = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](DeltaCollection, _super);
    function DeltaCollection(deltaCache, query) {
        var _this = _super.call(this, function (observer) { return _this.deltaCache.subscribe(query, observer); }) || this;
        _this.deltaCache = deltaCache;
        _this.query = query;
        return _this;
    }
    DeltaCollection.prototype.tags = function () {
        var tags = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            tags[_i] = arguments[_i];
        }
        return new DeltaCollection(this.deltaCache, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.query, { tags: tags }));
    };
    return DeltaCollection;
}(_observable__WEBPACK_IMPORTED_MODULE_1__["Collection"]));

//# sourceMappingURL=delta-collection.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/delta-merge.js":
/*!***************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/delta-merge.js ***!
  \***************************************************************/
/*! exports provided: applyDelta, mergeDeltas */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "applyDelta", function() { return applyDelta; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mergeDeltas", function() { return mergeDeltas; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");

function applyDelta(doc, delta) {
    var keys = Object.keys(delta);
    var targetDoc = doc;
    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {
        var key = keys_1[_i];
        if (targetDoc === doc)
            targetDoc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc);
        var val = delta[key];
        if (val && typeof val === 'object') {
            var metaInstructions = Object.keys(val)
                .filter(function (key) { return key.startsWith('$'); });
            if (metaInstructions.length > 0) {
                var _loop_1 = function (mi) {
                    var miValue = val[mi];
                    switch (mi) {
                        case "$unset": {
                            // Do nothing on target doc!
                            targetDoc.$wasUnset = true; // Just mark it for re-retrieval after successful posting changes.
                            break;
                        }
                        case "$add": {
                            var valuesToAdd = miValue;
                            if (!Array.isArray(valuesToAdd)) {
                                throw new Error("$add instruction must contain array");
                            }
                            var targetArray = targetDoc[key];
                            if (!Array.isArray(targetArray)) {
                                targetArray = [];
                            }
                            else {
                                targetArray = targetArray.slice(); // On JS side, we must be immutable
                            }
                            targetDoc[key] = targetArray;
                            for (var _i = 0, valuesToAdd_1 = valuesToAdd; _i < valuesToAdd_1.length; _i++) {
                                var v = valuesToAdd_1[_i];
                                if (!targetArray.includes(v)) { // avoid dups
                                    targetArray.push(v);
                                }
                            }
                            break;
                        }
                        case "$remove": {
                            var valuesToRemove_1 = miValue;
                            if (!Array.isArray(valuesToRemove_1)) {
                                throw new Error("$remove instruction must contain array");
                            }
                            var targetArray = targetDoc[key];
                            if (!Array.isArray(targetArray)) {
                                targetArray = [];
                            }
                            targetDoc[key] = targetArray.filter(function (t) { return !valuesToRemove_1.includes(t); });
                            break;
                        }
                    }
                };
                for (var _a = 0, metaInstructions_1 = metaInstructions; _a < metaInstructions_1.length; _a++) {
                    var mi = metaInstructions_1[_a];
                    _loop_1(mi);
                }
                continue;
            }
        }
        targetDoc[key] = val;
    }
    return targetDoc;
}
// {name: "Ulla"}, {name: {$unset:0}
// {tags: {$add: "hej"}}, {tags: {$unset:0}"}
function mergeDeltas(delta1, delta2, _a) {
    var removeUnsetProps = (_a === void 0 ? { removeUnsetProps: false } : _a).removeUnsetProps;
    //return {...delta1, ...delta2};
    var keys = Object.keys(delta2);
    var targetDelta = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, delta1);
    for (var _i = 0, keys_2 = keys; _i < keys_2.length; _i++) {
        var key = keys_2[_i];
        var val = delta2[key];
        if (val && typeof val === 'object') {
            var metaInstructions = Object.keys(val)
                .filter(function (key) { return key.startsWith('$'); });
            if (metaInstructions.length > 0) {
                var _loop_2 = function (mi) {
                    var miValue = val[mi];
                    switch (mi) {
                        case "$unset": {
                            if (removeUnsetProps) {
                                delete targetDelta[key];
                            }
                            else {
                                // No matter if targetDelta is empty or has value. Set it to {$unset:0}
                                // to make sure the very end result will have {$unset:0}
                                targetDelta[key] = { $unset: 0 };
                            }
                            break;
                        }
                        case "$add": {
                            var valuesToAdd_2 = miValue;
                            if (!Array.isArray(valuesToAdd_2)) {
                                throw new Error("$add instruction must contain array");
                            }
                            var targetMetaProp = targetDelta[key];
                            targetMetaProp = targetMetaProp ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, targetMetaProp) : {};
                            targetDelta[key] = targetMetaProp;
                            // First, just check if target metaProp has {$remove: [...items]}
                            // If so, remove any equal items from there before merging the {$add: [...]} arrays.
                            var targetRemoveArray = targetMetaProp.$remove;
                            if (Array.isArray(targetRemoveArray)) {
                                targetMetaProp.$remove =
                                    targetRemoveArray.filter(function (t) { return !valuesToAdd_2.includes(t); });
                                if (targetMetaProp.$remove.length === 0) {
                                    // If $remove array became emtpy. Remove the $remove prop.
                                    delete targetMetaProp.$remove;
                                }
                            }
                            // Now it's time to merge or create target $add array.
                            var targetAddArray = targetMetaProp.$add;
                            targetAddArray = targetAddArray ? targetAddArray.concat(valuesToAdd_2) : valuesToAdd_2.slice();
                            targetMetaProp.$add = targetAddArray;
                            break;
                        }
                        case "$remove": {
                            var valuesToRemove_2 = miValue;
                            if (!Array.isArray(valuesToRemove_2)) {
                                throw new Error("$remove instruction must contain array");
                            }
                            var targetMetaProp = targetDelta[key];
                            targetMetaProp = targetMetaProp ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, targetMetaProp) : {};
                            targetDelta[key] = targetMetaProp;
                            // First, just check if target metaProp has {$add: [...items]}
                            // If so, remove any equal items from there before merging the {$remove: [...]} arrays.
                            var targetAddArray = targetMetaProp.$remove;
                            if (Array.isArray(targetAddArray)) {
                                targetMetaProp.$add =
                                    targetAddArray.filter(function (t) { return !valuesToRemove_2.includes(t); });
                                if (targetMetaProp.$add.length === 0) {
                                    // If $add array became emtpy. Remove the $add prop.
                                    delete targetMetaProp.$add;
                                }
                            }
                            // Now it's time to merge or create target $remove array.
                            var targetRemoveArray = targetMetaProp.$remove;
                            targetRemoveArray = targetRemoveArray ? targetRemoveArray.concat(valuesToRemove_2) : valuesToRemove_2.slice();
                            targetMetaProp.$remove = targetRemoveArray;
                            break;
                        }
                    }
                };
                for (var _b = 0, metaInstructions_2 = metaInstructions; _b < metaInstructions_2.length; _b++) {
                    var mi = metaInstructions_2[_b];
                    _loop_2(mi);
                }
                continue;
            }
        }
        targetDelta[key] = val;
    }
    return targetDelta;
}
//# sourceMappingURL=delta-merge.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/index.js":
/*!*********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/index.js ***!
  \*********************************************************/
/*! exports provided: KedBackendCollection, KedBackendQuery, KedBackendRepo, KedBackendSubscription, KedBackendWriter, MutationQueue, QuerySet, mixin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _kedbackend_collection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./kedbackend-collection */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-collection.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendCollection", function() { return _kedbackend_collection__WEBPACK_IMPORTED_MODULE_0__["KedBackendCollection"]; });

/* harmony import */ var _kedbackend_query__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./kedbackend-query */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-query.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendQuery", function() { return _kedbackend_query__WEBPACK_IMPORTED_MODULE_1__["KedBackendQuery"]; });

/* harmony import */ var _kedbackend_repo__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./kedbackend-repo */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-repo.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendRepo", function() { return _kedbackend_repo__WEBPACK_IMPORTED_MODULE_2__["KedBackendRepo"]; });

/* harmony import */ var _kedbackend_subscription__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./kedbackend-subscription */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-subscription.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendSubscription", function() { return _kedbackend_subscription__WEBPACK_IMPORTED_MODULE_3__["KedBackendSubscription"]; });

/* harmony import */ var _kedbackend_writer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./kedbackend-writer */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-writer.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendWriter", function() { return _kedbackend_writer__WEBPACK_IMPORTED_MODULE_4__["KedBackendWriter"]; });

/* harmony import */ var _mutation_queue__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./mutation-queue */ "./kedbackend/js/dist/js/ked-backend-repo/mutation-queue.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MutationQueue", function() { return _mutation_queue__WEBPACK_IMPORTED_MODULE_5__["MutationQueue"]; });

/* harmony import */ var _query_set__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./query-set */ "./kedbackend/js/dist/js/ked-backend-repo/query-set.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "QuerySet", function() { return _query_set__WEBPACK_IMPORTED_MODULE_6__["QuerySet"]; });

/* harmony import */ var _observable_mixin__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../observable/mixin */ "./kedbackend/js/dist/js/observable/mixin.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "mixin", function() { return _observable_mixin__WEBPACK_IMPORTED_MODULE_7__["mixin"]; });









//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-collection.js":
/*!*************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/kedbackend-collection.js ***!
  \*************************************************************************/
/*! exports provided: KedBackendCollection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendCollection", function() { return KedBackendCollection; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ked-backend-client */ "./kedbackend/js/dist/js/ked-backend-client/index.js");
/* harmony import */ var _kedbackend_subscription__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./kedbackend-subscription */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-subscription.js");
/* harmony import */ var _cache_bust__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./cache-bust */ "./kedbackend/js/dist/js/ked-backend-repo/cache-bust.js");
/* harmony import */ var _kedbackend_query__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./kedbackend-query */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-query.js");
/* harmony import */ var _observable_collection__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../observable/collection */ "./kedbackend/js/dist/js/observable/collection.js");






/**
 * Represents a "live" query against a table or filtered table.
 */
var KedBackendCollection = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](KedBackendCollection, _super);
    function KedBackendCollection(repo, table, query) {
        var _this = _super.call(this, function (observer) {
            var subscription = new _kedbackend_subscription__WEBPACK_IMPORTED_MODULE_2__["KedBackendSubscription"](observer, _this);
            _this.repo.querySet.subscribe(subscription);
            return subscription;
        }) || this;
        _this.repo = repo;
        _this.table = table;
        _this.query = query;
        return _this;
    }
    Object.defineProperty(KedBackendCollection.prototype, "queryKey", {
        get: function () {
            return _kedbackend_query__WEBPACK_IMPORTED_MODULE_4__["KedBackendQuery"].queryKey(this.table, this.query);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(KedBackendCollection.prototype, "includes", {
        get: function () {
            return this._includes || (this._includes = [].concat(this.query.include || []));
        },
        enumerable: true,
        configurable: true
    });
    KedBackendCollection.prototype.applyQuery = function (query) {
        return new KedBackendCollection(this.repo, this.table, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.query, query));
    };
    KedBackendCollection.prototype.addToQueryArrayProp = function (arrayProp, entries) {
        var _a;
        return this.applyQuery((_a = {}, _a[arrayProp] = (this.query[arrayProp] || []).concat(entries), _a));
    };
    KedBackendCollection.prototype.addFlags = function () {
        var flags = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            flags[_i] = arguments[_i];
        }
        return this.addToQueryArrayProp("flags", flags);
    };
    KedBackendCollection.prototype.debug = function () {
        return this.applyQuery({ debug: true });
    };
    KedBackendCollection.prototype.idsOnly = function () {
        return this.addFlags("idsOnly");
    };
    KedBackendCollection.prototype.idsAndNamesOnly = function () {
        return this.addFlags("idsAndNamesOnly");
    };
    KedBackendCollection.prototype.includeIdsOnly = function () {
        return this.addFlags("includeIdsOnly");
    };
    KedBackendCollection.prototype.includeIdsAndNamesOnly = function () {
        return this.addFlags("includeIdsAndNamesOnly");
    };
    KedBackendCollection.prototype.between = function (from, to) {
        return this.applyQuery({ from: from, to: to });
    };
    KedBackendCollection.prototype.role = function (role) {
        return this.applyQuery({ role: role });
    };
    KedBackendCollection.prototype.hasEdgesFrom = function (ids) {
        if (ids.length === 0 || ids.some(function (id) { return !id; }))
            throw new Error("Invalid id list given to Collection.hasEdgesFrom(" + JSON.stringify(ids) + ")");
        var hef = this.addToQueryArrayProp("hasEdgesFrom", ids);
        return hef;
    };
    KedBackendCollection.prototype.hasEdgesTo = function (ids) {
        if (ids.length === 0 || ids.some(function (id) { return !id; }))
            throw new Error("Invalid id list given to Collection.hasEdgesTo(" + JSON.stringify(ids) + ")");
        var het = this.addToQueryArrayProp("hasEdgesTo", ids);
        return het;
    };
    KedBackendCollection.prototype.id = function (id) {
        var _this = this;
        return this.applyQuery({ ids: [id] }).single({
            onZero: function () { throw new Error("Could not find entity in " + _this.table + " with id " + id); },
            onMany: function () { throw new Error("Multiple entries in " + _this.table + " with id " + id); },
        });
    };
    KedBackendCollection.prototype.ids = function (ids) {
        return this.applyQuery({ ids: ids });
    };
    KedBackendCollection.prototype.name = function (name) {
        return this.applyQuery({ name: name });
    };
    KedBackendCollection.prototype.tags = function () {
        var tags = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            tags[_i] = arguments[_i];
        }
        return this.applyQuery({ tags: tags });
    };
    KedBackendCollection.prototype.branchId = function (branchId) {
        return this.applyQuery({ branchId: branchId });
    };
    KedBackendCollection.prototype.include = function () {
        var graphs = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            graphs[_i] = arguments[_i];
        }
        return this.addToQueryArrayProp("include", graphs);
    };
    KedBackendCollection.prototype.cacheOptimized = function () {
        return this.applyQuery({ cacheBust: _cache_bust__WEBPACK_IMPORTED_MODULE_3__["CacheBust"].getCacheBust(this.table, this.query, this.repo.getUser(), this.includes) });
    };
    KedBackendCollection.prototype.mutationsOnEmpty = function (mutationFactory) {
        var tx = new _ked_backend_client__WEBPACK_IMPORTED_MODULE_1__["BatchRunner"]();
        mutationFactory(tx);
        return this.applyQuery({ mutationsOnEmpty: tx.mutationRequests });
    };
    KedBackendCollection.prototype.single = function (throwers) {
        var _this = this;
        var _a = throwers || {}, onZero = _a.onZero, onMany = _a.onMany;
        return this.toValue().map(function (items) {
            if (items.length === 0) {
                if (onZero)
                    onZero();
                else
                    throw new Error("Single item of " + _this.table + " expected to be returned by query " + JSON.stringify(_this.query) + " but none was found.");
            }
            if (items.length > 1) {
                debugger;
                if (onMany)
                    onMany();
                else
                    console.log("Single item of " + _this.table + " expected to be returned by query " + JSON.stringify(_this.query) + " but " + items.length + " was found.");
            }
            return items[0];
        });
    };
    /*combineLatest<TOther>(other: QueryObservable<TOther>) {
      return this.render(x => x).combineLatest(other);
    }*/
    KedBackendCollection.prototype.update = function (doc, changes, debounce) {
        if (debounce === void 0) { debounce = 1000; }
        this.repo.writer.mutate([{
                op: 'update',
                table: this.table,
                branchId: this.query.branchId,
                id: doc.id,
                deltaDoc: changes,
                targetName: doc.name
            }], debounce);
    };
    KedBackendCollection.prototype.addRelated = function (id, label, relatedDoc) {
        this.repo.writer.mutate([{
                op: 'add-related',
                table: this.table,
                branchId: this.query.branchId,
                id: id,
                graphProp: label,
                relatedDoc: relatedDoc
            }], 0);
    };
    KedBackendCollection.prototype.add = function (doc) {
        this.repo.writer.mutate([{
                op: 'add',
                id: doc.id,
                table: this.table,
                doc: doc
            }], 0);
    };
    KedBackendCollection.prototype.removeRelated = function (id, label, relatedDoc) {
        this.repo.writer.mutate([{
                op: 'remove-related',
                table: this.table,
                branchId: this.query.branchId,
                id: id,
                graphProp: label,
                relatedDoc: relatedDoc
            }], 0);
    };
    KedBackendCollection.prototype.undoLink = function (id, label, relatedId) {
        if (!this.query.branchId)
            throw new Error("undo links can only be performed on branches");
        this.repo.writer.mutate([{
                op: 'undo-link',
                table: this.table,
                branchId: this.query.branchId,
                id: id,
                graphProp: label,
                relatedId: relatedId
            }], 0);
    };
    KedBackendCollection.prototype.delete = function () {
        var _this = this;
        var ids = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            ids[_i] = arguments[_i];
        }
        this.repo.writer.mutate(ids.map(function (id) { return ({
            op: 'delete',
            table: _this.table,
            id: id
        }); }), 0);
    };
    KedBackendCollection.prototype.unsubscribe = function (subscription) {
        this.repo.querySet.unsubscribe(subscription);
    };
    return KedBackendCollection;
}(_observable_collection__WEBPACK_IMPORTED_MODULE_5__["Collection"]));

/*mixin(
  KedBackendCollection.prototype,
  MappedCollection.prototype,
  "map", "flat", "concat", "render", "load");*/
//# sourceMappingURL=kedbackend-collection.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-query.js":
/*!********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/kedbackend-query.js ***!
  \********************************************************************/
/*! exports provided: KedBackendQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendQuery", function() { return KedBackendQuery; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ked-backend-client/utils */ "./kedbackend/js/dist/js/ked-backend-client/utils.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-repo/utils.js");
/* harmony import */ var _delta_merge__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./delta-merge */ "./kedbackend/js/dist/js/ked-backend-repo/delta-merge.js");




var KedBackendQuery = /** @class */ (function () {
    function KedBackendQuery(table, query, user, repo, mutationQueue) {
        this.table = table;
        this.query = query;
        this.user = user;
        this.repo = repo;
        this.mutationQueue = mutationQueue;
        this.subscriptions = [];
        this.data = [];
        this.gotInitialResponse = false;
        this.invalid = false;
        this.loadedVersion = 0;
        this._loadPromise = null;
        this.includes = query.include ?
            typeof query.include === 'string' ?
                [query.include] :
                query.include :
            [];
    }
    KedBackendQuery.queryKey = function (table, query) {
        var mutationsOnEmpty = query.mutationsOnEmpty, comparableProps = tslib__WEBPACK_IMPORTED_MODULE_0__["__rest"](query, ["mutationsOnEmpty"]);
        return table + JSON.stringify(comparableProps);
    };
    Object.defineProperty(KedBackendQuery.prototype, "queryKey", {
        get: function () {
            return KedBackendQuery.queryKey(this.table, this.query);
        },
        enumerable: true,
        configurable: true
    });
    KedBackendQuery.prototype.subscribe = function (subscription) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var data, data;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.subscriptions.push(subscription);
                        if (!(this.gotInitialResponse && !this.invalid)) return [3 /*break*/, 1];
                        data = this.getDataWithMutationsApplied(this.mutationQueue.get(), true, this.data);
                        subscription.notifySubscriber(data, this.error);
                        return [3 /*break*/, 4];
                    case 1:
                        data = this.queryLocally();
                        if (!data) return [3 /*break*/, 2];
                        this.data = data;
                        this.error = null;
                        subscription.notifySubscriber(data, this.error);
                        return [3 /*break*/, 4];
                    case 2: return [4 /*yield*/, this.load()];
                    case 3:
                        _a.sent();
                        _a.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    KedBackendQuery.prototype.load = function (version) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var loadPromise;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.gotInitialResponse) {
                            // mutationsOnEmpty should never be used twice.
                            delete this.query.mutationsOnEmpty;
                        }
                        if (!(!version && this._loadPromise)) return [3 /*break*/, 2];
                        return [4 /*yield*/, this._loadPromise];
                    case 1: 
                    // loading is ongoing, and caller does not require a recent refresh.
                    // wait for the ongoing load to complete
                    return [2 /*return*/, _a.sent()];
                    case 2:
                        version = version || this.repo.writer.persistedVersion.value;
                        loadPromise = this._loadPromise = this._load(version).then(function (data) {
                            if (_this._loadPromise === loadPromise) {
                                _this.data = data;
                                _this.loadedVersion = Math.max(_this.loadedVersion, version);
                            }
                        }).catch(function (error) {
                            if (_this._loadPromise === loadPromise) {
                                // Noone has refreshed our load. The error is the final result. Set it.
                                _this.error = error;
                            }
                        }).then(function () {
                            if (_this._loadPromise === loadPromise) {
                                // Noone has refreshed our load. We're finished. Data or error is already set.
                                // Mark gotInitialResponse to true and notify subscribers.
                                _this._loadPromise = null;
                                _this.gotInitialResponse = true;
                                _this.notifySubscribers(_this.mutationQueue.get());
                            }
                            else {
                                // A more recent call to load() is ongoing, OR was ongoing but responded
                                // before us.
                                // In any case return this._loadPromise. If it's ongoing we'll wait for it
                                // to finish. If it's null, we'll be returning finally here without
                                // any action, because the action was taken by the refresher.
                                return _this._loadPromise; // Wait for the refreshed load to complete
                            }
                        });
                        return [4 /*yield*/, loadPromise];
                    case 3:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    KedBackendQuery.prototype._load = function (version) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.mutationQueue.affectsQuery(this.table, this.query, this.includes)) return [3 /*break*/, 2];
                        // There are outgoing mutations that affects this query.
                        // Need to wait till they reach server and server responds with OK before querying
                        // the server. Otherwise, we may get inaccurate data from server.
                        return [4 /*yield*/, this.repo.writer.waitForVersionToPersist(version)];
                    case 1:
                        // There are outgoing mutations that affects this query.
                        // Need to wait till they reach server and server responds with OK before querying
                        // the server. Otherwise, we may get inaccurate data from server.
                        _a.sent();
                        _a.label = 2;
                    case 2: return [4 /*yield*/, this.queryServer()];
                    case 3: return [2 /*return*/, _a.sent()];
                }
            });
        });
    };
    KedBackendQuery.prototype.unsubscribe = function (subscription) {
        this.subscriptions = this.subscriptions.filter(function (s) { return s !== subscription; });
    };
    KedBackendQuery.prototype.commitMutations = function (mutations, version) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _i, mutations_1, m, data;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.data) return [3 /*break*/, 9];
                        _i = 0, mutations_1 = mutations;
                        _a.label = 1;
                    case 1:
                        if (!(_i < mutations_1.length)) return [3 /*break*/, 8];
                        m = mutations_1[_i];
                        if (!(m.op === 'clear-branch' && (m.branchId === this.query.branchId))) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.refreshOrInvalidate(version)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                    case 3:
                        if (!(m.op === 'merge' && (!m.targetBranchId ||
                            m.branchId === this.query.branchId ||
                            m.targetBranchId === this.query.branchId))) return [3 /*break*/, 5];
                        return [4 /*yield*/, this.refreshOrInvalidate(version)];
                    case 4:
                        _a.sent();
                        return [2 /*return*/];
                    case 5:
                        if (!(m.op === 'update' && ((m.deltaDoc.tags && this.query.tags) ||
                            (m.deltaDoc.name && this.query.name)))) return [3 /*break*/, 7];
                        // A tag may have been added, or renamed, and
                        // the query is dependent on the same property.
                        // The query must be refreshed from server as we cannot
                        // commit the mutations locally as we don't have all info.
                        return [4 /*yield*/, this.refreshOrInvalidate(version)];
                    case 6:
                        // A tag may have been added, or renamed, and
                        // the query is dependent on the same property.
                        // The query must be refreshed from server as we cannot
                        // commit the mutations locally as we don't have all info.
                        _a.sent();
                        return [2 /*return*/];
                    case 7:
                        _i++;
                        return [3 /*break*/, 1];
                    case 8:
                        data = this.getDataWithMutationsApplied(mutations, false, this.data);
                        this.data = data;
                        _a.label = 9;
                    case 9: return [2 /*return*/];
                }
            });
        });
    };
    KedBackendQuery.prototype.refreshOrInvalidate = function (version) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(this.subscriptions.length === 0)) return [3 /*break*/, 1];
                        this.invalid = true;
                        return [3 /*break*/, 3];
                    case 1: return [4 /*yield*/, this.load(version)];
                    case 2:
                        _a.sent();
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    KedBackendQuery.prototype.notifySubscribers = function (optimisticMutations) {
        var _this = this;
        if (this.data && this.gotInitialResponse) {
            var data_1 = this.getDataWithMutationsApplied(optimisticMutations, true, this.data);
            this.subscriptions.forEach(function (s) {
                s.notifySubscriber(data_1, _this.error);
            });
        }
    };
    KedBackendQuery.prototype.queryLocally = function () {
        return this.repo.querySet.queryLocally(this.table, this.query, this.includes);
    };
    KedBackendQuery.prototype.queryServer = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var data;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.repo.getClient().list(this.table, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.query))];
                    case 1:
                        data = _a.sent();
                        return [2 /*return*/, data];
                }
            });
        });
    };
    KedBackendQuery.prototype.getDataWithMutationsApplied = function (mutations, optimistic, data) {
        var _this = this;
        mutations.forEach(function (mutation) {
            data = _this.applyMutationsOnData(data, mutation, optimistic);
        });
        return data;
    };
    KedBackendQuery.prototype.applyMutationsOnData = function (data, m, optimistic) {
        if (Object(_utils__WEBPACK_IMPORTED_MODULE_2__["branchSensitive"])(m) && m.branchId != this.query.branchId)
            return data;
        var _a = this, table = _a.table, includes = _a.includes, listOptions = _a.query;
        var sourceIds = listOptions.hasEdgesFrom ? [].concat(listOptions.hasEdgesFrom || []) : [];
        var requestedTags = listOptions.tags ? [].concat(listOptions.tags || []) : [];
        switch (m.op) {
            case 'update': {
                return Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_1__["updateArray"])(data, function (doc) {
                    if (doc.id === m.id) {
                        // Apply delta on updated document
                        var updatedDoc = Object(_delta_merge__WEBPACK_IMPORTED_MODULE_3__["applyDelta"])(doc, m.deltaDoc);
                        if (optimistic)
                            updatedDoc.$meta = 'updating';
                        return updatedDoc;
                    }
                    // If id does not apply to this doc, search in graphs the id is found
                    // among graph included docs, and if so, update that one:
                    includes.forEach(function (label) {
                        var _a;
                        var includedDocs = doc[label];
                        if (includedDocs) {
                            var updatedArray = Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_1__["updateArray"])(includedDocs, function (related) {
                                if (related.id !== m.id)
                                    return related;
                                var updatedRelated = Object(_delta_merge__WEBPACK_IMPORTED_MODULE_3__["applyDelta"])(related, m.deltaDoc);
                                if (optimistic)
                                    updatedRelated.$meta = 'updating';
                                return updatedRelated;
                            });
                            if (updatedArray !== includedDocs) {
                                doc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc, (_a = {}, _a[label] = updatedArray, _a));
                            }
                        }
                    });
                    return doc;
                });
            }
            case 'add':
                if (table === m.table) {
                    if (listOptions.tags) {
                        var queriedTags_1 = [].concat(listOptions.tags); // tag can be either string or string[]. Make is string[] always.
                        if (m.doc.tags && m.doc.tags.some(function (tag) { return queriedTags_1.includes(tag); })) {
                            return data.concat([m.doc]); // Make the added doc appear in the result (optimistic mutation)
                        }
                    }
                    // Todo, apply also for other list options, like ids:
                    // The above code for 'add' was only written to cover the use case of teachers-page notifications!
                }
                return data; // fallback case - query was not affected.
            case 'add-related':
                if (table === m.table && includes.indexOf(m.graphProp) !== -1) {
                    // If expression is `db.courseBlocks....whatever.. .include("abilities")`, detect: db.courseBlocks.addRelated(blockId, 'abilities', ...)
                    // ...because table = 'courseBlocks' and includes has "abilities".
                    return Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_1__["updateArray"])(data, function (doc) {
                        var _a;
                        if (doc.id !== m.id)
                            return doc;
                        var relatedDoc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, m.relatedDoc);
                        if (optimistic)
                            relatedDoc.$meta = 'adding';
                        return tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc, (_a = {}, _a[m.graphProp] = doc[m.graphProp].concat([relatedDoc]), _a));
                    });
                }
                if (listOptions.hasEdgesFrom) {
                    if (sourceIds.includes(m.id)) {
                        // If expression is:
                        //   `db.courseBlocks.hasEdgesFrom([courseId])`  (meaning table='courseBlocks' and sourceIds includes courseId)
                        // , detect: db.courseInstances.addRelated(courseId, 'courseBlocks', ....) // m.graphProp === 'blocks'--> getTableFromLabel --> 'courseBlocks'
                        if (table === Object(_utils__WEBPACK_IMPORTED_MODULE_2__["getTableFromLabel"])(m.table, m.graphProp)) {
                            if (!listOptions.tags)
                                return data.concat(this.setGraphProps(m.relatedDoc));
                            if (m.relatedDoc.tags && requestedTags.some(function (tag) { return m.relatedDoc.tags.includes(tag); })) {
                                return data.concat(this.setGraphProps(m.relatedDoc));
                            }
                        }
                    }
                }
                if (listOptions.ids && listOptions.ids.some(function (id) { return id === m.relatedDoc.id; })) {
                    // A certain ID is observed. A doc with this id is being added.
                    // Add the doc to the result. Exactly this WILL happen in the following typical scenario:
                    // 1. User adds a related document to a list.
                    // 2. Document remains within the MutationQueue while batch-request is being processed by server.
                    // 3. User clicks the added item to edit or view it (or our component redirects to its editor)
                    // 4. A new query of that particular ID is subscribed to {ids=[theId]}
                    //    KedBackendQuery.subscribe then does this:
                    //      1. Call queryLocally() before querying server
                    //      2. queryLocally() inspects mutations and finds a match, returning an empty list
                    //         (assumes as we are adding it, it can't exist on the server anyway)
                    //      3. KedBackendQUery applies mutations onto the empty list, and ends up here to add
                    //         it optimistically.
                    //      4. When server responds with 200 OK, calls us here again with optimistic=false
                    //         to "persist" it in the query's data array.
                    //      4B: If not 200 OK, mutation may be gone and the subscriber will se an error page
                    //         "Could not find entity with id X." along with a red error message on the screen
                    //         about that it failed to save on server.
                    return data.concat(this.setGraphProps(m.relatedDoc));
                }
                return data;
            case 'remove-related':
                if (table === m.table && includes.indexOf(m.graphProp) !== -1) {
                    return Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_1__["updateArray"])(data, function (doc) {
                        var _a;
                        var includedDocs = doc[m.graphProp];
                        if (!includedDocs)
                            return doc;
                        if (doc.id !== m.id)
                            return doc;
                        return tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc, (_a = {}, _a[m.graphProp] = optimistic ?
                            // Mark related-doc-to-remove with $meta: 'deleting'
                            includedDocs.map(function (d) { return d.id !== m.relatedDoc.id ?
                                d : tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, d, { $meta: 'deleting' }); }) :
                            // Delete related-doc-to-remove from doc[grapProp]:
                            includedDocs.filter(function (d) { return d.id !== m.relatedDoc.id; }), _a));
                    });
                }
                if (listOptions.hasEdgesFrom) {
                    if (sourceIds.includes(m.id))
                        return optimistic ?
                            data.map(function (d) { return d.id === m.relatedDoc.id ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, d, { $meta: 'deleting' }) : d; }) :
                            data.filter(function (d) { return d.id !== m.relatedDoc.id; });
                }
                return data;
            case 'delete':
                if (table === m.table) {
                    return data.filter(function (d) { return d.id !== m.id; });
                }
                else if (listOptions.include) {
                    var includedTables = includes
                        .map(function (label) { return ({ label: label, table: Object(_utils__WEBPACK_IMPORTED_MODULE_2__["getTableFromLabel"])(table, label) }); });
                    var labels_1 = includedTables.filter(function (_a) {
                        var table = _a.table;
                        return table === m.table;
                    });
                    if (labels_1.length > 0) {
                        return Object(_ked_backend_client_utils__WEBPACK_IMPORTED_MODULE_1__["updateArray"])(data, function (doc) {
                            labels_1.forEach(function (_a) {
                                var label = _a.label;
                                var _b;
                                var relatedDocs = doc[label];
                                if (relatedDocs) {
                                    doc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc, (_b = {}, _b[label] = optimistic ?
                                        relatedDocs.map(function (d) { return d.id === m.id ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, d, { $meta: 'deleting' }) : d; }) :
                                        relatedDocs.filter(function (_a) {
                                            var id = _a.id;
                                            return id !== m.id;
                                        }), _b));
                                }
                            });
                            return doc;
                        });
                    }
                }
                return data;
            default:
                return data;
        }
    };
    KedBackendQuery.prototype.setGraphProps = function (doc) {
        var copy = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc);
        this.includes.forEach(function (label) { return copy[label] = copy[label] || []; });
        return copy;
    };
    return KedBackendQuery;
}());

//# sourceMappingURL=kedbackend-query.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-repo.js":
/*!*******************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/kedbackend-repo.js ***!
  \*******************************************************************/
/*! exports provided: KedBackendRepo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendRepo", function() { return KedBackendRepo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json");
var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_1___namespace = /*#__PURE__*/__webpack_require__.t(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json", 1);
/* harmony import */ var _kedbackend_collection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./kedbackend-collection */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-collection.js");
/* harmony import */ var _query_set__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-set */ "./kedbackend/js/dist/js/ked-backend-repo/query-set.js");
/* harmony import */ var _mutation_queue__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./mutation-queue */ "./kedbackend/js/dist/js/ked-backend-repo/mutation-queue.js");
/* harmony import */ var _kedbackend_writer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./kedbackend-writer */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-writer.js");
/* harmony import */ var _delta_collection_delta_collection__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./delta-collection/delta-collection */ "./kedbackend/js/dist/js/ked-backend-repo/delta-collection/delta-collection.js");







var KedBackendRepo = /** @class */ (function () {
    function KedBackendRepo(getClient, getUser, getUserDisplayName, defaultQueryOptions, mutationQueue, querySet, writer, cacheOptimized) {
        var _this = this;
        this.getClient = getClient;
        this.getUser = getUser;
        this.getUserDisplayName = getUserDisplayName;
        this.defaultQueryOptions = defaultQueryOptions;
        this.mutationQueue = mutationQueue;
        this.querySet = querySet;
        this.writer = writer;
        this.cacheOptimized = cacheOptimized;
        if (!defaultQueryOptions)
            this.defaultQueryOptions = {};
        if (!mutationQueue)
            this.mutationQueue = new _mutation_queue__WEBPACK_IMPORTED_MODULE_4__["MutationQueue"]();
        if (!querySet)
            this.querySet = new _query_set__WEBPACK_IMPORTED_MODULE_3__["QuerySet"](this.mutationQueue);
        if (!writer)
            this.writer = new _kedbackend_writer__WEBPACK_IMPORTED_MODULE_5__["KedBackendWriter"](this.mutationQueue, this.querySet, getClient, getUser, getUserDisplayName);
        Object.keys(kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_1__["tables"]).forEach(function (table) {
            var collection = new _kedbackend_collection__WEBPACK_IMPORTED_MODULE_2__["KedBackendCollection"](_this, table, defaultQueryOptions || {});
            if (cacheOptimized) {
                collection = collection.cacheOptimized();
            }
            _this[table] = collection;
        });
        this.deltas = new _delta_collection_delta_collection__WEBPACK_IMPORTED_MODULE_6__["DeltaCollection"](this.writer.deltaCache, {
            branchId: this.defaultQueryOptions.branchId // If branchId is undefined. DeltaCollection will respond with Error on subscribe()
        });
    }
    KedBackendRepo.prototype.table = function (tableName) {
        var collection = new _kedbackend_collection__WEBPACK_IMPORTED_MODULE_2__["KedBackendCollection"](this, tableName, this.defaultQueryOptions);
        if (this.cacheOptimized)
            collection = collection.cacheOptimized();
        return collection;
    };
    KedBackendRepo.prototype._clone = function (queryOptions, cacheOptimized) {
        var clone = new KedBackendRepo(this.getClient, this.getUser, this.getUserDisplayName, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.defaultQueryOptions, queryOptions), this.mutationQueue, this.querySet, this.writer, cacheOptimized === undefined ? this.cacheOptimized : cacheOptimized);
        return clone;
    };
    KedBackendRepo.prototype.branch = function (branchId) {
        return this._clone({ branchId: branchId });
    };
    KedBackendRepo.prototype.role = function (role) {
        return this._clone({ role: role });
    };
    KedBackendRepo.prototype.optimizeCache = function () {
        return this._clone({}, true);
    };
    KedBackendRepo.prototype.clearBranch = function () {
        if (!this.defaultQueryOptions.branchId)
            throw new Error("Cannot clear master branch");
        this.writer.mutate([{ op: 'clear-branch', branchId: this.defaultQueryOptions.branchId }], 0);
    };
    KedBackendRepo.prototype.merge = function (targetBranchId) {
        if (!this.defaultQueryOptions.branchId)
            throw new Error("Cannot merge from master branch");
        this.writer.mutate([{ op: 'merge', branchId: this.defaultQueryOptions.branchId, targetBranchId: targetBranchId }], 0);
    };
    KedBackendRepo.prototype.saveNow = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.writer.waitForVersionToPersist(this.writer.currentVersion)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    return KedBackendRepo;
}());

//# sourceMappingURL=kedbackend-repo.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-subscription.js":
/*!***************************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/kedbackend-subscription.js ***!
  \***************************************************************************/
/*! exports provided: KedBackendSubscription */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendSubscription", function() { return KedBackendSubscription; });
var KedBackendSubscription = /** @class */ (function () {
    function KedBackendSubscription(subscriber, collection) {
        this.subscriber = subscriber;
        this.collection = collection;
    }
    KedBackendSubscription.prototype.notifySubscriber = function (data, error) {
        try {
            if (error)
                this.subscriber([], error, this);
            else if (data !== this.lastNotifiedData) { // Will in-fact be equal by reference if data is same as last notification (as we use an immutable approach on data)
                this.lastNotifiedData = data;
                this.subscriber(data, error, this);
            }
        }
        catch (ex) {
            try {
                this.subscriber([], ex, this);
            }
            catch (ex2) {
                console.error("Error while notifying KedBackendSubscriber:", ex2, 'originally notified error:', ex);
            }
        }
    };
    KedBackendSubscription.prototype.unsubscribe = function () {
        this.collection.unsubscribe(this);
    };
    return KedBackendSubscription;
}());

//# sourceMappingURL=kedbackend-subscription.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-writer.js":
/*!*********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/kedbackend-writer.js ***!
  \*********************************************************************/
/*! exports provided: KedBackendWriter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedBackendWriter", function() { return KedBackendWriter; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _mutation_queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./mutation-queue */ "./kedbackend/js/dist/js/ked-backend-repo/mutation-queue.js");
/* harmony import */ var _ked_backend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../ked-backend-client */ "./kedbackend/js/dist/js/ked-backend-client/index.js");
/* harmony import */ var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json");
var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_3___namespace = /*#__PURE__*/__webpack_require__.t(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json", 1);
/* harmony import */ var _cache_bust__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./cache-bust */ "./kedbackend/js/dist/js/ked-backend-repo/cache-bust.js");
/* harmony import */ var _observable__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../observable */ "./kedbackend/js/dist/js/observable/index.js");
/* harmony import */ var _delta_collection_delta_cache__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./delta-collection/delta-cache */ "./kedbackend/js/dist/js/ked-backend-repo/delta-collection/delta-cache.js");







var KedBackendWriter = /** @class */ (function () {
    function KedBackendWriter(mutationQueue, querySet, getClient, getUser, getUserDisplayName) {
        this.mutationQueue = mutationQueue;
        this.querySet = querySet;
        this.getClient = getClient;
        this.getUser = getUser;
        this.getUserDisplayName = getUserDisplayName;
        this._timeoutId = null;
        this._isSavingPromise = null;
        this.currentVersion = 0;
        this.persistedVersion = new _observable__WEBPACK_IMPORTED_MODULE_5__["Emitter"](0);
        this.errorSubscribers = [];
        this.stateSubscribers = [];
        this.deltaCache = new _delta_collection_delta_cache__WEBPACK_IMPORTED_MODULE_6__["DeltaCache"](getClient, getUser, getUserDisplayName);
    }
    Object.defineProperty(KedBackendWriter.prototype, "isSaving", {
        get: function () { return !!this._isSavingPromise; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(KedBackendWriter.prototype, "isEdited", {
        get: function () { return this.mutationQueue.get().length > 0; },
        enumerable: true,
        configurable: true
    });
    KedBackendWriter.prototype.onError = function (callback) {
        this.errorSubscribers.push(callback);
    };
    KedBackendWriter.prototype.onStateChange = function (callback) {
        this.stateSubscribers.push(callback);
    };
    KedBackendWriter.prototype.off = function (callback) {
        this.errorSubscribers = this.errorSubscribers.filter(function (s) { return s !== callback; });
        this.stateSubscribers = this.stateSubscribers.filter(function (s) { return s !== callback; });
    };
    KedBackendWriter.prototype.dispatchError = function (error, retryable) {
        var _this = this;
        this.errorSubscribers.forEach(function (callback) {
            try {
                callback(error, retryable, _this);
            }
            catch (_) { }
        });
    };
    KedBackendWriter.prototype.dispatchStateChange = function () {
        var _this = this;
        this.stateSubscribers.forEach(function (callback) {
            try {
                callback(_this);
            }
            catch (_) { }
        });
    };
    KedBackendWriter.prototype.mutate = function (mutations, debounce) {
        this.mutationQueue.add(mutations);
        ++this.currentVersion;
        this.dispatchStateChange();
        this.querySet.notifySubscribers();
        this.deltaCache.applyMutations(this.mutationQueue.get(), { optimistic: true });
        if (!this._isSavingPromise) {
            if (this._timeoutId)
                clearTimeout(this._timeoutId);
            this._timeoutId = setTimeout(this.save.bind(this), debounce);
        }
        // If isSaving, we don't need to do anything, becase it will re-check if additional
        // mutations have come, when saving is done.
    };
    KedBackendWriter.prototype.retrySave = function () {
        return this.save();
    };
    KedBackendWriter.prototype.waitForVersionToPersist = function (version) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var persistedVersion;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.persistedVersion.load()];
                    case 1:
                        persistedVersion = _a.sent();
                        if (!(persistedVersion < version)) return [3 /*break*/, 3];
                        this.save(); // Be more eager to save
                        return [4 /*yield*/, this.persistedVersion.filter(function (persistedVersion) { return persistedVersion >= version; }).load()];
                    case 2:
                        _a.sent();
                        _a.label = 3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    KedBackendWriter.prototype.save = function () {
        var _this = this;
        if (this._timeoutId)
            clearTimeout(this._timeoutId);
        if (this._isSavingPromise)
            return this._isSavingPromise;
        if (!this.isEdited)
            return Promise.resolve();
        this._timeoutId = null;
        this._isSavingPromise = this._save();
        this._isSavingPromise.catch(function () { }).then(function () { return _this._isSavingPromise = null; });
        return this._isSavingPromise;
    };
    KedBackendWriter.prototype._save = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var mutations, version, mutationRequests, res_1, etagMutations, error_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.dispatchStateChange();
                        mutations = this.mutationQueue.get();
                        version = this.currentVersion;
                        this.mutationQueue.moveToSavingQueue();
                        mutationRequests = this.mapMutations(mutations);
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 6, 11, 12]);
                        return [4 /*yield*/, this.getClient().batch(mutationRequests)];
                    case 2:
                        res_1 = _a.sent();
                        etagMutations = Object.keys(res_1.newEtags).map(function (id) { return ({
                            op: 'update',
                            table: null,
                            id: id,
                            deltaDoc: { $etag: res_1.newEtags[id] },
                            targetName: null // We don't have the target name. But this mutation won't be visible in a DeltaCollection anyway, so it wont be used.
                        }); });
                        // Invalidate cache
                        _cache_bust__WEBPACK_IMPORTED_MODULE_4__["CacheBust"].invalidateCache(mutationRequests, this.getUser());
                        // Commmit mutations along with etagMutations into queries cached data
                        this.persistedVersion.dispatch(version);
                        this.deltaCache.applyMutations(mutations, { optimistic: false });
                        return [4 /*yield*/, this.querySet.commitMutations(_mutation_queue__WEBPACK_IMPORTED_MODULE_1__["MutationQueue"].merge(mutations, etagMutations), version)];
                    case 3:
                        _a.sent();
                        // On success, clear saving queue as the mutations will now be committed to all query's data instead.
                        this.mutationQueue.clearSavingQueue();
                        this.dispatchStateChange(); // isEdited may have turned to false
                        // Finally, notify subscribers so that views get updated with committed results
                        this.querySet.notifySubscribers();
                        if (!(this.mutationQueue.get().length > 0)) return [3 /*break*/, 5];
                        // Additional mutations happend while we were saving. Handle them as well.
                        return [4 /*yield*/, this._save()];
                    case 4:
                        // Additional mutations happend while we were saving. Handle them as well.
                        _a.sent();
                        _a.label = 5;
                    case 5: return [3 /*break*/, 12];
                    case 6:
                        error_1 = _a.sent();
                        this.persistedVersion.dispatchError(error_1);
                        if (!(error_1 && error_1.name && error_1.name.startsWith("http4"))) return [3 /*break*/, 9];
                        // Access Control denied, bad request or similar. Throw mutations away.
                        this.dispatchError(error_1, false);
                        this.mutationQueue.clearSavingQueue();
                        this.dispatchStateChange(); // isEdited may have turned to false
                        this.querySet.notifySubscribers();
                        if (!(this.mutationQueue.get().length > 0)) return [3 /*break*/, 8];
                        // Ho ho! Additional mutations happend while we were saving. Handle them alone. THey might be more lucky.
                        return [4 /*yield*/, this._save()];
                    case 7:
                        // Ho ho! Additional mutations happend while we were saving. Handle them alone. THey might be more lucky.
                        _a.sent();
                        _a.label = 8;
                    case 8: return [3 /*break*/, 10];
                    case 9:
                        this.dispatchError(error_1, true);
                        _a.label = 10;
                    case 10: return [3 /*break*/, 12];
                    case 11:
                        this.dispatchStateChange();
                        return [7 /*endfinally*/];
                    case 12: return [2 /*return*/];
                }
            });
        });
    };
    KedBackendWriter.prototype.mapMutations = function (mutations) {
        var br = new _ked_backend_client__WEBPACK_IMPORTED_MODULE_2__["BatchRunner"]();
        mutations.forEach(function (m) {
            switch (m.op) {
                case 'update':
                    br.update(m.table, m.id, m.deltaDoc, m.branchId);
                    break;
                case 'add':
                    br.add(m.table, m.doc);
                    break;
                case 'add-related':
                    if (!m.relatedDoc.$etag) {
                        // No $etag means this is a new document. Add it before linking to it:
                        br.add(kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_3__["tables"][m.table].relationships[m.graphProp], m.relatedDoc, m.branchId);
                    }
                    br.link2(m.table, m.id, m.graphProp, m.relatedDoc.id, m.branchId);
                    break;
                case 'remove-related':
                    br.unlink2(m.table, m.id, m.graphProp, m.relatedDoc.id, m.branchId);
                    break;
                case 'undo-link':
                    br.undoLink(m.table, m.id, m.graphProp, m.relatedId, m.branchId);
                    break;
                case 'delete':
                    br.delete(m.table, m.id);
                    break;
                case 'clear-branch':
                    br.clearBranch(m.branchId);
                    break;
                case 'merge':
                    br.merge(m.branchId, m.targetBranchId);
                    break;
            }
        });
        return br.mutationRequests;
    };
    return KedBackendWriter;
}());

//# sourceMappingURL=kedbackend-writer.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/mutation-queue.js":
/*!******************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/mutation-queue.js ***!
  \******************************************************************/
/*! exports provided: MutationQueue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MutationQueue", function() { return MutationQueue; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-repo/utils.js");
/* harmony import */ var _delta_merge__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./delta-merge */ "./kedbackend/js/dist/js/ked-backend-repo/delta-merge.js");



var MutationQueue = /** @class */ (function () {
    function MutationQueue() {
        this.queue = [];
        this.savingQueue = [];
    }
    MutationQueue.prototype.add = function (mutations) {
        this.queue = MutationQueue.merge(this.queue, mutations);
    };
    MutationQueue.prototype.moveToSavingQueue = function () {
        this.savingQueue = MutationQueue.merge(this.savingQueue, this.queue);
        this.queue = [];
    };
    MutationQueue.prototype.clearSavingQueue = function () {
        this.savingQueue = [];
    };
    MutationQueue.prototype.get = function () {
        return this.savingQueue.concat(this.queue);
    };
    MutationQueue.prototype.affectsQuery = function (table, query, includes) {
        var mutations = this.get();
        if (mutations.some(function (m) { return m.op === 'merge' || m.op === 'clear-branch'; }))
            return true;
        if (query.ids) {
            // A query with "ids" filter will be easy to detect a no-match on:
            return mutations.some(function (m) { return Object(_utils__WEBPACK_IMPORTED_MODULE_1__["globalOp"])(m) || (!Object(_utils__WEBPACK_IMPORTED_MODULE_1__["branchSensitive"])(m) || m.branchId === query.branchId) &&
                query.ids.includes(m.id); });
        }
        // Otherwise, check if mutations affect same branch and table. Could be done more fine grained,
        // but that would only be a suboptimization.
        return mutations.some(function (m) {
            return m.op === 'add' ?
                m.table === table :
                m.op === 'delete' ?
                    m.table === table || (includes.some(function (label) { return Object(_utils__WEBPACK_IMPORTED_MODULE_1__["getTableFromLabel"])(table, label) === m.table; })) :
                    Object(_utils__WEBPACK_IMPORTED_MODULE_1__["globalOp"])(m) ? true :
                        m.branchId == query.branchId &&
                            (m.table === table || (m.op !== 'update' && ([table].concat(includes.map(function (label) { return Object(_utils__WEBPACK_IMPORTED_MODULE_1__["getTableFromLabel"])(table, label); })).some(function (table) { return Object(_utils__WEBPACK_IMPORTED_MODULE_1__["getTableFromLabel"])(m.table, m.graphProp) === table; }))));
        });
    };
    MutationQueue.merge = function (queue1, queue2) {
        var mutableQueue1 = queue1.slice();
        var mutableQueue2 = queue2.slice();
        //if (mutableQueue1.length > 0) debugger;
        var len = queue1.length;
        var _loop_1 = function (i) {
            var m = queue1[i];
            if (m.op === 'update') {
                var overlappingIdOpIdx = mutableQueue2.findIndex(function (newMut) {
                    return newMut.op === 'update' &&
                        newMut.branchId === m.branchId &&
                        newMut.id === m.id;
                });
                if (overlappingIdOpIdx >= 0) {
                    mutableQueue1[i] = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, m, { deltaDoc: Object(_delta_merge__WEBPACK_IMPORTED_MODULE_2__["mergeDeltas"])(m.deltaDoc, mutableQueue2[overlappingIdOpIdx].deltaDoc) });
                    mutableQueue2.splice(overlappingIdOpIdx, 1);
                }
            }
        };
        for (var i = 0; i < len; ++i) {
            _loop_1(i);
        }
        return mutableQueue1.concat(mutableQueue2);
    };
    return MutationQueue;
}());

//# sourceMappingURL=mutation-queue.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/query-set.js":
/*!*************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/query-set.js ***!
  \*************************************************************/
/*! exports provided: QuerySet */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "QuerySet", function() { return QuerySet; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _kedbackend_query__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./kedbackend-query */ "./kedbackend/js/dist/js/ked-backend-repo/kedbackend-query.js");
/* harmony import */ var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json");
var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json", 1);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ "./kedbackend/js/dist/js/ked-backend-repo/utils.js");




var QuerySet = /** @class */ (function () {
    function QuerySet(mutationQueue) {
        this.mutationQueue = mutationQueue;
        this.queries = [];
    }
    QuerySet.prototype.commitMutations = function (mutations, version) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, Promise.all(this.queries.map(function (q) { return q.commitMutations(mutations, version); }))];
                    case 1:
                        _a.sent();
                        this.cleanupInvalidQueries();
                        return [2 /*return*/];
                }
            });
        });
    };
    QuerySet.prototype.cleanupInvalidQueries = function () {
        this.queries = this.queries.filter(function (q) {
            if (q.invalid) {
                if (q.timeoutHandle) {
                    clearTimeout(q.timeoutHandle);
                    q.timeoutHandle = null;
                }
                return false;
            }
            return true;
        });
    };
    QuerySet.prototype.notifySubscribers = function () {
        var optimisticMutations = this.mutationQueue.get();
        this.queries.forEach(function (q) {
            q.notifySubscribers(optimisticMutations);
        });
    };
    QuerySet.prototype.findQuery = function (table, query) {
        return this.queries.find(function (q) { return q.queryKey === _kedbackend_query__WEBPACK_IMPORTED_MODULE_1__["KedBackendQuery"].queryKey(table, query); });
    };
    QuerySet.prototype.queryLocally = function (table, query, includes) {
        // For now, only handle this very common and special case (which
        // will save a lot of unnescessary network traffic if I am thinking right...)
        var mutations = this.mutationQueue.get();
        // Check if the query wants to get a single entity by its ID:
        if (query.ids && query.ids.length === 1) {
            // And if so, if we have an outgoing mutation to create that entity:
            if (mutations.some(function (m) { return m.op === 'add-related' && m.relatedDoc.id === query.ids[0]; })) {
                // Then return an EMPTY response, signalling that we can resolve this locally,
                // but let the optistic feature of KedBackendQuery apply the mutation before
                // notifying subscribers (we don't want it to be persistent before the server
                // has accepted the mutation)
                return [];
            }
        }
        // OK, another quite common case is when we ask for a certain ID and that ID replies
        // within another query
        if (query.hasEdgesFrom || query.hasEdgesTo)
            return null; // Not possible to handle
        if (!query.ids)
            return null; // For now, just take hight for this particular and most common case!
        var _loop_1 = function (q) {
            if (!q.gotInitialResponse)
                return "continue";
            if (q.query.branchId !== query.branchId)
                return "continue";
            if (q.query.flags)
                return "continue"; // It would be complex to support various flags. Query's data may include ids only. Can't rely on the query.
            var qIncludes = q.includes;
            if (qIncludes.length > 0 && (!query.include || query.include.length === 0)) {
                // We don't include, but this query does. Check if we can find our result within it.
                var label = qIncludes.find(function (l) { return kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_2__["tables"][q.table]["relationships"][l] === table; });
                if (label) {
                    var res_1 = {};
                    for (var _i = 0, _a = q.data; _i < _a.length; _i++) {
                        var entity = _a[_i];
                        var subData = Object(_utils__WEBPACK_IMPORTED_MODULE_3__["queryArray"])(query, entity[label]);
                        subData.forEach(function (r) { return res_1[r.id] = r; });
                    }
                    var result_1 = Object.keys(res_1).map(function (id) { return res_1[id]; });
                    // Only return result if we could look up every requested ID:
                    if (!query.ids.every(function (id) { return result_1.some(function (x) { return x.id === id; }); }))
                        return "continue";
                    return { value: result_1 };
                }
            }
            if (!includes.every(function (label) { return qIncludes.includes(label); }))
                return "continue";
            // Lastly, if the query includes all graphs that we do, pick the subset from that query.
            // Concrete example: We observe a certain Task by ID and want its knowledgeRequirements along with it,
            // and there's another query of all tasks that also includes knowledgeRequirements. Use it. 
            if (q.table === table) {
                var result_2 = Object(_utils__WEBPACK_IMPORTED_MODULE_3__["queryArray"])(query, q.data);
                // Only return result if we could look up every requested ID:
                if (!query.ids.every(function (id) { return result_2.some(function (x) { return x.id === id; }); }))
                    return "continue";
                return { value: result_2 };
            }
        };
        for (var _i = 0, _a = this.queries; _i < _a.length; _i++) {
            var q = _a[_i];
            var state_1 = _loop_1(q);
            if (typeof state_1 === "object")
                return state_1.value;
        }
    };
    QuerySet.prototype.subscribe = function (subscription) {
        var _a = subscription.collection, table = _a.table, query = _a.query, repo = _a.repo;
        var kbQuery = this.findQuery(table, query);
        if (!kbQuery) {
            kbQuery = new _kedbackend_query__WEBPACK_IMPORTED_MODULE_1__["KedBackendQuery"](table, query, repo.getUser(), repo, this.mutationQueue);
            this.queries.push(kbQuery);
        }
        else {
            if (kbQuery.timeoutHandle) {
                clearTimeout(kbQuery.timeoutHandle);
                kbQuery.timeoutHandle = null;
            }
        }
        kbQuery.subscribe(subscription);
    };
    QuerySet.prototype.unsubscribe = function (subscription) {
        var _this = this;
        var _a = subscription.collection, table = _a.table, query = _a.query, repo = _a.repo;
        var kbQuery = this.findQuery(table, query);
        if (kbQuery) {
            // Prohibit further notifications to this subscription:
            kbQuery.unsubscribe(subscription);
            // Release unnescessary memory when there are no more subscriptions of this query, by removing the query itself
            // To that in a delayed manner, so that an unsubscribe() followed by an immediate subscribe() don't have to re-query the server:
            if (kbQuery.subscriptions.length === 0) {
                // Schedule for garbage collection in 5 minutes:
                kbQuery.timeoutHandle = setTimeout(function () {
                    // Check if kbQuery still has no subscriptions (not certain! A new subscriber may have come along...)
                    if (kbQuery.subscriptions.length === 0) {
                        // Still no subscriptions on it, time to release some memory and forget the in-memory cache of the query result
                        _this.queries = _this.queries.filter(function (q) { return q !== kbQuery; });
                    }
                }, this.queries.length > 50 ?
                    500 : // Don't host too many queries. Garbage collect this within 500 ms
                    5 * 60000); // Allow query in memory for another 5 minutes
            }
        }
    };
    return QuerySet;
}());

//# sourceMappingURL=query-set.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-backend-repo/utils.js":
/*!*********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-backend-repo/utils.js ***!
  \*********************************************************/
/*! exports provided: getTableFromLabel, queryArray, AND, getFilterFromQuery, branchSensitive, globalOp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTableFromLabel", function() { return getTableFromLabel; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "queryArray", function() { return queryArray; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AND", function() { return AND; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFilterFromQuery", function() { return getFilterFromQuery; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "branchSensitive", function() { return branchSensitive; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "globalOp", function() { return globalOp; });
/* harmony import */ var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json");
var kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_0___namespace = /*#__PURE__*/__webpack_require__.t(/*! kedbackend-schema/schema.json */ "./kedbackend/KED.Backend.API/schema.json", 1);

function getTableFromLabel(table, label) {
    return kedbackend_schema_schema_json__WEBPACK_IMPORTED_MODULE_0__["tables"][table].relationships[label];
}
function queryArray(query, data) {
    var filter = getFilterFromQuery(query);
    return data.filter(filter);
}
function AND(filter1, filter2) {
    return function (x) { return filter1(x) && filter2(x); };
}
function getFilterFromQuery(query) {
    var filter = function (x) { return true; };
    if (query.from)
        return AND(filter, function (x) { return x.dateTime >= query.from; });
    if (query.to)
        return AND(filter, function (x) { return x.dateTime < query.to; });
    if (query.ids)
        return AND(filter, function (x) { return query.ids.includes(x.id); });
    if (query.name)
        return AND(filter, function (x) { return x.name === query.name; });
    if (query.tags)
        return AND(filter, function (x) { return x.tags && [].concat(query.tags || []).some(function (tag) { return x.tags.includes(tag); }); });
    // query.hasEdgesFrom and query.hasEdgesTo cannot by filtered here
    return filter;
}
function branchSensitive(m) {
    return m.op !== 'delete';
}
function globalOp(m) {
    return m.op === 'clear-branch' || m.op === 'merge';
}
//# sourceMappingURL=utils.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-model-migrator/index.js":
/*!***********************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-model-migrator/index.js ***!
  \***********************************************************/
/*! exports provided: KedModelMigratorMixin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedModelMigratorMixin", function() { return KedModelMigratorMixin; });
/* harmony import */ var _migrate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./migrate */ "./kedbackend/js/dist/js/ked-model-migrator/migrate.js");

var KedModelMigratorMixin = function (client) {
    if (client.__migrator_mixed_in)
        return;
    client.__migrator_mixed_in = true;
    var get = client.get;
    var list = client.list;
    client.get = function (table, id, options) {
        var include = options && options.include;
        return get.apply(this, arguments).then(function (result) {
            Object(_migrate__WEBPACK_IMPORTED_MODULE_0__["default"])(result, table, include && include.toString().split(','));
            return result;
        });
    };
    client.list = function (table, options) {
        var include = options && options.include;
        return list.apply(this, arguments).then(function (result) {
            result.forEach(function (doc) { return Object(_migrate__WEBPACK_IMPORTED_MODULE_0__["default"])(doc, table, include && include.toString().split(',')); });
            return result;
        });
    };
    return client;
};
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-model-migrator/migrate-course.js":
/*!********************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-model-migrator/migrate-course.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return migrateCourse; });
/* harmony import */ var _migrate_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./migrate-task */ "./kedbackend/js/dist/js/ked-model-migrator/migrate-task.js");

function migrateCourse(course, graphs) {
    if (!course.modules)
        course.modules = [];
    course.modules.forEach(function (module) {
        if (!module.resources) {
            module.resources = [];
        }
        if (!module.taskIds) {
            module.taskIds = [];
        }
    });
    if (!course.responsibleTeachers) {
        course.responsibleTeachers = [];
    }
    // Earlier wrong spelling of resources
    if ('resourses' in course && !('resources' in course)) {
        course.resources = course.resourses;
        delete course.resourses;
    }
    if (!course.resources) {
        course.resources = [];
    }
    if (graphs) {
        graphs.forEach(function (label) {
            switch (label) {
                case 'tasks':
                    course.tasks.forEach(function (task) { return Object(_migrate_task__WEBPACK_IMPORTED_MODULE_0__["default"])(task); });
                    break;
            }
        });
    }
}
//# sourceMappingURL=migrate-course.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-model-migrator/migrate-task.js":
/*!******************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-model-migrator/migrate-task.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return migrateTask; });
function migrateTask(task) {
    if (!task.resources)
        task.resources = [];
}
//# sourceMappingURL=migrate-task.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/ked-model-migrator/migrate.js":
/*!*************************************************************!*\
  !*** ./kedbackend/js/dist/js/ked-model-migrator/migrate.js ***!
  \*************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return migrate; });
/* harmony import */ var _migrate_course__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./migrate-course */ "./kedbackend/js/dist/js/ked-model-migrator/migrate-course.js");
/* harmony import */ var _migrate_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./migrate-task */ "./kedbackend/js/dist/js/ked-model-migrator/migrate-task.js");


function migrate(doc, table, graphs) {
    switch (table) {
        case "courses":
            Object(_migrate_course__WEBPACK_IMPORTED_MODULE_0__["default"])(doc, graphs);
            break;
        case "tasks":
            Object(_migrate_task__WEBPACK_IMPORTED_MODULE_1__["default"])(doc);
            break;
    }
}
//# sourceMappingURL=migrate.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/collection.js":
/*!********************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/collection.js ***!
  \********************************************************/
/*! exports provided: Collection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Collection", function() { return Collection; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./observable */ "./kedbackend/js/dist/js/observable/observable.js");
/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./map */ "./kedbackend/js/dist/js/observable/map.js");
/* harmony import */ var _value__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./value */ "./kedbackend/js/dist/js/observable/value.js");
/* harmony import */ var _emitter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./emitter */ "./kedbackend/js/dist/js/observable/emitter.js");





var Collection = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Collection, _super);
    function Collection(subscribe) {
        return _super.call(this, subscribe) || this;
    }
    Collection.prototype._map = function (mapper) {
        throw "mixedin";
    };
    Collection.from = function (x) {
        if (x.subscribe)
            return new Collection(function (s) { return x.subscribe(s); });
        if (Array.isArray(x)) {
            var emitter_1 = new _emitter__WEBPACK_IMPORTED_MODULE_4__["Emitter"](x);
            return new Collection(function (s) { return emitter_1.subscribe(s); });
        }
        throw new Error("ObservableCollection.from() can only take arrays or observables");
    };
    Collection.prototype.map = function (mapper) {
        return this._map(function (items) { return items.map(function (item) { return mapper(item); }); });
    };
    Collection.prototype.flat = function () {
        return this._map(function (items) { return [].concat.apply([], items); });
    };
    Collection.prototype.filter = function (filter) {
        return this._map(function (items) { return items.filter(filter); });
    };
    Collection.prototype.concat = function (other) {
        return Collection.from(this.toValue().combineLatest(other).map(function (_a) {
            var me = _a[0], other = _a[1];
            return me.concat(other);
        }));
    };
    Collection.prototype.orderBy = function (prop) {
        return this.toValue().map(function (array) { return array.slice().sort(function (a, b) {
            var aProp = a && a[prop];
            var bProp = b && b[prop];
            return aProp > bProp ? 1 : aProp < bProp ? -1 : 0;
        }); }).toCollection(function (x) { return x; });
    };
    Collection.prototype.toValue = function () {
        var _this = this;
        return new _value__WEBPACK_IMPORTED_MODULE_3__["Value"](function (s) { return _this.subscribe(s); });
    };
    Collection.prototype.groupBy = function (prop) {
        return this.toValue().map(function (items) {
            var rv = {};
            items.forEach(function (item) {
                var list = rv[item[prop]] || (rv[item[prop]] = []);
                list.push(item);
            });
            return rv;
        });
    };
    Collection.prototype.first = function () {
        return this.toValue().map(function (arr) { return arr[0]; });
    };
    return Collection;
}(_observable__WEBPACK_IMPORTED_MODULE_1__["Observable"]));

Collection.prototype._map = Object(_map__WEBPACK_IMPORTED_MODULE_2__["initMapMethod"])(Collection);
//# sourceMappingURL=collection.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/emitter.js":
/*!*****************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/emitter.js ***!
  \*****************************************************/
/*! exports provided: Emitter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Emitter", function() { return Emitter; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _value__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./value */ "./kedbackend/js/dist/js/observable/value.js");


var Emitter = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Emitter, _super);
    function Emitter(initialValue) {
        var _this = _super.call(this, function (observer) {
            var subscription = {
                unsubscribe: function () { return _this.subscribers = _this.subscribers.filter(function (_a) {
                    var s = _a[0];
                    return s !== observer;
                }); },
            };
            _this.subscribers.push([observer, subscription]);
            if (_this.error)
                observer(null, _this.error, subscription);
            else
                observer(_this.value, undefined, subscription);
            return subscription;
        }) || this;
        _this.subscribers = [];
        _this.value = initialValue;
        return _this;
    }
    Emitter.prototype.dispatch = function (value) {
        this.value = value;
        this.error = undefined;
        this._dispatch();
    };
    Emitter.prototype.dispatchError = function (error) {
        this.error = error;
        this._dispatch();
    };
    Emitter.prototype._dispatch = function () {
        var _this = this;
        this.subscribers.forEach(function (_a) {
            var observer = _a[0], subscription = _a[1];
            try {
                observer(_this.value, _this.error, subscription);
            }
            catch (err) {
                observer(null, err, subscription);
            }
        });
    };
    return Emitter;
}(_value__WEBPACK_IMPORTED_MODULE_1__["Value"]));

//# sourceMappingURL=emitter.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/fiber-context.js":
/*!***********************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/fiber-context.js ***!
  \***********************************************************/
/*! exports provided: FiberContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FiberContext", function() { return FiberContext; });
var stack = [];
var currentFiber = null;
var providers = [function () { return currentFiber; }];
function pushFiber(fiber) {
    stack.push(currentFiber);
    currentFiber = fiber;
}
function popFiber() {
    currentFiber = stack.pop();
}
var FiberContext = {
    get current() { return currentFiber; },
    /*run: function rerun<R>(fiber: Fiber, fn: ()=>R): R | Promise<R> {
      pushFiber(fiber);
      try {
        return Promise.resolve(fn());
      } catch (p) {
        if (p && typeof p.then === 'function') {
          return p.then(()=>rerun(fiber, fn));
        } else {
          return Promise.reject(p);
        }
      } finally {
        popFiber();
      }
    },*/
    addProvider: function (getCurrentFiber) {
        providers.push(getCurrentFiber);
        setCurrentGetterFromProviders();
    },
    removeProvider: function (getCurrentFiber) {
        providers = providers.filter(function (p) { return p !== getCurrentFiber; });
        setCurrentGetterFromProviders();
    }
};
function setCurrentGetterFromProviders() {
    Object.defineProperty(FiberContext, "current", {
        get: providers.reduce(function (p, c) { return function () { return p() || c(); }; }),
        set: function () { throw new Error("Use FiberContext.push() to change current fiber"); }
    });
}
//# sourceMappingURL=fiber-context.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/index.js":
/*!***************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/index.js ***!
  \***************************************************/
/*! exports provided: Observable, Value, Collection, Emitter, FiberContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./observable */ "./kedbackend/js/dist/js/observable/observable.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Observable", function() { return _observable__WEBPACK_IMPORTED_MODULE_0__["Observable"]; });

/* harmony import */ var _value__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./value */ "./kedbackend/js/dist/js/observable/value.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Value", function() { return _value__WEBPACK_IMPORTED_MODULE_1__["Value"]; });

/* harmony import */ var _collection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./collection */ "./kedbackend/js/dist/js/observable/collection.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Collection", function() { return _collection__WEBPACK_IMPORTED_MODULE_2__["Collection"]; });

/* harmony import */ var _emitter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./emitter */ "./kedbackend/js/dist/js/observable/emitter.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Emitter", function() { return _emitter__WEBPACK_IMPORTED_MODULE_3__["Emitter"]; });

/* harmony import */ var _fiber_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./fiber-context */ "./kedbackend/js/dist/js/observable/fiber-context.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FiberContext", function() { return _fiber_context__WEBPACK_IMPORTED_MODULE_4__["FiberContext"]; });






//# sourceMappingURL=index.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/map.js":
/*!*************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/map.js ***!
  \*************************************************/
/*! exports provided: initMapMethod */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "initMapMethod", function() { return initMapMethod; });
function initMapMethod(ctor) {
    return function (mapper) {
        var _this = this;
        return new ctor(function (observer) { return _this.subscribe(function (value, error, subscription) {
            if (error)
                observer(null, error, subscription);
            else
                try {
                    observer(mapper(value), error, subscription);
                }
                catch (err) {
                    observer(null, err, subscription);
                }
        }); });
    };
}
//# sourceMappingURL=map.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/mixin.js":
/*!***************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/mixin.js ***!
  \***************************************************/
/*! exports provided: mixin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mixin", function() { return mixin; });
function mixin(targetProto, mixinProto) {
    var props = [];
    for (var _i = 2; _i < arguments.length; _i++) {
        props[_i - 2] = arguments[_i];
    }
    props.forEach(function (prop) { return targetProto[prop] = mixinProto[prop]; });
}
//# sourceMappingURL=mixin.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/observable.js":
/*!********************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/observable.js ***!
  \********************************************************/
/*! exports provided: Observable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Observable", function() { return Observable; });
var Observable = /** @class */ (function () {
    //static get [Symbol.species]() { return this; }
    function Observable(_subscribe) {
        this._subscribe = _subscribe;
    }
    Observable.prototype.subscribe = function (observer) {
        try {
            return this._subscribe(function (items, error, subscription) {
                try {
                    observer(items, error, subscription);
                }
                catch (err) {
                    observer(null, err, subscription);
                }
            });
        }
        catch (error) {
            observer(null, error, { unsubscribe: function () { } });
        }
    };
    return Observable;
}());

//# sourceMappingURL=observable.js.map

/***/ }),

/***/ "./kedbackend/js/dist/js/observable/value.js":
/*!***************************************************!*\
  !*** ./kedbackend/js/dist/js/observable/value.js ***!
  \***************************************************/
/*! exports provided: Value */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Value", function() { return Value; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./kedbackend/node_modules/tslib/tslib.es6.js");
/* harmony import */ var _observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./observable */ "./kedbackend/js/dist/js/observable/observable.js");
/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./map */ "./kedbackend/js/dist/js/observable/map.js");
/* harmony import */ var _collection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./collection */ "./kedbackend/js/dist/js/observable/collection.js");
/* harmony import */ var _fiber_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./fiber-context */ "./kedbackend/js/dist/js/observable/fiber-context.js");





var Value = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Value, _super);
    function Value(subscribe) {
        return _super.call(this, subscribe) || this;
    }
    Value.from = function (x) {
        if (x.subscribe)
            return new Value(function (s) { return x.subscribe(s); });
        throw new Error("Value.from() can only take observables");
    };
    Value.prototype.read = function () {
        var resolved = false, result, err, notify;
        var subscription = this.subscribe(function (value, error, subsciption) {
            resolved = true;
            result = value;
            err = error;
            if (error && notify)
                notify(null, error, subsciption);
            else if (notify)
                notify(value, null, subsciption);
        });
        if (resolved) {
            var currentFiber = _fiber_context__WEBPACK_IMPORTED_MODULE_4__["FiberContext"].current;
            if (!currentFiber) {
                subscription.unsubscribe();
                throw new Error("Invalid Fiber Context");
            }
            if (err) {
                subscription.unsubscribe();
                throw err;
            }
            var subscriptions = currentFiber.subscriptions, observer = currentFiber.observer;
            subscriptions.push(subscription);
            notify = observer;
            return result;
        }
        throw new Promise(function (resolve, reject) {
            notify = function (value, error, subscription) {
                subscription.unsubscribe();
                if (error)
                    reject(error);
                else
                    resolve(value);
            };
        });
    };
    Value.prototype.load = function () {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.subscribe(function (value, error, subsciption) {
                if (error)
                    reject(error);
                else
                    resolve(value);
                subsciption.unsubscribe();
            });
        });
    };
    Value.prototype.filter = function (fn) {
        var _this = this;
        return new Value(function (observer) { return _this.subscribe(function (value, error, subscription) {
            if (error)
                observer(null, error, subscription);
            else if (fn(value))
                observer(value, error, subscription);
        }); });
    };
    Value.prototype.log = function (prefix) {
        return this.map(function (x) {
            console.log(prefix, x);
            return x;
        });
    };
    Value.prototype.toCollection = function (mapper) {
        var _this = this;
        return new _collection__WEBPACK_IMPORTED_MODULE_3__["Collection"](function (s) { return _this.map(mapper).subscribe(s); });
    };
    Value.prototype.combineLatest = function (other) {
        var _this = this;
        return new Value(function (observer) {
            var values = [null, null];
            var mySubscription, otherSubscription;
            var subscription = {
                unsubscribe: function () {
                    mySubscription.unsubscribe();
                    otherSubscription.unsubscribe();
                }
            };
            mySubscription = _this.subscribe(function (items, error, s) {
                if (error) {
                    s.unsubscribe();
                    observer(null, error, subscription);
                }
                values[0] = items;
                if (values[1] !== null)
                    observer(values, null, subscription);
            });
            otherSubscription = other.subscribe(function (value, error, s) {
                if (error) {
                    s.unsubscribe();
                    observer(null, error, subscription);
                }
                values[1] = value;
                if (values[0] !== null)
                    observer(values, null, subscription);
            });
            return subscription;
        });
    };
    Value.prototype.switchMap = function (mapper) {
        var _this = this;
        return new Value(function (observer) {
            var mappedSubscription = null;
            var subscription = null;
            var returnedSubscription = {
                unsubscribe: function () {
                    subscription.unsubscribe();
                    if (mappedSubscription) {
                        mappedSubscription.unsubscribe();
                        mappedSubscription = null;
                    }
                }
            };
            subscription = _this.subscribe(function (item, error, s) {
                subscription = s;
                if (mappedSubscription) {
                    mappedSubscription.unsubscribe();
                    mappedSubscription = null;
                }
                if (error)
                    observer(null, error, returnedSubscription);
                else {
                    try {
                        var observableOrValue = mapper(item);
                        if (observableOrValue && typeof observableOrValue.subscribe === 'function') {
                            mappedSubscription = observableOrValue.subscribe(function (value, error, s) {
                                mappedSubscription = s;
                                observer(value, error, returnedSubscription);
                            });
                        }
                        else {
                            observer(observableOrValue, null, subscription);
                        }
                    }
                    catch (error) {
                        observer(null, error, subscription);
                    }
                }
            });
            return returnedSubscription;
        });
    };
    return Value;
}(_observable__WEBPACK_IMPORTED_MODULE_1__["Observable"]));

Value.prototype.map = Object(_map__WEBPACK_IMPORTED_MODULE_2__["initMapMethod"])(Value);
//# sourceMappingURL=value.js.map

/***/ }),

/***/ "./kedbackend/observable.js":
/*!**********************************!*\
  !*** ./kedbackend/observable.js ***!
  \**********************************/
/*! exports provided: Observable, Value, Collection, Emitter, FiberContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _js_dist_js_observable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/dist/js/observable */ "./kedbackend/js/dist/js/observable/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Observable", function() { return _js_dist_js_observable__WEBPACK_IMPORTED_MODULE_0__["Observable"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Value", function() { return _js_dist_js_observable__WEBPACK_IMPORTED_MODULE_0__["Value"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Collection", function() { return _js_dist_js_observable__WEBPACK_IMPORTED_MODULE_0__["Collection"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Emitter", function() { return _js_dist_js_observable__WEBPACK_IMPORTED_MODULE_0__["Emitter"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FiberContext", function() { return _js_dist_js_observable__WEBPACK_IMPORTED_MODULE_0__["FiberContext"]; });




/***/ }),

/***/ "./kedbackend/repo.js":
/*!****************************!*\
  !*** ./kedbackend/repo.js ***!
  \****************************/
/*! exports provided: KedBackendCollection, KedBackendQuery, KedBackendRepo, KedBackendSubscription, KedBackendWriter, MutationQueue, QuerySet, mixin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js/dist/js/ked-backend-repo */ "./kedbackend/js/dist/js/ked-backend-repo/index.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendCollection", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["KedBackendCollection"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendQuery", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["KedBackendQuery"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendRepo", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["KedBackendRepo"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendSubscription", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["KedBackendSubscription"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "KedBackendWriter", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["KedBackendWriter"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MutationQueue", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["MutationQueue"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "QuerySet", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["QuerySet"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "mixin", function() { return _js_dist_js_ked_backend_repo__WEBPACK_IMPORTED_MODULE_0__["mixin"]; });




/***/ }),

/***/ "./node_modules/moment/locale sync recursive sv|en":
/*!***********************************************!*\
  !*** ./node_modules/moment/locale sync sv|en ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./en-SG": "./node_modules/moment/locale/en-SG.js",
	"./en-SG.js": "./node_modules/moment/locale/en-SG.js",
	"./en-au": "./node_modules/moment/locale/en-au.js",
	"./en-au.js": "./node_modules/moment/locale/en-au.js",
	"./en-ca": "./node_modules/moment/locale/en-ca.js",
	"./en-ca.js": "./node_modules/moment/locale/en-ca.js",
	"./en-gb": "./node_modules/moment/locale/en-gb.js",
	"./en-gb.js": "./node_modules/moment/locale/en-gb.js",
	"./en-ie": "./node_modules/moment/locale/en-ie.js",
	"./en-ie.js": "./node_modules/moment/locale/en-ie.js",
	"./en-il": "./node_modules/moment/locale/en-il.js",
	"./en-il.js": "./node_modules/moment/locale/en-il.js",
	"./en-nz": "./node_modules/moment/locale/en-nz.js",
	"./en-nz.js": "./node_modules/moment/locale/en-nz.js",
	"./sv": "./node_modules/moment/locale/sv.js",
	"./sv.js": "./node_modules/moment/locale/sv.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./node_modules/moment/locale sync recursive sv|en";

/***/ }),

/***/ "./src/access-control/get-user-claims.ts":
/*!***********************************************!*\
  !*** ./src/access-control/get-user-claims.ts ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return getUserClaims; });
function getUserClaims(user) {
    return [{
            type: "email",
            value: user.mail
        }, {
            type: "school",
            value: user.school
        }].concat(user.roles.map(function (role) { return ({
        type: "role",
        value: role
    }); })).concat(user.roles.map(function (role) { return ({
        type: "schoolRole",
        value: user.school + "/" + role
    }); }));
}


/***/ }),

/***/ "./src/access-control/index.ts":
/*!*************************************!*\
  !*** ./src/access-control/index.ts ***!
  \*************************************/
/*! exports provided: getUserClaims, IMPERSONATION_QUERY_PARAMS, hasAccess, hasReadAccess, hasWriteAccess, hasShareAccess, isTeacherAtSchool, isAdminOrTeacherAtSchool, impersonationEnv, actAs, preserveImpersonationQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IMPERSONATION_QUERY_PARAMS", function() { return IMPERSONATION_QUERY_PARAMS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasAccess", function() { return hasAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasReadAccess", function() { return hasReadAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasWriteAccess", function() { return hasWriteAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasShareAccess", function() { return hasShareAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isTeacherAtSchool", function() { return isTeacherAtSchool; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isAdminOrTeacherAtSchool", function() { return isAdminOrTeacherAtSchool; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "impersonationEnv", function() { return impersonationEnv; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "actAs", function() { return actAs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "preserveImpersonationQuery", function() { return preserveImpersonationQuery; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _get_user_claims__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./get-user-claims */ "./src/access-control/get-user-claims.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getUserClaims", function() { return _get_user_claims__WEBPACK_IMPORTED_MODULE_2__["default"]; });

/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/query-string */ "./src/utils/query-string.ts");





var IMPERSONATION_QUERY_PARAMS = [
    "user",
    "role",
    "school",
    "debug",
    "testVersion",
    "testversion",
    "features",
    "schoolType",
    "schooltype"
];
function hasAccess(user, doc, requestedRight) {
    var claims = Object(_get_user_claims__WEBPACK_IMPORTED_MODULE_2__["default"])(user);
    if (requestedRight !== 'R' && user.tutorFor) {
        claims = claims.filter(function (claim) { return claim.type !== 'email'; });
    }
    var result = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["hasAccess"])(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["DocumentAccess"].fromStringArray(doc.acl || []), claims, requestedRight);
    //console.log(`Has ${requestedRight} access to ${doc.name}/${doc.id}: ${result}`);
    return result;
}
function hasReadAccess(user, doc) {
    return hasAccess(user, doc, 'R');
}
function hasWriteAccess(user, doc) {
    return hasAccess(user, doc, 'W');
}
function hasShareAccess(user, doc) {
    return hasAccess(user, doc, 'S');
}
function isTeacherAtSchool(user, school) {
    var isTeacher = user.roles.some(function (role) { return role === 'EMPLOYEE' || role === 'ADMIN'; });
    var belongsToSchool = (school || "").toLowerCase() === user.school.toLowerCase();
    return (isTeacher && belongsToSchool);
}
function isAdminOrTeacherAtSchool(user, school) {
    return user.roles.includes("ADMIN") || isTeacherAtSchool(user, school);
}
var impersonationEnv = {
    actAs: function (options) {
        var role = options.role, school = options.school, url = options.url;
        var currentQuery = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_3__["parseQueryString"])(location.search);
        var newQuery = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, currentQuery, { role: role, school: school });
        var newQueryString = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_3__["generateQueryString"])(newQuery);
        if (url) {
            location.href = "" + url + newQueryString;
        }
        else {
            location.hash = "#";
            location.search = newQueryString;
        }
    }
};
function actAs(options) {
    impersonationEnv.actAs(options);
}
function preserveImpersonationQuery(url, query) {
    var e_1, _a;
    var currentQuery = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_3__["parseQueryString"])(location.search);
    var preservedQuery = {};
    try {
        for (var IMPERSONATION_QUERY_PARAMS_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](IMPERSONATION_QUERY_PARAMS), IMPERSONATION_QUERY_PARAMS_1_1 = IMPERSONATION_QUERY_PARAMS_1.next(); !IMPERSONATION_QUERY_PARAMS_1_1.done; IMPERSONATION_QUERY_PARAMS_1_1 = IMPERSONATION_QUERY_PARAMS_1.next()) {
            var param = IMPERSONATION_QUERY_PARAMS_1_1.value;
            if (currentQuery[param])
                preservedQuery[param] = currentQuery[param];
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (IMPERSONATION_QUERY_PARAMS_1_1 && !IMPERSONATION_QUERY_PARAMS_1_1.done && (_a = IMPERSONATION_QUERY_PARAMS_1.return)) _a.call(IMPERSONATION_QUERY_PARAMS_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
    var newQueryString = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_3__["generateQueryString"])(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, preservedQuery, query));
    var pHash = url.indexOf('#');
    return pHash >= 0 ?
        "" + url.substr(0, pHash) + newQueryString + url.substr(pHash) :
        "" + url + newQueryString;
}


/***/ }),

/***/ "./src/apis/buttons.tsx":
/*!******************************!*\
  !*** ./src/apis/buttons.tsx ***!
  \******************************/
/*! exports provided: DriveButton */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DriveButton", function() { return DriveButton; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var IconDrive = function (_a) {
    var _b = _a.size, size = _b === void 0 ? 30 : _b;
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("svg", { width: size, version: "1.1", xmlns: "http://www.w3.org/2000/svg", xmlnsXlink: "http://www.w3.org/1999/xlink", viewBox: "0 0 508.52 508.52", fill: "#ffffff", style: { verticalAlign: "middle", marginRight: "4px" } },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("polygon", { points: "484.492,284.58 339.024,32.577 169.496,32.577 314.996,284.58" }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("polygon", { points: "145.437,74.276 0,326.279 84.764,473.05 230.169,221.143" }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("polygon", { points: "234.396,316.363 143.371,475.943 423.756,475.943 508.52,316.36" })));
};
var IconClassroom = function (_a) {
    var _b = _a.size, size = _b === void 0 ? 30 : _b;
    return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("svg", { width: size, xmlns: "http://www.w3.org/2000/svg", xmlnsXlink: "http://www.w3.org/1999/xlink", viewBox: "0 0 24 24", version: "1.1" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("path", { d: "M5 2C3.348 2 2 3.348 2 5v14c0 1.652 1.348 3 3 3h14c1.652 0 3-1.348 3-3V5c0-1.652-1.348-3-3-3zm0 2h14c.55 0 1 .45 1 1v14c0 .55-.45 1-1 1h-1v-2h-5v2H5c-.55 0-1-.45-1-1V5c0-.55.45-1 1-1zm7 2a1.999 1.999 0 1 0 0 4 1.999 1.999 0 1 0 0-4zM7.5 8a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm9 0a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM12 11c-2.66 0-3.5 2.5-3.5 2.5 0-.848.5-1.5.5-1.5-.3-.188-1.07-.313-1.438-.313-1.214 0-2.562 1.192-2.562 2V16h14v-2.313c0-.808-1.512-2-2.563-2-.367 0-1.136.126-1.437.313 0 0 .5.652.5 1.5 0 0-.84-2.5-3.5-2.5z" })));
};
var DriveButton = function (_a) {
    var _b = _a.label, label = _b === void 0 ? 'Google Drive' : _b, action = _a.action;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", { className: "btn", onClick: action },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(IconDrive, { size: 16 }),
        " ",
        label);
};


/***/ }),

/***/ "./src/apis/configs.ts":
/*!*****************************!*\
  !*** ./src/apis/configs.ts ***!
  \*****************************/
/*! exports provided: WebClientId, TemplatesFileId */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WebClientId", function() { return WebClientId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TemplatesFileId", function() { return TemplatesFileId; });
// Client id for GoogleWebClient
var WebClientId = "421572262269-u68v5lf5o8ss5t68l8gkq3pfarh6dbkv.apps.googleusercontent.com";
// Google Drive File Id to json file with Tamplates for Course Builder (Classroom)
var TemplatesFileId = 'https://docs.google.com/document/d/1V7exG6vN83Sq8kb6uz1B6DaZDVO9eLcJbP7XF0vL4dY/export?format=txt';


/***/ }),

/***/ "./src/apis/edsclient.ts":
/*!*******************************!*\
  !*** ./src/apis/edsclient.ts ***!
  \*******************************/
/*! exports provided: EdsClient, EDSPeriod, parseJsonDate_old */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EdsClient", function() { return EdsClient; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EDSPeriod", function() { return EDSPeriod; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseJsonDate_old", function() { return parseJsonDate_old; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _utils_school_moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/school-moment */ "./src/utils/school-moment.ts");
/* harmony import */ var _utils_school_term__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/school-term */ "./src/utils/school-term.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _mock_mock_eds_data_json__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./mock/mock-eds-data.json */ "./src/apis/mock/mock-eds-data.json");
var _mock_mock_eds_data_json__WEBPACK_IMPORTED_MODULE_5___namespace = /*#__PURE__*/__webpack_require__.t(/*! ./mock/mock-eds-data.json */ "./src/apis/mock/mock-eds-data.json", 1);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _utils_make_suspense_api__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/make-suspense-api */ "./src/utils/make-suspense-api.ts");









var EdsClient = /** @class */ (function () {
    function EdsClient(isomorphic, baseUrl, bearerProvider, userEmailGetter) {
        var _this = this;
        this.http = new kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["RestClient"](isomorphic, baseUrl, { bearerProvider: bearerProvider });
        this.userEmailGetter = userEmailGetter;
        var isApiMethod = function (m) {
            return typeof _this[m] === 'function' &&
                m !== 'constructor' && // Since makeSuspenseApi() walks prototype chain
                m !== 'privatizingCacheBust' &&
                m !== 'userEmailGetter';
        } // List non-API methods here...
        ;
        Object.keys(EdsClient.prototype).forEach(function (method) {
            if (isApiMethod(method)) {
                _this[method] = avoidSimultanousCalls(_this[method]);
            }
        });
        this.suspense = Object(_utils_make_suspense_api__WEBPACK_IMPORTED_MODULE_7__["makeSuspenseApi"])(this, { isApiMethod: isApiMethod });
    }
    EdsClient.prototype.privatizingCacheBust = function () {
        return { user: this.userEmailGetter() };
    };
    /**
       * Retrieve active courses for current logged in student.
       *
       * @param courseCode Short-name of the course. Optional.
       */
    EdsClient.prototype.getActiveCourses = function (q) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var query, res, _a, _b, json, ex_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _c.trys.push([0, 5, , 6]);
                        query = this.privatizingCacheBust();
                        if (q) {
                            if (q.courseCode)
                                query.CourseCode = q.courseCode;
                            if (q.periodName)
                                query.PeriodName = q.periodName;
                        }
                        return [4 /*yield*/, this.http.get("studentactivecourses", query)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.courses];
                    case 5:
                        ex_1 = _c.sent();
                        console.error("Error from EDS: " + ex_1);
                        throw new Error(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kunde tyv\u00E4rr inte ladda terminsm\u00E5l eller avklarade steg fr\u00E5n EDS. F\u00F6rs\u00F6k igen senare..."], ["Kunde tyv\u00E4rr inte ladda terminsm\u00E5l eller avklarade steg fr\u00E5n EDS. F\u00F6rs\u00F6k igen senare..."]))));
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    /**
     * Retrieve latest assessments for current logged in user.
     *
     * @param limit Optional limit
     */
    EdsClient.prototype.getLatestAssessments = function (limit) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var query, res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        query = this.privatizingCacheBust();
                        if (!isNaN(limit))
                            query.Count = limit;
                        return [4 /*yield*/, this.http.get("studentassessments", query)];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.assessments];
                }
            });
        });
    };
    /**
     * Retrieve studyplans for current logged-in user
     */
    EdsClient.prototype.getStudentGoals = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("studentgoals", this.privatizingCacheBust())];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.studentGoals];
                }
            });
        });
    };
    EdsClient.prototype.getStudentFutureAbilities = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("studentFutureAbilities", this.privatizingCacheBust())];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.studentFutureAbilities];
                }
            });
        });
    };
    EdsClient.prototype.getTeacherTutorStudents = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("teachertutorstudents", this.privatizingCacheBust())];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.students];
                }
            });
        });
    };
    /**
     * getSchoolTuitionGroups()
     *
     * Return tuitiongroups for school
     *
     * @param schoolName - name of school
     * @param courseCode - Skolverkets code for course
     */
    EdsClient.prototype.getSchoolTuitionGroups = function (q) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("SchoolTuitionGroups", tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.privatizingCacheBust(), q))];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.schoolTuitionGroups];
                }
            });
        });
    };
    /**
     * getTuitionGroupStudents()
     *
     * Return name and mailadresses for tutitiongroups in schools
     *
     * @param schoolName - name of school
     * @param tuitionGroupName - tuition gruop name in EDS
     */
    EdsClient.prototype.getTuitionGroupStudents = function (q) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("TuitionGroupStudents", tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.privatizingCacheBust(), q))];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.tuitionGroupStudents];
                }
            });
        });
    };
    /**
     * getSchoolTeachers()
     *
     * Return name and mailadresses for tutitiongroups in schools
     *
     * @param schoolName - name of school
     */
    EdsClient.prototype.getSchoolTeachers = function (q) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0: return [4 /*yield*/, this.http.get("SchoolTeachers", tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.privatizingCacheBust(), q))];
                    case 1:
                        res = _c.sent();
                        if (!(res.status != 200)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_1__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        json = _c.sent();
                        return [2 /*return*/, json.schoolTeachers];
                }
            });
        });
    };
    // we assume that the EDS will return the current academic year dates determined by the current date
    EdsClient.prototype.getAcademicYearTerms = function (schoolLocale, date) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var holidays, firstTermMoment, secondTermMoment, startFirstTermDate, startSecondTermDate, endFirstTermDate, endSecondTermDate, firstTerm, secondTerm;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                // mock data
                switch (schoolLocale) {
                    case 'en_sin':
                        return [2 /*return*/, _mock_mock_eds_data_json__WEBPACK_IMPORTED_MODULE_5__.SouthIndia.filter(function (f) { return moment__WEBPACK_IMPORTED_MODULE_6___default()(date).isSameOrAfter(f.firstTerm.startDate) && moment__WEBPACK_IMPORTED_MODULE_6___default()(date).isSameOrBefore(f.secondTerm.endDate); })[0]];
                    case 'en_nin':
                        return [2 /*return*/, _mock_mock_eds_data_json__WEBPACK_IMPORTED_MODULE_5__.NorthIndia.filter(function (f) { return moment__WEBPACK_IMPORTED_MODULE_6___default()(date).isSameOrAfter(f.firstTerm.startDate) && moment__WEBPACK_IMPORTED_MODULE_6___default()(date).isSameOrBefore(f.secondTerm.endDate); })[0]];
                    case 'sv':
                        {
                            holidays = [];
                            firstTermMoment = Object(_utils_school_moment__WEBPACK_IMPORTED_MODULE_2__["getTermStarEndDate"])(date, true);
                            secondTermMoment = Object(_utils_school_moment__WEBPACK_IMPORTED_MODULE_2__["getTermStarEndDate"])(date, false);
                            startFirstTermDate = firstTermMoment[0];
                            startSecondTermDate = secondTermMoment[0];
                            endFirstTermDate = firstTermMoment[1];
                            endSecondTermDate = secondTermMoment[1];
                            firstTerm = { startDate: new Date(startFirstTermDate.year(), startFirstTermDate.month(), startFirstTermDate.date()).toDateString(), endDate: new Date(startFirstTermDate.year(), endFirstTermDate.month(), endFirstTermDate.date()).toDateString() };
                            secondTerm = { startDate: new Date(startSecondTermDate.year(), startSecondTermDate.month(), startSecondTermDate.date()).toDateString(), endDate: new Date(startSecondTermDate.year(), endSecondTermDate.month(), endSecondTermDate.date()).toDateString() };
                            return [2 /*return*/, { firstTerm: firstTerm, secondTerm: secondTerm, holidays: holidays }];
                        }
                }
                return [2 /*return*/];
            });
        });
    };
    return EdsClient;
}());

var EDSPeriod = /** @class */ (function () {
    function EDSPeriod(periodStringOrSchoolTerm) {
        if (typeof periodStringOrSchoolTerm === 'string') {
            this.period = periodStringOrSchoolTerm;
            this.term = this.period.startsWith('HT') ? 'AT' : 'ST';
            this.year = parseInt(this.period.substr(2));
            if (isNaN(this.year))
                throw new Error("Invalid period: " + this.period);
        }
        else {
            var schoolTerm = new _utils_school_term__WEBPACK_IMPORTED_MODULE_3__["SchoolTerm"](periodStringOrSchoolTerm);
            this.period = (schoolTerm.term === 'AT' ? "HT" : "VT") + schoolTerm.year;
            this.term = schoolTerm.term;
            this.year = schoolTerm.year;
        }
    }
    Object.defineProperty(EDSPeriod.prototype, "schoolTerm", {
        get: function () {
            return new _utils_school_term__WEBPACK_IMPORTED_MODULE_3__["SchoolTerm"]({
                academicYear: this.term === 'AT' ?
                    this.year + "/" + (this.year + 1) :
                    this.year - 1 + "/" + this.year,
                term: this.term
            });
        },
        enumerable: true,
        configurable: true
    });
    EDSPeriod.prototype.toString = function () {
        return this.period;
    };
    EDSPeriod.prototype.valueOf = function () {
        return this.year + ":" + (this.term === 'ST' ? "1" : "2");
    };
    return EDSPeriod;
}());

function parseJsonDate_old(jsonDateStr) {
    var date = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["dateTimeReviver"])("", jsonDateStr);
    if (!(date instanceof Date))
        throw new Error("Invalid JSON date string: " + jsonDateStr);
    return date;
}
function avoidSimultanousCalls(method) {
    var ongoingPromises = {};
    return function () {
        var argsJson = JSON.stringify([].slice.call(arguments));
        if (!ongoingPromises[argsJson]) {
            ongoingPromises[argsJson] = method.apply(this, arguments).then(function (result) {
                delete ongoingPromises[argsJson];
                return result;
            });
        }
        return ongoingPromises[argsJson];
    };
}
var templateObject_1;


/***/ }),

/***/ "./src/apis/google-client.ts":
/*!***********************************!*\
  !*** ./src/apis/google-client.ts ***!
  \***********************************/
/*! exports provided: GoogleClient */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoogleClient", function() { return GoogleClient; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");


var GoogleClient = /** @class */ (function () {
    function GoogleClient(discoveryDocs) {
        this.googleTokenProvider = _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["env"].googleTokenProvider;
        this.discoveryDocs = [];
        this.discoveryDocs.push(discoveryDocs);
    }
    GoogleClient.prototype.setBearerProvider = function (googleTokenProvider) {
        this.googleTokenProvider = googleTokenProvider;
    };
    GoogleClient.prototype.ensureInited = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var tokenResult;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(typeof gapi === 'undefined' || !gapi.client || !gapi.client.setToken)) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.loadGapi()];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2:
                        if (!(!this.tokenExpiration || this.tokenExpiration < new Date())) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.googleTokenProvider.getBearer()];
                    case 3:
                        tokenResult = _a.sent();
                        this.tokenExpiration = new Date(tokenResult.expires);
                        this.token = tokenResult.token;
                        gapi.client.setToken({
                            access_token: tokenResult.token
                        });
                        _a.label = 4;
                    case 4: 
                    // Load all discovyerDocs
                    return [4 /*yield*/, gapi.client.init({
                            discoveryDocs: this.discoveryDocs
                        })];
                    case 5:
                        // Load all discovyerDocs
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    GoogleClient.prototype.loadGapi = function () {
        return new Promise(function (resolve) {
            if (typeof gapi !== 'undefined' && gapi.client && gapi.client.setToken)
                return resolve();
            var script = document.createElement('script');
            script.src = "https://apis.google.com/js/client.js?onload=gaapi_loaded";
            document.getElementsByTagName("head")[0].appendChild(script);
            window.gaapi_loaded = resolve;
        });
    };
    return GoogleClient;
}());



/***/ }),

/***/ "./src/apis/google-drive.ts":
/*!**********************************!*\
  !*** ./src/apis/google-drive.ts ***!
  \**********************************/
/*! exports provided: GoogleDrive */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoogleDrive", function() { return GoogleDrive; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _google_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./google-client */ "./src/apis/google-client.ts");


var GoogleDrive = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](GoogleDrive, _super);
    function GoogleDrive() {
        return _super.call(this, 'https://www.googleapis.com/discovery/v1/apis/drive/v3/rest') || this;
    }
    GoogleDrive.prototype.getFile = function (fileId) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, gapi.client.drive.files.get({
                                fileId: fileId,
                                supportsAllDrives: true,
                                fields: 'id,name,mimeType,webViewLink,iconLink,modifiedTime,thumbnailLink'
                            }).then(function (resp) {
                                if (resp.result.name) {
                                    var file = resp.result;
                                    return { fileId: file.id, url: file.webViewLink, mimeType: file.mimeType, name: file.name, modiifiedTime: file.modifiedTime, iconUrl: file.iconLink, thumbnailUrl: file.thumbnailLink };
                                }
                                return false;
                            })];
                }
            });
        });
    };
    /**
     * updatePermissions()
     *
     * @param fileId
     *
     * Make the file accessible to all in the domain. Should be unnecessary but some
     * teachers have changed their default permissions.
     * We don't care right now if this fails because this is just an extra precaution.
     * If we plan on using this on other domains the domain-attribute needs to be dynamic.
     *
     */
    GoogleDrive.prototype.updatePermissions = function (fileId) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        console.log('updating permissions');
                        return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _a.sent();
                        gapi.client.drive.permissions.create({
                            fileId: fileId,
                            sendNotificationEmail: false,
                            role: 'reader',
                            type: 'anyone',
                            // type: 'domain', 
                            // domain: 'kunskapsskolan.se'
                            supportsAllDrives: true
                        }).then(function (resp) { return console.log(resp); });
                        return [2 /*return*/];
                }
            });
        });
    };
    GoogleDrive.prototype.createFolder = function (name, parent) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        console.log('Creating folder ' + name);
                        return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, gapi.client.drive.files.create({
                                name: name,
                                mimeType: 'application/vnd.google-apps.folder',
                                parents: [parent]
                            }).then(function (resp) { return resp.result; })];
                }
            });
        });
    };
    GoogleDrive.prototype.getIdForFolderPath = function (path) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var parent, path_1, path_1_1, folder, folderId, newFolder, e_1_1;
            var e_1, _a;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        console.log('Getting id for ' + path.join('/'));
                        return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _b.sent();
                        parent = 'root';
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, 9, 10, 11]);
                        path_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](path), path_1_1 = path_1.next();
                        _b.label = 3;
                    case 3:
                        if (!!path_1_1.done) return [3 /*break*/, 8];
                        folder = path_1_1.value;
                        return [4 /*yield*/, this.getIdForFolder(folder, parent)];
                    case 4:
                        folderId = _b.sent();
                        if (!folderId) return [3 /*break*/, 5];
                        parent = folderId;
                        return [3 /*break*/, 7];
                    case 5: return [4 /*yield*/, this.createFolder(folder, parent)];
                    case 6:
                        newFolder = _b.sent();
                        parent = newFolder.id;
                        _b.label = 7;
                    case 7:
                        path_1_1 = path_1.next();
                        return [3 /*break*/, 3];
                    case 8: return [3 /*break*/, 11];
                    case 9:
                        e_1_1 = _b.sent();
                        e_1 = { error: e_1_1 };
                        return [3 /*break*/, 11];
                    case 10:
                        try {
                            if (path_1_1 && !path_1_1.done && (_a = path_1.return)) _a.call(path_1);
                        }
                        finally { if (e_1) throw e_1.error; }
                        return [7 /*endfinally*/];
                    case 11: return [2 /*return*/, parent];
                }
            });
        });
    };
    GoogleDrive.prototype.getIdForFolder = function (name, parent) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        console.log('Getting id for ' + name);
                        return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, gapi.client.drive.files.list({
                                corpora: 'user',
                                q: "'" + parent + "' in parents and mimeType = 'application/vnd.google-apps.folder' and name = '" + name + "'"
                            }).then(function (resp) {
                                if (resp.result.files.length) {
                                    return resp.result.files[0].id;
                                }
                                else {
                                    return false;
                                }
                            })];
                }
            });
        });
    };
    GoogleDrive.prototype.copyFile = function (file, destination) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var parent_1, parent_2;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        console.log('Copying file: ' + file.name);
                        return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _a.sent();
                        if (!destination) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.getIdForFolderPath(destination)];
                    case 2:
                        parent_1 = _a.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        parent_2 = 'root';
                        _a.label = 4;
                    case 4: return [2 /*return*/, gapi.client.drive.files.copy({
                            fileId: file.id,
                            supportsAllDrives: true,
                            parents: [parent],
                            name: file.name,
                            fields: 'id,name,mimeType,webViewLink,iconLink,modifiedTime,thumbnailLink'
                        }).then(function (resp) { return resp.result; })];
                }
            });
        });
    };
    /**
     * downloadFile()
     * @param file
     *
     * When Classroom has been integrated we will want to handle only the fileId:s
     * so that editing capabilities are peserved on the file (if it is a google-apps file)
     * Right now google-apps files are converted to pdf and passed into the current flow.
     *
     * TODO: error handling
     */
    GoogleDrive.prototype.downloadFile = function (_a) {
        var file = _a.file, limitSize = _a.limitSize;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var xhrDownload_1;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0: 
                    // A file that can be exported to PDF is retreived with
                    // file.export() from Drive, converted to a blob and then
                    // to a File.
                    // A file that can not be exported to PDF is retrieved
                    // through XHR and converted to a File.
                    // If we don't need to handle the physical files on the client
                    // we could save only the fileId:s and display filename and mimeType
                    // for the file in our listings. When/if we use Google Classroom for
                    // our task-handling that would be the preferred approach to keep
                    // the file as an editable Google file
                    // Init the drive-api (only needed for download so not loaded initially)
                    return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        // A file that can be exported to PDF is retreived with
                        // file.export() from Drive, converted to a blob and then
                        // to a File.
                        // A file that can not be exported to PDF is retrieved
                        // through XHR and converted to a File.
                        // If we don't need to handle the physical files on the client
                        // we could save only the fileId:s and display filename and mimeType
                        // for the file in our listings. When/if we use Google Classroom for
                        // our task-handling that would be the preferred approach to keep
                        // the file as an editable Google file
                        // Init the drive-api (only needed for download so not loaded initially)
                        _b.sent();
                        if (file.canExport) {
                            return [2 /*return*/, new Promise(function (resolve, reject) {
                                    gapi.client.drive.files.export({
                                        fileId: file.fileId,
                                        mimeType: 'application/pdf'
                                    }).then(function (resp) {
                                        var len = resp.body.length;
                                        var data = new Uint8Array(new ArrayBuffer(len));
                                        for (var i = 0; i < len; i++) {
                                            data[i] = resp.body.charCodeAt(i);
                                        }
                                        var blob = new Blob([data], { type: 'application/pdf' });
                                        var filename = file.name + '.pdf';
                                        resolve(new File([blob], filename, { type: 'application/pdf', lastModified: file.modifiedTime }));
                                    });
                                })];
                        }
                        else {
                            xhrDownload_1 = function (file) {
                                return new Promise(function (resolve, reject) {
                                    var xhr = new XMLHttpRequest();
                                    xhr.open("GET", "https://www.googleapis.com/drive/v3/files/" + file.fileId + '?alt=media', true);
                                    xhr.setRequestHeader('Authorization', 'Bearer ' + _this.token);
                                    xhr.responseType = 'blob';
                                    xhr.onload = function () {
                                        resolve(new File([xhr.response], file.name, { type: file.mimeType, lastModified: file.modifiedTime }));
                                    };
                                    xhr.send();
                                });
                            };
                            return [2 /*return*/, new Promise(function (resolve, reject) {
                                    if (limitSize !== undefined) {
                                        gapi.client.drive.files.get({
                                            fileId: file.fileId,
                                            fields: 'size'
                                        }).then(function (resp) {
                                            var size = Number(resp.result.size);
                                            if (size > limitSize * 1024 * 1024) {
                                                reject('GooglePickerError: Filsize is too laarge');
                                            }
                                        }).then(function () {
                                            xhrDownload_1(file).then(function (resp) {
                                                resolve(resp);
                                            });
                                        });
                                    }
                                    else {
                                        xhrDownload_1(file).then(function (resp) {
                                            resolve(resp);
                                        });
                                    }
                                })];
                        }
                        return [2 /*return*/];
                }
            });
        });
    };
    return GoogleDrive;
}(_google_client__WEBPACK_IMPORTED_MODULE_1__["GoogleClient"]));



/***/ }),

/***/ "./src/apis/google-picker.ts":
/*!***********************************!*\
  !*** ./src/apis/google-picker.ts ***!
  \***********************************/
/*! exports provided: GooglePicker */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GooglePicker", function() { return GooglePicker; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _google_webclient__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./google-webclient */ "./src/apis/google-webclient.ts");
/* harmony import */ var _google_drive__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./google-drive */ "./src/apis/google-drive.ts");



var mimeTypeCollections = {
    'google-apps': 'application/vnd.google-apps.document,application/vnd.google-apps.presentation,application/vnd.google-apps.spreadsheet',
    'pdf': 'application/pdf'
};
/**
 * GooglePicker
 * Includes the initiation of the correct api:s.
 * Certain options can be passed to the constructor
 * and there could be others worth incorporating (i.e. Team Drive-support).
 *
 * Right now two options are handled:
 * - upload: if a user can upload to Drive in the Google Drive Picker
 * - multiple: if a user can select multiple files
 * - limitType: active limits to certain mimeTypesCollections
 *
 * We could probably split this into google-picker and google-drive where google-drive
 * handles the explicit calls to the google drive api.
 */
var GooglePicker = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](GooglePicker, _super);
    function GooglePicker(options) {
        var _this = _super.call(this, ['https://www.googleapis.com/auth/drive']) || this;
        _this.options = { upload: false, multiple: false, limitType: false };
        Object.assign(_this.options, options);
        console.log(_this.options);
        _this.drive = new _google_drive__WEBPACK_IMPORTED_MODULE_2__["GoogleDrive"]();
        return _this;
    }
    /**
     * show()
     *
     * If a single file is requested from the picker a list of files with one element is returned.
     * It is up to the caller to handle the list in a relevant manner.
     *
     * More data from the file could be extracted if it is deemed necessary.
     *
     */
    GooglePicker.prototype.show = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.ensureInited()];
                    case 1:
                        _a.sent();
                        return [2 /*return*/, new Promise(function (resolve, reject) {
                                var callback = function (response) {
                                    if (response['action'] == google.picker.Action.CANCEL) {
                                        reject();
                                    }
                                    else if (response['action'] == google.picker.Action.PICKED) {
                                        var selected_1 = [];
                                        response.docs.map(function (doc) {
                                            var fileId = doc.id, mimeType = doc.mimeType, name = doc.name, modifiedTime = doc.modifiedTime, iconUrl = doc.iconUrl, url = doc.url;
                                            var canExport = mimeType.includes('google-apps');
                                            selected_1.push({ fileId: fileId, mimeType: mimeType, name: name, modifiedTime: modifiedTime, canExport: canExport, iconUrl: iconUrl, url: url });
                                            // update permissions to read by all in domain
                                            _this.drive.updatePermissions(fileId);
                                        });
                                        console.log(selected_1);
                                        resolve(selected_1);
                                    }
                                };
                                var pickerbuilder = new google.picker.PickerBuilder()
                                    .enableFeature(google.picker.Feature.SUPPORT_DRIVES)
                                    .enableFeature(google.picker.Feature.SUPPORT_TEAM_DRIVES)
                                    .addView(new google.picker.DocsView()
                                    .setOwnedByMe(true) // should this be an option?
                                    .setIncludeFolders(true))
                                    .addView(new google.picker.DocsView()
                                    .setIncludeFolders(true)
                                    .setEnableTeamDrives(true))
                                    .setLocale("sv") // should this be an option?
                                    .setSize(1051, 650) // should this be an option?
                                    .setOAuthToken(_this.authToken)
                                    .setCallback(callback);
                                if (_this.options.upload) {
                                    pickerbuilder.addView(new google.picker.DocsUploadView().setIncludeFolders(true));
                                }
                                if (_this.options.multiple) {
                                    pickerbuilder.enableFeature(google.picker.Feature.MULTISELECT_ENABLED);
                                }
                                if (_this.options.limitType) {
                                    var mimeTypes = mimeTypeCollections[_this.options.limitType];
                                    console.log(mimeTypes);
                                    pickerbuilder.setSelectableMimeTypes(mimeTypes);
                                }
                                _this.picker = pickerbuilder.build();
                                _this.picker.setVisible(true);
                            })];
                }
            });
        });
    };
    return GooglePicker;
}(_google_webclient__WEBPACK_IMPORTED_MODULE_1__["GoogleWebClient"]));



/***/ }),

/***/ "./src/apis/google-webclient.ts":
/*!**************************************!*\
  !*** ./src/apis/google-webclient.ts ***!
  \**************************************/
/*! exports provided: GoogleWebClient */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoogleWebClient", function() { return GoogleWebClient; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _configs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./configs */ "./src/apis/configs.ts");



var GoogleWebClient = /** @class */ (function () {
    function GoogleWebClient(scopes) {
        var _a;
        this.scopes = ['https://www.googleapis.com/auth/userinfo.email', 'https://www.googleapis.com/auth/userinfo.profile'];
        (_a = this.scopes).push.apply(_a, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](scopes));
    }
    GoogleWebClient.prototype.ensureInited = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var SCOPES;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!(typeof gapi === "undefined")) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.loadGapi()];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2:
                        SCOPES = this.scopes.join(' ');
                        return [4 /*yield*/, new Promise(function (resolve, reject) {
                                gapi.load("client:auth2", function () {
                                    // Calls authorize without prompting the user. If authorization hasn't been given by
                                    // the user an error is returned and we call authorize again with consent-screen
                                    var reauthorize = false;
                                    return gapi.auth2.authorize({
                                        client_id: _configs__WEBPACK_IMPORTED_MODULE_2__["WebClientId"],
                                        scope: SCOPES,
                                        response_type: 'permission',
                                        login_hint: _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["default"].currentUser.mail,
                                        prompt: 'none'
                                    }, function (resp) {
                                        console.log(resp);
                                        if (resp.error) {
                                            // no consent given so reauthorize
                                            reauthorize = true;
                                        }
                                        else {
                                            // check if we have all the scopes we want
                                            var scopeset_1 = new Set(resp.scope.split(' '));
                                            var missingScopes = _this.scopes.filter(function (x) { return !scopeset_1.has(x); });
                                            if (missingScopes.length > 0) {
                                                console.log('missing scopes');
                                                // scopes are missing from our consent so reauthorize
                                                reauthorize = true;
                                            }
                                            else {
                                                // everything seems to be ok so store our token
                                                _this.authToken = resp.access_token;
                                                resolve();
                                            }
                                        }
                                        if (reauthorize) {
                                            console.log('reauthorize');
                                            return gapi.auth2.authorize({
                                                client_id: _configs__WEBPACK_IMPORTED_MODULE_2__["WebClientId"],
                                                scope: SCOPES,
                                                response_type: 'permission',
                                                login_hint: _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["default"].currentUser.mail,
                                                prompt: 'consent'
                                            }, function (resp) {
                                                console.log(resp);
                                                if (resp.error) {
                                                    // something is still wrong so throw an error
                                                    reject('Google Web Client: No access token');
                                                }
                                                else {
                                                    // we now have a token (hopefully with the right scopes)
                                                    // should we check again?
                                                    _this.authToken = resp.access_token;
                                                    resolve();
                                                }
                                            });
                                        }
                                        if (resp.expires_in < 500) {
                                            return gapi.auth2.authorize({
                                                client_id: _configs__WEBPACK_IMPORTED_MODULE_2__["WebClientId"],
                                                scope: SCOPES,
                                                response_type: 'permission',
                                                login_hint: _globals_KED_env__WEBPACK_IMPORTED_MODULE_1__["default"].currentUser.mail,
                                                prompt: 'none'
                                            }, function (resp) {
                                                _this.authToken = resp.access_token;
                                                resolve();
                                            });
                                        }
                                    });
                                });
                            })];
                    case 3:
                        _a.sent();
                        if (!(typeof google === "undefined" || typeof google.picker === "undefined")) return [3 /*break*/, 5];
                        return [4 /*yield*/, new Promise(function (resolve) {
                                gapi.load("picker", function () { resolve(); });
                            })];
                    case 4:
                        _a.sent();
                        _a.label = 5;
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    GoogleWebClient.prototype.loadGapi = function () {
        return new Promise(function (resolve, reject) {
            if (typeof gapi !== "undefined")
                return resolve();
            var script = document.createElement("script");
            script.src = "https://apis.google.com/js/client.js?onload=gaapi_loaded";
            document.getElementsByTagName("head")[0].appendChild(script);
            window.gaapi_loaded = resolve;
        });
    };
    return GoogleWebClient;
}());



/***/ }),

/***/ "./src/apis/mock/mock-eds-data.json":
/*!******************************************!*\
  !*** ./src/apis/mock/mock-eds-data.json ***!
  \******************************************/
/*! exports provided: SouthIndia, NorthIndia, default */
/***/ (function(module) {

module.exports = {"SouthIndia":[{"firstTerm":{"startDate":"2015-06-01T00:00:00.000Z","endDate":"2015-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2015-11-01T00:00:00.000Z","endDate":"2016-03-27T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2016-06-23T00:00:00.000Z","endDate":"2016-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2016-11-01T00:00:00.000Z","endDate":"2017-03-25T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2017-06-05T00:00:00.000Z","endDate":"2017-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2017-11-01T00:00:00.000Z","endDate":"2018-03-30T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2018-06-04T00:00:00.000Z","endDate":"2018-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2018-11-01T00:00:00.000Z","endDate":"2019-04-29T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2019-06-03T00:00:00.000Z","endDate":"2019-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2019-11-01T00:00:00.000Z","endDate":"2020-03-27T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2020-06-01T00:00:00.000Z","endDate":"2020-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2020-11-01T00:00:00.000Z","endDate":"2021-03-26T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2021-06-06T00:00:00.000Z","endDate":"2021-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2021-11-01T00:00:00.000Z","endDate":"2022-03-25T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2022-06-05T00:00:00.000Z","endDate":"2022-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2022-11-01T00:00:00.000Z","endDate":"2023-03-31T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2023-06-04T00:00:00.000Z","endDate":"2023-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2023-11-01T00:00:00.000Z","endDate":"2024-03-29T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2024-06-03T00:00:00.000Z","endDate":"2024-10-31T00:00:00.000Z"},"secondTerm":{"startDate":"2024-11-01T00:00:00.000Z","endDate":"2025-03-28T00:00:00.000Z"},"holidays":[]}],"NorthIndia":[{"firstTerm":{"startDate":"2024-04-03T00:00:00.000Z","endDate":"2024-09-30T00:00:00.000Z"},"secondTerm":{"startDate":"2024-10-01T00:00:00.000Z","endDate":"2025-04-02T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2023-04-05T00:00:00.000Z","endDate":"2023-10-01T00:00:00.000Z"},"secondTerm":{"startDate":"2023-10-02T00:00:00.000Z","endDate":"2024-04-02T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2022-04-06T00:00:00.000Z","endDate":"2022-10-03T00:00:00.000Z"},"secondTerm":{"startDate":"2022-10-04T00:00:00.000Z","endDate":"2023-04-04T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2021-04-01T00:00:00.000Z","endDate":"2021-10-04T00:00:00.000Z"},"secondTerm":{"startDate":"2021-10-05T00:00:00.000Z","endDate":"2022-04-05T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2020-04-01T00:00:00.000Z","endDate":"2020-09-28T00:00:00.000Z"},"secondTerm":{"startDate":"2020-09-29T00:00:00.000Z","endDate":"2021-03-31T00:00:00.000Z"},"holidays":[{"startDate":"2020-05-17","endDate":"2020-06-28"}]},{"firstTerm":{"startDate":"2019-04-04T00:00:00.000Z","endDate":"2019-09-30T00:00:00.000Z"},"secondTerm":{"startDate":"2019-10-01T00:00:00.000Z","endDate":"2020-03-31T00:00:00.000Z"},"holidays":[{"startDate":"2019-05-19","endDate":"2019-06-29"}]},{"firstTerm":{"startDate":"2018-04-04T00:00:00.000Z","endDate":"2018-09-30T00:00:00.000Z"},"secondTerm":{"startDate":"2018-10-01T00:00:00.000Z","endDate":"2019-04-03T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2017-04-05T00:00:00.000Z","endDate":"2017-10-02T00:00:00.000Z"},"secondTerm":{"startDate":"2017-10-03T00:00:00.000Z","endDate":"2018-04-03T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2016-04-06T00:00:00.000Z","endDate":"2016-10-03T00:00:00.000Z"},"secondTerm":{"startDate":"2016-10-04T00:00:00.000Z","endDate":"2017-04-04T00:00:00.000Z"},"holidays":[]},{"firstTerm":{"startDate":"2015-04-01T00:00:00.000Z","endDate":"2015-10-05T00:00:00.000Z"},"secondTerm":{"startDate":"2015-10-06T00:00:00.000Z","endDate":"2016-04-05T00:00:00.000Z"},"holidays":[]}]};

/***/ }),

/***/ "./src/components/calendar/course-name-to-css-class.ts":
/*!*************************************************************!*\
  !*** ./src/components/calendar/course-name-to-css-class.ts ***!
  \*************************************************************/
/*! exports provided: courseNameToCssClass */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "courseNameToCssClass", function() { return courseNameToCssClass; });
function courseNameToCssClass(cssPrefix, courseName) {
    return "" + cssPrefix + courseName.substr(0, 3).toLowerCase();
}


/***/ }),

/***/ "./src/components/charts/charts-utils.ts":
/*!***********************************************!*\
  !*** ./src/components/charts/charts-utils.ts ***!
  \***********************************************/
/*! exports provided: getWeekplannerProgressData */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getWeekplannerProgressData", function() { return getWeekplannerProgressData; });
function getWeekplannerProgressData(taskSets) {
    var chartTasks = { completedTasks: 0, totalNumberOfTasks: 0, subjectData: {} };
    taskSets.forEach(function (elem) { return elem.learningGoals.forEach(function (x) {
        var subjectCompletedTasks = x.tasks.filter(function (t) { return t.done; }).length;
        var courseSubjectData = chartTasks.subjectData[elem.courseName];
        if (!courseSubjectData) {
            courseSubjectData = chartTasks.subjectData[elem.courseName] = {
                completedNumberOfTasks: 0,
                numberOfTasks: 0
            };
        }
        courseSubjectData.completedNumberOfTasks += subjectCompletedTasks;
        courseSubjectData.numberOfTasks += x.tasks.length;
        chartTasks.completedTasks += subjectCompletedTasks;
        chartTasks.totalNumberOfTasks += x.tasks.length;
    }); });
    return chartTasks;
}


/***/ }),

/***/ "./src/components/charts/goal-progress.tsx":
/*!*************************************************!*\
  !*** ./src/components/charts/goal-progress.tsx ***!
  \*************************************************/
/*! exports provided: GoalProgress */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GoalProgress", function() { return GoalProgress; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var GoalProgress = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](GoalProgress, _super);
    function GoalProgress() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.createProgress = function () {
            var _a = _this.props, numberOfTasks = _a.numberOfTasks, completedNumberOfTasks = _a.completedNumberOfTasks, maximumTasksDisplayed = _a.maximumTasksDisplayed, backgroundColor = _a.backgroundColor, progressColor = _a.progressColor;
            var progress = [];
            if (numberOfTasks > maximumTasksDisplayed) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "progress-overview" },
                    " ",
                    completedNumberOfTasks,
                    " / ",
                    numberOfTasks,
                    " ");
            }
            for (var taskNo = 1; taskNo <= numberOfTasks; taskNo++) {
                progress.push(react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("svg", { key: taskNo },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("circle", { className: "circle-chart-background", fill: taskNo > completedNumberOfTasks ? backgroundColor : progressColor, cx: "8", cy: "8", r: "8" })));
            }
            return progress;
        };
        return _this;
    }
    GoalProgress.prototype.render = function () {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "goals-progress" }, this.createProgress());
    };
    GoalProgress.defaultProps = {
        numberofTasks: 0,
        completedNumberOfTasks: 0,
        maximumTasksDisplayed: 10,
        backgroundColor: "lightgrey",
        progressColor: "#3dbca2",
    };
    return GoalProgress;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/charts/progress.tsx":
/*!********************************************!*\
  !*** ./src/components/charts/progress.tsx ***!
  \********************************************/
/*! exports provided: Progress */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Progress", function() { return Progress; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var Progress = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Progress, _super);
    function Progress() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Progress.prototype.render = function () {
        var _a = this.props, percentage = _a.percentage, backgroundColor = _a.backgroundColor, progressColor = _a.progressColor;
        var roundedPercentage = Math.round(percentage);
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("svg", { className: "progress-chart", width: "100%", height: "25" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("rect", { fill: backgroundColor, width: "100%", height: "100%", rx: "4" }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("rect", { className: "fill", fill: progressColor, width: roundedPercentage + "%", height: "100%", rx: "4" }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("text", { className: "filled-text", textAnchor: "middle", x: "50%", y: "50%", dy: ".3em" }, roundedPercentage + "%")));
    };
    Progress.defaultProps = {
        percentage: 0,
        backgroundColor: "#F1F5F4",
        progressColor: "#3dbca2",
    };
    return Progress;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-builder-ks/common/banner.tsx":
/*!************************************************************!*\
  !*** ./src/components/course-builder-ks/common/banner.tsx ***!
  \************************************************************/
/*! exports provided: LazyBanner, Banner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LazyBanner", function() { return LazyBanner; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Banner", function() { return Banner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var kedbackend_observable__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/observable */ "./kedbackend/observable.js");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _course_builder_sub_components_ellipsis_loader__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../course-builder/sub-components/ellipsis-loader */ "./src/components/course-builder/sub-components/ellipsis-loader.tsx");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");








var LazyBanner = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](LazyBanner, _super);
    function LazyBanner() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.dragState = new kedbackend_observable__WEBPACK_IMPORTED_MODULE_3__["Emitter"]({ tabBeingDragged: '', tabBeingHovered: '', insertBefore: false, originClientX: -1 });
        return _this;
    }
    LazyBanner.prototype.render = function () {
        var _this = this;
        var lazyProps = this.props.lazyProps;
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-row sv-layout sv-skip-spacer", style: { overflow: "visible" } },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-layout sv-skip-spacer sv-column-12" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-script-portlet sv-portlet sv-skip-spacer" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_4__["LazyContent"], { noError: true }, lazyProps.map(function (_a) {
                        var backgroundImage = _a.backgroundImage;
                        return backgroundImage && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("style", null, "\n              .pageHeader {\n                background-image: url('" + backgroundImage + "') !important;\n              }\n            ");
                    })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "pageHeader" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h1", null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_4__["LazyContent"], { noError: true }, lazyProps.map(function (props) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, props.title); })))),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_4__["LazyContent"], { noError: true }, lazyProps.map(function (_a) {
                            var cornerBox = _a.cornerBox;
                            return cornerBox &&
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "pageHeaderCornerBox" }, cornerBox);
                        })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "buttonsField" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "buttonsContainer" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_4__["LazyContent"], { spinner: react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_ellipsis_loader__WEBPACK_IMPORTED_MODULE_5__["EllipsisLoader"], null) }, lazyProps.map(function (_a) {
                                    var tabs = _a.tabs, buttons = _a.buttons, activeTab = _a.activeTab, blocks = _a.blocks, sortableTabs = _a.sortableTabs, onTabDrop = _a.onTabDrop;
                                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                        blocks ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" }, blocks.map(function (block) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: block.id, className: "horizontalItem top" },
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-vertical" },
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", null, block.name)),
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn-group" }, block.steps.map(function (step) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], { key: step.stepNo },
                                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Link"], { to: step.link, className: "btn btn-small step-button" + (step.isActive ? " activePage" : "") }, step.stepNo),
                                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", null)); }))))); })) : null,
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: 'horizontalMenu' },
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_4__["LazyContent"], null, _this.dragState.map(function (_a) {
                                                var tabBeingDragged = _a.tabBeingDragged, tabBeingHovered = _a.tabBeingHovered, insertBefore = _a.insertBefore, originClientX = _a.originClientX;
                                                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("ul", { className: sortableTabs ? "sortable" : null, onDrop: onTabDrop ? function (ev) {
                                                        if (tabBeingHovered && tabBeingDragged) {
                                                            onTabDrop(tabBeingDragged, tabBeingHovered, insertBefore ?
                                                                'before' : 'after');
                                                        }
                                                        _this.dragState.dispatch(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, _this.dragState.value, { tabBeingHovered: '', tabBeingDragged: '' }));
                                                    } : null },
                                                    tabs.map(function (_a, idx) {
                                                        var name = _a.name, key = _a.key, link = _a.link, onClick = _a.onClick, draggable = _a.draggable;
                                                        var isActive = activeTab === key || (activeTab === '$' && idx === 0);
                                                        var dragState = _this.dragState;
                                                        name = name || Object(_utils_utils__WEBPACK_IMPORTED_MODULE_7__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["(Namnl\u00F6s flik)"], ["(Namnl\u00F6s flik)"])));
                                                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], { key: key },
                                                            insertBefore && tabBeingHovered === key ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { className: "drop-target", onDragOver: function (ev) { return ev.preventDefault(); } }, "\u00A0") : null,
                                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { className: [
                                                                    isActive ? "activePage" : "",
                                                                    key === tabBeingDragged ? "drag-source" : "",
                                                                    sortableTabs && draggable ? "draggable" : ""
                                                                ].filter(function (x) { return x; }).join(' '), draggable: sortableTabs && draggable, onDragStart: sortableTabs && draggable ? function (ev) {
                                                                    ev.dataTransfer.effectAllowed = "move";
                                                                    dragState.dispatch(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState.value, { originClientX: ev.clientX, tabBeingDragged: key }));
                                                                } : null, onDragOver: sortableTabs ? function (ev) {
                                                                    if (tabBeingDragged === key) {
                                                                        dragState.dispatch(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState.value, { tabBeingHovered: '' }));
                                                                        return;
                                                                    }
                                                                    if (!tabBeingDragged)
                                                                        return;
                                                                    ev.preventDefault();
                                                                    ev.dataTransfer.dropEffect = "move";
                                                                    //console.log("onDragOver: " + name + ". idx: " + idx + ". otherIdx: " + otherIdx);
                                                                    dragState.dispatch(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState.value, { tabBeingHovered: key, insertBefore: originClientX > ev.clientX }));
                                                                } : null, onDragEnd: function (ev) {
                                                                    _this.dragState.dispatch(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState.value, { tabBeingHovered: '', tabBeingDragged: '' }));
                                                                } }, link ? link.startsWith(":") ?
                                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: Object(_access_control__WEBPACK_IMPORTED_MODULE_6__["preserveImpersonationQuery"])(link.substr(1), {}) }, name) :
                                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Link"], { to: link }, name) :
                                                                onClick ?
                                                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { onClick: onClick }, name) :
                                                                    name),
                                                            !insertBefore && tabBeingHovered === key ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { className: "drop-target", onDragOver: function (ev) { return ev.preventDefault(); } }, "\u00A0") : null);
                                                    }),
                                                    buttons && buttons.map(function (btn, idx) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("li", { className: "action-tab", key: "btn" + idx }, btn); }));
                                            }))));
                                })))))))));
    };
    return LazyBanner;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var Banner = function (props) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](LazyBanner, { lazyProps: new kedbackend_observable__WEBPACK_IMPORTED_MODULE_3__["Emitter"](props) }); };
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder-ks/common/dialog-content.tsx":
/*!********************************************************************!*\
  !*** ./src/components/course-builder-ks/common/dialog-content.tsx ***!
  \********************************************************************/
/*! exports provided: setupDialogs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setupDialogs", function() { return setupDialogs; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_dialogs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utility-components/dialogs */ "./src/components/utility-components/dialogs.tsx");
/* harmony import */ var _dialog_context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./dialog-context */ "./src/components/course-builder-ks/common/dialog-context.ts");




var setupDialogs = function (Component) {
    return /** @class */ (function (_super) {
        tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](DialogContent, _super);
        function DialogContent(props) {
            var _this = _super.call(this, props) || this;
            _this.state = {
                dialogs: []
            };
            _this.openDialog = _this.openDialog.bind(_this);
            _this.closeDialog = _this.closeDialog.bind(_this);
            return _this;
        }
        DialogContent.prototype.openDialog = function (dialog) {
            this.setState({ dialogs: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](this.state.dialogs, [dialog]) });
        };
        DialogContent.prototype.closeDialog = function () {
            this.setState({ dialogs: this.state.dialogs.slice(0, this.state.dialogs.length - 1) });
        };
        DialogContent.prototype.render = function () {
            var dialogs = this.state.dialogs;
            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_dialog_context__WEBPACK_IMPORTED_MODULE_3__["DialogsContext"].Provider, { value: { openDialog: this.openDialog, closeDialog: this.closeDialog } },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Component, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.props)),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_dialogs__WEBPACK_IMPORTED_MODULE_2__["Dialogs"], { dialogs: dialogs, popDialog: this.closeDialog }));
        };
        return DialogContent;
    }(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component));
};


/***/ }),

/***/ "./src/components/course-builder-ks/common/dialog-context.ts":
/*!*******************************************************************!*\
  !*** ./src/components/course-builder-ks/common/dialog-context.ts ***!
  \*******************************************************************/
/*! exports provided: DialogsContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DialogsContext", function() { return DialogsContext; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var DialogsContext = react__WEBPACK_IMPORTED_MODULE_0___default.a.createContext({ openDialog: null, closeDialog: null });


/***/ }),

/***/ "./src/components/course-builder-ks/common/field-limits.ts":
/*!*****************************************************************!*\
  !*** ./src/components/course-builder-ks/common/field-limits.ts ***!
  \*****************************************************************/
/*! exports provided: FieldLimits */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FieldLimits", function() { return FieldLimits; });
var FieldLimits = {
    MAX_CHARS_IN_CONTENTS: 4000,
    MAX_CHARS_TASK_NAMES: 64,
    MAX_CHARS_TASK_INTRO_TEXT: 200
};


/***/ }),

/***/ "./src/components/course-builder-ks/common/future-abilities-box.tsx":
/*!**************************************************************************!*\
  !*** ./src/components/course-builder-ks/common/future-abilities-box.tsx ***!
  \**************************************************************************/
/*! exports provided: FutureAbilitiesBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FutureAbilitiesBox", function() { return FutureAbilitiesBox; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");


var FutureAbilitiesBox = function (_a) {
    var title = _a.title, selectedFAs = _a.selectedFAs;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_1__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p", null, title), className: "larger" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "abilityList" }, selectedFAs.map(function (fa) {
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { key: fa, className: "contentPart" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "contentText" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p", null, fa)));
        })));
};


/***/ }),

/***/ "./src/components/course-builder-ks/common/select-word-bank.tsx":
/*!**********************************************************************!*\
  !*** ./src/components/course-builder-ks/common/select-word-bank.tsx ***!
  \**********************************************************************/
/*! exports provided: SelectWordBank */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SelectWordBank", function() { return SelectWordBank; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _viewer_editor_course_contents_word_bank_content_settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../viewer-editor/course-contents/word-bank-content-settings */ "./src/components/course-builder-ks/viewer-editor/course-contents/word-bank-content-settings.tsx");
/* harmony import */ var _course_builder_sub_components_ellipsis_loader__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../course-builder/sub-components/ellipsis-loader */ "./src/components/course-builder/sub-components/ellipsis-loader.tsx");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");




var SelectWordBank = function (_a) {
    var subject = _a.subject, step = _a.step, onSelect = _a.onSelect;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { style: { minHeight: 400 } },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0__["Suspense"], { fallback: react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_course_builder_sub_components_ellipsis_loader__WEBPACK_IMPORTED_MODULE_2__["EllipsisLoader"], null) },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_viewer_editor_course_contents_word_bank_content_settings__WEBPACK_IMPORTED_MODULE_1__["WordBankContentSettings"], { subjectName: subject, stepNo: step, onChange: function (_a) {
                    var name = _a.name, key = _a.key;
                    var url = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_3__["cfg"].KED_WORDBANKS_URL + "?subject=" + subject + "&step=" + step + "&list=" + key;
                    onSelect({ name: name, url: url });
                } })));
};


/***/ }),

/***/ "./src/components/course-builder-ks/common/two-columns-page.tsx":
/*!**********************************************************************!*\
  !*** ./src/components/course-builder-ks/common/two-columns-page.tsx ***!
  \**********************************************************************/
/*! exports provided: TwoColumnsPage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TwoColumnsPage", function() { return TwoColumnsPage; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var TwoColumnsPage = function (_a) {
    var left = _a.left, right = _a.right, rightWidth = _a.rightWidth;
    return (react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "sv-row sv-layout" },
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "sv-layout sv-skip-spacer sv-column-12" },
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "sv-spacer-20pxvt sv-vertical sv-layout sv-skip-spacer" },
                react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "pagecontent sv-layout sv-spacer-20pxvt sv-skip-spacer" },
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "sv-row sv-layout sv-skip-spacer" },
                        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "sv-layout sv-skip-spacer sv-column-" + (12 - rightWidth) }, left),
                        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "sv-layout sv-column-" + rightWidth }, right)))))));
};


/***/ }),

/***/ "./src/components/course-builder-ks/logic/change-sort-order.ts":
/*!*********************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/change-sort-order.ts ***!
  \*********************************************************************/
/*! exports provided: reorder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "reorder", function() { return reorder; });
function reorder(docs, sourceId, targetId, placement) {
    var docsWithIdx = docs.map(function (doc, idx) { return ({ doc: doc, idx: idx }); });
    var sourceWithIdx = docsWithIdx.filter(function (_a) {
        var doc = _a.doc;
        return doc.id === sourceId;
    })[0];
    var targetWithIdx = docsWithIdx.filter(function (_a) {
        var doc = _a.doc;
        return doc.id === targetId;
    })[0];
    if (sourceWithIdx && targetWithIdx) {
        var targetIdx = targetWithIdx.idx;
        var newOrder = sourceWithIdx.doc.order;
        if (placement === 'after') {
            // Place source after target
            if (targetIdx === docs.length - 1) {
                // Target is last
                newOrder = Date.now(); // Date.now() is always last (unless a tab is meaningfully given a future order - then let it stay last!)
            }
            else {
                // Give an order between target and its current neighbour to the right
                newOrder = docs[targetIdx].order + Math.random() * (docs[targetIdx + 1].order - docs[targetIdx].order);
            }
        }
        else {
            // Place source before target
            if (targetIdx === 0) {
                // Target is first
                newOrder = Math.round(docs[0].order - 100 - 10000 * Math.random());
            }
            else {
                // Give an order between target and its current neighbor to the left
                newOrder = docs[targetIdx - 1].order + Math.random() * (docs[targetIdx].order - docs[targetIdx - 1].order);
            }
        }
        return newOrder;
    }
    return 0;
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/compute-task-tags-and-subject.ts":
/*!*********************************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/compute-task-tags-and-subject.ts ***!
  \*********************************************************************************/
/*! exports provided: computeTaskTagsAndSubject */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeTaskTagsAndSubject", function() { return computeTaskTagsAndSubject; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");


function computeTaskTagsAndSubject(course, tab, block) {
    var tags = [course.id];
    if (tab.tabClass === 'mission-tab') {
        // If task belongs to a mission tab,
        // it should be tagged with all the subjects of the course
        var otherSubjectTabs = course.tabs
            .filter(function (tab) { return tab.tabClass === 'subject-tab'; });
        var subjects = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["distinct"])(otherSubjectTabs.map(function (tab) { return tab.subject; }), function (s) { return s.subjectCode; });
        var courseCodeTags = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["distinct"])(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["flatten"])(otherSubjectTabs.map(function (tab) { return tab.tags.filter(function (tag) { return tag.startsWith("course:"); }); })));
        tags.push.apply(tags, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](subjects.map(function (s) { return "sub:" + s.subjectCode; })));
        tags.push.apply(tags, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](courseCodeTags));
        var subject = subjects.map(function (s) { return s.subjectName; }).join(', ');
        return { tags: tags, subject: subject };
    }
    else {
        tags.push.apply(tags, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"]((tab || block).tags.filter(function (tag) { return tag.startsWith("course:"); })));
        if (course.type === 'theme-course')
            tags.push.apply(tags, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](tab.tags.filter(function (tag) { return tag.startsWith("sub:"); })));
        else
            tags.push.apply(tags, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](block.tags.filter(function (tag) { return tag.startsWith("sub:"); })));
        var subject = course.type === 'theme-course' ?
            tab.subject.subjectName :
            course.subject.subjectName;
        return { tags: tags, subject: subject };
    }
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/course-instance-tags.ts":
/*!************************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/course-instance-tags.ts ***!
  \************************************************************************/
/*! exports provided: getSubjectCodes, getSchoolYears, computeCourseInstanceTags, computeTagsFromSchoolYears, computeTagsFromSubjectCodes */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSubjectCodes", function() { return getSubjectCodes; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSchoolYears", function() { return getSchoolYears; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeCourseInstanceTags", function() { return computeCourseInstanceTags; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeTagsFromSchoolYears", function() { return computeTagsFromSchoolYears; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeTagsFromSubjectCodes", function() { return computeTagsFromSubjectCodes; });
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");

function getSubjectCodes(tags) {
    return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_0__["distinct"])((tags || [])
        .filter(function (tag) { return tag.startsWith("sub:"); })
        .map(function (tag) { return tag.substr("sub:".length); }));
    ;
}
function getSchoolYears(tags) {
    return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_0__["distinct"])((tags || [])
        .filter(function (tag) { return tag.startsWith("course:"); })
        .map(function (tag) { return tag.substr(tag.indexOf("|") + 1); }) // School year is concatenated as pipe + schoolyear. Example: "GRGRFYS01|4-6"
    );
}
function computeCourseInstanceTags(tags, subjectCodes, schoolYears) {
    var otherTags = (tags || []).filter(function (tag) { return !tag.startsWith("course:") && !tag.startsWith("sub:"); });
    var subjectTags = subjectCodes.map(function (sub) { return "sub:" + sub; });
    var courseTags = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_0__["flatten"])(subjectCodes.map(function (sub) {
        return schoolYears.map(function (schoolYear) {
            return "course:" + sub + "|" + schoolYear;
        });
    }));
    return otherTags
        .concat(subjectTags)
        .concat(courseTags);
}
function computeTagsFromSchoolYears(tags, schoolYears) {
    //schoolYears = schoolYears.map(afterColon);
    var subjectCodes = getSubjectCodes(tags);
    return computeCourseInstanceTags(tags, subjectCodes, schoolYears);
}
function computeTagsFromSubjectCodes(tags, subjectCodes) {
    //subjectCodes = subjectCodes.map(afterColon);
    var schoolYears = getSchoolYears(tags);
    return computeCourseInstanceTags(tags, subjectCodes, schoolYears);
}
function afterColon(str) {
    var pColon = str.indexOf(':');
    return pColon >= 0 ?
        str.substr(pColon + 1) :
        str;
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/get-course-codes-from-tags.ts":
/*!******************************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/get-course-codes-from-tags.ts ***!
  \******************************************************************************/
/*! exports provided: getCourseCodesFromTags */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getCourseCodesFromTags", function() { return getCourseCodesFromTags; });
function getCourseCodesFromTags(tags) {
    return (tags || [])
        .filter(function (tag) { return tag.startsWith("course:"); })
        .map(function (courseTag) { return courseTag.substr("course:".length); });
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/get-draft-id.ts":
/*!****************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/get-draft-id.ts ***!
  \****************************************************************/
/*! exports provided: getDraftId */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDraftId", function() { return getDraftId; });
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");

function getDraftId(school, courseId) {
    return _globals_db__WEBPACK_IMPORTED_MODULE_0__["db"].schools.name(school).single() // Get the school Observable
        .switchMap(function (school) {
        return _globals_db__WEBPACK_IMPORTED_MODULE_0__["db"].branches
            .hasEdgesFrom([school.officialBranchId]) // The official draft has edges from the official school branch
            .name("draft") // There might be other personal drafts in future. Requirement of the common draft is that it is named "draft"
            .tags(courseId) // Find the one tagged with the courseId. There are several drafts - one for each course.
            .idsOnly()
            .map(function (_a) {
            var id = _a.id;
            return id;
        })
            .first();
    });
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/get-standard-courses-with-ordered-requirements.ts":
/*!**************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/get-standard-courses-with-ordered-requirements.ts ***!
  \**************************************************************************************************/
/*! exports provided: getStandardCoursesWithOrderedRequirements */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getStandardCoursesWithOrderedRequirements", function() { return getStandardCoursesWithOrderedRequirements; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/observable */ "./kedbackend/observable.js");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _ordered_requirements__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ordered-requirements */ "./src/components/course-builder-ks/logic/ordered-requirements.ts");




function getStandardCoursesWithOrderedRequirements(courseCodes) {
    var _a;
    var courseCodeTags = courseCodes.map(function (code) { return code.startsWith('course:') ? code : "course:" + code; });
    if (courseCodeTags.length === 0)
        return new kedbackend_observable__WEBPACK_IMPORTED_MODULE_1__["Emitter"]([]);
    return (_a = _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].courses.include("abilities", "centralContent", "knowledgeRequirements")).tags.apply(_a, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](courseCodeTags)).filter(function (course) { return course.isTemplate; }) // BUGBUG: In KG, we would need this filter, not KS. Need another authorized way of getting the standard course only!
        .map(function (course) { return (tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, course, { abilities: Object(_ordered_requirements__WEBPACK_IMPORTED_MODULE_3__["getOrderedDocs"])(course.abilities, course.abilitiesOrder), centralContent: Object(_ordered_requirements__WEBPACK_IMPORTED_MODULE_3__["getOrderedDocs"])(course.centralContent, course.centralContentOrder), knowledgeRequirements: Object(_ordered_requirements__WEBPACK_IMPORTED_MODULE_3__["getOrderedDocs"])(course.knowledgeRequirements, course.knowledgeRequirementsOrder) })); }).toValue();
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/is-employee.ts":
/*!***************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/is-employee.ts ***!
  \***************************************************************/
/*! exports provided: isEmployee */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isEmployee", function() { return isEmployee; });
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");


function isEmployee(atSchool) {
    return atSchool ?
        Object(_access_control__WEBPACK_IMPORTED_MODULE_1__["isTeacherAtSchool"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser, atSchool) || _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.roles.includes("ADMIN") :
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.roles.some(function (role) { return role === 'EMPLOYEE' || role === 'ADMIN'; });
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/is-ked-staff.ts":
/*!****************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/is-ked-staff.ts ***!
  \****************************************************************/
/*! exports provided: isKedStaff */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isKedStaff", function() { return isKedStaff; });
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");


function isKedStaff() {
    return Object(_access_control__WEBPACK_IMPORTED_MODULE_1__["isAdminOrTeacherAtSchool"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser, "standard");
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/list-course-instances.ts":
/*!*************************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/list-course-instances.ts ***!
  \*************************************************************************/
/*! exports provided: listCourseInstances */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "listCourseInstances", function() { return listCourseInstances; });
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");

function listCourseInstances() {
    return _globals_db__WEBPACK_IMPORTED_MODULE_0__["db"].courseInstances.hasEdgesFrom([_globals_db__WEBPACK_IMPORTED_MODULE_0__["globalId"]]);
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/ordered-requirements.ts":
/*!************************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/ordered-requirements.ts ***!
  \************************************************************************/
/*! exports provided: getOrderedDocs, resolveRequirementOrder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getOrderedDocs", function() { return getOrderedDocs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "resolveRequirementOrder", function() { return resolveRequirementOrder; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var kedbackend_observable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/observable */ "./kedbackend/observable.js");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");




function getOrderedDocs(docs, order, _a) {
    var appendLeftovers = (_a === void 0 ? { appendLeftovers: false } : _a).appendLeftovers;
    // Mark doc IDs that where present in given 'order' array.
    // Will be used to find left-overs that were not present in the 'order' array.
    var markedDocs = {};
    if (!docs || !order) {
        // Special case: no docs or no order. Don't fail. Just return docs as is.
        return docs;
    }
    // Map given 'order' array to corresponding docs. Also mark in markedDocs.
    var result = (docs && order ?
        order.map(function (id) {
            markedDocs[id] = true;
            return docs.find(function (doc) { return doc.id === id; });
        }).filter(function (doc) { return !!doc; }) :
        docs);
    if (appendLeftovers) {
        // If any leftovers are there, concat them at the end:
        var leftOvers = docs.filter(function (doc) { return !markedDocs[doc.id]; });
        return result.concat(leftOvers);
    }
    else {
        return result;
    }
}
function resolveRequirementOrder(obj, orderDefiner) {
    var _a;
    var orderDefiningDocObservable;
    if (orderDefiner) {
        // User provided the orderDefining doc (use case is when obj is a Course or Subject, which contains its order by itself. User then provides the Course or Subject in both args)
        orderDefiningDocObservable = new kedbackend_observable__WEBPACK_IMPORTED_MODULE_1__["Emitter"]([orderDefiner]);
    }
    else {
        var courseCodes = obj.tags.filter(function (tag) { return tag.startsWith("course:"); });
        if (courseCodes.length === 0) {
            return new kedbackend_observable__WEBPACK_IMPORTED_MODULE_1__["Emitter"](obj); // No course tags. Not possible to resolve order.
        }
        orderDefiningDocObservable = (_a = _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].courses).tags.apply(_a, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](courseCodes)).toValue();
    }
    return orderDefiningDocObservable.map(function (orderHolders) {
        var abilitiesOrder = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["flatten"])(orderHolders.map(function (orderHolder) { return orderHolder.abilitiesOrder || []; }));
        var ccOrder = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["flatten"])(orderHolders.map(function (orderHolder) { return orderHolder.centralContentOrder || []; }));
        var krOrder = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["flatten"])(orderHolders.map(function (orderHolder) { return orderHolder.knowledgeRequirementsOrder || []; }));
        var objClone = Object.assign({}, obj);
        if (objClone.abilities)
            objClone.abilities = getOrderedDocs(obj.abilities, abilitiesOrder);
        if (objClone.centralContent)
            objClone.centralContent = getOrderedDocs(obj.centralContent, ccOrder);
        if (objClone.knowledgeRequirements)
            objClone.knowledgeRequirements = getOrderedDocs(obj.knowledgeRequirements, krOrder);
        return objClone;
    });
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/publish-course.ts":
/*!******************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/publish-course.ts ***!
  \******************************************************************/
/*! exports provided: publishCourse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "publishCourse", function() { return publishCourse; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");



function publishCourse(_a) {
    var school = _a.school, draftRepo = _a.draftRepo, course = _a.course;
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var destinationRepo, schoolBranchId;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
            switch (_b.label) {
                case 0:
                    if (!(school === "standard")) return [3 /*break*/, 1];
                    // Editing Standard School should merge to reality.
                    draftRepo.merge();
                    destinationRepo = _globals_db__WEBPACK_IMPORTED_MODULE_1__["db"];
                    return [3 /*break*/, 3];
                case 1: return [4 /*yield*/, _globals_db__WEBPACK_IMPORTED_MODULE_1__["db"].schools.name(school).single().map(function (school) { return school.officialBranchId; }).load()];
                case 2:
                    schoolBranchId = _b.sent();
                    draftRepo.merge(schoolBranchId);
                    destinationRepo = _globals_db__WEBPACK_IMPORTED_MODULE_1__["db"].branch(schoolBranchId);
                    _b.label = 3;
                case 3:
                    destinationRepo.courseInstances.update(course, {
                        modifiedDate: Date.now(),
                        modifiedBy: {
                            name: _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.displayName,
                            url: "mailto:" + _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail
                        }
                    });
                    return [2 /*return*/];
            }
        });
    });
}


/***/ }),

/***/ "./src/components/course-builder-ks/logic/task-order.ts":
/*!**************************************************************!*\
  !*** ./src/components/course-builder-ks/logic/task-order.ts ***!
  \**************************************************************/
/*! exports provided: getSortedTasks, computeUpdatedOrder */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSortedTasks", function() { return getSortedTasks; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "computeUpdatedOrder", function() { return computeUpdatedOrder; });
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _ordered_requirements__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ordered-requirements */ "./src/components/course-builder-ks/logic/ordered-requirements.ts");


function getSortedTasks(content) {
    return Object(_ordered_requirements__WEBPACK_IMPORTED_MODULE_1__["getOrderedDocs"])(content.tasks, content.taskOrder, { appendLeftovers: true });
}
function computeUpdatedOrder(docs, currentOrder, source, target, placement, _a) {
    var appendLeftovers = (_a === void 0 ? { appendLeftovers: false } : _a).appendLeftovers;
    var orderedIds = Object(_ordered_requirements__WEBPACK_IMPORTED_MODULE_1__["getOrderedDocs"])(docs, currentOrder, { appendLeftovers: true }).map(function (t) { return t.id; });
    var placeBefore = placement === 'before';
    var result = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_0__["flatten"])(orderedIds
        .filter(function (id) { return id !== source.id; }) // Remove source id
        .map(function (id) { return id !== target.id ?
        // We're not on target
        id :
        // We're on target. Place before or after?
        placeBefore ?
            [source.id, id] :
            [id, source.id]; }));
    return result;
}


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/add-content-button.tsx":
/*!*******************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/add-content-button.tsx ***!
  \*******************************************************************************/
/*! exports provided: AddContentButton */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddContentButton", function() { return AddContentButton; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");





var CONTENT_TYPES = {
    "rich-text": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Textruta"], ["Textruta"]))),
    "youtube-movie": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Youtube film"], ["Youtube film"]))),
    "learning-goals": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4randem\u00E5l och uppgifter"], ["L\u00E4randem\u00E5l och uppgifter"]))),
    "resource-list": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Resurslista"], ["Resurslista"]))),
    "embedded-html": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inb\u00E4ddad HTML"], ["Inb\u00E4ddad HTML"]))),
    "word-bank": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ordbank"], ["Ordbank"])))
};
var ADD_TITLES = {
    "rich-text": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_7 || (templateObject_7 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till text"], ["L\u00E4gg till text"]))),
    "youtube-movie": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_8 || (templateObject_8 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till youtube film"], ["L\u00E4gg till youtube film"]))),
    "learning-goals": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_9 || (templateObject_9 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till l\u00E4randem\u00E5l och uppgifter"], ["L\u00E4gg till l\u00E4randem\u00E5l och uppgifter"]))),
    "resource-list": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_10 || (templateObject_10 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till resurslista"], ["L\u00E4gg till resurslista"]))),
    "embedded-html": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_11 || (templateObject_11 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till inb\u00E4ddad HTML"], ["L\u00E4gg till inb\u00E4ddad HTML"]))),
    "word-bank": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_12 || (templateObject_12 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till ordbank"], ["L\u00E4gg till ordbank"])))
};
var AddContentButton = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AddContentButton, _super);
    function AddContentButton(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            open: false,
            contentType: 'rich-text'
        };
        return _this;
    }
    AddContentButton.prototype.createContent = function () {
        var _a = this.props, tab = _a.tab, branch = _a.branch, type = _a.type;
        var newContent = this.newContent(type || this.state.contentType);
        branch.courseTabs.addRelated(tab.id, "contents", newContent);
        this.setState({ open: false });
    };
    AddContentButton.prototype.newContent = function (contentType) {
        switch (contentType) {
            case "rich-text": return this.newRichText();
            case "learning-goals": return this.newLearningGoal();
            case "embedded-html": return this.newEmbeddedHTML();
            case "word-bank": return this.newWordBank();
            case "resource-list": return this.newResourceList();
            default: throw new Error("Not implemented");
        }
    };
    AddContentButton.prototype.newWordBank = function () {
        return {
            type: 'word-bank',
            tags: [this.props.course.id],
            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
            order: Date.now(),
            locked: this.props.tab.locked,
            lockDelete: Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_4__["isKedStaff"])(),
            hidden: false,
            selectedWordBank: null
        };
    };
    AddContentButton.prototype.newRichText = function () {
        return {
            type: "rich-text",
            tags: [this.props.course.id],
            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
            order: Date.now(),
            locked: this.props.tab.locked,
            lockDelete: Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_4__["isKedStaff"])(),
            hidden: false,
            html: '',
        };
    };
    AddContentButton.prototype.newEmbeddedHTML = function () {
        return {
            type: "embedded-html",
            tags: [this.props.course.id],
            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
            order: Date.now(),
            locked: this.props.tab.locked,
            lockDelete: Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_4__["isKedStaff"])(),
            hidden: false,
            html: ''
        };
    };
    AddContentButton.prototype.newLearningGoal = function () {
        return {
            type: "learning-goals",
            tags: [this.props.course.id],
            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
            locked: this.props.tab.locked,
            lockDelete: Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_4__["isKedStaff"])(),
            hidden: false,
            hasCommonLearningGoals: this.props.course.type === 'theme-course',
            commonLearningGoals: [],
            order: Date.now(),
            hiddenTasks: [],
        };
    };
    AddContentButton.prototype.newResourceList = function () {
        return {
            type: "resource-list",
            tags: [this.props.course.id],
            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
            locked: this.props.tab.locked,
            lockDelete: Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_4__["isKedStaff"])(),
            order: Date.now(),
            hidden: false,
            resources: []
        };
    };
    AddContentButton.prototype.render = function () {
        var _this = this;
        if (this.state.open) {
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("select", { onChange: function (ev) { return _this.setState({ contentType: ev.target.value }); } }, Object.keys(CONTENT_TYPES).map(function (contentType) {
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("option", { key: contentType, value: contentType }, CONTENT_TYPES[contentType]);
                })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn pull-right", onClick: function () { return _this.setState({ open: false }); } }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_13 || (templateObject_13 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Avbryt"], ["Avbryt"])))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn btn-default", onClick: function () { return _this.createContent(); } }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_14 || (templateObject_14 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Skapa"], ["Skapa"])))));
        }
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn", onClick: function () {
                    if (_this.props.type) {
                        _this.createContent();
                    }
                    else {
                        _this.setState({ open: true });
                    }
                } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-plus", "aria-hidden": "true" }),
                this.props.type ? ADD_TITLES[this.props.type] : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_15 || (templateObject_15 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till inneh\u00E5ll"], ["L\u00E4gg till inneh\u00E5ll"])))),
            "\u00A0");
    };
    return AddContentButton;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9, templateObject_10, templateObject_11, templateObject_12, templateObject_13, templateObject_14, templateObject_15;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/add-tab-button.tsx":
/*!***************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/add-tab-button.tsx ***!
  \***************************************************************************/
/*! exports provided: AddTabButton */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddTabButton", function() { return AddTabButtonWithRouter; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router */ "./node_modules/react-router/es/index.js");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");






var AddTabButton = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AddTabButton, _super);
    function AddTabButton(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            editingName: false,
            name: ""
        };
        return _this;
    }
    AddTabButton.prototype.createTab = function (tabName) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, type, branch, draftId, course, school, history, block, stepNo, tabTemplate, newTab;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        this.setState({ editingName: false, name: "" });
                        _a = this.props, type = _a.type, branch = _a.branch, draftId = _a.draftId, course = _a.course, school = _a.school, history = _a.history, block = _a.block, stepNo = _a.stepNo;
                        tabTemplate = {
                            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
                            tabTitle: tabName,
                            name: tabName,
                            order: Date.now(),
                            locked: Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__["isKedStaff"])() ? true : false,
                            acl: ["role:USER:R", "schoolRole:" + school + "/EMPLOYEE:S"],
                        };
                        newTab = (type === 'theme-course-tab' ?
                            tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({ type: 'theme-course-tab', tabClass: 'content-tab', tags: [this.props.course.id] }, tabTemplate) :
                            tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({ type: 'step-course-tab', tabClass: 'content-tab', tags: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](block.tags) }, tabTemplate, { stepNo: stepNo }));
                        /*const topContent: RichTextContent = {
                          type: 'rich-text',
                          id: createUUID(),
                          tags: [this.props.course.id],
                          html: `<h2>${tabName}</h2`,
                          order: Date.now(),
                          locked: true,
                          hidden: false
                        };*/
                        if (newTab.type === 'step-course-tab') {
                            branch.courseBlocks.addRelated(block.id, "tabs", newTab);
                        }
                        else {
                            branch.courseInstances.addRelated(course.id, "tabs", newTab);
                        }
                        //branch.courseTabs.addRelated(newTab.id, "contents", topContent);
                        return [4 /*yield*/, branch.saveNow()];
                    case 1:
                        //branch.courseTabs.addRelated(newTab.id, "contents", topContent);
                        _b.sent();
                        history.push("/" + school + "/courses/" + course.id + "/tabs/" + newTab.id + "/drafts/" + draftId + "/edit");
                        return [2 /*return*/];
                }
            });
        });
    };
    AddTabButton.prototype.render = function () {
        var _this = this;
        var _a = this.props, school = _a.school, course = _a.course, branch = _a.branch;
        var _b = this.state, editingName = _b.editingName, name = _b.name;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { onClick: editingName ? null : function (ev) { return _this.setState({ editingName: true, name: '' }); } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-plus", "aria-hidden": "true" }),
                !editingName ?
                    ' ' + Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ny flik"], ["Ny flik"]))) :
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", style: { color: "black" }, autoFocus: true, placeholder: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Fliknamn"], ["Fliknamn"]))), value: name, size: 30, onChange: function (ev) { return _this.setState({ name: ev.target.value }); }, onKeyPress: function (ev) {
                            if (ev.key === 'Enter') {
                                _this.createTab(name);
                            }
                        }, onBlur: function () { return _this.setState({ editingName: false }); } })));
    };
    return AddTabButton;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));
var AddTabButtonWithRouter = Object(react_router__WEBPACK_IMPORTED_MODULE_4__["withRouter"])(AddTabButton);

var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/clickable-school-div.tsx":
/*!*********************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/clickable-school-div.tsx ***!
  \*********************************************************************************/
/*! exports provided: ClickableSchoolDiv */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ClickableSchoolDiv", function() { return ClickableSchoolDiv; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router */ "./node_modules/react-router/es/index.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _logic_get_draft_id__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../logic/get-draft-id */ "./src/components/course-builder-ks/logic/get-draft-id.ts");









var ClickableSchoolDivWithRouter = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ClickableSchoolDivWithRouter, _super);
    function ClickableSchoolDivWithRouter(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            open: false
        };
        return _this;
    }
    ClickableSchoolDivWithRouter.prototype.open = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var schools;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.setState({ open: true });
                        if (!!this.state.schools) return [3 /*break*/, 2];
                        return [4 /*yield*/, _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].schools
                                .tags("primary")
                                .map(function (_a) {
                                var id = _a.id, name = _a.name, displayName = _a.displayName;
                                return ({ id: id, name: name, displayName: displayName || name || "<namnlös>" });
                            })
                                .toValue().load()];
                    case 1:
                        schools = _a.sent();
                        this.setState({ schools: schools });
                        _a.label = 2;
                    case 2: return [2 /*return*/];
                }
            });
        });
    };
    ClickableSchoolDivWithRouter.prototype.close = function () {
        this.setState({ open: false });
    };
    ClickableSchoolDivWithRouter.prototype.selectSchool = function (school) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            function getRoute() {
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
                    var otherDraftId, _a;
                    return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                        switch (_b.label) {
                            case 0:
                                _a = draftId;
                                if (!_a) return [3 /*break*/, 2];
                                return [4 /*yield*/, Object(_logic_get_draft_id__WEBPACK_IMPORTED_MODULE_8__["getDraftId"])(school, courseId).load()];
                            case 1:
                                _a = (_b.sent());
                                _b.label = 2;
                            case 2:
                                otherDraftId = _a;
                                if (taskId && contentId && otherDraftId && (Object(_access_control__WEBPACK_IMPORTED_MODULE_6__["isAdminOrTeacherAtSchool"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_7__["default"].currentUser, school) || canImpersonate)) {
                                    return [2 /*return*/, "/" + school + "/courses/" + courseId + "/tabs/" + (tabId || "$") + "/contents/" + contentId + "/tasks/" + taskId + "/drafts/" + otherDraftId + "/edit"];
                                }
                                else if (taskId) {
                                    return [2 /*return*/, "/" + school + "/courses/" + courseId + "/tabs/" + (tabId || "$") + "/tasks/" + taskId];
                                }
                                else if (otherDraftId && (Object(_access_control__WEBPACK_IMPORTED_MODULE_6__["isAdminOrTeacherAtSchool"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_7__["default"].currentUser, school) || canImpersonate)) {
                                    return [2 /*return*/, "/" + school + "/courses/" + courseId + "/tabs/" + (tabId || "$") + "/drafts/" + otherDraftId + "/edit"];
                                }
                                else {
                                    return [2 /*return*/, "/" + school + "/courses/" + courseId + "/tabs/" + (tabId || "$")];
                                }
                                return [2 /*return*/];
                        }
                    });
                });
            }
            var _a, match, history, _b, courseId, tabId, draftId, contentId, taskId, canImpersonate, route, baseUrl;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _a = this.props, match = _a.match, history = _a.history;
                        _b = match.params, courseId = _b.courseId, tabId = _b.tabId, draftId = _b.draftId, contentId = _b.contentId, taskId = _b.taskId;
                        canImpersonate = _globals_KED_env__WEBPACK_IMPORTED_MODULE_7__["default"].currentUser.roles.includes("ADMIN") || // Is admin
                            location.search.includes('role=');
                        if (!(school !== this.props.school)) return [3 /*break*/, 2];
                        return [4 /*yield*/, getRoute()];
                    case 1:
                        route = _c.sent();
                        if (canImpersonate) {
                            baseUrl = Object(_access_control__WEBPACK_IMPORTED_MODULE_6__["preserveImpersonationQuery"])(location.pathname, school === 'standard' ?
                                { role: undefined, school: school } :
                                { role: "EMPLOYEE", school: school });
                            location.href = baseUrl + "#" + route;
                        }
                        else {
                            // Not an admin, just redirect to the route and normal access control will apply
                            history.push(route);
                        }
                        _c.label = 2;
                    case 2:
                        this.close();
                        return [2 /*return*/];
                }
            });
        });
    };
    ClickableSchoolDivWithRouter.prototype.render = function () {
        var _this = this;
        var _a = this.props, school = _a.school, draftId = _a.draftId, displayName = _a.displayName;
        var _b = this.state, open = _b.open, schools = _b.schools;
        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { tabIndex: 1, style: { outline: 0 }, onBlur: function () { return _this.close(); } }, !open ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h5", { onClick: function () { return _this.open(); } }, school !== "standard" ? (displayName || school) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Standard"], ["Standard"])))),
            draftId && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { className: "pageSideText" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Arbetsversion"], ["Arbetsversion"]))))) : !schools ?
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_3__["Spinner"], null) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h5", { onClick: function () { return _this.close(); } }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4xla skola"], ["V\u00E4xla skola"])))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("ul", null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("li", { onClick: function () { return _this.selectSchool("standard"); } }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Standard"], ["Standard"])))),
                schools.filter(function (_a) {
                    var name = _a.name;
                    return name !== 'standard';
                })
                    .sort(function (a, b) { return a.displayName.localeCompare(b.displayName, ["sv", "en"]); })
                    .map(function (_a) {
                    var id = _a.id, school = _a.name, displayName = _a.displayName;
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("li", { key: id, onClick: function () { return _this.selectSchool(school); } }, displayName);
                }))));
    };
    return ClickableSchoolDivWithRouter;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component));
var ClickableSchoolDiv = Object(react_router__WEBPACK_IMPORTED_MODULE_4__["withRouter"])(ClickableSchoolDivWithRouter);
var templateObject_1, templateObject_2, templateObject_3, templateObject_4;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-area.tsx":
/*!************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-area.tsx ***!
  \************************************************************************/
/*! exports provided: CourseArea */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseArea", function() { return CourseArea; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var kedbackend_observable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/observable */ "./kedbackend/observable.js");
/* harmony import */ var _course_tab_area__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./course-tab-area */ "./src/components/course-builder-ks/viewer-editor/course-tab-area.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _editor_footer_buttons__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./editor-footer-buttons */ "./src/components/course-builder-ks/viewer-editor/editor-footer-buttons.tsx");
/* harmony import */ var _common_two_columns_page__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../common/two-columns-page */ "./src/components/course-builder-ks/common/two-columns-page.tsx");
/* harmony import */ var _weekplanner_weekplanner__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../weekplanner/weekplanner */ "./src/components/weekplanner/weekplanner.tsx");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../utility-components/horizontal-item */ "./src/components/utility-components/horizontal-item.tsx");
/* harmony import */ var _utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../utility-components/align-horizontal */ "./src/components/utility-components/align-horizontal.tsx");
/* harmony import */ var _logic_publish_course__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../logic/publish-course */ "./src/components/course-builder-ks/logic/publish-course.ts");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _version_history_version_history_box__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./version-history/version-history-box */ "./src/components/course-builder-ks/viewer-editor/version-history/version-history-box.tsx");
/* harmony import */ var _course_contents_resource_list_view__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./course-contents/resource-list-view */ "./src/components/course-builder-ks/viewer-editor/course-contents/resource-list-view.tsx");
var _this = undefined;




















var CourseArea = Object(react_router_dom__WEBPACK_IMPORTED_MODULE_11__["withRouter"])(function (_a) {
    var school = _a.school, courseId = _a.courseId, draftId = _a.draftId, course = _a.course, branch = _a.branch, tabs = _a.tabs, activeTab = _a.activeTab, editMode = _a.editMode, history = _a.history, block = _a.block;
    var tab = tabs.filter(function (tab) { return tab.id === activeTab; })[0] || tabs[0];
    var currentTabResources = tab &&
        branch.courseContents.hasEdgesFrom([tab.id]).filter(function (x) { return x.type === "resource-list"; }).first();
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_common_two_columns_page__WEBPACK_IMPORTED_MODULE_6__["TwoColumnsPage"], { right: editMode && draftId ?
            // In edit mode, show the draft edits to the right
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_version_history_version_history_box__WEBPACK_IMPORTED_MODULE_18__["VersionHistoryBox"], { isAdmin: school === 'standard', branchId: draftId, branchType: "draft-branch" })) :
            // In view mode, show WeekPlanner to the right
            // In view mode, show Resources to the right
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_weekplanner_weekplanner__WEBPACK_IMPORTED_MODULE_7__["WeekPlanner"], { env: _globals_KED_env__WEBPACK_IMPORTED_MODULE_9__["default"], viewCourseUrl: _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_10__["default"].KED_COURSE_VIEWER_URL }),
                currentTabResources && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_contents_resource_list_view__WEBPACK_IMPORTED_MODULE_19__["ResourceListView"], { content: currentTabResources })), rightWidth: 5, left: react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_tab_area__WEBPACK_IMPORTED_MODULE_3__["CourseTabArea"], { school: school, course: course, branch: branch, tab: tab, editMode: editMode, draftId: draftId, block: block, lazyContents: tab ?
                    branch.courseContents.include("tasks").hasEdgesFrom([tab.id]).toValue() :
                    new kedbackend_observable__WEBPACK_IMPORTED_MODULE_2__["Emitter"]([]) }),
            !editMode ? _globals_KED_env__WEBPACK_IMPORTED_MODULE_9__["default"].currentUser.roles.includes("ADMIN") || Object(_access_control__WEBPACK_IMPORTED_MODULE_8__["isTeacherAtSchool"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_9__["default"].currentUser, school) ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_13__["AlignHorizontal"], null,
                    draftId && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_12__["HorizontalItem"], null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn btn-large btn-warning", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                    switch (_a.label) {
                                        case 0: return [4 /*yield*/, Object(_logic_publish_course__WEBPACK_IMPORTED_MODULE_14__["publishCourse"])({
                                                school: school,
                                                course: course,
                                                draftRepo: _globals_db__WEBPACK_IMPORTED_MODULE_15__["db"].branch(draftId)
                                            })];
                                        case 1:
                                            _a.sent();
                                            return [4 /*yield*/, _globals_db__WEBPACK_IMPORTED_MODULE_15__["db"].saveNow()];
                                        case 2:
                                            _a.sent();
                                            history.push("/" + school + "/courses/" + courseId + "/tabs/" + (tab ? tab.id : '$'));
                                            return [2 /*return*/];
                                    }
                                });
                            }); } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-lg fa-play", "aria-hidden": true }),
                            "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Publicera"], ["Publicera"]))))),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_16__["LazyContent"], null, _globals_db__WEBPACK_IMPORTED_MODULE_15__["CourseInstances"].getBranchId(_globals_db__WEBPACK_IMPORTED_MODULE_15__["db"].schools.name(school).single(), courseId).map(function (existingDraftId) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_12__["HorizontalItem"], null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn btn-large", onClick: existingDraftId ?
                                    // Navigate to edit existing draft
                                    function () { return history.push("/" + school + "/courses/" + courseId + "/tabs/" + (tab ? tab.id : '$') + "/drafts/" + existingDraftId + "/edit"); } :
                                    // Create a draft for the branch and then navigate to it
                                    function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                                        var schoolEntity, newDraftId, newDraftBranchDoc, error_1;
                                        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                            switch (_a.label) {
                                                case 0:
                                                    _a.trys.push([0, 4, , 5]);
                                                    return [4 /*yield*/, _globals_db__WEBPACK_IMPORTED_MODULE_15__["db"].schools.name(school).single().load()];
                                                case 1:
                                                    schoolEntity = _a.sent();
                                                    return [4 /*yield*/, Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_17__["computePredestinatedId"])(schoolEntity.officialBranchId + courseId + "draft")];
                                                case 2:
                                                    newDraftId = _a.sent();
                                                    newDraftBranchDoc = {
                                                        id: newDraftId,
                                                        acl: [
                                                            "role:USER:R",
                                                            "schoolRole:" + schoolEntity.name + "/EMPLOYEE:S"
                                                        ],
                                                        name: 'draft',
                                                        schoolId: schoolEntity.id,
                                                        treeParentId: schoolEntity.officialBranchId,
                                                        tags: [courseId]
                                                    };
                                                    _globals_db__WEBPACK_IMPORTED_MODULE_15__["db"].branches.addRelated(schoolEntity.officialBranchId, "approvedChildren", newDraftBranchDoc);
                                                    return [4 /*yield*/, _globals_db__WEBPACK_IMPORTED_MODULE_15__["db"].saveNow()];
                                                case 3:
                                                    _a.sent();
                                                    history.push("/" + school + "/courses/" + courseId + "/tabs/" + (tab ? tab.id : '$') + "/drafts/" + newDraftId + "/edit");
                                                    return [3 /*break*/, 5];
                                                case 4:
                                                    error_1 = _a.sent();
                                                    Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["showError"])(error_1);
                                                    return [3 /*break*/, 5];
                                                case 5: return [2 /*return*/];
                                            }
                                        });
                                    }); } }, existingDraftId ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-lg fa-pencil" }),
                                " ",
                                draftId ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Forts\u00E4tt redigera"], ["Forts\u00E4tt redigera"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Redigera"], ["Redigera"])))) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-lg fa-plus" }),
                                " ", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Skapa skolans version av kursen"], ["Skapa skolans version av kursen"])))))),
                        draftId || !existingDraftId ? undefined : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_12__["HorizontalItem"], null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn btn-large", onClick: function () { return history.push("/" + school + "/courses/" + courseId + "/tabs/" + (tab ? tab.id : '$') + "/drafts/" + existingDraftId); } },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-eye" }),
                                " ", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Visa redigerad version"], ["Visa redigerad version"])))))); })),
                    draftId && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_12__["HorizontalItem"], null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn btn-large", onClick: function () {
                                history.push("/" + school + "/courses/" + courseId + "/tabs/" + (tab ? tab.id : '$'));
                            } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-lg fa-arrow-left" }),
                            " ", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Avsluta redigering"], ["Avsluta redigering"]))))))) : undefined :
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_editor_footer_buttons__WEBPACK_IMPORTED_MODULE_5__["EditorFooterButtons"], { school: school, course: course, tab: tab, activeTab: activeTab, draftId: draftId, courseType: course.type, blockId: block && block.id }))) });
});
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/add-task-button.tsx":
/*!********************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/add-task-button.tsx ***!
  \********************************************************************************************/
/*! exports provided: AddTaskButton */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddTaskButton", function() { return AddTaskButtonWithRouter; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router */ "./node_modules/react-router/es/index.js");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _logic_compute_task_tags_and_subject__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../logic/compute-task-tags-and-subject */ "./src/components/course-builder-ks/logic/compute-task-tags-and-subject.ts");







var AddTaskButton = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AddTaskButton, _super);
    function AddTaskButton(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            editingName: false,
            name: ""
        };
        return _this;
    }
    AddTaskButton.prototype.createTask = function (taskName) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, branch, draftId, course, tab, school, content, history, block, learningGoal, _b, tags, subject, newTask;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        this.setState({ editingName: false, name: "" });
                        _a = this.props, branch = _a.branch, draftId = _a.draftId, course = _a.course, tab = _a.tab, school = _a.school, content = _a.content, history = _a.history, block = _a.block, learningGoal = _a.learningGoal;
                        _b = Object(_logic_compute_task_tags_and_subject__WEBPACK_IMPORTED_MODULE_6__["computeTaskTagsAndSubject"])(course, tab, block), tags = _b.tags, subject = _b.subject;
                        newTask = {
                            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
                            tags: tags,
                            name: taskName,
                            acl: ["role:USER:R", "schoolRole:" + school + "/EMPLOYEE:S"],
                            url: "",
                            taskType: 'task',
                            learningGoal: learningGoal,
                            futureAbilities: [],
                            resources: [],
                            subject: subject
                        };
                        branch.courseContents.addRelated(content.id, "tasks", newTask);
                        return [4 /*yield*/, branch.saveNow()];
                    case 1:
                        _c.sent();
                        history.push("/" + school + "/courses/" + course.id + "/tabs/" + tab.id + "/contents/" + content.id + "/tasks/" + newTask.id + "/drafts/" + draftId + "/edit");
                        return [2 /*return*/];
                }
            });
        });
    };
    AddTaskButton.prototype.render = function () {
        var _this = this;
        var _a = this.state, editingName = _a.editingName, name = _a.name;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn", onClick: editingName ? null : function (ev) { return _this.setState({ editingName: true, name: '' }); } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-plus", "aria-hidden": "true" }),
                !editingName ?
                    ' ' + (Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__["isKedStaff"])() ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till uppgift"], ["L\u00E4gg till uppgift"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till egen uppgift"], ["L\u00E4gg till egen uppgift"])))) :
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", autoFocus: true, placeholder: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgiftens namn"], ["Uppgiftens namn"]))), value: name, size: 50, onChange: function (ev) { return _this.setState({ name: ev.target.value }); }, onKeyPress: function (ev) {
                            if (ev.key === 'Enter') {
                                _this.createTask(name);
                            }
                        }, onBlur: function () { return _this.setState({ editingName: false }); } })));
    };
    return AddTaskButton;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));
var AddTaskButtonWithRouter = Object(react_router__WEBPACK_IMPORTED_MODULE_4__["withRouter"])(AddTaskButton);

var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/content-box.tsx":
/*!****************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/content-box.tsx ***!
  \****************************************************************************************/
/*! exports provided: CourseContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseContentBox", function() { return CourseContentBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _rich_text__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./rich-text */ "./src/components/course-builder-ks/viewer-editor/course-contents/rich-text.tsx");
/* harmony import */ var _learning_tasks_content_box__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./learning-tasks-content-box */ "./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-content-box.tsx");
/* harmony import */ var _embedded_html__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./embedded-html */ "./src/components/course-builder-ks/viewer-editor/course-contents/embedded-html.tsx");
/* harmony import */ var _word_bank_content_box__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./word-bank-content-box */ "./src/components/course-builder-ks/viewer-editor/course-contents/word-bank-content-box.tsx");
/* harmony import */ var _resource_list__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./resource-list */ "./src/components/course-builder-ks/viewer-editor/course-contents/resource-list.tsx");







/*export const ContentBox = ({repo, content}: CourseContentProps)=> (
  <div className={["course-content-box", "ked_boxed"].join(' ')} style={{position: 'relative'}}>
    <ConcreteComponent {...{repo, content}} />
    <div style={{position: 'absolute', top: 0, right: 0}}>
        {moduleOrderedIndex > 0 && <span>
          <i className="fa fa-arrow-circle-up selectable"
            aria-hidden="true"
            onClick={()=>this.props.onReorder(-1)} /> </span>}
        {moduleOrderedIndex < course.modules.length - 1 && <span>
          <i className="fa fa-arrow-circle-down selectable"
            aria-hidden="true"
            onClick={()=>this.props.onReorder(1)} /> </span>}
        <RemoveItem
          title="Ta bort modulen"
          style={{display: 'inline-block'}}
          onClick={()=>confirm(L`Ta bort modul ${module.name}?`) && host.update({modules: {$splice: [[moduleIndex, 1]]}})} />
      </div>
  </div>
)*/
function CourseContentBox(_a) {
    var repo = _a.repo, content = _a.content, siblingContents = _a.siblingContents, editMode = _a.editMode, course = _a.course, draftId = _a.draftId, school = _a.school, courseTab = _a.courseTab, reportNumChars = _a.reportNumChars, maxChars = _a.maxChars, block = _a.block;
    switch (content.type) {
        case "rich-text": return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_rich_text__WEBPACK_IMPORTED_MODULE_2__["RichTextContentBox"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { repo: repo, content: content, editMode: editMode, reportNumChars: reportNumChars, maxChars: maxChars }));
        case "learning-goals": return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_learning_tasks_content_box__WEBPACK_IMPORTED_MODULE_3__["LearningTasksContentBox"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, {
            repo: repo,
            content: content,
            editMode: editMode,
            course: course,
            draftId: draftId,
            courseTab: courseTab,
            school: school,
            block: block
        }));
        case "resource-list": return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_resource_list__WEBPACK_IMPORTED_MODULE_6__["ResourceListContentBox"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { repo: repo, content: content, editMode: editMode }));
        case "embedded-html": return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_embedded_html__WEBPACK_IMPORTED_MODULE_4__["EmbeddedHTMLContentBox"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { repo: repo, content: content, editMode: editMode, reportNumChars: reportNumChars, maxChars: maxChars }));
        case "word-bank": return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_word_bank_content_box__WEBPACK_IMPORTED_MODULE_5__["WordBankContentBox"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, {
            repo: repo,
            editMode: editMode,
            content: content,
            siblingWordBanks: siblingContents.filter(function (c) { return c.type === 'word-bank' && c.id !== content.id; }),
            course: course,
            courseTab: courseTab
        }));
        default: return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null,
            "Ok\u00E4nd inneh\u00E5llstyp: ",
            content.type);
    }
}


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/course-content-types.ts":
/*!************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/course-content-types.ts ***!
  \************************************************************************************************/
/*! exports provided: COURSE_CONTENT_TYPES */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "COURSE_CONTENT_TYPES", function() { return COURSE_CONTENT_TYPES; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");


var COURSE_CONTENT_TYPES = {
    "rich-text": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Textruta"], ["Textruta"]))),
    "youtube-movie": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Youtube film"], ["Youtube film"]))),
    "learning-goals": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4randem\u00E5l och uppgifter"], ["L\u00E4randem\u00E5l och uppgifter"]))),
    "resource-list": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Resurslista"], ["Resurslista"]))),
    "embedded-html": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inb\u00E4ddad HTML"], ["Inb\u00E4ddad HTML"]))),
    "word-bank": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ordbank"], ["Ordbank"])))
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/embedded-html.tsx":
/*!******************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/embedded-html.tsx ***!
  \******************************************************************************************/
/*! exports provided: EmbeddedHTMLContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EmbeddedHTMLContentBox", function() { return EmbeddedHTMLContentBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");




var EmbeddedHTMLContentBox = function (_a) {
    var content = _a.content, repo = _a.repo, editMode = _a.editMode, reportNumChars = _a.reportNumChars, maxChars = _a.maxChars;
    return editMode && (!content.locked || Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_2__["isKedStaff"])()) ?
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h4", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inb\u00E4ddat material"], ["Inb\u00E4ddat material"])))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Klipp in HTML kod nedan"], ["Klipp in HTML kod nedan"])))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("textarea", { style: { width: "100%", height: "100px" }, value: content.html, onChange: function (_a) {
                    var html = _a.target.value;
                    if (html.length > maxChars)
                        return;
                    repo.courseContents.update(content, { html: html });
                    reportNumChars(html.length);
                } })) :
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { dangerouslySetInnerHTML: { __html: content.html } });
};
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/index.ts":
/*!*********************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/index.ts ***!
  \*********************************************************************************/
/*! exports provided: COURSE_CONTENT_TYPES, CourseContentBox, RichTextContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _course_content_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./course-content-types */ "./src/components/course-builder-ks/viewer-editor/course-contents/course-content-types.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "COURSE_CONTENT_TYPES", function() { return _course_content_types__WEBPACK_IMPORTED_MODULE_0__["COURSE_CONTENT_TYPES"]; });

/* harmony import */ var _content_box__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./content-box */ "./src/components/course-builder-ks/viewer-editor/course-contents/content-box.tsx");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CourseContentBox", function() { return _content_box__WEBPACK_IMPORTED_MODULE_1__["CourseContentBox"]; });

/* harmony import */ var _rich_text__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./rich-text */ "./src/components/course-builder-ks/viewer-editor/course-contents/rich-text.tsx");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RichTextContentBox", function() { return _rich_text__WEBPACK_IMPORTED_MODULE_2__["RichTextContentBox"]; });






/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-content-box.tsx":
/*!*******************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-content-box.tsx ***!
  \*******************************************************************************************************/
/*! exports provided: LearningTasksContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LearningTasksContentBox", function() { return LearningTasksContentBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _learning_tasks_settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./learning-tasks-settings */ "./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-settings.tsx");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _learning_tasks_with_common_goals__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./learning-tasks-with-common-goals */ "./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-with-common-goals.tsx");
/* harmony import */ var _learning_tasks_with_separate_goals__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./learning-tasks-with-separate-goals */ "./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-with-separate-goals.tsx");







var LearningTasksContentBox = function (_a) {
    var content = _a.content, editMode = _a.editMode, repo = _a.repo, course = _a.course, school = _a.school, draftId = _a.draftId, courseTab = _a.courseTab, block = _a.block;
    var hasCommonLearningGoals = content.hasCommonLearningGoals, commonLearningGoals = content.commonLearningGoals, tasks = content.tasks;
    var refinedLearningGoals = commonLearningGoals
        .map(function (goal) { return goal.trim(); }).filter(function (goal) { return !!goal; });
    return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "ked_boxed" },
        editMode && (!content.locked || Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_4__["isKedStaff"])()) ?
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_learning_tasks_settings__WEBPACK_IMPORTED_MODULE_3__["LearningTasksSettings"], { course: course, content: content, repo: repo, tab: courseTab }) :
            courseTab.tabClass !== 'mission-tab' ?
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4randem\u00E5l och uppgifter"], ["L\u00E4randem\u00E5l och uppgifter"])))) :
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppdrag"], ["Uppdrag"])))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("hr", null),
        hasCommonLearningGoals && courseTab.tabClass !== 'mission-tab' ?
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_learning_tasks_with_common_goals__WEBPACK_IMPORTED_MODULE_5__["LearningTasksWithCommonGoals"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { content: content, editMode: editMode, repo: repo, course: course, school: school, draftId: draftId, courseTab: courseTab, block: block, learningGoals: refinedLearningGoals })) :
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_learning_tasks_with_separate_goals__WEBPACK_IMPORTED_MODULE_6__["LearningTasksWithSeparateGoals"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { content: content, editMode: editMode, repo: repo, course: course, school: school, draftId: draftId, courseTab: courseTab, block: block, learningGoals: refinedLearningGoals }))));
};
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-settings.tsx":
/*!****************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-settings.tsx ***!
  \****************************************************************************************************/
/*! exports provided: LearningTasksSettings */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LearningTasksSettings", function() { return LearningTasksSettings; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utility-components/align-horizontal */ "./src/components/utility-components/align-horizontal.tsx");
/* harmony import */ var _utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utility-components/horizontal-item */ "./src/components/utility-components/horizontal-item.tsx");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");






var LearningTasksSettings = function (_a) {
    var tab = _a.tab, content = _a.content, repo = _a.repo;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2", null, tab.tabClass !== 'mission-tab' ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4randem\u00E5l och uppgifter"], ["L\u00E4randem\u00E5l och uppgifter"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppdrag"], ["Uppdrag"])))),
        Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__["isKedStaff"])() && tab.tabClass !== 'mission-tab' ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_3__["AlignHorizontal"], null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_4__["HorizontalItem"], null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input", { type: "checkbox", checked: content.hasCommonLearningGoals, onChange: function (ev) { return repo.courseContents.update(content, { hasCommonLearningGoals: !!ev.target.checked }); } })),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_4__["HorizontalItem"], null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null,
                            "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Specificera gemensamma l\u00E4randem\u00E5l f\u00F6r samtliga uppgifter"], ["Specificera gemensamma l\u00E4randem\u00E5l f\u00F6r samtliga uppgifter"]))))))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, content.hasCommonLearningGoals ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ange de gemensamma l\u00E4randem\u00E5len. Ange ett l\u00E4randem\u00E5l per rad."], ["Ange de gemensamma l\u00E4randem\u00E5len. Ange ett l\u00E4randem\u00E5l per rad."]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ange ett l\u00E4randem\u00E5l per rad."], ["Ange ett l\u00E4randem\u00E5l per rad."])))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("textarea", { className: "learning-goal-box", value: content.commonLearningGoals.join('\n'), onChange: function (ev) { return repo.courseContents.update(content, {
                        commonLearningGoals: ev.target.value.split('\n')
                    }); } }))) : null);
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-with-common-goals.tsx":
/*!*************************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-with-common-goals.tsx ***!
  \*************************************************************************************************************/
/*! exports provided: LearningTasksWithCommonGoals */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LearningTasksWithCommonGoals", function() { return LearningTasksWithCommonGoals; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _course_viewer_subcomponents_task_list__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../course-viewer/subcomponents/task-list */ "./src/components/course-viewer/subcomponents/task-list.tsx");
/* harmony import */ var _add_task_button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./add-task-button */ "./src/components/course-builder-ks/viewer-editor/course-contents/add-task-button.tsx");
/* harmony import */ var _utility_components_sortable_task_list__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utility-components/sortable-task-list */ "./src/components/utility-components/sortable-task-list.tsx");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _logic_task_order__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../logic/task-order */ "./src/components/course-builder-ks/logic/task-order.ts");







var LearningTasksWithCommonGoals = function (_a) {
    var school = _a.school, repo = _a.repo, content = _a.content, draftId = _a.draftId, editMode = _a.editMode, course = _a.course, courseTab = _a.courseTab, learningGoals = _a.learningGoals, block = _a.block;
    var tasks = Object(_logic_task_order__WEBPACK_IMPORTED_MODULE_6__["getSortedTasks"])(content);
    var subjectToTasksLookup = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["arrayToLookup"])(tasks, function (t) { return t.subject || ""; });
    var subject = course.type === 'step-course' ?
        course.subject :
        courseTab.subject;
    if (subject && !subjectToTasksLookup[subject.subjectName]) {
        // Make sure we have at least one subject heading if task list is empty:
        subjectToTasksLookup[subject.subjectName] = [];
    }
    // TODO: Kolla här och i learning-tasks-with-separate-goals.
    //  * Behövs subject-lookup?
    //  * Kan vi bryta vy-varianten från edit varianten? (i båda fallen?)
    // Sedan:
    //  * Implementera edit varianterna. Lägg till.
    //  * Implementera sortering funktionalitet i SortableTaskList.
    //  * I all vyer av tasks (subject planner + courseviewer): 
    //    * Gå igenom alla task i den ordningen dom redan är i
    //    * 
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null, Object.keys(subjectToTasksLookup).map(function (subject) {
        var taskList = subjectToTasksLookup[subject];
        var learningModuleTasks = taskList.map(function (task) { return ({
            id: task.id,
            name: task.name,
            url: editMode ?
                "#/" + school + "/courses/" + course.id + "/tabs/" + courseTab.id + "/contents/" + content.id + "/tasks/" + task.id + "/drafts/" + draftId + "/edit" :
                draftId ?
                    "#/" + school + "/courses/" + course.id + "/tabs/" + courseTab.id + "/contents/" + content.id + "/tasks/" + task.id + "/drafts/" + draftId :
                    "#/" + school + "/courses/" + course.id + "/tabs/" + courseTab.id + "/tasks/" + task.id,
            courseName: course.name,
            learningGoal: subject,
            step: courseTab.type === 'step-course-tab' ? courseTab.stepNo : undefined,
            task: task,
            courseInfo: {
                school: school,
                course: course.id,
                tab: courseTab.id
            }
        }); });
        function linkToTask(task) {
            return "/" + school + "/courses/" + course.id + "/tabs/" + courseTab.id + "/contents/" + content.id + "/tasks/" + task.id + "/drafts/" + draftId + "/edit";
        }
        return (react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { key: subject },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h5", null, subject),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("ul", null, learningGoals.map(function (lg) { return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("li", { key: lg }, lg); })),
            !editMode ?
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_course_viewer_subcomponents_task_list__WEBPACK_IMPORTED_MODULE_2__["TaskList"], { learningTasks: learningModuleTasks }) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_utility_components_sortable_task_list__WEBPACK_IMPORTED_MODULE_4__["SortableTaskList"], { taskMetas: learningModuleTasks.map(function (_a) {
                        var task = _a.task;
                        return ({ task: task, isTaskOwner: true });
                    }), renderEditLink: function (_a) {
                        var task = _a.task;
                        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null,
                            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_5__["Link"], { to: linkToTask(task), className: "editItem" }),
                            "\u00A0");
                    }, renderLink: function (_a) {
                        var task = _a.task;
                        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_5__["Link"], { to: linkToTask(task) }, task.name);
                    }, onSort: function (source, target, placement) {
                        var updatedOrder = Object(_logic_task_order__WEBPACK_IMPORTED_MODULE_6__["computeUpdatedOrder"])(content.tasks, content.taskOrder, source, target, placement, { appendLeftovers: true });
                        repo.courseContents.update(content, { taskOrder: updatedOrder });
                    } }),
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_add_task_button__WEBPACK_IMPORTED_MODULE_3__["AddTaskButton"], { branch: repo, content: content, course: course, school: school, draftId: draftId, tab: courseTab, block: block, learningGoal: subject }))));
    }));
};


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-with-separate-goals.tsx":
/*!***************************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/learning-tasks-with-separate-goals.tsx ***!
  \***************************************************************************************************************/
/*! exports provided: LearningTasksWithSeparateGoals */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LearningTasksWithSeparateGoals", function() { return LearningTasksWithSeparateGoals; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _course_viewer_subcomponents_task_list__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../course-viewer/subcomponents/task-list */ "./src/components/course-viewer/subcomponents/task-list.tsx");
/* harmony import */ var _add_task_button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./add-task-button */ "./src/components/course-builder-ks/viewer-editor/course-contents/add-task-button.tsx");
/* harmony import */ var _utility_components_sortable_task_list__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utility-components/sortable-task-list */ "./src/components/utility-components/sortable-task-list.tsx");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _logic_task_order__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../logic/task-order */ "./src/components/course-builder-ks/logic/task-order.ts");








var LearningTasksWithSeparateGoals = function (_a) {
    var school = _a.school, repo = _a.repo, content = _a.content, draftId = _a.draftId, editMode = _a.editMode, course = _a.course, courseTab = _a.courseTab, learningGoals = _a.learningGoals, block = _a.block;
    var tasks = Object(_logic_task_order__WEBPACK_IMPORTED_MODULE_7__["getSortedTasks"])(content);
    var cathegorizedTasks = {};
    var goalToTasksLookup = learningGoals.reduce(function (res, goal) {
        res[goal] = tasks.filter(function (task) {
            if (task.learningGoal && task.learningGoal.split('\n')
                .map(function (line) { return line.trim().toLowerCase(); })
                .includes(goal.toLowerCase())) {
                cathegorizedTasks[task.id] = true;
                return true;
            }
        });
        return res;
    }, {});
    var uncathegorizedTasks = tasks.filter(function (t) { return !cathegorizedTasks[t.id]; });
    if (courseTab.tabClass === 'mission-tab' || tasks.length === 0) {
        goalToTasksLookup[''] = uncathegorizedTasks;
    }
    else if (uncathegorizedTasks.length > 0) {
        goalToTasksLookup[Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00D6vergripande"], ["\u00D6vergripande"])))] = uncathegorizedTasks;
    }
    function linkToTask(task) {
        return "/" + school + "/courses/" + course.id + "/tabs/" + courseTab.id + "/contents/" + content.id + "/tasks/" + task.id + "/drafts/" + draftId + "/edit";
    }
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null, Object.keys(goalToTasksLookup).map(function (goal) {
        var taskList = goalToTasksLookup[goal];
        var learningModuleTasks = taskList.map(function (task) { return ({
            id: task.id,
            name: task.name,
            url: editMode ?
                "#/" + school + "/courses/" + course.id + "/tabs/" + courseTab.id + "/contents/" + content.id + "/tasks/" + task.id + "/drafts/" + draftId + "/edit" :
                draftId ?
                    "#/" + school + "/courses/" + course.id + "/tabs/" + courseTab.id + "/contents/" + content.id + "/tasks/" + task.id + "/drafts/" + draftId :
                    "#/" + school + "/courses/" + course.id + "/tabs/" + courseTab.id + "/tasks/" + task.id,
            courseName: course.name,
            learningGoal: courseTab.tabClass === 'mission-tab' ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppdrag"], ["Uppdrag"]))) : goal,
            step: courseTab.type === 'step-course-tab' ? courseTab.stepNo : undefined,
            task: task,
            courseInfo: {
                school: school,
                course: course.id,
                tab: courseTab.id
            }
        }); });
        return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { key: goal },
            goal && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h4", null, goal),
            !editMode ?
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_viewer_subcomponents_task_list__WEBPACK_IMPORTED_MODULE_3__["TaskList"], { learningTasks: learningModuleTasks }) :
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_sortable_task_list__WEBPACK_IMPORTED_MODULE_5__["SortableTaskList"], { taskMetas: learningModuleTasks.map(function (_a) {
                            var task = _a.task;
                            return ({ task: task, isTaskOwner: true });
                        }), renderEditLink: function (_a) {
                            var task = _a.task;
                            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_6__["Link"], { to: linkToTask(task), className: "editItem" }),
                                "\u00A0");
                        }, renderLink: function (_a) {
                            var task = _a.task;
                            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_6__["Link"], { to: linkToTask(task) }, task.name);
                        }, onSort: function (source, target, placement) {
                            var updatedOrder = Object(_logic_task_order__WEBPACK_IMPORTED_MODULE_7__["computeUpdatedOrder"])(content.tasks, content.taskOrder, source, target, placement, { appendLeftovers: true });
                            repo.courseContents.update(content, { taskOrder: updatedOrder });
                        } }),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_add_task_button__WEBPACK_IMPORTED_MODULE_4__["AddTaskButton"], { branch: repo, content: content, course: course, school: school, draftId: draftId, tab: courseTab, block: block, learningGoal: goal }))));
    }));
};
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/resource-list-view.tsx":
/*!***********************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/resource-list-view.tsx ***!
  \***********************************************************************************************/
/*! exports provided: ResourceListView */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResourceListView", function() { return ResourceListView; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utility-components/live-query-view */ "./src/components/utility-components/live-query-view.tsx");


var ResourceListView = Object(_utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_1__["liveQueryView"])(function (_a) {
    var content = _a.content;
    return content.map(function (contentResources) {
        var resourceList = contentResources;
        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null, resourceList && resourceList.resources.length > 0 && react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "ked_boxed kpMenu" },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h2", null, "Resurser"),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("hr", null),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "taskContainer" }, resourceList.resources.map(function (res) {
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", { href: res.url, target: "_blank" }, res.name)));
            }))));
    });
});


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/resource-list.tsx":
/*!******************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/resource-list.tsx ***!
  \******************************************************************************************/
/*! exports provided: ResourceListContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ResourceListContentBox", function() { return ResourceListContentBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _common_dialog_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/dialog-context */ "./src/components/course-builder-ks/common/dialog-context.ts");
/* harmony import */ var _course_builder_modal_pages_edit_resource__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../course-builder/modal-pages/edit-resource */ "./src/components/course-builder/modal-pages/edit-resource.tsx");






var ResourceListContentBox = function (_a) {
    var content = _a.content, editMode = _a.editMode, repo = _a.repo;
    var resources = content.resources;
    var context = Object(react__WEBPACK_IMPORTED_MODULE_1__["useContext"])(_common_dialog_context__WEBPACK_IMPORTED_MODULE_4__["DialogsContext"]);
    return editMode && (!content.locked || Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_3__["isKedStaff"])()) ?
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "ked_boxed" },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h4", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Resurser"], ["Resurser"])))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "taskContainer" }, resources.map(function (resource, idx) {
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "align-horizontal", key: idx },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", { className: "editItem", onClick: function () { return context.openDialog(react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_modal_pages_edit_resource__WEBPACK_IMPORTED_MODULE_5__["EditResource"], { title: "Edit resource", resource: resource, onSave: function (res) {
                                    resources[idx] = res;
                                    repo.courseContents.update(content, { resources: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](resources) });
                                    context.closeDialog();
                                }, onDelete: function () {
                                    resources.splice(idx, 1);
                                    repo.courseContents.update(content, { resources: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](resources) });
                                    context.closeDialog();
                                } })); } }),
                        "\u00A0"),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "align-horizontal" },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", { href: resource.url }, resource.name)))));
            })),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", { className: "btn", onClick: function () { return context.openDialog(react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_modal_pages_edit_resource__WEBPACK_IMPORTED_MODULE_5__["EditResource"], { title: "Resurs", onSave: function (resource) { repo.courseContents.update(content, { resources: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](resources, [resource]) }); context.closeDialog(); } })); } },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-plus", "aria-hidden": "true" }), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till resurs"], ["L\u00E4gg till resurs"]))))) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null);
};
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/rich-text.tsx":
/*!**************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/rich-text.tsx ***!
  \**************************************************************************************/
/*! exports provided: RichTextContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RichTextContentBox", function() { return RichTextContentBox; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utility-components/wysiwyg */ "./src/components/utility-components/wysiwyg/index.tsx");
/* harmony import */ var _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utility-components/wysiwyg/actions-sv */ "./src/components/utility-components/wysiwyg/actions-sv.ts");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");




var RichTextContentBox = function (_a) {
    var content = _a.content, repo = _a.repo, editMode = _a.editMode, reportNumChars = _a.reportNumChars, maxChars = _a.maxChars;
    return editMode ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null,
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_1__["Wysiwyg"], { html: content.html, defaultActions: _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_2__["default"], readOnly: !editMode || (content.locked && !Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_3__["isKedStaff"])()), reportNumChars: reportNumChars, maxChars: maxChars, actions: [
                "bold",
                "italic",
                "underline",
                "strikethrough",
                "heading2",
                "heading3",
                "olist",
                "ulist",
                "outdent",
                "indent",
                "line",
                "link",
                "image"
            ], onChange: editMode && (function (html) { return repo.courseContents.update(content, { html: html }); }) })) : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null,
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "rich-text-readonly", dangerouslySetInnerHTML: { __html: content.html } }));
};


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/word-bank-content-box.tsx":
/*!**************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/word-bank-content-box.tsx ***!
  \**************************************************************************************************/
/*! exports provided: WordBankContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WordBankContentBox", function() { return WordBankContentBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var _word_bank_content_settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./word-bank-content-settings */ "./src/components/course-builder-ks/viewer-editor/course-contents/word-bank-content-settings.tsx");
/* harmony import */ var _course_builder_sub_components_ellipsis_loader__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../course-builder/sub-components/ellipsis-loader */ "./src/components/course-builder/sub-components/ellipsis-loader.tsx");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");






function WordBankContentBox(_a) {
    var repo = _a.repo, content = _a.content, siblingWordBanks = _a.siblingWordBanks, editMode = _a.editMode, course = _a.course, courseTab = _a.courseTab;
    var selectedWordBank = content.selectedWordBank;
    var subjectName = course.subject.subjectName;
    var stepNo = courseTab.stepNo;
    var iframeSrc = selectedWordBank && _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__["cfg"].KED_WORDBANKS_URL + "?preview=true&subject=" + subjectName + "&step=" + stepNo + "&list=" + selectedWordBank.key;
    var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(200), 2), iframeHeight = _b[0], setIframeHeight = _b[1];
    var iframeRef = Object(react__WEBPACK_IMPORTED_MODULE_1__["useRef"])();
    var wordBanksAlreadyAdded = siblingWordBanks.map(function (c) { return c.selectedWordBank && c.selectedWordBank.key; })
        .filter(function (key) { return !!key; });
    Object(react__WEBPACK_IMPORTED_MODULE_1__["useEffect"])(function () { return setIframeHeight(200); }, [selectedWordBank && selectedWordBank.key]); // Reset iframe height whenever selected word bank changes and let onload fix it.
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
        editMode && (!content.locked || Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__["isKedStaff"])()) && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Suspense, { fallback: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_ellipsis_loader__WEBPACK_IMPORTED_MODULE_4__["EllipsisLoader"], null) },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_word_bank_content_settings__WEBPACK_IMPORTED_MODULE_3__["WordBankContentSettings"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { subjectName: subjectName, stepNo: stepNo, wordBanksAlreadyAdded: wordBanksAlreadyAdded }, { selectedWordBank: selectedWordBank, onChange: function (_a) {
                    var name = _a.name, key = _a.key;
                    repo.courseContents.update(content, { selectedWordBank: { name: name, key: key } });
                } }))),
        selectedWordBank &&
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("iframe", { ref: iframeRef, scrolling: "no", frameBorder: "0", style: {
                    width: "100%",
                    height: iframeHeight,
                    padding: 0,
                    margin: 0
                }, src: iframeSrc, onLoad: function () {
                    setIframeHeight(iframeRef.current.contentWindow.document.body.scrollHeight);
                } }));
}


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-contents/word-bank-content-settings.tsx":
/*!*******************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-contents/word-bank-content-settings.tsx ***!
  \*******************************************************************************************************/
/*! exports provided: WordBankContentSettings */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WordBankContentSettings", function() { return WordBankContentSettings; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var fetch_suspense__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! fetch-suspense */ "./node_modules/fetch-suspense/fetch-suspense.js");
/* harmony import */ var fetch_suspense__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(fetch_suspense__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var react_select__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-select */ "./node_modules/react-select/dist/react-select.esm.js");






function WordBankContentSettings(_a) {
    var subjectName = _a.subjectName, stepNo = _a.stepNo, selectedWordBank = _a.selectedWordBank, wordBanksAlreadyAdded = _a.wordBanksAlreadyAdded, onChange = _a.onChange;
    var apiUrl = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__["cfg"].KED_ENUM_WORDBANKS_URL + "?sv.contenttype=application/json&subject=" + subjectName + "&step=" + stepNo;
    var availableWordBanks = fetch_suspense__WEBPACK_IMPORTED_MODULE_3___default()(apiUrl);
    // Filter out word banks that was already added to the same tab
    availableWordBanks = availableWordBanks.filter(function (_a) {
        var order = _a.order;
        return (selectedWordBank && order === selectedWordBank.key) ||
            !wordBanksAlreadyAdded ||
            !wordBanksAlreadyAdded.includes(order);
    });
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h3", null, selectedWordBank ? selectedWordBank.name : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4lj ordbank"], ["V\u00E4lj ordbank"])))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_select__WEBPACK_IMPORTED_MODULE_5__["default"], { isMulti: false, placeholder: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4lj bland ordbanker f\u00F6r ", ", steg ", ""], ["V\u00E4lj bland ordbanker f\u00F6r ", ", steg ", ""])), subjectName, stepNo), noOptionsMessage: function () { return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kunde inte hitta tillg\u00E4ngliga ordbanker f\u00F6r ", ", steg ", ""], ["Kunde inte hitta tillg\u00E4ngliga ordbanker f\u00F6r ", ", steg ", ""])), subjectName, stepNo); }, options: availableWordBanks.map(function (_a) {
                var name = _a.name, id = _a.id, order = _a.order, url = _a.url;
                return ({ label: name, value: order });
            }), value: selectedWordBank && { label: selectedWordBank.name, value: selectedWordBank.key }, onChange: function (option) { return onChange({ name: option.label, key: option.value }); } }));
}
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-tab-area.tsx":
/*!****************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-tab-area.tsx ***!
  \****************************************************************************/
/*! exports provided: CourseTabArea */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseTabArea", function() { return CourseTabArea; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utility-components/live-query-view */ "./src/components/utility-components/live-query-view.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _add_content_button__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./add-content-button */ "./src/components/course-builder-ks/viewer-editor/add-content-button.tsx");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _tab_settings__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./tab-settings */ "./src/components/course-builder-ks/viewer-editor/tab-settings.tsx");
/* harmony import */ var _course_tab_content_box__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./course-tab-content-box */ "./src/components/course-builder-ks/viewer-editor/course-tab-content-box.tsx");
/* harmony import */ var _tab_settings_admin__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./tab-settings-admin */ "./src/components/course-builder-ks/viewer-editor/tab-settings-admin.tsx");









var CourseTabArea = Object(_utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__["liveQueryView"])(function (_a) {
    var course = _a.course, branch = _a.branch, block = _a.block, tab = _a.tab, editMode = _a.editMode, lazyContents = _a.lazyContents, school = _a.school, draftId = _a.draftId;
    return lazyContents.map(function (contents) {
        if (!tab) {
            if (editMode)
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Denna kurs saknar inneh\u00E5ll. Skapa ny flik genom knappen ovan"], ["Denna kurs saknar inneh\u00E5ll. Skapa ny flik genom knappen ovan"]))));
            else
                return Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__["isKedStaff"])() ?
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Denna kurs saknar inneh\u00E5ll. V\u00E4lj Redigera knappen f\u00F6r att l\u00E4gga till flikar."], ["Denna kurs saknar inneh\u00E5ll. V\u00E4lj Redigera knappen f\u00F6r att l\u00E4gga till flikar."])))) :
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Denna kurs saknar inneh\u00E5ll."], ["Denna kurs saknar inneh\u00E5ll."]))));
        }
        contents = contents.slice().sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["compareProp"])("order"));
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            editMode ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__["isKedStaff"])() || !tab.locked ?
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_tab_settings__WEBPACK_IMPORTED_MODULE_6__["TabSettings"], { course: course, tab: tab, repo: branch }) :
                    null,
                Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__["isKedStaff"])() ?
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_tab_settings_admin__WEBPACK_IMPORTED_MODULE_8__["TabSettingsAdmin"], { course: course, tab: tab, repo: branch, block: block }) :
                    null) : null,
            contents.map(function (content, contentOrderIndex) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_tab_content_box__WEBPACK_IMPORTED_MODULE_7__["CourseTabContentBox"], { key: content.id, content: content, branch: branch, contentOrderIndex: contentOrderIndex, contents: contents, course: course, draftId: draftId, editMode: editMode, school: school, block: block, tab: tab }); }),
            !!editMode && (Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_5__["isKedStaff"])() || !tab.locked) && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                tab.tabClass === 'word-bank-tab' &&
                    // [ Add Word Bank ] button
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_content_button__WEBPACK_IMPORTED_MODULE_4__["AddContentButton"], { type: "word-bank", tab: tab, branch: branch, course: course }),
                tab.tabClass !== 'word-bank-tab' &&
                    (tab.tabClass === 'mission-tab' || tab.tabClass === 'subject-tab' || course.type === 'step-course') &&
                    !contents.some(function (c) { return c.type === 'learning-goals'; }) &&
                    // [ Add Learning Goals ] button
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_content_button__WEBPACK_IMPORTED_MODULE_4__["AddContentButton"], { type: "learning-goals", tab: tab, branch: branch, course: course }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_content_button__WEBPACK_IMPORTED_MODULE_4__["AddContentButton"], { type: "rich-text", tab: tab, branch: branch, course: course }),
                contents.filter(function (c) { return c.type == "resource-list"; }).length == 0 &&
                    // [ Add Resource ] button
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_content_button__WEBPACK_IMPORTED_MODULE_4__["AddContentButton"], { type: "resource-list", tab: tab, branch: branch, course: course }),
                tab.tabClass === 'intro-tab' || tab.tabClass === 'run-up-tab' &&
                    // [ Add Embedded HTML ] button
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_content_button__WEBPACK_IMPORTED_MODULE_4__["AddContentButton"], { type: "embedded-html", tab: tab, branch: branch, course: course })));
    });
});
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-tab-content-box.tsx":
/*!***********************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-tab-content-box.tsx ***!
  \***********************************************************************************/
/*! exports provided: CourseTabContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseTabContentBox", function() { return CourseTabContentBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _course_contents__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./course-contents */ "./src/components/course-builder-ks/viewer-editor/course-contents/index.ts");
/* harmony import */ var _utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utility-components/align-horizontal */ "./src/components/utility-components/align-horizontal.tsx");
/* harmony import */ var _utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utility-components/horizontal-item */ "./src/components/utility-components/horizontal-item.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _course_builder_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../course-builder/sub-components/remove-item */ "./src/components/course-builder/sub-components/remove-item.tsx");
/* harmony import */ var kedbackend_observable__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! kedbackend/observable */ "./kedbackend/observable.js");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _logic_change_sort_order__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../logic/change-sort-order */ "./src/components/course-builder-ks/logic/change-sort-order.ts");
/* harmony import */ var _common_field_limits__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../common/field-limits */ "./src/components/course-builder-ks/common/field-limits.ts");












var MAX_CHARS_IN_CONTENTS = _common_field_limits__WEBPACK_IMPORTED_MODULE_11__["FieldLimits"].MAX_CHARS_IN_CONTENTS;
var CourseTabContentBox = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](CourseTabContentBox, _super);
    function CourseTabContentBox(props) {
        var _this = _super.call(this, props) || this;
        _this.numCharsObservable = new kedbackend_observable__WEBPACK_IMPORTED_MODULE_8__["Emitter"](0); // Dedicated state for a sub-part of the generated DOM (avoid infinite loop)
        _this.state = {
        //numChars: 0
        };
        return _this;
    }
    CourseTabContentBox.prototype.render = function () {
        var _a = this.props, editMode = _a.editMode, content = _a.content, branch = _a.branch, course = _a.course, tab = _a.tab, school = _a.school, draftId = _a.draftId, contentOrderIndex = _a.contentOrderIndex, contents = _a.contents, block = _a.block;
        var kedStaff = Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_2__["isKedStaff"])();
        //const { numChars } = this.state;
        var numCharsObservable = this.numCharsObservable;
        return !editMode || (content.locked && !kedStaff) ?
            //
            // Not edit mode:
            //
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_contents__WEBPACK_IMPORTED_MODULE_3__["CourseContentBox"], { key: content.id, repo: branch, content: content, siblingContents: contents, course: course, editMode: editMode, courseTab: tab, school: school, draftId: draftId, block: block }) :
            //
            // Edit mode:
            //
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { key: content.id, className: ["course-content-box", content.type !== 'learning-goals' && "ked_boxed"].filter(function (x) { return !!x; }).join(' '), style: { position: 'relative' } },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_4__["AlignHorizontal"], null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_5__["HorizontalItem"], null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { className: "box-mini-label" }, _course_contents__WEBPACK_IMPORTED_MODULE_3__["COURSE_CONTENT_TYPES"][content.type])),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_5__["HorizontalItem"], null, kedStaff ?
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                            "\u00A0",
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input", { type: "checkbox", checked: !content.locked, onChange: function (ev) { return branch.courseContents.update(content, { locked: !ev.target.checked }); } }), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Till\u00E5t redigering"], ["Till\u00E5t redigering"]))),
                            !content.locked ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                                "\u00A0",
                                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input", { type: "checkbox", checked: !content.lockDelete, onChange: function (ev) { return branch.courseContents.update(content, { lockDelete: !ev.target.checked }); } }), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Till\u00E5t d\u00F6lja rutan"], ["Till\u00E5t d\u00F6lja rutan"])))) : null) : null)),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_contents__WEBPACK_IMPORTED_MODULE_3__["CourseContentBox"], { repo: branch, content: content, siblingContents: contents, course: course, editMode: true, school: school, draftId: draftId, courseTab: tab, maxChars: MAX_CHARS_IN_CONTENTS, reportNumChars: function (numChars) {
                        // Avoid setting state because it turns out to be infinite loop.
                        // (setState() leads to re-render of this whole component, leading to
                        // re-render of CourseContentBox, that calls reportNumChars etc...)
                        // Instead we communicate this particular state to a dedicated Observable
                        // that will only update the particular component that is affected by it.
                        numCharsObservable.dispatch(numChars);
                        //this.setState({ numChars });
                    }, block: block }),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { style: { position: 'absolute', top: 0, right: 0 } },
                    (kedStaff || !content.locked) && contentOrderIndex > 0 && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span", null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-arrow-circle-up selectable", "aria-hidden": "true", onClick: function () {
                                var newOrder = Object(_logic_change_sort_order__WEBPACK_IMPORTED_MODULE_10__["reorder"])(contents, content.id, contents[contentOrderIndex - 1].id, "before");
                                if (newOrder) {
                                    branch.courseContents.update(content, { order: newOrder });
                                }
                            } }),
                        " "),
                    (kedStaff || !content.locked) && contentOrderIndex < contents.length - 1 && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("span", null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-arrow-circle-down selectable", "aria-hidden": "true", onClick: function () {
                                var newOrder = Object(_logic_change_sort_order__WEBPACK_IMPORTED_MODULE_10__["reorder"])(contents, content.id, contents[contentOrderIndex + 1].id, "after");
                                if (newOrder) {
                                    branch.courseContents.update(content, { order: newOrder });
                                }
                            } }),
                        " "),
                    kedStaff || !content.lockDelete ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_7__["RemoveItem"], { title: school === 'standard' ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ta bort inneh\u00E5llsrutan"], ["Ta bort inneh\u00E5llsrutan"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["D\u00F6lj inneh\u00E5llsrutan"], ["D\u00F6lj inneh\u00E5llsrutan"]))), style: { display: 'inline-block' }, onClick: function () { return confirm(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ta bort inneh\u00E5ll?"], ["Ta bort inneh\u00E5ll?"])))) && branch.courseTabs.removeRelated(tab.id, "contents", content); } })
                        : null),
                content.type === 'rich-text' ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_9__["LazyContent"], null, numCharsObservable.map(function (numChars) {
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: ["char-counter-bottom"].concat(numChars >= MAX_CHARS_IN_CONTENTS ? "overflowed" : []).join(' ') }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Texten inneh\u00E5ller ", " av max ", " till\u00E5tna tecken"], ["Texten inneh\u00E5ller ", " av max ", " till\u00E5tna tecken"])), numChars, MAX_CHARS_IN_CONTENTS));
                })) :
                    undefined);
    };
    return CourseTabContentBox;
}(react__WEBPACK_IMPORTED_MODULE_1___default.a.Component));

var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-tab/tab-classes.ts":
/*!**********************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-tab/tab-classes.ts ***!
  \**********************************************************************************/
/*! exports provided: CourseTabClasses, TabTypesPerCourseType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseTabClasses", function() { return CourseTabClasses; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TabTypesPerCourseType", function() { return TabTypesPerCourseType; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");


var CourseTabClasses = {
    "intro-tab": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Introduktionsflik"], ["Introduktionsflik"]))),
    "run-up-tab": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Upptaktsflik"], ["Upptaktsflik"]))),
    "subject-tab": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4mnesflik"], ["\u00C4mnesflik"]))),
    "mission-tab": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppdragsflik"], ["Uppdragsflik"]))),
    "content-tab": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Generell flik"], ["Generell flik"]))),
    "teacher-tab": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4rarsida"], ["L\u00E4rarsida"]))),
    "word-bank-tab": Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_7 || (templateObject_7 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ordbank"], ["Ordbank"])))
};
var TabTypesPerCourseType = {
    "step-course": [
        "content-tab",
        "intro-tab",
        "teacher-tab",
        "word-bank-tab"
    ],
    "theme-course": [
        "content-tab",
        "run-up-tab",
        "subject-tab",
        "mission-tab",
        "teacher-tab"
    ]
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/course-viewer-page.tsx":
/*!*******************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/course-viewer-page.tsx ***!
  \*******************************************************************************/
/*! exports provided: CourseViewerPage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseViewerPage", function() { return CourseViewerPage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _common_banner__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../common/banner */ "./src/components/course-builder-ks/common/banner.tsx");
/* harmony import */ var kedbackend_observable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! kedbackend/observable */ "./kedbackend/observable.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var _add_tab_button__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./add-tab-button */ "./src/components/course-builder-ks/viewer-editor/add-tab-button.tsx");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-router */ "./node_modules/react-router/es/index.js");
/* harmony import */ var _course_area__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./course-area */ "./src/components/course-builder-ks/viewer-editor/course-area.tsx");
/* harmony import */ var _task_task_editor__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./task/task-editor */ "./src/components/course-builder-ks/viewer-editor/task/task-editor.tsx");
/* harmony import */ var _clickable_school_div__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./clickable-school-div */ "./src/components/course-builder-ks/viewer-editor/clickable-school-div.tsx");
/* harmony import */ var _logic_is_employee__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../logic/is-employee */ "./src/components/course-builder-ks/logic/is-employee.ts");
/* harmony import */ var _task_viewer_task_viewer_page__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./task/viewer/task-viewer-page */ "./src/components/course-builder-ks/viewer-editor/task/viewer/task-viewer-page.tsx");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _logic_change_sort_order__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../logic/change-sort-order */ "./src/components/course-builder-ks/logic/change-sort-order.ts");


















var CourseViewerPage = Object(react_router__WEBPACK_IMPORTED_MODULE_9__["withRouter"])((function (_a) {
    var school = _a.school, courseId = _a.courseId, activeTab = _a.activeTab, draftId = _a.draftId, editMode = _a.editMode, history = _a.history, contentId = _a.contentId, taskId = _a.taskId;
    var repo = editMode ?
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"] : // In edit mode, do not optimize cache, as it prohibits collaboration
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].optimizeCache();
    var schoolObservable = repo.schools.name(school).single();
    var branchObservable = draftId ? // In edit mode, draftId is defined.
        new kedbackend_observable__WEBPACK_IMPORTED_MODULE_4__["Emitter"](repo.branch(draftId)) :
        schoolObservable.map(function (school) { return repo.branch(school.officialBranchId); });
    var courseObservable = branchObservable.switchMap(function (branch) {
        return branch.courseInstances.include("blocks", "tabs").id(courseId);
    });
    var intermediateObservableUnsorted = courseObservable.combineLatest(schoolObservable)
        .switchMap(function (_a) {
        var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a, 2), course = _b[0], schoolEntity = _b[1];
        var branch = draftId ?
            repo.branch(draftId) :
            repo.branch(schoolEntity.officialBranchId);
        if (course.type === 'theme-course') {
            return new kedbackend_observable__WEBPACK_IMPORTED_MODULE_4__["Emitter"]({ course: course, tabs: course.tabs, branch: branch, block: null, schoolEntity: schoolEntity });
        }
        if (activeTab && activeTab !== '$')
            return branch.courseBlocks.hasEdgesTo([activeTab]).include("tabs").toValue()
                .map(function (_a) {
                var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a, 1), block = _b[0];
                return ({
                    course: course,
                    tabs: block.tabs,
                    branch: branch,
                    block: block || course.blocks[0],
                    schoolEntity: schoolEntity
                });
            });
        if (course.blocks.length > 0)
            return branch.courseBlocks.include("tabs").id(course.blocks[0].id)
                .map(function (block) { return ({
                course: course,
                tabs: block.tabs,
                branch: branch,
                block: block,
                schoolEntity: schoolEntity
            }); });
        return new kedbackend_observable__WEBPACK_IMPORTED_MODULE_4__["Emitter"]({ course: course, tabs: [], branch: branch, block: null, schoolEntity: schoolEntity });
    });
    var intermediateObservable = intermediateObservableUnsorted.map(function (vals) { return (tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, vals, { tabs: vals.tabs && vals.tabs.sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["compareProps"])(["stepNo", "order"])) })); });
    var bannerPropsObservable = intermediateObservable
        .map(function (_a) {
        var course = _a.course, tabs = _a.tabs, branch = _a.branch, block = _a.block, schoolEntity = _a.schoolEntity;
        return getCourseBannerProps(tabs, editMode, school, schoolEntity, draftId, course, branch, activeTab, block);
    });
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_common_banner__WEBPACK_IMPORTED_MODULE_3__["LazyBanner"], { lazyProps: bannerPropsObservable }),
        taskId ? editMode ?
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_16__["LazyContent"], null, intermediateObservable.map(function (_a) {
                var branch = _a.branch, block = _a.block, course = _a.course, tabs = _a.tabs;
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_task_task_editor__WEBPACK_IMPORTED_MODULE_11__["TaskEditor"], { school: school, course: course, draftId: draftId, branch: branch, activeTab: activeTab, contentId: contentId, taskId: taskId, blockId: block && block.id });
            })) :
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_task_viewer_task_viewer_page__WEBPACK_IMPORTED_MODULE_14__["TaskViewerPage"], { school: school, courseId: courseId, lazyRepo: branchObservable, activeTab: activeTab, taskId: taskId, contentId: contentId, draftId: draftId }) :
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_16__["LazyContent"], null, intermediateObservable.map(function (_a) {
                var branch = _a.branch, block = _a.block, course = _a.course, tabs = _a.tabs;
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_area__WEBPACK_IMPORTED_MODULE_10__["CourseArea"], { school: school, courseId: courseId, draftId: draftId, course: course, branch: branch, tabs: tabs, activeTab: activeTab, editMode: editMode, block: block });
            })));
}));
function getCourseBannerProps(tabs, editMode, school, schoolEntity, draftId, course, branch, activeTab, block) {
    var _this = this;
    var kedStaff = Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_15__["isKedStaff"])();
    var courseId = course.id;
    var activeTabObj = tabs.filter(function (tab) { return tab.id === activeTab; })[0] || tabs[0];
    if (course.type === 'step-course' && activeTabObj && activeTabObj.type === 'step-course-tab') {
        tabs = tabs.filter(function (tab) { return tab.type === 'step-course-tab' && tab.stepNo === activeTabObj.stepNo; });
    }
    var bannerTabs = (Object(_logic_is_employee__WEBPACK_IMPORTED_MODULE_13__["isEmployee"])() ? tabs : tabs.filter(function (tab) { return tab.tabClass !== 'teacher-tab'; }))
        .map(function (tab) { return ({
        key: tab.id,
        name: tab.tabTitle,
        draggable: true,
        link: editMode ?
            "/" + school + "/courses/" + courseId + "/tabs/" + tab.id + (draftId ? "/drafts/" + draftId : '') + "/edit" :
            "/" + school + "/courses/" + courseId + "/tabs/" + tab.id + (draftId ? "/drafts/" + draftId : '')
    }); });
    var buttons = [];
    if (editMode && (kedStaff || course.allowAddTabs)) {
        if (course.type === 'theme-course') {
            buttons.push(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_tab_button__WEBPACK_IMPORTED_MODULE_8__["AddTabButton"], { type: "theme-course-tab", key: "$addTab", school: school, course: course, branch: branch, draftId: draftId }));
        }
        else {
            var stepNo = activeTabObj ?
                activeTabObj.stepNo :
                block.stepNumbers[0] || 1;
            buttons.push(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_tab_button__WEBPACK_IMPORTED_MODULE_8__["AddTabButton"], { type: "step-course-tab", key: "$addTab", school: school, course: course, branch: branch, draftId: draftId, block: block, stepNo: stepNo }));
        }
    }
    if (kedStaff) {
        // Remove the "role" attribute from query, as we want to stop impersonating an Employee when using the admin interface
        buttons.push(react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: Object(_access_control__WEBPACK_IMPORTED_MODULE_7__["preserveImpersonationQuery"])(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_6__["default"].KED_SUBJECT_PLANNER_ADMIN_URL, { role: undefined }) +
                ("#/admin/courses/" + courseId + "/settings"), key: "$settings", title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inst\u00E4llningar"], ["Inst\u00E4llningar"]))) },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-cog", "aria-hidden": true }),
            "\u00A0"));
    }
    var bannerProps = {
        title: course.name,
        backgroundImage: null,
        tabs: bannerTabs,
        cornerBox: react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_clickable_school_div__WEBPACK_IMPORTED_MODULE_12__["ClickableSchoolDiv"], { school: school, draftId: draftId, displayName: schoolEntity.displayName || school }),
        buttons: buttons,
        activeTab: activeTab || (bannerTabs[0] && bannerTabs[0].key),
        blocks: course.blocks && course.blocks.sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["compareProp"])("blockNo")).map(function (_a) {
            var blockId = _a.id, name = _a.name, stepNumbers = _a.stepNumbers;
            return ({
                id: blockId,
                name: name,
                steps: stepNumbers.map(function (stepNo) { return ({
                    isActive: activeTabObj && stepNo === activeTabObj.stepNo,
                    stepNo: stepNo,
                    link: "/" + school + "/courses/" + courseId + "/blocks/" + blockId + "/steps/" + stepNo
                }); })
            });
        }),
        sortableTabs: editMode && (kedStaff || course.allowReorderTabs),
        onTabDrop: function (source, target, placement) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
            var newOrder, sourceTab;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                newOrder = Object(_logic_change_sort_order__WEBPACK_IMPORTED_MODULE_17__["reorder"])(tabs, source, target, placement);
                if (newOrder) {
                    sourceTab = tabs.find(function (t) { return t.id === source; });
                    if (sourceTab) {
                        branch.courseTabs.update(sourceTab, { order: newOrder });
                    }
                }
                return [2 /*return*/];
            });
        }); }
    };
    return bannerProps;
}
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/editor-footer-buttons.tsx":
/*!**********************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/editor-footer-buttons.tsx ***!
  \**********************************************************************************/
/*! exports provided: EditorFooterButtons */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditorFooterButtons", function() { return EditorFooterButtons; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router */ "./node_modules/react-router/es/index.js");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _logic_publish_course__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../logic/publish-course */ "./src/components/course-builder-ks/logic/publish-course.ts");
/* harmony import */ var _utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utility-components/horizontal-item */ "./src/components/utility-components/horizontal-item.tsx");
/* harmony import */ var _utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utility-components/align-horizontal */ "./src/components/utility-components/align-horizontal.tsx");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
var _this = undefined;









var EditorFooterButtons = Object(react_router__WEBPACK_IMPORTED_MODULE_3__["withRouter"])(function (_a) {
    var school = _a.school, course = _a.course, tab = _a.tab, activeTab = _a.activeTab, draftId = _a.draftId, history = _a.history, courseType = _a.courseType, blockId = _a.blockId;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
        tab && (Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_8__["isKedStaff"])() || !tab.locked || course.allowRemoveTabs) ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "btn btn-warning pull-right", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                var draftRepo, courseTab, contents;
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            draftRepo = _globals_db__WEBPACK_IMPORTED_MODULE_4__["db"].branch(draftId);
                            return [4 /*yield*/, draftRepo.courseTabs
                                    .include("contents")
                                    .includeIdsOnly()
                                    .id(activeTab)
                                    .load()];
                        case 1:
                            courseTab = _a.sent();
                            return [4 /*yield*/, draftRepo.courseContents
                                    .include("tasks")
                                    .includeIdsOnly()
                                    .ids(courseTab.contents.map(function (_a) {
                                    var id = _a.id;
                                    return id;
                                }))
                                    .toValue().load()];
                        case 2:
                            contents = _a.sent();
                            if (Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_8__["isKedStaff"])() && school === 'standard') {
                                //
                                // Only remove related contents and tasks if we are deleting a physical tab here
                                //
                                contents.forEach(function (content) {
                                    content.tasks.forEach(function (task) {
                                        draftRepo.courseContents.removeRelated(content.id, "tasks", task);
                                    });
                                });
                                courseTab.contents.forEach(function (content) {
                                    draftRepo.courseTabs.removeRelated(courseTab.id, "contents", content);
                                });
                            }
                            if (courseType === 'theme-course') {
                                draftRepo.courseInstances.removeRelated(course.id, "tabs", courseTab);
                            }
                            else if (blockId) {
                                draftRepo.courseBlocks.removeRelated(blockId, "tabs", courseTab);
                            }
                            return [4 /*yield*/, _globals_db__WEBPACK_IMPORTED_MODULE_4__["db"].saveNow()];
                        case 3:
                            _a.sent();
                            history.push("/" + school + "/courses/" + course.id + "/tabs/$/drafts/" + draftId + "/edit");
                            return [2 /*return*/];
                    }
                });
            }); } },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-trash", "aria-hidden": true }),
            "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ta bort fliken"], ["Ta bort fliken"])))) : null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_7__["AlignHorizontal"], null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_6__["HorizontalItem"], null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                history.push("/" + school + "/courses/" + course.id + "/tabs/" + (activeTab || '$') + "/drafts/" + draftId);
                                return [2 /*return*/];
                            });
                        }); } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-eye", "aria-hidden": true }),
                        "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["F\u00F6rhandsgranska"], ["F\u00F6rhandsgranska"]))))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_6__["HorizontalItem"], null,
                    "\u00A0",
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                history.push("/" + school + "/courses/" + course.id + "/history");
                                return [2 /*return*/];
                            });
                        }); } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-history", "aria-hidden": true }),
                        "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Versionshistorik"], ["Versionshistorik"]))))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_6__["HorizontalItem"], null,
                    "\u00A0",
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn btn-warning", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                switch (_a.label) {
                                    case 0: return [4 /*yield*/, Object(_logic_publish_course__WEBPACK_IMPORTED_MODULE_5__["publishCourse"])({
                                            school: school,
                                            course: course,
                                            draftRepo: _globals_db__WEBPACK_IMPORTED_MODULE_4__["db"].branch(draftId)
                                        })];
                                    case 1:
                                        _a.sent();
                                        return [4 /*yield*/, _globals_db__WEBPACK_IMPORTED_MODULE_4__["db"].saveNow()];
                                    case 2:
                                        _a.sent();
                                        history.push("/" + school + "/courses/" + course.id + "/tabs/" + (activeTab || '$'));
                                        return [2 /*return*/];
                                }
                            });
                        }); } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-play", "aria-hidden": true }),
                        "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Publicera"], ["Publicera"]))))))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () {
                return history.push("/" + school + "/courses/" + course.id + "/tabs/" + (activeTab || '$'));
            } },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-arrow-left", "aria-hidden": true }),
            "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Avsluta redigering"], ["Avsluta redigering"])))));
});
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/index.tsx":
/*!******************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/index.tsx ***!
  \******************************************************************/
/*! exports provided: SubjectPlannerViewerApp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SubjectPlannerViewerApp", function() { return SubjectPlannerViewerApp; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _utils_error_success_feedback__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/error-success-feedback */ "./src/utils/error-success-feedback.tsx");
/* harmony import */ var _common_banner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../common/banner */ "./src/components/course-builder-ks/common/banner.tsx");
/* harmony import */ var _utility_components_loading_indicator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utility-components/loading-indicator */ "./src/components/utility-components/loading-indicator.tsx");
/* harmony import */ var _utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utility-components/live-query-view */ "./src/components/utility-components/live-query-view.tsx");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _course_viewer_page__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./course-viewer-page */ "./src/components/course-builder-ks/viewer-editor/course-viewer-page.tsx");
/* harmony import */ var _common_two_columns_page__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../common/two-columns-page */ "./src/components/course-builder-ks/common/two-columns-page.tsx");
/* harmony import */ var _weekplanner_weekplanner__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../weekplanner/weekplanner */ "./src/components/weekplanner/weekplanner.tsx");
/* harmony import */ var _list_courses__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./list-courses */ "./src/components/course-builder-ks/viewer-editor/list-courses/index.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var _redirect_to_step__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./redirect-to-step */ "./src/components/course-builder-ks/viewer-editor/redirect-to-step.tsx");
/* harmony import */ var _version_history__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./version-history */ "./src/components/course-builder-ks/viewer-editor/version-history/index.tsx");
/* harmony import */ var _utils_keep_session_alive__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../utils/keep-session-alive */ "./src/utils/keep-session-alive.ts");
/* harmony import */ var _common_dialog_content__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../common/dialog-content */ "./src/components/course-builder-ks/common/dialog-content.tsx");



















// Keep Session Alive
Object(_utils_keep_session_alive__WEBPACK_IMPORTED_MODULE_17__["keepSessionAlive"])();
var GetMySchool = Object(_utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_6__["liveQueryView"])(function (_a) {
    var render = _a.render;
    return _globals_db__WEBPACK_IMPORTED_MODULE_7__["Schools"].mySchool.map(function (school) { return render(school); });
});
var SubjectPlannerViewerApp = Object(_common_dialog_content__WEBPACK_IMPORTED_MODULE_18__["setupDialogs"])(function () { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { onKeyDown: function (ev) {
        if (ev.which === 83 && (ev.ctrlKey || ev.metaKey)) { // CTRL-S
            ev.preventDefault();
            _globals_db__WEBPACK_IMPORTED_MODULE_7__["db"].saveNow().then(function () {
                /*// When saved, exit edit mode so that one can view the result as users see it.
                if (location.hash.endsWith('/edit')) {
                  location.hash = location.hash.substr(0, location.hash.length - '/edit'.length);
                }*/
            });
        }
    } },
    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["HashRouter"], null,
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { path: "/", exact: true, render: function () { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Redirect"], { to: "/courses" }); } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { path: "/courses", exact: true, render: function () { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_common_banner__WEBPACK_IMPORTED_MODULE_4__["Banner"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_12__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Kurser"], ["Kurser"]))), tabs: [], activeTab: "$" }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_common_two_columns_page__WEBPACK_IMPORTED_MODULE_9__["TwoColumnsPage"], { left: react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_list_courses__WEBPACK_IMPORTED_MODULE_11__["ListCourses"], { showInactive: true }), right: react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_weekplanner_weekplanner__WEBPACK_IMPORTED_MODULE_10__["WeekPlanner"], { env: _globals_KED_env__WEBPACK_IMPORTED_MODULE_13__["default"], viewCourseUrl: _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_14__["default"].KED_COURSE_VIEWER_URL }), rightWidth: 5 })); } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { path: "/courses/:courseId", exact: false, render: function (_a) {
                    var match = _a.match;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](GetMySchool, { render: function (school) {
                            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Redirect"], { to: "/" + school.name + "/courses/" + match.params.courseId });
                        } });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_page__WEBPACK_IMPORTED_MODULE_8__["CourseViewerPage"], { school: school, courseId: courseId });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/tabs/:tabId?", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, tabId = _b.tabId;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_page__WEBPACK_IMPORTED_MODULE_8__["CourseViewerPage"], { school: school, courseId: courseId, activeTab: tabId });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/settings/:draftId", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, draftId = _b.draftId;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_page__WEBPACK_IMPORTED_MODULE_8__["CourseViewerPage"], { school: school, courseId: courseId, activeTab: "$settings", draftId: draftId });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/tabs/:tabId/drafts/:draftId", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, tabId = _b.tabId, draftId = _b.draftId;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_page__WEBPACK_IMPORTED_MODULE_8__["CourseViewerPage"], { school: school, courseId: courseId, activeTab: tabId, draftId: draftId });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/tabs/:tabId/drafts/:draftId/edit", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, tabId = _b.tabId, draftId = _b.draftId;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_page__WEBPACK_IMPORTED_MODULE_8__["CourseViewerPage"], { school: school, courseId: courseId, activeTab: tabId, draftId: draftId, editMode: true });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/tabs/:tabId/tasks/:taskId", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, tabId = _b.tabId, taskId = _b.taskId;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_page__WEBPACK_IMPORTED_MODULE_8__["CourseViewerPage"], { school: school, courseId: courseId, activeTab: tabId, taskId: taskId, editMode: false });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/tabs/:tabId/contents/:contentId/tasks/:taskId/drafts/:draftId", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, tabId = _b.tabId, taskId = _b.taskId, draftId = _b.draftId, contentId = _b.contentId;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_page__WEBPACK_IMPORTED_MODULE_8__["CourseViewerPage"], { school: school, courseId: courseId, activeTab: tabId, taskId: taskId, contentId: contentId, draftId: draftId, editMode: false });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/tabs/:tabId/contents/:contentId/tasks/:taskId/drafts/:draftId/edit", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, tabId = _b.tabId, contentId = _b.contentId, taskId = _b.taskId, draftId = _b.draftId;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_viewer_page__WEBPACK_IMPORTED_MODULE_8__["CourseViewerPage"], { school: school, courseId: courseId, activeTab: tabId, contentId: contentId, taskId: taskId, draftId: draftId, editMode: true });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/blocks/:blockId/steps/:stepNo", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, blockId = _b.blockId, stepNo = _b.stepNo;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_redirect_to_step__WEBPACK_IMPORTED_MODULE_15__["RedirectToStep"], { school: school, courseId: courseId, blockId: blockId, stepNo: stepNo });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_router_dom__WEBPACK_IMPORTED_MODULE_2__["Route"], { exact: true, path: "/:school/courses/:courseId/history", render: function (_a) {
                    var match = _a.match;
                    var _b = match.params, school = _b.school, courseId = _b.courseId, blockId = _b.blockId, stepNo = _b.stepNo;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_version_history__WEBPACK_IMPORTED_MODULE_16__["VersionHistoryPage"], { school: school, courseId: courseId });
                } }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utils_error_success_feedback__WEBPACK_IMPORTED_MODULE_3__["ErrorSuccessFeedback"], null),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_loading_indicator__WEBPACK_IMPORTED_MODULE_5__["LoadingIndicator"], null)))); });
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/list-courses/index.tsx":
/*!*******************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/list-courses/index.tsx ***!
  \*******************************************************************************/
/*! exports provided: ListCourses */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ListCourses", function() { return ListCourses; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utility-components/live-query-view */ "./src/components/utility-components/live-query-view.tsx");
/* harmony import */ var _logic_list_course_instances__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../logic/list-course-instances */ "./src/components/course-builder-ks/logic/list-course-instances.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _student_courses_box__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./student-courses-box */ "./src/components/course-builder-ks/viewer-editor/list-courses/student-courses-box.tsx");






var ListCourses = Object(_utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__["liveQueryView"])(function (_a) {
    var showInactive = _a.showInactive;
    return (showInactive ?
        Object(_logic_list_course_instances__WEBPACK_IMPORTED_MODULE_3__["listCourseInstances"])() :
        Object(_logic_list_course_instances__WEBPACK_IMPORTED_MODULE_3__["listCourseInstances"])().tags("active")).orderBy("name")
        .map(function (_a) {
        var id = _a.id, name = _a.name, type = _a.type, description = _a.description, tags = _a.tags;
        return ({
            id: id,
            name: name,
            type: type,
            tags: tags,
            description: description,
            url: "/courses/" + id
        });
    })
        .groupBy("type")
        .map(function (arraysByType) { return ({
        themeCourses: arraysByType["theme-course"],
        stepCourses: arraysByType["step-course"]
    }); })
        .map(function (_a) {
        var themeCourses = _a.themeCourses, stepCourses = _a.stepCourses;
        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            themeCourses && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_student_courses_box__WEBPACK_IMPORTED_MODULE_5__["StudentCoursesBox"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Temakurser"], ["Temakurser"]))), courses: themeCourses }),
            stepCourses && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_student_courses_box__WEBPACK_IMPORTED_MODULE_5__["StudentCoursesBox"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Stegkurser"], ["Stegkurser"]))), courses: stepCourses }));
    });
});
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/list-courses/student-courses-box.tsx":
/*!*********************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/list-courses/student-courses-box.tsx ***!
  \*********************************************************************************************/
/*! exports provided: StudentCoursesBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StudentCoursesBox", function() { return StudentCoursesBox; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utility-components/align-horizontal */ "./src/components/utility-components/align-horizontal.tsx");
/* harmony import */ var _utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utility-components/horizontal-item */ "./src/components/utility-components/horizontal-item.tsx");




var StudentCoursesBox = function (_a) {
    var title = _a.title, courses = _a.courses;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "ked_boxed" },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("h3", null, title),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "taskContainer odd-even" }, courses.map(function (_a) {
            var id = _a.id, name = _a.name, description = _a.description, tags = _a.tags;
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_2__["AlignHorizontal"], null,
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "studentCourse" },
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_1__["Link"], { to: "/courses/" + id }, name),
                        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p", { className: "small" }, description))),
                tags.includes("active") ? undefined : react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                    react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "pill incomplete" }, "Inaktiv")));
        })));
};


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/redirect-to-step.tsx":
/*!*****************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/redirect-to-step.tsx ***!
  \*****************************************************************************/
/*! exports provided: RedirectToStep */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RedirectToStep", function() { return RedirectToStep; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");





var RedirectToStep = function (_a) {
    var school = _a.school, courseId = _a.courseId, blockId = _a.blockId, stepNo = _a.stepNo;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_1__["LazyContent"], null, _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].optimizeCache().schools.name(school).single()
        .map(function (school) { return _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].branch(school.officialBranchId); })
        .switchMap(function (branchRepo) {
        return branchRepo.courseBlocks.include("tabs").id(blockId)
            .map(function (block) {
            var firstTab = block.tabs.filter(function (tab) { return '' + tab.stepNo === '' + stepNo; }).sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["compareProp"])("order"))[0];
            if (firstTab)
                return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Redirect"], { to: "/" + school + "/courses/" + courseId + "/tabs/" + firstTab.id });
            return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_4__["Redirect"], { to: "/" + school + "/courses/" + courseId });
        });
    }));
};


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/tab-settings-admin.tsx":
/*!*******************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/tab-settings-admin.tsx ***!
  \*******************************************************************************/
/*! exports provided: TabSettingsAdmin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TabSettingsAdmin", function() { return TabSettingsAdmin; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utility-components/align-horizontal */ "./src/components/utility-components/align-horizontal.tsx");
/* harmony import */ var _utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utility-components/horizontal-item */ "./src/components/utility-components/horizontal-item.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../logic/course-instance-tags */ "./src/components/course-builder-ks/logic/course-instance-tags.ts");
/* harmony import */ var _tab_settings_requirements__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./tab-settings-requirements */ "./src/components/course-builder-ks/viewer-editor/tab-settings-requirements.tsx");
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
var _this = undefined;









var TabSettingsAdmin = function (_a) {
    var tab = _a.tab, repo = _a.repo, course = _a.course, block = _a.block;
    var _b = tab.subject ?
        tab.subject :
        course.type === 'theme-course' && course.subjects && course.subjects.length > 0 ?
            { subjectCode: course.subjects[0].code, subjectName: course.subjects[0].name } :
            course.type === 'step-course' ?
                { subjectCode: course.subject.subjectCode, subjectName: course.subject.subjectName } :
                { subjectCode: '', subjectName: '' }, subjectCode = _b.subjectCode, subjectName = _b.subjectName;
    var courseSchoolYears = Object(_logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_5__["getSchoolYears"])(course.tags);
    var schoolYear = Object(_logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_5__["getSchoolYears"])(tab.tags)[0] || courseSchoolYears[0] || null;
    return (
    //
    // Edit "standard" school: Choose tab type
    //
    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "ked_boxed" },
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { className: "box-mini-label" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Administrativa Inst\u00E4llningar f\u00F6r fliken ", ""], ["Administrativa Inst\u00E4llningar f\u00F6r fliken ", ""])), tab.name || tab.tabTitle)),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_2__["AlignHorizontal"], null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input", { type: "checkbox", checked: tab.locked, onChange: function (ev) { return repo.courseTabs.update(tab, { locked: !!ev.target.checked }); } })),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E5s fliken fr\u00E5n redigering f\u00F6rutom d\u00E4r det explicit till\u00E5ts"], ["L\u00E5s fliken fr\u00E5n redigering f\u00F6rutom d\u00E4r det explicit till\u00E5ts"]))))),
        course.type === 'step-course' && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_7__["OpenCloseBox"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Avancerat..."], ["Avancerat..."]))) },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                        var schoolYear;
                        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                            switch (_a.label) {
                                case 0:
                                    schoolYear = Object(_logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_5__["getSchoolYears"])(block.tags)[0];
                                    return [4 /*yield*/, updateSubjectAndSchoolYears(course, course.subject.subjectName, course.subject.subjectCode, schoolYear)];
                                case 1:
                                    _a.sent();
                                    return [2 /*return*/];
                            }
                        });
                    }); } }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["G\u00F6r om kopplingen till \u00E4mne och \u00E5rskursspann"], ["G\u00F6r om kopplingen till \u00E4mne och \u00E5rskursspann"])))))),
        course.type === 'theme-course' && tab.tabClass === 'subject-tab' && !!subjectCode && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null),
            course.subjects.length > 1 && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_2__["AlignHorizontal"], null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("label", { className: "kclabel" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4mne"], ["\u00C4mne"]))))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("select", { value: subjectCode, onChange: function (ev) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            var subjectCode, subjectName;
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                switch (_a.label) {
                                    case 0:
                                        subjectCode = ev.target.value;
                                        subjectName = course.subjects
                                            .filter(function (s) { return s.code === subjectCode; })
                                            .map(function (s) { return s.name; })[0] || subjectCode;
                                        return [4 /*yield*/, updateSubjectAndSchoolYears(course, subjectName, subjectCode, schoolYear)];
                                    case 1:
                                        _a.sent();
                                        return [2 /*return*/];
                                }
                            });
                        }); } }, course.subjects.map(function (_a) {
                        var name = _a.name, code = _a.code;
                        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option", { key: code, value: code }, name);
                    })))),
            courseSchoolYears.length > 1 && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_2__["AlignHorizontal"], null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("label", { className: "kclabel" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4lj \u00E5rskurs"], ["V\u00E4lj \u00E5rskurs"]))))),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("select", { value: schoolYear, onChange: function (ev) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                                var schoolYear, subjectName;
                                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                    switch (_a.label) {
                                        case 0:
                                            schoolYear = ev.target.value;
                                            subjectName = course.subjects
                                                .filter(function (s) { return s.code === subjectCode; })
                                                .map(function (s) { return s.name; })[0] || subjectCode;
                                            return [4 /*yield*/, updateSubjectAndSchoolYears(course, subjectName, subjectCode, schoolYear)];
                                        case 1:
                                            _a.sent();
                                            return [2 /*return*/];
                                    }
                                });
                            }); } }, courseSchoolYears.map(function (year) { return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option", { key: year, value: year }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_7 || (templateObject_7 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C5rskurs ", ""], ["\u00C5rskurs ", ""])), year)); })))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_tab_settings_requirements__WEBPACK_IMPORTED_MODULE_6__["TabRequirements"], { repo: repo, tab: tab })),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_7__["OpenCloseBox"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_8 || (templateObject_8 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Avancerat..."], ["Avancerat..."]))) },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                switch (_a.label) {
                                    case 0: return [4 /*yield*/, updateSubjectAndSchoolYears(course, subjectName, subjectCode, schoolYear)];
                                    case 1:
                                        _a.sent();
                                        return [2 /*return*/];
                                }
                            });
                        }); } }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_9 || (templateObject_9 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["G\u00F6r om kopplingen till \u00E4mne och \u00E5rskursspann"], ["G\u00F6r om kopplingen till \u00E4mne och \u00E5rskursspann"])))))))));
    function updateSubjectAndSchoolYears(course, subjectName, subjectCode, schoolYear) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var tabTags, lgContents, tasks, tasks_1, tasks_1_1, task, tags;
            var e_1, _a;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        tabTags = Object(_logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_5__["computeCourseInstanceTags"])(tab.tags, [subjectCode], [schoolYear]);
                        repo.courseTabs.update(tab, {
                            subject: {
                                subjectCode: subjectCode,
                                subjectName: subjectName
                            },
                            tags: tabTags
                        });
                        return [4 /*yield*/, repo.courseContents
                                .hasEdgesFrom([tab.id])
                                .include("tasks")
                                .includeIdsAndNamesOnly()
                                .toValue().load()];
                    case 1:
                        lgContents = _b.sent();
                        tasks = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["flatten"])(lgContents.map(function (c) { return c.tasks; }));
                        try {
                            for (tasks_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](tasks), tasks_1_1 = tasks_1.next(); !tasks_1_1.done; tasks_1_1 = tasks_1.next()) {
                                task = tasks_1_1.value;
                                tags = Object(_logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_5__["computeCourseInstanceTags"])([course.id], [subjectCode], [schoolYear]);
                                repo.tasks.update(task, { tags: tags, subject: subjectName });
                            }
                        }
                        catch (e_1_1) { e_1 = { error: e_1_1 }; }
                        finally {
                            try {
                                if (tasks_1_1 && !tasks_1_1.done && (_a = tasks_1.return)) _a.call(tasks_1);
                            }
                            finally { if (e_1) throw e_1.error; }
                        }
                        return [2 /*return*/];
                }
            });
        });
    }
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/tab-settings-requirements.tsx":
/*!**************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/tab-settings-requirements.tsx ***!
  \**************************************************************************************/
/*! exports provided: TabRequirements */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TabRequirements", function() { return TabRequirements; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _course_builder_sub_components_knowledge_matrix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../course-builder/sub-components/knowledge-matrix */ "./src/components/course-builder/sub-components/knowledge-matrix.tsx");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _logic_get_course_codes_from_tags__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../logic/get-course-codes-from-tags */ "./src/components/course-builder-ks/logic/get-course-codes-from-tags.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _logic_get_standard_courses_with_ordered_requirements__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../logic/get-standard-courses-with-ordered-requirements */ "./src/components/course-builder-ks/logic/get-standard-courses-with-ordered-requirements.ts");
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _course_builder_sub_components_select_related_docs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../course-builder/sub-components/select-related-docs */ "./src/components/course-builder/sub-components/select-related-docs.tsx");









var TabRequirements = function (_a) {
    var repo = _a.repo, tab = _a.tab;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__["LazyContent"], null, Object(_logic_get_standard_courses_with_ordered_requirements__WEBPACK_IMPORTED_MODULE_6__["getStandardCoursesWithOrderedRequirements"])(Object(_logic_get_course_codes_from_tags__WEBPACK_IMPORTED_MODULE_4__["getCourseCodesFromTags"])(tab.tags))
        .map(function (courseTemplates) { return courseTemplates.length === 0 ?
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Fliken \u00E4r inte kopplad till n\u00E5got \u00E4mne / \u00E5rskurs"], ["Fliken \u00E4r inte kopplad till n\u00E5got \u00E4mne / \u00E5rskurs"]))))
        :
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, courseTemplates.map(function (_a) {
                var id = _a.id, name = _a.name, abilities = _a.abilities, centralContent = _a.centralContent, knowledgeRequirements = _a.knowledgeRequirements;
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { key: id },
                    courseTemplates.length === 1 ? undefined : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h1", null, name),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_7__["OpenCloseBox"], { className: "larger", title: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E5s flikens kunskapskrav"], ["L\u00E5s flikens kunskapskrav"])))) },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Markera de kunskapskrav som \u00E4mnesfliken ska t\u00E4cka."], ["Markera de kunskapskrav som \u00E4mnesfliken ska t\u00E4cka."])))),
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__["LazyContent"], null, repo["knowledge-requirements"].hasEdgesFrom([tab.id]).idsOnly().toValue().map(function (tabsKrs) {
                            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_knowledge_matrix__WEBPACK_IMPORTED_MODULE_2__["KnowledgeMatrix"], { knowledgeRequirements: knowledgeRequirements, markedIds: tabsKrs.map(function (_a) {
                                    var id = _a.id;
                                    return id;
                                }), idsToMarkNotOk: {}, markMode: true, onMarkChanged: function (markedId, isMarked) {
                                    // Remove invalid knowledge requirements (those that are not part of the standard course)
                                    // Can happen after changing school year / course or subject.
                                    var invalidKrs = tabsKrs.filter(function (kr) { return !knowledgeRequirements.some(function (_a) {
                                        var id = _a.id;
                                        return kr.id === id;
                                    }); });
                                    invalidKrs.forEach(function (invalidKr) {
                                        repo.courseTabs.removeRelated(tab.id, "knowledgeRequirements", invalidKr);
                                    });
                                    var markedDoc = knowledgeRequirements.filter(function (_a) {
                                        var id = _a.id;
                                        return id === markedId;
                                    })[0];
                                    if (isMarked) {
                                        repo.courseTabs.addRelated(tab.id, "knowledgeRequirements", markedDoc);
                                    }
                                    else {
                                        repo.courseTabs.removeRelated(tab.id, "knowledgeRequirements", markedDoc);
                                    }
                                } });
                        }))),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__["LazyContent"], null, repo.abilities.hasEdgesFrom([tab.id]).idsOnly().toValue().map(function (tabAbilities) {
                        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_select_related_docs__WEBPACK_IMPORTED_MODULE_8__["SelectRelatedDocs"], { options: abilities, title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E5s flikens f\u00F6rm\u00E5gor"], ["L\u00E5s flikens f\u00F6rm\u00E5gor"]))), markedIds: tabAbilities.map(function (_a) {
                                var id = _a.id;
                                return id;
                            }), markMode: true, 
                            //migratedIds={task && task.migratedTexts && task.migratedTexts.abilities}
                            onMarkChanged: function (markedId, isMarked) {
                                // Remove invalid abilities (those that are not part of the standard course)
                                // Can happen after changing school year / course or subject.
                                var invalidAbilities = tabAbilities.filter(function (a) { return !abilities.some(function (_a) {
                                    var id = _a.id;
                                    return a.id === id;
                                }); });
                                invalidAbilities.forEach(function (invalidAbility) {
                                    repo.courseTabs.removeRelated(tab.id, "abilities", invalidAbility);
                                });
                                var markedDoc = abilities.filter(function (_a) {
                                    var id = _a.id;
                                    return id === markedId;
                                })[0];
                                if (isMarked) {
                                    repo.courseTabs.addRelated(tab.id, "abilities", markedDoc);
                                }
                                else {
                                    repo.courseTabs.removeRelated(tab.id, "abilities", markedDoc);
                                }
                            } });
                    })),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__["LazyContent"], null, repo["central-content"].hasEdgesFrom([tab.id]).idsOnly().toValue().map(function (tabsCCs) {
                        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_select_related_docs__WEBPACK_IMPORTED_MODULE_8__["SelectRelatedDocs"], { options: centralContent, title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E5s flikens centrala inneh\u00E5ll"], ["L\u00E5s flikens centrala inneh\u00E5ll"]))), markedIds: tabsCCs.map(function (cc) { return cc.id; }), markMode: true, 
                            //migratedIds={task && task.migratedTexts && task.migratedTexts.centralContent}
                            onMarkChanged: function (markedId, isMarked) {
                                // Remove invalid central contents (those that are not part of the standard course)
                                // Can happen after changing school year / course or subject.
                                var invalidCentralContents = tabsCCs.filter(function (cc) { return !centralContent.some(function (_a) {
                                    var id = _a.id;
                                    return cc.id === id;
                                }); });
                                invalidCentralContents.forEach(function (invalidCC) {
                                    repo.courseTabs.removeRelated(tab.id, "centralContent", invalidCC);
                                });
                                var markedDoc = centralContent.filter(function (_a) {
                                    var id = _a.id;
                                    return id === markedId;
                                })[0];
                                if (isMarked) {
                                    repo.courseTabs.addRelated(tab.id, "centralContent", markedDoc);
                                }
                                else {
                                    repo.courseTabs.removeRelated(tab.id, "centralContent", markedDoc);
                                }
                            } });
                    })));
            })); }));
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/tab-settings.tsx":
/*!*************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/tab-settings.tsx ***!
  \*************************************************************************/
/*! exports provided: TabSettings */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TabSettings", function() { return TabSettings; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utility-components/align-horizontal */ "./src/components/utility-components/align-horizontal.tsx");
/* harmony import */ var _utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utility-components/horizontal-item */ "./src/components/utility-components/horizontal-item.tsx");
/* harmony import */ var _course_tab_tab_classes__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./course-tab/tab-classes */ "./src/components/course-builder-ks/viewer-editor/course-tab/tab-classes.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../logic/course-instance-tags */ "./src/components/course-builder-ks/logic/course-instance-tags.ts");
/* harmony import */ var _utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../utility-components/form-field-text-input */ "./src/components/utility-components/form-field-text-input.tsx");








var TabSettings = function (_a) {
    var tab = _a.tab, repo = _a.repo, course = _a.course;
    var _b = tab.subject ?
        tab.subject :
        course.type === 'theme-course' && course.subjects && course.subjects.length > 0 ?
            { subjectCode: course.subjects[0].code, subjectName: course.subjects[0].name } :
            { subjectCode: '', subjectName: '' }, subjectCode = _b.subjectCode, subjectName = _b.subjectName;
    var courseSchoolYears = Object(_logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_6__["getSchoolYears"])(course.tags);
    var schoolYear = Object(_logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_6__["getSchoolYears"])(tab.tags)[0] || courseSchoolYears[0] || null;
    return (
    //
    // Edit "standard" school: Choose tab type
    //
    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "ked_boxed" },
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { className: "box-mini-label" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inst\u00E4llningar f\u00F6r fliken ", ""], ["Inst\u00E4llningar f\u00F6r fliken ", ""])), tab.name || tab.tabTitle)),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_2__["AlignHorizontal"], null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("label", { className: "kclabel" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Flikens typ"], ["Flikens typ"]))))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_3__["HorizontalItem"], null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("select", { value: tab.tabClass, onChange: function (ev) {
                        return repo.courseTabs.update(tab, ev.target.value === 'subject-tab' ? {
                            tabClass: ev.target.value,
                            subject: { subjectCode: subjectCode, subjectName: subjectName },
                            tags: Object(_logic_course_instance_tags__WEBPACK_IMPORTED_MODULE_6__["computeCourseInstanceTags"])(tab.tags, [subjectCode], [schoolYear])
                        } : {
                            tabClass: ev.target.value,
                        });
                    } }, _course_tab_tab_classes__WEBPACK_IMPORTED_MODULE_4__["TabTypesPerCourseType"][course.type].map(function (tabClass) {
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("option", { key: tabClass, value: tabClass }, _course_tab_tab_classes__WEBPACK_IMPORTED_MODULE_4__["CourseTabClasses"][tabClass]);
                })))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_7__["TextInput"], { label: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Flikens namn"], ["Flikens namn"]))), id: "TabSettings:name", value: tab.name || tab.tabTitle, onChange: function (name) {
                return repo.courseTabs.update(tab, {
                    name: name,
                    tabTitle: name // Deprecated. Todo: remove.
                });
            } })));
};
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/left-column/edit-requirements.tsx":
/*!***********************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/left-column/edit-requirements.tsx ***!
  \***********************************************************************************************/
/*! exports provided: EditRequirements, EditRequirementsInner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditRequirements", function() { return EditRequirements; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditRequirementsInner", function() { return EditRequirementsInner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _course_builder_sub_components_knowledge_matrix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../course-builder/sub-components/knowledge-matrix */ "./src/components/course-builder/sub-components/knowledge-matrix.tsx");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _logic_ordered_requirements__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../logic/ordered-requirements */ "./src/components/course-builder-ks/logic/ordered-requirements.ts");
/* harmony import */ var _course_builder_sub_components_select_related_docs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../course-builder/sub-components/select-related-docs */ "./src/components/course-builder/sub-components/select-related-docs.tsx");
/* harmony import */ var _utility_components_checklist__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../utility-components/checklist */ "./src/components/utility-components/checklist.tsx");
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _contracts_ked_models__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../contracts/ked-models */ "./src/contracts/ked-models.ts");
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../features */ "./src/features/index.ts");











var EditRequirements = function (_a) {
    var repo = _a.repo, task = _a.task, tabIds = _a.tabIds, uncoveredIds = _a.uncoveredIds, blockId = _a.blockId, allCoveredSentences = _a.allCoveredSentences;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__["LazyContent"], null, blockId ?
        repo.courseBlocks
            .include("abilities", "centralContent", "knowledgeRequirements")
            .id(blockId)
            .map(function (block) { return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(EditRequirementsInner, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { repo: repo, task: task, uncoveredIds: uncoveredIds, tabOrBlock: block, allCoveredSentences: allCoveredSentences }))); }) :
        repo.courseTabs
            .include("abilities", "centralContent", "knowledgeRequirements")
            .ids(tabIds)
            .toValue().map(function (tabs) { return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, tabs.length === 1 ?
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(EditRequirementsInner, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { repo: repo, task: task, uncoveredIds: uncoveredIds, tabOrBlock: tabs[0], allCoveredSentences: allCoveredSentences })) :
            tabs.map(function (tab) { return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_8__["OpenCloseBox"], { key: tab.id, title: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h4", null,
                    tab.name || tab.tabTitle,
                    tab.subject && tab.subject.subjectName && tab.subject.subjectName !== (tab.name || tab.tabTitle) ?
                        " (" + tab.subject.subjectName + ")" : '') },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(EditRequirementsInner, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, { repo: repo, task: task, uncoveredIds: uncoveredIds, tabOrBlock: tab, hasMultipleSubjects: true, allCoveredSentences: allCoveredSentences }))); })); }));
};
var EditRequirementsInner = function (_a) {
    var tabOrBlock = _a.tabOrBlock, repo = _a.repo, task = _a.task, uncoveredIds = _a.uncoveredIds, hasMultipleSubjects = _a.hasMultipleSubjects, allCoveredSentences = _a.allCoveredSentences;
    var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(false), 2), markBySentenceViewActive = _b[0], setActive = _b[1];
    var markPartialKRs = _features__WEBPACK_IMPORTED_MODULE_10__["features"].markPartialKRs;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__["LazyContent"], null, Object(_logic_ordered_requirements__WEBPACK_IMPORTED_MODULE_5__["resolveRequirementOrder"])(tabOrBlock).map(function (tab) {
        var subjectName = 'type' in tab && tab.subject && tab.subject.subjectName;
        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            task.taskType !== 'exercise' && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "ked_boxed" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h3", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4lj kunskapskrav"], ["V\u00E4lj kunskapskrav"])))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "matrix-knowledge-title" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Markera de kunskapskrav som din uppgift t\u00E4cker."], ["Markera de kunskapskrav som din uppgift t\u00E4cker."])))),
                    markPartialKRs && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null,
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fab fa-creative-commons-nd " + (markBySentenceViewActive ? "activePartialView" : ""), onClick: function () { return setActive(!markBySentenceViewActive); } }))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_knowledge_matrix__WEBPACK_IMPORTED_MODULE_2__["KnowledgeMatrix"], { knowledgeRequirements: tab.knowledgeRequirements, markedIds: task.knowledgeRequirements.map(function (_a) {
                        var id = _a.id;
                        return id;
                    }), explainedRequirements: task.explainedRequirements || {}, idsToMarkNotOk: uncoveredIds, markMode: true, markBySentenceView: markBySentenceViewActive, migratedIds: task && task.migratedTexts && task.migratedTexts.knowledgeRequirements, partialRequirments: task.partialRequirments || {}, coveredPartialRequirments: allCoveredSentences, markPartialFeatureEnabled: markPartialKRs, onExplainedRequirementsChanged: function (requirementId, text) {
                        var _a;
                        return repo.tasks.update(task, {
                            explainedRequirements: tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, task.explainedRequirements, (_a = {}, _a[requirementId] = text, _a))
                        });
                    }, onUpdatePartialKnowledge: function (requirementId, partialContents) {
                        //it might be the case that the feature flag is active, the requirment is set as marked and no partial data is saved
                        //when unselecting the requirment, we should do nothing as no partial data is saved
                        var _a;
                        // var result = shouldRemove && task.partialRequirments.filter(pr => partialContents.filter(pc => !pr[requirementId].includes(pc)));
                        //var existingRequirements = task.partialRequirments[requirementId] || [];
                        repo.tasks.update(task, {
                            partialRequirments: tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, task.partialRequirments, (_a = {}, _a[requirementId] = tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](partialContents), _a))
                        });
                        var markedDoc = tab.knowledgeRequirements.filter(function (_a) {
                            var id = _a.id;
                            return id === requirementId;
                        })[0];
                        if (partialContents.length === 0) {
                            repo.tasks.removeRelated(task.id, "knowledgeRequirements", markedDoc);
                        }
                        else if (!task.partialRequirments || !task.partialRequirments[requirementId] || task.partialRequirments[requirementId].length === 0) {
                            repo.tasks.addRelated(task.id, "knowledgeRequirements", markedDoc);
                        }
                    }, onMarkChanged: function (markedId, isMarked) {
                        var _a, _b;
                        var markedDoc = tab.knowledgeRequirements.filter(function (_a) {
                            var id = _a.id;
                            return id === markedId;
                        })[0];
                        if (isMarked) {
                            if (hasMultipleSubjects) {
                                // Mission tabs needs to store the subject name connected to each knowledge requirement:
                                repo.tasks.update(task, { idsToSubjectMap: tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, task.idsToSubjectMap, (_a = {}, _a[markedId] = subjectName, _a)) });
                            }
                            else {
                                repo.tasks.update(task, { idsToSubjectMap: undefined });
                            }
                            repo.tasks.addRelated(task.id, "knowledgeRequirements", markedDoc);
                        }
                        else {
                            if (hasMultipleSubjects) {
                                // Mission tabs needs to delete the subject name connected to each knowledge requirement:
                                repo.tasks.update(task, { idsToSubjectMap: tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, task.idsToSubjectMap, (_b = {}, _b[markedId] = undefined, _b)) });
                            }
                            else {
                                repo.tasks.update(task, { idsToSubjectMap: undefined });
                            }
                            repo.tasks.removeRelated(task.id, "knowledgeRequirements", markedDoc);
                        }
                    } })),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-html-portlet sv-portlet" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_select_related_docs__WEBPACK_IMPORTED_MODULE_6__["SelectRelatedDocs"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4lj f\u00F6rm\u00E5gor"], ["V\u00E4lj f\u00F6rm\u00E5gor"]))), options: tab.abilities, markedIds: task.abilities.map(function (a) { return a.id; }), markMode: true, migratedIds: task && task.migratedTexts && task.migratedTexts.abilities, onMarkChanged: function (markedId, isMarked) {
                        var markedDoc = tab.abilities.filter(function (a) { return a.id === markedId; })[0];
                        if (isMarked) {
                            repo.tasks.addRelated(task.id, "abilities", markedDoc);
                        }
                        else {
                            repo.tasks.removeRelated(task.id, "abilities", markedDoc);
                        }
                    } })),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-html-portlet sv-portlet" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_sub_components_select_related_docs__WEBPACK_IMPORTED_MODULE_6__["SelectRelatedDocs"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4lj centralt inneh\u00E5ll"], ["V\u00E4lj centralt inneh\u00E5ll"]))), options: tab.centralContent, markedIds: task.centralContent.map(function (cc) { return cc.id; }), markMode: true, migratedIds: task && task.migratedTexts && task.migratedTexts.centralContent, onMarkChanged: function (markedId, isMarked) {
                        var markedDoc = tab.centralContent.filter(function (a) { return a.id === markedId; })[0];
                        if (isMarked) {
                            repo.tasks.addRelated(task.id, "centralContent", markedDoc);
                        }
                        else {
                            repo.tasks.removeRelated(task.id, "centralContent", markedDoc);
                        }
                    } })),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-html-portlet sv-portlet" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_8__["OpenCloseBox"], { className: "larger", title: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["V\u00E4lj framtidsf\u00F6rm\u00E5gor"], ["V\u00E4lj framtidsf\u00F6rm\u00E5gor"])))) },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_checklist__WEBPACK_IMPORTED_MODULE_7__["Checklist"], { available: _contracts_ked_models__WEBPACK_IMPORTED_MODULE_9__["futureAbilities"].map(function (fa) { return ({ name: fa, key: fa }); }), selected: task.futureAbilities, onChange: function (selectedFas) { return repo.tasks.update(task, { futureAbilities: selectedFas }); } }))));
    }));
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/right-column/basic-editable-task-fields.tsx":
/*!*********************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/right-column/basic-editable-task-fields.tsx ***!
  \*********************************************************************************************************/
/*! exports provided: BasicEditableTaskFields */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BasicEditableTaskFields", function() { return BasicEditableTaskFields; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _course_builder_modal_pages_edit_task_task_migration_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../course-builder/modal-pages/edit-task/task-migration-box */ "./src/components/course-builder/modal-pages/edit-task/task-migration-box.tsx");
/* harmony import */ var react_datepicker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-datepicker */ "./node_modules/react-datepicker/es/index.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _utility_components_checklist__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../utility-components/checklist */ "./src/components/utility-components/checklist.tsx");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _common_field_limits__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../common/field-limits */ "./src/components/course-builder-ks/common/field-limits.ts");









var BasicEditableTaskFields = function (_a) {
    var task = _a.task, writeAccess = _a.writeAccess, repo = _a.repo, contentId = _a.contentId, tab = _a.tab;
    var tabClass = tab ? tab.tabClass : null; // tab is undefined on step courses. But there are no mission tabs on step courses.
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "align-horizontal spaced" },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, tabClass === 'mission-tab' ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppdragets namn:"], ["Uppdragets namn:"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgiftens namn:"], ["Uppgiftens namn:"]))))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("input", { autoFocus: true, type: "text", size: 35, value: task.name, disabled: !writeAccess, readOnly: !writeAccess, onChange: function (ev) {
                        repo.tasks.update(task, { name: ev.target.value.substr(0, _common_field_limits__WEBPACK_IMPORTED_MODULE_8__["FieldLimits"].MAX_CHARS_TASK_NAMES) });
                    } }))),
        task.migratedTexts && writeAccess && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_builder_modal_pages_edit_task_task_migration_box__WEBPACK_IMPORTED_MODULE_2__["TaskMigrationBox"], { task: task, course: null, updateLink: function (id, linkOrUnlink) { throw new Error("Not implemented yet"); } }),
        tabClass !== 'mission-tab' && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "align-horizontal spaced" },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4randem\u00E5l:"], ["L\u00E4randem\u00E5l:"]))))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_7__["LazyContent"], null, repo.courseContents.id(contentId).map(function (content) {
                    if (content.type !== 'learning-goals')
                        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ej valbart"], ["Ej valbart"]))));
                    var hasCommonLearningGoals = content.hasCommonLearningGoals;
                    var learningGoals = content.commonLearningGoals;
                    var availableGoals = learningGoals.map(function (lg) { return lg.trim(); }).filter(function (lg) { return lg; })
                        .map(function (lg) { return ({
                        name: lg,
                        key: lg
                    }); });
                    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_checklist__WEBPACK_IMPORTED_MODULE_6__["Checklist"], { available: availableGoals, selected: task.learningGoal.split('\n'), onChange: function (goals, goal) {
                            if (hasCommonLearningGoals) {
                                repo.tasks.update(task, { learningGoal: goals.join('\n') });
                            }
                            else {
                                repo.tasks.update(task, { learningGoal: goal });
                            }
                        } });
                })))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2", null, tabClass === 'mission-tab' ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppdragstyp"], ["Uppdragstyp"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgiftstyp"], ["Uppgiftstyp"])))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_checklist__WEBPACK_IMPORTED_MODULE_6__["Checklist"], { available: [
                    tabClass !== 'mission-tab' && { name: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_7 || (templateObject_7 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00D6vningsuppgift"], ["\u00D6vningsuppgift"]))), key: 'exercise' },
                    { name: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_8 || (templateObject_8 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgift"], ["Uppgift"]))), key: "task" },
                    { name: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_9 || (templateObject_9 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inl\u00E4mningsuppgift"], ["Inl\u00E4mningsuppgift"]))), key: 'assignment' },
                ].filter(function (x) { return x; }), selected: [task.taskType], onChange: function (_, clickedKey) { return repo.tasks.update(task, { taskType: clickedKey }); } }),
            task.taskType === 'assignment' && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, "Inl\u00E4mningsdatum"),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_datepicker__WEBPACK_IMPORTED_MODULE_3__["default"], { nextMonthButtonLabel: "", showWeekNumbers: true, previousMonthButtonLabel: "", selected: task.deadline && moment__WEBPACK_IMPORTED_MODULE_4___default()(task.deadline).toDate(), dateFormat: "yyyy-MM-dd", locale: "sv", popperPlacement: "bottom-start", onChange: function (value) {
                                repo.tasks.update(task, { deadline: moment__WEBPACK_IMPORTED_MODULE_4___default()(value).format("YYYY-MM-DD") });
                            } })),
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" }, task.deadline && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", { className: "deleteDate", href: "#", title: "Ta bort inl\u00E4mningsdatum", onClick: function (ev) {
                            ev.preventDefault();
                            repo.tasks.update(task, { deadline: null });
                        } }))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "taskContainer" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "align-horizontal" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top", onClick: function () {
                                return repo.tasks.update(task, { sendToUrkund: task.sendToUrkund == null ? false : !task.sendToUrkund });
                            } },
                            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "checkBox" + ((task.sendToUrkund == null ? true : task.sendToUrkund) ? " checked" : "") })),
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" }, "Verify assignments with Urkund"))))));
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/right-column/edit-task-form.tsx":
/*!*********************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/right-column/edit-task-form.tsx ***!
  \*********************************************************************************************/
/*! exports provided: EditTaskForm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditTaskForm", function() { return EditTaskForm; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _basic_editable_task_fields__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./basic-editable-task-fields */ "./src/components/course-builder-ks/viewer-editor/task/right-column/basic-editable-task-fields.tsx");
/* harmony import */ var _task_footer_buttons__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./task-footer-buttons */ "./src/components/course-builder-ks/viewer-editor/task/right-column/task-footer-buttons.tsx");
/* harmony import */ var _introduction_text_editor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./introduction-text-editor */ "./src/components/course-builder-ks/viewer-editor/task/right-column/introduction-text-editor.tsx");
/* harmony import */ var _task_description_editor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./task-description-editor */ "./src/components/course-builder-ks/viewer-editor/task/right-column/task-description-editor.tsx");
/* harmony import */ var _task_working_procedure_editor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./task-working-procedure-editor */ "./src/components/course-builder-ks/viewer-editor/task/right-column/task-working-procedure-editor.tsx");
/* harmony import */ var _task_embedded_html_editor__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./task-embedded-html-editor */ "./src/components/course-builder-ks/viewer-editor/task/right-column/task-embedded-html-editor.tsx");







var EditTaskForm = function (_a) {
    var repo = _a.repo, course = _a.course, draftId = _a.draftId, tabId = _a.tabId, tab = _a.tab, contentId = _a.contentId, writeAccess = _a.writeAccess, task = _a.task, school = _a.school;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_0___default.a.Fragment, null,
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_basic_editable_task_fields__WEBPACK_IMPORTED_MODULE_1__["BasicEditableTaskFields"], { repo: repo, task: task, writeAccess: writeAccess, contentId: contentId, tab: tab }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_introduction_text_editor__WEBPACK_IMPORTED_MODULE_3__["IntroductionTextEditor"], { repo: repo, task: task, writeAccess: writeAccess }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_task_description_editor__WEBPACK_IMPORTED_MODULE_4__["TaskDescriptionEditor"], { writeAccess: writeAccess, task: task, repo: repo }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_task_working_procedure_editor__WEBPACK_IMPORTED_MODULE_5__["TaskWorkingProcedureEditor"], { writeAccess: writeAccess, task: task, repo: repo, step: tab && tab.type === 'step-course-tab' && tab.stepNo }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_task_embedded_html_editor__WEBPACK_IMPORTED_MODULE_6__["TaskEmbeddedHTMLEditor"], { writeAccess: writeAccess, task: task, repo: repo }),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_task_footer_buttons__WEBPACK_IMPORTED_MODULE_2__["TaskFooterButtons"], { repo: repo, task: task, courseId: course.id, draftId: draftId, tabId: tabId, contentId: contentId, school: school }));
};
/*

  * Inte kunna ändra ordning på låsta rutor om inte isKedStaff().
  * Ingen lägg till uppgifts-knapp om inte editMode.
  *
  * Redigera uppgiftsinnehåll
  * Lås lärandemålen till admin alltid
  * Kunna klicka in sig på uppgiften
  * Kunna ta bort uppgift
  * Kunna nollställa ändringar för skolan

*/ 


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/right-column/introduction-text-editor.tsx":
/*!*******************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/right-column/introduction-text-editor.tsx ***!
  \*******************************************************************************************************/
/*! exports provided: IntroductionTextEditor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IntroductionTextEditor", function() { return IntroductionTextEditor; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../utility-components/wysiwyg */ "./src/components/utility-components/wysiwyg/index.tsx");
/* harmony import */ var _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../utility-components/wysiwyg/actions-sv */ "./src/components/utility-components/wysiwyg/actions-sv.ts");





var IntroductionTextEditor = function (_a) {
    var repo = _a.repo, task = _a.task, writeAccess = _a.writeAccess;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h4", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Introtext"], ["Introtext"])))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { className: "subHeader" }, "(Skriv en introduktion till uppgiften)"),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_3__["Wysiwyg"], { actions: [
                "bold",
                "italic",
                "underline",
                "link",
                "image"
            ], defaultActions: _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_4__["default"], readOnly: !writeAccess, html: task.content || "", onChange: function (html) { return repo.tasks.update(task, { content: html }); } }));
};
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/right-column/task-description-editor.tsx":
/*!******************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/right-column/task-description-editor.tsx ***!
  \******************************************************************************************************/
/*! exports provided: TaskDescriptionEditor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskDescriptionEditor", function() { return TaskDescriptionEditor; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utility-components/wysiwyg */ "./src/components/utility-components/wysiwyg/index.tsx");
/* harmony import */ var _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../utility-components/wysiwyg/actions-sv */ "./src/components/utility-components/wysiwyg/actions-sv.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _texts__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../texts */ "./src/components/course-builder-ks/viewer-editor/task/texts.ts");
/* harmony import */ var _common_field_limits__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../common/field-limits */ "./src/components/course-builder-ks/common/field-limits.ts");








function TaskDescriptionEditor(_a) {
    var writeAccess = _a.writeAccess, task = _a.task, repo = _a.repo;
    var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])(0), 2), numChars = _b[0], setNumChars = _b[1];
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null, _texts__WEBPACK_IMPORTED_MODULE_5__["taskTypeHeadings"][task.taskType] || Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgift"], ["Uppgift"])))),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "subHeader" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["(Skriv in en kort f\u00F6rklaring, max ", " tecken, vad uppgiften g\u00E5r ut p\u00E5.)"], ["(Skriv in en kort f\u00F6rklaring, max ", " tecken, vad uppgiften g\u00E5r ut p\u00E5.)"])), _common_field_limits__WEBPACK_IMPORTED_MODULE_6__["FieldLimits"].MAX_CHARS_TASK_INTRO_TEXT)),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_2__["Wysiwyg"], { actions: [
                "bold",
            ], defaultActions: _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_3__["default"], readOnly: !writeAccess, html: task.description || "", maxChars: _common_field_limits__WEBPACK_IMPORTED_MODULE_6__["FieldLimits"].MAX_CHARS_TASK_INTRO_TEXT, reportNumChars: function (numChars) { return setNumChars(numChars); }, onChange: function (html) {
                repo.tasks.update(task, { description: html });
            } }),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { textAlign: 'right', opacity: 0.7, fontSize: '8pt' } }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["", " av ", ""], ["", " av ", ""])), numChars, _common_field_limits__WEBPACK_IMPORTED_MODULE_6__["FieldLimits"].MAX_CHARS_TASK_INTRO_TEXT)));
}
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/right-column/task-embedded-html-editor.tsx":
/*!********************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/right-column/task-embedded-html-editor.tsx ***!
  \********************************************************************************************************/
/*! exports provided: TaskEmbeddedHTMLEditor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskEmbeddedHTMLEditor", function() { return TaskEmbeddedHTMLEditor; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");




var TaskEmbeddedHTMLEditor = function (_a) {
    var task = _a.task, repo = _a.repo;
    return Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_2__["isKedStaff"])() ? task.embeddedHtml ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h4", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inb\u00E4ddat material"], ["Inb\u00E4ddat material"])))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Klipp in HTML kod nedan"], ["Klipp in HTML kod nedan"])))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("textarea", { style: { width: "100%", height: "100px" }, value: task.embeddedHtml, onChange: function (ev) { return repo.tasks.update(task, { embeddedHtml: ev.target.value }); } })) :
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () { return repo.tasks.update(task, { embeddedHtml: " " }); } },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-code", "aria-hidden": true }),
                "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4gg till inb\u00E4ddat material"], ["L\u00E4gg till inb\u00E4ddat material"])))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null)) :
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null);
};
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/right-column/task-footer-buttons.tsx":
/*!**************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/right-column/task-footer-buttons.tsx ***!
  \**************************************************************************************************/
/*! exports provided: TaskFooterButtons */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskFooterButtons", function() { return TaskFooterButtons; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-router */ "./node_modules/react-router/es/index.js");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../utility-components/horizontal-item */ "./src/components/utility-components/horizontal-item.tsx");
/* harmony import */ var _utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../utility-components/align-horizontal */ "./src/components/utility-components/align-horizontal.tsx");
var _this = undefined;







var TaskFooterButtons = Object(react_router__WEBPACK_IMPORTED_MODULE_3__["withRouter"])(function (_a) {
    var school = _a.school, courseId = _a.courseId, tabId = _a.tabId, contentId = _a.contentId, draftId = _a.draftId, task = _a.task, repo = _a.repo, history = _a.history;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "btn btn-warning pull-right", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                    return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                        switch (_a.label) {
                            case 0:
                                repo.courseContents.removeRelated(contentId, "tasks", task);
                                return [4 /*yield*/, _globals_db__WEBPACK_IMPORTED_MODULE_4__["db"].saveNow()];
                            case 1:
                                _a.sent();
                                history.push("/" + school + "/courses/" + courseId + "/tabs/" + tabId + "/drafts/" + draftId + "/edit");
                                return [2 /*return*/];
                        }
                    });
                }); } },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-trash", "aria-hidden": true }),
                "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ta bort uppgiften"], ["Ta bort uppgiften"])))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_align_horizontal__WEBPACK_IMPORTED_MODULE_6__["AlignHorizontal"], null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_5__["HorizontalItem"], null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                switch (_a.label) {
                                    case 0: return [4 /*yield*/, repo.saveNow()];
                                    case 1:
                                        _a.sent();
                                        history.push("/" + school + "/courses/" + courseId + "/tabs/" + (tabId || '$') + "/contents/" + contentId + "/tasks/" + task.id + "/drafts/" + draftId);
                                        return [2 /*return*/];
                                }
                            });
                        }); } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-eye", "aria-hidden": true }),
                        "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["F\u00F6rhandsgranska"], ["F\u00F6rhandsgranska"]))))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_horizontal_item__WEBPACK_IMPORTED_MODULE_5__["HorizontalItem"], null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                history.push("/" + school + "/courses/" + courseId + "/tabs/" + (tabId || '$') + "/drafts/" + draftId + "/edit");
                                return [2 /*return*/];
                            });
                        }); } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-arrow-left", "aria-hidden": true }),
                        "\u00A0", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C5terg\u00E5 till fliken"], ["\u00C5terg\u00E5 till fliken"]))))))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null));
});
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/right-column/task-working-procedure-editor.tsx":
/*!************************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/right-column/task-working-procedure-editor.tsx ***!
  \************************************************************************************************************/
/*! exports provided: TaskWorkingProcedureEditor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskWorkingProcedureEditor", function() { return TaskWorkingProcedureEditor; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utility-components/wysiwyg */ "./src/components/utility-components/wysiwyg/index.tsx");
/* harmony import */ var _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../utility-components/wysiwyg/actions-sv */ "./src/components/utility-components/wysiwyg/actions-sv.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _common_dialog_context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../common/dialog-context */ "./src/components/course-builder-ks/common/dialog-context.ts");
/* harmony import */ var _logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../logic/is-ked-staff */ "./src/components/course-builder-ks/logic/is-ked-staff.ts");
/* harmony import */ var _common_select_word_bank__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../common/select-word-bank */ "./src/components/course-builder-ks/common/select-word-bank.tsx");
/* harmony import */ var _utility_components_wysiwyg_restore_selection__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../utility-components/wysiwyg/restore-selection */ "./src/components/utility-components/wysiwyg/restore-selection.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");











function TaskWorkingProcedureEditor(_a) {
    var writeAccess = _a.writeAccess, task = _a.task, repo = _a.repo, step = _a.step;
    var dialogCtx = Object(react__WEBPACK_IMPORTED_MODULE_1__["useContext"])(_common_dialog_context__WEBPACK_IMPORTED_MODULE_5__["DialogsContext"]);
    var actions = [
        "bold",
        "italic",
        "underline",
        "olist",
        "outdent",
        "indent",
        "link",
        "image"
    ];
    if (writeAccess && Object(_logic_is_ked_staff__WEBPACK_IMPORTED_MODULE_6__["isKedStaff"])()) {
        if (step) {
            // This task is put on a step. We could link to a word bank:
            actions.push({
                name: "listWordBank",
                icon: '<i class="fa fa-book" aria-hidden="true"></i>',
                title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4nka till ordbank"], ["L\u00E4nka till ordbank"]))),
                result: function (ev, wysiwyg) {
                    var selection = Object(_utility_components_wysiwyg_restore_selection__WEBPACK_IMPORTED_MODULE_8__["saveSelection"])();
                    dialogCtx.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_common_select_word_bank__WEBPACK_IMPORTED_MODULE_7__["SelectWordBank"], { subject: task.subject, step: step, onSelect: function (_a) {
                            var name = _a.name, url = _a.url;
                            dialogCtx.closeDialog();
                            Object(_utility_components_wysiwyg_restore_selection__WEBPACK_IMPORTED_MODULE_8__["restoreSelection"])(selection);
                            var elem = document.createElement('a');
                            elem.href = url;
                            elem.appendChild(document.createTextNode(name));
                            document.execCommand('insertHTML', false, elem.outerHTML);
                        } }));
                }
            });
        }
        actions.push({
            icon: '<i class="fa fa-link" style="color:var(--col-accent)" aria-hidden="true"></i>',
            title: 'Resurs länk',
            result: function () {
                var url = window.prompt('Ange länkens URL för resursen');
                if (url) {
                    //check that the entered URL is the same with the current one
                    var urlObj = new URL('', url);
                    if (urlObj.host !== window.location.host) {
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["showError"])("Ogiltig resursadress");
                        return;
                    }
                    //match the resourceId
                    var regex = new RegExp("([^\.|/]+).([^\.]+)(?=\.html)");
                    var urlResults = regex.exec(urlObj.pathname);
                    if (!_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_9__["cfg"].KED_RESOURCES_URL) {
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["showError"])("Resurser URL är inte konfigurerad");
                        return;
                    }
                    //replace cfg value with the one from the provided url
                    var valueFromConfig = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_9__["cfg"].KED_RESOURCES_URL.replace("{value}", urlResults[0]);
                    if (valueFromConfig)
                        document.execCommand('createLink', false, valueFromConfig);
                }
            }
        });
    }
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_4__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Arbetsprocess"], ["Arbetsprocess"])))),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_wysiwyg__WEBPACK_IMPORTED_MODULE_2__["Wysiwyg"], { actions: actions, defaultActions: _utility_components_wysiwyg_actions_sv__WEBPACK_IMPORTED_MODULE_3__["default"], readOnly: !writeAccess, html: task.workingProcedure || "", onChange: function (html) {
                repo.tasks.update(task, { workingProcedure: html });
            } }));
}
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/task-editor.tsx":
/*!*****************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/task-editor.tsx ***!
  \*****************************************************************************/
/*! exports provided: TaskEditor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskEditor", function() { return TaskEditor; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utility-components/live-query-view */ "./src/components/utility-components/live-query-view.tsx");
/* harmony import */ var _common_two_columns_page__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../common/two-columns-page */ "./src/components/course-builder-ks/common/two-columns-page.tsx");
/* harmony import */ var _right_column_edit_task_form__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./right-column/edit-task-form */ "./src/components/course-builder-ks/viewer-editor/task/right-column/edit-task-form.tsx");
/* harmony import */ var _logic_ordered_requirements__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../logic/ordered-requirements */ "./src/components/course-builder-ks/logic/ordered-requirements.ts");
/* harmony import */ var _left_column_edit_requirements__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./left-column/edit-requirements */ "./src/components/course-builder-ks/viewer-editor/task/left-column/edit-requirements.tsx");
/* harmony import */ var _logic_is_employee__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../logic/is-employee */ "./src/components/course-builder-ks/logic/is-employee.ts");
/* harmony import */ var _course_builder_courses_business_logic__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../course-builder/courses/business-logic */ "./src/components/course-builder/courses/business-logic.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");










var TaskEditor = Object(_utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__["liveQueryView"])(function (_a) {
    var school = _a.school, course = _a.course, activeTab = _a.activeTab, draftId = _a.draftId, branch = _a.branch, contentId = _a.contentId, taskId = _a.taskId, blockId = _a.blockId;
    var themeCourseTab = course.tabs.find(function (t) { return t.id === activeTab; });
    var involvedTabIds = (themeCourseTab && themeCourseTab.tabClass === 'mission-tab') ?
        course.tabs.filter(function (tab) { return tab.tabClass === 'subject-tab'; }).map(function (tab) { return tab.id; }) :
        [activeTab];
    return branch.tasks
        .include("abilities", "centralContent", "knowledgeRequirements").includeIdsOnly()
        //.debug()
        .hasEdgesFrom([contentId])
        .toValue()
        .combineLatest(branch.courseTabs
        .include("abilities", "centralContent", "knowledgeRequirements")
        .includeIdsOnly()
        .ids(involvedTabIds))
        .switchMap(function (_a) {
        var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a, 2), tasks = _b[0], involvedTabs = _b[1];
        var task = tasks.filter(function (t) { return t.id === taskId; })[0];
        var uncoveredIds = Object(_course_builder_courses_business_logic__WEBPACK_IMPORTED_MODULE_8__["getIdsNotCoveredByReqReferencingDocs"])(involvedTabs, tasks);
        //compute uncovered sentences
        var allCoveredSentences = tasks && Object(_utils_utils__WEBPACK_IMPORTED_MODULE_9__["flatten"])(tasks.filter(function (req) { return req.partialRequirments != null; }).map(function (_a) {
            var partialRequirments = _a.partialRequirments;
            return partialRequirments;
        }));
        return Object(_logic_ordered_requirements__WEBPACK_IMPORTED_MODULE_5__["resolveRequirementOrder"])(task).map(function (task) {
            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_common_two_columns_page__WEBPACK_IMPORTED_MODULE_3__["TwoColumnsPage"], { left: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_left_column_edit_requirements__WEBPACK_IMPORTED_MODULE_6__["EditRequirements"], { repo: branch, task: task, uncoveredIds: uncoveredIds, tabIds: involvedTabIds, blockId: blockId, allCoveredSentences: allCoveredSentences }), right: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_right_column_edit_task_form__WEBPACK_IMPORTED_MODULE_4__["EditTaskForm"], { repo: branch, school: school, course: course, draftId: draftId, tabId: activeTab, tab: involvedTabs.find(function (t) { return t.id === activeTab; }), contentId: contentId, writeAccess: Object(_logic_is_employee__WEBPACK_IMPORTED_MODULE_7__["isEmployee"])(school), task: task }), rightWidth: 6 });
        });
    });
});


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/texts.ts":
/*!**********************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/texts.ts ***!
  \**********************************************************************/
/*! exports provided: taskTypeHeadings */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "taskTypeHeadings", function() { return taskTypeHeadings; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");


var taskTypeHeadings = {
    exercise: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00D6vningsuppgift"], ["\u00D6vningsuppgift"]))),
    task: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgift"], ["Uppgift"]))),
    assignment: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inl\u00E4mningsuppgift"], ["Inl\u00E4mningsuppgift"])))
};
var templateObject_1, templateObject_2, templateObject_3;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/viewer/task-viewer-page.tsx":
/*!*****************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/viewer/task-viewer-page.tsx ***!
  \*****************************************************************************************/
/*! exports provided: TaskViewerPage, TaskViewerPageInner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskViewerPage", function() { return TaskViewerPage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskViewerPageInner", function() { return TaskViewerPageInner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utility-components/live-query-view */ "./src/components/utility-components/live-query-view.tsx");
/* harmony import */ var _common_two_columns_page__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../common/two-columns-page */ "./src/components/course-builder-ks/common/two-columns-page.tsx");
/* harmony import */ var _weekplanner_weekplanner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../weekplanner/weekplanner */ "./src/components/weekplanner/weekplanner.tsx");
/* harmony import */ var _task_viewer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./task-viewer */ "./src/components/course-builder-ks/viewer-editor/task/viewer/task-viewer.tsx");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _logic_ordered_requirements__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../logic/ordered-requirements */ "./src/components/course-builder-ks/logic/ordered-requirements.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var react_router__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-router */ "./node_modules/react-router/es/index.js");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");












var TaskViewerPage = Object(_utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__["liveQueryView"])(function (props) {
    return props.lazyRepo.map(function (repo) { return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(TaskViewerPageInner, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, props, { repo: repo }))); });
});
var TaskViewerPageInner = Object(react_router__WEBPACK_IMPORTED_MODULE_9__["withRouter"])(Object(_utility_components_live_query_view__WEBPACK_IMPORTED_MODULE_2__["liveQueryView"])(function (_a) {
    var school = _a.school, courseId = _a.courseId, activeTab = _a.activeTab, repo = _a.repo, taskId = _a.taskId, draftId = _a.draftId, contentId = _a.contentId, history = _a.history;
    return (repo.tasks
        .include("abilities", "centralContent", "knowledgeRequirements")
        .id(taskId)
        .map(function (task) { return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_common_two_columns_page__WEBPACK_IMPORTED_MODULE_3__["TwoColumnsPage"], { left: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_6__["LazyContent"], null, Object(_logic_ordered_requirements__WEBPACK_IMPORTED_MODULE_7__["resolveRequirementOrder"])(task).map(function (task) { return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_task_viewer__WEBPACK_IMPORTED_MODULE_5__["TaskViewer"], { school: school, task: task, courseId: courseId, abilities: task.abilities, centralContent: task.centralContent, requirements: task.knowledgeRequirements, futureAbilities: task.futureAbilities }),
            draftId && contentId && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn", onClick: function () { return history.push("/" + school + "/courses/" + courseId + "/tabs/" + activeTab + "/contents/" + contentId + "/tasks/" + taskId + "/drafts/" + draftId + "/edit"); } },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-lg fa-pencil" }),
                    " ", Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Forts\u00E4tt redigera"], ["Forts\u00E4tt redigera"])))))); })), right: react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_weekplanner_weekplanner__WEBPACK_IMPORTED_MODULE_4__["WeekPlanner"], { env: _globals_KED_env__WEBPACK_IMPORTED_MODULE_10__["default"], viewCourseUrl: _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_11__["default"].KED_COURSE_VIEWER_URL }), rightWidth: 5 }); }));
}));
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/task/viewer/task-viewer.tsx":
/*!************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/task/viewer/task-viewer.tsx ***!
  \************************************************************************************/
/*! exports provided: TaskViewer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskViewer", function() { return TaskViewer; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _logic_is_employee__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../logic/is-employee */ "./src/components/course-builder-ks/logic/is-employee.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _course_viewer_course_page_task_assignments__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../course-viewer/course-page/task-assignments */ "./src/components/course-viewer/course-page/task-assignments.tsx");
/* harmony import */ var _course_viewer_subcomponents_abilities_box__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../course-viewer/subcomponents/abilities-box */ "./src/components/course-viewer/subcomponents/abilities-box.tsx");
/* harmony import */ var _course_viewer_subcomponents_central_content_box__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../course-viewer/subcomponents/central-content-box */ "./src/components/course-viewer/subcomponents/central-content-box.tsx");
/* harmony import */ var _course_viewer_subcomponents_knowledge_requirements_table__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../course-viewer/subcomponents/knowledge-requirements-table */ "./src/components/course-viewer/subcomponents/knowledge-requirements-table.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _texts__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../texts */ "./src/components/course-builder-ks/viewer-editor/task/texts.ts");
/* harmony import */ var _common_future_abilities_box__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../common/future-abilities-box */ "./src/components/course-builder-ks/common/future-abilities-box.tsx");
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../features */ "./src/features/index.ts");












var TaskViewer = function (_a) {
    var school = _a.school, task = _a.task, courseId = _a.courseId, abilities = _a.abilities, centralContent = _a.centralContent, requirements = _a.requirements, futureAbilities = _a.futureAbilities;
    var deadlineTooLate = task.deadline && moment__WEBPACK_IMPORTED_MODULE_3___default()(task.deadline).endOf('day') < moment__WEBPACK_IMPORTED_MODULE_3___default()();
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-text-portlet sv-use-margins sv-skip-spacer" },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-text-portlet-content" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h1", { className: "h1" }, task.name))),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-html-portlet sv-portlet" }, task.content && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { dangerouslySetInnerHTML: { __html: task.content } }))),
        task.description && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-html-portlet sv-portlet" },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: ["ked_boxed", "taskBox", task.taskType].join(' '), style: { clear: "both" } },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2", null, _texts__WEBPACK_IMPORTED_MODULE_9__["taskTypeHeadings"][task.taskType] || Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgift"], ["Uppgift"])))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { dangerouslySetInnerHTML: { __html: task.description } }))),
        task.workingProcedure && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h3", { className: "h3" }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Arbetsprocess"], ["Arbetsprocess"])))),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "rich-text-readonly", dangerouslySetInnerHTML: { __html: task.workingProcedure } })),
        task.embeddedHtml && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { dangerouslySetInnerHTML: { __html: task.embeddedHtml } }),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null),
        task.taskType === 'assignment' && _features__WEBPACK_IMPORTED_MODULE_11__["features"].ksAssignments ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2", null, "Inl\u00E4mningsuppgift"),
            Object(_logic_is_employee__WEBPACK_IMPORTED_MODULE_2__["isEmployee"])(school) ?
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, "H\u00E4r kan du som l\u00E4rare se elevernas inl\u00E4mnade arbeten.") : Object(_logic_is_employee__WEBPACK_IMPORTED_MODULE_2__["isEmployee"])() ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Detta \u00E4r en inl\u00E4mningsuppgift med inl\u00E4mningsdatum ", ""], ["Detta \u00E4r en inl\u00E4mningsuppgift med inl\u00E4mningsdatum ", ""])), moment__WEBPACK_IMPORTED_MODULE_3___default()(task.deadline).format('YYYY-MM-DD'))) : react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, ". L\u00E4mna in ditt arbete som en pdf, doc eller odt fil genom att dra det till f\u00E4ltet under."),
                task.deadline ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null,
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("b", null,
                        "Den h\u00E4r uppgiften ",
                        deadlineTooLate ? 'skulle varit inlämnad ' : 'skall vara inlämnad ',
                        moment__WEBPACK_IMPORTED_MODULE_3___default()(task.deadline).format('YYYY-MM-DD'))) : undefined),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_viewer_course_page_task_assignments__WEBPACK_IMPORTED_MODULE_4__["TaskAssignments"], { courseId: courseId, taskId: task.id, school: school, sendToUrkund: task.sendToUrkund }),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null)) : undefined,
        futureAbilities.length > 0 ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_common_future_abilities_box__WEBPACK_IMPORTED_MODULE_10__["FutureAbilitiesBox"], { title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_8__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["I den h\u00E4r uppgiften behandlas f\u00F6ljande framtidsf\u00F6rm\u00E5gor"], ["I den h\u00E4r uppgiften behandlas f\u00F6ljande framtidsf\u00F6rm\u00E5gor"]))), selectedFAs: futureAbilities }) : null,
        requirements.length > 0 && task.taskType !== 'exercise' ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_viewer_subcomponents_knowledge_requirements_table__WEBPACK_IMPORTED_MODULE_7__["KnowledgeRequirementsBox"], { title: "I den h\u00E4r uppgiften bed\u00F6ms f\u00F6ljande kunskapskrav", className: "larger", headerOpen: false, requirements: requirements, idsToSubjectMap: task.idsToSubjectMap, explainedRequirements: task.explainedRequirements, partialRequirments: task.partialRequirments }) : null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
            abilities.length > 0 ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_viewer_subcomponents_abilities_box__WEBPACK_IMPORTED_MODULE_5__["AbilitiesBox"], { title: "Den h\u00E4r uppgiften behandlar f\u00F6ljande f\u00F6rm\u00E5gor", className: "larger", headerOpen: false, abilities: abilities }) : null,
            centralContent.length > 0 ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_course_viewer_subcomponents_central_content_box__WEBPACK_IMPORTED_MODULE_6__["CentralContentBox"], { title: "Den h\u00E4r uppgiften behandlar f\u00F6ljande centrala inneh\u00E5ll", className: "larger", headerOpen: false, centralContent: centralContent }) : null),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("hr", null),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("hr", null),
        task.resources && task.resources.length > 0 && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "sv-html-portlet sv-portlet" },
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2", null, "Resurser kopplade till uppgiften"),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "taskContainer" }, task.resources.map(function (r, idx) {
                return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { key: idx, className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", { href: r.url }, r.name)));
            })),
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null)),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("br", null));
};
var templateObject_1, templateObject_2, templateObject_3, templateObject_4;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/version-history/delta-view.tsx":
/*!***************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/version-history/delta-view.tsx ***!
  \***************************************************************************************/
/*! exports provided: DeltaView */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeltaView", function() { return DeltaView; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _deltadoc_box__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./deltadoc-box */ "./src/components/course-builder-ks/viewer-editor/version-history/deltadoc-box.tsx");
/* harmony import */ var _deltalink_box__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./deltalink-box */ "./src/components/course-builder-ks/viewer-editor/version-history/deltalink-box.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");







function deltaKey(delta) {
    if (delta.type === 'modify')
        return delta.targetId;
    return delta.sourceId + delta.label + delta.targetId;
}
function DeltaView(_a) {
    var branchId = _a.branchId, tag = _a.tag, editable = _a.editable;
    var deltas = _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].branch(branchId).deltas;
    if (tag) {
        deltas = deltas.tags(tag);
    }
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_3__["LazyContent"], null, deltas.toValue().map(function (deltas) {
        return deltas.length === 0 ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { style: { opacity: 0.5, fontStyle: 'italic' } }, tag ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Skolans version \u00E4r identisk med orginalet"], ["Skolans version \u00E4r identisk med orginalet"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Det finns inga \u00E4ndringar att publicera."], ["Det finns inga \u00E4ndringar att publicera."]))))) :
            //
            // Normal view (list all changes + option to clear all)
            //
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "taskContainer odd-even" }, deltas.map(function (delta) {
                    var key = deltaKey(delta);
                    return delta.type === 'modify' ?
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_deltadoc_box__WEBPACK_IMPORTED_MODULE_4__["DeltaDocBox"], { delta: delta, editable: editable, key: key, onDelete: function () {
                                // Undo DeltaDoc
                                undoDeltaDoc(delta);
                            } }) :
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_deltalink_box__WEBPACK_IMPORTED_MODULE_5__["DeltaLinkBox"], { delta: delta, editable: editable, key: key, onDelete: function () {
                                // Undo Link
                                undoDeltaRelation(delta);
                            } });
                })),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("button", { className: "btn btn-large btn-warning", onClick: function () {
                        var e_1, _a;
                        if (confirm(tag ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C5tg\u00E4rden \u00E5terst\u00E4llet kursen till standard.\n\nVill du forts\u00E4tta?"], ["\u00C5tg\u00E4rden \u00E5terst\u00E4llet kursen till standard.\\n\\nVill du forts\u00E4tta?"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C5tg\u00E4rden raderar samtliga \u00E4ndringar som \u00E4nnu inte \u00E4r publicerade.\n\nVill du forts\u00E4tta?"], ["\u00C5tg\u00E4rden raderar samtliga \u00E4ndringar som \u00E4nnu inte \u00E4r publicerade.\\n\\nVill du forts\u00E4tta?"]))))) {
                            try {
                                for (var deltas_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](deltas), deltas_1_1 = deltas_1.next(); !deltas_1_1.done; deltas_1_1 = deltas_1.next()) {
                                    var delta = deltas_1_1.value;
                                    if (delta.type === 'modify') {
                                        undoDeltaDoc(delta);
                                    }
                                    else {
                                        undoDeltaRelation(delta);
                                    }
                                }
                            }
                            catch (e_1_1) { e_1 = { error: e_1_1 }; }
                            finally {
                                try {
                                    if (deltas_1_1 && !deltas_1_1.done && (_a = deltas_1.return)) _a.call(deltas_1);
                                }
                                finally { if (e_1) throw e_1.error; }
                            }
                        }
                    } }, tag ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C5terst\u00E4ll till orginalet"], ["\u00C5terst\u00E4ll till orginalet"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Radera alla opublicerade \u00E4ndringar"], ["Radera alla opublicerade \u00E4ndringar"])))));
    }));
    function undoDeltaRelation(delta) {
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].branch(branchId).table(delta.sourceTable)
            .undoLink(delta.sourceId, delta.label, delta.targetId);
    }
    function undoDeltaDoc(delta) {
        var undoings = {};
        Object.keys(delta.data).forEach(function (key) {
            undoings[key] = { $unset: 0 };
        });
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].branch(branchId).table(delta.table).update({
            id: delta.targetId,
            name: delta.targetName
        }, undoings);
    }
}
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/version-history/deltadoc-box.tsx":
/*!*****************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/version-history/deltadoc-box.tsx ***!
  \*****************************************************************************************/
/*! exports provided: DeltaDocBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeltaDocBox", function() { return DeltaDocBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _model_friendly_names__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./model-friendly-names */ "./src/components/course-builder-ks/viewer-editor/version-history/model-friendly-names.ts");
/* harmony import */ var _course_builder_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../course-builder/utils */ "./src/components/course-builder/utils.ts");





function DeltaDocBox(_a) {
    var delta = _a.delta, editable = _a.editable, onDelete = _a.onDelete;
    var entityName = delta.targetName && Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["maxLength"])(delta.targetName, 80);
    var classNames = ["schoolCourse"];
    if (delta.$meta)
        classNames.push("entitymeta-" + delta.$meta);
    var friendlyEntityType = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["capitalizeFirst"])(_model_friendly_names__WEBPACK_IMPORTED_MODULE_3__["modelNames"].entityTypes[delta.table] || delta.table);
    var friendlyProps = Object.keys(delta.data).map(function (prop) {
        return ({
            propSpec: _model_friendly_names__WEBPACK_IMPORTED_MODULE_3__["modelNames"].propertyNames[prop],
            prop: prop
        });
    });
    var hasUnknownProps = friendlyProps.some(function (fp) { return !fp.propSpec; });
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: classNames.join(' ') },
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "align-horizontal" },
            editable ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top pull-right" },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", { className: "removeItem", onClick: onDelete })) : null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" }, entityName ?
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", null,
                    friendlyEntityType,
                    " \"",
                    entityName,
                    "\"") :
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("a", null, friendlyEntityType))),
        friendlyProps.filter(function (_a) {
            var propSpec = _a.propSpec;
            return propSpec;
        }).map(function (_a) {
            var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a.propSpec, 2), type = _b[0], propName = _b[1], prop = _a.prop;
            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { key: prop }, type === _model_friendly_names__WEBPACK_IMPORTED_MODULE_3__["deltaTypes"].Obscure ?
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null, propName) :
                type === _model_friendly_names__WEBPACK_IMPORTED_MODULE_3__["deltaTypes"].HiddenChange ? null :
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", null,
                        propName,
                        ": ",
                        _model_friendly_names__WEBPACK_IMPORTED_MODULE_3__["modelNames"].getPropVal(delta.data[prop], type, prop)));
        }),
        hasUnknownProps ? react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { title: JSON.stringify(delta.data, null, 4) }, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndringar i interna egenskaper"], ["\u00C4ndringar i interna egenskaper"]))))) : null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("p", { className: "small" },
                Object(_course_builder_utils__WEBPACK_IMPORTED_MODULE_4__["shortDateFormat"])(delta.dateTime),
                " ",
                delta.contributors.join(', '))));
}
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/version-history/deltalink-box.tsx":
/*!******************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/version-history/deltalink-box.tsx ***!
  \******************************************************************************************/
/*! exports provided: DeltaLinkBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeltaLinkBox", function() { return DeltaLinkBox; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _model_friendly_names__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./model-friendly-names */ "./src/components/course-builder-ks/viewer-editor/version-history/model-friendly-names.ts");
/* harmony import */ var _course_builder_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../course-builder/utils */ "./src/components/course-builder/utils.ts");




function DeltaLinkBox(_a) {
    var delta = _a.delta, editable = _a.editable, onDelete = _a.onDelete;
    var entityName = delta.targetName && Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["maxLength"])(Object(_model_friendly_names__WEBPACK_IMPORTED_MODULE_2__["removeHtmlTags"])(delta.targetName), 80);
    var classNames = ["schoolCourse"];
    if (delta.$meta)
        classNames.push("entitymeta-" + delta.$meta);
    var friendlyOperation = _model_friendly_names__WEBPACK_IMPORTED_MODULE_2__["modelNames"].getModifiedLinkHeading(delta);
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: classNames.join(' ') },
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "align-horizontal" },
            editable ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "horizontalItem top pull-right" },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", { className: "removeItem", onClick: onDelete })) : null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "horizontalItem top" }, entityName ?
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", null,
                    friendlyOperation,
                    " \"",
                    entityName,
                    "\"") :
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("a", null, friendlyOperation))),
        react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", null,
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("p", { className: "small" },
                Object(_course_builder_utils__WEBPACK_IMPORTED_MODULE_3__["shortDateFormat"])(delta.dateTime),
                " ",
                delta.contributor)));
}


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/version-history/index.tsx":
/*!**********************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/version-history/index.tsx ***!
  \**********************************************************************************/
/*! exports provided: VersionHistoryPage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VersionHistoryPage", function() { return VersionHistoryPage; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utility-components/lazy-content */ "./src/components/utility-components/lazy-content.tsx");
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _common_banner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../common/banner */ "./src/components/course-builder-ks/common/banner.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-router-dom */ "./node_modules/react-router-dom/es/index.js");
/* harmony import */ var _version_history_box__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./version-history-box */ "./src/components/course-builder-ks/viewer-editor/version-history/version-history-box.tsx");








var VersionHistoryPage = function (_a) {
    var school = _a.school, courseId = _a.courseId;
    var schoolObservable = _globals_db__WEBPACK_IMPORTED_MODULE_3__["db"].schools.name(school).single();
    var draftObservable = _globals_db__WEBPACK_IMPORTED_MODULE_3__["CourseInstances"].getBranchId(schoolObservable, courseId)
        .map(function (draftId) { return _globals_db__WEBPACK_IMPORTED_MODULE_3__["db"].branch(draftId); });
    var branchObservable = schoolObservable.map(function (school) { return _globals_db__WEBPACK_IMPORTED_MODULE_3__["db"].branch(school.officialBranchId); });
    var bannerPropsObservable = draftObservable.switchMap(function (repo) { return repo.courseInstances.id(courseId).map(function (course) { return ({
        title: course.name,
        tabs: [{ name: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Versionshistorik"], ["Versionshistorik"]))), key: "versionhistory" }],
        buttons: [react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_6__["Link"], { to: "/" + school + "/courses/" + courseId, key: "$settings", title: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Visa kursen"], ["Visa kursen"]))) },
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-eye", "aria-hidden": true }),
                "\u00A0")]
    }); }); });
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, null,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_common_banner__WEBPACK_IMPORTED_MODULE_4__["LazyBanner"], { lazyProps: bannerPropsObservable }),
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_utility_components_lazy_content__WEBPACK_IMPORTED_MODULE_2__["LazyContent"], null, schoolObservable.map(function (_a) {
            var schoolDisplayName = _a.displayName, officialBranchId = _a.officialBranchId;
            return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_version_history_box__WEBPACK_IMPORTED_MODULE_7__["VersionHistoryBox"], { branchType: "school-branch", branchId: officialBranchId, courseId: courseId, isAdmin: false });
        })));
    /*<button
      className="btn btn-large btn-warning"
      onClick={async ()=>{
        if (confirm(L`Alla modifieringar som gjorts för skolan ${schoolDisplayName} kommer att försvinna.
        
        Fortsätt?`)) {
          const branch = await branchObservable.load();
          branch.clearBranch();
          db.branches.delete()
        }
      }}
    >{L`Återställ kursen till standard`}</button> */
};
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/version-history/model-friendly-names.ts":
/*!************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/version-history/model-friendly-names.ts ***!
  \************************************************************************************************/
/*! exports provided: deltaTypes, modelNames, removeHtmlTags */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deltaTypes", function() { return deltaTypes; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "modelNames", function() { return modelNames; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "removeHtmlTags", function() { return removeHtmlTags; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");


var Text = Symbol("TypeText");
var Checkbox = Symbol("TypeCheckbox");
var Obscure = Symbol("TypeObsure");
var HiddenChange = Symbol("TypeHiddenChange");
var Html = Symbol("TypeHtml");
var deltaTypes = {
    Text: Text,
    Html: Html,
    Checkbox: Checkbox,
    Obscure: Obscure,
    HiddenChange: HiddenChange
};
var modelNames = {
    entityTypes: {
        courseBlocks: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["kursblock"], ["kursblock"]))),
        courseContents: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["inneh\u00E5llsruta"], ["inneh\u00E5llsruta"]))),
        courseInstances: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["kurs"], ["kurs"]))),
        courseTabs: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["flik"], ["flik"]))),
        schools: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_5 || (templateObject_5 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["skola"], ["skola"]))),
        tasks: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_6 || (templateObject_6 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["uppgift"], ["uppgift"]))),
    },
    modifiedLinks: {
        tabs: [Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_7 || (templateObject_7 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tillagd flik"], ["Tillagd flik"]))), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_8 || (templateObject_8 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Borttagen flik"], ["Borttagen flik"])))],
        blocks: [Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_9 || (templateObject_9 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tillagt block"], ["Tillagt block"]))), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_10 || (templateObject_10 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Borttaget block"], ["Borttaget block"])))],
        abilities: [Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_11 || (templateObject_11 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tillagd f\u00F6rm\u00E5ga"], ["Tillagd f\u00F6rm\u00E5ga"]))), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_12 || (templateObject_12 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Borttagen f\u00F6rm\u00E5ga"], ["Borttagen f\u00F6rm\u00E5ga"])))],
        centralContent: [Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_13 || (templateObject_13 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tillagt centralt inneh\u00E5ll"], ["Tillagt centralt inneh\u00E5ll"]))), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_14 || (templateObject_14 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Borttaget centralt inneh\u00E5ll"], ["Borttaget centralt inneh\u00E5ll"])))],
        knowledgeRequirements: [Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_15 || (templateObject_15 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tillagt kunskapskrav"], ["Tillagt kunskapskrav"]))), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_16 || (templateObject_16 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Borttaget kunskapskrav"], ["Borttaget kunskapskrav"])))],
        tasks: [Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_17 || (templateObject_17 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tillagd uppgift"], ["Tillagd uppgift"]))), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_18 || (templateObject_18 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Borttagen uppgift"], ["Borttagen uppgift"])))],
        contents: [Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_19 || (templateObject_19 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tillagd inneh\u00E5llsruta"], ["Tillagd inneh\u00E5llsruta"]))), Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_20 || (templateObject_20 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Borttagen inneh\u00E5llsruta"], ["Borttagen inneh\u00E5llsruta"])))]
    },
    propertyNames: {
        allowAddTabs: [Checkbox, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_21 || (templateObject_21 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrat om till\u00E4gg av flik ska vara till\u00E5tet"], ["\u00C4ndrat om till\u00E4gg av flik ska vara till\u00E5tet"])))],
        allowRemoveTabs: [Checkbox, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_22 || (templateObject_22 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrat om borttagning av flik ska vara till\u00E5tet"], ["\u00C4ndrat om borttagning av flik ska vara till\u00E5tet"])))],
        allowReorderTabs: [Checkbox, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_23 || (templateObject_23 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrat om det ska va till\u00E5tet att \u00E4ndra ordning p\u00E5 flik"], ["\u00C4ndrat om det ska va till\u00E5tet att \u00E4ndra ordning p\u00E5 flik"])))],
        assignment: [Checkbox, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_24 || (templateObject_24 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad flagga f\u00F6r inl\u00E4mningsuppgift"], ["\u00C4ndrad flagga f\u00F6r inl\u00E4mningsuppgift"])))],
        commonLearningGoals: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_25 || (templateObject_25 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrade gemensamma l\u00E4randem\u00E5l"], ["\u00C4ndrade gemensamma l\u00E4randem\u00E5l"])))],
        content: [Html, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_26 || (templateObject_26 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad inneh\u00E5llstext"], ["\u00C4ndrad inneh\u00E5llstext"])))],
        createdBy: [HiddenChange, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_27 || (templateObject_27 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Skapad av"], ["Skapad av"])))],
        createdDate: [HiddenChange, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_28 || (templateObject_28 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Skapad datum"], ["Skapad datum"])))],
        dateTime: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_29 || (templateObject_29 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndat datum / tid"], ["\u00C4ndat datum / tid"])))],
        deadline: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_30 || (templateObject_30 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrat inl\u00E4mningsdatum"], ["\u00C4ndrat inl\u00E4mningsdatum"])))],
        description: [Html, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_31 || (templateObject_31 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad beskrivning"], ["\u00C4ndrad beskrivning"])))],
        embeddedHtml: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_32 || (templateObject_32 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Lagt till inb\u00E4ddad HTML"], ["Lagt till inb\u00E4ddad HTML"])))],
        explainedRequirements: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_33 || (templateObject_33 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Lagt till egna f\u00F6rklaringar av kunskapskrav"], ["Lagt till egna f\u00F6rklaringar av kunskapskrav"])))],
        futureAbilities: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_34 || (templateObject_34 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrade framtidsf\u00F6rm\u00E5gor"], ["\u00C4ndrade framtidsf\u00F6rm\u00E5gor"])))],
        hasCommonLearningGoals: [Checkbox, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_35 || (templateObject_35 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad inst\u00E4llning f\u00F6r gemensamma l\u00E4randem\u00E5l"], ["\u00C4ndrad inst\u00E4llning f\u00F6r gemensamma l\u00E4randem\u00E5l"])))],
        hidden: [Checkbox, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_36 || (templateObject_36 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad flagga \"g\u00F6md\""], ["\u00C4ndrad flagga \"g\u00F6md\""])))],
        hiddenTasks: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_37 || (templateObject_37 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrat listan p\u00E5 g\u00F6mda uppgifter"], ["\u00C4ndrat listan p\u00E5 g\u00F6mda uppgifter"])))],
        html: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_38 || (templateObject_38 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrat inneh\u00E5ll"], ["\u00C4ndrat inneh\u00E5ll"])))],
        learningGoal: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_39 || (templateObject_39 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4randem\u00E5l"], ["L\u00E4randem\u00E5l"])))],
        lockDelete: [Checkbox, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_40 || (templateObject_40 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrat flagga: \"l\u00E5s fr\u00E5n borttagning\""], ["\u00C4ndrat flagga: \"l\u00E5s fr\u00E5n borttagning\""])))],
        locked: [Checkbox, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_41 || (templateObject_41 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad flagga: \"f\u00F6rbjud \u00E4ndring av flikar\""], ["\u00C4ndrad flagga: \"f\u00F6rbjud \u00E4ndring av flikar\""])))],
        migratedTexts: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_42 || (templateObject_42 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndringar i migrerade texter fr\u00E5n skolverket"], ["\u00C4ndringar i migrerade texter fr\u00E5n skolverket"])))],
        modifiedBy: [HiddenChange, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_43 || (templateObject_43 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad av"], ["\u00C4ndrad av"])))],
        modifiedDate: [HiddenChange, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_44 || (templateObject_44 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndringsdatum"], ["\u00C4ndringsdatum"])))],
        taskOrder: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_45 || (templateObject_45 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad ordning p\u00E5 uppgifter"], ["\u00C4ndrad ordning p\u00E5 uppgifter"])))],
        name: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_46 || (templateObject_46 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrat namn"], ["\u00C4ndrat namn"])))],
        order: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_47 || (templateObject_47 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrad ordning"], ["\u00C4ndrad ordning"])))],
        resources: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_48 || (templateObject_48 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4ndrade i resurser"], ["\u00C4ndrade i resurser"])))],
        school: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_49 || (templateObject_49 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Skola"], ["Skola"])))],
        stepNo: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_50 || (templateObject_50 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Stegnummer"], ["Stegnummer"])))],
        stepNumbers: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_51 || (templateObject_51 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Stegnummer"], ["Stegnummer"])))],
        subject: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_52 || (templateObject_52 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4mne"], ["\u00C4mne"])))],
        subjects: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_53 || (templateObject_53 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4mnen"], ["\u00C4mnen"])))],
        tabClass: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_54 || (templateObject_54 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Typ av flik"], ["Typ av flik"])))],
        tabTitle: [HiddenChange, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_55 || (templateObject_55 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Fliknamn"], ["Fliknamn"])))],
        taskType: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_56 || (templateObject_56 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgiftstyp"], ["Uppgiftstyp"])))],
        url: [Text, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_57 || (templateObject_57 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Url"], ["Url"])))],
        workingProcedure: [Html, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_58 || (templateObject_58 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Arbetsprocess"], ["Arbetsprocess"])))],
        youtubeId: [Obscure, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_59 || (templateObject_59 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Youtube ID"], ["Youtube ID"])))]
    },
    getModifiedLinkHeading: function (delta) {
        var headingSpec = modelNames.modifiedLinks[delta.label];
        if (!headingSpec) {
            return delta.type === 'add' ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_60 || (templateObject_60 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tillagt objekt"], ["Tillagt objekt"]))) :
                delta.type === 'remove' ? Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_61 || (templateObject_61 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Borttaget objekt"], ["Borttaget objekt"]))) : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_62 || (templateObject_62 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C5ngrad l\u00E4nkning"], ["\u00C5ngrad l\u00E4nkning"]))); // Should never be
        }
        return delta.type === 'add' ?
            headingSpec[0] : delta.type === 'remove' ?
            headingSpec[1] : Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_63 || (templateObject_63 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C5ngrad l\u00E4nkning"], ["\u00C5ngrad l\u00E4nkning"]))); // Should never be
    },
    getPropVal: function (p, type, prop) {
        switch (p) {
            case true: return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_64 || (templateObject_64 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["P\u00E5slaget"], ["P\u00E5slaget"])));
            case false: return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_65 || (templateObject_65 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Avslaget"], ["Avslaget"])));
            case 'primary': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_66 || (templateObject_66 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Grundskola"], ["Grundskola"])));
            case 'gymnasium': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_67 || (templateObject_67 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Gymnasieskola"], ["Gymnasieskola"])));
            case 'exercise': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_68 || (templateObject_68 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00D6vningsuppgift"], ["\u00D6vningsuppgift"])));
            case 'task': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_69 || (templateObject_69 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppgift"], ["Uppgift"])));
            case 'assignment': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_70 || (templateObject_70 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inl\u00E4mningsuppgift"], ["Inl\u00E4mningsuppgift"])));
            case 'theme-course': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_71 || (templateObject_71 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Temakurs"], ["Temakurs"])));
            case 'step-course': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_72 || (templateObject_72 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Stegkurs"], ["Stegkurs"])));
            case 'intro-tab': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_73 || (templateObject_73 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Introduktionsflik"], ["Introduktionsflik"])));
            case 'run-up-tab': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_74 || (templateObject_74 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Upptakt"], ["Upptakt"])));
            case 'subject-tab': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_75 || (templateObject_75 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["\u00C4mnesflik"], ["\u00C4mnesflik"])));
            case 'mission-tab': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_76 || (templateObject_76 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Uppdragsflik"], ["Uppdragsflik"])));
            case 'content-tab': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_77 || (templateObject_77 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Inneh\u00E5llsflik"], ["Inneh\u00E5llsflik"])));
            case 'teacher-tab': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_78 || (templateObject_78 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["L\u00E4rarsida"], ["L\u00E4rarsida"])));
            case 'word-bank-tab': return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_79 || (templateObject_79 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Ordbank"], ["Ordbank"])));
            default: {
                if (p == null)
                    return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_80 || (templateObject_80 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Nollst\u00E4llt"], ["Nollst\u00E4llt"])));
                if (p === "")
                    return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_81 || (templateObject_81 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["(tomt)"], ["(tomt)"])));
                if (type === Html)
                    return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["maxLength"])(removeHtmlTags(p), 300);
                if (typeof p === 'string')
                    return p;
                if (p.subjectName)
                    return p.subjectName;
                return JSON.stringify(p, null, 2);
            }
        }
    }
};
function removeHtmlTags(html) {
    var div = document.createElement('div');
    div.innerHTML = html;
    return div.innerText;
}
var templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6, templateObject_7, templateObject_8, templateObject_9, templateObject_10, templateObject_11, templateObject_12, templateObject_13, templateObject_14, templateObject_15, templateObject_16, templateObject_17, templateObject_18, templateObject_19, templateObject_20, templateObject_21, templateObject_22, templateObject_23, templateObject_24, templateObject_25, templateObject_26, templateObject_27, templateObject_28, templateObject_29, templateObject_30, templateObject_31, templateObject_32, templateObject_33, templateObject_34, templateObject_35, templateObject_36, templateObject_37, templateObject_38, templateObject_39, templateObject_40, templateObject_41, templateObject_42, templateObject_43, templateObject_44, templateObject_45, templateObject_46, templateObject_47, templateObject_48, templateObject_49, templateObject_50, templateObject_51, templateObject_52, templateObject_53, templateObject_54, templateObject_55, templateObject_56, templateObject_57, templateObject_58, templateObject_59, templateObject_60, templateObject_61, templateObject_62, templateObject_63, templateObject_64, templateObject_65, templateObject_66, templateObject_67, templateObject_68, templateObject_69, templateObject_70, templateObject_71, templateObject_72, templateObject_73, templateObject_74, templateObject_75, templateObject_76, templateObject_77, templateObject_78, templateObject_79, templateObject_80, templateObject_81;


/***/ }),

/***/ "./src/components/course-builder-ks/viewer-editor/version-history/version-history-box.tsx":
/*!************************************************************************************************!*\
  !*** ./src/components/course-builder-ks/viewer-editor/version-history/version-history-box.tsx ***!
  \************************************************************************************************/
/*! exports provided: VersionHistoryBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VersionHistoryBox", function() { return VersionHistoryBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _delta_view__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./delta-view */ "./src/components/course-builder-ks/viewer-editor/version-history/delta-view.tsx");




function VersionHistoryBox(props) {
    var title = props.branchType === 'school-branch' ?
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h2", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Skolans \u00E4ndringar"], ["Skolans \u00E4ndringar"])))) :
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("h3", null, Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Opublicerade \u00E4ndringar"], ["Opublicerade \u00E4ndringar"]))));
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "ked_boxed" },
        title,
        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_delta_view__WEBPACK_IMPORTED_MODULE_3__["DeltaView"], { branchId: props.branchId, editable: !props.isAdmin, tag: props.branchType === 'school-branch' ? props.courseId : null }));
}
var templateObject_1, templateObject_2;


/***/ }),

/***/ "./src/components/course-builder/courses/business-logic.ts":
/*!*****************************************************************!*\
  !*** ./src/components/course-builder/courses/business-logic.ts ***!
  \*****************************************************************/
/*! exports provided: getUncoveredKnowledgeRequirements, getIdsNotCoveredByTasks, getIdsNotCoveredByReqReferencingDocs, sanityCheck, getTasksPerId, getSoftAccessList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUncoveredKnowledgeRequirements", function() { return getUncoveredKnowledgeRequirements; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getIdsNotCoveredByTasks", function() { return getIdsNotCoveredByTasks; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getIdsNotCoveredByReqReferencingDocs", function() { return getIdsNotCoveredByReqReferencingDocs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sanityCheck", function() { return sanityCheck; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTasksPerId", function() { return getTasksPerId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSoftAccessList", function() { return getSoftAccessList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ "./src/components/course-builder/utils.ts");



function getUncoveredKnowledgeRequirements(course) {
    var uncoveredRequirements = course.knowledgeRequirements.reduce(function (result, item) {
        result[item.id] = item;
        return result;
    }, {});
    course.tasks.forEach(function (task) {
        task.knowledgeRequirements.forEach(function (kr) {
            delete uncoveredRequirements[kr.id];
        });
    });
    return Object.keys(uncoveredRequirements).map(function (id) { return uncoveredRequirements[id]; });
}
function getIdsNotCoveredByTasks(course) {
    return getIdsNotCoveredByReqReferencingDocs([course], course.tasks);
}
function getIdsNotCoveredByReqReferencingDocs(templates, docsBeingChecked) {
    var uncoveredIds = {};
    // 1. Mark the ids of all knowledge requirements, abilities and central content for this course:
    templates.forEach(function (course) {
        course.knowledgeRequirements.forEach(function (r) {
            uncoveredIds[r.id] = true;
        });
        course.abilities.forEach(function (a) {
            uncoveredIds[a.id] = true;
        });
        course.centralContent.forEach(function (cc) {
            uncoveredIds[cc.id] = true;
        });
    });
    // 2. List all tasks and unmark all ids that they refer to
    docsBeingChecked.forEach(function (doc) {
        doc.knowledgeRequirements.forEach(function (kr) {
            delete uncoveredIds[kr.id];
        });
        doc.abilities.forEach(function (a) {
            delete uncoveredIds[a.id];
        });
        doc.centralContent.forEach(function (cc) {
            delete uncoveredIds[cc.id];
        });
    });
    return uncoveredIds;
}
function sanityCheck(course) {
    function hasDuplicateTasks(course) {
        var taskIds = {};
        return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["flatten"])(course.modules.map(function (module) { return module.taskIds.map(function (taskId) {
            if (taskIds[taskId]) {
                var task = course.tasks.find(function (t) { return t.id === taskId; });
                return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Samma uppgift f\u00F6rekommer flera g\u00E5nger: \"", "\""], ["Samma uppgift f\u00F6rekommer flera g\u00E5nger: \"", "\""])), task.name);
            }
            taskIds[taskId] = true;
        }).filter(function (x) { return x; }); }));
    }
    function tasksWithSameUrl(course) {
        var taskUrls = {};
        return course.tasks.map(function (task) {
            if (task.url) {
                if (taskUrls[task.url]) {
                    return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_2 || (templateObject_2 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Tv\u00E5 uppgifter pekar p\u00E5 samma URL: \"", "\" samt \"", "\""], ["Tv\u00E5 uppgifter pekar p\u00E5 samma URL: \"", "\" samt \"", "\""])), taskUrls[task.url].name, task.name);
                }
                taskUrls[task.url] = task;
            }
        }).filter(function (x) { return x; });
    }
    function hasEmptyModuleNames(course) {
        return course.modules.some(function (module) { return module.name === ""; }) && Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_3 || (templateObject_3 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Det finns minst en modul utan angivet namn"], ["Det finns minst en modul utan angivet namn"])));
    }
    function hasDuplicateModuleNames(course) {
        var moduleNames = {};
        return course.modules.map(function (module) {
            if (module.name && moduleNames[module.name]) {
                return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["L"])(templateObject_4 || (templateObject_4 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Modulen med namn ", " f\u00F6rekommer flera g\u00E5nger"], ["Modulen med namn ", " f\u00F6rekommer flera g\u00E5nger"])), module.name);
            }
            if (module.name)
                moduleNames[module.name] = true;
        });
    }
    var checks = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["flatten"])([
        hasDuplicateTasks(course),
        tasksWithSameUrl(course),
        hasEmptyModuleNames(course),
        hasDuplicateModuleNames(course)
    ]);
    return checks.filter(function (result) { return result; });
}
function getTasksPerId(course) {
    var result = {};
    function add(id, task) {
        var list = result[id] || (result[id] = []);
        list.push(task);
    }
    course.tasks.forEach(function (task) {
        task.abilities.forEach(function (a) { return add(a.id, task); });
        task.centralContent.forEach(function (c) { return add(c.id, task); });
        task.futureAbilities.forEach(function (fa) { return add(fa, task); });
    });
    return result;
}
/** Returns an access list for a course in a backward compatible way */
function getSoftAccessList(course) {
    var responsibleTeachers = course.responsibleTeachers;
    var result = responsibleTeachers.map(function (da) { return ({
        name: da.name,
        email: Object(_utils__WEBPACK_IMPORTED_MODULE_2__["getEmailFromDocAccess"])(da),
        access: da.access || 'edit'
    }); });
    return result;
}
var templateObject_1, templateObject_2, templateObject_3, templateObject_4;


/***/ }),

/***/ "./src/components/course-builder/knowledge-matrix-partial-utils.ts":
/*!*************************************************************************!*\
  !*** ./src/components/course-builder/knowledge-matrix-partial-utils.ts ***!
  \*************************************************************************/
/*! exports provided: getRequirmentSentences, getSavedSentences, allRequirementSentecesMarked, getPartialContentDefaultView, isPartialCoveredRequirment, getCoveredSenteces, getSortedRequirments, getMigrationTitle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRequirmentSentences", function() { return getRequirmentSentences; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSavedSentences", function() { return getSavedSentences; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "allRequirementSentecesMarked", function() { return allRequirementSentecesMarked; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getPartialContentDefaultView", function() { return getPartialContentDefaultView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isPartialCoveredRequirment", function() { return isPartialCoveredRequirment; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getCoveredSenteces", function() { return getCoveredSenteces; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSortedRequirments", function() { return getSortedRequirments; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMigrationTitle", function() { return getMigrationTitle; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");


//get sentences by requirement
function getRequirmentSentences(requirement) {
    return requirement.split(".").filter(function (e) { return e; });
}
//retrieve sentences
function getSavedSentences(partialRequirments) {
    return partialRequirments.map(function (obj) {
        return obj.trim();
    }) || [];
}
//check all requirements are marked
function allRequirementSentecesMarked(requirementName, partialRequirements) {
    var textSentences = getRequirmentSentences(requirementName);
    return partialRequirements && partialRequirements.length === textSentences.length;
    ;
}
//get the partial saved sentences for the default view
function getPartialContentDefaultView(requirement, partialRequirments, alreadyCoveredPartialRequirments, skipNotMarked) {
    var resultedHtml = requirement.name;
    var textSentences = getRequirmentSentences(requirement.name);
    var rowRequirments = partialRequirments && getSavedSentences(partialRequirments);
    var allReqCoveredSentence = alreadyCoveredPartialRequirments && getCoveredSenteces(alreadyCoveredPartialRequirments, requirement.id);
    var allReqSentencesMarked = allRequirementSentecesMarked(requirement.name, rowRequirments);
    textSentences.forEach(function (sentence) {
        //trimm current sentence
        var trimmedSentence = sentence.trim();
        var fullSentence = sentence + ".";
        if (rowRequirments && rowRequirments.includes(trimmedSentence) && !allReqSentencesMarked) {
            resultedHtml = resultedHtml.replace(fullSentence, "<span class=" + "markedGreen" + ">" + fullSentence + "</span>");
        }
        else {
            var coveredSentece = allReqCoveredSentence && allReqCoveredSentence.includes(trimmedSentence);
            if (coveredSentece) {
                resultedHtml = resultedHtml.replace(fullSentence, "<span>" + fullSentence + "</span>");
            }
            else if (!allReqSentencesMarked && allReqCoveredSentence && allReqCoveredSentence.length > 0) {
                resultedHtml = resultedHtml.replace(fullSentence, "<span class=" + "markedRed" + ">" + fullSentence + "</span>");
            }
        }
    });
    return resultedHtml;
}
//check the current requirement is already covered
function isPartialCoveredRequirment(requirement, alreadyCoveredPartialRequirments) {
    var textSentences = getRequirmentSentences(requirement.name);
    var result = false;
    for (var i = 0; i < textSentences.length; i++) {
        var trimmedSentence = textSentences[i].trim();
        var allCoveredSentenceReq = alreadyCoveredPartialRequirments && getCoveredSenteces(alreadyCoveredPartialRequirments, requirement.id);
        var coveredSentece = allCoveredSentenceReq && allCoveredSentenceReq.includes(trimmedSentence);
        if (coveredSentece) {
            result = true;
            break;
        }
    }
    return result;
}
//compute the covered senteces excluding the current requirement
function getCoveredSenteces(allReq, requirementId) {
    var resultArray = [];
    allReq.forEach(function (obj) {
        var assignedReq = Object.assign([], Object.keys(obj).filter(function (reqId) { return reqId == requirementId; }).map(function (k) { return obj[k].map(function (elem) { return elem.trim(); }); }));
        resultArray.push.apply(resultArray, tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](assignedReq));
    });
    return Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["flatten"])(resultArray);
}
//sort the selected sentences by the order of the appearance in the requirement
function getSortedRequirments(textSentences, partialRequirments) {
    var output = [];
    var indexedSentences = textSentences.map(function (e, i) { return { ind: i, val: e }; });
    output = indexedSentences.filter(function (s) { return partialRequirments.includes(s.val); });
    return output ? output.sort(function (x, y) { return x.ind > y.ind ? 1 : -1; }).map(function (s) { return s.val; }) : [];
}
function getMigrationTitle(isMigrated, markMode) {
    return isMigrated ?
        markMode ?
            "Skolverket har uppdaterat textens formulering. Du kan granska \u00E4ndringen genom att f\u00E4lla ut varningsboxen till h\u00F6ger, med titel \"Uppdaterade formuleringar fr\u00E5n Skolverket\"" :
            "Skolverket har uppdaterat textens formulering, men detta har \u00E4nnu inte granskats av uppgiftens redigeringsbeh\u00F6rige" :
        undefined;
}


/***/ }),

/***/ "./src/components/course-builder/modal-pages/edit-resource.tsx":
/*!*********************************************************************!*\
  !*** ./src/components/course-builder/modal-pages/edit-resource.tsx ***!
  \*********************************************************************/
/*! exports provided: EditResource */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditResource", function() { return EditResource; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ "./src/components/course-builder/utils.ts");
/* harmony import */ var valid_url__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! valid-url */ "./node_modules/valid-url/index.js");
/* harmony import */ var valid_url__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(valid_url__WEBPACK_IMPORTED_MODULE_4__);





var EditResource = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](EditResource, _super);
    function EditResource(props) {
        var _this = _super.call(this, props) || this;
        _this.state = _this.props.resource || { name: '', url: '' };
        return _this;
    }
    EditResource.prototype.save = function () {
        var resource = this.state;
        if (!valid_url__WEBPACK_IMPORTED_MODULE_4___default.a.isUri(resource.url))
            throw new Error(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Angiven URL '", "' \u00E4r ogiltig. Ska b\u00F6rja med exempelvis http:, https: eller mailto:"], ["Angiven URL '", "' \u00E4r ogiltig. Ska b\u00F6rja med exempelvis http:, https: eller mailto:"])), resource.url));
        this.props.onSave(resource);
    };
    EditResource.prototype.render = function () {
        var _this = this;
        var _a = this.props, title = _a.title, onSave = _a.onSave, onDelete = _a.onDelete;
        var resource = this.state;
        var isValidUrl = valid_url__WEBPACK_IMPORTED_MODULE_4___default.a.isUri(this.state.url);
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, title),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" }, "Namn:"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", autoFocus: true, tabIndex: 1, size: 50, value: resource.name, onChange: function (ev) { return _this.setState({ name: ev.target.value }); } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top spaced" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" }, "L\u00E4nk:"),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top " },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", tabIndex: 1, size: 50, value: resource.url, onChange: function (ev) { return _this.setState({ url: ev.target.value }); } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top spaced" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                (resource.createdDate || resource.modifiedDate) && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                    resource.createdDate && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                        "Resursen/L\u00E4nken skapades ",
                        Object(_utils__WEBPACK_IMPORTED_MODULE_3__["dtFormat"])(resource.createdDate),
                        " av ",
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("strong", null, resource.createdBy.name),
                        "."),
                    resource.modifiedDate && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                        "Resursen/L\u00E4nken redigerades senast ",
                        Object(_utils__WEBPACK_IMPORTED_MODULE_3__["dtFormat"])(resource.modifiedDate),
                        " av ",
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("strong", null, resource.modifiedBy.name),
                        "."),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)),
                onDelete && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { tabIndex: 2, className: "btn btn-warning btn-large pull-right", onClick: function () { return onDelete(); } }, "Ta bort resurs/l\u00E4nk"),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { tabIndex: 1, className: "btn btn-large" + (isValidUrl ? "" : " btn-inactive"), onClick: isValidUrl && (function () { return onSave(resource); }) }, "Spara")));
    };
    return EditResource;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder/modal-pages/edit-task/task-migration-box.tsx":
/*!************************************************************************************!*\
  !*** ./src/components/course-builder/modal-pages/edit-task/task-migration-box.tsx ***!
  \************************************************************************************/
/*! exports provided: TaskMigrationBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskMigrationBox", function() { return TaskMigrationBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");



var TaskMigrationBox = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TaskMigrationBox, _super);
    function TaskMigrationBox(props) {
        return _super.call(this, props) || this;
    }
    TaskMigrationBox.prototype.render = function () {
        var _a = this.props, task = _a.task, course = _a.course, updateLink = _a.updateLink;
        if (!task.migratedTexts)
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, "\u00A0");
        var _b = task.migratedTexts, abilities = _b.abilities, centralContent = _b.centralContent, knowledgeRequirements = _b.knowledgeRequirements;
        var krs = Object.keys(knowledgeRequirements || {}).map(function (id) { return (tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, course.knowledgeRequirements.find(function (t) { return t.id === id; }), knowledgeRequirements[id])); }); //.filter(({name}) => !!name);
        var krA = { title: "Uppdaterat kunskapskrav för betyget A", type: "knowledgeRequirements", items: krs.filter(function (kr) { return kr.gradeStep === 'A'; }) };
        var krC = { title: "Uppdaterat Kunskapskrav för betyget C", type: "knowledgeRequirements", items: krs.filter(function (kr) { return kr.gradeStep === 'C'; }) };
        var krE = { title: "Uppdaterat kunskapskrav för betyget E", type: "knowledgeRequirements", items: krs.filter(function (kr) { return kr.gradeStep === 'E'; }) };
        var abs = { title: "Uppdaterade förmågor", type: "abilities", items: Object.keys(abilities || {}).map(function (id) { return (tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, course.abilities.find(function (t) { return t.id === id; }), abilities[id])); }) }; //.filter(({name}) => !!name)};
        var ccs = { title: "Uppdaterat centralt innehåll", type: "centralContent", items: Object.keys(centralContent || {}).map(function (id) { return (tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, course.centralContent.find(function (cc) { return cc.id == id; }), centralContent[id])); }) }; //.filter(({name}) => !!name)};
        var tablesToShow = [krA, krC, krE, ccs, abs].filter(function (boxInfo) { return boxInfo.items.length > 0; });
        if (tablesToShow.length === 0)
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, "\u00A0");
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__["OpenCloseBox"], { className: "larger", title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "warningFlag" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-exclamation-triangle", "aria-hidden": "true" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Uppdaterade formuleringar fr\u00E5n Skolverket")) }, tablesToShow.map(function (_a) {
            var title = _a.title, type = _a.type, items = _a.items;
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: title },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, title),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { style: { width: "40%" } }, "Ursprunglig formulering"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { style: { width: "40%" } }, "Skolverkets nya formulering"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "T\u00E4cker uppgiften den nya formuleringen?"))),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, items.map(function (item) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: item.id },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { dangerouslySetInnerHTML: { __html: item.oldText } }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { dangerouslySetInnerHTML: { __html: item.name } }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { onClick: function () { return updateLink(item.id, true); } }, "Ja - beh\u00E5ll kopplingen"),
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { onClick: function () { return updateLink(item.id, false); } }, "Nej - ta bort kopplingen"))); }))));
        })));
    };
    return TaskMigrationBox;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-builder/sub-components/ellipsis-loader.tsx":
/*!**************************************************************************!*\
  !*** ./src/components/course-builder/sub-components/ellipsis-loader.tsx ***!
  \**************************************************************************/
/*! exports provided: EllipsisLoader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EllipsisLoader", function() { return EllipsisLoader; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var EllipsisLoader = function () {
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("img", { style: { border: 0, margin: 0, padding: 0 }, className: "ellipsis-loader" });
};


/***/ }),

/***/ "./src/components/course-builder/sub-components/knowledge-matrix.tsx":
/*!***************************************************************************!*\
  !*** ./src/components/course-builder/sub-components/knowledge-matrix.tsx ***!
  \***************************************************************************/
/*! exports provided: KnowledgeMatrix */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KnowledgeMatrix", function() { return KnowledgeMatrix; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../knowledge-matrix-partial-utils */ "./src/components/course-builder/knowledge-matrix-partial-utils.ts");




var KnowledgeMatrix = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](KnowledgeMatrix, _super);
    function KnowledgeMatrix(props) {
        return _super.call(this, props) || this;
    }
    KnowledgeMatrix.prototype.getKnowledgeSentencesContent = function (requirement, partialRequirments, index, markedOk, isMigrated) {
        var _this = this;
        var _a = this.props, coveredPartialRequirments = _a.coveredPartialRequirments, markMode = _a.markMode;
        //split text in senteces
        var textSentences = Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["getRequirmentSentences"])(requirement.name);
        //get saved sencenteces for the current requirement
        var rowRequirments = partialRequirments && Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["getSavedSentences"])(partialRequirments);
        //get all saved senteces excluding the current ones
        var allCoveredSentenceReq = coveredPartialRequirments && Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["getCoveredSenteces"])(coveredPartialRequirments, requirement.id);
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: index, title: Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["getMigrationTitle"])(isMigrated, markMode) }, textSentences.map(function (sentence, k) {
            var trimmedSentence = sentence.trim();
            var hasValue = rowRequirments && rowRequirments.includes(trimmedSentence) || markedOk && !rowRequirments;
            var sentenceNotMarked = !allCoveredSentenceReq.includes(trimmedSentence);
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("span", { key: k, dangerouslySetInnerHTML: { __html: sentence ? sentence + "." : "" }, className: "selectable" + (hasValue ? " markedGreen" : (sentenceNotMarked ? " markedRed" : "")), onClick: function () {
                    var updatedRequirments = partialRequirments ? Object.assign([], partialRequirments) : [];
                    var shouldBeRemoved = rowRequirments && rowRequirments.includes(trimmedSentence);
                    //check if no partial data saved, but the requirment is markedOk
                    if (markedOk && (!rowRequirments || rowRequirments.length == 0)) {
                        //save all excepting the one that should be removed
                        updatedRequirments = textSentences.filter(function (x) { return x != sentence; });
                        _this.props.onUpdatePartialKnowledge(requirement.id, Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["getSortedRequirments"])(textSentences, updatedRequirments));
                    }
                    else {
                        if (shouldBeRemoved) {
                            updatedRequirments = partialRequirments.filter(function (req) { return req != sentence; });
                        }
                        else {
                            updatedRequirments.push(sentence);
                        }
                        _this.props.onUpdatePartialKnowledge(requirement.id, Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["getSortedRequirments"])(textSentences, updatedRequirments));
                    }
                } });
        }));
    };
    KnowledgeMatrix.prototype.onRequirementChanged = function (requirement, value, partialValues, allPartialMarked) {
        if (this.props.onUpdatePartialKnowledge) {
            //remove all saved senteces if the requirement is unchecked
            (value && !partialValues || allPartialMarked) ? this.props.onUpdatePartialKnowledge(requirement.id, []) : this.props.onUpdatePartialKnowledge(requirement.id, Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["getRequirmentSentences"])(requirement.name));
        }
        else {
            this.props.onMarkChanged(requirement.id, !value);
        }
    };
    KnowledgeMatrix.prototype.render = function () {
        var _this = this;
        var _a = this.props, knowledgeRequirements = _a.knowledgeRequirements, markedIds = _a.markedIds, migratedIds = _a.migratedIds, explainedRequirements = _a.explainedRequirements, markBySentenceView = _a.markBySentenceView, markPartialFeatureEnabled = _a.markPartialFeatureEnabled;
        var _b = this.props, idsToMarkNotOk = _b.idsToMarkNotOk, markMode = _b.markMode, onExplainedRequirementsChanged = _b.onExplainedRequirementsChanged, partialRequirments = _b.partialRequirments, coveredPartialRequirments = _b.coveredPartialRequirments;
        var columns = ["E", "C", "A"];
        var rows = [];
        var reqs = knowledgeRequirements.slice();
        var row = null;
        while (true) {
            row = columns.map(function (grade) {
                var pNext = reqs.findIndex(function (r) { return r.gradeStep && r.gradeStep.toUpperCase() === grade; });
                if (pNext < 0)
                    return null;
                var rv = reqs[pNext];
                reqs.splice(pNext, 1);
                return rv;
            });
            if (row.every(function (r) { return r === null; }))
                break;
            rows.push(row);
        }
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", { className: "knowledge-matrix" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null, columns.map(function (c) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: c }, c); }))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, rows.map(function (row, i) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], { key: i },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null, row.map(function (requirement, j) {
                    var isMarkedOK = requirement && markedIds && markedIds.indexOf(requirement.id) >= 0;
                    var isMarkedNotOK = requirement && idsToMarkNotOk && idsToMarkNotOk[requirement.id]; //not used anymore
                    var isMigrated = requirement && migratedIds && !!migratedIds[requirement.id];
                    var rowPartialRequirements = partialRequirments && partialRequirments[requirement.id];
                    var partialValues = rowPartialRequirements && Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["getSavedSentences"])(rowPartialRequirements);
                    var allReqSentencesMarked = Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["allRequirementSentecesMarked"])(requirement.name, partialValues);
                    var hasPartialCovered = Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["isPartialCoveredRequirment"])(requirement, coveredPartialRequirments);
                    var markedRed = !(partialValues && partialValues.length > 0 || hasPartialCovered);
                    return markBySentenceView && markPartialFeatureEnabled ? _this.getKnowledgeSentencesContent(requirement, rowPartialRequirements, j, isMarkedOK, isMigrated) :
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: j, dangerouslySetInnerHTML: { __html: requirement ? (rowPartialRequirements && rowPartialRequirements.length || hasPartialCovered) ?
                                    Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["getPartialContentDefaultView"])(requirement, rowPartialRequirements, coveredPartialRequirments, markedRed) : requirement.name : "" }, className: (markMode ? "selectable" : "") +
                                (isMigrated ? " migrated" : "") +
                                (isMarkedOK && (!rowPartialRequirements || allReqSentencesMarked) ?
                                    " markedGreen" :
                                    markedRed ?
                                        " markedRed" :
                                        ""), onClick: markMode && requirement ?
                                function () { return _this.onRequirementChanged(requirement, isMarkedOK, partialValues, allReqSentencesMarked); } :
                                undefined, title: Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["getMigrationTitle"])(isMigrated, markMode) });
                })),
                explainedRequirements && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null, row.map(function (requirement, j) {
                    var partialSentences = partialRequirments && partialRequirments[requirement.id] && Object(_knowledge_matrix_partial_utils__WEBPACK_IMPORTED_MODULE_3__["getSavedSentences"])(partialRequirments[requirement.id]);
                    var isMarkedOK = requirement && markedIds && markedIds.indexOf(requirement.id) >= 0 || partialSentences && partialSentences.length > 0;
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: j }, isMarkedOK ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { placeholder: Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Beskriv kravet"], ["Beskriv kravet"]))), className: "inputTextBox inputTextLarge", style: { width: "100%" }, readOnly: !markMode, value: explainedRequirements[requirement.id] || "", onChange: onExplainedRequirementsChanged && (function (ev) { return onExplainedRequirementsChanged(requirement.id, ev.target.value); }) }) : undefined);
                }))); })));
        { /*return <div>
          <table>
            <thead>
              <tr>
                <th>E</th>
                <th>C</th>
                <th>A</th>
              </tr>
            </thead>
            <tbody>
              {tbody.map((row, i) =>
              <tr key={i}>{row.map((cell, j) => {
                const isMarkedOK = props.markedIds && props.markedIds.indexOf(cell.id) >= 0;
                const isMarkedNotOK = props.idsToMarkNotOk && props.idsToMarkNotOk[cell.id];
                return <td
                  key={j}
                  rowSpan={cell.rowSpan}
                  className={(props.markMode ? "selectable" : "") +
                    (isMarkedOK ?
                      " markedGreen" :
                      (isMarkedNotOK ?
                        " markedRed":
                        ""))}
                  onClick={props.markMode && (()=>props.onMarkChanged(cell.id, !isMarkedOK))}>
                  {cell.html && <div style={{position: 'relative'}}>
                    <p
                      className={cell.type === 'ability' ? 'abilityText' : 'criteriaText'}
                      dangerouslySetInnerHTML={{__html: cell.html}} />
                    {props.editMode && <RemoveItem className="upperRight" onClick={()=>
                      this.setCellIds(
                        cell.type,
                        cell.rowIndex,
                        this.getCellIds(
                          cell.type,
                          cell.rowIndex).filter(id => id != cell.id) )} /> }
                  </div>}
                </td>})}
              </tr>)}
            </tbody>
          </table>
        </div>*/
        }
    };
    return KnowledgeMatrix;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder/sub-components/remove-item.tsx":
/*!**********************************************************************!*\
  !*** ./src/components/course-builder/sub-components/remove-item.tsx ***!
  \**********************************************************************/
/*! exports provided: RemoveItem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RemoveItem", function() { return RemoveItem; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");



;
var RemoveItem = function (_a) {
    var onClick = _a.onClick, className = _a.className, style = _a.style, title = _a.title;
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { title: title || Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["L"])(templateObject_1 || (templateObject_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__makeTemplateObject"](["Radera"], ["Radera"]))), className: "removeItem " + (className || ""), onClick: onClick, style: style });
};
var templateObject_1;


/***/ }),

/***/ "./src/components/course-builder/sub-components/select-related-docs.tsx":
/*!******************************************************************************!*\
  !*** ./src/components/course-builder/sub-components/select-related-docs.tsx ***!
  \******************************************************************************/
/*! exports provided: SelectRelatedDocs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SelectRelatedDocs", function() { return SelectRelatedDocs; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");




var SelectRelatedDocs = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](SelectRelatedDocs, _super);
    function SelectRelatedDocs(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {};
        return _this;
    }
    SelectRelatedDocs.prototype.render = function () {
        var _this = this;
        var _a = this.props, options = _a.options, title = _a.title, markedIds = _a.markedIds, markMode = _a.markMode, migratedIds = _a.migratedIds, uncoveredIds = _a.uncoveredIds;
        var groupedOptions = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["arrayToLookup"])(options, function (d) { return d.group || "default"; });
        var groups = Object.keys(groupedOptions);
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, title), className: "larger" }, groups.map(function (group) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], { key: group },
            groups.length === 1 ? null : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, group),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null)),
            groupedOptions[group].map(function (option) {
                var isMarked = markedIds.some(function (x) { return x === option.id; });
                var isMigrated = migratedIds && !!migratedIds[option.id];
                var isUncovered = uncoveredIds && uncoveredIds[option.id];
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal", key: option.id, onClick: function () {
                        return markMode && _this.props.onMarkChanged(option.id, !isMarked);
                    } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top spaced" +
                            (markMode ? " selectable" : "") +
                            (isMarked ? " markedGreen" : (isUncovered ?
                                " markedRed" :
                                "")) +
                            (isMigrated ? " migrated" : ""), title: isMigrated ?
                            markMode ?
                                "Skolverket har uppdaterat textens formulering. Du kan granska \u00E4ndringen genom att f\u00E4lla ut varningsboxen till h\u00F6ger, med titel \"Uppdaterade formuleringar fr\u00E5n Skolverket\"" :
                                "Skolverket har uppdaterat textens formulering, men detta har \u00E4nnu inte granskats av uppgiftens redigeringsbeh\u00F6rige" :
                            undefined },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { dangerouslySetInnerHTML: { __html: option.name } }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)));
            })); }));
    };
    return SelectRelatedDocs;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-builder/sub-components/spinner.tsx":
/*!******************************************************************!*\
  !*** ./src/components/course-builder/sub-components/spinner.tsx ***!
  \******************************************************************/
/*! exports provided: Spinner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Spinner", function() { return Spinner; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var Spinner = function () { return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("span", null,
    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("i", { className: "fa fa-spinner fa-spin", "aria-hidden": "true" }),
    "\u00A0"); };


/***/ }),

/***/ "./src/components/course-builder/utils.ts":
/*!************************************************!*\
  !*** ./src/components/course-builder/utils.ts ***!
  \************************************************/
/*! exports provided: updateDocumentGraphs, dtFormat, shortDateFormat, shortPersonNameFormat, updateModificationStamp, updateCreationStamp, getEmailFromDocAccess, updateModificationAndCreationStamps, applyEtags, readBlob, readBlobAsText, readBlobAsDataUrl, allowCopy, updateCourseBuilderStatus, loadCourse, hasChanges */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateDocumentGraphs", function() { return updateDocumentGraphs; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dtFormat", function() { return dtFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shortDateFormat", function() { return shortDateFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shortPersonNameFormat", function() { return shortPersonNameFormat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateModificationStamp", function() { return updateModificationStamp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateCreationStamp", function() { return updateCreationStamp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getEmailFromDocAccess", function() { return getEmailFromDocAccess; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateModificationAndCreationStamps", function() { return updateModificationAndCreationStamps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "applyEtags", function() { return applyEtags; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "readBlob", function() { return readBlob; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "readBlobAsText", function() { return readBlobAsText; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "readBlobAsDataUrl", function() { return readBlobAsDataUrl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "allowCopy", function() { return allowCopy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateCourseBuilderStatus", function() { return updateCourseBuilderStatus; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadCourse", function() { return loadCourse; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hasChanges", function() { return hasChanges; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var react_addons_update__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-addons-update */ "./node_modules/react-addons-update/index.js");
/* harmony import */ var react_addons_update__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_addons_update__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jquery */ "jquery");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");






function updateDocumentGraphs(oldDoc, newDoc, table, graphs, batch) {
    var e_1, _a;
    var docUpdates = {};
    var docId = newDoc.id;
    var _loop_1 = function (navProp) {
        var e_2, _a, e_3, _b, e_4, _c;
        var foreignTable = graphs[navProp];
        var oldList = oldDoc[navProp] || [];
        var newList = newDoc[navProp];
        if (!newList)
            return "continue";
        var tuples = newList
            .map(function (doc, idx) { return ({ doc: doc, idx: idx }); }); // Create tubles of {doc, array-index} so we can update result
        var added = tuples.filter(function (tuple) { return !oldList.some(function (o) { return o.id === tuple.doc.id; }); }); // Find added items
        try {
            for (var added_1 = (e_2 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](added)), added_1_1 = added_1.next(); !added_1_1.done; added_1_1 = added_1.next()) {
                var a = added_1_1.value;
                var mutatedSubDoc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, a.doc);
                var meta = mutatedSubDoc.$meta;
                delete mutatedSubDoc.$meta; // Delete $meta so that "add" or "update" does not persiste to next state.
                if (meta === 'add') {
                    if (!mutatedSubDoc.id)
                        mutatedSubDoc.id = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["createUUID"])(); // Generate ID if not done yet.
                    // Now put an 'add' mutation in the batch queue.
                    batch.add(foreignTable, mutatedSubDoc);
                }
                else if (meta === 'update') {
                    batch.put(foreignTable, mutatedSubDoc);
                }
                batch.link(table, docId, foreignTable, mutatedSubDoc.id, navProp);
                // Update result so that state is reflected after succesful POST to server.
                if (!docUpdates[navProp])
                    docUpdates[navProp] = {};
                docUpdates[navProp][a.idx] = { $set: mutatedSubDoc };
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (added_1_1 && !added_1_1.done && (_a = added_1.return)) _a.call(added_1);
            }
            finally { if (e_2) throw e_2.error; }
        }
        var removed = oldList.filter(function (o) { return !newList.some(function (n) { return n.id === o.id; }); });
        try {
            for (var removed_1 = (e_3 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](removed)), removed_1_1 = removed_1.next(); !removed_1_1.done; removed_1_1 = removed_1.next()) {
                var r = removed_1_1.value;
                batch.unlink(table, docId, foreignTable, r.id, navProp);
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (removed_1_1 && !removed_1_1.done && (_b = removed_1.return)) _b.call(removed_1);
            }
            finally { if (e_3) throw e_3.error; }
        }
        var updated = tuples.filter(function (tuple) { return oldList.some(function (o) { return o.id === tuple.doc.id && tuple.doc.$meta === 'update'; }); });
        try {
            for (var updated_1 = (e_4 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](updated)), updated_1_1 = updated_1.next(); !updated_1_1.done; updated_1_1 = updated_1.next()) {
                var u = updated_1_1.value;
                var mutatedSubDoc = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, u.doc);
                delete mutatedSubDoc.$meta;
                batch.put(foreignTable, mutatedSubDoc);
                // Update result so that $meta is removed from navigation prop after successful POST to server.
                if (!docUpdates[navProp])
                    docUpdates[navProp] = {};
                docUpdates[navProp][u.idx] = { $set: mutatedSubDoc };
            }
        }
        catch (e_4_1) { e_4 = { error: e_4_1 }; }
        finally {
            try {
                if (updated_1_1 && !updated_1_1.done && (_c = updated_1.return)) _c.call(updated_1);
            }
            finally { if (e_4) throw e_4.error; }
        }
    };
    try {
        for (var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(graphs)), _c = _b.next(); !_c.done; _c = _b.next()) {
            var navProp = _c.value;
            _loop_1(navProp);
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return react_addons_update__WEBPACK_IMPORTED_MODULE_3___default()(newDoc, docUpdates);
}
function dtFormat(dateTime) {
    return moment__WEBPACK_IMPORTED_MODULE_1___default()(dateTime).format('YYMMDD HH:mm');
}
function shortDateFormat(dateTime) {
    return moment__WEBPACK_IMPORTED_MODULE_1___default()(dateTime).format('YYMMDD');
}
function shortPersonNameFormat(name) {
    if (!name)
        return "";
    var names = name.split(' ').filter(function (n) { return !!n; });
    var lastName = names.pop();
    return names.map(function (name) { return name[0] + "."; }).concat(lastName).join(' ');
}
function updateModificationStamp(now, obj, user) {
    return react_addons_update__WEBPACK_IMPORTED_MODULE_3___default()(obj, {
        dateTime: { $set: now },
        modifiedDate: { $set: now },
        modifiedBy: {
            $set: {
                name: user.displayName,
                url: "mailto:" + user.mail
            }
        }
    });
}
function updateCreationStamp(now, obj, user) {
    return react_addons_update__WEBPACK_IMPORTED_MODULE_3___default()(obj, {
        createdDate: { $set: now },
        createdBy: {
            $set: {
                name: user.displayName,
                url: "mailto:" + user.mail
            }
        }
    });
}
function getEmailFromDocAccess(resource) {
    if (resource.email)
        return resource.email;
    return resource.url ?
        resource.url.startsWith('mailto:') ?
            resource.url.substring('mailto:'.length) :
            resource.url :
        resource.url;
}
function updateModificationAndCreationStamps(obj, user) {
    var now = Date.now();
    obj = updateModificationStamp(now, obj, user);
    if (!obj.createdBy)
        obj = updateCreationStamp(now, obj, user);
    return obj;
}
function applyEtags(doc, newEtags, graphs) {
    var e_5, _a;
    var res = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, doc);
    var etag = newEtags[doc.id];
    if (etag)
        res.$etag = etag;
    try {
        for (var graphs_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](graphs), graphs_1_1 = graphs_1.next(); !graphs_1_1.done; graphs_1_1 = graphs_1.next()) {
            var label = graphs_1_1.value;
            var newList = doc[label].map(function (d) { return applyEtags(d, newEtags, []); });
            res[label] = newList;
        }
    }
    catch (e_5_1) { e_5 = { error: e_5_1 }; }
    finally {
        try {
            if (graphs_1_1 && !graphs_1_1.done && (_a = graphs_1.return)) _a.call(graphs_1);
        }
        finally { if (e_5) throw e_5.error; }
    }
    return res;
}
function readBlob(blob, m) {
    return new Promise(function (resolve, reject) {
        var reader = new FileReader();
        reader.onload = function (ev) { return resolve(ev.target.result); };
        reader.onabort = function (ev) { return reject(new Error("file read aborted")); };
        reader.onerror = function (ev) { return reject(ev.target.error); };
        m(reader);
    });
}
function readBlobAsText(blob) {
    return readBlob(blob, function (r) { return r.readAsText(blob); });
}
function readBlobAsDataUrl(blob) {
    return readBlob(blob, function (r) { return r.readAsDataURL(blob); });
}
function allowCopy(e) {
    e.stopPropagation();
    e.preventDefault();
    e.dataTransfer.dropEffect = 'copy';
}
function updateCourseBuilderStatus(status) {
    var div = jquery__WEBPACK_IMPORTED_MODULE_4___default()('div.course-builder')[0];
    if (div)
        div.className = "course-builder" + (status ? " status " + status : "");
}
function loadCourse(id, options) {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var client, includeTemplateChain, includeTasks, _a, course, courseTasks, templateChain;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
            switch (_b.label) {
                case 0:
                    client = _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].kedBackendClient;
                    includeTemplateChain = options && options.includeTemplateChain;
                    includeTasks = !options || !options.include || options.include.indexOf("tasks") !== -1;
                    return [4 /*yield*/, Promise.all([
                            client.get("courses", id, {
                                include: options && options.include ? options.include.filter(function (i) { return i !== "tasks"; }) : [
                                    "centralContent",
                                    "knowledgeRequirements",
                                    "abilities",
                                    "images",
                                    "acl" // Don't include tasks here...
                                ]
                            }),
                            // ... but include tasks here instead so that we can load the graphs for the
                            // tasks as well!
                            includeTasks && client.list("tasks", {
                                hasEdgesFrom: id,
                                include: ['knowledgeRequirements', 'centralContent', 'abilities', 'acl'],
                                flags: ['includeIdsOnly'] // Don't need redundant info that's already on course
                            }),
                            includeTemplateChain && client.list("courses", {
                                hasEdgesFrom: id,
                                flags: ['idsOnly']
                            })
                        ])];
                case 1:
                    _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"].apply(void 0, [(_b.sent()), 3]), course = _a[0], courseTasks = _a[1], templateChain = _a[2];
                    course.tasks = courseTasks;
                    // Correct the order of Abilities
                    if (course.abilities && course.abilitiesOrder) {
                        course.abilities = course.abilitiesOrder.map(function (id) {
                            return course.abilities.find(function (a) { return a.id === id; });
                        });
                    }
                    // Correct the order of KnowledgeRequirements
                    if (course.knowledgeRequirements && course.knowledgeRequirementsOrder) {
                        course.knowledgeRequirements = course.knowledgeRequirementsOrder.map(function (id) {
                            return course.knowledgeRequirements.find(function (c) { return c.id === id; });
                        });
                    }
                    // Correct the order of CentralContent
                    if (course.centralContent && course.centralContentOrder) {
                        course.centralContent = course.centralContentOrder.map(function (id) {
                            return course.centralContent.find(function (cc) { return cc.id === id; });
                        }); //.filter(x => !!x);// Debugging somthin' . Normally the last .filter()... part should not be nescessary...
                    }
                    // Include template chain if requested.
                    if (includeTemplateChain)
                        course.templateChain = templateChain;
                    return [2 /*return*/, course];
            }
        });
    });
}
// Check differences between two array of type T
function hasChanges(originalValues, currentValues) {
    return originalValues === undefined || currentValues.filter(function (x) { return !originalValues.includes(x); }).length > 0 || originalValues.filter(function (x) { return !currentValues.includes(x); }).length > 0;
}


/***/ }),

/***/ "./src/components/course-viewer/course-page/task-assignments.tsx":
/*!***********************************************************************!*\
  !*** ./src/components/course-viewer/course-page/task-assignments.tsx ***!
  \***********************************************************************/
/*! exports provided: TaskAssignments */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskAssignments", function() { return TaskAssignments; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var downloadjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! downloadjs */ "./node_modules/downloadjs/download.js");
/* harmony import */ var downloadjs__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(downloadjs__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var _urkund_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./urkund-utils */ "./src/components/course-viewer/course-page/urkund-utils.ts");
/* harmony import */ var _course_builder_ks_logic_is_employee__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../course-builder-ks/logic/is-employee */ "./src/components/course-builder-ks/logic/is-employee.ts");
/* harmony import */ var _apis_google_picker__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../apis/google-picker */ "./src/apis/google-picker.ts");
/* harmony import */ var _apis_buttons__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../apis/buttons */ "./src/apis/buttons.tsx");
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../features */ "./src/features/index.ts");
/* harmony import */ var _apis_google_drive__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../apis/google-drive */ "./src/apis/google-drive.ts");















var MAX_URKUND_FILE_SIZE_MB = 50;
var MAX_NONURKUND_FILE_SIZE_MB = 100;
var ALLOWED_EXTENSIONS = [
    ".pdf",
    ".odt",
    ".docx",
    ".doc",
    ".cad",
    ".wav",
    ".mp3",
    ".mpeg4",
    ".mp4",
    ".zip",
    ".png",
    ".jpg",
    ".jpeg",
    ".gif"
];
var URKUND_EXTENSIONS = [
    ".pdf",
    ".odt",
    ".docx",
    ".doc"
];
var TaskAssignments = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TaskAssignments, _super);
    function TaskAssignments(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            assignments: [],
            loading: true
        };
        return _this;
    }
    TaskAssignments.prototype.setStatePromised = function (cb) {
        var _this = this;
        return new Promise(function (resolve) { return _super.prototype.setState.call(_this, cb, resolve); });
    };
    TaskAssignments.prototype.componentDidMount = function () {
        this.load();
    };
    TaskAssignments.prototype.componentWillReceiveProps = function (nextProps) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var err_1;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 4, , 5]);
                        if (!(nextProps.taskId !== this.props.taskId ||
                            nextProps.courseId !== this.props.courseId)) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.setStatePromised(function () { return ({
                                assignments: [],
                                loading: true
                            }); })];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.load()];
                    case 2:
                        _a.sent();
                        _a.label = 3;
                    case 3: return [3 /*break*/, 5];
                    case 4:
                        err_1 = _a.sent();
                        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["showError"])(err_1);
                        return [3 /*break*/, 5];
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    TaskAssignments.prototype.update = function (assignments, assignment) {
        var retval = tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"]([
            assignment
        ], assignments.filter(function (_a) {
            var user = _a.user, filename = _a.filename;
            return user !== assignment.user ||
                filename !== assignment.filename;
        }));
        return retval;
    };
    TaskAssignments.prototype.refreshAssignment = function (assignment) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var client, _a, courseId, taskId, school, user, filename, req, _b, _c, resJson_1, e_1;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_d) {
                switch (_d.label) {
                    case 0:
                        client = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient.http;
                        _a = this.props, courseId = _a.courseId, taskId = _a.taskId, school = _a.school;
                        user = assignment.user, filename = assignment.filename;
                        return [4 /*yield*/, this.setState(function (_a) {
                                var assignments = _a.assignments;
                                return ({
                                    assignments: _this.update(assignments, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, assignment, { isRefreshing: true }))
                                });
                            })];
                    case 1:
                        _d.sent();
                        _d.label = 2;
                    case 2:
                        _d.trys.push([2, 8, , 10]);
                        return [4 /*yield*/, client.get("assignments/urkund/" + school + "/" + courseId + "/" + taskId + "/" + user + "/" + filename)];
                    case 3:
                        req = _d.sent();
                        if (!(req.status >= 400)) return [3 /*break*/, 5];
                        _b = kedbackend_client__WEBPACK_IMPORTED_MODULE_6__["HttpError"].bind;
                        _c = [void 0, req.status];
                        return [4 /*yield*/, req.text()];
                    case 4: throw new (_b.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_6__["HttpError"], _c.concat([_d.sent()])))();
                    case 5: return [4 /*yield*/, req.text()];
                    case 6:
                        resJson_1 = _d.sent();
                        return [4 /*yield*/, this.setState(function (_a) {
                                var assignments = _a.assignments;
                                return ({
                                    assignments: _this.update(assignments, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, assignment, { isRefreshing: false, metadata: tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, assignment.metadata, { urkundResponse: resJson_1 }) }))
                                });
                            })];
                    case 7:
                        _d.sent();
                        return [3 /*break*/, 10];
                    case 8:
                        e_1 = _d.sent();
                        return [4 /*yield*/, this.setState(function (_a) {
                                var assignments = _a.assignments;
                                return ({
                                    assignments: _this.update(assignments, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, assignment, { isRefreshing: false, refreshError: e_1 }))
                                });
                            })];
                    case 9:
                        _d.sent();
                        return [3 /*break*/, 10];
                    case 10: return [2 /*return*/];
                }
            });
        });
    };
    TaskAssignments.prototype.load = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var client, _a, courseId, taskId, school, teacherAtSchool, res, _b, _c, assignments, refreshableAssigments, refreshableAssigments_1, refreshableAssigments_1_1, a, e_2_1, error_1;
            var e_2, _d;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_e) {
                switch (_e.label) {
                    case 0:
                        _e.trys.push([0, 13, , 14]);
                        client = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient.http;
                        _a = this.props, courseId = _a.courseId, taskId = _a.taskId, school = _a.school;
                        teacherAtSchool = Object(_access_control__WEBPACK_IMPORTED_MODULE_7__["isTeacherAtSchool"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser, school);
                        return [4 /*yield*/, (teacherAtSchool ?
                                client.get("assignments/" + school + "/" + courseId + "/" + taskId) :
                                client.get("assignments/" + school + "/" + courseId + "/" + taskId + "/" + _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail))];
                    case 1:
                        res = _e.sent();
                        if (!(res.status !== 200)) return [3 /*break*/, 3];
                        _b = kedbackend_client__WEBPACK_IMPORTED_MODULE_6__["HttpError"].bind;
                        _c = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_b.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_6__["HttpError"], _c.concat([_e.sent()])))();
                    case 3: return [4 /*yield*/, res.json()];
                    case 4:
                        assignments = _e.sent();
                        this.setState({
                            error: null,
                            loading: false,
                            assignments: assignments
                        });
                        if (!teacherAtSchool) return [3 /*break*/, 12];
                        refreshableAssigments = assignments.filter(function (a) {
                            return a.metadata && // Must have metadata.urkundExternalId Otherwise not possible to refresh
                                !a.metadata.urkundUploadError && ( // Not possible to refresh if upload has failed
                            !a.metadata.urkundLastPoll || // Never checked status yet
                                (['Accepted', 'Submitted'].indexOf(JSON.parse(a.metadata.urkundResponse)[0].Status.State) >= 0 &&
                                    parseInt(a.metadata.urkundLastPoll) < moment__WEBPACK_IMPORTED_MODULE_5___default()().add(-15, "seconds").toDate().getTime()));
                        }
                        // Checked status for a long time ago
                        );
                        _e.label = 5;
                    case 5:
                        _e.trys.push([5, 10, 11, 12]);
                        refreshableAssigments_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](refreshableAssigments), refreshableAssigments_1_1 = refreshableAssigments_1.next();
                        _e.label = 6;
                    case 6:
                        if (!!refreshableAssigments_1_1.done) return [3 /*break*/, 9];
                        a = refreshableAssigments_1_1.value;
                        return [4 /*yield*/, this.refreshAssignment(a)];
                    case 7:
                        _e.sent();
                        _e.label = 8;
                    case 8:
                        refreshableAssigments_1_1 = refreshableAssigments_1.next();
                        return [3 /*break*/, 6];
                    case 9: return [3 /*break*/, 12];
                    case 10:
                        e_2_1 = _e.sent();
                        e_2 = { error: e_2_1 };
                        return [3 /*break*/, 12];
                    case 11:
                        try {
                            if (refreshableAssigments_1_1 && !refreshableAssigments_1_1.done && (_d = refreshableAssigments_1.return)) _d.call(refreshableAssigments_1);
                        }
                        finally { if (e_2) throw e_2.error; }
                        return [7 /*endfinally*/];
                    case 12: return [3 /*break*/, 14];
                    case 13:
                        error_1 = _e.sent();
                        this.setState({
                            loading: false,
                            error: "Kunde inte ladda inl\u00E4mningsuppgifter",
                            assignments: []
                        });
                        console.error(error_1);
                        return [3 /*break*/, 14];
                    case 14: return [2 /*return*/];
                }
            });
        });
    };
    TaskAssignments.prototype.onDrag = function (ev) {
        ev.stopPropagation();
        ev.preventDefault();
        ev.dataTransfer.dropEffect = 'copy';
    };
    TaskAssignments.prototype.verifyAndUpload = function (file, driveFile) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var error_2;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 3, , 4]);
                        if (!file)
                            return [2 /*return*/];
                        if (this.state.assignments.some(function (a) {
                            return a.user === _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail &&
                                a.filename === file.name;
                        })) {
                            if (!confirm("Ers\u00E4tta befintlig fil (" + file.name + ")?")) {
                                return [2 /*return*/];
                            }
                        }
                        if (this.props.school.toLowerCase() !== _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.school.toLowerCase()) {
                            if (!confirm("Uppgiften tillh\u00F6r en annan skola (" + this.props.school + ").\n" +
                                "Vill du \u00E4nd\u00E5 l\u00E4mna in ditt arbete h\u00E4r?")) {
                                return [2 /*return*/];
                            }
                        }
                        this.setState({ uploadingFile: file });
                        return [4 /*yield*/, this.upload(file, driveFile)];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.load()];
                    case 2:
                        _a.sent();
                        this.setState({
                            uploadingFile: null
                        });
                        return [3 /*break*/, 4];
                    case 3:
                        error_2 = _a.sent();
                        this.setState({
                            error: "Kunde inte ladda upp filen. " + (error_2.message || error_2),
                            uploadingFile: null
                        });
                        console.error(error_2);
                        return [3 /*break*/, 4];
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    TaskAssignments.prototype.upload = function (file, driveFile) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var client, _a, courseId, taskId, school, sendToUrkund, mail, isUrkundExtension, lowerFilename, body, queryParams, res, _b, _c;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_d) {
                switch (_d.label) {
                    case 0:
                        client = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient.http;
                        _a = this.props, courseId = _a.courseId, taskId = _a.taskId, school = _a.school, sendToUrkund = _a.sendToUrkund;
                        mail = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail;
                        isUrkundExtension = URKUND_EXTENSIONS
                            .indexOf("." + file.name.split('.').reverse()[0].toLowerCase()) >= 0;
                        if (isUrkundExtension) {
                            if (file.size > MAX_URKUND_FILE_SIZE_MB * 1024 * 1024) {
                                throw new Error("Filer av denna typ f\u00E5r inte vara st\u00F6rre \u00E4n " + MAX_URKUND_FILE_SIZE_MB + " MB");
                            }
                        }
                        else {
                            if (file.size > MAX_NONURKUND_FILE_SIZE_MB * 1024 * 1024) {
                                throw new Error("Filen f\u00E5r inte vara st\u00F6rre \u00E4n " + MAX_NONURKUND_FILE_SIZE_MB + " MB");
                            }
                        }
                        lowerFilename = file.name.toLowerCase();
                        if (!ALLOWED_EXTENSIONS.some(function (ext) { return lowerFilename.endsWith(ext); })) {
                            throw new Error("Filens \u00E4ndelse m\u00E5ste vara " + ALLOWED_EXTENSIONS.join(' / '));
                        }
                        body = new FormData();
                        body.append('files', file);
                        queryParams = {
                            userDisplayName: _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.displayName,
                            verifyWithUrkund: sendToUrkund
                        };
                        if (driveFile) {
                            queryParams = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, queryParams, { driveFileId: driveFile.fileId, driveFileUrl: driveFile.url, driveFileIconUrl: driveFile.iconUrl });
                        }
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient.http.fetch("assignments/" + school + "/" + courseId + "/" + taskId + "/" + mail, 'put', {}, queryParams, {
                                body: body
                            })];
                    case 1:
                        res = _d.sent();
                        if (!(res.status !== 200)) return [3 /*break*/, 3];
                        _b = kedbackend_client__WEBPACK_IMPORTED_MODULE_6__["HttpError"].bind;
                        _c = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_b.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_6__["HttpError"], _c.concat([_d.sent()])))();
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    TaskAssignments.prototype.download = function (file) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, blob, err_2;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _c.trys.push([0, 5, , 6]);
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient.http.fetch(file.mediaLink, 'get', {})];
                    case 1:
                        res = _c.sent();
                        if (!(res.status >= 400)) return [3 /*break*/, 3];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_6__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 2: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_6__["HttpError"], _b.concat([_c.sent()])))();
                    case 3: return [4 /*yield*/, res.blob()];
                    case 4:
                        blob = _c.sent();
                        downloadjs__WEBPACK_IMPORTED_MODULE_8___default()(blob, file.filename, file.contentType);
                        return [3 /*break*/, 6];
                    case 5:
                        err_2 = _c.sent();
                        this.setState({ error: "Kunde inte ladda ned filen. " + (err_2.message || err_2) });
                        console.error(err_2);
                        return [3 /*break*/, 6];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    TaskAssignments.prototype.delete = function (url) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var res, _a, _b, err_3;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _c.trys.push([0, 6, , 7]);
                        return [4 /*yield*/, this.setStatePromised(function (_a) {
                                var assignments = _a.assignments;
                                return ({ assignments: assignments.map(function (a) { return a.mediaLink === url ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, a, { metadata: tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, a.metadata, { $meta: 'delete' }) }) : tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, a); }) });
                            })];
                    case 1:
                        _c.sent();
                        return [4 /*yield*/, _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient.http.fetch(url, 'delete', {})];
                    case 2:
                        res = _c.sent();
                        if (!(res.status >= 400)) return [3 /*break*/, 4];
                        _a = kedbackend_client__WEBPACK_IMPORTED_MODULE_6__["HttpError"].bind;
                        _b = [void 0, res.status];
                        return [4 /*yield*/, res.text()];
                    case 3: throw new (_a.apply(kedbackend_client__WEBPACK_IMPORTED_MODULE_6__["HttpError"], _b.concat([_c.sent()])))();
                    case 4: return [4 /*yield*/, this.load()];
                    case 5:
                        _c.sent();
                        return [3 /*break*/, 7];
                    case 6:
                        err_3 = _c.sent();
                        this.setState({ error: "Kunde inte ta bort filen. " + (err_3.message || err_3) });
                        console.error(err_3);
                        return [3 /*break*/, 7];
                    case 7: return [2 /*return*/];
                }
            });
        });
    };
    TaskAssignments.prototype.render = function () {
        var _this = this;
        var _a = this.props, courseId = _a.courseId, taskId = _a.taskId, school = _a.school;
        var _b = this.state, loading = _b.loading, assignments = _b.assignments, error = _b.error, uploadingFile = _b.uploadingFile;
        var teacherAtThisSchool = Object(_access_control__WEBPACK_IMPORTED_MODULE_7__["isTeacherAtSchool"])(_globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser, school);
        var files = tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](assignments);
        var showGooglePicker = _features__WEBPACK_IMPORTED_MODULE_13__["features"].picker;
        if (uploadingFile) {
            var virtualFile_1 = {
                school: school,
                courseId: courseId,
                taskId: taskId,
                filename: uploadingFile.name,
                size: uploadingFile.size,
                user: _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail,
                contentType: uploadingFile.type,
                uploadDate: Date.now(),
                mediaLink: "assignments/" + school + "/" + courseId + "/" + taskId + "/" + _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail + "/" + uploadingFile.name,
                metadata: {
                    $meta: 'add',
                    userDisplayName: _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.displayName
                }
            };
            files = files.filter(function (file) { return file.mediaLink !== virtualFile_1.mediaLink; });
            files = tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](files, [virtualFile_1]);
        }
        files = files.sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["compareProps"])([
            "metadata.userDisplayName",
            "filename",
            "uploadDate"
        ], ["sv", "en"], { sensitivity: 'base' }));
        var hasOwnDocs = files.some(function (file) { return file.user === _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail; });
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { onDragOver: function (ev) { return _this.onDrag(ev); }, onDrop: function (ev) {
                ev.stopPropagation();
                ev.preventDefault();
                _this.verifyAndUpload(ev.dataTransfer.files[0]);
            } },
            error ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { className: "error" }, error)) : undefined,
            loading ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__["Spinner"], null),
                " Laddar inl\u00E4mnade filer...") : files.length === 0 ?
                teacherAtThisSchool ?
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, "Ingen elev har l\u00E4mnat in n\u00E5got arbete \u00E4nnu.") :
                    undefined
                : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", { className: "task-assignments-table" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null,
                                teacherAtThisSchool ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Elev") : undefined,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Filnamn"),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Inl\u00E4mnat den"),
                                teacherAtThisSchool && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Rapport"),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null, "Niv\u00E5")),
                                hasOwnDocs && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", null))),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, files.map(function (file) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: file.mediaLink, style: file.metadata.$meta ? { opacity: 0.5 } : {} },
                            teacherAtThisSchool ?
                                //
                                // Teacher View
                                // 
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null,
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: "mailto:" + file.user }, file.metadata.userDisplayName || file.user)),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, file.metadata.driveFileId ?
                                        // The file can be edited on drive. Link to editing it.
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](DriveFileListing, { file: file }) :
                                        // The file cannot be edited on drive. Link to downloading it.
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: "#", onClick: function (ev) {
                                                ev.preventDefault();
                                                ev.stopPropagation();
                                                _this.download(file);
                                            } }, file.filename)),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "assignment-date-col" }, moment__WEBPACK_IMPORTED_MODULE_5___default()(file.uploadDate).format('YYYY-MM-DD HH:mm')),
                                    file.metadata.$meta === 'add' ?
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { colSpan: 2 },
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__["Spinner"], null),
                                            " Laddar upp...") :
                                        file.metadata.$meta === 'delete' ?
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { colSpan: 2 },
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__["Spinner"], null),
                                                " Tar bort...") :
                                            (function () {
                                                var metadata = file.metadata;
                                                var urkundResponses = metadata.urkundResponse && JSON.parse(metadata.urkundResponse);
                                                var urkundResponse = urkundResponses && urkundResponses[0];
                                                if (!urkundResponse && file.metadata.urkundUploadError) {
                                                    urkundResponse = {
                                                        Status: {
                                                            ErrorCode: -1,
                                                            Message: file.metadata.urkundUploadError,
                                                            State: 'Error'
                                                        },
                                                        ExternalId: file.metadata.urkundExternalId
                                                    };
                                                }
                                                if (file.isRefreshing)
                                                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { colSpan: 2 },
                                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__["Spinner"], null),
                                                        " Uppdaterar...");
                                                return urkundResponse ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "urkund-status-col" },
                                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: urkundResponse.Report && urkundResponse.Report.ReportUrl, onClick: function (ev) {
                                                                if (['Accepted', 'Submitted'].indexOf(urkundResponse.Status.State) === -1)
                                                                    return; // Follow HREF instead.
                                                                ev.preventDefault();
                                                                ev.stopPropagation();
                                                                _this.refreshAssignment(file);
                                                            }, target: "_blank", title: Object(_urkund_utils__WEBPACK_IMPORTED_MODULE_9__["getUrkundHoverText"])(urkundResponse) },
                                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: Object(_urkund_utils__WEBPACK_IMPORTED_MODULE_9__["getUrkundStatusClass"])(urkundResponse) }))),
                                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "urkund-status-col" },
                                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: Object(_urkund_utils__WEBPACK_IMPORTED_MODULE_9__["getUrkundSignificanceClass"])(urkundResponse) }, urkundResponse.Report && typeof urkundResponse.Report.Significance === 'number' ?
                                                            urkundResponse.Report.Significance.toFixed() + "%" : ' '))) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { colSpan: 2 });
                                            })()) :
                                //
                                // STUDENT VIEW
                                //
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, file.metadata.driveFileId ?
                                        // The file can be edited on drive. Link to editing it.
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](DriveFileListing, { file: file }) :
                                        // The file cannot be edited on drive. Link to downloading it.
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: "#", onClick: function (ev) {
                                                ev.preventDefault();
                                                ev.stopPropagation();
                                                _this.download(file);
                                            } }, file.filename)),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { className: "assignment-date-col" }, file.metadata.$meta === 'add' ?
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__["Spinner"], null),
                                            " Laddar upp...") :
                                        file.metadata.$meta === 'delete' ?
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_4__["Spinner"], null),
                                                " Tar bort...") :
                                            moment__WEBPACK_IMPORTED_MODULE_5___default()(file.uploadDate).format('YYYY-MM-DD HH:mm'))),
                            hasOwnDocs && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", null, !file.metadata.$meta && file.user === _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail &&
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: "#", onClick: function (ev) {
                                        ev.stopPropagation();
                                        ev.preventDefault();
                                        if (confirm("Radera inl\u00E4mnad fil " + file.filename + "?"))
                                            _this.delete(file.mediaLink);
                                    } },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-trash" })))); })))),
            Object(_course_builder_ks_logic_is_employee__WEBPACK_IMPORTED_MODULE_10__["isEmployee"])() ? undefined : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "drop-zone task-assignment-drop-zone" },
                    "Droppa ditt f\u00E4rdiga arbete h\u00E4r.",
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null),
                    "Det g\u00E5r ocks\u00E5 bra att anv\u00E4nda bl\u00E4ddra-knappen nedan."),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "file", onChange: function (ev) { return _this.verifyAndUpload(ev.target.files[0]); } }),
                showGooglePicker && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_apis_buttons__WEBPACK_IMPORTED_MODULE_12__["DriveButton"], { label: "H\u00E4mta fr\u00E5n Google Drive", action: function () {
                        var picker = new _apis_google_picker__WEBPACK_IMPORTED_MODULE_11__["GooglePicker"]({ upload: true });
                        var drive = new _apis_google_drive__WEBPACK_IMPORTED_MODULE_14__["GoogleDrive"]();
                        picker.show().then(function (files) {
                            var pickedFile = files[0];
                            if (!pickedFile)
                                return;
                            drive.downloadFile({
                                file: pickedFile,
                                limitSize: MAX_NONURKUND_FILE_SIZE_MB
                            }).then(function (file) { return _this.verifyAndUpload(file, pickedFile); });
                        });
                    } }))));
    };
    return TaskAssignments;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

function DriveFileListing(_a) {
    var file = _a.file;
    var _b = file.metadata, driveFileIconUrl = _b.driveFileIconUrl, driveFileUrl = _b.driveFileUrl;
    var filename = file.filename.substr(0, file.filename.lastIndexOf('.'));
    return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal spaced" },
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("img", { className: "file-icon", src: driveFileIconUrl })),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { target: "_blank", href: driveFileUrl }, filename)))));
}


/***/ }),

/***/ "./src/components/course-viewer/course-page/urkund-utils.ts":
/*!******************************************************************!*\
  !*** ./src/components/course-viewer/course-page/urkund-utils.ts ***!
  \******************************************************************/
/*! exports provided: getUrkundStatusClass, getUrkundHoverText, getUrkundSignificanceClass */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUrkundStatusClass", function() { return getUrkundStatusClass; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUrkundHoverText", function() { return getUrkundHoverText; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUrkundSignificanceClass", function() { return getUrkundSignificanceClass; });
function getUrkundStatusClass(res) {
    if (!res || !res.Status) {
        return null;
    }
    else
        switch (res.Status.State) {
            case 'Error':
                return "urkund-status urkund-status-error";
            case 'Submitted':
                return "urkund-status urkund-status-submitted";
            case 'Accepted':
                return "urkund-status urkund-status-accepted";
            case 'Analyzed':
                return "urkund-status urkund-status-analyzed";
        }
}
function getUrkundHoverText(res) {
    if (!res || !res.Status)
        return null;
    switch (res.Status.State) {
        case 'Error':
            return res.ExternalId ?
                "Kunde inte tas emot av urkund. Felkod: " + res.Status.ErrorCode + "\n" +
                    ("External ID: " + res.ExternalId + "\nFelmeddelande: " + res.Status.Message)
                :
                    res.Status.Message;
        case 'Submitted':
            return "Filen \u00E4r uppladdad till Urkund. Klicka f\u00F6r att uppdatera status.";
        case 'Accepted':
            return "Filen analyseras fortfarande av Urkund. Klicka f\u00F6r att uppdatera status.";
        case 'Analyzed':
            return "Rapport skapad. Klicka f\u00F6r att \u00F6ppna rapporten i nytt f\u00F6nster";
    }
}
function getUrkundSignificanceClass(res) {
    if (!res || !res.Status)
        return '';
    switch (res.Status.State) {
        case 'Error': return 'urkund-significance-error';
        case 'Submitted': return 'urkund-significance-submitted';
        case 'Accepted': return 'urkund-significance-accepted';
    }
    var report = res.Report;
    if (!report) {
        return "";
    }
    if (report.Significance < 1)
        //return `${cdn}/images/urkund/0.gif`;
        return "urkund-significance urkund-significance-0";
    if (report.Significance < 10)
        //return `${cdn}/images/urkund/1.gif`;
        return "urkund-significance urkund-significance-1";
    if (report.Significance < 25)
        return "urkund-significance urkund-significance-2";
    //return `${cdn}/images/urkund/2.gif`;
    if (report.Significance < 40)
        return "urkund-significance urkund-significance-3";
    //return `${cdn}/images/urkund/3.gif`;
    if (report.Significance < 55)
        return "urkund-significance urkund-significance-4";
    //return `${cdn}/images/urkund/4.gif`;
    if (report.Significance < 70)
        return "urkund-significance urkund-significance-5";
    //return `${cdn}/images/urkund/5.gif`;
    if (report.Significance < 85)
        return "urkund-significance urkund-significance-6";
    //return `${cdn}/images/urkund/6.gif`;
    if (report.Significance < 99.9)
        return "urkund-significance urkund-significance-7";
    //return `${cdn}/images/urkund/7.gif`;
    if (report.Significance >= 99.9)
        return "urkund-significance urkund-significance-8";
    //return `${cdn}/images/urkund/8.gif`;
    return "";
}


/***/ }),

/***/ "./src/components/course-viewer/subcomponents/abilities-box.tsx":
/*!**********************************************************************!*\
  !*** ./src/components/course-viewer/subcomponents/abilities-box.tsx ***!
  \**********************************************************************/
/*! exports provided: AbilitiesBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AbilitiesBox", function() { return AbilitiesBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var AbilitiesBox = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AbilitiesBox, _super);
    function AbilitiesBox(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            headerOpen: props.headerOpen || false
        };
        return _this;
    }
    AbilitiesBox.prototype.render = function () {
        var _this = this;
        var _a = this.props, title = _a.title, subTitle = _a.subTitle, abilities = _a.abilities, className = _a.className;
        var headerOpen = this.state.headerOpen;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: (className || '') + " openClose" + (headerOpen ? " open" : "") },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openHeader", onClick: function () { return _this.setState({ headerOpen: !_this.state.headerOpen }); } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, title)),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openContent" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "abilityList" },
                    subTitle && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "contentHeader" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, subTitle)),
                    abilities.map(function (a) {
                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: a.id, className: "contentPart" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "contentText" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { dangerouslySetInnerHTML: { __html: a.name } })));
                    }))));
    };
    return AbilitiesBox;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-viewer/subcomponents/central-content-box.tsx":
/*!****************************************************************************!*\
  !*** ./src/components/course-viewer/subcomponents/central-content-box.tsx ***!
  \****************************************************************************/
/*! exports provided: CentralContentBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CentralContentBox", function() { return CentralContentBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var CentralContentBox = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](CentralContentBox, _super);
    function CentralContentBox(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            headerOpen: props.headerOpen || false
        };
        return _this;
    }
    CentralContentBox.prototype.render = function () {
        var _this = this;
        var _a = this.props, title = _a.title, subTitle = _a.subTitle, centralContent = _a.centralContent, className = _a.className;
        var headerOpen = this.state.headerOpen;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: (className || '') + " openClose" + (headerOpen ? " open" : "") },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openHeader", onClick: function () { return _this.setState({ headerOpen: !_this.state.headerOpen }); } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, title)),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openContent" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "abilityList" },
                    subTitle && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "contentHeader" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, subTitle)),
                    centralContent.map(function (cc) {
                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: cc.id, className: "contentPart" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "contentText" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { dangerouslySetInnerHTML: { __html: cc.name } })));
                    }))));
    };
    return CentralContentBox;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/course-viewer/subcomponents/confirmation.tsx":
/*!*********************************************************************!*\
  !*** ./src/components/course-viewer/subcomponents/confirmation.tsx ***!
  \*********************************************************************/
/*! exports provided: Confirmation */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Confirmation", function() { return Confirmation; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

function Confirmation(props) {
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "confirmation-box " + props.className + (props.visible ? " visible" : "") },
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("p", null, props.text),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("button", { onClick: function () { return props.onConfirm(); } }, "OK"),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("button", { onClick: function () { return props.onCancel(); } }, "Avbryt"));
}


/***/ }),

/***/ "./src/components/course-viewer/subcomponents/knowledge-requirements-table.tsx":
/*!*************************************************************************************!*\
  !*** ./src/components/course-viewer/subcomponents/knowledge-requirements-table.tsx ***!
  \*************************************************************************************/
/*! exports provided: KnowledgeRequirementsBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KnowledgeRequirementsBox", function() { return KnowledgeRequirementsBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");




var KnowledgeRequirementsBox = function (props) {
    var title = props.title, className = props.className, headerOpen = props.headerOpen, idsToSubjectMap = props.idsToSubjectMap, requirements = props.requirements;
    if (!idsToSubjectMap) {
        // Normal case
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, title), className: className, headerOpen: headerOpen },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](KnowledgeRequirementsTable, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, props)))));
    }
    // Special case: Requirements that spans multiple subjects:
    var requirementsPerSubjectLookup = idsToSubjectMap ?
        Object(_utils_utils__WEBPACK_IMPORTED_MODULE_3__["arrayToLookup"])(requirements, function (r) { return idsToSubjectMap[r.id] || ""; }) : { "": requirements };
    var reqsPerSubject = Object.keys(requirementsPerSubjectLookup)
        .map(function (subject) { return ({ subject: subject, requirements: requirementsPerSubjectLookup[subject] }); });
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, title), className: className, headerOpen: headerOpen }, reqsPerSubject.map(function (_a) {
        var subject = _a.subject, requirements = _a.requirements;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](KnowledgeRequirementsTable, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, props, { key: subject, heading: subject, requirements: requirements })));
    }));
};
var KnowledgeRequirementsTable = function (_a) {
    var requirements = _a.requirements, includedIds = _a.includedIds, explainedRequirements = _a.explainedRequirements, partialRequirments = _a.partialRequirments, heading = _a.heading;
    var columns = ["E", "C", "A"];
    var rows = [];
    var reqs = requirements.slice();
    var row = null;
    while (true) {
        row = columns.map(function (grade) {
            var pNext = reqs.findIndex(function (r) { return r.gradeStep.toUpperCase() === grade; });
            if (pNext < 0)
                return null;
            var rv = reqs[pNext];
            reqs.splice(pNext, 1);
            return includedIds ?
                (includedIds[rv.id] ? rv : undefined) :
                rv;
        });
        if (row.every(function (r) { return r === null; }))
            break;
        if (!row.every(function (r) { return !r; })) {
            rows.push(row);
        }
    }
    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
        heading && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null, heading),
        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("table", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("thead", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null, columns.map(function (c) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("th", { key: c }, c); }))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tbody", null, rows.map(function (row, i) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], { key: i },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", { key: i }, row.map(function (column, j) {
                    var columnPartialReq = column && partialRequirments && partialRequirments[column.id];
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: j, dangerouslySetInnerHTML: { __html: columnPartialReq ? columnPartialReq.join(".") : column ? column.name : "" } });
                }
                // <td key={j}>
                // {partialRequirments.map((pr, k) => pr[column.id] ?
                //   <span key={k} dangerouslySetInnerHTML={{}}/>
                // )}
                // </td>
                )),
                explainedRequirements && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("tr", null, row.map(function (column, j) {
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("td", { key: j, className: "explained-requirement" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, (column && explainedRequirements[column.id]) || ""));
                }))); }))));
};


/***/ }),

/***/ "./src/components/course-viewer/subcomponents/task-list.tsx":
/*!******************************************************************!*\
  !*** ./src/components/course-viewer/subcomponents/task-list.tsx ***!
  \******************************************************************/
/*! exports provided: TaskList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskList", function() { return TaskList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../repos/user-tasks-repo */ "./src/repos/user-tasks-repo.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var _confirmation__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./confirmation */ "./src/components/course-viewer/subcomponents/confirmation.tsx");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");









var TaskList = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TaskList, _super);
    function TaskList(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            userTasks: [],
            weekDate: Date.now(),
            confirmations: []
        };
        _this.onChange = _this.onChange.bind(_this);
        return _this;
    }
    TaskList.prototype.onChange = function (userTasks, persisted) {
        if (persisted.weekDate !== this.state.weekDate) {
            this.setState({
                confirmations: []
            });
        }
        this.setState({
            userTasks: userTasks,
            weekDate: persisted.weekDate
        });
    };
    TaskList.prototype.componentDidMount = function () {
        _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].subscribe(this.onChange);
    };
    TaskList.prototype.componentWillUnmount = function () {
        _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].unsubscribe(this.onChange);
    };
    TaskList.prototype.toggleTask = function (learningTask) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var userTasks, weekDate, latestTimeStamp, userTask;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        userTasks = this.state.userTasks.filter(function (ut) {
                            return learningTask.task ?
                                ut.task && ut.task.some(function (t) { return t.id === learningTask.id; }) :
                                ut.siteVisionPageId === learningTask.id;
                        });
                        weekDate = this.state.weekDate;
                        if (!(userTasks.length === 0)) return [3 /*break*/, 2];
                        latestTimeStamp = Math.max.apply(Math.max, [weekDate].concat(this.state.userTasks.map(function (t) { return t.dateTime; })));
                        userTask = {
                            id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["createUUID"])(),
                            courseName: learningTask.courseName,
                            dateTime: latestTimeStamp + 2000,
                            learningGoal: learningTask.learningGoal,
                            name: learningTask.name,
                            url: learningTask.url,
                            acl: [
                                // Default ACL: Let user self have full control over this item:
                                new kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["DocumentAccess"]("email", _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.mail, "S"),
                                // Additional ACL: Let employees on same school have read access to it.
                                // This currently only applies to tasks that refer to course tasks (not custom tasks!)
                                new kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["DocumentAccess"]("schoolRole", _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser.school + "/EMPLOYEE", "R")
                            ].map(function (ac) { return ac.toString(); })
                        };
                        if (learningTask.task && learningTask.task.deadline) {
                            userTask.deadline = learningTask.task.deadline;
                        }
                        if (learningTask.task) {
                            userTask.task = [learningTask.task];
                            if (learningTask.course) {
                                userTask.course = [learningTask.course];
                            }
                            else if (learningTask.courseInfo) {
                                userTask.courseInfo = learningTask.courseInfo;
                            }
                        }
                        else {
                            userTask.siteVisionPageId = learningTask.id;
                        }
                        if (learningTask.step) {
                            userTask.step = learningTask.step;
                        }
                        return [4 /*yield*/, Promise.all([
                                _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].setWeekPlannerBoxOpen(learningTask.courseName, true),
                                _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].insert([userTask])
                            ])];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 4];
                    case 2: 
                    // Already present in weekplanner. It's time to delete those that matched us.
                    return [4 /*yield*/, _repos_user_tasks_repo__WEBPACK_IMPORTED_MODULE_5__["userTasksRepo"].delete(userTasks.map(function (t) { return t.id; }))];
                    case 3:
                        // Already present in weekplanner. It's time to delete those that matched us.
                        _a.sent();
                        _a.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    TaskList.prototype.render = function () {
        var _this = this;
        var intl = this.context.intl;
        var learningTasks = this.props.learningTasks;
        var userTasks = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_6__["arrayToMap"])(this.state.userTasks, function (ut) { return ut.task && ut.task.length > 0 ?
            ut.task.map(function (t) { return t.id; })[0] : // course-builder tasks looked up by id
            ut.siteVisionPageId ? ut.siteVisionPageId : // non-course-builder tasks
                ut.url; });
        var confirmations = this.state.confirmations;
        var weekPlannerWeek = moment__WEBPACK_IMPORTED_MODULE_3___default()(this.state.weekDate).week();
        var currentWeek = moment__WEBPACK_IMPORTED_MODULE_3___default()().week();
        var forWeekString = weekPlannerWeek === currentWeek ? "" :
            weekPlannerWeek === currentWeek + 1 ? intl.formatMessage({ id: "taskList.nextWeekTask", defaultMessage: "för nästa vecka (v{week})" }, { week: weekPlannerWeek }) :
                weekPlannerWeek === currentWeek - 1 ? intl.formatMessage({ id: "taskList.lastWeekTask", defaultMessage: "för förra veckan (v{week})" }, { week: weekPlannerWeek }) :
                    intl.formatMessage({ id: "taskList.currentWeekTask", defaultMessage: "för vecka {week}" }, { week: weekPlannerWeek });
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "taskContainer" }, learningTasks.map(function (learningTask, idx) {
            var taskLookupId = learningTask.id;
            var userTask = userTasks[taskLookupId] || { $meta: 'deleted' }; // No exist = $meta: 'deleted'
            var isWorking = userTask.$meta === 'adding' || userTask.$meta === 'deleting';
            var selected = userTask.$meta !== 'deleted' && userTask.$meta !== 'deleting';
            var describedAction = selected ?
                intl.formatMessage({ id: "taskList.removeTaskFromWeeklyPlanning", defaultMessage: "Ta bort uppgiften från egen veckoplanering {week}" }, { week: forWeekString }) :
                intl.formatMessage({ id: "taskList.addTaskToWeeklyPlanning", defaultMessage: "Lägg till uppgiften i egen veckoplanering {week}" }, { week: forWeekString });
            var confirmationVisible = confirmations.some(function (tid) { return taskLookupId === tid; });
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: learningTask.id },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: taskLookupId, className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "selectedBox" + (selected ? ' selected' : ''), style: isWorking ? { opacity: 0.5 } : {}, onClick: function () { return !isWorking && weekPlannerWeek === currentWeek ?
                                _this.toggleTask(learningTask) :
                                confirmationVisible ?
                                    _this.setState({ confirmations: confirmations.filter(function (tid) { return tid !== taskLookupId; }) }) :
                                    _this.setState({ confirmations: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](confirmations).concat(taskLookupId) }); }, title: describedAction })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: learningTask.url }, learningTask.name))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_confirmation__WEBPACK_IMPORTED_MODULE_7__["Confirmation"], { visible: confirmationVisible, text: describedAction, onConfirm: function () {
                        _this.toggleTask(learningTask);
                        _this.setState({ confirmations: confirmations.filter(function (tid) { return tid !== taskLookupId; }) });
                    }, onCancel: function () {
                        _this.setState({ confirmations: confirmations.filter(function (tid) { return tid !== taskLookupId; }) });
                    } }));
        }));
    };
    TaskList.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_8__["LanguageContext"];
    return TaskList;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/LanguageContext.tsx":
/*!***************************************************************!*\
  !*** ./src/components/utility-components/LanguageContext.tsx ***!
  \***************************************************************/
/*! exports provided: LanguageContext */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LanguageContext", function() { return LanguageContext; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var LanguageContext = react__WEBPACK_IMPORTED_MODULE_0__["createContext"]({ intl: null });


/***/ }),

/***/ "./src/components/utility-components/SetupLanguageIntl.tsx":
/*!*****************************************************************!*\
  !*** ./src/components/utility-components/SetupLanguageIntl.tsx ***!
  \*****************************************************************/
/*! exports provided: setupIntl */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setupIntl", function() { return setupIntl; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var react_intl_locale_data_en__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-intl/locale-data/en */ "./node_modules/react-intl/locale-data/en.js");
/* harmony import */ var react_intl_locale_data_en__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_intl_locale_data_en__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var react_intl_locale_data_sv__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-intl/locale-data/sv */ "./node_modules/react-intl/locale-data/sv.js");
/* harmony import */ var react_intl_locale_data_sv__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_intl_locale_data_sv__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _translations_sv_json__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../translations/sv.json */ "./src/translations/sv.json");
var _translations_sv_json__WEBPACK_IMPORTED_MODULE_4___namespace = /*#__PURE__*/__webpack_require__.t(/*! ../../translations/sv.json */ "./src/translations/sv.json", 1);
/* harmony import */ var _translations_en_json__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../translations/en.json */ "./src/translations/en.json");
var _translations_en_json__WEBPACK_IMPORTED_MODULE_5___namespace = /*#__PURE__*/__webpack_require__.t(/*! ../../translations/en.json */ "./src/translations/en.json", 1);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_8__);









var setupIntl = function (Component) {
    return /** @class */ (function (_super) {
        tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](_SetupLanguageIntl, _super);
        function _SetupLanguageIntl(props) {
            var _this = _super.call(this, props) || this;
            Object(react_intl__WEBPACK_IMPORTED_MODULE_1__["addLocaleData"])(tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](react_intl_locale_data_en__WEBPACK_IMPORTED_MODULE_2___default.a, react_intl_locale_data_sv__WEBPACK_IMPORTED_MODULE_3___default.a));
            _this.messages = {
                'sv': _translations_sv_json__WEBPACK_IMPORTED_MODULE_4__,
                'en': _translations_en_json__WEBPACK_IMPORTED_MODULE_5__
            };
            moment__WEBPACK_IMPORTED_MODULE_8___default()().locale(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_7__["default"].KED_LOCALE);
            return _this;
        }
        _SetupLanguageIntl.prototype.render = function () {
            return react__WEBPACK_IMPORTED_MODULE_6__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_1__["IntlProvider"], { locale: _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_7__["default"].KED_LOCALE, messages: this.messages[_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_7__["default"].KED_LOCALE] },
                react__WEBPACK_IMPORTED_MODULE_6__["createElement"](Component, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.props)));
        };
        return _SetupLanguageIntl;
    }(react__WEBPACK_IMPORTED_MODULE_6__["Component"]));
};


/***/ }),

/***/ "./src/components/utility-components/align-horizontal.tsx":
/*!****************************************************************!*\
  !*** ./src/components/utility-components/align-horizontal.tsx ***!
  \****************************************************************/
/*! exports provided: AlignHorizontal */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AlignHorizontal", function() { return AlignHorizontal; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var AlignHorizontal = function (_a) {
    var className = _a.className, classNames = _a.classNames, children = _a.children;
    return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"]((classNames || []), (className ? [className] : []), ["align-horizontal"]).join(' ') }, children));
};


/***/ }),

/***/ "./src/components/utility-components/checklist.tsx":
/*!*********************************************************!*\
  !*** ./src/components/utility-components/checklist.tsx ***!
  \*********************************************************/
/*! exports provided: Checklist */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Checklist", function() { return Checklist; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var Checklist = function (_a) {
    var available = _a.available, selected = _a.selected, onChange = _a.onChange;
    return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "taskContainer" }, available.map(function (_a) {
        var key = _a.key, name = _a.name;
        var checked = selected.includes(key);
        return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { key: key, className: "align-horizontal" },
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "horizontalItem top", onClick: function () {
                    return onChange(checked ?
                        selected.filter(function (k) { return k != key; }) :
                        selected.concat(key), key, checked);
                } },
                react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "checkBox" + (checked ? " checked" : "") })),
            react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div", { className: "horizontalItem top" }, name));
    }));
};


/***/ }),

/***/ "./src/components/utility-components/dialogs.tsx":
/*!*******************************************************!*\
  !*** ./src/components/utility-components/dialogs.tsx ***!
  \*******************************************************/
/*! exports provided: Dialogs */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Dialogs", function() { return Dialogs; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _course_builder_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../course-builder/sub-components/remove-item */ "./src/components/course-builder/sub-components/remove-item.tsx");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-dom */ "react-dom");
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jquery */ "jquery");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_4__);





var Dialogs = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Dialogs, _super);
    function Dialogs(props) {
        return _super.call(this, props) || this;
    }
    Dialogs.prototype.componentDidUpdate = function (prevProps) {
        if (this.lastDiv !== null && prevProps.dialogs.length > this.props.dialogs.length) {
            // A dialog was closed. Now focus the last dialog:
            jquery__WEBPACK_IMPORTED_MODULE_4___default()(Object(react_dom__WEBPACK_IMPORTED_MODULE_3__["findDOMNode"])(this.lastDiv)).find(':input').first().focus();
        }
    };
    Dialogs.prototype.render = function () {
        var _this = this;
        this.lastDiv = null;
        var _a = this.props, dialogs = _a.dialogs, popDialog = _a.popDialog;
        jquery__WEBPACK_IMPORTED_MODULE_4___default()('body').attr('aria-disabled', dialogs.length > 0);
        jquery__WEBPACK_IMPORTED_MODULE_4___default()('body').css('overflow', dialogs.length > 0 ? 'hidden' : 'auto');
        return dialogs.length > 0 && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, dialogs.map(function (dialog, idx) {
            var div;
            function onKeyPress(ev) {
                if (ev.which === 13 && (!ev.target || ev.target.tagName !== 'TEXTAREA')) {
                    jquery__WEBPACK_IMPORTED_MODULE_4___default()(Object(react_dom__WEBPACK_IMPORTED_MODULE_3__["findDOMNode"])(div)).find('.btn-default').click();
                }
                ev.stopPropagation();
            }
            function onKeyDown(ev) {
                if (ev.which === 27) { // Escape
                    popDialog();
                    ev.stopPropagation();
                    return;
                }
                if (ev.which === 83 && (ev.ctrlKey || ev.metaKey)) { // CTRL-S
                    var domNode = Object(react_dom__WEBPACK_IMPORTED_MODULE_3__["findDOMNode"])(div);
                    ev.preventDefault();
                    var defaultButton = jquery__WEBPACK_IMPORTED_MODULE_4___default()(domNode).find('.btn-default');
                    defaultButton.click();
                    ev.stopPropagation();
                }
            }
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: idx },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "darken" }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "modal-page-wrap" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "modal-page", ref: function (elem) {
                            div = elem;
                            if (idx === dialogs.length - 1)
                                _this.lastDiv = elem;
                        }, tabIndex: 0, "aria-disabled": idx < dialogs.length - 1, onKeyPress: onKeyPress, onKeyDown: onKeyDown },
                        dialog,
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_2__["RemoveItem"], { onClick: popDialog }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "stopFloats" }))));
        }));
    };
    return Dialogs;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/form-field-text-input.tsx":
/*!*********************************************************************!*\
  !*** ./src/components/utility-components/form-field-text-input.tsx ***!
  \*********************************************************************/
/*! exports provided: TextInput */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextInput", function() { return TextInput; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _form_field__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./form-field */ "./src/components/utility-components/form-field.tsx");



var TextInput = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TextInput, _super);
    function TextInput(props) {
        return _super.call(this, props) || this;
    }
    TextInput.prototype.render = function () {
        var _this = this;
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_form_field__WEBPACK_IMPORTED_MODULE_2__["FormField"], { label: this.props.label },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", autoFocus: this.props.autoFocus, id: this.props.id, size: 35, value: this.props.value, onChange: function (ev) { return _this.props.onChange(ev.target.value); }, placeholder: this.props.placeholder }))));
    };
    return TextInput;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/form-field-textarea.tsx":
/*!*******************************************************************!*\
  !*** ./src/components/utility-components/form-field-textarea.tsx ***!
  \*******************************************************************/
/*! exports provided: TextAreaFormField */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextAreaFormField", function() { return TextAreaFormField; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _form_field__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./form-field */ "./src/components/utility-components/form-field.tsx");



var TextAreaFormField = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](TextAreaFormField, _super);
    function TextAreaFormField(props) {
        return _super.call(this, props) || this;
    }
    TextAreaFormField.prototype.render = function () {
        var _this = this;
        return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_form_field__WEBPACK_IMPORTED_MODULE_2__["FormField"], { label: this.props.label, id: this.props.id },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { autoFocus: this.props.autoFocus, id: this.props.id, cols: 35, rows: this.props.rows || 5, value: this.props.value, onChange: function (ev) { return _this.props.onChange(ev.target.value); }, placeholder: this.props.placeholder })),
                !!this.props.children && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem" }, this.props.children))));
    };
    return TextAreaFormField;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/form-field.tsx":
/*!**********************************************************!*\
  !*** ./src/components/utility-components/form-field.tsx ***!
  \**********************************************************/
/*! exports provided: FormField */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FormField", function() { return FormField; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


function findId(node) {
    var recucheck = new Set();
    return (function findId(node) {
        if (typeof node === 'string')
            return null;
        if (recucheck.has(node)) {
            return;
        }
        recucheck.add(node);
        if (node.props) {
            if (node.props.id)
                return node.props.id;
            if (node.props.children) {
                return findId(node.props.children);
            }
            return;
        }
        if (node.length) {
            for (var i = 0; i < node.length; ++i) {
                var child = node[i];
                if (child) {
                    var childId = findId(child);
                    if (childId)
                        return childId;
                    //console.log(child);
                }
            }
        }
    })(node);
}
var FormField = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](FormField, _super);
    function FormField(props) {
        return _super.call(this, props) || this;
    }
    FormField.prototype.render = function () {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("label", { className: "kclabel", htmlFor: this.props.id || findId(this.props.children) }, this.props.label),
            this.props.children);
    };
    return FormField;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/horizontal-item.tsx":
/*!***************************************************************!*\
  !*** ./src/components/utility-components/horizontal-item.tsx ***!
  \***************************************************************/
/*! exports provided: HorizontalItem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HorizontalItem", function() { return HorizontalItem; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


var HorizontalItem = function (_a) {
    var className = _a.className, classNames = _a.classNames, children = _a.children;
    return (react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"]((classNames || []), (className ? [className] : []), ["horizontalItem"]).join(' ') }, children));
};


/***/ }),

/***/ "./src/components/utility-components/lazy-content.tsx":
/*!************************************************************!*\
  !*** ./src/components/utility-components/lazy-content.tsx ***!
  \************************************************************/
/*! exports provided: LazyContent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LazyContent", function() { return LazyContent; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _live_query_view__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./live-query-view */ "./src/components/utility-components/live-query-view.tsx");


function LazyContent(_a) {
    var children = _a.children, spinner = _a.spinner, onError = _a.onError, noError = _a.noError;
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"](_live_query_view__WEBPACK_IMPORTED_MODULE_1__["LiveQueryView"], { props: children, spinner: spinner, noError: noError, onError: onError, fn: function (observable) { return observable; } });
}


/***/ }),

/***/ "./src/components/utility-components/live-query-view.tsx":
/*!***************************************************************!*\
  !*** ./src/components/utility-components/live-query-view.tsx ***!
  \***************************************************************/
/*! exports provided: liveQueryView, LiveQueryView */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "liveQueryView", function() { return liveQueryView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LiveQueryView", function() { return LiveQueryView; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");



function liveQueryView(fn, options) {
    return function (props) {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](LiveQueryView, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({ props: props, fn: fn }, options));
    };
}
var LiveQueryView = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](LiveQueryView, _super);
    function LiveQueryView(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            result: null,
            isLoading: true
        };
        return _this;
    }
    LiveQueryView.prototype.componentDidMount = function () {
        this.subscribe();
    };
    LiveQueryView.prototype.componentWillUnmount = function () {
        this.unsubscribe();
    };
    LiveQueryView.prototype.shouldComponentUpdate = function (nextProps, nextState) {
        return (this.state.error !== nextState.error ||
            this.state.isLoading !== nextState.isLoading ||
            this.state.result !== nextState.result ||
            !Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["shallowEquals"])(nextProps.props, this.props.props));
    };
    LiveQueryView.prototype.componentDidUpdate = function (prevProps) {
        if (!Object(_utils_utils__WEBPACK_IMPORTED_MODULE_2__["shallowEquals"])(prevProps.props, this.props.props)) {
            this.unsubscribe();
            this.subscribe();
        }
    };
    LiveQueryView.prototype.subscribe = function () {
        var _this = this;
        this.setState({ isLoading: true });
        this.subscription = this.props.fn(this.props.props).subscribe(function (result, error) { return _this.setState({
            result: result,
            error: error,
            isLoading: false
        }); });
    };
    LiveQueryView.prototype.unsubscribe = function () {
        if (this.subscription) {
            this.subscription.unsubscribe();
            this.subscription = null;
        }
    };
    LiveQueryView.prototype.render = function () {
        var _a = this.state, result = _a.result, error = _a.error, isLoading = _a.isLoading;
        var _b = this.props, spinner = _b.spinner, onError = _b.onError, noError = _b.noError;
        //if (!isLoading && !result) debugger;
        return error ?
            noError ? "" : onError ? onError(error) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                "Error: ",
                error.message) :
            isLoading ?
                spinner ? spinner : "" :
                result === undefined ? "" : result;
    };
    return LiveQueryView;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/loading-indicator.tsx":
/*!*****************************************************************!*\
  !*** ./src/components/utility-components/loading-indicator.tsx ***!
  \*****************************************************************/
/*! exports provided: LoadingIndicator */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LoadingIndicator", function() { return LoadingIndicator; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _live_query_view__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./live-query-view */ "./src/components/utility-components/live-query-view.tsx");
/* harmony import */ var _course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../globals/KED.env */ "./src/globals/KED.env.ts");





var LoadingIndicator = Object(_live_query_view__WEBPACK_IMPORTED_MODULE_2__["liveQueryView"])(function () {
    return _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].kedBackendClient.http.status.combineLatest(_globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].edsClient.http.status)
        .map(function (_a) {
        var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a, 2), kedBackendStatus = _b[0], edsStatus = _b[1];
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "loading-indicator" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "indicator" }, kedBackendStatus.numOutstandingOperations > 0 || edsStatus.numOutstandingOperations > 0 ?
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_3__["Spinner"], null) : undefined));
    });
});


/***/ }),

/***/ "./src/components/utility-components/open-close-box.tsx":
/*!**************************************************************!*\
  !*** ./src/components/utility-components/open-close-box.tsx ***!
  \**************************************************************/
/*! exports provided: OpenCloseBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OpenCloseBox", function() { return OpenCloseBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _charts_goal_progress__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../charts/goal-progress */ "./src/components/charts/goal-progress.tsx");
/* REFACTOR: Move this component outside coursebuilder!
   This is a general-purpose component
*/



var OpenCloseBox = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](OpenCloseBox, _super);
    function OpenCloseBox(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            headerOpen: props.headerOpen || false
        };
        return _this;
    }
    OpenCloseBox.prototype.componentWillReceiveProps = function (nextProps) {
        if (nextProps.headerOpen !== this.props.headerOpen) {
            this.setState({ headerOpen: nextProps.headerOpen });
        }
    };
    OpenCloseBox.prototype.render = function () {
        var _this = this;
        var _a = this.props, title = _a.title, className = _a.className, children = _a.children, headerClassName = _a.headerClassName, contentClassName = _a.contentClassName, displayProgress = _a.displayProgress, progressData = _a.progressData, inactivated = _a.inactivated, inactivatedRender = _a.inactivatedRender;
        var headerOpen = this.state.headerOpen;
        if (inactivated)
            return inactivatedRender === 'titleAndChildren' ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, title),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, children)) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, children);
        //var currentProgressData = //progressData();
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: (className || '') + " openClose" + (headerOpen ? " open" : "") },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openHeader" + (headerClassName ? " " + headerClassName : ""), onClick: function () {
                    if (_this.props.onOpenClose)
                        _this.props.onOpenClose(!_this.state.headerOpen);
                    _this.setState({ headerOpen: !_this.state.headerOpen });
                } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openHeaderContainer" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null, title),
                    displayProgress && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_charts_goal_progress__WEBPACK_IMPORTED_MODULE_2__["GoalProgress"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, progressData)))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "openContent" + (contentClassName ? " " + contentClassName : "") }, children));
    };
    return OpenCloseBox;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/utility-components/sortable-task-list.tsx":
/*!******************************************************************!*\
  !*** ./src/components/utility-components/sortable-task-list.tsx ***!
  \******************************************************************/
/*! exports provided: taskHasMigratedTexts, SortableTaskList */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "taskHasMigratedTexts", function() { return taskHasMigratedTexts; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SortableTaskList", function() { return SortableTaskList; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);


function taskHasMigratedTexts(task) {
    return task.migratedTexts && Object.keys(task.migratedTexts).some(function (type) {
        return Object.keys(task.migratedTexts[type]).length > 0;
    });
}
function SortableTaskList(_a) {
    var taskMetas = _a.taskMetas, renderEditLink = _a.renderEditLink, renderLink = _a.renderLink, onSort = _a.onSort;
    var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](Object(react__WEBPACK_IMPORTED_MODULE_1__["useState"])({
        taskBeingDragged: null,
        taskBeingHovered: null,
        insertBefore: false,
        originClientY: -1
    }), 2), dragState = _b[0], setDragState = _b[1];
    var taskBeingDragged = dragState.taskBeingDragged, taskBeingHovered = dragState.taskBeingHovered, insertBefore = dragState.insertBefore, originClientY = dragState.originClientY;
    return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "taskContainer sortable", onDrop: function (ev) {
            if (taskBeingHovered && taskBeingDragged) {
                onSort(taskBeingDragged, taskBeingHovered, insertBefore ? 'before' : 'after');
            }
            setDragState(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState, { taskBeingHovered: null, taskBeingDragged: null }));
        } }, taskMetas.map(function (taskMeta) {
        var task = taskMeta.task, isTaskOwner = taskMeta.isTaskOwner;
        var hasMigratedTexts = taskHasMigratedTexts(task);
        var taskId = task.id;
        return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_1___default.a.Fragment, { key: taskId },
            insertBefore && taskBeingHovered === task ?
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "drop-target", onDragOver: function (ev) { return ev.preventDefault(); } }, "\u00A0") :
                null,
            react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: ["align-horizontal", "draggable", task === taskBeingDragged && "drag-source"].filter(function (x) { return x; }).join(' '), draggable: true, onDragStart: function (ev) {
                    ev.dataTransfer.effectAllowed = "move";
                    setDragState(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState, { originClientY: ev.clientY, taskBeingDragged: task }));
                }, onDragOver: function (ev) {
                    if (!taskBeingDragged)
                        return;
                    if (taskBeingDragged === task) {
                        setDragState(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState, { taskBeingHovered: null }));
                        return;
                    }
                    ev.preventDefault();
                    ev.dataTransfer.dropEffect = "move";
                    setDragState(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState, { taskBeingHovered: task, insertBefore: originClientY > ev.clientY }));
                }, onDragEnd: function (ev) {
                    setDragState(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, dragState, { taskBeingHovered: null, taskBeingDragged: null }));
                } },
                isTaskOwner && hasMigratedTexts && react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" },
                    react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { style: { position: 'relative', top: '0.2em', left: '-0.7em' } },
                        react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("i", { className: "fa fa-pagelines", style: { position: 'absolute', top: 0, left: 0, color: '#49c35a' } }))),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" }, renderEditLink(taskMeta)),
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "horizontalItem top" }, renderLink(taskMeta))),
            !insertBefore && taskBeingHovered === task ?
                react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", { className: "drop-target", onDragOver: function (ev) { return ev.preventDefault(); } }, "\u00A0") :
                null);
    }));
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/actions-sv.ts":
/*!*****************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/actions-sv.ts ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _exec__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./exec */ "./src/components/utility-components/wysiwyg/exec.ts");

/* harmony default export */ __webpack_exports__["default"] = ({
    bold: {
        icon: '<b>F</b>',
        title: 'Fetstil',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('bold'); }
    },
    italic: {
        icon: '<i>K</i>',
        title: 'Kursiv',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('italic'); }
    },
    underline: {
        icon: '<u>U</u>',
        title: 'Understruken',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('underline'); }
    },
    strikethrough: {
        icon: '<strike>S</strike>',
        title: 'Struken',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('strikeThrough'); }
    },
    heading1: {
        icon: '<b>H<sub>1</sub></b>',
        title: 'Rubrik 1',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H1>'); }
    },
    heading2: {
        icon: '<b>H<sub>2</sub></b>',
        title: 'Rubrik 2',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H2>'); }
    },
    heading3: {
        icon: '<b>H<sub>3</sub></b>',
        title: 'Rubrik 3',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H3>'); }
    },
    paragraph: {
        icon: '&#182;',
        title: 'Paragraf',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<P>'); }
    },
    quote: {
        icon: '&#8220; &#8221;',
        title: 'Citat',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<BLOCKQUOTE>'); }
    },
    olist: {
        icon: '<i class="fa fa-list-ol" aria-hidden="true"></i>',
        title: 'Ordnad lista',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertOrderedList'); }
    },
    ulist: {
        icon: '<i class="fa fa-list" aria-hidden="true"></i>',
        title: 'Punktlista',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertUnorderedList'); }
    },
    outdent: {
        icon: '<i class="fa fa-outdent" aria-hidden="true"></i>',
        title: 'Minska indrag',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])("outdent"); }
    },
    indent: {
        icon: '<i class="fa fa-indent" aria-hidden="true"></i>',
        title: 'Öka indrag',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])("indent"); },
    },
    code: {
        icon: '&lt;/&gt;',
        title: 'Programkod',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<PRE>'); }
    },
    line: {
        icon: '&#8213;',
        title: 'Vågrät linje',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertHorizontalRule'); }
    },
    link: {
        icon: '<i class="fa fa-link" aria-hidden="true"></i>',
        title: 'Infoga länk',
        result: function () {
            var url = window.prompt('Ange länkens URL');
            if (url)
                Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('createLink', url);
        }
    },
    image: {
        icon: '<i class="fa fa-picture-o" aria-hidden="true"></i>',
        title: 'Infoga bild',
        promptMsg: 'Ange bildens URL',
        result: function (ev, component) {
            var url = window.prompt(this.promptMsg);
            if (url) {
                //exec('insertImage', url);
                var img = document.createElement("img");
                img.src = url;
                img.tabIndex = 1;
                insertElement(img);
                img.onfocus = component.onFocus;
                img.onblur = component.onBlur;
                component.props.onChange(component.contentDiv.innerHTML);
            }
        }
    }
});
function insertElement(element) {
    var sel, range;
    if (window.getSelection && (sel = window.getSelection()).rangeCount) {
        range = sel.getRangeAt(0);
        range.collapse(true);
        range.insertNode(element);
        // Move the caret immediately after the inserted span
        range.setStartAfter(element);
        range.collapse(true);
        sel.removeAllRanges();
        sel.addRange(range);
    }
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/actions.ts":
/*!**************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/actions.ts ***!
  \**************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _exec__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./exec */ "./src/components/utility-components/wysiwyg/exec.ts");

/* harmony default export */ __webpack_exports__["default"] = ({
    bold: {
        icon: '<b>B</b>',
        title: 'Bold',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('bold'); }
    },
    italic: {
        icon: '<i>I</i>',
        title: 'Italic',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('italic'); }
    },
    underline: {
        icon: '<u>U</u>',
        title: 'Underline',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('underline'); }
    },
    strikethrough: {
        icon: '<strike>S</strike>',
        title: 'Strike-through',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('strikeThrough'); }
    },
    heading1: {
        icon: '<b>H<sub>1</sub></b>',
        title: 'Heading 1',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H1>'); }
    },
    heading2: {
        icon: '<b>H<sub>2</sub></b>',
        title: 'Heading 2',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H2>'); }
    },
    heading3: {
        icon: '<b>H<sub>3</sub></b>',
        title: 'Heading 3',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<H3>'); }
    },
    paragraph: {
        icon: '&#182;',
        title: 'Paragraph',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<P>'); }
    },
    quote: {
        icon: '&#8220; &#8221;',
        title: 'Quote',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<BLOCKQUOTE>'); }
    },
    olist: {
        icon: '&#35;',
        title: 'Ordered List',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertOrderedList'); }
    },
    ulist: {
        icon: '&#8226;',
        title: 'Unordered List',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertUnorderedList'); }
    },
    outdent: {
        icon: '<i class="fa fa-outdent" aria-hidden="true"></i>',
        title: 'Outdent',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])("outdent"); }
    },
    indent: {
        icon: '<i class="fa fa-indent" aria-hidden="true"></i>',
        title: 'Indent',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])("indent"); },
    },
    code: {
        icon: '&lt;/&gt;',
        title: 'Code',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('formatBlock', '<PRE>'); }
    },
    line: {
        icon: '&#8213;',
        title: 'Horizontal Line',
        result: function () { return Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertHorizontalRule'); }
    },
    link: {
        icon: '&#128279;',
        title: 'Link',
        result: function () {
            var url = window.prompt('Enter the link URL');
            if (url)
                Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('createLink', url);
        }
    },
    image: {
        icon: '&#128247;',
        title: 'Image',
        promptMsg: 'Enter the URL of the image',
        result: function () {
            var url = window.prompt(this.promptMsg);
            if (url)
                Object(_exec__WEBPACK_IMPORTED_MODULE_0__["default"])('insertImage', url);
        }
    }
});


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/exec.ts":
/*!***********************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/exec.ts ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony default export */ __webpack_exports__["default"] = (function (command, value) {
    if (value === void 0) { value = null; }
    document.execCommand(command, false, value);
});


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/image-edit-actions.ts":
/*!*************************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/image-edit-actions.ts ***!
  \*************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return imageEditActions; });
function imageEditActions(cb) {
    return [{
            name: 'float-left',
            icon: "<div style=\"position:relative\">\n      <i class=\"fa fa-align-right\" aria-hidden=\"true\"></i>\n      <div style=\"position:absolute; left:-4px;top:0; transform: scale(0.5); transform-origin: left top\">\n        <i class=\"fa fa-picture-o\" aria-hidden=\"true\"></i>\n      </div>\n    </div>",
            title: 'Låt bilden flyta vänster om text',
            result: function () { return cb('float-left'); }
        }, {
            name: 'float-right',
            icon: "<div style=\"position:relative\">\n      <i class=\"fa fa-align-left\" aria-hidden=\"true\"></i>\n      <div style=\"position:absolute; right:-4px;top:0; transform: scale(0.5); transform-origin: right top\">\n        <i class=\"fa fa-picture-o\" aria-hidden=\"true\"></i>\n      </div>\n    </div>",
            title: 'Låt bilden flyta höger om text',
            result: function () { return cb('float-right'); }
        }, {
            name: 'unfloat',
            icon: "<div style=\"position:relative;\" aria-hidden=\"true\">\n      <div style=\"position:absolute;top:0;left:0\">&#8254;</div>\n      <div style=\"position:absolute;top:0:left:0;transform: scale(0.5); transform-origin: left bottom\">\n        <i class=\"fa fa-picture-o\" aria-hidden=\"true\"></i>\n      </div>\n      <div style=\"position:absolute;top:0;left:0\">_</div>\n    </div>",
            title: 'Placera bilden på egen rad',
            result: function () { return cb('unfloat'); }
        }];
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/index.tsx":
/*!*************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/index.tsx ***!
  \*************************************************************/
/*! exports provided: Wysiwyg */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Wysiwyg", function() { return Wysiwyg; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _exec__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./exec */ "./src/components/utility-components/wysiwyg/exec.ts");
/* harmony import */ var _wash_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./wash-html */ "./src/components/utility-components/wysiwyg/wash-html.ts");
/* harmony import */ var _image_edit_actions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./image-edit-actions */ "./src/components/utility-components/wysiwyg/image-edit-actions.ts");
/* harmony import */ var _actions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./actions */ "./src/components/utility-components/wysiwyg/actions.ts");






var classes = {
    actionbar: 'wysiwyg-actionbar',
    button: 'wysiwyg-button',
    content: 'wysiwyg-content',
    focusrect: 'wysiwyg-focusrect',
    focuspoint: 'wysiwyg-focuspoint',
    readonlyContent: 'wysiwyg-content readonly'
};
var Wysiwyg = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](Wysiwyg, _super);
    function Wysiwyg(props) {
        var _this = _super.call(this, props) || this;
        _this.state = { focusRect: null };
        _this.onFocus = _this.onFocus.bind(_this);
        _this.onBlur = _this.onBlur.bind(_this);
        _this.onMouseDown = _this.onMouseDown.bind(_this);
        _this.onMouseMove = _this.onMouseMove.bind(_this);
        _this.onMouseUp = _this.onMouseUp.bind(_this);
        return _this;
    }
    Wysiwyg.prototype.componentDidMount = function () {
        var _this = this;
        if (!this.props.readOnly) {
            Array.from(this.contentDiv.querySelectorAll("img,a")).map(function (elem) { return elem; })
                .forEach(function (elem) {
                elem.tabIndex = 1;
                elem.onfocus = _this.onFocus;
                elem.onblur = _this.onBlur;
            });
            document.querySelector(".wysiwyg-content").addEventListener('mousedown', this.onMouseDown);
            document.querySelector(".wysiwyg-content").addEventListener('mousemove', this.onMouseMove);
            document.querySelector(".wysiwyg-content").addEventListener('mouseup', this.onMouseUp);
        }
        if (this.props.reportNumChars) {
            this.props.reportNumChars((this.contentDiv && this.contentDiv.innerText && this.contentDiv.innerText.length) || 0);
        }
    };
    Wysiwyg.prototype.componentDidUpdate = function () {
        var _this = this;
        Array.from(this.contentDiv.querySelectorAll("img,a")).map(function (elem) { return elem; })
            .forEach(function (elem) {
            elem.tabIndex = 1;
            elem.onfocus = _this.onFocus;
            elem.onblur = _this.onBlur;
        });
        if (this.props.reportNumChars) {
            this.props.reportNumChars((this.contentDiv && this.contentDiv.innerText && this.contentDiv.innerText.length) || 0);
        }
    };
    Wysiwyg.prototype.componentWillUnmount = function () {
        document.querySelector(".wysiwyg-content").removeEventListener('mousedown', this.onMouseDown);
        document.querySelector(".wysiwyg-content").removeEventListener('mousemove', this.onMouseMove);
        document.querySelector(".wysiwyg-content").removeEventListener('mouseup', this.onMouseUp);
    };
    Wysiwyg.prototype.shouldComponentUpdate = function (nextProps, nextState) {
        //this.contentDiv.onfocus = this.onFocus;
        //this.contentDiv.onblur = this.onBlur;
        return !this.contentDiv ||
            nextState != this.state ||
            nextProps.readOnly !== this.props.readOnly ||
            Object(_wash_html__WEBPACK_IMPORTED_MODULE_3__["washHtml"])(nextProps.html) !== Object(_wash_html__WEBPACK_IMPORTED_MODULE_3__["washHtml"])(this.contentDiv.innerHTML);
    };
    Wysiwyg.prototype.triggerOnChange = function (html) {
        this.props.onChange && this.props.onChange(Object(_wash_html__WEBPACK_IMPORTED_MODULE_3__["washHtml"])(html));
    };
    Wysiwyg.prototype.onFocus = function (ev) {
        var elem = ev.target;
        if (!elem || !elem.tagName)
            return;
        if (elem.tagName !== 'IMG' && elem.tagName !== 'A')
            return;
        var contentParent = this.contentDiv.parentElement;
        var newState = {
            focusRect: getRelatativeClientRect(contentParent, elem),
        };
        switch (elem.tagName) {
            case 'A':
            case 'IMG':
            default: break;
        }
        this.setState(newState);
        this.focusElem = elem;
    };
    Wysiwyg.prototype.onBlur = function (ev) {
        /*if (ev.relatedTarget) {
          const relatedTarget = ev.relatedTarget as HTMLElement;
          if (relatedTarget.className && relatedTarget.className.split(' ').indexOf(classes.button) >= 0) {
            // A image action button was pressed
            set
            return;
          }
        }*/
        if ((ev.target === this.focusElem && ev.relatedTarget !== this.focusRectDiv) ||
            ev.target === this.focusRectDiv) {
            this.setState({ focusRect: null });
        }
    };
    Wysiwyg.prototype.makeClickable = function (elem) {
        elem.tabIndex = 1;
    };
    Wysiwyg.prototype.onMouseDown = function (ev) {
        if ((ev.target.className || "").split(' ').indexOf(classes.focuspoint) >= 0) {
            var corner = this.getRectCorner(ev);
            this.corner = corner;
            this.resizeStartX = ev.clientX;
        }
    };
    Wysiwyg.prototype.onMouseMove = function (ev) {
        if (this.corner && this.state.focusRect && this.focusElem) {
            ev.preventDefault();
            // TODO: Räkna ut baserat på this.corner hur bildens storlek borde ändras.
            // Leta upp bilden per ID från this.contentDiv
            // Sätt DIV:ens style attribut width till ny width.
            // Om DIV:en redan hade height, sätt ny height med samma aspect ratio som innan,
            // annars, sätt inte height alls (eller möjligtvis till auto))
            var focusRect = this.focusRectDiv.getBoundingClientRect();
            if (focusRect.width < 32)
                return;
            //const currentWidth = focusRect.width;
            //const currentHeight = focusRect.height;
            //const hasHeightStyle = !this.focusElem.style.height || this.focusElem.style.height === "auto";
            var newWidth = Math.max(32, this.corner.endsWith('l') ?
                focusRect.width + (this.resizeStartX - ev.clientX) :
                //focusRect.right - ev.clientX :
                focusRect.width - (this.resizeStartX - ev.clientX));
            this.resizeStartX = ev.clientX;
            //ev.clientX - focusRect.left;
            var factor = newWidth / focusRect.width;
            var newHeight = focusRect.height * factor;
            this.focusElem.style.width = newWidth + "px";
            this.focusElem.style.height = newHeight + "px";
            this.setState({
                focusRect: getRelatativeClientRect(this.contentDiv.parentElement, this.focusElem),
            });
        }
    };
    Wysiwyg.prototype.onMouseUp = function (ev) {
        if (this.corner && this.state.focusRect && this.focusElem) {
            this.corner = null;
            this.triggerOnChange(this.contentDiv.innerHTML);
        }
    };
    Wysiwyg.prototype.getRectCorner = function (ev) {
        var e_1, _a;
        try {
            for (var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"]((ev.target.className || '').split(' ')), _c = _b.next(); !_c.done; _c = _b.next()) {
                var className = _c.value;
                switch (className) {
                    case 'fpul':
                        return 'ul';
                    case 'fpur':
                        return 'fpur';
                    case 'fplr':
                        return 'lr';
                    case 'fpll':
                        return 'll';
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return null;
    };
    Wysiwyg.prototype.execImageEditAction = function (cmd) {
        //console.log(cmd);
        if (!this.focusElem)
            return;
        //console.log("doing it");
        switch (cmd) {
            case 'float-left':
                this.focusElem.style.cssFloat = 'left';
                break;
            case 'float-right':
                this.focusElem.style.cssFloat = 'right';
                break;
            case 'unfloat':
                this.focusElem.style.cssFloat = '';
                break;
        }
        this.triggerOnChange(this.contentDiv.innerHTML);
        this.setState({ focusRect: getRelatativeClientRect(this.contentDiv.parentElement, this.focusElem) });
    };
    Wysiwyg.prototype.render = function () {
        var _this = this;
        var defaultActions = this.props.defaultActions || _actions__WEBPACK_IMPORTED_MODULE_5__["default"];
        var actionsToUse = this.props.actions ? this.props.actions.map(function (action) {
            return typeof action === 'string' ?
                defaultActions[action] :
                defaultActions[action.name] ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, defaultActions[action.name], action) :
                    action;
        })
            : Object.keys(defaultActions).map(function (action) { return defaultActions[action]; });
        if (this.state.focusRect) {
            actionsToUse = actionsToUse.concat(Object(_image_edit_actions__WEBPACK_IMPORTED_MODULE_4__["default"])(function (cmd) { return _this.execImageEditAction(cmd); }));
        }
        var focusRect = this.state.focusRect;
        var _a = this.props, readOnly = _a.readOnly, reportNumChars = _a.reportNumChars, maxChars = _a.maxChars;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: this.props.className },
            !readOnly && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.actionbar }, actionsToUse.map(function (action, idx) {
                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { key: idx, className: classes.button, dangerouslySetInnerHTML: { __html: action.icon }, title: action.title, onMouseDown: function (ev) { action.result(ev, _this); }, onMouseUp: function (ev) { return setTimeout(function () { return _this.contentDiv.focus(); }, 10); } });
            })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: readOnly ? classes.readonlyContent : classes.content, style: { position: 'relative', top: 0, left: 0 } },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "editor", ref: function (div) { return _this.contentDiv = div; }, dangerouslySetInnerHTML: { __html: Object(_wash_html__WEBPACK_IMPORTED_MODULE_3__["washHtml"])(this.props.html) }, contentEditable: !readOnly, onPaste: function (ev) {
                        if (!isNaN(maxChars)) {
                            var target = ev.target, currentTarget = ev.currentTarget;
                            //const textBeingOverwritten = (target as any).innerText || "";
                            var editorText = (currentTarget && currentTarget.innerText) || "";
                            var textBeingPasted = ev.clipboardData.getData("text/plain") || "";
                            if (editorText.length + textBeingPasted.length > maxChars) {
                                ev.preventDefault();
                            }
                        }
                    }, onKeyUp: reportNumChars ? function (ev) {
                        var innerText = ev.target.innerText;
                        reportNumChars(innerText ? innerText.length : 0);
                    } : null, onKeyPress: !isNaN(maxChars) ? function (ev) {
                        var innerText = ev.target.innerText;
                        if (innerText && innerText.length >= maxChars) {
                            ev.preventDefault();
                        }
                    } : null, onInput: function (ev) { return _this.triggerOnChange(ev.target.innerHTML); }, onKeyDown: function (ev) {
                        if (readOnly)
                            return;
                        if (reportNumChars && ev.currentTarget) {
                            reportNumChars((ev.currentTarget.innerText || "").length);
                        }
                        //console.log("Key: " + ev.which);
                        if (ev.which >= 35 && ev.which <= 40) { // home/end/up/down/left/right
                            ev.stopPropagation(); // Prevent entire page from scrolling??
                        }
                        if (ev.which === 9) {
                            ev.preventDefault(); // TAB
                            if (ev.shiftKey) {
                                Object(_exec__WEBPACK_IMPORTED_MODULE_2__["default"])("outdent");
                            }
                            else {
                                Object(_exec__WEBPACK_IMPORTED_MODULE_2__["default"])("indent");
                            }
                        }
                        if ((ev.keyCode === 8 || ev.keyCode === 46) && // Delete or Back buttons
                            _this.focusElem && _this.state.focusRect) {
                            if (_this.focusElem && _this.focusElem.parentElement) {
                                _this.focusElem.parentElement.removeChild(_this.focusElem); // Remove marked image
                            }
                            _this.focusElem = null;
                            _this.setState({ focusRect: null });
                            _this.triggerOnChange(_this.contentDiv.innerHTML);
                        }
                    } }),
                focusRect && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { ref: function (div) { return _this.focusRectDiv = div; }, className: classes.focusrect, onBlur: this.onBlur, tabIndex: 1, style: {
                        outline: 0,
                        position: 'absolute',
                        top: this.state.focusRect.top,
                        left: this.state.focusRect.left,
                        width: this.state.focusRect.width,
                        height: this.state.focusRect.height
                    } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.focuspoint + " fpul", style: { position: 'absolute', top: 0, left: 0 } }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.focuspoint + " fpur", style: { position: 'absolute', top: 0, right: 0 } }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.focuspoint + " fplr", style: { position: 'absolute', bottom: 0, right: 0 } }),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: classes.focuspoint + " fpll", style: { position: 'absolute', bottom: 0, left: 0 } }))));
    };
    return Wysiwyg;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

function getRelatativeClientRect(parent, child) {
    var parentRect = parent.getBoundingClientRect();
    var childRect = child.getBoundingClientRect();
    return {
        top: childRect.top - parentRect.top + parent.scrollTop,
        left: childRect.left - parentRect.left + parent.scrollLeft,
        bottom: childRect.bottom - parentRect.top + parent.scrollTop,
        right: childRect.right - parentRect.left + parent.scrollLeft,
        width: childRect.width,
        height: childRect.height
    };
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/restore-selection.ts":
/*!************************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/restore-selection.ts ***!
  \************************************************************************/
/*! exports provided: saveSelection, restoreSelection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "saveSelection", function() { return saveSelection; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "restoreSelection", function() { return restoreSelection; });
function saveSelection() {
    if (window.getSelection) {
        var sel = window.getSelection();
        if (sel.getRangeAt && sel.rangeCount) {
            return sel.getRangeAt(0);
        }
    }
    else if (document["selection"] && document["selection"].createRange) {
        return document["selection"].createRange();
    }
    return null;
}
function restoreSelection(range) {
    if (range) {
        if (window.getSelection) {
            var sel = window.getSelection();
            sel.removeAllRanges();
            sel.addRange(range);
        }
        else if (document["selection"] && range.select) {
            range.select();
        }
    }
}


/***/ }),

/***/ "./src/components/utility-components/wysiwyg/wash-html.ts":
/*!****************************************************************!*\
  !*** ./src/components/utility-components/wysiwyg/wash-html.ts ***!
  \****************************************************************/
/*! exports provided: washHtml */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "washHtml", function() { return washHtml; });
var parser = new DOMParser();
/** Tags / Attributes Whitelist
 *
 */
var HTML_WASH_POLICY = {
    b: {},
    i: {},
    p: {},
    u: {},
    strike: {},
    pre: {},
    h1: {},
    h2: {},
    h3: {},
    h4: {},
    h5: {},
    img: { src: true, class: true, style: true, tabindex: true },
    a: { href: true, target: true, tabindex: true },
    ul: {},
    ol: {},
    li: {},
    hr: {},
    br: {},
    div: {},
    span: {},
    // table tags:
    table: { border: true },
    tbody: {},
    thead: {},
    tfoot: {},
    tr: {},
    td: { headers: true, colspan: true, rowspan: true },
    th: { abbr: true, headers: true, scope: true, sorted: true, colspan: true, rowspan: true }
};
function washHtml(html) {
    var doc = parser.parseFromString(html, "text/html");
    var childNodes = doc.body.childNodes;
    var modified = false;
    for (var i = 0; i < childNodes.length; ++i) {
        if (washNode(childNodes.item(i))) {
            modified = true;
        }
    }
    return modified ?
        doc.body.innerHTML :
        html; // By returning the original HTML string, we spare the user from refreshing the edit area,
    // which would otherwise put the cursor at the top, losing the position where user where.
}
function washNode(node) {
    var modified = false;
    if (isElement(node)) {
        if (washElement(node)) {
            modified = true;
        }
    }
    if (washChildNodes(node)) {
        modified = true;
    }
    return modified;
}
function washChildNodes(node) {
    var modified = false;
    var childNodes = node.childNodes;
    for (var i = 0; i < childNodes.length; ++i) {
        if (washNode(childNodes.item(i))) {
            modified = true;
        }
    }
    return modified;
}
/** Replace an element with its child nodes.
 *
 */
function removeMiddleElement(element) {
    var childNodes = element.childNodes;
    for (var i = 0; i < childNodes.length; ++i) {
        element.parentNode.insertBefore(childNodes.item(i), element);
    }
    element.remove();
}
function washElement(element) {
    var policy = element.tagName && HTML_WASH_POLICY[element.tagName.toLowerCase()];
    if (!policy) {
        console.warn("Wysiwyg: not allowed tag", element.tagName);
        washChildNodes(element);
        removeMiddleElement(element);
        return true;
    }
    var modified = false;
    for (var i = 0; i < element.attributes.length; ++i) {
        var attr = element.attributes.item(i);
        var allowed = attr.name && !!policy[attr.name.toLowerCase()];
        if (!allowed) {
            modified = true;
            console.warn("Wysiwyg: not allowed attribute", attr.name, "Tag: ", element.tagName);
            element.removeAttribute(attr.name);
        }
    }
    return modified;
}
function isElement(node) {
    return !!node.tagName;
}


/***/ }),

/***/ "./src/components/weekplanner/add-custom-goal.tsx":
/*!********************************************************!*\
  !*** ./src/components/weekplanner/add-custom-goal.tsx ***!
  \********************************************************/
/*! exports provided: AddCustomGoal */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddCustomGoal", function() { return AddCustomGoal; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");



var AddCustomGoal = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AddCustomGoal, _super);
    function AddCustomGoal(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            learningGoal: props.learningGoal || ''
        };
        return _this;
    }
    AddCustomGoal.prototype.render = function () {
        var _this = this;
        var learningGoal = this.state.learningGoal;
        var onSave = this.props.onSave;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_2__["FormattedMessage"], { id: "weekplanner.addLearningGoalTitle", defaultMessage: "L\u00E4gg till eget l\u00E4randem\u00E5l" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_2__["FormattedMessage"], { id: "weekplanner.addLearningGoal", defaultMessage: "M\u00E5l" })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("input", { type: "text", tabIndex: 1, size: 50, autoFocus: true, value: learningGoal, onChange: function (e) { return _this.setState({ learningGoal: e.target.value }); } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top spaced" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-large btn-default", onClick: function () { return onSave(learningGoal); } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_2__["FormattedMessage"], { id: "common.save", defaultMessage: "save" }))));
    };
    return AddCustomGoal;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/weekplanner/add-custom-task.tsx":
/*!********************************************************!*\
  !*** ./src/components/weekplanner/add-custom-task.tsx ***!
  \********************************************************/
/*! exports provided: AddCustomTask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddCustomTask", function() { return AddCustomTask; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility-components/form-field-text-input */ "./src/components/utility-components/form-field-text-input.tsx");
/* harmony import */ var _utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utility-components/form-field-textarea */ "./src/components/utility-components/form-field-textarea.tsx");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");






var AddCustomTask = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AddCustomTask, _super);
    function AddCustomTask(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            name: '',
            description: '',
            url: ''
        };
        return _this;
    }
    AddCustomTask.prototype.render = function () {
        var _this = this;
        var _a = this.state, name = _a.name, description = _a.description, url = _a.url;
        var _b = this.props, isTask = _b.isTask, onSave = _b.onSave;
        var intl = this.context.intl;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "customTask.addWorkGoalTitle", defaultMessage: "L\u00E4gg till eget arbetsm\u00E5l" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__["TextInput"], { label: intl.formatMessage({ id: 'common.nameLabel', defaultMessage: 'Namn' }), id: "AddCustomTask:name", placeholder: intl.formatMessage({ id: 'customTask.enterNamePlhd', defaultMessage: 'Ange namn...' }), value: name, autoFocus: true, onChange: function (name) { return _this.setState({ name: name }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_3__["TextAreaFormField"], { rows: 7, label: intl.formatMessage({ id: 'common.descriptionLabel', defaultMessage: 'Beskrivning' }), id: "AddCustomTask:description", placeholder: intl.formatMessage({ id: 'common.addDescriptionPlhd', defaultMessage: "Lägg till en beskrivning..." }), value: description, onChange: function (description) { return _this.setState({ description: description }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__["TextInput"], { label: intl.formatMessage({ id: 'common.linkLabel', defaultMessage: 'Länk' }), id: "AddCustomTask:url", placeholder: "http://www...", value: url, onChange: function (url) { return _this.setState({ url: url }); } })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-large btn-default", onClick: function () { return onSave(name, description, url); } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "common.save", defaultMessage: "Spara" }))));
    };
    AddCustomTask.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_4__["LanguageContext"];
    return AddCustomTask;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/weekplanner/add-or-edit-sub-task.tsx":
/*!*************************************************************!*\
  !*** ./src/components/weekplanner/add-or-edit-sub-task.tsx ***!
  \*************************************************************/
/*! exports provided: AddOrEditSubTask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddOrEditSubTask", function() { return AddOrEditSubTask; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility-components/form-field-text-input */ "./src/components/utility-components/form-field-text-input.tsx");
/* harmony import */ var _utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utility-components/form-field-textarea */ "./src/components/utility-components/form-field-textarea.tsx");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");







var AddOrEditSubTask = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](AddOrEditSubTask, _super);
    function AddOrEditSubTask(props) {
        var _this = _super.call(this, props) || this;
        if (props.mode === 'edit') {
            var subTask = props.subTask;
            _this.state = {
                name: subTask.name || '',
                description: subTask.description || '',
                url: subTask.url || ''
            };
        }
        else {
            _this.state = {
                name: '',
                description: '',
                url: ''
            };
        }
        return _this;
    }
    AddOrEditSubTask.prototype.save = function () {
        // Update repo:
        var props = this.props;
        var userTask = props.userTask, closeDialog = props.closeDialog, userTasksRepo = props.userTasksRepo;
        var _a = this.state, name = _a.name, description = _a.description, url = _a.url;
        if (props.mode === 'edit') {
            // Edit existing:
            userTasksRepo.update([userTask], function (ut) {
                var subTasks = ut.subTasks;
                if (subTasks) {
                    ut.subTasks = subTasks.map(function (st) {
                        return st.id === props.subTask.id ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, st, { name: name, description: description, url: url }) : tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, st);
                    });
                }
            });
        }
        else {
            // Create new task
            var newSubTask_1 = {
                id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_4__["createUUID"])(),
                name: name,
                description: description,
                url: url
            };
            // Update repo:
            userTasksRepo.update([userTask], function (ut) {
                if (!ut.subTasks) {
                    ut.subTasks = [];
                }
                ut.subTasks = ut.subTasks.concat(newSubTask_1);
            });
        }
        // Close dialog
        closeDialog();
    };
    AddOrEditSubTask.prototype.delete = function () {
        // Update repo:
        var props = this.props;
        if (props.mode !== 'edit') {
            throw new Error("Can only delete in edit mode");
        }
        props.userTasksRepo.update([props.userTask], function (ut) {
            if (ut.subTasks) {
                ut.subTasks = ut.subTasks.filter(function (t) { return t.id !== props.subTask.id; });
            }
        });
        // Close dialog:
        props.closeDialog();
    };
    AddOrEditSubTask.prototype.render = function () {
        var _this = this;
        var _a = this.state, name = _a.name, description = _a.description, url = _a.url;
        var props = this.props;
        var isEditMode = props.mode === 'edit';
        var intl = this.context.intl;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet sv-skip-spacer" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, isEditMode ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "addeditsubtask.editSubtask", defaultMessage: 'Redigera underuppgift' }) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "addeditsubtask.addSubtask", defaultMessage: 'L\u00E4gg till underuppgift' })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__["TextInput"], { autoFocus: true, label: intl.formatMessage({ id: 'addeditsubtask.nameLabel', defaultMessage: 'Underuppgiftens namn' }), id: "AddUserSubTask:name", placeholder: "", value: this.state.name, onChange: function (name) { return _this.setState({ name: name }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_3__["TextAreaFormField"], { label: intl.formatMessage({ id: 'common.descriptionLabel', defaultMessage: 'Beskrivning' }), id: "AddUserSubTask:description", rows: 7, placeholder: "", value: this.state.description, onChange: function (description) { return _this.setState({ description: description }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_2__["TextInput"], { label: intl.formatMessage({ id: 'common.linkLabel', defaultMessage: 'Länk' }), id: "AddUserSubTask:url", placeholder: "", value: this.state.url, onChange: function (url) { return _this.setState({ url: url }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null)),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "sv-html-portlet sv-portlet" },
                props.mode === 'edit' && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn btn-warning btn-large pull-right", onClick: function (ev) { return _this.delete(); } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "addeditsubtask.deleteSubtask", defaultMessage: "Ta bort underuppgift" })),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-large btn-default", onClick: function () { return _this.save(); } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_5__["FormattedMessage"], { id: "common.save", defaultMessage: "Spara" }))));
    };
    AddOrEditSubTask.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_6__["LanguageContext"];
    return AddOrEditSubTask;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/weekplanner/edit-user-task.tsx":
/*!*******************************************************!*\
  !*** ./src/components/weekplanner/edit-user-task.tsx ***!
  \*******************************************************/
/*! exports provided: EditUserTask */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EditUserTask", function() { return EditUserTask; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _get_task_type__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./get-task-type */ "./src/components/weekplanner/get-task-type.ts");
/* harmony import */ var react_datepicker__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-datepicker */ "./node_modules/react-datepicker/es/index.js");
/* harmony import */ var _globals_moment_sv_locale__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../globals/moment-sv-locale */ "./src/globals/moment-sv-locale.ts");
/* harmony import */ var _utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utility-components/form-field-text-input */ "./src/components/utility-components/form-field-text-input.tsx");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _utility_components_form_field__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utility-components/form-field */ "./src/components/utility-components/form-field.tsx");
/* harmony import */ var _add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./add-or-edit-sub-task */ "./src/components/weekplanner/add-or-edit-sub-task.tsx");
/* harmony import */ var _utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utility-components/form-field-textarea */ "./src/components/utility-components/form-field-textarea.tsx");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");












var EditUserTask = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](EditUserTask, _super);
    function EditUserTask(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            userTask: props.userTask,
            name: props.userTask.name,
            description: props.userTask.description,
            url: props.userTask.url,
            deadline: props.userTask.deadline,
            subTasks: props.userTask.subTasks
        };
        _this.onUserTasksChanged = _this.onUserTasksChanged.bind(_this);
        return _this;
    }
    EditUserTask.prototype.componentDidMount = function () {
        this.props.userTasksRepo.subscribe(this.onUserTasksChanged);
    };
    EditUserTask.prototype.onUserTasksChanged = function (userTasks) {
        var _this = this;
        var myUserTask = userTasks.find(function (ut) { return ut.id === _this.props.userTask.id; });
        if (!myUserTask) {
            this.props.closeDialog();
            return;
        }
        this.setState({
            userTask: myUserTask,
            subTasks: myUserTask.subTasks
        });
    };
    EditUserTask.prototype.componentWillUnmount = function () {
        this.props.userTasksRepo.unsubscribe(this.onUserTasksChanged);
    };
    EditUserTask.prototype.isModified = function () {
        // Don't count subtask changes! They live their own life and is maintained
        // in add-or-edit-sub-task.tsx. Reason: User would expect added /edited subtasks
        // to be persisted right away. May click away this dialog.
        // Also reason: Can invoke that dialog by itself from other components. From WeekPlanner
        // when clicking the subtask for example!
        var _a = this.state, deadline = _a.deadline, description = _a.description, name = _a.name, url = _a.url, userTask = _a.userTask;
        return (deadline !== userTask.deadline ||
            description !== userTask.description ||
            name !== userTask.name ||
            url !== userTask.url);
    };
    EditUserTask.prototype.addSubTask = function () {
        this.props.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_8__["AddOrEditSubTask"], { mode: "add", userTask: this.state.userTask, closeDialog: this.props.closeDialog, userTasksRepo: this.props.userTasksRepo }));
    };
    EditUserTask.prototype.editSubTask = function (subTask) {
        this.props.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_8__["AddOrEditSubTask"], { mode: "edit", subTask: subTask, userTask: this.state.userTask, closeDialog: this.props.closeDialog, userTasksRepo: this.props.userTasksRepo }));
    };
    EditUserTask.prototype.render = function () {
        var _this = this;
        var _a = this.state, name = _a.name, description = _a.description, url = _a.url, deadline = _a.deadline, subTasks = _a.subTasks, showCalendar = _a.showCalendar, userTask = _a.userTask;
        var id = userTask.id, courseName = userTask.courseName;
        var _b = this.props, onUpdate = _b.onUpdate, onDelete = _b.onDelete;
        var isModified = this.isModified();
        var taskType = Object(_get_task_type__WEBPACK_IMPORTED_MODULE_2__["getTaskType"])(userTask);
        var isCustomTask = taskType === 'customTask';
        var expired = moment__WEBPACK_IMPORTED_MODULE_6___default()(userTask.deadline) < moment__WEBPACK_IMPORTED_MODULE_6___default()();
        var intl = this.context.intl;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "editTaskDialog sv-html-portlet sv-portlet sv-skip-spacer" },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h2", null, isCustomTask ?
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.editWorkGoals", defaultMessage: 'Redigera arbetsm\u00E5l' }) :
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.editTask", defaultMessage: 'Redigera uppgift' })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_5__["TextInput"], { autoFocus: true, label: isCustomTask ? intl.formatMessage({ id: 'task.targetNameLabel', defaultMessage: 'Arbetsmålets namn' }) : intl.formatMessage({ id: 'task.taskNameLabel', defaultMessage: 'Uppgiftens namn' }), id: "EditUserTask:name", placeholder: isCustomTask ? intl.formatMessage({ id: 'task.whatShouldYouDoPlhd', defaultMessage: 'Vad ska du göra?' }) : intl.formatMessage({ id: 'task.enterTaskNamePlhd', defaultMessage: 'Ange uppgiftens namn...' }), value: name, onChange: function (name) { return _this.setState({ name: name }); } }),
            isCustomTask && react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_textarea__WEBPACK_IMPORTED_MODULE_9__["TextAreaFormField"], { rows: 5, label: intl.formatMessage({ id: 'common.descriptionLabel', defaultMessage: 'Beskrivning' }), id: "EditUserTask:description", placeholder: intl.formatMessage({ id: 'common.addDescriptionPlhd', defaultMessage: 'Lägg till en beskrivning...' }), value: description, onChange: function (description) { return _this.setState({ description: description }); } }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field_text_input__WEBPACK_IMPORTED_MODULE_5__["TextInput"], { label: intl.formatMessage({ id: 'common.linkLabel', defaultMessage: "Länk" }), id: "EdutUserTask:url", placeholder: "http(s)://...", value: url, onChange: function (url) { return _this.setState({ url: url }); } })),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field__WEBPACK_IMPORTED_MODULE_7__["FormField"], { label: intl.formatMessage({ id: 'task.setDeadline', defaultMessage: 'Ange deadline' }) }, (deadline || showCalendar) ?
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_datepicker__WEBPACK_IMPORTED_MODULE_3__["default"], { ref: function (elem) { return _this.datePicker = elem; }, id: "EditUserTask:deadline", nextMonthButtonLabel: "", previousMonthButtonLabel: "", showWeekNumbers: true, selected: deadline && moment__WEBPACK_IMPORTED_MODULE_6___default()(deadline).toDate(), autoFocus: showCalendar, dateFormat: "yyyy-MM-dd", className: expired ? "expired" : undefined, locale: intl.locale, popperPlacement: isCustomTask ? "top-start" : "bottom-start", onBlur: function () { return _this.setState({ showCalendar: false }); }, onChange: function (value) {
                                _this.setState({
                                    deadline: value && moment__WEBPACK_IMPORTED_MODULE_6___default()(value).format("YYYY-MM-DD"),
                                    showCalendar: false
                                });
                            } })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "deleteDate", href: "#", title: intl.formatMessage({ id: 'task.removeDeadline', defaultMessage: 'Ta bort deadline' }), onClick: function (ev) {
                                ev.preventDefault();
                                _this.setState({ deadline: null, showCalendar: false });
                            } }))) :
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "top", ref: function () { _this.datePicker = null; } },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn", onClick: function (ev) {
                            if (_this.datePicker) {
                                _this.datePicker.setOpen(true);
                            }
                            _this.setState({
                                showCalendar: true
                            });
                        } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-calendar", "aria-hidden": "true" }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.setDeadlineLabel", defaultMessage: "Ange deadline..." })))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_form_field__WEBPACK_IMPORTED_MODULE_7__["FormField"], { label: intl.formatMessage({ id: 'task.subTasks', defaultMessage: 'Underuppgifter' }) },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "learningGoalTasks" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "taskContainer" }, subTasks && subTasks.map(function (subTask) { return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: subTask.id, className: "align-horizontal" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { onClick: function () { return _this.editSubTask(subTask); }, href: "#" }, subTask.name))); }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "top" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { id: "EditUserTask:addSubTask", className: "btn", onClick: function () { return _this.addSubTask(); } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-plus", "aria-hidden": "true" }),
                            " ",
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.addSubtask", defaultMessage: "L\u00E4gg till underuppgift" }))))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "divider large" }),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalButton top" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-default", onClick: function () {
                            isModified ? onUpdate(function (userTask) {
                                userTask.name = name;
                                userTask.description = description;
                                userTask.url = url;
                                userTask.deadline = deadline;
                            }) : _this.props.closeDialog();
                        } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "common.save", defaultMessage: "Spara" }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalButton top" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn", onClick: function () {
                            _this.props.closeDialog();
                        } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "common.cancel", defaultMessage: "Avbryt" }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "confirm top pull-right" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { tabIndex: 1, className: "btn btn-warning", onClick: function () {
                            onDelete(id);
                        } }, isCustomTask ?
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.removeWorkGoals", defaultMessage: "Ta bort arbetsm\u00E5l" }) :
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_10__["FormattedMessage"], { id: "task.removeThisTask", defaultMessage: "Ta bort den h\u00E4r uppgiften" })))));
    };
    EditUserTask.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_11__["LanguageContext"];
    return EditUserTask;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/components/weekplanner/get-task-type.ts":
/*!*****************************************************!*\
  !*** ./src/components/weekplanner/get-task-type.ts ***!
  \*****************************************************/
/*! exports provided: getTaskType */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTaskType", function() { return getTaskType; });
function getTaskType(userTask) {
    return userTask.course && userTask.task && userTask.course.length > 0 && userTask.task.length > 0 ?
        'courseBuilderTask' :
        userTask.siteVisionPageId ?
            'siteVisionTask' :
            userTask.courseInfo ?
                'subjectPlannerTask' :
                'customTask';
}


/***/ }),

/***/ "./src/components/weekplanner/refiner.ts":
/*!***********************************************!*\
  !*** ./src/components/weekplanner/refiner.ts ***!
  \***********************************************/
/*! exports provided: refine */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "refine", function() { return refine; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");


function refine(tasks) {
    var e_1, _a, e_2, _b;
    var result = [];
    var mapper = {};
    var tasksPerCourse = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["arrayToLookup"])(tasks, function (t) { return t.courseName || ''; });
    try {
        for (var _c = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(tasksPerCourse).sort().filter(function (x) { return x; }).concat(tasksPerCourse[''] ?
            [''] : [])), _d = _c.next(); !_d.done; _d = _c.next()) {
            var courseName = _d.value;
            var courseTasks = tasksPerCourse[courseName] || tasksPerCourse[''];
            var tasksPerLearningGoal = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["arrayToLookup"])(courseTasks, function (t) { return t.learningGoal; });
            var resultLearningGoals = [];
            try {
                for (var _e = (e_2 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(tasksPerLearningGoal))), _f = _e.next(); !_f.done; _f = _e.next()) {
                    var learningGoal = _f.value;
                    var lgTasks = tasksPerLearningGoal[learningGoal].sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_1__["compareProp"])("dateTime"));
                    var learningGoalTask = lgTasks
                        .filter(function (t) { return t.name == null; }) // If name is undefined or null, this represents a learning goal
                    [0];
                    var url = learningGoalTask && learningGoalTask.url;
                    resultLearningGoals.push({
                        name: learningGoal,
                        allTasks: lgTasks,
                        url: url,
                        step: lgTasks.map(function (t) { return t.step; }).filter(function (step) { return step; })[0],
                        tasks: lgTasks.filter(function (t) { return t.name; })
                    });
                }
            }
            catch (e_2_1) { e_2 = { error: e_2_1 }; }
            finally {
                try {
                    if (_f && !_f.done && (_b = _e.return)) _b.call(_e);
                }
                finally { if (e_2) throw e_2.error; }
            }
            result.push({
                courseName: courseName,
                learningGoals: resultLearningGoals
            });
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return result;
}


/***/ }),

/***/ "./src/components/weekplanner/user-tasks-box.tsx":
/*!*******************************************************!*\
  !*** ./src/components/weekplanner/user-tasks-box.tsx ***!
  \*******************************************************/
/*! exports provided: UserTasksBox */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UserTasksBox", function() { return UserTasksBox; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _access_control__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../access-control */ "./src/access-control/index.ts");
/* harmony import */ var _calendar_course_name_to_css_class__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../calendar/course-name-to-css-class */ "./src/components/calendar/course-name-to-css-class.ts");
/* harmony import */ var _get_task_type__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./get-task-type */ "./src/components/weekplanner/get-task-type.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../features */ "./src/features/index.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");











;
var UserTasksBox = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](UserTasksBox, _super);
    function UserTasksBox(props) {
        return _super.call(this, props) || this;
    }
    UserTasksBox.prototype.render = function () {
        var _this = this;
        var _a = this.props, courseName = _a.courseName, learningGoals = _a.learningGoals, progressData = _a.progressData, displayProgress = _a.displayProgress;
        var isOpen = !!this.props.openCourses[courseName];
        var features = new _features__WEBPACK_IMPORTED_MODULE_7__["Features"]();
        var intl = this.context.intl;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_2__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null, courseName || react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_9__["FormattedMessage"], { id: "userTasks.goals", defaultMessage: "Egna l\u00E4randem\u00E5l" })), headerOpen: isOpen, className: courseName && Object(_calendar_course_name_to_css_class__WEBPACK_IMPORTED_MODULE_4__["courseNameToCssClass"])('wp-course-', courseName), onOpenClose: function (becameOpen) { return _this.props.setIsOpen(courseName, becameOpen); }, displayProgress: displayProgress, progressData: progressData }, learningGoals.map(function (lg) {
            return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: lg.name, className: "learningGoalContainer" },
                lg.step && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "stepIndicator" }, lg.step),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "learningGoalText horizontalItem top" }, lg.name),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem" },
                        "\u00A0",
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "trash", href: "#", title: intl.formatMessage({ id: 'userTasks.deleteLearningGoal', defaultMessage: 'Ta bort lärandemålet och dess uppgifter' }), onClick: function (ev) {
                                ev.preventDefault();
                                _this.props.removeLearningGoal(lg);
                            } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-trash" })))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "learningGoalTasks" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "taskContainer" }, lg.tasks.map(function (userTask) {
                        var isWorking = userTask.$meta === 'adding' || userTask.$meta === 'deleting' || userTask.$meta === 'updating';
                        var taskType = Object(_get_task_type__WEBPACK_IMPORTED_MODULE_5__["getTaskType"])(userTask);
                        var expired = moment__WEBPACK_IMPORTED_MODULE_6___default()(userTask.deadline).startOf('day') < moment__WEBPACK_IMPORTED_MODULE_6___default()().startOf('day');
                        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: userTask.id, style: isWorking ? { opacity: 0.5 } : {} },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "align-horizontal" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "checkBox" + (userTask.done ? " checked" : ""), onClick: function (ev) { return !isWorking && _this.props.setTaskDone(userTask, !userTask.done); } })),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                    taskType === 'courseBuilderTask' ?
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: getTaskUrl(userTask, _this.props.viewCourseUrl) }, userTask.name) :
                                        taskType === 'subjectPlannerTask' ?
                                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: getSubjectPlannerTaskUrl(userTask) }, userTask.name) :
                                            taskType === 'siteVisionTask' ?
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: userTask.url }, userTask.name) :
                                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: !userTask.url ? "link-less" : "", href: userTask.url || undefined, target: (userTask.url + '').toLowerCase().startsWith(location.host.toLowerCase()) ?
                                                        "_self" :
                                                        "_blank" }, userTask.name),
                                    userTask.deadline && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "dateSet" + (expired ? ' expired' : '') },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { title: moment__WEBPACK_IMPORTED_MODULE_6___default()(userTask.deadline).format("YYYY-MM-DD"), className: "fa fa-calendar", "aria-hidden": "true", onClick: function () { } }))),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top taskEdit" },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "editItem", onClick: function () { return _this.props.editTask(userTask); } }))),
                            userTask.subTasks && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "subtasks" }, userTask.subTasks.map(function (subTask) {
                                return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: subTask.id },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "checkBox" + (subTask.done ? " checked" : ""), onClick: function (ev) {
                                                return !isWorking &&
                                                    _this.props.setSubTaskDone(userTask, subTask, !subTask.done);
                                            } })),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top" },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { href: subTask.url || undefined, target: (userTask.url + '').toLowerCase().startsWith(location.host.toLowerCase()) ?
                                                "_self" :
                                                "_blank", className: subTask.url ?
                                                undefined :
                                                'link-less' }, subTask.name)),
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem top taskEdit" },
                                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "editItem", onClick: function () { return _this.props.editSubTask(userTask, subTask); } })));
                            })));
                    }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "learningGoalTools" },
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn addOwnGoal", onClick: function () { return _this.props.addOwnTask(_this.props.courseName, lg.name); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-plus", "aria-hidden": "true" }),
                        " ",
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_9__["FormattedMessage"], { id: 'userTasks.addLearningGoal', defaultMessage: 'Eget arbetsm\u00E5l' }))),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("br", null));
        }));
    };
    UserTasksBox.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_10__["LanguageContext"];
    return UserTasksBox;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));

function getTaskUrl(userTask, viewCourseUrl) {
    if (userTask.course && userTask.course.length > 0 && userTask.task && userTask.task.length > 0) {
        var courseUrl = Object(_access_control__WEBPACK_IMPORTED_MODULE_3__["preserveImpersonationQuery"])(viewCourseUrl, { courseId: userTask.course[0].id });
        return courseUrl + "#/task/" + userTask.task[0].id;
    }
    return userTask.url;
}
function getSubjectPlannerTaskUrl(userTask) {
    if (userTask.courseInfo && userTask.task && userTask.task.length > 0) {
        var _a = userTask.courseInfo, school = _a.school, course = _a.course, tab = _a.tab;
        var courseUrl = Object(_access_control__WEBPACK_IMPORTED_MODULE_3__["preserveImpersonationQuery"])(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_8__["default"].KED_SUBJECT_PLANNER_URL, {});
        return courseUrl + "#/" + school + "/courses/" + course + "/tabs/" + tab + "/tasks/" + userTask.task[0].id;
    }
    return userTask.url;
}


/***/ }),

/***/ "./src/components/weekplanner/weekplanner-persisted-state.ts":
/*!*******************************************************************!*\
  !*** ./src/components/weekplanner/weekplanner-persisted-state.ts ***!
  \*******************************************************************/
/*! exports provided: WeekPlannerPersistedState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WeekPlannerPersistedState", function() { return WeekPlannerPersistedState; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_moment_sv_locale__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../globals/moment-sv-locale */ "./src/globals/moment-sv-locale.ts");



var WeekPlannerPersistedState = /** @class */ (function () {
    function WeekPlannerPersistedState(userOrCopy) {
        if (typeof userOrCopy === 'string') {
            this.user = userOrCopy;
            this.lastWrite = Date.now();
            this.weekDate = Object(_globals_moment_sv_locale__WEBPACK_IMPORTED_MODULE_2__["localMoment"])().startOf('week').valueOf();
            this.openCourses = {};
        }
        else {
            Object.assign(this, userOrCopy);
        }
    }
    WeekPlannerPersistedState.load = function (user) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var cookie, storedData, state;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                cookie = localStorage.getItem('WeekPlannerPersistedState2');
                storedData = cookie && JSON.parse(cookie);
                state = new WeekPlannerPersistedState(user);
                if (storedData)
                    Object.assign(state, storedData);
                return [2 /*return*/, state.user === user && !state.isExpired(moment__WEBPACK_IMPORTED_MODULE_1___default()()) ?
                        state : new WeekPlannerPersistedState(user)];
            });
        });
    };
    WeekPlannerPersistedState.prototype.save = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var json;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                this.lastWrite = Date.now();
                json = JSON.stringify(this);
                localStorage.setItem('WeekPlannerPersistedState2', json);
                return [2 /*return*/];
            });
        });
    };
    WeekPlannerPersistedState.prototype.isExpired = function (asOf) {
        return moment__WEBPACK_IMPORTED_MODULE_1___default()(this.lastWrite)
            .isBefore(asOf.add(0 - WeekPlannerPersistedState.EXPIRATION_HOURS, 'hours'));
    };
    WeekPlannerPersistedState.EXPIRATION_HOURS = 12;
    WeekPlannerPersistedState.VERSION = 2;
    return WeekPlannerPersistedState;
}());



/***/ }),

/***/ "./src/components/weekplanner/weekplanner.tsx":
/*!****************************************************!*\
  !*** ./src/components/weekplanner/weekplanner.tsx ***!
  \****************************************************/
/*! exports provided: WeekPlanner */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WeekPlanner", function() { return WeekPlanner; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _user_tasks_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./user-tasks-box */ "./src/components/weekplanner/user-tasks-box.tsx");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _refiner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./refiner */ "./src/components/weekplanner/refiner.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/utils */ "./src/utils/utils.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _utility_components_dialogs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utility-components/dialogs */ "./src/components/utility-components/dialogs.tsx");
/* harmony import */ var _add_custom_goal__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./add-custom-goal */ "./src/components/weekplanner/add-custom-goal.tsx");
/* harmony import */ var _add_custom_task__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./add-custom-task */ "./src/components/weekplanner/add-custom-task.tsx");
/* harmony import */ var _edit_user_task__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./edit-user-task */ "./src/components/weekplanner/edit-user-task.tsx");
/* harmony import */ var _course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../course-builder/sub-components/spinner */ "./src/components/course-builder/sub-components/spinner.tsx");
/* harmony import */ var _utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../utility-components/open-close-box */ "./src/components/utility-components/open-close-box.tsx");
/* harmony import */ var _utils_pending_job__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../utils/pending-job */ "./src/utils/pending-job.ts");
/* harmony import */ var _add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./add-or-edit-sub-task */ "./src/components/weekplanner/add-or-edit-sub-task.tsx");
/* harmony import */ var _utils_weekutil__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../utils/weekutil */ "./src/utils/weekutil.ts");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");
/* harmony import */ var _charts_progress__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../charts/progress */ "./src/components/charts/progress.tsx");
/* harmony import */ var _charts_charts_utils__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../charts/charts-utils */ "./src/components/charts/charts-utils.ts");
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../features */ "./src/features/index.ts");





















var MAX_STRATEGY_LENGTH = 16384;
var MAX_ASSESSMENT_LENGTH = 16384;
var WeekPlanner = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](WeekPlanner, _super);
    function WeekPlanner(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            userTasks: [],
            weekDate: Date.now(),
            openCourses: {},
            dialogs: [],
            saving: false,
            weekTextsUT: null,
            isLoading: true,
            isCopyingTasks: false
        };
        _this.onChange = _this.onChange.bind(_this);
        _this.weekTextsSavingJob = new _utils_pending_job__WEBPACK_IMPORTED_MODULE_13__["PendingJob"](function () { return _this.saveWeekTexts(); });
        return _this;
    }
    WeekPlanner.prototype.componentDidMount = function () {
        this.props.env.userTasksRepo.subscribe(this.onChange);
    };
    WeekPlanner.prototype.componentWillUnmount = function () {
        this.props.env.userTasksRepo.unsubscribe(this.onChange);
        this.weekTextsSavingJob.stop();
    };
    WeekPlanner.prototype.onChange = function (userTasks, persisted, weekTextsUT) {
        var newState = {
            userTasks: userTasks,
            weekDate: persisted.weekDate,
            openCourses: persisted.openCourses,
            weekTextsUT: weekTextsUT,
            isLoading: false
        };
        if (!this.state.weekTextsUT || (weekTextsUT.dateTime !== this.state.weekTextsUT.dateTime)) {
            // Changing week. Reset to new week's values
            newState.strategy = weekTextsUT.weekTexts.strategy;
            newState.assessment = weekTextsUT.weekTexts.assessment;
        }
        this.setState(newState); // React's use of Pick instead of Partial makes things complex here.
    };
    WeekPlanner.prototype.isWeekTextsEdited = function () {
        var _a = this.state, strategy = _a.strategy, assessment = _a.assessment, weekTextsUT = _a.weekTextsUT;
        return !!weekTextsUT && (strategy !== weekTextsUT.weekTexts.strategy || assessment !== weekTextsUT.weekTexts.assessment);
    };
    WeekPlanner.prototype.saveWeekTexts = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, strategy, assessment, weekTextsUT;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        console.log("Saving texts...");
                        _a = this.state, strategy = _a.strategy, assessment = _a.assessment, weekTextsUT = _a.weekTextsUT;
                        if (!this.isWeekTextsEdited()) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.props.env.userTasksRepo.upsert(weekTextsUT, function (ut) {
                                ut.weekTexts = { strategy: strategy, assessment: assessment };
                            })];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2: return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.prevWeek = function () {
        //this.saveWeekTexts(); 
        var prevWeekObj = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_15__["getPrevWeekDate"])(moment__WEBPACK_IMPORTED_MODULE_6___default()(this.state.weekDate));
        this.props.env.userTasksRepo.changeWeek(prevWeekObj.nextDate, prevWeekObj.adjusted);
    };
    WeekPlanner.prototype.nextWeek = function () {
        //this.saveWeekTexts();
        var nextWeekObj = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_15__["getNextWeekDate"])(moment__WEBPACK_IMPORTED_MODULE_6___default()(this.state.weekDate));
        this.props.env.userTasksRepo.changeWeek(nextWeekObj.nextDate, nextWeekObj.adjusted);
    };
    WeekPlanner.prototype.openDialog = function (dialog) {
        this.setState({ dialogs: tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"](this.state.dialogs, [dialog]) });
    };
    WeekPlanner.prototype.openAddGoalDialog = function () {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_custom_goal__WEBPACK_IMPORTED_MODULE_8__["AddCustomGoal"], { onSave: function (learningGoal) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            if (!learningGoal)
                                throw new Error(this.context.intl.formatMessage({ id: 'weekplanner.emptyLearningGoalErr', defaultMessage: 'Lärandemålet kan inte vara tomt' }));
                            if (!!this.state.saving) return [3 /*break*/, 5];
                            this.setState({ saving: true });
                            _a.label = 1;
                        case 1:
                            _a.trys.push([1, , 3, 4]);
                            return [4 /*yield*/, this.addCustomGoal(learningGoal)];
                        case 2:
                            _a.sent();
                            return [3 /*break*/, 4];
                        case 3:
                            this.setState({ saving: false });
                            return [7 /*endfinally*/];
                        case 4:
                            this.closeDialog();
                            _a.label = 5;
                        case 5: return [2 /*return*/];
                    }
                });
            }); } }));
    };
    WeekPlanner.prototype.openAddOwnTaskDialog = function (courseName, learningGoalName) {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_custom_task__WEBPACK_IMPORTED_MODULE_9__["AddCustomTask"], { isTask: !courseName, onSave: function (name, description, url) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            if (!name)
                                throw new Error(this.context.intl.formatMessage({ id: 'weekplanner.nameCannotBeEmpty', defaultMessage: 'Namnet kan inte vara tomt' }));
                            if (!!this.state.saving) return [3 /*break*/, 5];
                            this.setState({ saving: true });
                            _a.label = 1;
                        case 1:
                            _a.trys.push([1, , 3, 4]);
                            return [4 /*yield*/, this.addCustomTask(courseName, learningGoalName, name, description, url)];
                        case 2:
                            _a.sent();
                            return [3 /*break*/, 4];
                        case 3:
                            this.setState({ saving: false });
                            return [7 /*endfinally*/];
                        case 4:
                            this.closeDialog();
                            _a.label = 5;
                        case 5: return [2 /*return*/];
                    }
                });
            }); } }));
    };
    WeekPlanner.prototype.editTask = function (userTask) {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_edit_user_task__WEBPACK_IMPORTED_MODULE_10__["EditUserTask"], { userTasksRepo: this.props.env.userTasksRepo, userTask: userTask, onUpdate: function (updater) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                var test;
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            test = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, userTask);
                            updater(test);
                            if (!test.name)
                                throw new Error(this.context.intl.formatMessage({ id: 'weekplanner.nameMustNotBeEmpty', defaultMessage: 'Namnet får inte vara tomt' }));
                            this.closeDialog();
                            return [4 /*yield*/, this.props.env.userTasksRepo.update([userTask], updater)];
                        case 1:
                            _a.sent();
                            return [2 /*return*/];
                    }
                });
            }); }, onDelete: function (id) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            this.closeDialog();
                            return [4 /*yield*/, this.props.env.userTasksRepo.delete([id])];
                        case 1:
                            _a.sent();
                            return [2 /*return*/];
                    }
                });
            }); }, openDialog: function (dialog) { return _this.openDialog(dialog); }, closeDialog: function () { return _this.closeDialog(); } }));
    };
    WeekPlanner.prototype.editSubTask = function (userTask, subTask) {
        var _this = this;
        this.openDialog(react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_add_or_edit_sub_task__WEBPACK_IMPORTED_MODULE_14__["AddOrEditSubTask"], { userTasksRepo: this.props.env.userTasksRepo, mode: "edit", userTask: userTask, subTask: subTask, closeDialog: function () { return _this.closeDialog(); } }));
    };
    WeekPlanner.prototype.closeDialog = function () {
        this.setState({ dialogs: this.state.dialogs.slice(0, this.state.dialogs.length - 1) });
    };
    WeekPlanner.prototype.addCustomGoal = function (learningGoal) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var latestTimeStamp;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        latestTimeStamp = Math.max.apply(Math.max, [this.state.weekDate].concat(this.state.userTasks.map(function (t) { return t.dateTime; })));
                        return [4 /*yield*/, this.props.env.userTasksRepo.insert([{
                                    id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
                                    learningGoal: learningGoal,
                                    dateTime: latestTimeStamp + 2000
                                }])];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, this.props.env.userTasksRepo.setWeekPlannerBoxOpen("", true)];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.removeLearningGoal = function (learningGoal) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (learningGoal.tasks.length > 0) {
                            if (!confirm(this.context.intl.formatMessage({ id: 'weekplanner.confirmRemoveLearningObjectives', defaultMessage: 'Ta bort lärandemål samt {learningGoalsNumber} uppgifter?' }, { learningGoalsNumber: learningGoal.tasks.length }))) {
                                return [2 /*return*/];
                            }
                        }
                        return [4 /*yield*/, this.props.env.userTasksRepo.delete(learningGoal.allTasks.map(function (t) { return t.id; }))];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.addCustomTask = function (courseName, learningGoal, name, description, url) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var latestTimeStamp;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        latestTimeStamp = Math.max.apply(Math.max, [this.state.weekDate].concat(this.state.userTasks.map(function (t) { return t.dateTime; })));
                        /*const emptyLearningGoalPlaceholder = this.state.userTasks.find(ut =>
                          ut.name == null &&
                          !ut.courseName &&
                          ut.learningGoal === learningGoal);
                    
                        if (emptyLearningGoalPlaceholder) {
                          // Hijack learning-goal placeholder and make it the real task.
                          // This will make the learning goal disappear once this task
                          // is deleted.
                          await userTasksRepo.update([emptyLearningGoalPlaceholder], ut => {
                            Object.assign(ut, { name, description, url });
                          });
                        } else {*/
                        // Add another task to same learning-goal
                        return [4 /*yield*/, this.props.env.userTasksRepo.insert([{
                                    id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])(),
                                    dateTime: latestTimeStamp + 2000,
                                    courseName: courseName,
                                    learningGoal: learningGoal,
                                    name: name,
                                    description: description,
                                    url: url
                                }])];
                    case 1:
                        /*const emptyLearningGoalPlaceholder = this.state.userTasks.find(ut =>
                          ut.name == null &&
                          !ut.courseName &&
                          ut.learningGoal === learningGoal);
                    
                        if (emptyLearningGoalPlaceholder) {
                          // Hijack learning-goal placeholder and make it the real task.
                          // This will make the learning goal disappear once this task
                          // is deleted.
                          await userTasksRepo.update([emptyLearningGoalPlaceholder], ut => {
                            Object.assign(ut, { name, description, url });
                          });
                        } else {*/
                        // Add another task to same learning-goal
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.setIsOpen = function (courseName, isOpen) {
        this.props.env.userTasksRepo.setWeekPlannerBoxOpen(courseName, isOpen);
    };
    WeekPlanner.prototype.setTaskDone = function (task, done) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.props.env.userTasksRepo.setTaskDoneState(task, done)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.setSubTaskDone = function (task, subTask, done) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.props.env.userTasksRepo.setSubTaskDoneState(task, subTask.id, done)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.copyFromPreviousWeek = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, userTasks_1, openCourses, weekDate, prevWeek, prevWeekNo, prevKEDWeek, prevTasks, test, latestTimeStamp_1, copies;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0: return [4 /*yield*/, this.setState({ isCopyingTasks: true })];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2:
                        _b.trys.push([2, , 5, 6]);
                        _a = this.state, userTasks_1 = _a.userTasks, openCourses = _a.openCourses, weekDate = _a.weekDate;
                        prevWeek = moment__WEBPACK_IMPORTED_MODULE_6___default()(weekDate).add(-1, 'week');
                        prevWeekNo = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_15__["getAdjustedWeek"])(prevWeek);
                        prevKEDWeek = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_15__["KEDWeek"])(prevWeek.year(), prevWeekNo);
                        return [4 /*yield*/, this.props.env.kedBackendClient.list("usertasks", {
                                from: prevKEDWeek.notBefore,
                                to: prevKEDWeek.notAfter,
                                role: "USER",
                                include: ["task", "course", "acl"],
                                flags: ["includeIdsOnly"]
                            })];
                    case 3:
                        prevTasks = _b.sent();
                        prevTasks = prevTasks
                            .filter(function (prevTask) { return !prevTask.done; }) // Don't copy done tasks
                            .filter(function (prevTask) { return !!prevTask.name; }) // Don't copy empty learning goals
                            .filter(function (prevTask) { return !userTasks_1.some(function (taskOfCurrentWeek) {
                            return taskOfCurrentWeek.name === prevTask.name &&
                                taskOfCurrentWeek.learningGoal === prevTask.learningGoal &&
                                taskOfCurrentWeek.courseName === prevTask.courseName;
                        }); }); // Ignore identical tasks (already copied)
                        test = [weekDate].concat(userTasks_1.map(function (t) { return t.dateTime; }));
                        latestTimeStamp_1 = Math.max.apply(Math.max, [weekDate].concat(userTasks_1.map(function (t) { return t.dateTime; })));
                        copies = prevTasks.sort(Object(_utils_utils__WEBPACK_IMPORTED_MODULE_5__["compareProp"])("dateTime")).map(function (task) {
                            var copy = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, task, { dateTime: latestTimeStamp_1 += 1000 });
                            copy.id = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["createUUID"])();
                            if (copy.subTasks) {
                                copy.subTasks = copy.subTasks.filter(function (st) { return !st.done; });
                            }
                            delete copy.$etag;
                            return copy;
                        });
                        // Store it
                        return [4 /*yield*/, this.props.env.userTasksRepo.insert(copies)];
                    case 4:
                        // Store it
                        _b.sent();
                        return [3 /*break*/, 6];
                    case 5:
                        this.setState({ isCopyingTasks: false });
                        return [7 /*endfinally*/];
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    WeekPlanner.prototype.getHeaderTitle = function () {
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h4", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.logBook", defaultMessage: "Loggbok" }));
    };
    WeekPlanner.prototype.render = function () {
        var _this = this;
        var weekNumber = moment__WEBPACK_IMPORTED_MODULE_6___default()(this.state.weekDate).week();
        var showProgressCharts = _features__WEBPACK_IMPORTED_MODULE_20__["features"].weekplannerCharts;
        //console.log("Weekydate: "  + new Date(this.state.weekDate) + " which is week no " + weekNumber);
        var currentWeek = moment__WEBPACK_IMPORTED_MODULE_6___default()().week();
        var taskSets = Object(_refiner__WEBPACK_IMPORTED_MODULE_4__["refine"])(this.state.userTasks);
        var _a = this.state, dialogs = _a.dialogs, weekTextsUT = _a.weekTextsUT, strategy = _a.strategy, assessment = _a.assessment, isLoading = _a.isLoading, isCopyingTasks = _a.isCopyingTasks;
        var isSaving = weekTextsUT && (weekTextsUT.$meta === 'adding' || weekTextsUT.$meta === 'updating');
        var isStrategyEdited = !!weekTextsUT && (strategy !== weekTextsUT.weekTexts.strategy);
        var isAssessmentEdited = !!weekTextsUT && (assessment !== weekTextsUT.weekTexts.assessment);
        var enableSaveButton = !isSaving && (isStrategyEdited || isAssessmentEdited);
        var chartTasks = Object(_charts_charts_utils__WEBPACK_IMPORTED_MODULE_19__["getWeekplannerProgressData"])(taskSets);
        var percentage = taskSets.length > 0 ? chartTasks.completedTasks / chartTasks.totalNumberOfTasks * 100 : 0;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "ked_boxed weekPlanner" + (weekNumber === currentWeek ? " currentWeek" : ""), onKeyDown: function (ev) {
                    if (ev.which === 83 && ev.ctrlKey) {
                        ev.preventDefault();
                        if (!isSaving && _this.isWeekTextsEdited()) {
                            _this.weekTextsSavingJob.triggerChange(0);
                        }
                    }
                } },
                showProgressCharts && this.getHeaderTitle(),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "widgets" },
                    showProgressCharts ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "progressBar" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_charts_progress__WEBPACK_IMPORTED_MODULE_18__["Progress"], { percentage: percentage })) : this.getHeaderTitle(),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "weekSelect" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.weekNumber", values: { weekNumber: weekNumber }, defaultMessage: "Vecka {weekNumber}" }))),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "horizontalItem" },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn-group" },
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn", onClick: function () { return _this.prevWeek(); } },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-angle-left", "aria-hidden": "true" })),
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("button", { className: "btn", onClick: function () { return _this.nextWeek(); } },
                                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-angle-right", "aria-hidden": "true" })))))),
                taskSets.length > 0 && react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                taskSets.map(function (props) {
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_user_tasks_box__WEBPACK_IMPORTED_MODULE_2__["UserTasksBox"], tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({ key: props.courseName }, props, { courseName: props.courseName, learningGoals: props.learningGoals, viewCourseUrl: _this.props.viewCourseUrl, openCourses: _this.state.openCourses, addOwnTask: function (courseName, learningGoalName) { return _this.openAddOwnTaskDialog(courseName, learningGoalName); }, setIsOpen: _this.setIsOpen.bind(_this), setTaskDone: _this.setTaskDone.bind(_this), setSubTaskDone: _this.setSubTaskDone.bind(_this), editTask: function (task) { return _this.editTask(task); }, editSubTask: function (task, subTask) { return _this.editSubTask(task, subTask); }, removeLearningGoal: function (lg) { return _this.removeLearningGoal(lg); }, displayProgress: showProgressCharts, progressData: chartTasks.subjectData[props.courseName] }));
                }),
                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                isLoading ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_course_builder_sub_components_spinner__WEBPACK_IMPORTED_MODULE_11__["Spinner"], null) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", null,
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn", onClick: function (ev) { return _this.openAddGoalDialog(); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-list-alt", "aria-hidden": "true" }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.learningGoal", defaultMessage: "Eget l\u00E4randem\u00E5l" })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn", style: isCopyingTasks ? { opacity: 0.5 } : undefined, onClick: function (ev) { return (!isCopyingTasks) && _this.copyFromPreviousWeek(); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-clone", "aria-hidden": "true" }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.copyPreviousWeekTaks", defaultMessage: "Kopiera ej klara fr\u00E5n f\u00F6reg\u00E5ende vecka" })),
                    react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_open_close_box__WEBPACK_IMPORTED_MODULE_12__["OpenCloseBox"], { title: react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h5", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.strategyAndEvaluation", defaultMessage: "Strategi & Utv\u00E4rdering" })), headerOpen: this.state.openCourses["StratUtv"], onOpenClose: function (becameOpen) { return _this.setIsOpen("StratUtv", becameOpen); } },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.strategy", defaultMessage: "Strategi" })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.strategyDescription", defaultMessage: "Hur jag ska g\u00F6ra f\u00F6r att l\u00E4ra mig." })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { className: "weekplanner-textarea", disabled: this.props.env.tutored, value: strategy && strategy.substr(0, MAX_STRATEGY_LENGTH), onChange: function (ev) {
                                _this.setState({ strategy: (ev.target.value || '').substr(0, MAX_STRATEGY_LENGTH) });
                                _this.weekTextsSavingJob.triggerChange(500);
                            } }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("h3", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.evaluation", defaultMessage: "Utv\u00E4rdering" })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null,
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "weekplanner.evaluationDescription", defaultMessage: "Reflektion kring din arbetsinsats och dina valda strategier under veckan.Utv\u00E4rdera i f\u00F6rh\u00E5llande till dina m\u00E5l." })),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("hr", null),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("textarea", { className: "weekplanner-textarea", value: assessment && assessment.substr(0, MAX_ASSESSMENT_LENGTH), disabled: this.props.env.tutored, onChange: function (ev) {
                                _this.setState({ assessment: (ev.target.value || '').substr(0, MAX_ASSESSMENT_LENGTH) });
                                _this.weekTextsSavingJob.triggerChange(500);
                            } }),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "btn", tabIndex: 0, style: enableSaveButton ? {} : { opacity: 0.5 }, onClick: function () { return !isSaving && _this.weekTextsSavingJob.triggerChange(0); } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("i", { className: "fa fa-floppy-o", "aria-hidden": "true" }),
                            enableSaveButton ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "common.save", defaultMessage: " Spara" }) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react_intl__WEBPACK_IMPORTED_MODULE_16__["FormattedMessage"], { id: "common.saved", defaultMessage: " Sparad" }))))),
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_utility_components_dialogs__WEBPACK_IMPORTED_MODULE_7__["Dialogs"], { dialogs: dialogs, popDialog: function () {
                    _this.setState(function (_a) {
                        var dialogs = _a.dialogs;
                        return ({ dialogs: dialogs.slice(0, dialogs.length - 1) });
                    });
                } }));
    };
    WeekPlanner.contextType = _utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_17__["LanguageContext"];
    return WeekPlanner;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/contracts/ked-models.ts":
/*!*************************************!*\
  !*** ./src/contracts/ked-models.ts ***!
  \*************************************/
/*! exports provided: Course, futureAbilities */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Course", function() { return Course; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "futureAbilities", function() { return futureAbilities; });
var Course = /** @class */ (function () {
    function Course() {
    }
    return Course;
}());

var futureAbilities = [
    "Lära att lära",
    "Samarbeta",
    "Agera globalt",
    "Visa handlingskraft",
    "Vara innovativ",
    "Leva digitalt"
];


/***/ }),

/***/ "./src/features/feature-flags.json":
/*!*****************************************!*\
  !*** ./src/features/feature-flags.json ***!
  \*****************************************/
/*! exports provided: picker, ksTutorComment, kgTutorComment, termplannerCharts, weekplannerCharts, teacherRights, studyGroups, cbCollapseBoxes, ksAssignments, markPartialKRs, default */
/***/ (function(module) {

module.exports = {"picker":"Integrate coursebuilder and subjectplanner with Google Picker","ksTutorComment":"Integrate KSTermplanner with tutor comments","kgTutorComment":"Integrate KSTermplanner  with tutor comments","termplannerCharts":"Integrate KSTermplanner with progress charts","weekplannerCharts":"Integrate Weekplanner with progress charts","teacherRights":"Activate course builder teacher rights","studyGroups":"Add study groups and google classroom functionality","cbCollapseBoxes":"Course Builder: Collapse modules by default","ksAssignments":"KS show hand-in assignments","markPartialKRs":"Activate mark partial knowledge requirments functionality"};

/***/ }),

/***/ "./src/features/features.ts":
/*!**********************************!*\
  !*** ./src/features/features.ts ***!
  \**********************************/
/*! exports provided: Features, features */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Features", function() { return Features; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "features", function() { return features; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/query-string */ "./src/utils/query-string.ts");
/* harmony import */ var _feature_flags_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./feature-flags.json */ "./src/features/feature-flags.json");
var _feature_flags_json__WEBPACK_IMPORTED_MODULE_2___namespace = /*#__PURE__*/__webpack_require__.t(/*! ./feature-flags.json */ "./src/features/feature-flags.json", 1);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");




var Features = /** @class */ (function () {
    function Features() {
        var e_1, _a;
        this._initialized = false;
        var _loop_1 = function (featureName) {
            Object.defineProperty(this_1, featureName, {
                get: function () {
                    if (!this._initialized)
                        this.init();
                    return this._features[featureName];
                },
                set: function (value) {
                    throw new Error('Feature flags cannot be set here');
                }
            });
        };
        var this_1 = this;
        try {
            for (var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(_feature_flags_json__WEBPACK_IMPORTED_MODULE_2__)), _c = _b.next(); !_c.done; _c = _b.next()) {
                var featureName = _c.value;
                _loop_1(featureName);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_1) throw e_1.error; }
        }
    }
    Features.prototype.init = function () {
        var e_2, _a;
        if (this._initialized)
            return;
        var turnedOnFeatures = (_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_3__["cfg"].KED_FEATURES || "").split(',').map(function (name) { return name.trim().toLowerCase(); });
        var query = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["parseQueryString"])(location.search, { toLower: true });
        if (query.testversion) {
            turnedOnFeatures = ["*"];
        }
        if (query.features) {
            turnedOnFeatures = query.features
                .split(',')
                .map(function (feature) { return feature.trim().toLowerCase(); });
        }
        var turnOnAll = turnedOnFeatures.includes('*');
        this._features = {};
        try {
            for (var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](Object.keys(_feature_flags_json__WEBPACK_IMPORTED_MODULE_2__)), _c = _b.next(); !_c.done; _c = _b.next()) {
                var featureName = _c.value;
                this._features[featureName] = turnOnAll ||
                    turnedOnFeatures.includes(featureName.toLowerCase());
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_2) throw e_2.error; }
        }
        this._initialized = true;
    };
    return Features;
}());

var features = new Features();


/***/ }),

/***/ "./src/features/index.ts":
/*!*******************************!*\
  !*** ./src/features/index.ts ***!
  \*******************************/
/*! exports provided: Features, features */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _features__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./features */ "./src/features/features.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Features", function() { return _features__WEBPACK_IMPORTED_MODULE_0__["Features"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "features", function() { return _features__WEBPACK_IMPORTED_MODULE_0__["features"]; });




/***/ }),

/***/ "./src/global-setters/configure.ts":
/*!*****************************************!*\
  !*** ./src/global-setters/configure.ts ***!
  \*****************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(process) {/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");

_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].ENVIRONMENT = "production";
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_API_URL = "https://kind-kedbackend.azurewebsites.net/api/"; // "https://kedbackendtest.azurewebsites.net/api/"
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].EDS_API_URL = "http://localhost:8082/testdata/eds/"; // "https://edsportalowinapi.azurewebsites.net/api/"
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_TOKEN_URL = ""; // "https://kedauthtest.azurewebsites.net/token"
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_CLIENT_ID = ""; // "devclient", "testclient", "..."
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_CLIENT_SECRET = "";
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_REALM = "IN1"; // "SE1"
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_LOCALE = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_LOCALE || "sv"; // "sv", "en". Only set from process.env if not set from SiteVision element config.
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_SCHOOL_LOCALE = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_SCHOOL_LOCALE || "sv"; // "sv", "en_sin", "en_nin". Only set from process.env if not set from SiteVision element config.
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_RESOURCES_URL = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_RESOURCES_URL || process.env.KED_RESOURCES_URL;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./src/global-setters/set-all.ts":
/*!***************************************!*\
  !*** ./src/global-setters/set-all.ts ***!
  \***************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _configure__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./configure */ "./src/global-setters/configure.ts");
/* harmony import */ var _set_bearer_providers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./set-bearer-providers */ "./src/global-setters/set-bearer-providers.ts");
/* harmony import */ var _set_ked_backend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./set-ked-backend-client */ "./src/global-setters/set-ked-backend-client.ts");
/* harmony import */ var _set_eds_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./set-eds-client */ "./src/global-setters/set-eds-client.ts");
/* These scripts assume some of the global vars have already been set:
  * KED.cfg
  * KED.env.currentUser

  The rest will be set here (client side)
*/






/***/ }),

/***/ "./src/global-setters/set-bearer-providers.ts":
/*!****************************************************!*\
  !*** ./src/global-setters/set-bearer-providers.ts ***!
  \****************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/query-string */ "./src/utils/query-string.ts");
/* harmony import */ var kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/clientweb */ "./kedbackend/clientweb.js");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _access_control_index__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../access-control/index */ "./src/access-control/index.ts");
/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/utils */ "./src/utils/utils.ts");








function getMergedTokenPath(tokenPath, locationSearch, scopes) {
    // Merge configured query params of token path with params given to current page
    var currentQuery = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["parseQueryString"])(locationSearch);
    var impersonationProps = Object(_utils_utils__WEBPACK_IMPORTED_MODULE_7__["cherryPickProps"])(currentQuery, _access_control_index__WEBPACK_IMPORTED_MODULE_6__["IMPERSONATION_QUERY_PARAMS"]);
    var _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["splitUrlAndQuery"])(tokenPath), 2), tokenPathWithoutQuery = _a[0], tokenQueryString = _a[1];
    var tokenPathQuery = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["parseQueryString"])(tokenQueryString);
    return tokenPathWithoutQuery + Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_1__["generateQueryString"])(tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, tokenPathQuery, impersonationProps, { scopes: scopes.join(',') }));
}
function getTokenId(mergedTokenPath, userEmail) {
    return mergedTokenPath + "/" + userEmail;
}
function saveUserInfo(user, tokenId) {
    _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser = user;
    sessionStorage.setItem("userInfo" + tokenId, JSON.stringify(user));
}
function loadUserInfo(tokenId) {
    var storedSessionUser = sessionStorage.getItem("userInfo" + tokenId);
    if (storedSessionUser) {
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser = JSON.parse(storedSessionUser);
    }
}
function createBearerProvider(mergedTokenPath, userEmail) {
    var tokenId = getTokenId(mergedTokenPath, userEmail);
    return new kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["WebServerBearerProvider"](mergedTokenPath, function (responseText) {
        var res = JSON.parse(responseText);
        if (!res.ok)
            throw new Error(res.error);
        if (res.user) {
            saveUserInfo(res.user, tokenId);
        }
        return { token: res.token, expires: Date.now() + 59 * 60 * 1000 };
    }, tokenId);
}
function createGoogleTokenProvider(mergedTokenPath, userEmail) {
    var tokenId = getTokenId(mergedTokenPath, userEmail);
    return new kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["WebServerBearerProvider"](mergedTokenPath, function (responseText) {
        var res = JSON.parse(responseText);
        if (!res.ok)
            throw new Error(res.error);
        return { token: res.token, expires: Date.now() + 59 * 60 * 1000 };
    }, tokenId);
}
function createTestTokenProvider(tokenUrl, user, scopes) {
    return new kedbackend_client__WEBPACK_IMPORTED_MODULE_3__["KedBearerProvider"](kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["isomorphic"], kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["storage"], tokenUrl + user.mail + location.search, _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_CLIENT_ID, _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_CLIENT_SECRET, tokenUrl, {
        email: user.mail.toLowerCase(),
        roles: user.roles,
        school: user.school,
        schoolType: user.schoolType,
        scopes: scopes
    });
}
// env.currentUser.mail is set by SiteVision server initially.
// A response from /api/token may change the mail attribute of the current
// user, so env.currentUser.mail may be different after getting a response.
// However, the initial value is valuable always in order to distinguish the case
// when one normal user logs out and another user logs in.
var initialUserEmail = _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser && _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser.mail; // Initial value of mail. May change.
if (initialUserEmail) {
    // KED
    if (_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_PATH) {
        //
        //
        // Production / SiteVision proxied /api/token to request tokens from:
        //
        //
        var mergedTokenPath = getMergedTokenPath(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_PATH, location.search, [
            "kedbackend",
            "EDS",
        ]);
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].bearerProvider = createBearerProvider(mergedTokenPath, initialUserEmail);
        loadUserInfo(getTokenId(mergedTokenPath, initialUserEmail));
        // Google
        var googleMergedPath = getMergedTokenPath(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_PATH, location.search, [
            "https://www.googleapis.com/auth/calendar.readonly",
        ]);
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].googleTokenProvider = createGoogleTokenProvider(googleMergedPath, initialUserEmail);
    }
    else if (_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_URL && _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_CLIENT_ID && _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_CLIENT_SECRET) {
        //
        //
        // Test - go directly to KEDAUTH server to retrieve tokens
        //
        //
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].bearerProvider = createTestTokenProvider(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_URL, _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser, [
            "kedbackend",
            "EDS",
        ]);
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].googleTokenProvider = createTestTokenProvider(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_4__["default"].KED_TOKEN_URL + "/google", _globals_KED_env__WEBPACK_IMPORTED_MODULE_5__["default"].currentUser, [
            "https://www.googleapis.com/auth/calendar.readonly",
        ]);
    }
    else {
        throw new Error("Missing configuration parameter KED_TOKEN_PATH");
    }
}


/***/ }),

/***/ "./src/global-setters/set-eds-client.ts":
/*!**********************************************!*\
  !*** ./src/global-setters/set-eds-client.ts ***!
  \**********************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/clientweb */ "./kedbackend/clientweb.js");
/* harmony import */ var _apis_edsclient__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../apis/edsclient */ "./src/apis/edsclient.ts");




_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].edsClient = new _apis_edsclient__WEBPACK_IMPORTED_MODULE_3__["EdsClient"](kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["isomorphic"], _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__["default"].EDS_API_URL, _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].bearerProvider, function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.mail; });


/***/ }),

/***/ "./src/global-setters/set-ked-backend-client.ts":
/*!******************************************************!*\
  !*** ./src/global-setters/set-ked-backend-client.ts ***!
  \******************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");
/* harmony import */ var kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/clientweb */ "./kedbackend/clientweb.js");



_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].kedBackendClient = new kedbackend_clientweb__WEBPACK_IMPORTED_MODULE_2__["KedBackendClientWeb"](_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__["default"].KED_API_URL, _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].bearerProvider);


/***/ }),

/***/ "./src/globals/KED.cfg.ts":
/*!********************************!*\
  !*** ./src/globals/KED.cfg.ts ***!
  \********************************/
/*! exports provided: default, cfg */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cfg", function() { return cfg; });
/* harmony import */ var _KED__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./KED */ "./src/globals/KED.ts");

;
if (!_KED__WEBPACK_IMPORTED_MODULE_0__["default"].cfg)
    _KED__WEBPACK_IMPORTED_MODULE_0__["default"].cfg = {};
/* harmony default export */ __webpack_exports__["default"] = (_KED__WEBPACK_IMPORTED_MODULE_0__["default"].cfg);
var cfg = _KED__WEBPACK_IMPORTED_MODULE_0__["default"].cfg;


/***/ }),

/***/ "./src/globals/KED.env.ts":
/*!********************************!*\
  !*** ./src/globals/KED.env.ts ***!
  \********************************/
/*! exports provided: default, env */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "env", function() { return env; });
/* harmony import */ var _ked__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ked */ "./src/globals/ked.ts");

if (!_ked__WEBPACK_IMPORTED_MODULE_0__["default"].env)
    _ked__WEBPACK_IMPORTED_MODULE_0__["default"].env = {};
/* harmony default export */ __webpack_exports__["default"] = (_ked__WEBPACK_IMPORTED_MODULE_0__["default"].env);
var env = _ked__WEBPACK_IMPORTED_MODULE_0__["default"].env;


/***/ }),

/***/ "./src/globals/KED.ts":
/*!****************************!*\
  !*** ./src/globals/KED.ts ***!
  \****************************/
/*! exports provided: KED_NAMESPACE, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KED_NAMESPACE", function() { return KED_NAMESPACE; });
var KED_NAMESPACE = "KED";
var result = typeof KED === 'undefined' ? {} : KED;
if (typeof window !== 'undefined' && typeof KED === 'undefined') {
    window[KED_NAMESPACE] = result;
}
/* harmony default export */ __webpack_exports__["default"] = (result);


/***/ }),

/***/ "./src/globals/db.ts":
/*!***************************!*\
  !*** ./src/globals/db.ts ***!
  \***************************/
/*! exports provided: db, globalId, Schools, CourseInstances */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "db", function() { return db; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "globalId", function() { return globalId; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Schools", function() { return Schools; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseInstances", function() { return CourseInstances; });
/* harmony import */ var _KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var kedbackend_repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kedbackend/repo */ "./kedbackend/repo.js");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _KED_cfg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./KED.cfg */ "./src/globals/KED.cfg.ts");




var db = new kedbackend_repo__WEBPACK_IMPORTED_MODULE_1__["KedBackendRepo"](function () { return _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].kedBackendClient; }, function () { return _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser ?
    _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.mail :
    ""; }, function () { return _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser ?
    _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.displayName || _KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.mail :
    ""; });
var globalId = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["getGlobalId"])(_KED_cfg__WEBPACK_IMPORTED_MODULE_3__["default"].KED_REALM);
var Schools = {
    standardSchool: db.schools.name("standard").cacheOptimized().single(),
    get mySchool() { return db.schools.name(_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.school).cacheOptimized().single(); }
};
var CourseInstances = {
    getBranchId: function (school, courseId) {
        return school.switchMap(function (school) {
            return db.branches
                .hasEdgesFrom([school.officialBranchId])
                .name("draft")
                .tags(courseId)
                .idsOnly()
                .map(function (_a) {
                var id = _a.id;
                return id;
            })
                .toValue()
                .map(function (ids) { return ids.length > 0 ? ids[0] : undefined; });
        });
    },
    /** Get a DRAFT branch for given course ID and given school.
     * If there is not yet such a branch, create it using mutationsOnEmpty() which will
     * lead to the C# code DocumentRepository.ReadOrMutate() via DocumentController.
     */
    getOrCreateBranchId: function (school, courseId) {
        return db.courseInstances.idsOnly().id(courseId).switchMap(function () {
            return school.switchMap(function (school) {
                return db.branches
                    .hasEdgesFrom([school.officialBranchId])
                    .name("draft")
                    .tags(courseId)
                    .idsOnly()
                    .mutationsOnEmpty(function (tx) {
                    // These 2 mutations will occur server side, atomically.
                    // Will be sent on each request in the query, but will only execute if query results in zero items.
                    //console.log("School:", school);
                    var id = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["createUUID"])();
                    tx.add("branches", {
                        id: id,
                        acl: [
                            "role:USER:R",
                            "schoolRole:" + school.name + "/EMPLOYEE:S"
                        ],
                        name: 'draft',
                        schoolId: school.id,
                        treeParentId: school.officialBranchId,
                        tags: [courseId]
                    });
                    // Approving the branch makes sure that it was created by an EMPLOYEE on given school.
                    tx.link2("branches", school.officialBranchId, "approvedChildren", id);
                })
                    .single()
                    .map(function (_a) {
                    var id = _a.id;
                    return id;
                });
            });
        });
    },
    getAllDescendantIds: function (courseId) {
        return db.courseBlocks.tags(courseId).idsOnly().concat(db.courseContents.tags(courseId).idsOnly()).concat(db.courseTabs.tags(courseId).idsOnly()).concat(db.tasks.tags(courseId).idsOnly())
            .map(function (x) { return x.id; });
    }
};


/***/ }),

/***/ "./src/globals/ked.ts":
/*!****************************!*\
  !*** ./src/globals/ked.ts ***!
  \****************************/
/*! exports provided: KED_NAMESPACE, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KED_NAMESPACE", function() { return KED_NAMESPACE; });
var KED_NAMESPACE = "KED";
var result = typeof KED === 'undefined' ? {} : KED;
if (typeof window !== 'undefined' && typeof KED === 'undefined') {
    window[KED_NAMESPACE] = result;
}
/* harmony default export */ __webpack_exports__["default"] = (result);


/***/ }),

/***/ "./src/globals/moment-sv-locale.ts":
/*!*****************************************!*\
  !*** ./src/globals/moment-sv-locale.ts ***!
  \*****************************************/
/*! exports provided: localMoment */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "localMoment", function() { return localMoment; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");


if (_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__["default"].KED_LOCALE === "sv") {
    moment__WEBPACK_IMPORTED_MODULE_0___default.a.updateLocale('sv', {
        months: 'januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december'.split('_'),
        monthsShort: 'jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec'.split('_'),
        weekdays: 'söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag'.split('_'),
        weekdaysShort: 'sön_mån_tis_ons_tor_fre_lör'.split('_'),
        weekdaysMin: 'sö_må_ti_on_to_fr_lö'.split('_'),
        longDateFormat: {
            LT: 'HH:mm',
            LTS: 'HH:mm:ss',
            L: 'YYYY-MM-DD',
            LL: 'D MMMM YYYY',
            LLL: 'D MMMM YYYY [kl.] HH:mm',
            LLLL: 'dddd D MMMM YYYY [kl.] HH:mm',
            lll: 'D MMM YYYY HH:mm',
            llll: 'ddd D MMM YYYY HH:mm'
        },
        calendar: {
            sameDay: '[Idag] LT',
            nextDay: '[Imorgon] LT',
            lastDay: '[Igår] LT',
            nextWeek: '[På] dddd LT',
            lastWeek: '[I] dddd[s] LT',
            sameElse: 'L'
        },
        relativeTime: {
            future: 'om %s',
            past: 'för %s sedan',
            s: 'några sekunder',
            ss: '%d sekunder',
            m: 'en minut',
            mm: '%d minuter',
            h: 'en timme',
            hh: '%d timmar',
            d: 'en dag',
            dd: '%d dagar',
            M: 'en månad',
            MM: '%d månader',
            y: 'ett år',
            yy: '%d år'
        },
        dayOfMonthOrdinalParse: /\d{1,2}(e|a)/,
        ordinal: function (number) {
            var b = number % 10, output = (~~(number % 100 / 10) === 1) ? 'e' :
                (b === 1) ? 'a' :
                    (b === 2) ? 'a' :
                        (b === 3) ? 'e' : 'e';
            return number + output;
        },
        week: {
            dow: 1,
            doy: 4 // The week that contains Jan 4th is the first week of the year.
        }
    });
}
var localMoment = function () {
    return moment__WEBPACK_IMPORTED_MODULE_0___default.a.apply(this, arguments).locale(_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_1__["default"].KED_LOCALE);
};


/***/ }),

/***/ "./src/repos/ked-repo.ts":
/*!*******************************!*\
  !*** ./src/repos/ked-repo.ts ***!
  \*******************************/
/*! exports provided: KedRepo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KedRepo", function() { return KedRepo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./repo */ "./src/repos/repo.ts");
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");



var KedRepo = /** @class */ (function () {
    function KedRepo(options) {
        var _this = this;
        var table = options.table, getClient = options.getClient, getQueryOptions = options.getQueryOptions;
        this.mem = new _repo__WEBPACK_IMPORTED_MODULE_1__["Repo"]({ query: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                var queryOptions;
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                    switch (_a.label) {
                        case 0: return [4 /*yield*/, getQueryOptions()];
                        case 1:
                            queryOptions = _a.sent();
                            return [4 /*yield*/, getClient().list(table, tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, queryOptions, { cacheBust: this.getCacheBust() }))];
                        case 2: return [2 /*return*/, _a.sent()];
                    }
                });
            }); } });
        this.options = options;
    }
    KedRepo.prototype.getCacheBust = function () {
        var _a = this.options, table = _a.table, user = _a.user;
        var cacheBust = localStorage.getItem('cache-bust-' + table + '-' + user);
        return cacheBust || this.regenerateCacheBust();
    };
    KedRepo.prototype.regenerateCacheBust = function () {
        var _a = this.options, table = _a.table, user = _a.user;
        var cacheBust = Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["createUUID"])();
        localStorage.setItem('cache-bust-' + table + '-' + user, cacheBust);
        return cacheBust;
    };
    KedRepo.prototype.upsert = function (item, updater) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var updatedItem;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!!item.$etag) return [3 /*break*/, 2];
                        updatedItem = Object.assign({}, item);
                        updater(updatedItem);
                        return [4 /*yield*/, this.insert([updatedItem])];
                    case 1: return [2 /*return*/, _a.sent()];
                    case 2: 
                    // We have an $etag, so we can expect it to live on the server.
                    // However, take care of the unlikely situation that it was deleted from server,
                    // and if so, insert it again.
                    return [4 /*yield*/, this.update([item], updater).catch(function (e) {
                            if (e.name === "http404") {
                                var updatedItem = Object.assign({}, item);
                                updater(updatedItem);
                                return _this.insert([updatedItem]);
                            }
                            return Promise.reject(e);
                        })];
                    case 3:
                        // We have an $etag, so we can expect it to live on the server.
                        // However, take care of the unlikely situation that it was deleted from server,
                        // and if so, insert it again.
                        _a.sent();
                        _a.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    KedRepo.prototype.update = function (items, updater) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, getClient, optimistic, table, client, modifiedItems, res;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.options, getClient = _a.getClient, optimistic = _a.optimistic, table = _a.table;
                        client = getClient();
                        modifiedItems = items.map(function (item) {
                            var memRepoItem = _this.mem.items.find(function (it) { return it.id === item.id; });
                            item = Object.assign({}, memRepoItem || item);
                            updater(item);
                            return item;
                        });
                        if (!optimistic) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.mem.update(modifiedItems.map(function (x) { return Object.assign({}, x, { $meta: 'updating' }); }))];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2: return [4 /*yield*/, client.do(function (br) { return modifiedItems.forEach(function (item) { return br.put(table, item); }); })
                            .catch(function (e) { return e.name === "http409" ? // conflict
                            // Get a fresh version from server:
                            client.list(table, { ids: items.map(function (item) { return item.id; }) }, { cache: 'no-cache' }).then(function (freshItems) {
                                // Update local version:
                                var modifiedItems = freshItems.map(function (freshItem) {
                                    // Clone the fresh item
                                    var modified = Object.assign({}, freshItem);
                                    // Re-run the updater on the clone:
                                    updater(modified);
                                    return modified;
                                });
                                // Re-do the the put operation towards the server.
                                return client.do(function (br) { return modifiedItems.forEach(function (item) { return br.put(table, item); }); });
                            }) :
                            // Other unexpected error:
                            Promise.resolve(optimistic &&
                                _this.mem.update(items)) // Undo optimistic update
                                .then(function () {
                                return Promise.reject(e); // Reject with the error no matter.
                            }); })];
                    case 3:
                        res = _b.sent();
                        this.regenerateCacheBust();
                        modifiedItems.forEach(function (item) {
                            item.$etag = res.newEtags[item.id];
                            item.$meta = undefined;
                        });
                        return [4 /*yield*/, this.mem.update(modifiedItems)];
                    case 4:
                        _b.sent(); // Ensures new etag is is applied on next action.
                        return [2 /*return*/];
                }
            });
        });
    };
    KedRepo.prototype.stripGraphs = function (items, graphs) {
        return items.map(function (item) {
            var clone = Object.assign({}, item);
            graphs.forEach(function (graph) {
                if (item[graph]) {
                    clone[graph] = item[graph].map(function (doc) { return ({ id: doc.id }); });
                }
            });
            return clone;
        });
    };
    KedRepo.prototype.insert = function (items) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, getClient, optimistic, table, getQueryOptions, client, queryOptions, graphs, stripped, br, _loop_1, stripped_1, stripped_1_1, item, res;
            var e_1, _b;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_c) {
                switch (_c.label) {
                    case 0:
                        _a = this.options, getClient = _a.getClient, optimistic = _a.optimistic, table = _a.table, getQueryOptions = _a.getQueryOptions;
                        client = getClient();
                        return [4 /*yield*/, getQueryOptions()];
                    case 1:
                        queryOptions = _c.sent();
                        graphs = [].concat(queryOptions.include);
                        // Give IDs to each item:
                        items = items.map(function (item) { return item.id ? item : Object.assign({}, item, { id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["createUUID"])() }); });
                        stripped = this.stripGraphs(items, graphs);
                        if (!optimistic) return [3 /*break*/, 3];
                        return [4 /*yield*/, this.mem.insert(stripped.map(function (x) { return Object.assign({}, x, { $meta: 'adding' }); }))];
                    case 2:
                        _c.sent();
                        _c.label = 3;
                    case 3:
                        br = new kedbackend_client__WEBPACK_IMPORTED_MODULE_2__["BatchRunner"]();
                        _loop_1 = function (item) {
                            var e_2, _a;
                            var _loop_2 = function (graph) {
                                var foreignItems = item[graph];
                                if (foreignItems) {
                                    foreignItems.forEach(function (doc) {
                                        br.link2(table, item.id, graph, doc.id);
                                    });
                                }
                            };
                            try {
                                // Also add links to all foreign related items:
                                for (var graphs_1 = (e_2 = void 0, tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](graphs)), graphs_1_1 = graphs_1.next(); !graphs_1_1.done; graphs_1_1 = graphs_1.next()) {
                                    var graph = graphs_1_1.value;
                                    _loop_2(graph);
                                }
                            }
                            catch (e_2_1) { e_2 = { error: e_2_1 }; }
                            finally {
                                try {
                                    if (graphs_1_1 && !graphs_1_1.done && (_a = graphs_1.return)) _a.call(graphs_1);
                                }
                                finally { if (e_2) throw e_2.error; }
                            }
                            br.add(table, item);
                        };
                        try {
                            for (stripped_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](stripped), stripped_1_1 = stripped_1.next(); !stripped_1_1.done; stripped_1_1 = stripped_1.next()) {
                                item = stripped_1_1.value;
                                _loop_1(item);
                            }
                        }
                        catch (e_1_1) { e_1 = { error: e_1_1 }; }
                        finally {
                            try {
                                if (stripped_1_1 && !stripped_1_1.done && (_b = stripped_1.return)) _b.call(stripped_1);
                            }
                            finally { if (e_1) throw e_1.error; }
                        }
                        return [4 /*yield*/, client.batch(br.mutationRequests).catch(function (e) {
                                if (optimistic)
                                    _this.mem.delete(items.map(function (item) { return item.id; }));
                                return Promise.reject(e);
                            })];
                    case 4:
                        res = _c.sent();
                        this.regenerateCacheBust();
                        items.forEach(function (item) { return item.$etag = res.newEtags[item.id]; });
                        if (!optimistic) return [3 /*break*/, 6];
                        return [4 /*yield*/, this.mem.update(items)];
                    case 5:
                        _c.sent(); // Update with new $etag.
                        return [3 /*break*/, 8];
                    case 6: return [4 /*yield*/, this.mem.insert(items)];
                    case 7:
                        _c.sent();
                        _c.label = 8;
                    case 8: return [2 /*return*/];
                }
            });
        });
    };
    KedRepo.prototype.delete = function (ids) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, getClient, optimistic, table, client, res;
            var _this = this;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.options, getClient = _a.getClient, optimistic = _a.optimistic, table = _a.table;
                        client = getClient();
                        if (!optimistic) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.mem.update(ids
                                .map(function (id) { return _this.mem.items.find(function (x) { return x.id === id; }); })
                                .filter(function (x) { return x; })
                                .map(function (x) { return Object.assign({}, x, { $meta: 'deleting' }); }))];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2: return [4 /*yield*/, client.do(function (br) { return ids.forEach(function (id) { return br.delete(table, id); }); }).catch(function (e) { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                            var _this = this;
                            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                                switch (_a.label) {
                                    case 0:
                                        if (!optimistic) return [3 /*break*/, 2];
                                        return [4 /*yield*/, this.mem.update(ids
                                                .map(function (id) { return _this.mem.items.find(function (x) { return x.id === id; }); })
                                                .filter(function (x) { return x; })
                                                .map(function (x) {
                                                x = Object.assign({}, x);
                                                delete x.$meta;
                                                return x;
                                            }))];
                                    case 1:
                                        _a.sent();
                                        _a.label = 2;
                                    case 2: throw e;
                                }
                            });
                        }); })];
                    case 3:
                        res = _b.sent();
                        this.regenerateCacheBust();
                        return [4 /*yield*/, this.mem.delete(ids)];
                    case 4:
                        _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    return KedRepo;
}());



/***/ }),

/***/ "./src/repos/repo.ts":
/*!***************************!*\
  !*** ./src/repos/repo.ts ***!
  \***************************/
/*! exports provided: Repo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Repo", function() { return Repo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var Repo = /** @class */ (function () {
    function Repo(comm) {
        this.comm = comm;
        this.listPromise = null;
        this.items = null;
        this.subscribers = [];
    }
    Repo.prototype.subscribe = function (subscriber) {
        var _this = this;
        return this.ensureHasData().then(function () {
            subscriber(_this.items, _this.error);
            _this.subscribers.push(subscriber);
        });
    };
    Repo.prototype.unsubscribe = function (subscriber) {
        this.subscribers = this.subscribers.filter(function (s) { return s !== subscriber; });
    };
    Repo.prototype.notifySubscribers = function () {
        var _this = this;
        this.subscribers.forEach(function (s) { return s(_this.items, _this.error); });
    };
    Repo.prototype.ensureHasData = function () {
        if (!this.listPromise)
            this.refreshFromServer();
        return this.listPromise;
    };
    Repo.prototype.refreshFromServer = function () {
        var _this = this;
        this.listPromise = this.comm.query().then(function (items) {
            _this.items = items;
            _this.error = null;
            _this.notifySubscribers();
        }).catch(function (error) {
            _this.error = error;
            _this.items = _this.items || [];
            _this.notifySubscribers();
        });
        return this.listPromise;
    };
    Repo.prototype.update = function (item) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var updatedItems;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.ensureHasData()];
                    case 1:
                        _a.sent();
                        updatedItems = Array.isArray(item) ? item : [item];
                        this.items = this.items.map(function (it) {
                            var updatedItem = updatedItems.find(function (_a) {
                                var id = _a.id;
                                return it.id === id;
                            });
                            return updatedItem ?
                                Object.assign({}, updatedItem) :
                                it;
                        });
                        this.notifySubscribers();
                        return [2 /*return*/];
                }
            });
        });
    };
    Repo.prototype.insert = function (item) {
        var _this = this;
        return this.ensureHasData().then(function () {
            _this.items = _this.items.concat(item);
            _this.notifySubscribers();
        });
    };
    Repo.prototype.delete = function (id) {
        var _this = this;
        var ids = Array.isArray(id) ? id : [id];
        return this.ensureHasData().then(function () {
            _this.items = _this.items.filter(function (it) { return !ids.some(function (id) { return it.id === id; }); });
            _this.notifySubscribers();
        });
    };
    return Repo;
}());



/***/ }),

/***/ "./src/repos/user-tasks-repo.ts":
/*!**************************************!*\
  !*** ./src/repos/user-tasks-repo.ts ***!
  \**************************************/
/*! exports provided: userTasksRepo, UserTasksRepo */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "userTasksRepo", function() { return userTasksRepo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UserTasksRepo", function() { return UserTasksRepo; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _ked_repo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ked-repo */ "./src/repos/ked-repo.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _components_weekplanner_weekplanner_persisted_state__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/weekplanner/weekplanner-persisted-state */ "./src/components/weekplanner/weekplanner-persisted-state.ts");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var kedbackend_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! kedbackend/client */ "./kedbackend/client.js");
/* harmony import */ var _utils_weekutil__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/weekutil */ "./src/utils/weekutil.ts");







var userTasksRepo = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].userTasksRepo;
var UserTasksRepo = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](UserTasksRepo, _super);
    function UserTasksRepo(getClient, getCurrentUser) {
        var _this = _super.call(this, {
            getClient: getClient,
            optimistic: true,
            table: "usertasks",
            user: getCurrentUser() ? getCurrentUser().mail : "",
            getQueryOptions: function () { return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](_this, void 0, void 0, function () {
                var currentUser, userEmail, _a, weekDate, weekNumber, kedWeek;
                return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                    switch (_b.label) {
                        case 0:
                            currentUser = getCurrentUser();
                            userEmail = currentUser ? currentUser.mail : "";
                            if (!!this.persistedState) return [3 /*break*/, 2];
                            _a = this;
                            return [4 /*yield*/, _components_weekplanner_weekplanner_persisted_state__WEBPACK_IMPORTED_MODULE_3__["WeekPlannerPersistedState"].load(userEmail)];
                        case 1:
                            _a.persistedState = _b.sent();
                            _b.label = 2;
                        case 2:
                            weekDate = this.persistedState.weekDate;
                            weekNumber = moment__WEBPACK_IMPORTED_MODULE_4___default()(weekDate).week();
                            kedWeek = Object(_utils_weekutil__WEBPACK_IMPORTED_MODULE_6__["KEDWeek"])(moment__WEBPACK_IMPORTED_MODULE_4___default()(weekDate).year(), weekNumber);
                            /*const [from, to] = [moment(weekDate).startOf('week'), moment(weekDate).endOf('week')]
                              .map(m => m.toDate().getTime());*/
                            return [2 /*return*/, {
                                    from: kedWeek.notBefore,
                                    to: kedWeek.notAfter,
                                    role: "USER",
                                    include: ["task", "course"],
                                    flags: ["includeIdsOnly"],
                                }];
                    }
                });
            }); }
        }) || this;
        _this.persistedState = null;
        _this.getCurrentUser = getCurrentUser;
        return _this;
    }
    UserTasksRepo.prototype.updatePersistedState = function (stateChanges) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        Object.assign(this.persistedState, stateChanges);
                        return [4 /*yield*/, this.persistedState.save()];
                    case 1:
                        _a.sent();
                        this.mem.notifySubscribers();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.setTaskDoneState = function (userTask, done) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, getClient, optimistic, table, client, modifiedItem, similarTasks, identicalTasks;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.options, getClient = _a.getClient, optimistic = _a.optimistic, table = _a.table;
                        client = getClient();
                        modifiedItem = Object.assign({}, userTask, { done: done });
                        if (!optimistic) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.mem.update(Object.assign({}, modifiedItem, { $meta: 'updating' }))];
                    case 1:
                        _b.sent();
                        _b.label = 2;
                    case 2: return [4 /*yield*/, client.list('usertasks', {
                            name: userTask.name,
                            role: "USER",
                            include: ["task", "course"],
                            flags: ["includeIdsOnly"],
                            from: moment__WEBPACK_IMPORTED_MODULE_4___default()(this.persistedState.weekDate).add(-3, 'weeks').valueOf(),
                            to: moment__WEBPACK_IMPORTED_MODULE_4___default()(this.persistedState.weekDate).add(3, 'weeks').valueOf()
                        }, {
                            cache: 'no-cache'
                        })];
                    case 3:
                        similarTasks = _b.sent();
                        identicalTasks = similarTasks.filter(function (t) {
                            return t.courseName === userTask.courseName &&
                                t.learningGoal === userTask.learningGoal &&
                                (!userTask.task || t.task.map(function (t) { return t.id; }).join('') === userTask.task.map(function (t) { return t.id; }).join('')) &&
                                (!userTask.course || t.course.map(function (c) { return c.id; }).join('') === userTask.course.map(function (c) { return c.id; }).join(''));
                        });
                        if (identicalTasks.length === 0) {
                            // Workaround for issue in SubjectPlanner migration (usertasks with long names is not found)
                            identicalTasks.push(userTask);
                        }
                        return [4 /*yield*/, this.update(identicalTasks, function (t) { return t.done = done; })];
                    case 4:
                        _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.setSubTaskDoneState = function (userTask, subTaskId, done) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var _a, getClient, optimistic, table, client;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this.options, getClient = _a.getClient, optimistic = _a.optimistic, table = _a.table;
                        client = getClient();
                        return [4 /*yield*/, this.update([userTask], function (t) { return t.subTasks && t.subTasks.filter(function (st) { return st.id === subTaskId; })
                                .forEach(function (st) { return st.done = done; }); })];
                    case 1:
                        _b.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.setWeekPlannerBoxOpen = function (courseName, isOpen) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var openCourses;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        openCourses = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, this.persistedState.openCourses);
                        if (isOpen)
                            openCourses[courseName] = true;
                        else
                            delete openCourses[courseName];
                        return [4 /*yield*/, this.updatePersistedState({ openCourses: openCourses })];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.changeWeek = function (weekDate, keepCurrentDate) {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            var persistedState, newPersisted;
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        persistedState = this.persistedState;
                        if (!!persistedState) return [3 /*break*/, 2];
                        return [4 /*yield*/, _components_weekplanner_weekplanner_persisted_state__WEBPACK_IMPORTED_MODULE_3__["WeekPlannerPersistedState"].load(this.options.user)];
                    case 1:
                        persistedState = _a.sent();
                        _a.label = 2;
                    case 2:
                        newPersisted = new _components_weekplanner_weekplanner_persisted_state__WEBPACK_IMPORTED_MODULE_3__["WeekPlannerPersistedState"](persistedState);
                        newPersisted.weekDate = keepCurrentDate ? moment__WEBPACK_IMPORTED_MODULE_4___default()(weekDate).valueOf() : moment__WEBPACK_IMPORTED_MODULE_4___default()(weekDate).startOf('week').valueOf();
                        newPersisted.save();
                        this.persistedState = newPersisted;
                        return [4 /*yield*/, this.mem.refreshFromServer()];
                    case 3:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    UserTasksRepo.prototype.subscribe = function (subscriber) {
        var _this = this;
        var proxySubscriber = function (userTasks) {
            subscriber(userTasks.filter(function (ut) { return !ut.weekTexts; }), _this.persistedState, userTasks.filter(function (ut) { return !!ut.weekTexts; })[0] || {
                id: Object(kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["createUUID"])(),
                dateTime: _this.persistedState.weekDate,
                weekTexts: { assessment: '', strategy: '' },
                acl: [
                    // Default ACL: Let user self have full control over this item:
                    new kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["DocumentAccess"]("email", _this.getCurrentUser().mail, "S"),
                    // Additional ACL: Let employees on same school have read access to it.
                    // This currently only applies to tasks that refer to course tasks (not own tasks!)
                    new kedbackend_client__WEBPACK_IMPORTED_MODULE_5__["DocumentAccess"]("schoolRole", _this.getCurrentUser().school + "/EMPLOYEE", "R")
                ].map(function (ac) { return ac.toString(); })
            });
        };
        proxySubscriber["subscriber"] = subscriber;
        this.mem.subscribe(proxySubscriber);
    };
    UserTasksRepo.prototype.unsubscribe = function (subscriber) {
        this.mem.subscribers = this.mem.subscribers.filter(function (s) { return s["subscriber"] !== subscriber; });
    };
    return UserTasksRepo;
}(_ked_repo__WEBPACK_IMPORTED_MODULE_1__["KedRepo"]));

if (!userTasksRepo) {
    userTasksRepo = _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].userTasksRepo = new UserTasksRepo(function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].kedBackendClient; }, function () { return _globals_KED_env__WEBPACK_IMPORTED_MODULE_2__["default"].currentUser; });
    userTasksRepo.mem.ensureHasData();
}


/***/ }),

/***/ "./src/test/data/users.ts":
/*!********************************!*\
  !*** ./src/test/data/users.ts ***!
  \********************************/
/*! exports provided: users */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "users", function() { return users; });
var users = [{
        displayName: "Administratör",
        mail: "vemendo@kedschools.com",
        roles: ['ADMIN', 'EMPLOYEE'],
        school: 'KED',
        username: "admin"
    }, {
        displayName: "David",
        mail: "david.fahlander@vemendo.se",
        roles: ['ADMIN', 'EMPLOYEE'],
        school: 'KED',
        username: "david"
    },
    {
        displayName: "Andrei",
        mail: "andrei.spatarelu@vemendo.se",
        roles: ['ADMIN', 'EMPLOYEE', 'STUDENT'],
        school: 'KED',
        username: "andrei"
    }, {
        displayName: "Carl Holmberg",
        mail: "carl.holmberg@kunskapsgymnasiet.se",
        roles: ['ADMIN', 'EMPLOYEE'],
        school: 'Norrköping',
        username: "carl.holmberg@kunskapsgymnasiet.se"
    }, {
        displayName: "Carl",
        mail: "carl@kedschools.com",
        roles: ['ADMIN', 'EMPLOYEE', 'STUDENT'],
        school: 'KED',
        username: "carl"
    }, {
        displayName: "david.fahlander@kedschools.com",
        mail: "david.fahlander@kedschools.com",
        roles: ["ADMIN", "EMPLOYEE", "STUDENT"],
        school: "KED",
        username: "david.fahlander@kedschools.com"
    }, {
        displayName: "Teacher 1",
        mail: "teacher1.classroom@kedschools.com",
        roles: ['EMPLOYEE'],
        school: 'KED',
        username: "teacher1.classroom@kedschools.com"
    }, {
        displayName: "Test-Live-Elev1",
        mail: "ubw6757@edu.kunskapsgymnasiet.se",
        roles: ['STUDENT'],
        school: 'Uppsala',
        username: "ubw6757@edu.kunskapsgymnasiet.se"
    }, {
        displayName: "Test-Live-Elev2",
        mail: "ums4302@edu.kunskapsgymnasiet.se",
        roles: ['STUDENT'],
        school: 'Uppsala',
        username: "ums4302@edu.kunskapsgymnasiet.se"
    }, {
        displayName: "Test-Live-Elev3",
        mail: "uhh3460@edu.kunskapsgymnasiet.se",
        roles: ['STUDENT'],
        school: 'Uppsala',
        username: "uhh3460@edu.kunskapsgymnasiet.se"
    }, {
        displayName: "Test-Live-Elev4(fel goals issue)",
        mail: "umt6826@edu.kunskapsskolan.se",
        roles: ["STUDENT"],
        school: "Uppsala",
        username: "umt6826@edu.kunskapsskolan.se"
    }, {
        displayName: "Test-Live-Elev5(future abilities)",
        mail: "ujg3833@edu.kunskapsskolan.se",
        roles: ["STUDENT"],
        school: "Uppsala",
        username: "ujg3833@edu.kunskapsskolan.se"
    }, {
        displayName: "Test-Live-Elev6(future abilities)",
        mail: "ujt1363@edu.kunskapsskolan.se",
        roles: ["STUDENT"],
        school: "Uppsala",
        username: "ujt1363@edu.kunskapsskolan.se"
    }, {
        displayName: "Test-Live-Lärare1",
        mail: "rickard.albertsson@kunskapsgymnasiet.se",
        roles: ['EMPLOYEE'],
        school: 'Uppsala',
        username: "rickard.albertsson@kunskapsgymnasiet.se"
    }, {
        displayName: "EDSTestUserGymnasium",
        mail: "uhh3200@edu.kunskapsgymnasiet.se",
        //mail: "UHH3200@EDU.KUNSKAPSGYMNASIET.SE",
        roles: ["STUDENT"],
        username: "EDSTestUser1",
        school: "KED",
        schoolType: "Gymnasium"
    }, {
        displayName: "vemendo.elev@kedschools.com",
        mail: "vemendo.elev@kedschools.com",
        roles: ["STUDENT"],
        username: "vemendo.elev@kedschools.com",
        school: "KED",
        schoolType: "Gymnasium"
    }, {
        displayName: "Medarbetare Nacka",
        mail: "medarbetare.nacka@kunskapsskolan.se",
        roles: ["EMPLOYEE"],
        username: "medarbetare.nacka/KS",
        school: "Nacka",
        schoolType: "Grundskolor"
    }, {
        displayName: "Medarbetare Globen",
        mail: "medarbetare.globen@kunskapsgymnasiet.se",
        roles: ["EMPLOYEE"],
        username: "medarbetare.globen/KS",
        school: "Globen",
        schoolType: "Gymnasium"
    }, {
        displayName: "Elev Globen",
        mail: "elev.globen@edu.kunskapsgymnasiet.se",
        schoolGrade: 2,
        roles: ['STUDENT'],
        username: "elev.globen",
        school: "Globen",
        schoolType: "Gymnasium"
    }, {
        displayName: "Elev Borås",
        mail: "elev.boras@edu.kunskapsskolan.se",
        schoolGrade: 7,
        roles: ['STUDENT'],
        username: "elev.boras",
        school: "Borås",
        schoolType: "Grundskolor"
    }, {
        displayName: "Elev Borlänge",
        mail: "elev.borlange@edu.kunskapsskolan.se",
        schoolGrade: 9,
        roles: ['STUDENT'],
        username: 'elev.borlange/KS',
        school: 'Borlänge',
        schoolType: "Gymnasium"
    }, {
        displayName: "Roll-lös",
        mail: "none@kunskapsskolan.se",
        username: "none",
        roles: []
    }];


/***/ }),

/***/ "./src/test/set-current-user.ts":
/*!**************************************!*\
  !*** ./src/test/set-current-user.ts ***!
  \**************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var _data_users__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data/users */ "./src/test/data/users.ts");
/* harmony import */ var _utils_query_string__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/query-string */ "./src/utils/query-string.ts");



var username = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_2__["parseQueryString"])(location.search).user;
if (username) {
    var user = _data_users__WEBPACK_IMPORTED_MODULE_1__["users"].find(function (u) { return u.username === username; });
    if (user) {
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser = user;
    }
}
var _a = Object(_utils_query_string__WEBPACK_IMPORTED_MODULE_2__["parseQueryString"])(location.search), role = _a.role, school = _a.school;
if (_globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser) {
    if (role) {
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.roles = role.split(',');
    }
    if (school) {
        _globals_KED_env__WEBPACK_IMPORTED_MODULE_0__["default"].currentUser.school = school;
    }
}


/***/ }),

/***/ "./src/test/test-config.ts":
/*!*********************************!*\
  !*** ./src/test/test-config.ts ***!
  \*********************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");

_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_LOCALE = 'sv';
_globals_KED_cfg__WEBPACK_IMPORTED_MODULE_0__["default"].KED_SCHOOL_LOCALE = 'sv';


/***/ }),

/***/ "./src/test/testpage-sp.tsx":
/*!**********************************!*\
  !*** ./src/test/testpage-sp.tsx ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var _set_current_user__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./set-current-user */ "./src/test/set-current-user.ts");
/* harmony import */ var _global_setters_set_all__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../global-setters/set-all */ "./src/global-setters/set-all.ts");
/* harmony import */ var _test_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./test-config */ "./src/test/test-config.ts");
/* harmony import */ var _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../globals/KED.env */ "./src/globals/KED.env.ts");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _utils_choose_user__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/choose-user */ "./src/test/utils/choose-user.tsx");
/* harmony import */ var _utils_include_css__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils/include-css */ "./src/test/utils/include-css.ts");
/* harmony import */ var _utils_include_optional_css__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/include-optional-css */ "./src/utils/include-optional-css.ts");
/* harmony import */ var _components_course_builder_ks_viewer_editor__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../components/course-builder-ks/viewer-editor */ "./src/components/course-builder-ks/viewer-editor/index.tsx");
/* harmony import */ var _components_utility_components_SetupLanguageIntl__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../components/utility-components/SetupLanguageIntl */ "./src/components/utility-components/SetupLanguageIntl.tsx");
/* harmony import */ var react_intl__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react-intl */ "./node_modules/react-intl/lib/index.es.js");
/* harmony import */ var _components_utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../components/utility-components/LanguageContext */ "./src/components/utility-components/LanguageContext.tsx");

// <Initialization>
 // Emulate server-side script to set current user
 // Client-side initialization

// </Initialization>









Object(_utils_include_optional_css__WEBPACK_IMPORTED_MODULE_8__["includeOptionalCSS"])({
    v1: [
        'css/courseviewer.css',
        'css/dialog.css',
        'css/grid-css-patch.css'
    ],
    includeCSS: _utils_include_css__WEBPACK_IMPORTED_MODULE_7__["includeCSS"],
    version: 6,
    versionFolder: 'css/delta-css/courseviewer'
});
var _App = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](_App, _super);
    function _App(props) {
        var _this = _super.call(this, props) || this;
        if (!location.hash)
            location.hash = "#/";
        return _this;
    }
    _App.prototype.render = function () {
        var intl = this.props.intl;
        return _globals_KED_env__WEBPACK_IMPORTED_MODULE_4__["default"].currentUser ?
            react__WEBPACK_IMPORTED_MODULE_5__["createElement"](_components_utility_components_LanguageContext__WEBPACK_IMPORTED_MODULE_12__["LanguageContext"].Provider, { value: { intl: intl } },
                react__WEBPACK_IMPORTED_MODULE_5__["createElement"](_components_course_builder_ks_viewer_editor__WEBPACK_IMPORTED_MODULE_9__["SubjectPlannerViewerApp"], null)) :
            react__WEBPACK_IMPORTED_MODULE_5__["createElement"](_utils_choose_user__WEBPACK_IMPORTED_MODULE_6__["ChooseUser"], null);
    };
    return _App;
}(react__WEBPACK_IMPORTED_MODULE_5__["Component"]));
var App = Object(_components_utility_components_SetupLanguageIntl__WEBPACK_IMPORTED_MODULE_10__["setupIntl"])(Object(react_intl__WEBPACK_IMPORTED_MODULE_11__["injectIntl"])(_App));
/* harmony default export */ __webpack_exports__["default"] = (App);


/***/ }),

/***/ "./src/test/utils/choose-user.tsx":
/*!****************************************!*\
  !*** ./src/test/utils/choose-user.tsx ***!
  \****************************************/
/*! exports provided: ChooseUser */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ChooseUser", function() { return ChooseUser; });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _data_users__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../data/users */ "./src/test/data/users.ts");


function ChooseUser() {
    var select;
    return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("div", { className: "sv-layout" },
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("h2", null, "V\u00E4lj anv\u00E4ndare"),
        react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("table", { className: "login-table" },
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("thead", null,
                react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("tr", null,
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("th", null, "Namn"),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("th", null, "Roller"),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("th", null, "E-post"),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("th", null, "Skola"))),
            react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("tbody", null, _data_users__WEBPACK_IMPORTED_MODULE_1__["users"].map(function (_a) {
                var username = _a.username, displayName = _a.displayName, mail = _a.mail, school = _a.school, roles = _a.roles;
                return react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("tr", { key: mail, onClick: function () { return location.search = "?user=" + username; } },
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", null, displayName),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", { style: roles.length === 0 ? { fontStyle: 'italic' } : {} }, roles.length === 0 ? "saknar roller" : roles.join(', ')),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", null, mail),
                    react__WEBPACK_IMPORTED_MODULE_0__["createElement"]("td", { style: school ? {} : { fontStyle: 'italic' } }, school || "saknar skola"));
            }))));
}
;


/***/ }),

/***/ "./src/test/utils/include-css.ts":
/*!***************************************!*\
  !*** ./src/test/utils/include-css.ts ***!
  \***************************************/
/*! exports provided: includeCSS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "includeCSS", function() { return includeCSS; });
function resolve(uri) {
    var href = location.protocol + "//" + location.host + location.pathname;
    var pLastSlash = href.lastIndexOf('/');
    return href.substr(0, pLastSlash + 1) + uri;
}
function includeCSS(cssFile) {
    document.write('<link rel="stylesheet" href="' + resolve(cssFile) + '" />');
}


/***/ }),

/***/ "./src/translations/en.json":
/*!**********************************!*\
  !*** ./src/translations/en.json ***!
  \**********************************/
/*! exports provided: addeditsubtask.deleteSubtask, addeditsubtask.editSubtask, addeditsubtask.nameLabel, addeditsubtask.addSubtask, calendar.currentDate, calendar.fullDayEventLocation, calendar.loadCalendarEvents, calendar.loadingCalendar, calendar.weekNumber, common.addDescriptionPlhd, common.cancel, common.changesNotSavedErrorOccured, common.changesNotSavedUnauthorized, common.descriptionLabel, common.errorSavingData, common.linkLabel, common.loading, common.nameLabel, common.save, common.saved, common.saving, common.remove, customTask.addWorkGoalTitle, customTask.enterNamePlhd, learningGoalsLost.overall, task.addSubtask, task.editTask, task.editWorkGoals, task.enterTaskNamePlhd, task.removeDeadline, task.removeThisTask, task.removeWorkGoals, task.setDeadline, task.setDeadlineLabel, task.subTasks, task.targetNameLabel, task.taskNameLabel, task.whatShouldYouDoPlhd, taskList.nextWeekTask, taskList.lastWeekTask, taskList.currentWeekTask, taskList.removeTaskFromWeeklyPlanning, taskList.addTaskToWeeklyPlanning, termplanner.comments, termplanner.course, termplanner.edsGoalGrades, termplanner.englishLanguage, termplanner.finalStep, termplanner.firstTerm, termplanner.hindiLanguage, termplanner.ict, termplanner.loadingTermplanner, termplanner.maths, termplanner.modernLanguage, termplanner.noFinalStepAvailable, termplanner.secondTerm, termplanner.termPlanning, termplanner.weekNumber, termplanner.chartsBoxTitle, termplanner.yoga, tutorNoteDialog.weekComment, test.chooseComponentLabel, test.pageDescription, userTasks.addLearningGoal, userTasks.deleteLearningGoal, userTasks.goals, weekNotebook.title, weekplanner.addLearningGoal, weekplanner.addLearningGoalTitle, weekplanner.confirmRemoveLearningObjectives, weekplanner.copyPreviousWeekTaks, weekplanner.emptyLearningGoalErr, weekplanner.evaluation, weekplanner.evaluationDescription, weekplanner.learningGoal, weekplanner.logBook, weekplanner.nameCannotBeEmpty, weekplanner.nameMustNotBeEmpty, weekplanner.strategy, weekplanner.strategyAndEvaluation, weekplanner.strategyDescription, weekplanner.weekNumber, wysiwyg.bold, wysiwyg.code, wysiwyg.heading1, wysiwyg.heading2, wysiwyg.heading3, wysiwyg.image, wysiwyg.imagePromptMsg, wysiwyg.italic, wysiwyg.line, wysiwyg.link, wysiwyg.olist, wysiwyg.paragraph, wysiwyg.quote, wysiwyg.strikethrough, wysiwyg.ulist, wysiwyg.underline, default */
/***/ (function(module) {

module.exports = {"addeditsubtask.deleteSubtask":"Delete subtask","addeditsubtask.editSubtask":"Edit subtask","addeditsubtask.nameLabel":"Name of subtask","addeditsubtask.addSubtask":"Add sub-task","calendar.currentDate":"Week {week}, {year}","calendar.fullDayEventLocation":"Place: {location}","calendar.loadCalendarEvents":"Load calendar events...","calendar.loadingCalendar":"Loading calendars... (listing...)","calendar.weekNumber":"W{weekNumber}","common.addDescriptionPlhd":"Add description...","common.cancel":"Cancel","common.changesNotSavedErrorOccured":"An error occured while saving data. Your changes were not saved.","common.changesNotSavedUnauthorized":"The changes were not saved due to insufficient authority","common.descriptionLabel":"Description","common.errorSavingData":"An error occured while saving data.","common.linkLabel":"Link","common.loading":"Loading...","common.nameLabel":"Name","common.save":" Save","common.saved":" Saved","common.saving":"Saving","common.remove":"Delete","customTask.addWorkGoalTitle":"Add own working goal","customTask.enterNamePlhd":"Enter Name...","learningGoalsLost.overall":"Overall","task.addSubtask":"Add subtask","task.editTask":"Edit task","task.editWorkGoals":"Edit working goal","task.enterTaskNamePlhd":"Enter the name of task...","task.removeDeadline":"Delete deadline","task.removeThisTask":"Delete this task","task.removeWorkGoals":"Delete working goal","task.setDeadline":"Set deadline","task.setDeadlineLabel":"Set deadline...","task.subTasks":"Subtasks","task.targetNameLabel":"Name of working goal","task.taskNameLabel":"Name of task","task.whatShouldYouDoPlhd":"What should you do?","taskList.nextWeekTask":"for next week (w{week})","taskList.lastWeekTask":"for last week (w{week})","taskList.currentWeekTask":"for week {week}","taskList.removeTaskFromWeeklyPlanning":"Delete task from your weekly planning {week}","taskList.addTaskToWeeklyPlanning":"Add task to your weekly planning {week}","termplanner.comments":"Comments","termplanner.course":"Theme course","termplanner.edsGoalGrades":"Intermediate goals","termplanner.englishLanguage":"Eng","termplanner.finalStep":"Final Step","termplanner.firstTerm":"FT {year}","termplanner.hindiLanguage":"Hindi","termplanner.ict":"ICT","termplanner.loadingTermplanner":"Loading Termplanner","termplanner.maths":"Maths","termplanner.modernLanguage":"MFL","termplanner.noFinalStepAvailable":"No final step available","termplanner.secondTerm":"ST {year}","termplanner.termPlanning":"Term planner","termplanner.weekNumber":"Week","termplanner.chartsBoxTitle":"Progress Charts","termplanner.yoga":"Yoga","tutorNoteDialog.weekComment":"Note for week {weekNumber}","test.chooseComponentLabel":"Component","test.pageDescription":"Test page for the components on the starting page","userTasks.addLearningGoal":"Own working goal","userTasks.deleteLearningGoal":"Delete learning goal and its tasks","userTasks.goals":"Own learning goal","weekNotebook.title":"Notepad","weekplanner.addLearningGoal":"Goal:","weekplanner.addLearningGoalTitle":"Add own learning goal","weekplanner.confirmRemoveLearningObjectives":"Delete learning goal and {learningGoalsNumber} tasks?","weekplanner.copyPreviousWeekTaks":"Copy from previous week","weekplanner.emptyLearningGoalErr":"The learning goal cannot be empty","weekplanner.evaluation":"Evaluation","weekplanner.evaluationDescription":"Reflection on your work effort and your chosen strategies during the week. Evaluate in relation to your goals.","weekplanner.learningGoal":"Own learning goal","weekplanner.logBook":"Logbook","weekplanner.nameCannotBeEmpty":"Name cannot be empty","weekplanner.nameMustNotBeEmpty":"Name must not be empty","weekplanner.strategy":"Strategy","weekplanner.strategyAndEvaluation":"Strategy & Evaluation","weekplanner.strategyDescription":"What I should do to learn","weekplanner.weekNumber":"Week {weekNumber}","wysiwyg.bold":"Bold","wysiwyg.code":"Code","wysiwyg.heading1":"Heading 1","wysiwyg.heading2":"Heading 2","wysiwyg.heading3":"Heading 3","wysiwyg.image":"Insert image","wysiwyg.imagePromptMsg":"Enter the URL of the image","wysiwyg.italic":"Italics","wysiwyg.line":"Horizontal line","wysiwyg.link":"Insert link","wysiwyg.olist":"Ordered list","wysiwyg.paragraph":"Paragraph","wysiwyg.quote":"Quote","wysiwyg.strikethrough":"Strikethrough","wysiwyg.ulist":"Bullet list","wysiwyg.underline":"Underline"};

/***/ }),

/***/ "./src/translations/sv.json":
/*!**********************************!*\
  !*** ./src/translations/sv.json ***!
  \**********************************/
/*! exports provided: addeditsubtask.addSubtask, addeditsubtask.deleteSubtask, addeditsubtask.editSubtask, addeditsubtask.nameLabel, calendar.currentDate, calendar.fullDayEventLocation, calendar.loadCalendarEvents, calendar.loadingCalendar, calendar.weekNumber, common.addDescriptionPlhd, common.cancel, common.changesNotSavedErrorOccured, common.changesNotSavedUnauthorized, common.descriptionLabel, common.errorSavingData, common.linkLabel, common.loading, common.nameLabel, common.save, common.saved, common.saving, common.remove, customTask.addWorkGoalTitle, customTask.enterNamePlhd, learningGoalsLost.overall, task.addSubtask, task.editTask, task.editWorkGoals, task.enterTaskNamePlhd, task.removeDeadline, task.removeThisTask, task.removeWorkGoals, task.setDeadline, task.setDeadlineLabel, task.subTasks, task.targetNameLabel, task.taskNameLabel, task.whatShouldYouDoPlhd, taskList.nextWeekTask, taskList.lastWeekTask, taskList.currentWeekTask, taskList.removeTaskFromWeeklyPlanning, taskList.addTaskToWeeklyPlanning, termplanner.comments, termplanner.course, termplanner.edsGoalGrades, termplanner.englishLanguage, termplanner.swedishLanguage, termplanner.finalStep, termplanner.firstTerm, termplanner.hindiLanguage, termplanner.loadingTermplanner, termplanner.modernLanguageFullname, termplanner.mathsFullname, termplanner.noFinalStepAvailable, termplanner.swedishLanguageFullName, termplanner.englishLanguageFullName, termplanner.maths, termplanner.modernLanguage, termplanner.secondTerm, termplanner.termPlanning, termplanner.weekNumber, termplanner.chartsBoxTitle, tutorNoteDialog.weekComment, test.chooseComponentLabel, test.pageDescription, userTasks.addLearningGoal, userTasks.deleteLearningGoal, userTasks.goals, weekNotebook.title, weekplanner.addLearningGoal, weekplanner.addLearningGoalTitle, weekplanner.confirmRemoveLearningObjectives, weekplanner.copyPreviousWeekTaks, weekplanner.emptyLearningGoalErr, weekplanner.evaluation, weekplanner.evaluationDescription, weekplanner.learningGoal, weekplanner.logBook, weekplanner.nameCannotBeEmpty, weekplanner.nameMustNotBeEmpty, weekplanner.strategy, weekplanner.strategyAndEvaluation, weekplanner.strategyDescription, weekplanner.weekNumber, wysiwyg.bold, wysiwyg.code, wysiwyg.heading1, wysiwyg.heading2, wysiwyg.heading3, wysiwyg.image, wysiwyg.imagePromptMsg, wysiwyg.italic, wysiwyg.line, wysiwyg.link, wysiwyg.olist, wysiwyg.paragraph, wysiwyg.quote, wysiwyg.strikethrough, wysiwyg.ulist, wysiwyg.underline, default */
/***/ (function(module) {

module.exports = {"addeditsubtask.addSubtask":"Lägg till underuppgift","addeditsubtask.deleteSubtask":"Ta bort underuppgift","addeditsubtask.editSubtask":"Redigera underuppgift","addeditsubtask.nameLabel":"Underuppgiftens namn","calendar.currentDate":"Vecka {week}, {year}","calendar.fullDayEventLocation":"Plats: {location}","calendar.loadCalendarEvents":"Load calendar events...","calendar.loadingCalendar":"Loading calendars... (listing...)","calendar.weekNumber":"V{weekNumber}","common.addDescriptionPlhd":"Lägg till en beskrivning...","common.cancel":"Avbryt","common.changesNotSavedErrorOccured":"För tillfället problem att spara data. Dina ändringar sparades inte.","common.changesNotSavedUnauthorized":"Ändringarna sparades inte p.g.a. otillräcklig behörighet.","common.descriptionLabel":"Beskrivning","common.errorSavingData":"Kunde inte spara.","common.linkLabel":"Länk","common.loading":"Laddar...","common.nameLabel":"Namn","common.save":" Spara","common.saved":" Sparad","common.saving":"Sparar...","common.remove":"Ta bort","customTask.addWorkGoalTitle":"Lägg till eget arbetsmål","customTask.enterNamePlhd":"Ange namn...","learningGoalsLost.overall":"Övergripande","task.addSubtask":"Lägg till underuppgift","task.editTask":"Redigera uppgift","task.editWorkGoals":"Redigera arbetsmål","task.enterTaskNamePlhd":"Ange uppgiftens namn...","task.removeDeadline":"Ta bort deadline","task.removeThisTask":"Ta bort den här uppgiften","task.removeWorkGoals":"Ta bort arbetsmål","task.setDeadline":"Set deadline","task.setDeadlineLabel":"Ange deadline...","task.subTasks":"Underuppgifter","task.targetNameLabel":"Arbetsmålets namn","task.taskNameLabel":"Uppgiftens namn","task.whatShouldYouDoPlhd":"Vad ska du göra?","taskList.nextWeekTask":"för nästa vecka (v{week})","taskList.lastWeekTask":"för förra veckan (v{week})","taskList.currentWeekTask":"för vecka {week}","taskList.removeTaskFromWeeklyPlanning":"Ta bort uppgiften från egen veckoplanering {week}","taskList.addTaskToWeeklyPlanning":"Lägg till uppgiften i egen veckoplanering {week}","termplanner.comments":"Kommentar","termplanner.course":"Kurs","termplanner.edsGoalGrades":"Terminsmål","termplanner.englishLanguage":"Eng","termplanner.swedishLanguage":"Sv/SvA","termplanner.finalStep":"Slutsteg","termplanner.firstTerm":"HT {year}","termplanner.hindiLanguage":"","termplanner.loadingTermplanner":"V.g. vänta medan terminsplaner laddas...","termplanner.modernLanguageFullname":"M.språk","termplanner.mathsFullname":"Matematik","termplanner.noFinalStepAvailable":"Inget slutsteg tillgängligt","termplanner.swedishLanguageFullName":"Svenska","termplanner.englishLanguageFullName":"Engelska","termplanner.maths":"Ma","termplanner.modernLanguage":"M.spr","termplanner.secondTerm":"VT {year}","termplanner.termPlanning":"Terminsplanering","termplanner.weekNumber":"Vecka","termplanner.chartsBoxTitle":"Framsteg diagram","tutorNoteDialog.weekComment":"Kommentar för vecka {weekNumber}","test.chooseComponentLabel":"Komponent","test.pageDescription":"Testsida för komponenter till nya startsidan","userTasks.addLearningGoal":"Eget arbetsmål","userTasks.deleteLearningGoal":"Ta bort lärandemålet och dess uppgifter","userTasks.goals":"Egna lärandemål","weekNotebook.title":"Anteckningar","weekplanner.addLearningGoal":"Mål:","weekplanner.addLearningGoalTitle":"Lägg till eget lärandemål","weekplanner.confirmRemoveLearningObjectives":"Ta bort lärandemål samt {learningGoalsNumber} uppgifter?","weekplanner.copyPreviousWeekTaks":"Kopiera ej klara från föregående vecka","weekplanner.emptyLearningGoalErr":"Lärandemålet kan inte vara tomt","weekplanner.evaluation":"Utvärdering","weekplanner.evaluationDescription":"Reflektion kring din arbetsinsats och dina valda strategier under veckan.Utvärdera i förhållande till dina mål.","weekplanner.learningGoal":"Eget lärandemål","weekplanner.logBook":"Loggbok","weekplanner.nameCannotBeEmpty":"Namnet kan inte vara tomt","weekplanner.nameMustNotBeEmpty":"Namnet får inte vara tomt","weekplanner.strategy":"Strategi","weekplanner.strategyAndEvaluation":"Strategi & Utvärdering","weekplanner.strategyDescription":"Hur jag ska göra för att lära mig.","weekplanner.weekNumber":"Vecka {weekNumber}","wysiwyg.bold":"Fetstil","wysiwyg.code":"Programkod","wysiwyg.heading1":"Rubrik 1","wysiwyg.heading2":"Rubrik 2","wysiwyg.heading3":"Rubrik 3","wysiwyg.image":"Infoga bild","wysiwyg.imagePromptMsg":"Ange bildens URL","wysiwyg.italic":"Kursiv","wysiwyg.line":"Vågrät linje","wysiwyg.link":"Infoga länk","wysiwyg.olist":"Ordnad lista","wysiwyg.paragraph":"Paragraf","wysiwyg.quote":"Citat","wysiwyg.strikethrough":"Struken","wysiwyg.ulist":"Punktlista","wysiwyg.underline":"Understruken"};

/***/ }),

/***/ "./src/utils/error-success-feedback.tsx":
/*!**********************************************!*\
  !*** ./src/utils/error-success-feedback.tsx ***!
  \**********************************************/
/*! exports provided: ErrorSuccessFeedback */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ErrorSuccessFeedback", function() { return ErrorSuccessFeedback; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals/db */ "./src/globals/db.ts");
/* harmony import */ var _components_course_builder_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/course-builder/sub-components/remove-item */ "./src/components/course-builder/sub-components/remove-item.tsx");




var ErrorSuccessFeedback = /** @class */ (function (_super) {
    tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"](ErrorSuccessFeedback, _super);
    function ErrorSuccessFeedback(props) {
        var _this = _super.call(this, props) || this;
        _this.state = {
            errors: [],
            infos: []
        };
        _this._unhandledRejection = _this._unhandledRejection.bind(_this);
        _this._error = _this._error.bind(_this);
        _this._customError = _this._customError.bind(_this);
        _this._onInfo = _this._onInfo.bind(_this);
        _this._dbWriterError = _this._dbWriterError.bind(_this);
        _this._dbWriterStateChanged = _this._dbWriterStateChanged.bind(_this);
        return _this;
    }
    ErrorSuccessFeedback.prototype._addError = function (message, details, retryable) {
        var _this = this;
        //console.error(message, {retryable: !!retryable, details});
        this.setState(function (_a) {
            var errors = _a.errors;
            if (errors.some(function (e) { return e.message === message; }))
                return { errors: errors };
            if (errors.length > 2)
                errors = errors.slice(1);
            return {
                errors: errors.concat([{ message: message, details: details, retryable: retryable }])
            };
        });
        // Remove non-retryable errors after 30 seconds:
        if (!retryable)
            setTimeout(function () {
                _this.setState(function (_a) {
                    var errors = _a.errors;
                    return ({
                        errors: errors.filter(function (e) { return e.message !== message; })
                    });
                });
            }, 30000);
    };
    ErrorSuccessFeedback.prototype._addInfo = function (message) {
        var _this = this;
        if (message === "") {
            // Turn off current info messages
            this.setState({ infos: [] });
            return;
        }
        this.setState(function (_a) {
            var infos = _a.infos;
            if (infos.some(function (info) { return info === message; }))
                return { infos: infos };
            if (infos.length > 1)
                infos = infos.slice(1);
            return {
                infos: [message] // was: infos.concat(message). But it sucks!
            };
        });
        // Remove info message after 10 seconds:
        setTimeout(function () {
            _this.setState(function (_a) {
                var infos = _a.infos;
                return ({
                    infos: infos.filter(function (msg) { return msg !== message; })
                });
            });
        }, 10000);
    };
    ErrorSuccessFeedback.prototype._dbWriterError = function (error, retryable) {
        this._addError("Det g\u00E5r inte att spara till servern", error, retryable);
    };
    ErrorSuccessFeedback.prototype._dbWriterStateChanged = function (_a) {
        var isEdited = _a.isEdited, isSaving = _a.isSaving;
        if (!isEdited) {
            // If isEdited is false, a successful write must have happened, and
            // there cannot be any retryable error anymore
            this.setState(function (_a) {
                var errors = _a.errors;
                errors = errors.filter(function (e) { return !e.retryable; });
                return { errors: errors };
            });
        }
        this.setState({
            dbWriterIsEdited: isEdited,
            dbWriterIsSaving: isSaving
        });
    };
    ErrorSuccessFeedback.prototype.componentDidMount = function () {
        window.addEventListener('unhandledrejection', this._unhandledRejection);
        window.addEventListener('error', this._error);
        window.addEventListener('customerror', this._customError);
        window.addEventListener('info', this._onInfo);
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].writer.onError(this._dbWriterError);
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].writer.onStateChange(this._dbWriterStateChanged);
    };
    ErrorSuccessFeedback.prototype.componentWillUnmount = function () {
        window.removeEventListener('unhandledrejection', this._unhandledRejection);
        window.removeEventListener('error', this._error);
        window.removeEventListener('customerror', this._customError);
        window.removeEventListener('info', this._onInfo);
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].writer.off(this._dbWriterError);
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].writer.off(this._dbWriterStateChanged);
    };
    ErrorSuccessFeedback.prototype._unhandledRejection = function (ev) {
        this._addError("Ett ok\u00E4nt fel intr\u00E4ffade...", ev.reason);
    };
    ErrorSuccessFeedback.prototype._error = function (ev) {
        this._addError(ev.error ? ev.error.message : "Ett ok\u00E4nt fel intr\u00E4ffade...", ev.error);
    };
    ErrorSuccessFeedback.prototype._customError = function (ev) {
        this._addError(ev.detail);
    };
    ErrorSuccessFeedback.prototype._onInfo = function (ev) {
        this._addInfo(ev.detail);
    };
    ErrorSuccessFeedback.prototype.render = function () {
        var _this = this;
        var _a = this.state, errors = _a.errors, infos = _a.infos, dbWriterIsSaving = _a.dbWriterIsSaving;
        return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { className: "error-success-feedback", style: {
                position: "fixed",
                left: 0,
                top: 0,
                width: "100%",
                pointerEvents: 'none'
            } },
            react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { display: 'table', margin: "0 auto" } },
                errors.filter(function (e) { return !e.retryable || !dbWriterIsSaving; })
                    .map(function (_a) {
                    var message = _a.message, details = _a.details, retryable = _a.retryable, showDetails = _a.showDetails;
                    return (react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { key: message, className: "error" },
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { float: 'left' } }, message),
                        react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { pointerEvents: 'auto' } },
                            react__WEBPACK_IMPORTED_MODULE_1__["createElement"](_components_course_builder_sub_components_remove_item__WEBPACK_IMPORTED_MODULE_3__["RemoveItem"], { onClick: function () { return _this.removeError(message); } })),
                        details || retryable ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("div", { style: { pointerEvents: 'auto' } },
                            details ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null,
                                react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn", onClick: function () { return _this.toggleDetails(message); } }, showDetails ? "Dölj detailer" : "Visa detailjer"),
                                "\u00A0") : undefined,
                            showDetails ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", null, '' + details) : react__WEBPACK_IMPORTED_MODULE_1__["createElement"](react__WEBPACK_IMPORTED_MODULE_1__["Fragment"], null, "\u00A0"),
                            retryable ? react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("a", { className: "btn", onClick: function () { return _this.retrySave(); } }, "F\u00F6rs\u00F6k spara nu") : undefined) : undefined));
                }),
                infos.map(function (message) {
                    return react__WEBPACK_IMPORTED_MODULE_1__["createElement"]("p", { key: message, className: "info" }, message);
                })));
    };
    ErrorSuccessFeedback.prototype.removeError = function (message) {
        this.setState(function (_a) {
            var errors = _a.errors;
            return ({
                errors: errors.filter(function (e) { return e.message !== message; })
            });
        });
    };
    ErrorSuccessFeedback.prototype.retrySave = function () {
        _globals_db__WEBPACK_IMPORTED_MODULE_2__["db"].writer.retrySave();
    };
    ErrorSuccessFeedback.prototype.toggleDetails = function (message) {
        this.setState(function (_a) {
            var errors = _a.errors;
            return ({ errors: errors.map(function (error) { return error.message === message ? tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, error, { showDetails: !error.showDetails }) :
                    error; })
            });
        });
    };
    return ErrorSuccessFeedback;
}(react__WEBPACK_IMPORTED_MODULE_1__["Component"]));



/***/ }),

/***/ "./src/utils/include-optional-css.ts":
/*!*******************************************!*\
  !*** ./src/utils/include-optional-css.ts ***!
  \*******************************************/
/*! exports provided: includeOptionalCSS */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "includeOptionalCSS", function() { return includeOptionalCSS; });
function includeOptionalCSS(_a) {
    var v1 = _a.v1, versionFolder = _a.versionFolder, version = _a.version, includeCSS = _a.includeCSS, NOCSS = _a.NOCSS;
    if (!NOCSS) {
        if (v1)
            v1.forEach(function (cssFile) { return includeCSS(cssFile); });
    }
    var cssVer = parseInt(NOCSS);
    if (isNaN(cssVer))
        cssVer = 1;
    for (var ver = cssVer + 1; ver <= version; ++ver) {
        includeCSS(versionFolder + "/v" + ver + ".css");
    }
}


/***/ }),

/***/ "./src/utils/keep-session-alive.ts":
/*!*****************************************!*\
  !*** ./src/utils/keep-session-alive.ts ***!
  \*****************************************/
/*! exports provided: keepSessionAlive */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "keepSessionAlive", function() { return keepSessionAlive; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ "jquery");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../globals/KED.cfg */ "./src/globals/KED.cfg.ts");



var HEARTBEAT_INTERVAL = 5 * 60 * 1000; // 5 minutes.
var HEARTBEAT_URL = _globals_KED_cfg__WEBPACK_IMPORTED_MODULE_2__["cfg"].KED_KEEP_ALIVE_URL;
var lastActivity = Date.now();
function keepSessionAlive() {
    setInterval(onTimeout, HEARTBEAT_INTERVAL);
    setTimeout(function () { return jquery__WEBPACK_IMPORTED_MODULE_1___default()('body')
        .mousemove(onUserActive)
        .keypress(onUserActive)
        .scroll(onUserActive); }, 100);
}
function onUserActive() {
    lastActivity = Date.now();
}
function onTimeout() {
    var inactivityTime = Date.now() - lastActivity;
    if (inactivityTime < HEARTBEAT_INTERVAL) {
        heartbeat();
    }
}
function heartbeat() {
    return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
        var res, err_1;
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
            switch (_a.label) {
                case 0:
                    console.log("Sending heartbeat request to " + HEARTBEAT_URL);
                    _a.label = 1;
                case 1:
                    _a.trys.push([1, 3, , 4]);
                    return [4 /*yield*/, fetch(HEARTBEAT_URL, {
                            cache: 'no-cache',
                            credentials: 'same-origin'
                        })];
                case 2:
                    res = _a.sent();
                    console.log("Response from " + HEARTBEAT_URL + ": " + res.status + " " + res.statusText);
                    return [3 /*break*/, 4];
                case 3:
                    err_1 = _a.sent();
                    console.warn("Request to " + HEARTBEAT_URL + " failed: " + err_1);
                    return [3 /*break*/, 4];
                case 4: return [2 /*return*/];
            }
        });
    });
}


/***/ }),

/***/ "./src/utils/make-suspense-api.ts":
/*!****************************************!*\
  !*** ./src/utils/make-suspense-api.ts ***!
  \****************************************/
/*! exports provided: makeSuspenseApi */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "makeSuspenseApi", function() { return makeSuspenseApi; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var DEFAULT_CACHE_EXPIRATION = 30 * 60 * 1000; // 30 minutes.
var defaultOptions = {
    isApiMethod: function (f) { return typeof f === 'function'; },
    cacheExpiration: DEFAULT_CACHE_EXPIRATION
};
function makeSuspenseApi(api, options) {
    if (options === void 0) { options = defaultOptions; }
    options = tslib__WEBPACK_IMPORTED_MODULE_0__["__assign"]({}, defaultOptions, options);
    var isApiMethod = options.isApiMethod, cacheExpiration = options.cacheExpiration;
    var rv = Object.create(api);
    var cache = {};
    // Walk the instance + prototype chain to generate suspense version of each promise returning method
    for (var proto = api; proto && proto !== Object.prototype; proto = Object.getPrototypeOf(proto)) {
        suspendify(proto);
    }
    function suspendify(proto) {
        Object.keys(proto).forEach(function (prop) {
            if (!rv.hasOwnProperty(prop) && isApiMethod(prop)) {
                rv[prop] = function () {
                    var args = [];
                    for (var _i = 0; _i < arguments.length; _i++) {
                        args[_i] = arguments[_i];
                    }
                    var key = JSON.stringify(tslib__WEBPACK_IMPORTED_MODULE_0__["__spread"]([prop], args));
                    var cachedEntry = cache[key];
                    if (cachedEntry !== undefined) {
                        if (cachedEntry.promise)
                            throw cachedEntry.promise;
                        if (cachedEntry.error)
                            throw cachedEntry.error;
                        if (cachedEntry.timeout > Date.now()) {
                            return cachedEntry.value;
                        }
                    }
                    try {
                        var promise = proto[prop].apply(api, args).then(function (result) {
                            cache[key] = { timeout: Date.now() + cacheExpiration, value: result };
                        }).catch(function (error) {
                            cache[key] = { timeout: Date.now() + cacheExpiration, error: error };
                        });
                        cache[key] = { timeout: Date.now() + cacheExpiration, promise: promise };
                        throw promise;
                    }
                    catch (error) {
                        if (error.then)
                            throw error;
                        cache[key] = { timeout: Date.now() + cacheExpiration, error: error };
                    }
                };
            }
        });
    }
    return rv;
}


/***/ }),

/***/ "./src/utils/pending-job.ts":
/*!**********************************!*\
  !*** ./src/utils/pending-job.ts ***!
  \**********************************/
/*! exports provided: PendingJob */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PendingJob", function() { return PendingJob; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

var PendingJob = /** @class */ (function () {
    function PendingJob(callback) {
        this.timeoutId = null;
        this.cancelled = false;
        this.pending = false;
        this.isJobExecuting = false;
        this.jobCallback = callback;
    }
    PendingJob.prototype.triggerChange = function (throttle) {
        var _this = this;
        if (this.cancelled)
            return;
        this.pending = true;
        if (this.timeoutId !== null)
            clearTimeout(this.timeoutId);
        this.timeoutId = setTimeout(function () { return _this.launchJob(); }, throttle);
    };
    PendingJob.prototype.stop = function () {
        if (this.timeoutId !== null)
            clearTimeout(this.timeoutId);
        this.timeoutId = null;
        this.cancelled = true;
    };
    PendingJob.prototype.launchJob = function () {
        return tslib__WEBPACK_IMPORTED_MODULE_0__["__awaiter"](this, void 0, void 0, function () {
            return tslib__WEBPACK_IMPORTED_MODULE_0__["__generator"](this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (this.cancelled)
                            return [2 /*return*/];
                        if (!this.pending)
                            return [2 /*return*/];
                        if (this.isJobExecuting)
                            return [2 /*return*/];
                        this.timeoutId = null;
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, , 3, 4]);
                        this.isJobExecuting = true;
                        this.pending = false;
                        return [4 /*yield*/, this.jobCallback()];
                    case 2:
                        _a.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        this.isJobExecuting = false;
                        return [7 /*endfinally*/];
                    case 4:
                        if (!this.pending) return [3 /*break*/, 6];
                        return [4 /*yield*/, this.launchJob()];
                    case 5:
                        _a.sent();
                        _a.label = 6;
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    return PendingJob;
}());



/***/ }),

/***/ "./src/utils/query-string.ts":
/*!***********************************!*\
  !*** ./src/utils/query-string.ts ***!
  \***********************************/
/*! exports provided: parseQueryString, generateQueryString, parseHashQueryString, generateHashQueryString, splitUrlAndQuery */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseQueryString", function() { return parseQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateQueryString", function() { return generateQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseHashQueryString", function() { return parseHashQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "generateHashQueryString", function() { return generateHashQueryString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "splitUrlAndQuery", function() { return splitUrlAndQuery; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

function parseQueryString(locationSearch, options) {
    var toLower = (options || {}).toLower;
    var result = {};
    if (locationSearch && locationSearch.length > 1)
        locationSearch.substr(1)
            .split('&')
            .map(function (part) { return part.split('=').map(function (s) { return decodeURIComponent(s.trim()); }); })
            .forEach(function (_a) {
            var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a, 2), key = _b[0], value = _b[1];
            return result[toLower ? key.toLowerCase() : key] = value;
        });
    return result;
}
function encodeParams(params) {
    return Object.keys(params).filter(function (key) { return params[key] !== undefined; }).map(function (key) { return encodeURIComponent(key) + "=" + encodeURIComponent(params[key]); }).join('&');
}
function generateQueryString(params) {
    return "?" + encodeParams(params);
}
function parseHashQueryString(locationHash, options) {
    return parseQueryString(locationHash, options);
}
function generateHashQueryString(params) {
    return "#" + encodeParams(params);
}
function splitUrlAndQuery(urlWithPossibleQuery) {
    var pQuery = urlWithPossibleQuery.indexOf('?');
    return pQuery >= 0 ?
        [urlWithPossibleQuery.substr(0, pQuery), urlWithPossibleQuery.substr(pQuery)] :
        [urlWithPossibleQuery, ""];
}


/***/ }),

/***/ "./src/utils/school-moment.ts":
/*!************************************!*\
  !*** ./src/utils/school-moment.ts ***!
  \************************************/
/*! exports provided: getFirstAndLastWeekOfTerm, getTermStarEndDate, getSchoolMoment, addYear, nextAcademicYear, prevAcademicYear */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFirstAndLastWeekOfTerm", function() { return getFirstAndLastWeekOfTerm; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTermStarEndDate", function() { return getTermStarEndDate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSchoolMoment", function() { return getSchoolMoment; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addYear", function() { return addYear; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nextAcademicYear", function() { return nextAcademicYear; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "prevAcademicYear", function() { return prevAcademicYear; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);


function getFirstAndLastWeekOfTerm(term) {
    return term === 'AT' ?
        [32, 51] :
        [1, 25];
}
//Not used anymore
// export function getTermStartAndEnd(now: moment.Moment) : moment.Moment[] {
//     return now.month() >= 6 ? // 6 = July in JS Dates and in moment as well!
//     [moment(new Date(now.year(), 7, 1)), moment(new Date(now.year(), 11, 31))] : // aug1 - dec31
//     [moment(new Date(now.year(), 0, 1)), moment(new Date(now.year(), 6, 31))]; // jan1 - july31
// }
function getTermStarEndDate(date, isFirstTerm) {
    var addYear = date.getMonth() >= 7;
    var termYear = null;
    if (addYear) {
        termYear = isFirstTerm ? date.getFullYear() : date.getFullYear() + 1;
    }
    else {
        termYear = isFirstTerm ? date.getFullYear() - 1 : date.getFullYear();
    }
    var termYearMoment = moment__WEBPACK_IMPORTED_MODULE_1___default()(termYear.toString(), "YYYY");
    if (termYearMoment.week() != 1) {
        termYearMoment = termYearMoment.clone().add(1, 'week');
    }
    return isFirstTerm ? [moment__WEBPACK_IMPORTED_MODULE_1___default()(termYearMoment.clone()).week(32).startOf('week'), moment__WEBPACK_IMPORTED_MODULE_1___default()(termYearMoment.clone()).week(51).endOf('week')] :
        [moment__WEBPACK_IMPORTED_MODULE_1___default()(termYearMoment.clone()), moment__WEBPACK_IMPORTED_MODULE_1___default()(termYearMoment.clone()).week(25).endOf('week')];
}
function getSchoolMoment(m) {
    var thisYear = m.year();
    var isAutumn = m.month() >= 6; // determine 
    var _a = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](isAutumn ?
        [thisYear, thisYear + 1] :
        [thisYear - 1, thisYear], 2), autumnYear = _a[0], springYear = _a[1];
    var academicYear = '' + autumnYear + '/' + springYear;
    var term = isAutumn ? 'AT' : 'ST';
    var week = m.week();
    return { academicYear: academicYear, term: term, week: week };
}
function addYear(aYear, numYearsToAdd) {
    return aYear.split('/')
        .map(function (yearStr) { return parseInt(yearStr) + numYearsToAdd; })
        .map(function (year) { return '' + year; })
        .join('/');
}
function nextAcademicYear(aYear) {
    return addYear(aYear, 1);
}
function prevAcademicYear(aYear) {
    return addYear(aYear, -1);
}


/***/ }),

/***/ "./src/utils/school-term.ts":
/*!**********************************!*\
  !*** ./src/utils/school-term.ts ***!
  \**********************************/
/*! exports provided: SchoolTerm */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SchoolTerm", function() { return SchoolTerm; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _school_moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./school-moment */ "./src/utils/school-moment.ts");


function isSchoolMoment(obj) {
    return 'academicYear' in obj;
}
var SchoolTerm = /** @class */ (function () {
    function SchoolTerm(dateOrSchoolMoment) {
        var schoolMoment = isSchoolMoment(dateOrSchoolMoment) ?
            dateOrSchoolMoment : Object(_school_moment__WEBPACK_IMPORTED_MODULE_1__["getSchoolMoment"])(moment__WEBPACK_IMPORTED_MODULE_0___default()(dateOrSchoolMoment));
        this.academicYear = schoolMoment.academicYear;
        this.term = schoolMoment.term;
    }
    Object.defineProperty(SchoolTerm.prototype, "year", {
        get: function () {
            return parseInt(this.academicYear
                .split('/')[this.term === 'AT' ? 0 : 1]);
        },
        enumerable: true,
        configurable: true
    });
    SchoolTerm.prototype.nextTerm = function () {
        return new SchoolTerm(this.term === 'AT' ?
            {
                term: 'ST',
                academicYear: this.academicYear
            } :
            {
                term: 'AT',
                academicYear: Object(_school_moment__WEBPACK_IMPORTED_MODULE_1__["addYear"])(this.academicYear, 1)
            });
    };
    SchoolTerm.prototype.prevTerm = function () {
        return new SchoolTerm(this.term === 'AT' ?
            {
                term: 'ST',
                academicYear: Object(_school_moment__WEBPACK_IMPORTED_MODULE_1__["addYear"])(this.academicYear, -1)
            } :
            {
                term: 'AT',
                academicYear: this.academicYear
            });
    };
    SchoolTerm.prototype.toLocaleString = function (intl, shortYear) {
        var year = this.term === 'AT' ?
            this.academicYear.split('/')[0] :
            this.academicYear.split('/')[1];
        if (shortYear)
            year = year.substr(2);
        return this.term === 'AT' ? intl.formatMessage({ id: 'termplanner.secondTerm', defaultMessage: 'HT {year}' }, { year: year }) :
            intl.formatMessage({ id: 'termplanner.firstTerm', defaultMessage: 'VT {year}' }, { year: year });
    };
    return SchoolTerm;
}());



/***/ }),

/***/ "./src/utils/utils.ts":
/*!****************************!*\
  !*** ./src/utils/utils.ts ***!
  \****************************/
/*! exports provided: capitalizeFirst, extend, clone, flatten, compareProp, compareProps, L, TC, dateTimeReviver, showInfo, showError, maxLength, arrayToLookup, arrayToMap, cherryPickProps, distinct, shallowEquals */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "capitalizeFirst", function() { return capitalizeFirst; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "extend", function() { return extend; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clone", function() { return clone; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "flatten", function() { return flatten; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "compareProp", function() { return compareProp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "compareProps", function() { return compareProps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "L", function() { return L; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TC", function() { return TC; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dateTimeReviver", function() { return dateTimeReviver; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showInfo", function() { return showInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "showError", function() { return showError; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "maxLength", function() { return maxLength; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "arrayToLookup", function() { return arrayToLookup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "arrayToMap", function() { return arrayToMap; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cherryPickProps", function() { return cherryPickProps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "distinct", function() { return distinct; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shallowEquals", function() { return shallowEquals; });
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");

function capitalizeFirst(str) {
    for (var i = 0, l = str.length; i < l; ++i) {
        if (str.charCodeAt(i) < 0x2000) {
            return str.substr(0, i) + str[i].toLocaleUpperCase() + str.substr(i + 1);
        }
    }
    return str;
}
function extend(obj, extension) {
    if (typeof extension !== 'object')
        return obj;
    Object.keys(extension).forEach(function (key) {
        obj[key] = extension[key];
    });
    return obj;
}
function clone(obj, extension) {
    var clone = {};
    Object.getOwnPropertyNames(obj).forEach(function (key) {
        Object.defineProperty(clone, key, Object.getOwnPropertyDescriptor(obj, key));
    });
    if (extension)
        extend(clone, extension);
    return clone;
}
var concat = [].concat;
function flatten(a) {
    return concat.apply([], a);
}
function compareProp(prop) {
    return function (a, b) {
        var aProp = a[prop], bProp = b[prop];
        return aProp > bProp ? 1 : aProp < bProp ? -1 : 0;
    };
}
function compareProps(props, locales, options) {
    props = Array.isArray(props) ? props : [props];
    var localeCompare = function (a, b) {
        return typeof a === 'string' ?
            a.localeCompare(b, locales, options) :
            a < b ? -1 : a > b ? 1 : 0;
    };
    function cmpPart(a, b, firstPart, rest) {
        var firstA = a[firstPart];
        var firstB = b[firstPart];
        if (firstA === firstB)
            return 0;
        if (firstA == null)
            return -1;
        if (firstB == null)
            return 1;
        return rest.length === 0 ?
            localeCompare(firstA, firstB) :
            cmpPart(firstA, firstB, rest[0], rest.slice(1));
    }
    return props
        .map(function (prop) { return prop.split('.'); })
        .map(function (_a) {
        var _b = tslib__WEBPACK_IMPORTED_MODULE_0__["__read"](_a), firstPart = _b[0], rest = _b.slice(1);
        return function (a, b) { return cmpPart(a, b, firstPart, rest); };
    })
        .reduce(function (cmp1, cmp2) {
        return function (a, b) { return cmp1(a, b) || cmp2(a, b); };
    });
}
function L(text) {
    var args = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        args[_i - 1] = arguments[_i];
    }
    var first = text[0];
    return buildMessage(text, args);
}
function buildMessage(text, args) {
    var rv = text[0];
    for (var i = 1, l = text.length; i < l; ++i) {
        rv += args[i - 1] + text[i];
    }
    return rv;
}
var TC = /** @class */ (function () {
    function TC(template) {
        extend(this, template);
    }
    return TC;
}());

function dateTimeReviver(key, value) {
    var a;
    if (typeof value === 'string') {
        a = /\/Date\((\d*)\)\//.exec(value);
        if (a) {
            return new Date(+a[1]);
        }
    }
    return value;
}
//let infoSerial = 1;
function showInfo(msg) {
    var event = new CustomEvent('info', { 'detail': msg });
    window.dispatchEvent(event);
}
function showError(errMsg) {
    var msg = typeof errMsg === 'string' ? errMsg : errMsg.message;
    var event = new CustomEvent('customerror', { 'detail': msg });
    console.error(errMsg);
    window.dispatchEvent(event);
}
function maxLength(str, maxLen) {
    return str.length > maxLen ?
        str.substr(0, maxLen - 3) + "..." :
        str;
}
function arrayToLookup(a, keyAccessor) {
    var result = {};
    for (var i = 0, l = a.length; i < l; ++i) {
        var item = a[i];
        var key = keyAccessor(item);
        var array = result[key];
        if (array)
            array.push(item);
        else
            result[key] = [item];
    }
    return result;
}
function arrayToMap(a, keyAccessor) {
    var result = {};
    for (var i = 0, l = a.length; i < l; ++i) {
        var item = a[i];
        var key = keyAccessor(item);
        result[key] = item;
    }
    return result;
}
function cherryPickProps(obj, propsToPick) {
    var e_1, _a;
    var result = {};
    try {
        for (var propsToPick_1 = tslib__WEBPACK_IMPORTED_MODULE_0__["__values"](propsToPick), propsToPick_1_1 = propsToPick_1.next(); !propsToPick_1_1.done; propsToPick_1_1 = propsToPick_1.next()) {
            var param = propsToPick_1_1.value;
            if (param in obj)
                result[param] = obj[param];
        }
    }
    catch (e_1_1) { e_1 = { error: e_1_1 }; }
    finally {
        try {
            if (propsToPick_1_1 && !propsToPick_1_1.done && (_a = propsToPick_1.return)) _a.call(propsToPick_1);
        }
        finally { if (e_1) throw e_1.error; }
    }
    return result;
}
function distinct(a, keyAccessor) {
    var map = arrayToMap(a, keyAccessor || (function (x) { return x; }));
    return Object.keys(map).map(function (key) { return map[key]; });
}
function shallowEquals(a, b) {
    if (a === b)
        return true;
    if (!a || !b)
        return false;
    if (typeof a !== 'object' || typeof b !== 'object')
        return false;
    var keysA = Object.keys(a);
    var keysB = Object.keys(b);
    if (keysA.length !== keysB.length)
        return false;
    for (var i = 0, l = keysA.length; i < l; ++i) {
        var key = keysA[i];
        if (keysB[i] !== key)
            return false;
        if (a[key] !== b[key])
            return false;
    }
    return true;
}


/***/ }),

/***/ "./src/utils/weekutil.ts":
/*!*******************************!*\
  !*** ./src/utils/weekutil.ts ***!
  \*******************************/
/*! exports provided: KEDWeek, getNextWeekDate, getPrevWeekDate, getAdjustedWeek */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "KEDWeek", function() { return KEDWeek; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getNextWeekDate", function() { return getNextWeekDate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getPrevWeekDate", function() { return getPrevWeekDate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getAdjustedWeek", function() { return getAdjustedWeek; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);

function KEDWeek(year, week) {
    var m = moment__WEBPACK_IMPORTED_MODULE_0___default()(new Date(year, 1, 1)).week(week);
    var res = {
        year: year,
        week: week,
        notBefore: m.clone().startOf('week').add(-2, 'days').toDate().getTime(),
        notAfter: m.clone().startOf('week').add(5, 'days').toDate().getTime()
    };
    return res;
}
function getNextWeekDate(date) {
    var nextDate = moment__WEBPACK_IMPORTED_MODULE_0___default()(date).add(1, 'week');
    //Set the 01.01 of the next year in case the next week is in the same year 
    //and the previous week is the last week of the year
    if (date.week() === date.weeksInYear() && nextDate.year() === date.year()) {
        return { adjusted: true, nextDate: moment__WEBPACK_IMPORTED_MODULE_0___default()(date.year() + 1 + "-01-01").toDate() };
    }
    return { adjusted: false, nextDate: nextDate.toDate() };
}
function getPrevWeekDate(date) {
    var prevDate = moment__WEBPACK_IMPORTED_MODULE_0___default()(date).add(-1, 'week');
    //Set the 01.01 of the current year in case the prev week is in the previous year
    if (date.week() === 2 && prevDate.year() !== date.year()) {
        return { adjusted: true, nextDate: moment__WEBPACK_IMPORTED_MODULE_0___default()(date.year() + "-01-01").toDate() };
    }
    return { adjusted: false, nextDate: prevDate.toDate() };
}
function getAdjustedWeek(m) {
    var clone = m.clone();
    return m.weekday() >= 5 ? // Lördag 00:00 / Söndag 00:00?
        m.week() + 1 : // Tillhör nästa vecka
        m.week();
}
/*export function getWeekLimits (m: Moment) {
  const clonedSwedish = m.clone().locale('sv');
  const limits = {
    notBefore: clonedSwedish.startOf('week').add(-2, 'days'),
    notAfter: clonedSwedish.startOf('week').add(5, 'days')
  };
}
*/


/***/ }),

/***/ 0:
/*!*****************************************!*\
  !*** ../locale-data/index.js (ignored) ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 1:
/*!*******************************!*\
  !*** ./lib/locales (ignored) ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 2:
/*!*******************************!*\
  !*** ./lib/locales (ignored) ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ "jquery":
/*!*************************!*\
  !*** external "jQuery" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = jQuery;

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "React" ***!
  \************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = React;

/***/ }),

/***/ "react-dom":
/*!***************************!*\
  !*** external "ReactDOM" ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ReactDOM;

/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9jbGllbnQuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9jbGllbnR3ZWIuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLWNsaWVudC13ZWIvYmVhcmVyLXN0b3JhZ2Utc2Vzc2lvbnN0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLWNsaWVudC13ZWIvaGFzaC1yZXN0b3Jlci5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50LXdlYi9pbmRleC5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50L2FjY2Vzcy1jb250cm9sLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtYmFja2VuZC1jbGllbnQvaHR0cC1lcnJvci5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50L2luZGV4LmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtYmFja2VuZC1jbGllbnQva2VkLWJlYXJlci1wcm92aWRlci5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtY2xpZW50L3Jlc3RjbGllbnQuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLWNsaWVudC91dGlscy5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwby9jYWNoZS1idXN0LmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtYmFja2VuZC1yZXBvL2RlbHRhLWNvbGxlY3Rpb24vYXBwbHktbXV0YXRpb25zLW9uLWRlbHRhcy5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwby9kZWx0YS1jb2xsZWN0aW9uL2RlbHRhLWNhY2hlLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtYmFja2VuZC1yZXBvL2RlbHRhLWNvbGxlY3Rpb24vZGVsdGEtY29sbGVjdGlvbi5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwby9kZWx0YS1tZXJnZS5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwby9pbmRleC5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwby9rZWRiYWNrZW5kLWNvbGxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLXJlcG8va2VkYmFja2VuZC1xdWVyeS5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLWJhY2tlbmQtcmVwby9rZWRiYWNrZW5kLXJlcG8uanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLXJlcG8va2VkYmFja2VuZC1zdWJzY3JpcHRpb24uanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLXJlcG8va2VkYmFja2VuZC13cml0ZXIuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLXJlcG8vbXV0YXRpb24tcXVldWUuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1iYWNrZW5kLXJlcG8vcXVlcnktc2V0LmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtYmFja2VuZC1yZXBvL3V0aWxzLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9rZWQtbW9kZWwtbWlncmF0b3IvaW5kZXguanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL2tlZC1tb2RlbC1taWdyYXRvci9taWdyYXRlLWNvdXJzZS5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLW1vZGVsLW1pZ3JhdG9yL21pZ3JhdGUtdGFzay5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMva2VkLW1vZGVsLW1pZ3JhdG9yL21pZ3JhdGUuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL29ic2VydmFibGUvY29sbGVjdGlvbi5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9rZWRiYWNrZW5kL2pzL2Rpc3QvanMvb2JzZXJ2YWJsZS9lbWl0dGVyLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9vYnNlcnZhYmxlL2ZpYmVyLWNvbnRleHQuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL29ic2VydmFibGUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL29ic2VydmFibGUvbWFwLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9vYnNlcnZhYmxlL21peGluLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvanMvZGlzdC9qcy9vYnNlcnZhYmxlL29ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9qcy9kaXN0L2pzL29ic2VydmFibGUvdmFsdWUuanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4va2VkYmFja2VuZC9vYnNlcnZhYmxlLmpzIiwid2VicGFjazovL1tuYW1lXS8uL2tlZGJhY2tlbmQvcmVwby5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZSBzeW5jIHN2fGVuIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9hY2Nlc3MtY29udHJvbC9nZXQtdXNlci1jbGFpbXMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2FjY2Vzcy1jb250cm9sL2luZGV4LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9hcGlzL2J1dHRvbnMudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9hcGlzL2NvbmZpZ3MudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2FwaXMvZWRzY2xpZW50LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9hcGlzL2dvb2dsZS1jbGllbnQudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2FwaXMvZ29vZ2xlLWRyaXZlLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9hcGlzL2dvb2dsZS1waWNrZXIudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2FwaXMvZ29vZ2xlLXdlYmNsaWVudC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jYWxlbmRhci9jb3Vyc2UtbmFtZS10by1jc3MtY2xhc3MudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY2hhcnRzL2NoYXJ0cy11dGlscy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jaGFydHMvZ29hbC1wcm9ncmVzcy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY2hhcnRzL3Byb2dyZXNzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9jb21tb24vYmFubmVyLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9jb21tb24vZGlhbG9nLWNvbnRlbnQudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL2NvbW1vbi9kaWFsb2ctY29udGV4dC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9jb21tb24vZmllbGQtbGltaXRzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL2NvbW1vbi9mdXR1cmUtYWJpbGl0aWVzLWJveC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3MvY29tbW9uL3NlbGVjdC13b3JkLWJhbmsudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL2NvbW1vbi90d28tY29sdW1ucy1wYWdlLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9sb2dpYy9jaGFuZ2Utc29ydC1vcmRlci50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9sb2dpYy9jb21wdXRlLXRhc2stdGFncy1hbmQtc3ViamVjdC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9sb2dpYy9jb3Vyc2UtaW5zdGFuY2UtdGFncy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9sb2dpYy9nZXQtY291cnNlLWNvZGVzLWZyb20tdGFncy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9sb2dpYy9nZXQtZHJhZnQtaWQudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3MvbG9naWMvZ2V0LXN0YW5kYXJkLWNvdXJzZXMtd2l0aC1vcmRlcmVkLXJlcXVpcmVtZW50cy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9sb2dpYy9pcy1lbXBsb3llZS50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy9sb2dpYy9pcy1rZWQtc3RhZmYudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3MvbG9naWMvbGlzdC1jb3Vyc2UtaW5zdGFuY2VzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL2xvZ2ljL29yZGVyZWQtcmVxdWlyZW1lbnRzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL2xvZ2ljL3B1Ymxpc2gtY291cnNlLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL2xvZ2ljL3Rhc2stb3JkZXIudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci9hZGQtY29udGVudC1idXR0b24udHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvYWRkLXRhYi1idXR0b24udHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY2xpY2thYmxlLXNjaG9vbC1kaXYudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY291cnNlLWFyZWEudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY291cnNlLWNvbnRlbnRzL2FkZC10YXNrLWJ1dHRvbi50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci9jb3Vyc2UtY29udGVudHMvY29udGVudC1ib3gudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY291cnNlLWNvbnRlbnRzL2NvdXJzZS1jb250ZW50LXR5cGVzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY291cnNlLWNvbnRlbnRzL2VtYmVkZGVkLWh0bWwudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY291cnNlLWNvbnRlbnRzL2luZGV4LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY291cnNlLWNvbnRlbnRzL2xlYXJuaW5nLXRhc2tzLWNvbnRlbnQtYm94LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL2NvdXJzZS1jb250ZW50cy9sZWFybmluZy10YXNrcy1zZXR0aW5ncy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci9jb3Vyc2UtY29udGVudHMvbGVhcm5pbmctdGFza3Mtd2l0aC1jb21tb24tZ29hbHMudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY291cnNlLWNvbnRlbnRzL2xlYXJuaW5nLXRhc2tzLXdpdGgtc2VwYXJhdGUtZ29hbHMudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY291cnNlLWNvbnRlbnRzL3Jlc291cmNlLWxpc3Qtdmlldy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci9jb3Vyc2UtY29udGVudHMvcmVzb3VyY2UtbGlzdC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci9jb3Vyc2UtY29udGVudHMvcmljaC10ZXh0LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL2NvdXJzZS1jb250ZW50cy93b3JkLWJhbmstY29udGVudC1ib3gudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvY291cnNlLWNvbnRlbnRzL3dvcmQtYmFuay1jb250ZW50LXNldHRpbmdzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL2NvdXJzZS10YWItYXJlYS50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci9jb3Vyc2UtdGFiLWNvbnRlbnQtYm94LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL2NvdXJzZS10YWIvdGFiLWNsYXNzZXMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci9jb3Vyc2Utdmlld2VyLXBhZ2UudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvZWRpdG9yLWZvb3Rlci1idXR0b25zLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL2luZGV4LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL2xpc3QtY291cnNlcy9pbmRleC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci9saXN0LWNvdXJzZXMvc3R1ZGVudC1jb3Vyc2VzLWJveC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci9yZWRpcmVjdC10by1zdGVwLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL3RhYi1zZXR0aW5ncy1hZG1pbi50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci90YWItc2V0dGluZ3MtcmVxdWlyZW1lbnRzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL3RhYi1zZXR0aW5ncy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci90YXNrL2xlZnQtY29sdW1uL2VkaXQtcmVxdWlyZW1lbnRzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL3Rhc2svcmlnaHQtY29sdW1uL2Jhc2ljLWVkaXRhYmxlLXRhc2stZmllbGRzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL3Rhc2svcmlnaHQtY29sdW1uL2VkaXQtdGFzay1mb3JtLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL3Rhc2svcmlnaHQtY29sdW1uL2ludHJvZHVjdGlvbi10ZXh0LWVkaXRvci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci90YXNrL3JpZ2h0LWNvbHVtbi90YXNrLWRlc2NyaXB0aW9uLWVkaXRvci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci90YXNrL3JpZ2h0LWNvbHVtbi90YXNrLWVtYmVkZGVkLWh0bWwtZWRpdG9yLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL3Rhc2svcmlnaHQtY29sdW1uL3Rhc2stZm9vdGVyLWJ1dHRvbnMudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvdGFzay9yaWdodC1jb2x1bW4vdGFzay13b3JraW5nLXByb2NlZHVyZS1lZGl0b3IudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvdGFzay90YXNrLWVkaXRvci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci90YXNrL3RleHRzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyLWtzL3ZpZXdlci1lZGl0b3IvdGFzay92aWV3ZXIvdGFzay12aWV3ZXItcGFnZS50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci90YXNrL3ZpZXdlci90YXNrLXZpZXdlci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci92ZXJzaW9uLWhpc3RvcnkvZGVsdGEtdmlldy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci92ZXJzaW9uLWhpc3RvcnkvZGVsdGFkb2MtYm94LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL3ZlcnNpb24taGlzdG9yeS9kZWx0YWxpbmstYm94LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci1rcy92aWV3ZXItZWRpdG9yL3ZlcnNpb24taGlzdG9yeS9pbmRleC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci92ZXJzaW9uLWhpc3RvcnkvbW9kZWwtZnJpZW5kbHktbmFtZXMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvci92ZXJzaW9uLWhpc3RvcnkvdmVyc2lvbi1oaXN0b3J5LWJveC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvY291cnNlcy9idXNpbmVzcy1sb2dpYy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9rbm93bGVkZ2UtbWF0cml4LXBhcnRpYWwtdXRpbHMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvbW9kYWwtcGFnZXMvZWRpdC1yZXNvdXJjZS50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvbW9kYWwtcGFnZXMvZWRpdC10YXNrL3Rhc2stbWlncmF0aW9uLWJveC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvZWxsaXBzaXMtbG9hZGVyLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9rbm93bGVkZ2UtbWF0cml4LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9yZW1vdmUtaXRlbS50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvc2VsZWN0LXJlbGF0ZWQtZG9jcy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvc3Bpbm5lci50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIvdXRpbHMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLXZpZXdlci9jb3Vyc2UtcGFnZS90YXNrLWFzc2lnbm1lbnRzLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2Utdmlld2VyL2NvdXJzZS1wYWdlL3Vya3VuZC11dGlscy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2Utdmlld2VyL3N1YmNvbXBvbmVudHMvYWJpbGl0aWVzLWJveC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvY291cnNlLXZpZXdlci9zdWJjb21wb25lbnRzL2NlbnRyYWwtY29udGVudC1ib3gudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS12aWV3ZXIvc3ViY29tcG9uZW50cy9jb25maXJtYXRpb24udHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL2NvdXJzZS12aWV3ZXIvc3ViY29tcG9uZW50cy9rbm93bGVkZ2UtcmVxdWlyZW1lbnRzLXRhYmxlLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy9jb3Vyc2Utdmlld2VyL3N1YmNvbXBvbmVudHMvdGFzay1saXN0LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvTGFuZ3VhZ2VDb250ZXh0LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvU2V0dXBMYW5ndWFnZUludGwudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9hbGlnbi1ob3Jpem9udGFsLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvY2hlY2tsaXN0LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvZGlhbG9ncy50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL2Zvcm0tZmllbGQtdGV4dC1pbnB1dC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL2Zvcm0tZmllbGQtdGV4dGFyZWEudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9mb3JtLWZpZWxkLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvaG9yaXpvbnRhbC1pdGVtLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvbGF6eS1jb250ZW50LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvbGl2ZS1xdWVyeS12aWV3LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvbG9hZGluZy1pbmRpY2F0b3IudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy9vcGVuLWNsb3NlLWJveC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL3NvcnRhYmxlLXRhc2stbGlzdC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL3d5c2l3eWcvYWN0aW9ucy1zdi50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zy9hY3Rpb25zLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnL2V4ZWMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL3d5c2l3eWcvaW1hZ2UtZWRpdC1hY3Rpb25zLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnL2luZGV4LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zy9yZXN0b3JlLXNlbGVjdGlvbi50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zy93YXNoLWh0bWwudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvd2Vla3BsYW5uZXIvYWRkLWN1c3RvbS1nb2FsLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy93ZWVrcGxhbm5lci9hZGQtY3VzdG9tLXRhc2sudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3dlZWtwbGFubmVyL2FkZC1vci1lZGl0LXN1Yi10YXNrLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy93ZWVrcGxhbm5lci9lZGl0LXVzZXItdGFzay50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvd2Vla3BsYW5uZXIvZ2V0LXRhc2stdHlwZS50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy93ZWVrcGxhbm5lci9yZWZpbmVyLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb21wb25lbnRzL3dlZWtwbGFubmVyL3VzZXItdGFza3MtYm94LnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29tcG9uZW50cy93ZWVrcGxhbm5lci93ZWVrcGxhbm5lci1wZXJzaXN0ZWQtc3RhdGUudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvd2Vla3BsYW5uZXIvd2Vla3BsYW5uZXIudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9jb250cmFjdHMva2VkLW1vZGVscy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZmVhdHVyZXMvZmVhdHVyZXMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2ZlYXR1cmVzL2luZGV4LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9nbG9iYWwtc2V0dGVycy9jb25maWd1cmUudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2dsb2JhbC1zZXR0ZXJzL3NldC1hbGwudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2dsb2JhbC1zZXR0ZXJzL3NldC1iZWFyZXItcHJvdmlkZXJzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9nbG9iYWwtc2V0dGVycy9zZXQtZWRzLWNsaWVudC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZ2xvYmFsLXNldHRlcnMvc2V0LWtlZC1iYWNrZW5kLWNsaWVudC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZ2xvYmFscy9LRUQuY2ZnLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9nbG9iYWxzL0tFRC5lbnYudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL2dsb2JhbHMvS0VELnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9nbG9iYWxzL2RiLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9nbG9iYWxzL2tlZC50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvZ2xvYmFscy9tb21lbnQtc3YtbG9jYWxlLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9yZXBvcy9rZWQtcmVwby50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvcmVwb3MvcmVwby50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvcmVwb3MvdXNlci10YXNrcy1yZXBvLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy90ZXN0L2RhdGEvdXNlcnMudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3Rlc3Qvc2V0LWN1cnJlbnQtdXNlci50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdGVzdC90ZXN0LWNvbmZpZy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdGVzdC90ZXN0cGFnZS1zcC50c3giLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3Rlc3QvdXRpbHMvY2hvb3NlLXVzZXIudHN4Iiwid2VicGFjazovL1tuYW1lXS8uL3NyYy90ZXN0L3V0aWxzL2luY2x1ZGUtY3NzLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy91dGlscy9lcnJvci1zdWNjZXNzLWZlZWRiYWNrLnRzeCIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdXRpbHMvaW5jbHVkZS1vcHRpb25hbC1jc3MudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3V0aWxzL2tlZXAtc2Vzc2lvbi1hbGl2ZS50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdXRpbHMvbWFrZS1zdXNwZW5zZS1hcGkudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3V0aWxzL3BlbmRpbmctam9iLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy91dGlscy9xdWVyeS1zdHJpbmcudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3V0aWxzL3NjaG9vbC1tb21lbnQudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vc3JjL3V0aWxzL3NjaG9vbC10ZXJtLnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy91dGlscy91dGlscy50cyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvdXRpbHMvd2Vla3V0aWwudHMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4uL2xvY2FsZS1kYXRhL2luZGV4LmpzIChpZ25vcmVkKSIsIndlYnBhY2s6Ly9bbmFtZV0vLi9saWIvbG9jYWxlcyAoaWdub3JlZCkiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vbGliL2xvY2FsZXMgKGlnbm9yZWQpP2ExNzciLCJ3ZWJwYWNrOi8vW25hbWVdL2V4dGVybmFsIFwialF1ZXJ5XCIiLCJ3ZWJwYWNrOi8vW25hbWVdL2V4dGVybmFsIFwiUmVhY3RcIiIsIndlYnBhY2s6Ly9bbmFtZV0vZXh0ZXJuYWwgXCJSZWFjdERPTVwiIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxnQkFBUSxvQkFBb0I7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBaUIsNEJBQTRCO0FBQzdDO0FBQ0E7QUFDQSwwQkFBa0IsMkJBQTJCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrREFBMEMsZ0NBQWdDO0FBQzFFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0VBQXdELGtCQUFrQjtBQUMxRTtBQUNBLHlEQUFpRCxjQUFjO0FBQy9EOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBeUMsaUNBQWlDO0FBQzFFLHdIQUFnSCxtQkFB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Q3ZDLElBQU0sS0FBSyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUN4QixPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLCtCQUErQjtRQUNyRCxDQUFDLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxzQkFBc0I7UUFDckMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQ2YsQ0FBQztBQUVEOzs7Ozs7O0VBT0U7Ozs7Ozs7Ozs7OztBQ2hERixlOzs7Ozs7Ozs7OztBQ0FBLGU7Ozs7Ozs7Ozs7O0FDQUEsZTs7Ozs7Ozs7Ozs7QUNBQSx3Qjs7Ozs7Ozs7Ozs7QUNBQSx1Qjs7Ozs7Ozs7Ozs7QUNBQSwwQiIsImZpbGUiOiJ0ZXN0cGFnZXNwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG4gXHRmdW5jdGlvbiB3ZWJwYWNrSnNvbnBDYWxsYmFjayhkYXRhKSB7XG4gXHRcdHZhciBjaHVua0lkcyA9IGRhdGFbMF07XG4gXHRcdHZhciBtb3JlTW9kdWxlcyA9IGRhdGFbMV07XG4gXHRcdHZhciBleGVjdXRlTW9kdWxlcyA9IGRhdGFbMl07XG5cbiBcdFx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG4gXHRcdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuIFx0XHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwLCByZXNvbHZlcyA9IFtdO1xuIFx0XHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcbiBcdFx0XHRpZihpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcbiBcdFx0XHRcdHJlc29sdmVzLnB1c2goaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKTtcbiBcdFx0XHR9XG4gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcbiBcdFx0fVxuIFx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuIFx0XHRcdFx0bW9kdWxlc1ttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0fVxuIFx0XHR9XG4gXHRcdGlmKHBhcmVudEpzb25wRnVuY3Rpb24pIHBhcmVudEpzb25wRnVuY3Rpb24oZGF0YSk7XG5cbiBcdFx0d2hpbGUocmVzb2x2ZXMubGVuZ3RoKSB7XG4gXHRcdFx0cmVzb2x2ZXMuc2hpZnQoKSgpO1xuIFx0XHR9XG5cbiBcdFx0Ly8gYWRkIGVudHJ5IG1vZHVsZXMgZnJvbSBsb2FkZWQgY2h1bmsgdG8gZGVmZXJyZWQgbGlzdFxuIFx0XHRkZWZlcnJlZE1vZHVsZXMucHVzaC5hcHBseShkZWZlcnJlZE1vZHVsZXMsIGV4ZWN1dGVNb2R1bGVzIHx8IFtdKTtcblxuIFx0XHQvLyBydW4gZGVmZXJyZWQgbW9kdWxlcyB3aGVuIGFsbCBjaHVua3MgcmVhZHlcbiBcdFx0cmV0dXJuIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCk7XG4gXHR9O1xuIFx0ZnVuY3Rpb24gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKSB7XG4gXHRcdHZhciByZXN1bHQ7XG4gXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZE1vZHVsZXMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHR2YXIgZGVmZXJyZWRNb2R1bGUgPSBkZWZlcnJlZE1vZHVsZXNbaV07XG4gXHRcdFx0dmFyIGZ1bGZpbGxlZCA9IHRydWU7XG4gXHRcdFx0Zm9yKHZhciBqID0gMTsgaiA8IGRlZmVycmVkTW9kdWxlLmxlbmd0aDsgaisrKSB7XG4gXHRcdFx0XHR2YXIgZGVwSWQgPSBkZWZlcnJlZE1vZHVsZVtqXTtcbiBcdFx0XHRcdGlmKGluc3RhbGxlZENodW5rc1tkZXBJZF0gIT09IDApIGZ1bGZpbGxlZCA9IGZhbHNlO1xuIFx0XHRcdH1cbiBcdFx0XHRpZihmdWxmaWxsZWQpIHtcbiBcdFx0XHRcdGRlZmVycmVkTW9kdWxlcy5zcGxpY2UoaS0tLCAxKTtcbiBcdFx0XHRcdHJlc3VsdCA9IF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gZGVmZXJyZWRNb2R1bGVbMF0pO1xuIFx0XHRcdH1cbiBcdFx0fVxuXG4gXHRcdHJldHVybiByZXN1bHQ7XG4gXHR9XG5cbiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4gXHQvLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbiBcdC8vIFByb21pc2UgPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG4gXHR2YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuIFx0XHRcInRlc3RwYWdlc3BcIjogMFxuIFx0fTtcblxuIFx0dmFyIGRlZmVycmVkTW9kdWxlcyA9IFtdO1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHR2YXIganNvbnBBcnJheSA9IHdpbmRvd1tcIndlYnBhY2tKc29ucF9uYW1lX1wiXSA9IHdpbmRvd1tcIndlYnBhY2tKc29ucF9uYW1lX1wiXSB8fCBbXTtcbiBcdHZhciBvbGRKc29ucEZ1bmN0aW9uID0ganNvbnBBcnJheS5wdXNoLmJpbmQoanNvbnBBcnJheSk7XG4gXHRqc29ucEFycmF5LnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjaztcbiBcdGpzb25wQXJyYXkgPSBqc29ucEFycmF5LnNsaWNlKCk7XG4gXHRmb3IodmFyIGkgPSAwOyBpIDwganNvbnBBcnJheS5sZW5ndGg7IGkrKykgd2VicGFja0pzb25wQ2FsbGJhY2soanNvbnBBcnJheVtpXSk7XG4gXHR2YXIgcGFyZW50SnNvbnBGdW5jdGlvbiA9IG9sZEpzb25wRnVuY3Rpb247XG5cblxuIFx0Ly8gYWRkIGVudHJ5IG1vZHVsZSB0byBkZWZlcnJlZCBsaXN0XG4gXHRkZWZlcnJlZE1vZHVsZXMucHVzaChbXCIuL3NyYy90ZXN0L3Rlc3RwYWdlLXNwLnRzeFwiLFwidmVuZG9yc1wiXSk7XG4gXHQvLyBydW4gZGVmZXJyZWQgbW9kdWxlcyB3aGVuIHJlYWR5XG4gXHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiIsImV4cG9ydCAqIGZyb20gJy4vanMvZGlzdC9qcy9rZWQtYmFja2VuZC1jbGllbnQnOyIsImV4cG9ydCAqIGZyb20gJy4vanMvZGlzdC9qcy9rZWQtYmFja2VuZC1jbGllbnQtd2ViJzsiLCJ2YXIgQmVhcmVyU3RvcmFnZVNlc3Npb25TdG9yYWdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQmVhcmVyU3RvcmFnZVNlc3Npb25TdG9yYWdlKCkge1xyXG4gICAgfVxyXG4gICAgQmVhcmVyU3RvcmFnZVNlc3Npb25TdG9yYWdlLnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24gKGlkLCB0b2tlbkluZm8pIHtcclxuICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwiYmVhcmVyLVwiICsgaWQsIEpTT04uc3RyaW5naWZ5KHRva2VuSW5mbykpO1xyXG4gICAgfTtcclxuICAgIEJlYXJlclN0b3JhZ2VTZXNzaW9uU3RvcmFnZS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciBqc29uID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcImJlYXJlci1cIiArIGlkKTtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShqc29uID8gSlNPTi5wYXJzZShqc29uKSA6IHsgdG9rZW46IG51bGwsIGV4cGlyZXM6IDAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHsgdG9rZW46IG51bGwsIGV4cGlyZXM6IDAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBCZWFyZXJTdG9yYWdlU2Vzc2lvblN0b3JhZ2U7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IEJlYXJlclN0b3JhZ2VTZXNzaW9uU3RvcmFnZSB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1iZWFyZXItc3RvcmFnZS1zZXNzaW9uc3RvcmFnZS5qcy5tYXAiLCJ2YXIgcmVkaXJIYXNoID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcInJlZGlyLWhhc2hcIik7XHJcbmlmIChyZWRpckhhc2gpXHJcbiAgICB0cnkge1xyXG4gICAgICAgIHZhciBfYSA9IEpTT04ucGFyc2UocmVkaXJIYXNoKSwgdGltZSA9IF9hLnRpbWUsIGhhc2ggPSBfYS5oYXNoO1xyXG4gICAgICAgIGlmICh0aW1lICYmIHRpbWUgPiBEYXRlLm5vdygpIC0gNjAwMDApIHtcclxuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShcInJlZGlyLWhhc2hcIik7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLmhhc2ggPSBoYXNoO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChfKSB7IH1cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbWVtYmVySGFzaExvY2F0aW9uKCkge1xyXG4gICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcInJlZGlyLWhhc2hcIiwgSlNPTi5zdHJpbmdpZnkoeyB0aW1lOiBEYXRlLm5vdygpLCBoYXNoOiBsb2NhdGlvbi5oYXNoIH0pKTtcclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1oYXNoLXJlc3RvcmVyLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRDbGllbnQsIEh0dHBFcnJvciB9IGZyb20gJy4uL2tlZC1iYWNrZW5kLWNsaWVudCc7XHJcbmltcG9ydCB7IEJlYXJlclN0b3JhZ2VTZXNzaW9uU3RvcmFnZSB9IGZyb20gXCIuL2JlYXJlci1zdG9yYWdlLXNlc3Npb25zdG9yYWdlXCI7XHJcbmltcG9ydCB7IGF2b2lkU2ltdWx0YW5vdXNDYWxscyB9IGZyb20gJy4uL2tlZC1iYWNrZW5kLWNsaWVudC91dGlscyc7XHJcbmltcG9ydCB7IEtlZE1vZGVsTWlncmF0b3JNaXhpbiB9IGZyb20gJy4uL2tlZC1tb2RlbC1taWdyYXRvcic7XHJcbmltcG9ydCAnLi9oYXNoLXJlc3RvcmVyJztcclxuaW1wb3J0IHsgcmVtZW1iZXJIYXNoTG9jYXRpb24gfSBmcm9tICcuL2hhc2gtcmVzdG9yZXInO1xyXG5LZWRNb2RlbE1pZ3JhdG9yTWl4aW4oS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUpO1xyXG5leHBvcnQgdmFyIHN0b3JhZ2UgPSBuZXcgQmVhcmVyU3RvcmFnZVNlc3Npb25TdG9yYWdlKCk7XHJcbnZhciB0aW1lT2ZQYWdlTG9hZCA9IERhdGUubm93KCk7XHJcbnZhciBXZWJTZXJ2ZXJCZWFyZXJQcm92aWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFdlYlNlcnZlckJlYXJlclByb3ZpZGVyKHRva2VuUGF0aCwgdG9rZW5SZXNwb25zZU1hcHBlciwgdG9rZW5JZCkge1xyXG4gICAgICAgIHRoaXMudG9rZW5QYXRoID0gdG9rZW5QYXRoO1xyXG4gICAgICAgIHRoaXMudG9rZW5SZXNwb25zZU1hcHBlciA9IHRva2VuUmVzcG9uc2VNYXBwZXI7XHJcbiAgICAgICAgdGhpcy50b2tlbklkID0gdG9rZW5JZDtcclxuICAgICAgICB0aGlzLnRva2VuSW5mbyA9IHsgdG9rZW46IG51bGwsIGV4cGlyZXM6IDAgfTtcclxuICAgICAgICB0aGlzLmdldEJlYXJlciA9IGF2b2lkU2ltdWx0YW5vdXNDYWxscyh0aGlzLmdldEJlYXJlci5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLnJlZnJlc2hCZWFyZXIgPSBhdm9pZFNpbXVsdGFub3VzQ2FsbHModGhpcy5yZWZyZXNoQmVhcmVyLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG4gICAgV2ViU2VydmVyQmVhcmVyUHJvdmlkZXIucHJvdG90eXBlLmdldEJlYXJlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghIXRoaXMudG9rZW5JbmZvLnRva2VuKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnRva2VuSWQpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHN0b3JhZ2UubG9hZCh0aGlzLnRva2VuSWQpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRva2VuSW5mbyA9IF9iLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcy50b2tlbkluZm8uZXhwaXJlcyA8IERhdGUubm93KCkpKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZWZyZXNoQmVhcmVyKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy50b2tlbkluZm9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBXZWJTZXJ2ZXJCZWFyZXJQcm92aWRlci5wcm90b3R5cGUucmVmcmVzaEJlYXJlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlcywgX2EsIF9iLCBfYywgX2Q7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfZSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfZS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgZmV0Y2godGhpcy50b2tlblBhdGgsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgQWNjZXB0OiBcInRleHQvcGxhaW47IGFwcGxpY2F0aW9uL2pzb25cIiB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVkaXJlY3Q6ICdtYW51YWwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGU6ICduby1jYWNoZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVkZW50aWFsczogXCJzYW1lLW9yaWdpblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IF9lLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDMwMiB8fCAoIXJlcy5zdGF0dXMgJiYgcmVzLnR5cGUgPT09IFwib3BhcXVlcmVkaXJlY3RcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVzZXIgc2Vzc2lvbiB0aW1lZCBvdXQgYW5kIHNlcnZlciB3YW50cyB0byByZWRpcmVjdCBlbnRpcmUgcGFnZSB0byBsb2dpbiBwYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaW1lIHRvIHJlbG9hZCBjdXJyZW50IHBhZ2UgdG8gZm9yY2UgYSByZWRpcmVjdCBvZiB0aGUgZW50aXJlIHBhZ2UgaW5zdGVhZCBmb3JcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGp1c3QgcmVkaXJlY3RpbmcgdG8gL2FwaS90b2tlbiBvciB3aGF0ZXZlci5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChEYXRlLm5vdygpIC0gdGltZU9mUGFnZUxvYWQgPiA2MDAwMCkgeyAvLyBwcm9oaWJpdCBlbmRsZXNzIGxvb3Agb2YgcmVsb2FkaW5nIHNlbGYuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53YW50c1JlZGlyZWN0ID0gdHJ1ZTsgLy8gU28gdGhhdCBsaXN0ZW5lcnMgdG8gb25iZWZvcmV1bmxvYWQgY291bGQgc2hvdyBhbHRlcm5hdGUgbWVzc2FnZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlZGlyZWN0IHdhbnRlZC4gUmVsb2FkIHBhZ2UuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbWVtYmVySGFzaExvY2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSHR0cEVycm9yKDMwMiwgXCJSZWRpcmVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcy5zdGF0dXMgIT0gMjAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gRXJyb3IuYmluZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSBcIkhUVFBcIiArIHJlcy5zdGF0dXMgKyBcIiBcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLnRleHQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiB0aHJvdyBuZXcgKF9hLmFwcGx5KEVycm9yLCBbdm9pZCAwLCBfYiArIChfZS5zZW50KCkpXSkpKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kID0gdGhpcy50b2tlblJlc3BvbnNlTWFwcGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXMudGV4dCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLnRva2VuSW5mbyA9IF9kLmFwcGx5KHRoaXMsIFtfZS5zZW50KCldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmFnZS5zYXZlKHRoaXMudG9rZW5JZCwgdGhpcy50b2tlbkluZm8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy50b2tlbkluZm9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gV2ViU2VydmVyQmVhcmVyUHJvdmlkZXI7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IFdlYlNlcnZlckJlYXJlclByb3ZpZGVyIH07XHJcbmV4cG9ydCB2YXIgaXNvbW9ycGhpYyA9IHsgZmV0Y2g6IGZldGNoLmJpbmQoc2VsZiksIGJ0b2E6IGJ0b2EuYmluZChzZWxmKSB9O1xyXG52YXIgS2VkQmFja2VuZENsaWVudFdlYiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliXzEuX19leHRlbmRzKEtlZEJhY2tlbmRDbGllbnRXZWIsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBLZWRCYWNrZW5kQ2xpZW50V2ViKGFwaUJhc2VVcmwsIHByb3ZpZGVyT3JUb2tlblBhdGgsIG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBiZWFyZXJQcm92aWRlciA9IHR5cGVvZiBwcm92aWRlck9yVG9rZW5QYXRoICE9PSAnc3RyaW5nJyA/XHJcbiAgICAgICAgICAgIHByb3ZpZGVyT3JUb2tlblBhdGggOlxyXG4gICAgICAgICAgICBuZXcgV2ViU2VydmVyQmVhcmVyUHJvdmlkZXIocHJvdmlkZXJPclRva2VuUGF0aCwgKG9wdGlvbnMgJiYgb3B0aW9ucy50b2tlblJlc3BvbnNlTWFwcGVyKSB8fCAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuICh7IHRva2VuOiB4LCBleHBpcmVzOiBEYXRlLm5vdygpICsgNTkgKiA2MCAqIDYwIH0pOyB9KSwgb3B0aW9ucyAmJiBvcHRpb25zLnRva2VuSWQpO1xyXG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgaXNvbW9ycGhpYywgYmVhcmVyUHJvdmlkZXIsIGFwaUJhc2VVcmwpIHx8IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEtlZEJhY2tlbmRDbGllbnRXZWI7XHJcbn0oS2VkQmFja2VuZENsaWVudCkpO1xyXG5leHBvcnQgeyBLZWRCYWNrZW5kQ2xpZW50V2ViIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsInZhciBEb2N1bWVudEFjY2VzcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERvY3VtZW50QWNjZXNzKGFjY2Vzc0NsYWltVHlwZSwgYWNjZXNzQ2xhaW1WYWx1ZSwgcmlnaHQpIHtcclxuICAgICAgICB0aGlzLmFjY2Vzc0NsYWltVHlwZSA9IGFjY2Vzc0NsYWltVHlwZTtcclxuICAgICAgICB0aGlzLmFjY2Vzc0NsYWltVmFsdWUgPSBhY2Nlc3NDbGFpbVZhbHVlO1xyXG4gICAgICAgIHRoaXMucmlnaHQgPSByaWdodDtcclxuICAgIH1cclxuICAgIERvY3VtZW50QWNjZXNzLmZyb21TdHJpbmcgPSBmdW5jdGlvbiAoYWMpIHtcclxuICAgICAgICBpZiAoIWFjKVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB2YXIgc3BsaXQgPSBhYy5zcGxpdCgnOicpO1xyXG4gICAgICAgIGlmIChzcGxpdC5sZW5ndGggPCAzKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFjY2VzcyBzdHJpbmc6IFwiICsgYWMpO1xyXG4gICAgICAgIHZhciBjbGFpbVR5cGUgPSBEb2N1bWVudEFjY2Vzcy51bmVzY2FwZShzcGxpdFswXSk7XHJcbiAgICAgICAgdmFyIGNsYWltVmFsdWUgPSBEb2N1bWVudEFjY2Vzcy51bmVzY2FwZShzcGxpdFsxXSk7XHJcbiAgICAgICAgdmFyIHJpZ2h0ID0gc3BsaXRbMl07XHJcbiAgICAgICAgaWYgKHJpZ2h0ICE9PSAnUicgJiYgcmlnaHQgIT09ICdXJyAmJiByaWdodCAhPT0gJ1MnKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFjY2VzcyBzdHJpbmc6IFwiICsgYWMpO1xyXG4gICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRBY2Nlc3MoY2xhaW1UeXBlLCBjbGFpbVZhbHVlLCByaWdodCk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRBY2Nlc3MuZXNjYXBlID0gZnVuY3Rpb24gKGFjY2Vzc0NvbXBvbmVudCkge1xyXG4gICAgICAgIHJldHVybiBhY2Nlc3NDb21wb25lbnQucmVwbGFjZSgvXFwlL2csIFwiJTI1XCIpLnJlcGxhY2UoL1xcOi9nLCBcIiUzQVwiKTtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudEFjY2Vzcy51bmVzY2FwZSA9IGZ1bmN0aW9uIChhY2Nlc3NDb21wb25lbnQpIHtcclxuICAgICAgICByZXR1cm4gYWNjZXNzQ29tcG9uZW50LnJlcGxhY2UoL1xcJTNBL2csIFwiOlwiKS5yZXBsYWNlKC9cXCUyNS9nLCBcIiVcIik7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRBY2Nlc3MucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBEb2N1bWVudEFjY2Vzcy5lc2NhcGUodGhpcy5hY2Nlc3NDbGFpbVR5cGUpICsgXCI6XCIgK1xyXG4gICAgICAgICAgICBEb2N1bWVudEFjY2Vzcy5lc2NhcGUodGhpcy5hY2Nlc3NDbGFpbVZhbHVlKSArIFwiOlwiICtcclxuICAgICAgICAgICAgdGhpcy5yaWdodDtcclxuICAgIH07XHJcbiAgICBEb2N1bWVudEFjY2Vzcy5mcm9tU3RyaW5nQXJyYXkgPSBmdW5jdGlvbiAoYWNsKSB7XHJcbiAgICAgICAgcmV0dXJuIGFjbFxyXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChhYykgeyByZXR1cm4gRG9jdW1lbnRBY2Nlc3MuZnJvbVN0cmluZyhhYyk7IH0pXHJcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGFjKSB7IHJldHVybiBhYzsgfSk7XHJcbiAgICB9O1xyXG4gICAgRG9jdW1lbnRBY2Nlc3MudG9TdHJpbmdBcnJheSA9IGZ1bmN0aW9uIChhY2wpIHtcclxuICAgICAgICByZXR1cm4gYWNsLm1hcChmdW5jdGlvbiAoYWMpIHsgcmV0dXJuIGFjLnRvU3RyaW5nKCk7IH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBEb2N1bWVudEFjY2VzcztcclxufSgpKTtcclxuZXhwb3J0IHsgRG9jdW1lbnRBY2Nlc3MgfTtcclxuZXhwb3J0IGZ1bmN0aW9uIGhhc0FjY2VzcyhhY2wsIHVzZXJDbGFpbXMsIHJlcXVlc3RlZFJpZ2h0KSB7XHJcbiAgICBpZiAodXNlckNsYWltcy5zb21lKGZ1bmN0aW9uIChjbGFpbSkgeyByZXR1cm4gY2xhaW0udHlwZSA9PT0gJ3JvbGUnICYmIGNsYWltLnZhbHVlID09PSBcIkFETUlOXCI7IH0pKVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgcmV0dXJuIGFjbC5zb21lKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgcmV0dXJuIHVzZXJDbGFpbXMuc29tZShmdW5jdGlvbiAoYykge1xyXG4gICAgICAgICAgICByZXR1cm4gYS5hY2Nlc3NDbGFpbVR5cGUgPT09IGMudHlwZSAmJlxyXG4gICAgICAgICAgICAgICAgYS5hY2Nlc3NDbGFpbVZhbHVlID09PSBjLnZhbHVlICYmICgoYS5yaWdodCA9PT0gJ1InICYmIHJlcXVlc3RlZFJpZ2h0ID09PSAnUicpIHx8XHJcbiAgICAgICAgICAgICAgICAoYS5yaWdodCA9PT0gJ1cnICYmIFsnUicsICdXJ10uaW5kZXhPZihyZXF1ZXN0ZWRSaWdodCkgPj0gMCkgfHxcclxuICAgICAgICAgICAgICAgIChhLnJpZ2h0ID09PSAnUycpKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFjY2Vzcy1jb250cm9sLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbnZhciBIdHRwRXJyb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhIdHRwRXJyb3IsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBIdHRwRXJyb3IoY29kZSwgbWVzc2FnZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFwiSFRUUFwiICsgY29kZSArIFwiIFwiICsgbWVzc2FnZSkgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5jb2RlID0gY29kZTtcclxuICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcclxuICAgICAgICBfdGhpcy5uYW1lID0gXCJodHRwXCIgKyBjb2RlO1xyXG4gICAgICAgIF90aGlzLm1lc3NhZ2UgPSBcIkhUVFBcIiArIGNvZGUgKyBcIiBcIiArIG1lc3NhZ2U7XHJcbiAgICAgICAgcmV0dXJuIF90aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEh0dHBFcnJvcjtcclxufShFcnJvcikpO1xyXG5leHBvcnQgeyBIdHRwRXJyb3IgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aHR0cC1lcnJvci5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBSZXN0Q2xpZW50IH0gZnJvbSAnLi9yZXN0Y2xpZW50JztcclxuZXhwb3J0ICogZnJvbSAnLi91dGlscyc7XHJcbmV4cG9ydCB7IEtlZEJlYXJlclByb3ZpZGVyIH0gZnJvbSAnLi9rZWQtYmVhcmVyLXByb3ZpZGVyJztcclxuZXhwb3J0ICogZnJvbSAnLi9hY2Nlc3MtY29udHJvbCc7XHJcbmV4cG9ydCB7IFJlc3RDbGllbnQgfTtcclxuaW1wb3J0IHsgSHR0cEVycm9yIH0gZnJvbSAnLi9odHRwLWVycm9yJztcclxuZXhwb3J0IHsgSHR0cEVycm9yIH07XHJcbmV4cG9ydCAqIGZyb20gJy4vcmVzdGNsaWVudCc7XHJcbjtcclxuLy8gfCAnb3RoZXJGbGFnJyB8ICd0aGlyZEZsYWcnOy4uLlxyXG52YXIgS2VkQmFja2VuZENsaWVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEtlZEJhY2tlbmRDbGllbnQoaXNvbW9ycGhpYywgYmVhcmVyUHJvdmlkZXIsIGJhc2VVcmwpIHtcclxuICAgICAgICB0aGlzLmh0dHAgPSBuZXcgUmVzdENsaWVudChpc29tb3JwaGljLCBiYXNlVXJsLCB7IGJlYXJlclByb3ZpZGVyOiBiZWFyZXJQcm92aWRlciB9KTtcclxuICAgIH1cclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLmdldE15Q2xhaW1zID0gZnVuY3Rpb24gKHRhYmxlLCBmZXRjaE9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlcywgX2EsIF9iO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaHR0cC5nZXQoXCJtZS9jbGFpbXMvXCIgKyAodGFibGUgfHwgXCJcIiksIG51bGwsIGZldGNoT3B0aW9ucyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXMuc3RhdHVzICE9IDIwMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IEh0dHBFcnJvci5iaW5kO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IFt2b2lkIDAsIHJlcy5zdGF0dXNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXMudGV4dCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHRocm93IG5ldyAoX2EuYXBwbHkoSHR0cEVycm9yLCBfYi5jb25jYXQoW19jLnNlbnQoKV0pKSkoKTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy5qc29uKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIF9jLnNlbnQoKV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICh0YWJsZSwgaWQsIG9wdGlvbnMsIGZldGNoT3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzLCBfYSwgX2I7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5odHRwLmdldCh0YWJsZSArIFwiL1wiICsgaWQsIG9wdGlvbnMsIGZldGNoT3B0aW9ucyldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2Muc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXMuc3RhdHVzICE9IDIwMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IEh0dHBFcnJvci5iaW5kO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IFt2b2lkIDAsIHJlcy5zdGF0dXNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXMudGV4dCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHRocm93IG5ldyAoX2EuYXBwbHkoSHR0cEVycm9yLCBfYi5jb25jYXQoW19jLnNlbnQoKV0pKSkoKTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy5qc29uKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIF9jLnNlbnQoKV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLmxpc3QgPSBmdW5jdGlvbiAodGFibGUsIG9wdGlvbnMsIGZldGNoT3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcXVlcnksIHJlcywgX2EsIF9iO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5ID0gdHNsaWJfMS5fX2Fzc2lnbih7fSwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb2NhdGlvbi5zZWFyY2guaW5jbHVkZXMoJ3VzZVNQJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5LmZsYWdzID0gKHF1ZXJ5LmZsYWdzIHx8IFtdKS5jb25jYXQoWyd1c2VTUCddKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLm11dGF0aW9uc09uRW1wdHkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWVyeS5tdXRhdGlvbnNPbkVtcHR5ID0gSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5tdXRhdGlvbnNPbkVtcHR5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5odHRwLmdldChcIlwiICsgdGFibGUsIHF1ZXJ5LCBmZXRjaE9wdGlvbnMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IF9jLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzLnN0YXR1cyAhPSAyMDApKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSBIdHRwRXJyb3IuYmluZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSBbdm9pZCAwLCByZXMuc3RhdHVzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLnRleHQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiB0aHJvdyBuZXcgKF9hLmFwcGx5KEh0dHBFcnJvciwgX2IuY29uY2F0KFtfYy5zZW50KCldKSkpKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzQgLyp5aWVsZCovLCByZXMuanNvbigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovLCBfYy5zZW50KCldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS5iYXRjaCA9IGZ1bmN0aW9uIChyZXFzLCBmZXRjaE9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlcywgX2EsIF9iO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlb3JkZXIgb3BlcmF0aW9ucyBzbyB0aGF0ICdhZGQncyBjb21lIGZpcnN0IGFuZCAnZGVsZXRlJ3MgY29tZSBsYXN0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXFzID0gcmVxcy5zbGljZSgpLnNvcnQoZnVuY3Rpb24gKHJlcTEsIHJlcTIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXExLm9wID09PSAnYWRkJyA/IC0xIDogcmVxMi5vcCA9PT0gJ2FkZCcgPyAxIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXExLm9wID09PSAnZGVsZXRlJyA/IDEgOiByZXEyLm9wID09PSAnZGVsZXRlJyA/IC0xIDogMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaHR0cC5wb3N0KFwiYmF0Y2hcIiwgcmVxcywgZmV0Y2hPcHRpb25zKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcy5zdGF0dXMgIT0gMjAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gSHR0cEVycm9yLmJpbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gW3ZvaWQgMCwgcmVzLnN0YXR1c107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy50ZXh0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogdGhyb3cgbmV3IChfYS5hcHBseShIdHRwRXJyb3IsIF9iLmNvbmNhdChbX2Muc2VudCgpXSkpKSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLmpzb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qLywgX2Muc2VudCgpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUuZG8gPSBmdW5jdGlvbiAoc2NvcGVGbikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcnVubmVyO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bm5lciA9IG5ldyBCYXRjaFJ1bm5lcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZUZuKHJ1bm5lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuYmF0Y2gocnVubmVyLm11dGF0aW9uUmVxdWVzdHMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBbMiAvKnJldHVybiovLCBfYS5zZW50KCldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS5kZWxldGVSZWFsbSA9IGZ1bmN0aW9uIChyZWFsbSkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzLCBfYSwgX2I7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYykge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYy5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5odHRwLmRlbGV0ZShcInJlYWxtcy9cIiArIHJlYWxtKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcy5zdGF0dXMgIT0gMjAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gSHR0cEVycm9yLmJpbmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gW3ZvaWQgMCwgcmVzLnN0YXR1c107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJlcy50ZXh0KCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogdGhyb3cgbmV3IChfYS5hcHBseShIdHRwRXJyb3IsIF9iLmNvbmNhdChbX2Muc2VudCgpXSkpKSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLmpzb24oKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qLywgX2Muc2VudCgpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHRhYmxlLCBkb2MsIGJyYW5jaElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIuYWRkKHRhYmxlLCBkb2MpOyB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ2xpZW50LnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbiAodGFibGUsIGRvYykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLnB1dCh0YWJsZSwgZG9jKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHRhYmxlLCBpZCwgZGVsdGFEb2MsIGJyYW5jaElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIudXBkYXRlKHRhYmxlLCBpZCwgZGVsdGFEb2MsIGJyYW5jaElkKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUubWVyZ2UgPSBmdW5jdGlvbiAoYnJhbmNoSWQsIHRhcmdldEJyYW5jaElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG8oZnVuY3Rpb24gKHIpIHsgcmV0dXJuIHIubWVyZ2UoYnJhbmNoSWQsIHRhcmdldEJyYW5jaElkKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUuY2xlYXJCcmFuY2ggPSBmdW5jdGlvbiAoYnJhbmNoSWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci5jbGVhckJyYW5jaChicmFuY2hJZCk7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uICh0YWJsZSwgaWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci5kZWxldGUodGFibGUsIGlkKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUuc2hhcmUgPSBmdW5jdGlvbiAodGFibGUsIGlkLCBhY2wpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci5zaGFyZSh0YWJsZSwgaWQsIGFjbCk7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLnVuc2hhcmUgPSBmdW5jdGlvbiAodGFibGUsIGlkLCBhY2wpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci51bnNoYXJlKHRhYmxlLCBpZCwgYWNsKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUubGluayA9IGZ1bmN0aW9uIChzb3VyY2VUYWJsZSwgc291cmNlSWQsIHRhcmdldFRhYmxlLCB0YXJnZXRJZCwgbGFiZWwpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci5saW5rKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgdGFyZ2V0VGFibGUsIHRhcmdldElkLCBsYWJlbCk7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLmxpbmsyID0gZnVuY3Rpb24gKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgdGFyZ2V0SWQsIGxhYmVsLCBicmFuY2hJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLmxpbmsyKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgbGFiZWwsIHRhcmdldElkLCBicmFuY2hJZCk7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLnVubGluayA9IGZ1bmN0aW9uIChzb3VyY2VUYWJsZSwgc291cmNlSWQsIHRhcmdldFRhYmxlLCB0YXJnZXRJZCwgbGFiZWwpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci51bmxpbmsoc291cmNlVGFibGUsIHNvdXJjZUlkLCB0YXJnZXRUYWJsZSwgdGFyZ2V0SWQsIGxhYmVsKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENsaWVudC5wcm90b3R5cGUudW5saW5rMiA9IGZ1bmN0aW9uIChzb3VyY2VUYWJsZSwgc291cmNlSWQsIHRhcmdldElkLCBsYWJlbCwgYnJhbmNoSWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kbyhmdW5jdGlvbiAocikgeyByZXR1cm4gci51bmxpbmsyKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgbGFiZWwsIHRhcmdldElkLCBicmFuY2hJZCk7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDbGllbnQucHJvdG90eXBlLnVuZG9MaW5rID0gZnVuY3Rpb24gKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgdGFyZ2V0SWQsIGxhYmVsLCBicmFuY2hJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRvKGZ1bmN0aW9uIChyKSB7IHJldHVybiByLnVuZG9MaW5rKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgbGFiZWwsIHRhcmdldElkLCBicmFuY2hJZCk7IH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBLZWRCYWNrZW5kQ2xpZW50O1xyXG59KCkpO1xyXG5leHBvcnQgeyBLZWRCYWNrZW5kQ2xpZW50IH07XHJcbnZhciBCYXRjaFJ1bm5lciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEJhdGNoUnVubmVyKCkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cyA9IFtdO1xyXG4gICAgfVxyXG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh0YWJsZSwgZG9jLCBicmFuY2hJZCkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICdhZGQnLCB0YWJsZTogdGFibGUsIGRvYzogZG9jLCBicmFuY2hJZDogYnJhbmNoSWQgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLnB1dCA9IGZ1bmN0aW9uICh0YWJsZSwgZG9jKSB7XHJcbiAgICAgICAgZG9jID0gdHNsaWJfMS5fX2Fzc2lnbih7fSwgZG9jKTtcclxuICAgICAgICBkZWxldGUgZG9jLmFjbDsgLy8gRm9yYmlkZGVuIHRvIHNlbmQgYWNsIHdpdGggcHV0KCkgY2FsbHMuXHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ3B1dCcsIHRhYmxlOiB0YWJsZSwgZG9jOiBkb2MgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICh0YWJsZSwgaWQsIGRlbHRhRG9jLCBicmFuY2hJZCkge1xyXG4gICAgICAgIGRlbHRhRG9jID0gdHNsaWJfMS5fX2Fzc2lnbih7fSwgZGVsdGFEb2MpO1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICd1cGRhdGUnLCB0YWJsZTogdGFibGUsIGlkOiBpZCwgZGVsdGFEb2M6IGRlbHRhRG9jLCBicmFuY2hJZDogYnJhbmNoSWQgfSk7XHJcbiAgICB9O1xyXG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLm1lcmdlID0gZnVuY3Rpb24gKGJyYW5jaElkLCB0YXJnZXRCcmFuY2hJZCkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICdtZXJnZScsIGJyYW5jaElkOiBicmFuY2hJZCwgdGFyZ2V0QnJhbmNoSWQ6IHRhcmdldEJyYW5jaElkIH0pO1xyXG4gICAgfTtcclxuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS5jbGVhckJyYW5jaCA9IGZ1bmN0aW9uIChicmFuY2hJZCkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICdjbGVhci1icmFuY2gnLCBicmFuY2hJZDogYnJhbmNoSWQgfSk7XHJcbiAgICB9O1xyXG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uICh0YWJsZSwgaWQpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUmVxdWVzdHMucHVzaCh7IG9wOiAnZGVsZXRlJywgdGFibGU6IHRhYmxlLCBpZDogaWQgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLnNoYXJlID0gZnVuY3Rpb24gKHRhYmxlLCBpZCwgYWNsKSB7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ3NoYXJlJywgdGFibGU6IHRhYmxlLCBpZDogaWQsIGFjbDogYWNsIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuICAgIEJhdGNoUnVubmVyLnByb3RvdHlwZS51bnNoYXJlID0gZnVuY3Rpb24gKHRhYmxlLCBpZCwgYWNsKSB7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ3Vuc2hhcmUnLCB0YWJsZTogdGFibGUsIGlkOiBpZCwgYWNsOiBhY2wgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLmxpbmsgPSBmdW5jdGlvbiAoc291cmNlVGFibGUsIHNvdXJjZUlkLCB0YXJnZXRUYWJsZSwgdGFyZ2V0SWQsIGxhYmVsKSB7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ2xpbmsnLCBzb3VyY2VUYWJsZTogc291cmNlVGFibGUsIHNvdXJjZUlkOiBzb3VyY2VJZCwgdGFyZ2V0VGFibGU6IHRhcmdldFRhYmxlLCB0YXJnZXRJZDogdGFyZ2V0SWQsIGxhYmVsOiBsYWJlbCB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBCYXRjaFJ1bm5lci5wcm90b3R5cGUubGluazIgPSBmdW5jdGlvbiAoc291cmNlVGFibGUsIHNvdXJjZUlkLCBsYWJlbCwgdGFyZ2V0SWQsIGJyYW5jaElkKSB7XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblJlcXVlc3RzLnB1c2goeyBvcDogJ2xpbmsnLCBzb3VyY2VUYWJsZTogc291cmNlVGFibGUsIHNvdXJjZUlkOiBzb3VyY2VJZCwgdGFyZ2V0SWQ6IHRhcmdldElkLCBsYWJlbDogbGFiZWwsIGJyYW5jaElkOiBicmFuY2hJZCB9KTtcclxuICAgIH07XHJcbiAgICBCYXRjaFJ1bm5lci5wcm90b3R5cGUudW5saW5rID0gZnVuY3Rpb24gKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgdGFyZ2V0VGFibGUsIHRhcmdldElkLCBsYWJlbCkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICd1bmxpbmsnLCBzb3VyY2VUYWJsZTogc291cmNlVGFibGUsIHNvdXJjZUlkOiBzb3VyY2VJZCwgdGFyZ2V0VGFibGU6IHRhcmdldFRhYmxlLCB0YXJnZXRJZDogdGFyZ2V0SWQsIGxhYmVsOiBsYWJlbCB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH07XHJcbiAgICBCYXRjaFJ1bm5lci5wcm90b3R5cGUudW5saW5rMiA9IGZ1bmN0aW9uIChzb3VyY2VUYWJsZSwgc291cmNlSWQsIGxhYmVsLCB0YXJnZXRJZCwgYnJhbmNoSWQpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUmVxdWVzdHMucHVzaCh7IG9wOiAndW5saW5rJywgc291cmNlVGFibGU6IHNvdXJjZVRhYmxlLCBzb3VyY2VJZDogc291cmNlSWQsIHRhcmdldElkOiB0YXJnZXRJZCwgbGFiZWw6IGxhYmVsLCBicmFuY2hJZDogYnJhbmNoSWQgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgQmF0Y2hSdW5uZXIucHJvdG90eXBlLnVuZG9MaW5rID0gZnVuY3Rpb24gKHNvdXJjZVRhYmxlLCBzb3VyY2VJZCwgbGFiZWwsIHRhcmdldElkLCBicmFuY2hJZCkge1xyXG4gICAgICAgIHRoaXMubXV0YXRpb25SZXF1ZXN0cy5wdXNoKHsgb3A6ICd1bmRvLWxpbmsnLCBzb3VyY2VUYWJsZTogc291cmNlVGFibGUsIHNvdXJjZUlkOiBzb3VyY2VJZCwgdGFyZ2V0SWQ6IHRhcmdldElkLCBsYWJlbDogbGFiZWwsIGJyYW5jaElkOiBicmFuY2hJZCB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQmF0Y2hSdW5uZXI7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IEJhdGNoUnVubmVyIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IFJlc3RDbGllbnQgfSBmcm9tICcuL3Jlc3RjbGllbnQnO1xyXG5pbXBvcnQgeyBhdm9pZFNpbXVsdGFub3VzQ2FsbHMgfSBmcm9tICcuL3V0aWxzJztcclxudmFyIEtlZEJlYXJlclByb3ZpZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gS2VkQmVhcmVyUHJvdmlkZXIoaXNvbW9ycGhpYywgc3RvcmFnZSwgdG9rZW5JZCwgY2xpZW50SWQsIGNsaWVudFNlY3JldCwgdG9rZW5VcmwsIHRva2VuUXVlcnkpIHtcclxuICAgICAgICB0aGlzLmlzb21vcnBoaWMgPSBpc29tb3JwaGljO1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZSA9IHN0b3JhZ2U7XHJcbiAgICAgICAgdGhpcy50b2tlbklkID0gdG9rZW5JZDtcclxuICAgICAgICB0aGlzLmNsaWVudElkID0gY2xpZW50SWQ7XHJcbiAgICAgICAgdGhpcy5jbGllbnRTZWNyZXQgPSBjbGllbnRTZWNyZXQ7XHJcbiAgICAgICAgdGhpcy50b2tlblVybCA9IHRva2VuVXJsO1xyXG4gICAgICAgIHRoaXMudG9rZW5RdWVyeSA9IHRva2VuUXVlcnk7XHJcbiAgICAgICAgdGhpcy50b2tlbkluZm8gPSB7IHRva2VuOiBudWxsLCBleHBpcmVzOiAwIH07XHJcbiAgICAgICAgdGhpcy5jbGllbnQgPSBuZXcgUmVzdENsaWVudChpc29tb3JwaGljLCBcIlwiLCB7XHJcbiAgICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLmNsaWVudElkLFxyXG4gICAgICAgICAgICBwYXNzd29yZDogdGhpcy5jbGllbnRTZWNyZXRcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmdldEJlYXJlciA9IGF2b2lkU2ltdWx0YW5vdXNDYWxscyh0aGlzLmdldEJlYXJlci5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLnJlZnJlc2hCZWFyZXIgPSBhdm9pZFNpbXVsdGFub3VzQ2FsbHModGhpcy5yZWZyZXNoQmVhcmVyLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG4gICAgS2VkQmVhcmVyUHJvdmlkZXIucHJvdG90eXBlLmdldEJlYXJlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIF9hLCB0b2tlbiwgZXhwaXJlcywgX2IsIGVfMTtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IHRoaXMudG9rZW5JbmZvLCB0b2tlbiA9IF9hLnRva2VuLCBleHBpcmVzID0gX2EuZXhwaXJlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuICYmIGV4cGlyZXMgPj0gRGF0ZS5ub3coKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnRva2VuSW5mb107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLmxhYmVsID0gMTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLnRyeXMucHVzaChbMSwgNCwgLCA2XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5zdG9yYWdlLmxvYWQodGhpcy5jbGllbnRJZCArIFwiL1wiICsgdGhpcy50b2tlbklkKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYi50b2tlbkluZm8gPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRva2VuSW5mby50b2tlbiAmJiB0aGlzLnRva2VuSW5mby5leHBpcmVzID49IERhdGUubm93KCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy50b2tlbkluZm9dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlZnJlc2hCZWFyZXIoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnRva2VuSW5mb107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlXzEgPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVmcmVzaEJlYXJlcigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMudG9rZW5JbmZvXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmVhcmVyUHJvdmlkZXIucHJvdG90eXBlLnJlZnJlc2hCZWFyZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByZXMsIHJldHJpZXMsIF9hLCBfYjtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9jKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXRyaWVzID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2MubGFiZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEocmV0cmllcyA8IDYpKSByZXR1cm4gWzMgLypicmVhayovLCA1XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZXRyaWV2aW5nIHRva2VuIGZvciBcIiArIHRoaXMudG9rZW5JZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuY2xpZW50LmdldCh0aGlzLnRva2VuVXJsLCB0aGlzLnRva2VuUXVlcnksIHsgY2FjaGU6ICdyZWxvYWQnIH0pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IF9jLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgIT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiR290IFwiICsgcmVzLnN0YXR1cyArIFwiIFwiICsgcmVzLnN0YXR1c1RleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByZXMudGV4dCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRva2VuSW5mbyA9IChfYi50b2tlbiA9IF9jLnNlbnQoKSwgX2IuZXhwaXJlcyA9IERhdGUubm93KCkgKyA1OSAqIDYwICogMTAwMCwgX2IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkdvdCB0b2tlbiBmb3IgXCIgKyB0aGlzLnRva2VuSWQgKyBcIjogXCIgKyBKU09OLnN0cmluZ2lmeSh0aGlzLnRva2VuSW5mbykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3JhZ2Uuc2F2ZSh0aGlzLmNsaWVudElkICsgXCIvXCIgKyB0aGlzLnRva2VuSWQsIHRoaXMudG9rZW5JbmZvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMudG9rZW5JbmZvXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICsrcmV0cmllcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OiB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcmV0cmlldmUgdG9rZW4gZm9yIFwiICsgSlNPTi5zdHJpbmdpZnkodGhpcy50b2tlbklkKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBLZWRCZWFyZXJQcm92aWRlcjtcclxufSgpKTtcclxuZXhwb3J0IHsgS2VkQmVhcmVyUHJvdmlkZXIgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9a2VkLWJlYXJlci1wcm92aWRlci5qcy5tYXAiLCIvKlxyXG5kZWNsYXJlIHZhciBCdWZmZXI7IC8vIG5vZGUgYnVpbHQtaW5cclxuXHJcblxyXG5mdW5jdGlvbiBiYXNpY0F1dGhIZWFkZXIodXNlcm5hbWUsIHBhc3N3b3JkKSB7XHJcbiAgICByZXR1cm4gXCJCYXNpYyBcIiArIG5ldyBCdWZmZXIodXNlcm5hbWUgKyBcIjpcIiArIHBhc3N3b3JkKS50b1N0cmluZyhcImJhc2U2NFwiKTtcclxufVxyXG4qL1xyXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBjcmVhdGVVVUlEIH0gZnJvbSBcIi4vdXRpbHNcIjtcclxuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJy4uL29ic2VydmFibGUvZW1pdHRlcic7XHJcbnZhciBSZXN0Q2xpZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUmVzdENsaWVudChpc29tb3JwaGljLCBiYXNlVXJsLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5pc29tb3JwaGljID0gaXNvbW9ycGhpYztcclxuICAgICAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAgICAgdGhpcy5udW1PdXRzdGFuZGluZ09wZXJhdGlvbnMgPSAwO1xyXG4gICAgICAgIHRoaXMuX3N0YXR1cyA9IG5ldyBFbWl0dGVyKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZmV0Y2hPcHRpb25zID0geyBtb2RlOiAnY29ycycgfTtcclxuICAgICAgICB0aGlzLmF1dGhIZWFkZXIgPSBvcHRpb25zLmJlYXJlciA/XHJcbiAgICAgICAgICAgIFwiQmVhcmVyIFwiICsgb3B0aW9ucy5iZWFyZXIgOlxyXG4gICAgICAgICAgICBvcHRpb25zLnVzZXJuYW1lID9cclxuICAgICAgICAgICAgICAgIFwiQmFzaWMgXCIgKyBpc29tb3JwaGljLmJ0b2Eob3B0aW9ucy51c2VybmFtZSArIFwiOlwiICsgKG9wdGlvbnMucGFzc3dvcmQgfHwgXCJcIikpIDpcclxuICAgICAgICAgICAgICAgIG51bGw7XHJcbiAgICAgICAgdGhpcy5iZWFyZXJQcm92aWRlciA9IG9wdGlvbnMuYmVhcmVyUHJvdmlkZXIgfHwgbnVsbDtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN0Q2xpZW50LnByb3RvdHlwZSwgXCJzdGF0dXNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RhdHVzO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgUmVzdENsaWVudC5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbiAocGF0aCwgbWV0aG9kLCBoZWFkZXJzLCBxdWVyeSwgZmV0Y2hPcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICArK3RoaXMubnVtT3V0c3RhbmRpbmdPcGVyYXRpb25zO1xyXG4gICAgICAgIHRoaXMuX3N0YXR1cy5kaXNwYXRjaCh0aGlzKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZmV0Y2gocGF0aCwgbWV0aG9kLCBoZWFkZXJzLCBxdWVyeSwgZmV0Y2hPcHRpb25zKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgIC0tX3RoaXMubnVtT3V0c3RhbmRpbmdPcGVyYXRpb25zO1xyXG4gICAgICAgICAgICBfdGhpcy5fc3RhdHVzLmRpc3BhdGNoKF90aGlzKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcztcclxuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgIC0tX3RoaXMubnVtT3V0c3RhbmRpbmdPcGVyYXRpb25zO1xyXG4gICAgICAgICAgICBfdGhpcy5fc3RhdHVzLmRpc3BhdGNoKF90aGlzKTtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUmVzdENsaWVudC5wcm90b3R5cGUuX2ZldGNoID0gZnVuY3Rpb24gKHBhdGgsIG1ldGhvZCwgaGVhZGVycywgcXVlcnksIGZldGNoT3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcXVlcnlTdHIsIF9hLCBhdXRoSGVhZGVyLCB0b2tlbkluZm8sIGJlYXJlclByb3ZpZGVyLCBfYiwgX2MsIHVybCwgcmVzLCB3d3dhdXRoLCBfZDtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9lKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9lLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmV0Y2hPcHRpb25zICYmIGZldGNoT3B0aW9ucy5jYWNoZSA9PT0gJ25vLWNhY2hlJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgYmFjay1idXR0b24gbm90IHJlc3BlY3RpbmcgY2FjaGUgY29udHJvbCBpbiBDaHJvbWUvT3BlcmEuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBlbmQgYSBxdWVyeSBwYXJhbWV0ZXIgdG8gZm9yY2UgYSBjYWNoZSBlbnRyeVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnkgPSB0c2xpYl8xLl9fYXNzaWduKHt9LCBxdWVyeSwgeyBub2NhY2hlOiBjcmVhdGVVVUlEKCkgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlTdHIgPSBxdWVyeSAmJiBPYmplY3Qua2V5cyhxdWVyeSkuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuIHF1ZXJ5W2tleV0gIT09IHVuZGVmaW5lZDsgfSkubWFwKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoa2V5KSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI9XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuY29kZVVSSUNvbXBvbmVudChxdWVyeVtrZXldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKCcmJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gdGhpcywgYXV0aEhlYWRlciA9IF9hLmF1dGhIZWFkZXIsIHRva2VuSW5mbyA9IF9hLnRva2VuSW5mbywgYmVhcmVyUHJvdmlkZXIgPSBfYS5iZWFyZXJQcm92aWRlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoIWF1dGhIZWFkZXIgJiYgIXRva2VuSW5mbyAmJiBiZWFyZXJQcm92aWRlcikpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGJlYXJlclByb3ZpZGVyLmdldEJlYXJlcigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLnRva2VuSW5mbyA9IHRva2VuSW5mbyA9IF9lLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2UubGFiZWwgPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0b2tlbkluZm8pIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0b2tlbkluZm8uZXhwaXJlcyA8IERhdGUubm93KCkpKSByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJUb2tlbiBleHBpcmVkLiBSZWZyZXNoIGl0OlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2MgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBiZWFyZXJQcm92aWRlci5yZWZyZXNoQmVhcmVyKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2MudG9rZW5JbmZvID0gdG9rZW5JbmZvID0gX2Uuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZS5sYWJlbCA9IDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRoSGVhZGVyID0gXCJCZWFyZXIgXCIgKyB0b2tlbkluZm8udG9rZW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9lLmxhYmVsID0gNTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluIG9uZSB3YXkgb3IgYW5vdGhlciwgd2UndmUgY29uY2x1ZGVkIGFuIEF1dGhvcml6YXRpb24gaGVhZGVyIHRvIHVzZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF1dGhIZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IGF1dGhIZWFkZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gdGhpcy5iYXNlVXJsICsgcGF0aCArIChxdWVyeVN0ciA/IFwiP1wiICsgcXVlcnlTdHIgOiBcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5pc29tb3JwaGljLmZldGNoKHVybCwgdHNsaWJfMS5fX2Fzc2lnbih7fSwgdGhpcy5mZXRjaE9wdGlvbnMsIHsgaGVhZGVyczogaGVhZGVycywgbWV0aG9kOiBtZXRob2QgfSwgZmV0Y2hPcHRpb25zKSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2Uuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXMuc3RhdHVzID09IDQwMSAmJiB0aGlzLmJlYXJlclByb3ZpZGVyKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgOV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHd3d2F1dGggPSByZXMuaGVhZGVycy5nZXQoXCJ3d3ctYXV0aGVudGljYXRlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkdvdCBcIiArIHJlcy5zdGF0dXMgKyBcIiBmcm9tIFwiICsgKHRoaXMuYmFzZVVybCArIHBhdGgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEod3d3YXV0aCAmJiAvQmVhcmVyL2kudGVzdCh3d3dhdXRoKSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZCA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuYmVhcmVyUHJvdmlkZXIucmVmcmVzaEJlYXJlcigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kLnRva2VuSW5mbyA9IF9lLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVycy5BdXRob3JpemF0aW9uID0gXCJCZWFyZXIgXCIgKyB0aGlzLnRva2VuSW5mby50b2tlbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5pc29tb3JwaGljLmZldGNoKHVybCwgdHNsaWJfMS5fX2Fzc2lnbih7fSwgdGhpcy5mZXRjaE9wdGlvbnMsIHsgaGVhZGVyczogaGVhZGVycywgbWV0aG9kOiBtZXRob2QgfSwgZmV0Y2hPcHRpb25zKSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gX2Uuc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfZS5sYWJlbCA9IDk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA5OiByZXR1cm4gWzIgLypyZXR1cm4qLywgcmVzXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUmVzdENsaWVudC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHBhdGgsIHF1ZXJ5LCBmZXRjaE9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mZXRjaChwYXRoLCBcIkdFVFwiLCB7IEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uOyB0ZXh0L3BsYWluXCIgfSwgcXVlcnksIGZldGNoT3B0aW9ucyk7XHJcbiAgICB9O1xyXG4gICAgUmVzdENsaWVudC5wcm90b3R5cGUucG9zdCA9IGZ1bmN0aW9uIChwYXRoLCBkYXRhLCBmZXRjaE9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mZXRjaChwYXRoLCBcIlBPU1RcIiwge1xyXG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICAgICAgXCJBY2NlcHRcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICB9LCBudWxsLCB0c2xpYl8xLl9fYXNzaWduKHt9LCBmZXRjaE9wdGlvbnMsIHsgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSkgfSkpO1xyXG4gICAgfTtcclxuICAgIFJlc3RDbGllbnQucHJvdG90eXBlLmRlbGV0ZSA9IGZ1bmN0aW9uIChwYXRoLCBxdWVyeSwgYm9keSwgZmV0Y2hPcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2gocGF0aCwgXCJERUxFVEVcIiwgeyBBY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvbjsgdGV4dC9wbGFpblwiIH0sIHF1ZXJ5LCB0c2xpYl8xLl9fYXNzaWduKHt9LCBmZXRjaE9wdGlvbnMsIHsgYm9keTogYm9keSB9KSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFJlc3RDbGllbnQ7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IFJlc3RDbGllbnQgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVzdGNsaWVudC5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVVVJRCgpIHtcclxuICAgIC8vIERlY2VudCBzb2x1dGlvbiBmcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTA1MDM0L2hvdy10by1jcmVhdGUtYS1ndWlkLXV1aWQtaW4tamF2YXNjcmlwdFxyXG4gICAgdmFyIGQgPSBEYXRlLm5vdygpO1xyXG4gICAgdmFyIHV1aWQgPSAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjKSB7XHJcbiAgICAgICAgdmFyIHIgPSAoZCArIE1hdGgucmFuZG9tKCkgKiAxNikgJSAxNiB8IDA7XHJcbiAgICAgICAgZCA9IE1hdGguZmxvb3IoZCAvIDE2KTtcclxuICAgICAgICByZXR1cm4gKGMgPT09ICd4JyA/IHIgOiAociAmIDB4NyB8IDB4OCkpLnRvU3RyaW5nKDE2KTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHV1aWQ7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIGF2b2lkU2ltdWx0YW5vdXNDYWxscyhtZXRob2QpIHtcclxuICAgIHZhciBvbmdvaW5nUHJvbWlzZSA9IG51bGw7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghb25nb2luZ1Byb21pc2UpIHtcclxuICAgICAgICAgICAgb25nb2luZ1Byb21pc2UgPSBtZXRob2QuYXBwbHkodGhpcywgYXJndW1lbnRzKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIG9uZ29pbmdQcm9taXNlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb25nb2luZ1Byb21pc2U7XHJcbiAgICB9O1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRHbG9iYWxJZChyZWFsbSkge1xyXG4gICAgdmFyIHByZWZpeCA9ICdlYzk2YjNiZS00NWZjLTQxZDMtYjY5ZS0nO1xyXG4gICAgdmFyIHBhZCA9IFsnNTAnLCAnMDgnLCAnZTEnLCAnNDAnLCAnZTQnLCAnZTcnXTtcclxuICAgIGlmIChyZWFsbS5sZW5ndGggPiA2KVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRvbyBsb25nIHJlYWxtXCIpO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWFsbS5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIHZhciBoZXggPSByZWFsbS5jaGFyQ29kZUF0KGkpLnRvU3RyaW5nKDE2KTtcclxuICAgICAgICBwYWRbaV0gPSBoZXgubGVuZ3RoID09PSAyID9cclxuICAgICAgICAgICAgaGV4IDpcclxuICAgICAgICAgICAgJzAnICsgaGV4O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHByZWZpeCArIHBhZC5qb2luKCcnKTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZVByZWRlc3RpbmF0ZWRJZChpbnB1dCkge1xyXG4gICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGVuY29kZXIsIGRhdGEsIGRpZ2VzdCwgX2EsIGk7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGVuY29kZXIuZW5jb2RlKGlucHV0KTtcclxuICAgICAgICAgICAgICAgICAgICBfYSA9IFVpbnQ4QXJyYXkuYmluZDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBjcnlwdG8uc3VidGxlLmRpZ2VzdCgnU0hBLTI1NicsIGRhdGEpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBkaWdlc3QgPSBuZXcgKF9hLmFwcGx5KFVpbnQ4QXJyYXksIFt2b2lkIDAsIF9iLnNlbnQoKV0pKSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGkgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmliYmxlID0gZGlnZXN0W2krK10gJSAxNiB8IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgd2FzaGVkTmliYmxlID0gYyA9PT0gJ3gnID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaWJibGUgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pYmJsZSAmIDB4NyB8IDB4ODtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3YXNoZWROaWJibGUudG9TdHJpbmcoMTYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBzaW1wbGVEaWdlc3QoaW5wdXQpIHtcclxuICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbmNvZGVyLCBpbnB1dEJ5dGVzLCBkaWdlc3RCeXRlcywgX2E7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRCeXRlcyA9IGVuY29kZXIuZW5jb2RlKGlucHV0KTtcclxuICAgICAgICAgICAgICAgICAgICBfYSA9IFVpbnQ4QXJyYXkuYmluZDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBjcnlwdG8uc3VidGxlLmRpZ2VzdCgnU0hBLTI1NicsIGlucHV0Qnl0ZXMpXTtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBkaWdlc3RCeXRlcyA9IG5ldyAoX2EuYXBwbHkoVWludDhBcnJheSwgW3ZvaWQgMCwgX2Iuc2VudCgpLCAwLCAxNl0pKSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBidWYyaGV4KGRpZ2VzdEJ5dGVzKV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBidWYyaGV4KGJ1ZmZlcikge1xyXG4gICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChidWZmZXIsIGZ1bmN0aW9uICh4KSB7IHJldHVybiAoJzAwJyArIHgudG9TdHJpbmcoMTYpKS5zbGljZSgtMik7IH0pLmpvaW4oJycpO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVBcnJheShhLCBtYXBwZXIpIHtcclxuICAgIHZhciByZXR2YWwgPSBhO1xyXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhLmxlbmd0aDsgaSA8IGw7ICsraSkge1xyXG4gICAgICAgIHZhciB0ID0gYVtpXTtcclxuICAgICAgICB2YXIgbWFwcGVkID0gbWFwcGVyKHQpO1xyXG4gICAgICAgIGlmIChtYXBwZWQgIT09IHQpIHtcclxuICAgICAgICAgICAgaWYgKHJldHZhbCA9PT0gYSlcclxuICAgICAgICAgICAgICAgIHJldHZhbCA9IGEuc2xpY2UoKTtcclxuICAgICAgICAgICAgcmV0dmFsW2ldID0gbWFwcGVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZXR2YWw7XHJcbn1cclxuLypcclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUFycmF5PFQ+KGE6IFRbXSwgbWFwcGVyOiAodDogVCkgPT4gVCB8IGZhbHNlKTogVFtdIHtcclxuICBsZXQgcmV0dmFsID0gYTtcclxuICBsZXQgaiA9IDA7XHJcbiAgZm9yIChsZXQgaT0wLGw9YS5sZW5ndGg7IGk8bDsgKytpLCArK2opIHtcclxuICAgIGNvbnN0IHQgPSBhW2ldO1xyXG4gICAgY29uc3QgbWFwcGVkID0gbWFwcGVyKHQpO1xyXG4gICAgaWYgKG1hcHBlZCA9PT0gZmFsc2UpIHtcclxuICAgICAgLy8gTWFwcGVyIHdhbnRzIHRvIGRlbGV0ZSB0aGlzIGRvYy5cclxuICAgICAgaWYgKHJldHZhbCA9PT0gYSkgcmV0dmFsID0gYS5zbGljZSgpO1xyXG4gICAgICByZXR2YWwuc3BsaWNlKGosIDEpO1xyXG4gICAgICAtLWo7IC8vIGNvbXBlbnNhdGUgZm9yICsralxyXG4gICAgfSBlbHNlIGlmIChtYXBwZWQgIT09IHQpIHtcclxuICAgICAgaWYgKHJldHZhbCA9PT0gYSkgcmV0dmFsID0gYS5zbGljZSgpO1xyXG4gICAgICByZXR2YWxbal0gPSBtYXBwZWQ7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiByZXR2YWw7XHJcbn1cclxuKi8gXHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWxzLmpzLm1hcCIsImltcG9ydCAqIGFzIEpzb25TY2hlbWEgZnJvbSBcImtlZGJhY2tlbmQtc2NoZW1hL3NjaGVtYS5qc29uXCI7XHJcbmltcG9ydCB7IGdldFRhYmxlRnJvbUxhYmVsIH0gZnJvbSBcIi4vdXRpbHNcIjtcclxudmFyIENhY2hlQnVzdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIENhY2hlQnVzdCgpIHtcclxuICAgIH1cclxuICAgIENhY2hlQnVzdC5nZXRDYWNoZUJ1c3QgPSBmdW5jdGlvbiAodGFibGUsIHF1ZXJ5LCB1c2VyLCBpbmNsdWRlcykge1xyXG4gICAgICAgIHZhciBpbnZvbHZlZEl0ZW1zID0gQ2FjaGVCdXN0LmdldEludm9sdmVkSXRlbXModGFibGUsIHF1ZXJ5LCBpbmNsdWRlcyk7XHJcbiAgICAgICAgcmV0dXJuIGludm9sdmVkSXRlbXNcclxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJjYWNoZS1idXN0LVwiICsgdXNlciArIFwiLVwiICsgaXRlbSk7IH0pXHJcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiAhIXZhbHVlOyB9KVxyXG4gICAgICAgICAgICAuam9pbignLycpIHx8ICdzdGF0aWMnO1xyXG4gICAgfTtcclxuICAgIENhY2hlQnVzdC5pbnZhbGlkYXRlQ2FjaGUgPSBmdW5jdGlvbiAocmVxcywgdXNlcikge1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBDYWNoZUJ1c3QuZ2V0Q2FjaGVJbnZhbGlkYXRpb25zKHJlcXMpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgaXRlbSA9IF9hW19pXTtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjYWNoZS1idXN0LVwiICsgdXNlciArIFwiLVwiICsgaXRlbSwgJycgKyBEYXRlLm5vdygpKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQ2FjaGVCdXN0LmdldEludm9sdmVkSXRlbXMgPSBmdW5jdGlvbiAodGFibGUsIHF1ZXJ5LCBpbmNsdWRlcykge1xyXG4gICAgICAgIHZhciBoYXNFZGdlc0Zyb20gPSBxdWVyeS5oYXNFZGdlc0Zyb207XHJcbiAgICAgICAgdmFyIHJlbGF0ZWRUYWJsZXMgPSBpbmNsdWRlc1xyXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChsYWJlbCkgeyByZXR1cm4gSnNvblNjaGVtYS50YWJsZXNbdGFibGVdLnJlbGF0aW9uc2hpcHNbbGFiZWxdOyB9KVxyXG4gICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uICh0YWJsZSkgeyByZXR1cm4gISF0YWJsZTsgfSk7XHJcbiAgICAgICAgaWYgKGhhc0VkZ2VzRnJvbSlcclxuICAgICAgICAgICAgcmVsYXRlZFRhYmxlcy5wdXNoKFwiaGVmXCIgKyB0YWJsZSk7XHJcbiAgICAgICAgcmV0dXJuIFt0YWJsZSwgJ21hc3RlcicsIHF1ZXJ5LmJyYW5jaElkXS5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuICEheDsgfSkuY29uY2F0KHJlbGF0ZWRUYWJsZXMpLnNvcnQoKTtcclxuICAgIH07XHJcbiAgICBDYWNoZUJ1c3QuZ2V0Q2FjaGVJbnZhbGlkYXRpb25zID0gZnVuY3Rpb24gKHJlcXMpIHtcclxuICAgICAgICB2YXIgaW52YWxpZGF0aW9uU2V0ID0ge307XHJcbiAgICAgICAgcmVxcy5mb3JFYWNoKGZ1bmN0aW9uIChyZXEpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChyZXEub3ApIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2FkZCc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICdwdXQnOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3VwZGF0ZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZGF0aW9uU2V0W3JlcS50YWJsZV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbGluayc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICd1bmxpbmsnOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAndW5kby1saW5rJzpcclxuICAgICAgICAgICAgICAgICAgICBpbnZhbGlkYXRpb25TZXRbcmVxLnNvdXJjZVRhYmxlXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZGF0aW9uU2V0W1wiaGVmLVwiICsgZ2V0VGFibGVGcm9tTGFiZWwocmVxLnNvdXJjZVRhYmxlLCByZXEubGFiZWwpXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdjbGVhci1icmFuY2gnOlxyXG4gICAgICAgICAgICAgICAgICAgIGludmFsaWRhdGlvblNldFtyZXEuYnJhbmNoSWRdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ21lcmdlJzpcclxuICAgICAgICAgICAgICAgICAgICBpbnZhbGlkYXRpb25TZXRbcmVxLmJyYW5jaElkXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaW52YWxpZGF0aW9uU2V0W3JlcS50YXJnZXRCcmFuY2hJZCB8fCBcIm1hc3RlclwiXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoaW52YWxpZGF0aW9uU2V0KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ2FjaGVCdXN0O1xyXG59KCkpO1xyXG5leHBvcnQgeyBDYWNoZUJ1c3QgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FjaGUtYnVzdC5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBtZXJnZURlbHRhcyB9IGZyb20gJy4uL2RlbHRhLW1lcmdlJztcclxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5TXV0YXRpb25zT25EZWx0YXMoYnJhbmNoSWQsIGRlbHRhcywgbXV0YXRpb25zLCBvcHRpbWlzdGljLCB1c2VyRGlzcGxheU5hbWUsIGhhc0FkZGl0aW9uYWxGaWx0ZXIpIHtcclxuICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKG0pIHtcclxuICAgICAgICBzd2l0Y2ggKG0ub3ApIHtcclxuICAgICAgICAgICAgY2FzZSAnYWRkLXJlbGF0ZWQnOlxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIC8vIEFkZFJlbGF0ZWQgUmVwb011dGF0aW9uXHJcbiAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgaWYgKCFoYXNBZGRpdGlvbmFsRmlsdGVyICYmIG0uYnJhbmNoSWQgPT09IGJyYW5jaElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsdGFzID0gW3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdhZGQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlSWQ6IG0uaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRJZDogbS5yZWxhdGVkRG9jLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IG0uZ3JhcGhQcm9wLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlVGFibGU6IG0udGFibGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWV0YTogb3B0aW1pc3RpYyA/ICdhZGRpbmcnIDogJ3BlcnNpc3RlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlVGltZTogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldE5hbWU6IG0ucmVsYXRlZERvYy5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJpYnV0b3I6IHVzZXJEaXNwbGF5TmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XS5jb25jYXQoZGVsdGFzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdjbGVhci1icmFuY2gnOlxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIC8vIENsZWFyQnJhbmNoIFJlcG9NdXRhdGlvblxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIGlmIChtLmJyYW5jaElkID09PSBicmFuY2hJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbHRhcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XHJcbiAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgLy8gRGVsZXRlIFJlcG9NdXRhdGlvblxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgdHlwZSBvZiBtdXRhdGlvbiBjYW4gbm90IGJlIHBlcmZvcm1lZCBvbnRvIGJyYW5jaGVzLiBUaGVyZSdzIG5vIGJyYW5jaElkIHByb3BlcnR5IG9uIG0uXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnbWVyZ2UnOlxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIC8vIE1lcmdlIFJlcG9NdXRhdGlvblxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIGlmIChtLmJyYW5jaElkID09PSBicmFuY2hJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbHRhcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobS50YXJnZXRCcmFuY2hJZCA9PT0gYnJhbmNoSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGNoYW5nZSB3aWxsIGFwcGVuZCBuZXcgZGVsdGFzIHRvIG91ciBkZWx0YXMgYXJyYXkgYnV0IHdlIGRvbid0IGtub3cgd2hhdCB3b3VsZCBjb21lLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIE5lZWQgdG8gcmVmZXRjaCBmcm9tIHNlcnZlci5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW9wdGltaXN0aWMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBudWxsIH07IC8vIENhbGxlciBzaG91bGQgY2hlY2sgZm9yIG51bGwgYW5kIHJlLWZldGNoIGRhdGEgZnJvbSBzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAncmVtb3ZlLXJlbGF0ZWQnOlxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZS1SZWxhdGVkIFJlcG9NdXRhdGlvblxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIGlmIChoYXNBZGRpdGlvbmFsRmlsdGVyIHx8IG0uYnJhbmNoSWQgIT09IGJyYW5jaElkKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XHJcbiAgICAgICAgICAgICAgICBkZWx0YXMgPSBbe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncmVtb3ZlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlSWQ6IG0uaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldElkOiBtLnJlbGF0ZWREb2MuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldE5hbWU6IG0ucmVsYXRlZERvYy5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogbS5ncmFwaFByb3AsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZVRhYmxlOiBtLnRhYmxlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cmlidXRvcjogdXNlckRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlVGltZTogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJG1ldGE6IG9wdGltaXN0aWMgPyAnYWRkaW5nJyA6ICdwZXJzaXN0ZWQnXHJcbiAgICAgICAgICAgICAgICAgICAgfV0uY29uY2F0KGRlbHRhcyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAndW5kby1saW5rJzpcclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICAvLyBVbmRvLUxpbmsgUmVwb011dGF0aW9uXHJcbiAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgaWYgKG0uYnJhbmNoSWQgIT09IGJyYW5jaElkKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkeCA9IGRlbHRhcy5maW5kSW5kZXgoZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChkLnR5cGUgPT09ICdhZGQnIHx8IGQudHlwZSA9PT0gJ3JlbW92ZScgfHwgZC50eXBlID09PSAndW5kby1saW5rJykgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQuc291cmNlSWQgPT09IG0uaWQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQudGFyZ2V0SWQgPT09IG0ucmVsYXRlZElkO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpZHggPCAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjb250aW51ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIFwiYWRkXCIgb3IgXCJyZW1vdmVcIiBkZWx0YSB0byBjaGFuZ2U6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGltaXN0aWMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhUmVsYXRpb24gPSBkZWx0YXNbaWR4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFyayB0aGUgZXhpc3RpbmcgYWRkL3JlbW92ZSBkZWx0YSBhcyBjdXJyZW5sdHkgYmVpbmcgZGVsZXRlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWx0YXMgPSBkZWx0YXMuc2xpY2UoMCwgaWR4KS5jb25jYXQoW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHNsaWJfMS5fX2Fzc2lnbih7fSwgZGVsdGFSZWxhdGlvbiwgeyAkbWV0YTogb3B0aW1pc3RpYyA/ICdyZW1vdmluZycgOiAncGVyc2lzdGVkJyB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdLCBkZWx0YXMuc2xpY2UoaWR4ICsgMSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGVyc2lzdGVkLiBKdXN0IHJlbW92ZSBpdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsdGFzID0gZGVsdGFzLnNsaWNlKDAsIGlkeCkuY29uY2F0KGRlbHRhcy5zbGljZShpZHggKyAxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3VwZGF0ZSc6XHJcbiAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIFJlcG9NdXRhdGlvblxyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIGlmIChtLmJyYW5jaElkICE9PSBicmFuY2hJZClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJjb250aW51ZVwiO1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSBkZWx0YXMuZmluZEluZGV4KGZ1bmN0aW9uIChkZWx0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVsdGEudHlwZSA9PT0gJ21vZGlmeScgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHRhLnRhcmdldElkID09PSBtLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpZHggPCAwICYmICFoYXNBZGRpdGlvbmFsRmlsdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbHRhcyA9IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ21vZGlmeScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGU6IG0udGFibGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWQ6IG0uaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TmFtZTogbS50YXJnZXROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IG0uZGVsdGFEb2MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZVRpbWU6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJpYnV0b3JzOiBbdXNlckRpc3BsYXlOYW1lXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWV0YTogb3B0aW1pc3RpYyA/ICdhZGRpbmcnIDogJ3BlcnNpc3RlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XS5jb25jYXQoZGVsdGFzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleGlzdGluZ0RlbHRhRG9jID0gZGVsdGFzW2lkeF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250cmlidXRvcnMgPSBleGlzdGluZ0RlbHRhRG9jLmNvbnRyaWJ1dG9ycy5zbGljZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRyaWJ1dG9ycy5pbmNsdWRlcyh1c2VyRGlzcGxheU5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250cmlidXRvcnMucHVzaCh1c2VyRGlzcGxheU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdEYXRhID0gbWVyZ2VEZWx0YXMoZXhpc3RpbmdEZWx0YURvYy5kYXRhLCBtLmRlbHRhRG9jLCB7IHJlbW92ZVVuc2V0UHJvcHM6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb3B0aW1pc3RpYyAmJiBPYmplY3Qua2V5cyhuZXdEYXRhKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbW1pdHRlZCBtdXRhdGlvbiB0aGF0IHJlc2V0cyBhIGRlbHRhRG9jLiBSZW1vdmUgdGhlIGRlbHRhRG9jIGVudGlyZWx5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsdGFzID0gZGVsdGFzLnNsaWNlKDAsIGlkeCkuY29uY2F0KGRlbHRhcy5zbGljZShpZHggKyAxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHRhcyA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdtb2RpZnknLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZTogbS50YWJsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWQ6IG0uaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldE5hbWU6IG0udGFyZ2V0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogbmV3RGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZVRpbWU6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyaWJ1dG9yczogY29udHJpYnV0b3JzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWV0YTogb3B0aW1pc3RpYyA/ICd1cGRhdGluZycgOiAncGVyc2lzdGVkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLmNvbmNhdChkZWx0YXMuc2xpY2UoMCwgaWR4KSwgZGVsdGFzLnNsaWNlKGlkeCArIDEpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBmb3IgKHZhciBfaSA9IDAsIG11dGF0aW9uc18xID0gbXV0YXRpb25zOyBfaSA8IG11dGF0aW9uc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIHZhciBtID0gbXV0YXRpb25zXzFbX2ldO1xyXG4gICAgICAgIHZhciBzdGF0ZV8xID0gX2xvb3BfMShtKTtcclxuICAgICAgICBpZiAodHlwZW9mIHN0YXRlXzEgPT09IFwib2JqZWN0XCIpXHJcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZV8xLnZhbHVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRlbHRhcztcclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHBseS1tdXRhdGlvbnMtb24tZGVsdGFzLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IEh0dHBFcnJvciB9IGZyb20gJy4uLy4uL2tlZC1iYWNrZW5kLWNsaWVudCc7XHJcbmltcG9ydCB7IGFwcGx5TXV0YXRpb25zT25EZWx0YXMgfSBmcm9tICcuL2FwcGx5LW11dGF0aW9ucy1vbi1kZWx0YXMnO1xyXG52YXIgRGVsdGFDYWNoZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERlbHRhQ2FjaGUoZ2V0Q2xpZW50LCBnZXRVc2VyLCBnZXRVc2VyRGlzcGxheU5hbWUpIHtcclxuICAgICAgICB0aGlzLmdldENsaWVudCA9IGdldENsaWVudDtcclxuICAgICAgICB0aGlzLmdldFVzZXIgPSBnZXRVc2VyO1xyXG4gICAgICAgIHRoaXMuZ2V0VXNlckRpc3BsYXlOYW1lID0gZ2V0VXNlckRpc3BsYXlOYW1lO1xyXG4gICAgICAgIHRoaXMubG9va3VwID0ge307XHJcbiAgICB9XHJcbiAgICBEZWx0YUNhY2hlLnByb3RvdHlwZS5hcHBseU11dGF0aW9ucyA9IGZ1bmN0aW9uIChtdXRhdGlvbnMsIF9hKSB7XHJcbiAgICAgICAgdmFyIG9wdGltaXN0aWMgPSAoX2EgPT09IHZvaWQgMCA/IHsgb3B0aW1pc3RpYzogZmFsc2UgfSA6IF9hKS5vcHRpbWlzdGljO1xyXG4gICAgICAgIC8vIEFwcGx5IG11dGF0aW9ucyBsb2NhbGx5IG9udG8gdGhlIERlbHRhQ2FjaGUgYW5kIG5vdGlmeSB0aGVpciBzdWJzY3JpYmVyc1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2IgPSBPYmplY3Qua2V5cyh0aGlzLmxvb2t1cCk7IF9pIDwgX2IubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBxdWVyeUtleSA9IF9iW19pXTtcclxuICAgICAgICAgICAgdmFyIGNhY2hlRW50cnkgPSB0aGlzLmxvb2t1cFtxdWVyeUtleV07XHJcbiAgICAgICAgICAgIGlmIChjYWNoZUVudHJ5LnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJbnN0ZWFkIGhlcmU6IFN0b3JlIHRoZSBtdXRhdGlvbnMgb24gY2FjaGVFbnRyeS4gTm8gbWF0dGVyIGlmIGl0IHlldCBoYXMgdmFsdWUgb3Igbm90LlxyXG4gICAgICAgICAgICAgICAgLy8gVGhlbiBhcHBseSBtdXRhdGlvbiB3aGVuZXZlciBzdWJzY3JpYmluZyEgKEJldHRlciBoYW5kbGluZyBvZiBtdXRhdGlvbnMgdGhhdCBhcnJpdmVzIGJlZm9yZSBmZXRjaCgpIGlzIGRvbmUpXHJcbiAgICAgICAgICAgICAgICAvLyAoU2VlIGhvdyBJIGhhbmRsZSB0aGlzIGluIHF1ZXJ5LXNldC50cylcclxuICAgICAgICAgICAgICAgIHZhciBuZXdWYWx1ZSA9IGFwcGx5TXV0YXRpb25zT25EZWx0YXMoY2FjaGVFbnRyeS5xdWVyeS5icmFuY2hJZCwgY2FjaGVFbnRyeS52YWx1ZSwgbXV0YXRpb25zLCBvcHRpbWlzdGljLCB0aGlzLmdldFVzZXJEaXNwbGF5TmFtZSgpLCAhIWNhY2hlRW50cnkucXVlcnkudGFncyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3VmFsdWUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgbXV0YXRpb24gcmVxdWlyZXMgY2FjaGVFbnRyeSB0byBiZSByZWZldGNoZWQgZnJvbSBzZXJ2ZXJcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW9wdGltaXN0aWMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FsbGVyIGhhcyBzdWNjZXNzZnVsbHkgcGVyZm9ybWVkIHRoZSBtdXRhdGlvbnMgYW5kIGdvdCBzdWNjZXNzIGJhY2sgZnJvbSBzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEl0J3Mgb2sgdG8gcmVmZXRjaCB0aGUgZGVsdGFzIGZyb20gc2VydmVyIG5vdzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVFbnRyeS5mZXRjaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZnRlciBmZXRjaCBjb21wbGV0ZXMsIGl0IHdpbGwgbm90aWZ5IHRoZSBzdWJzY3JpYmVycy5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3VmFsdWUgIT09IGNhY2hlRW50cnkudmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWNoZUVudHJ5Lm9wdGltaXN0aWNWYWx1ZSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghb3B0aW1pc3RpYylcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVFbnRyeS52YWx1ZSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlRW50cnkubm90aWZ5KG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBEZWx0YUNhY2hlLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAocXVlcnksIG9ic2VydmVyKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgY2FjaGVFbnRyeSA9IHRoaXMubG9va3VwW3F1ZXJ5LmJyYW5jaElkICsgcXVlcnkudGFnc107XHJcbiAgICAgICAgaWYgKCFjYWNoZUVudHJ5KSB7XHJcbiAgICAgICAgICAgIGNhY2hlRW50cnkgPSBuZXcgRGVsdGFDYWNoZUVudHJ5KHRoaXMuZ2V0Q2xpZW50KCksIHF1ZXJ5KTtcclxuICAgICAgICAgICAgdGhpcy5sb29rdXBbcXVlcnkuYnJhbmNoSWQgKyBxdWVyeS50YWdzXSA9IGNhY2hlRW50cnk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjYWNoZUVudHJ5LmNsZWFudXBUaW1lcikge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoY2FjaGVFbnRyeS5jbGVhbnVwVGltZXIpO1xyXG4gICAgICAgICAgICBjYWNoZUVudHJ5LmNsZWFudXBUaW1lciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB7XHJcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjYWNoZUVudHJ5LnN1YnNjcmliZXJzID0gY2FjaGVFbnRyeS5zdWJzY3JpYmVycy5maWx0ZXIoZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBfYS5vYnNlcnZlcjtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbyAhPT0gb2JzZXJ2ZXI7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChjYWNoZUVudHJ5LnN1YnNjcmliZXJzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhY2hlRW50cnkuY2xlYW51cFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZUVudHJ5LnN1YnNjcmliZXJzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIF90aGlzLmxvb2t1cFtxdWVyeS5icmFuY2hJZCArIHF1ZXJ5LnRhZ3NdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgY2FjaGVFbnRyeS5zdWJzY3JpYmVycy5wdXNoKHsgb2JzZXJ2ZXI6IG9ic2VydmVyLCBzdWJzY3JpcHRpb246IHN1YnNjcmlwdGlvbiB9KTtcclxuICAgICAgICBpZiAoY2FjaGVFbnRyeS52YWx1ZSkge1xyXG4gICAgICAgICAgICAvLyBWYWx1ZSBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgcmV0cmlldmVkIGFscmVhZHkuIFBpY2sgZnJvbSBjYWNoZS5cclxuICAgICAgICAgICAgb2JzZXJ2ZXIoY2FjaGVFbnRyeS5vcHRpbWlzdGljVmFsdWUgfHwgY2FjaGVFbnRyeS52YWx1ZSwgbnVsbCwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2FjaGVFbnRyeS5pc0ZldGNoaW5nKSB7XHJcbiAgICAgICAgICAgIC8vIEEgdmFsdWUgaXMgb24gaXRzIHdheS4gU2l0IGJhY2sgYW5kIHJlbGF4LiBBbGwgcmVnaXN0ZXJlZFxyXG4gICAgICAgICAgICAvLyBvYnNlcnZlcnMgKGluY2x1ZGluZyB0aGlzIG9uZSkgd2lsbCBiZSBub3RpZmllZCB3aGVuIGRhdGEgYXJyaXZlc1xyXG4gICAgICAgICAgICAvLyBvciBmYWlscy5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2FjaGVFbnRyeS5lcnJvcikge1xyXG4gICAgICAgICAgICBvYnNlcnZlcihudWxsLCBjYWNoZUVudHJ5LmVycm9yLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY2FjaGVFbnRyeS5mZXRjaCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBEZWx0YUNhY2hlO1xyXG59KCkpO1xyXG5leHBvcnQgeyBEZWx0YUNhY2hlIH07XHJcbnZhciBEZWx0YUNhY2hlRW50cnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEZWx0YUNhY2hlRW50cnkoY2xpZW50LCBxdWVyeSkge1xyXG4gICAgICAgIHRoaXMuZmV0Y2hPcGVyYXRpb25JZCA9IDA7IC8vIE1ha2VzIHN1cmUgYSByZS1mZXRjaCB3aWxsIGRpc2NhcmQgdGhlIHJlc3VsdCBmcm9tIGFueSBvbmdvaW5nIGZldGNoLlxyXG4gICAgICAgIHRoaXMuY2xpZW50ID0gY2xpZW50O1xyXG4gICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcclxuICAgICAgICB0aGlzLnZhbHVlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmVycm9yID0gbnVsbDtcclxuICAgICAgICB0aGlzLm9wdGltaXN0aWNWYWx1ZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMuaXNGZXRjaGluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY2xlYW51cFRpbWVyID0gbnVsbDtcclxuICAgIH1cclxuICAgIERlbHRhQ2FjaGVFbnRyeS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgZmV0Y2hPcGVyYXRpb25JZCA9ICsrdGhpcy5mZXRjaE9wZXJhdGlvbklkO1xyXG4gICAgICAgIHRoaXMuaXNGZXRjaGluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5mZXRjaEZyb21TZXJ2ZXIoKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAvLyBTdWNjZXNzXHJcbiAgICAgICAgICAgIGlmIChmZXRjaE9wZXJhdGlvbklkID09PSBfdGhpcy5mZXRjaE9wZXJhdGlvbklkKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5pc0ZldGNoaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBiLmRhdGVUaW1lIC0gYS5kYXRlVGltZTsgfSk7IC8vIExhdGVzdCBmaXJzdFxyXG4gICAgICAgICAgICAgICAgX3RoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIF90aGlzLm9wdGltaXN0aWNWYWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMubm90aWZ5KHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAvLyBGYWlsXHJcbiAgICAgICAgICAgIGlmIChmZXRjaE9wZXJhdGlvbklkID09PSBfdGhpcy5mZXRjaE9wZXJhdGlvbklkKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5pc0ZldGNoaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5lcnJvciA9IGVycm9yO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZmFpbChlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBEZWx0YUNhY2hlRW50cnkucHJvdG90eXBlLmZldGNoRnJvbVNlcnZlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJlcywgX2EsIF9iO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2MpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2MubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5xdWVyeS5icmFuY2hJZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRGVsdGFzIG9ubHkgYXZhaWxhYmxlIG9uIGJyYW5jaGVzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuY2xpZW50Lmh0dHAuZ2V0KCdkZWx0YXMnLCB0aGlzLnF1ZXJ5KV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBfYy5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJlcy5zdGF0dXMgPj0gMzAwIHx8IHJlcy5zdGF0dXMgPCAyMDApKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSBIdHRwRXJyb3IuYmluZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2IgPSBbdm9pZCAwLCByZXMuc3RhdHVzXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcmVzLnRleHQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiB0aHJvdyBuZXcgKF9hLmFwcGx5KEh0dHBFcnJvciwgX2IuY29uY2F0KFtfYy5zZW50KCldKSkpKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzQgLyp5aWVsZCovLCByZXMuanNvbigpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovLCBfYy5zZW50KCldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBEZWx0YUNhY2hlRW50cnkucHJvdG90eXBlLm5vdGlmeSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSB0aGlzLnN1YnNjcmliZXJzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgX2IgPSBfYVtfaV0sIG9ic2VydmVyID0gX2Iub2JzZXJ2ZXIsIHN1YnNjcmlwdGlvbiA9IF9iLnN1YnNjcmlwdGlvbjtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIodmFsdWUsIG51bGwsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIERlbHRhQ2FjaGVFbnRyeS5wcm90b3R5cGUuZmFpbCA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIHZhciBjb3B5ID0gdGhpcy5zdWJzY3JpYmVycy5zbGljZSgpO1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaWJlcnMgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGNvcHlfMSA9IGNvcHk7IF9pIDwgY29weV8xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgX2EgPSBjb3B5XzFbX2ldLCBvYnNlcnZlciA9IF9hLm9ic2VydmVyLCBzdWJzY3JpcHRpb24gPSBfYS5zdWJzY3JpcHRpb247XHJcbiAgICAgICAgICAgIG9ic2VydmVyKG51bGwsIGVycm9yLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gRGVsdGFDYWNoZUVudHJ5O1xyXG59KCkpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWx0YS1jYWNoZS5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBDb2xsZWN0aW9uIH0gZnJvbSAnLi4vLi4vb2JzZXJ2YWJsZSc7XHJcbnZhciBEZWx0YUNvbGxlY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhEZWx0YUNvbGxlY3Rpb24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBEZWx0YUNvbGxlY3Rpb24oZGVsdGFDYWNoZSwgcXVlcnkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBmdW5jdGlvbiAob2JzZXJ2ZXIpIHsgcmV0dXJuIF90aGlzLmRlbHRhQ2FjaGUuc3Vic2NyaWJlKHF1ZXJ5LCBvYnNlcnZlcik7IH0pIHx8IHRoaXM7XHJcbiAgICAgICAgX3RoaXMuZGVsdGFDYWNoZSA9IGRlbHRhQ2FjaGU7XHJcbiAgICAgICAgX3RoaXMucXVlcnkgPSBxdWVyeTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBEZWx0YUNvbGxlY3Rpb24ucHJvdG90eXBlLnRhZ3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRhZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB0YWdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgRGVsdGFDb2xsZWN0aW9uKHRoaXMuZGVsdGFDYWNoZSwgdHNsaWJfMS5fX2Fzc2lnbih7fSwgdGhpcy5xdWVyeSwgeyB0YWdzOiB0YWdzIH0pKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRGVsdGFDb2xsZWN0aW9uO1xyXG59KENvbGxlY3Rpb24pKTtcclxuZXhwb3J0IHsgRGVsdGFDb2xsZWN0aW9uIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlbHRhLWNvbGxlY3Rpb24uanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5RGVsdGEoZG9jLCBkZWx0YSkge1xyXG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhkZWx0YSk7XHJcbiAgICB2YXIgdGFyZ2V0RG9jID0gZG9jO1xyXG4gICAgZm9yICh2YXIgX2kgPSAwLCBrZXlzXzEgPSBrZXlzOyBfaSA8IGtleXNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICB2YXIga2V5ID0ga2V5c18xW19pXTtcclxuICAgICAgICBpZiAodGFyZ2V0RG9jID09PSBkb2MpXHJcbiAgICAgICAgICAgIHRhcmdldERvYyA9IHRzbGliXzEuX19hc3NpZ24oe30sIGRvYyk7XHJcbiAgICAgICAgdmFyIHZhbCA9IGRlbHRhW2tleV07XHJcbiAgICAgICAgaWYgKHZhbCAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICB2YXIgbWV0YUluc3RydWN0aW9ucyA9IE9iamVjdC5rZXlzKHZhbClcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGtleSkgeyByZXR1cm4ga2V5LnN0YXJ0c1dpdGgoJyQnKTsgfSk7XHJcbiAgICAgICAgICAgIGlmIChtZXRhSW5zdHJ1Y3Rpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24gKG1pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1pVmFsdWUgPSB2YWxbbWldO1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobWkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiR1bnNldFwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nIG9uIHRhcmdldCBkb2MhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXREb2MuJHdhc1Vuc2V0ID0gdHJ1ZTsgLy8gSnVzdCBtYXJrIGl0IGZvciByZS1yZXRyaWV2YWwgYWZ0ZXIgc3VjY2Vzc2Z1bCBwb3N0aW5nIGNoYW5nZXMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiJGFkZFwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVzVG9BZGQgPSBtaVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlc1RvQWRkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIiRhZGQgaW5zdHJ1Y3Rpb24gbXVzdCBjb250YWluIGFycmF5XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldEFycmF5ID0gdGFyZ2V0RG9jW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodGFyZ2V0QXJyYXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0QXJyYXkgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEFycmF5ID0gdGFyZ2V0QXJyYXkuc2xpY2UoKTsgLy8gT24gSlMgc2lkZSwgd2UgbXVzdCBiZSBpbW11dGFibGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldERvY1trZXldID0gdGFyZ2V0QXJyYXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHZhbHVlc1RvQWRkXzEgPSB2YWx1ZXNUb0FkZDsgX2kgPCB2YWx1ZXNUb0FkZF8xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ID0gdmFsdWVzVG9BZGRfMVtfaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRBcnJheS5pbmNsdWRlcyh2KSkgeyAvLyBhdm9pZCBkdXBzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEFycmF5LnB1c2godik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiRyZW1vdmVcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlc1RvUmVtb3ZlXzEgPSBtaVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlc1RvUmVtb3ZlXzEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJHJlbW92ZSBpbnN0cnVjdGlvbiBtdXN0IGNvbnRhaW4gYXJyYXlcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0QXJyYXkgPSB0YXJnZXREb2Nba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0YXJnZXRBcnJheSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRBcnJheSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RG9jW2tleV0gPSB0YXJnZXRBcnJheS5maWx0ZXIoZnVuY3Rpb24gKHQpIHsgcmV0dXJuICF2YWx1ZXNUb1JlbW92ZV8xLmluY2x1ZGVzKHQpOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgbWV0YUluc3RydWN0aW9uc18xID0gbWV0YUluc3RydWN0aW9uczsgX2EgPCBtZXRhSW5zdHJ1Y3Rpb25zXzEubGVuZ3RoOyBfYSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1pID0gbWV0YUluc3RydWN0aW9uc18xW19hXTtcclxuICAgICAgICAgICAgICAgICAgICBfbG9vcF8xKG1pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhcmdldERvY1trZXldID0gdmFsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRhcmdldERvYztcclxufVxyXG4vLyB7bmFtZTogXCJVbGxhXCJ9LCB7bmFtZTogeyR1bnNldDowfVxyXG4vLyB7dGFnczogeyRhZGQ6IFwiaGVqXCJ9fSwge3RhZ3M6IHskdW5zZXQ6MH1cIn1cclxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlRGVsdGFzKGRlbHRhMSwgZGVsdGEyLCBfYSkge1xyXG4gICAgdmFyIHJlbW92ZVVuc2V0UHJvcHMgPSAoX2EgPT09IHZvaWQgMCA/IHsgcmVtb3ZlVW5zZXRQcm9wczogZmFsc2UgfSA6IF9hKS5yZW1vdmVVbnNldFByb3BzO1xyXG4gICAgLy9yZXR1cm4gey4uLmRlbHRhMSwgLi4uZGVsdGEyfTtcclxuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZGVsdGEyKTtcclxuICAgIHZhciB0YXJnZXREZWx0YSA9IHRzbGliXzEuX19hc3NpZ24oe30sIGRlbHRhMSk7XHJcbiAgICBmb3IgKHZhciBfaSA9IDAsIGtleXNfMiA9IGtleXM7IF9pIDwga2V5c18yLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIHZhciBrZXkgPSBrZXlzXzJbX2ldO1xyXG4gICAgICAgIHZhciB2YWwgPSBkZWx0YTJba2V5XTtcclxuICAgICAgICBpZiAodmFsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIHZhciBtZXRhSW5zdHJ1Y3Rpb25zID0gT2JqZWN0LmtleXModmFsKVxyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7IHJldHVybiBrZXkuc3RhcnRzV2l0aCgnJCcpOyB9KTtcclxuICAgICAgICAgICAgaWYgKG1ldGFJbnN0cnVjdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9sb29wXzIgPSBmdW5jdGlvbiAobWkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWlWYWx1ZSA9IHZhbFttaV07XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChtaSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiJHVuc2V0XCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZW1vdmVVbnNldFByb3BzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRhcmdldERlbHRhW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBtYXR0ZXIgaWYgdGFyZ2V0RGVsdGEgaXMgZW1wdHkgb3IgaGFzIHZhbHVlLiBTZXQgaXQgdG8geyR1bnNldDowfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvIG1ha2Ugc3VyZSB0aGUgdmVyeSBlbmQgcmVzdWx0IHdpbGwgaGF2ZSB7JHVuc2V0OjB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGVsdGFba2V5XSA9IHsgJHVuc2V0OiAwIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiJGFkZFwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVzVG9BZGRfMiA9IG1pVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWVzVG9BZGRfMikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCIkYWRkIGluc3RydWN0aW9uIG11c3QgY29udGFpbiBhcnJheVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRNZXRhUHJvcCA9IHRhcmdldERlbHRhW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRNZXRhUHJvcCA9IHRhcmdldE1ldGFQcm9wID8gdHNsaWJfMS5fX2Fzc2lnbih7fSwgdGFyZ2V0TWV0YVByb3ApIDoge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXREZWx0YVtrZXldID0gdGFyZ2V0TWV0YVByb3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXJzdCwganVzdCBjaGVjayBpZiB0YXJnZXQgbWV0YVByb3AgaGFzIHskcmVtb3ZlOiBbLi4uaXRlbXNdfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgc28sIHJlbW92ZSBhbnkgZXF1YWwgaXRlbXMgZnJvbSB0aGVyZSBiZWZvcmUgbWVyZ2luZyB0aGUgeyRhZGQ6IFsuLi5dfSBhcnJheXMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0UmVtb3ZlQXJyYXkgPSB0YXJnZXRNZXRhUHJvcC4kcmVtb3ZlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGFyZ2V0UmVtb3ZlQXJyYXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TWV0YVByb3AuJHJlbW92ZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFJlbW92ZUFycmF5LmZpbHRlcihmdW5jdGlvbiAodCkgeyByZXR1cm4gIXZhbHVlc1RvQWRkXzIuaW5jbHVkZXModCk7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRNZXRhUHJvcC4kcmVtb3ZlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiAkcmVtb3ZlIGFycmF5IGJlY2FtZSBlbXRweS4gUmVtb3ZlIHRoZSAkcmVtb3ZlIHByb3AuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0YXJnZXRNZXRhUHJvcC4kcmVtb3ZlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdyBpdCdzIHRpbWUgdG8gbWVyZ2Ugb3IgY3JlYXRlIHRhcmdldCAkYWRkIGFycmF5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldEFkZEFycmF5ID0gdGFyZ2V0TWV0YVByb3AuJGFkZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEFkZEFycmF5ID0gdGFyZ2V0QWRkQXJyYXkgPyB0YXJnZXRBZGRBcnJheS5jb25jYXQodmFsdWVzVG9BZGRfMikgOiB2YWx1ZXNUb0FkZF8yLnNsaWNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRNZXRhUHJvcC4kYWRkID0gdGFyZ2V0QWRkQXJyYXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiJHJlbW92ZVwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWVzVG9SZW1vdmVfMiA9IG1pVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWVzVG9SZW1vdmVfMikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCIkcmVtb3ZlIGluc3RydWN0aW9uIG11c3QgY29udGFpbiBhcnJheVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRNZXRhUHJvcCA9IHRhcmdldERlbHRhW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRNZXRhUHJvcCA9IHRhcmdldE1ldGFQcm9wID8gdHNsaWJfMS5fX2Fzc2lnbih7fSwgdGFyZ2V0TWV0YVByb3ApIDoge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXREZWx0YVtrZXldID0gdGFyZ2V0TWV0YVByb3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXJzdCwganVzdCBjaGVjayBpZiB0YXJnZXQgbWV0YVByb3AgaGFzIHskYWRkOiBbLi4uaXRlbXNdfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgc28sIHJlbW92ZSBhbnkgZXF1YWwgaXRlbXMgZnJvbSB0aGVyZSBiZWZvcmUgbWVyZ2luZyB0aGUgeyRyZW1vdmU6IFsuLi5dfSBhcnJheXMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0QWRkQXJyYXkgPSB0YXJnZXRNZXRhUHJvcC4kcmVtb3ZlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGFyZ2V0QWRkQXJyYXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TWV0YVByb3AuJGFkZCA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEFkZEFycmF5LmZpbHRlcihmdW5jdGlvbiAodCkgeyByZXR1cm4gIXZhbHVlc1RvUmVtb3ZlXzIuaW5jbHVkZXModCk7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRNZXRhUHJvcC4kYWRkLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiAkYWRkIGFycmF5IGJlY2FtZSBlbXRweS4gUmVtb3ZlIHRoZSAkYWRkIHByb3AuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0YXJnZXRNZXRhUHJvcC4kYWRkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdyBpdCdzIHRpbWUgdG8gbWVyZ2Ugb3IgY3JlYXRlIHRhcmdldCAkcmVtb3ZlIGFycmF5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldFJlbW92ZUFycmF5ID0gdGFyZ2V0TWV0YVByb3AuJHJlbW92ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFJlbW92ZUFycmF5ID0gdGFyZ2V0UmVtb3ZlQXJyYXkgPyB0YXJnZXRSZW1vdmVBcnJheS5jb25jYXQodmFsdWVzVG9SZW1vdmVfMikgOiB2YWx1ZXNUb1JlbW92ZV8yLnNsaWNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRNZXRhUHJvcC4kcmVtb3ZlID0gdGFyZ2V0UmVtb3ZlQXJyYXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IDAsIG1ldGFJbnN0cnVjdGlvbnNfMiA9IG1ldGFJbnN0cnVjdGlvbnM7IF9iIDwgbWV0YUluc3RydWN0aW9uc18yLmxlbmd0aDsgX2IrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtaSA9IG1ldGFJbnN0cnVjdGlvbnNfMltfYl07XHJcbiAgICAgICAgICAgICAgICAgICAgX2xvb3BfMihtaSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0YXJnZXREZWx0YVtrZXldID0gdmFsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRhcmdldERlbHRhO1xyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlbHRhLW1lcmdlLmpzLm1hcCIsImV4cG9ydCAqIGZyb20gJy4va2VkYmFja2VuZC1jb2xsZWN0aW9uJztcclxuZXhwb3J0ICogZnJvbSAnLi9rZWRiYWNrZW5kLXF1ZXJ5JztcclxuZXhwb3J0ICogZnJvbSAnLi9rZWRiYWNrZW5kLXJlcG8nO1xyXG5leHBvcnQgKiBmcm9tICcuL2tlZGJhY2tlbmQtc3Vic2NyaXB0aW9uJztcclxuZXhwb3J0ICogZnJvbSAnLi9rZWRiYWNrZW5kLXdyaXRlcic7XHJcbmV4cG9ydCAqIGZyb20gJy4vbXV0YXRpb24tcXVldWUnO1xyXG5leHBvcnQgKiBmcm9tICcuL3F1ZXJ5LXNldCc7XHJcbmV4cG9ydCAqIGZyb20gJy4uL29ic2VydmFibGUvbWl4aW4nO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBCYXRjaFJ1bm5lciB9IGZyb20gJy4uL2tlZC1iYWNrZW5kLWNsaWVudCc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRTdWJzY3JpcHRpb24gfSBmcm9tIFwiLi9rZWRiYWNrZW5kLXN1YnNjcmlwdGlvblwiO1xyXG5pbXBvcnQgeyBDYWNoZUJ1c3QgfSBmcm9tICcuL2NhY2hlLWJ1c3QnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUXVlcnkgfSBmcm9tICcuL2tlZGJhY2tlbmQtcXVlcnknO1xyXG5pbXBvcnQgeyBDb2xsZWN0aW9uIH0gZnJvbSAnLi4vb2JzZXJ2YWJsZS9jb2xsZWN0aW9uJztcclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSBcImxpdmVcIiBxdWVyeSBhZ2FpbnN0IGEgdGFibGUgb3IgZmlsdGVyZWQgdGFibGUuXHJcbiAqL1xyXG52YXIgS2VkQmFja2VuZENvbGxlY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhLZWRCYWNrZW5kQ29sbGVjdGlvbiwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEtlZEJhY2tlbmRDb2xsZWN0aW9uKHJlcG8sIHRhYmxlLCBxdWVyeSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gbmV3IEtlZEJhY2tlbmRTdWJzY3JpcHRpb24ob2JzZXJ2ZXIsIF90aGlzKTtcclxuICAgICAgICAgICAgX3RoaXMucmVwby5xdWVyeVNldC5zdWJzY3JpYmUoc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcclxuICAgICAgICB9KSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnJlcG8gPSByZXBvO1xyXG4gICAgICAgIF90aGlzLnRhYmxlID0gdGFibGU7XHJcbiAgICAgICAgX3RoaXMucXVlcnkgPSBxdWVyeTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLCBcInF1ZXJ5S2V5XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEtlZEJhY2tlbmRRdWVyeS5xdWVyeUtleSh0aGlzLnRhYmxlLCB0aGlzLnF1ZXJ5KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUsIFwiaW5jbHVkZXNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faW5jbHVkZXMgfHwgKHRoaXMuX2luY2x1ZGVzID0gW10uY29uY2F0KHRoaXMucXVlcnkuaW5jbHVkZSB8fCBbXSkpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLmFwcGx5UXVlcnkgPSBmdW5jdGlvbiAocXVlcnkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEtlZEJhY2tlbmRDb2xsZWN0aW9uKHRoaXMucmVwbywgdGhpcy50YWJsZSwgdHNsaWJfMS5fX2Fzc2lnbih7fSwgdGhpcy5xdWVyeSwgcXVlcnkpKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuYWRkVG9RdWVyeUFycmF5UHJvcCA9IGZ1bmN0aW9uIChhcnJheVByb3AsIGVudHJpZXMpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlRdWVyeSgoX2EgPSB7fSwgX2FbYXJyYXlQcm9wXSA9ICh0aGlzLnF1ZXJ5W2FycmF5UHJvcF0gfHwgW10pLmNvbmNhdChlbnRyaWVzKSwgX2EpKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuYWRkRmxhZ3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZsYWdzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgZmxhZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWRkVG9RdWVyeUFycmF5UHJvcChcImZsYWdzXCIsIGZsYWdzKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuZGVidWcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlRdWVyeSh7IGRlYnVnOiB0cnVlIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5pZHNPbmx5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZEZsYWdzKFwiaWRzT25seVwiKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuaWRzQW5kTmFtZXNPbmx5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZEZsYWdzKFwiaWRzQW5kTmFtZXNPbmx5XCIpO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5pbmNsdWRlSWRzT25seSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hZGRGbGFncyhcImluY2x1ZGVJZHNPbmx5XCIpO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5pbmNsdWRlSWRzQW5kTmFtZXNPbmx5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFkZEZsYWdzKFwiaW5jbHVkZUlkc0FuZE5hbWVzT25seVwiKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuYmV0d2VlbiA9IGZ1bmN0aW9uIChmcm9tLCB0bykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5UXVlcnkoeyBmcm9tOiBmcm9tLCB0bzogdG8gfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLnJvbGUgPSBmdW5jdGlvbiAocm9sZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5UXVlcnkoeyByb2xlOiByb2xlIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5oYXNFZGdlc0Zyb20gPSBmdW5jdGlvbiAoaWRzKSB7XHJcbiAgICAgICAgaWYgKGlkcy5sZW5ndGggPT09IDAgfHwgaWRzLnNvbWUoZnVuY3Rpb24gKGlkKSB7IHJldHVybiAhaWQ7IH0pKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGlkIGxpc3QgZ2l2ZW4gdG8gQ29sbGVjdGlvbi5oYXNFZGdlc0Zyb20oXCIgKyBKU09OLnN0cmluZ2lmeShpZHMpICsgXCIpXCIpO1xyXG4gICAgICAgIHZhciBoZWYgPSB0aGlzLmFkZFRvUXVlcnlBcnJheVByb3AoXCJoYXNFZGdlc0Zyb21cIiwgaWRzKTtcclxuICAgICAgICByZXR1cm4gaGVmO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5oYXNFZGdlc1RvID0gZnVuY3Rpb24gKGlkcykge1xyXG4gICAgICAgIGlmIChpZHMubGVuZ3RoID09PSAwIHx8IGlkcy5zb21lKGZ1bmN0aW9uIChpZCkgeyByZXR1cm4gIWlkOyB9KSlcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpZCBsaXN0IGdpdmVuIHRvIENvbGxlY3Rpb24uaGFzRWRnZXNUbyhcIiArIEpTT04uc3RyaW5naWZ5KGlkcykgKyBcIilcIik7XHJcbiAgICAgICAgdmFyIGhldCA9IHRoaXMuYWRkVG9RdWVyeUFycmF5UHJvcChcImhhc0VkZ2VzVG9cIiwgaWRzKTtcclxuICAgICAgICByZXR1cm4gaGV0O1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5pZCA9IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlRdWVyeSh7IGlkczogW2lkXSB9KS5zaW5nbGUoe1xyXG4gICAgICAgICAgICBvblplcm86IGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGZpbmQgZW50aXR5IGluIFwiICsgX3RoaXMudGFibGUgKyBcIiB3aXRoIGlkIFwiICsgaWQpOyB9LFxyXG4gICAgICAgICAgICBvbk1hbnk6IGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IEVycm9yKFwiTXVsdGlwbGUgZW50cmllcyBpbiBcIiArIF90aGlzLnRhYmxlICsgXCIgd2l0aCBpZCBcIiArIGlkKTsgfSxcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuaWRzID0gZnVuY3Rpb24gKGlkcykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5UXVlcnkoeyBpZHM6IGlkcyB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUubmFtZSA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlRdWVyeSh7IG5hbWU6IG5hbWUgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLnRhZ3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRhZ3MgPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB0YWdzW19pXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5UXVlcnkoeyB0YWdzOiB0YWdzIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5icmFuY2hJZCA9IGZ1bmN0aW9uIChicmFuY2hJZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5UXVlcnkoeyBicmFuY2hJZDogYnJhbmNoSWQgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLmluY2x1ZGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGdyYXBocyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGdyYXBoc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5hZGRUb1F1ZXJ5QXJyYXlQcm9wKFwiaW5jbHVkZVwiLCBncmFwaHMpO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5jYWNoZU9wdGltaXplZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hcHBseVF1ZXJ5KHsgY2FjaGVCdXN0OiBDYWNoZUJ1c3QuZ2V0Q2FjaGVCdXN0KHRoaXMudGFibGUsIHRoaXMucXVlcnksIHRoaXMucmVwby5nZXRVc2VyKCksIHRoaXMuaW5jbHVkZXMpIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRDb2xsZWN0aW9uLnByb3RvdHlwZS5tdXRhdGlvbnNPbkVtcHR5ID0gZnVuY3Rpb24gKG11dGF0aW9uRmFjdG9yeSkge1xyXG4gICAgICAgIHZhciB0eCA9IG5ldyBCYXRjaFJ1bm5lcigpO1xyXG4gICAgICAgIG11dGF0aW9uRmFjdG9yeSh0eCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlRdWVyeSh7IG11dGF0aW9uc09uRW1wdHk6IHR4Lm11dGF0aW9uUmVxdWVzdHMgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLnNpbmdsZSA9IGZ1bmN0aW9uICh0aHJvd2Vycykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIF9hID0gdGhyb3dlcnMgfHwge30sIG9uWmVybyA9IF9hLm9uWmVybywgb25NYW55ID0gX2Eub25NYW55O1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvVmFsdWUoKS5tYXAoZnVuY3Rpb24gKGl0ZW1zKSB7XHJcbiAgICAgICAgICAgIGlmIChpdGVtcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChvblplcm8pXHJcbiAgICAgICAgICAgICAgICAgICAgb25aZXJvKCk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2luZ2xlIGl0ZW0gb2YgXCIgKyBfdGhpcy50YWJsZSArIFwiIGV4cGVjdGVkIHRvIGJlIHJldHVybmVkIGJ5IHF1ZXJ5IFwiICsgSlNPTi5zdHJpbmdpZnkoX3RoaXMucXVlcnkpICsgXCIgYnV0IG5vbmUgd2FzIGZvdW5kLlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaXRlbXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgZGVidWdnZXI7XHJcbiAgICAgICAgICAgICAgICBpZiAob25NYW55KVxyXG4gICAgICAgICAgICAgICAgICAgIG9uTWFueSgpO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2luZ2xlIGl0ZW0gb2YgXCIgKyBfdGhpcy50YWJsZSArIFwiIGV4cGVjdGVkIHRvIGJlIHJldHVybmVkIGJ5IHF1ZXJ5IFwiICsgSlNPTi5zdHJpbmdpZnkoX3RoaXMucXVlcnkpICsgXCIgYnV0IFwiICsgaXRlbXMubGVuZ3RoICsgXCIgd2FzIGZvdW5kLlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaXRlbXNbMF07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLypjb21iaW5lTGF0ZXN0PFRPdGhlcj4ob3RoZXI6IFF1ZXJ5T2JzZXJ2YWJsZTxUT3RoZXI+KSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnJlbmRlcih4ID0+IHgpLmNvbWJpbmVMYXRlc3Qob3RoZXIpO1xyXG4gICAgfSovXHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGRvYywgY2hhbmdlcywgZGVib3VuY2UpIHtcclxuICAgICAgICBpZiAoZGVib3VuY2UgPT09IHZvaWQgMCkgeyBkZWJvdW5jZSA9IDEwMDA7IH1cclxuICAgICAgICB0aGlzLnJlcG8ud3JpdGVyLm11dGF0ZShbe1xyXG4gICAgICAgICAgICAgICAgb3A6ICd1cGRhdGUnLFxyXG4gICAgICAgICAgICAgICAgdGFibGU6IHRoaXMudGFibGUsXHJcbiAgICAgICAgICAgICAgICBicmFuY2hJZDogdGhpcy5xdWVyeS5icmFuY2hJZCxcclxuICAgICAgICAgICAgICAgIGlkOiBkb2MuaWQsXHJcbiAgICAgICAgICAgICAgICBkZWx0YURvYzogY2hhbmdlcyxcclxuICAgICAgICAgICAgICAgIHRhcmdldE5hbWU6IGRvYy5uYW1lXHJcbiAgICAgICAgICAgIH1dLCBkZWJvdW5jZSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLmFkZFJlbGF0ZWQgPSBmdW5jdGlvbiAoaWQsIGxhYmVsLCByZWxhdGVkRG9jKSB7XHJcbiAgICAgICAgdGhpcy5yZXBvLndyaXRlci5tdXRhdGUoW3tcclxuICAgICAgICAgICAgICAgIG9wOiAnYWRkLXJlbGF0ZWQnLFxyXG4gICAgICAgICAgICAgICAgdGFibGU6IHRoaXMudGFibGUsXHJcbiAgICAgICAgICAgICAgICBicmFuY2hJZDogdGhpcy5xdWVyeS5icmFuY2hJZCxcclxuICAgICAgICAgICAgICAgIGlkOiBpZCxcclxuICAgICAgICAgICAgICAgIGdyYXBoUHJvcDogbGFiZWwsXHJcbiAgICAgICAgICAgICAgICByZWxhdGVkRG9jOiByZWxhdGVkRG9jXHJcbiAgICAgICAgICAgIH1dLCAwKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgIHRoaXMucmVwby53cml0ZXIubXV0YXRlKFt7XHJcbiAgICAgICAgICAgICAgICBvcDogJ2FkZCcsXHJcbiAgICAgICAgICAgICAgICBpZDogZG9jLmlkLFxyXG4gICAgICAgICAgICAgICAgdGFibGU6IHRoaXMudGFibGUsXHJcbiAgICAgICAgICAgICAgICBkb2M6IGRvY1xyXG4gICAgICAgICAgICB9XSwgMCk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZVJlbGF0ZWQgPSBmdW5jdGlvbiAoaWQsIGxhYmVsLCByZWxhdGVkRG9jKSB7XHJcbiAgICAgICAgdGhpcy5yZXBvLndyaXRlci5tdXRhdGUoW3tcclxuICAgICAgICAgICAgICAgIG9wOiAncmVtb3ZlLXJlbGF0ZWQnLFxyXG4gICAgICAgICAgICAgICAgdGFibGU6IHRoaXMudGFibGUsXHJcbiAgICAgICAgICAgICAgICBicmFuY2hJZDogdGhpcy5xdWVyeS5icmFuY2hJZCxcclxuICAgICAgICAgICAgICAgIGlkOiBpZCxcclxuICAgICAgICAgICAgICAgIGdyYXBoUHJvcDogbGFiZWwsXHJcbiAgICAgICAgICAgICAgICByZWxhdGVkRG9jOiByZWxhdGVkRG9jXHJcbiAgICAgICAgICAgIH1dLCAwKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUudW5kb0xpbmsgPSBmdW5jdGlvbiAoaWQsIGxhYmVsLCByZWxhdGVkSWQpIHtcclxuICAgICAgICBpZiAoIXRoaXMucXVlcnkuYnJhbmNoSWQpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInVuZG8gbGlua3MgY2FuIG9ubHkgYmUgcGVyZm9ybWVkIG9uIGJyYW5jaGVzXCIpO1xyXG4gICAgICAgIHRoaXMucmVwby53cml0ZXIubXV0YXRlKFt7XHJcbiAgICAgICAgICAgICAgICBvcDogJ3VuZG8tbGluaycsXHJcbiAgICAgICAgICAgICAgICB0YWJsZTogdGhpcy50YWJsZSxcclxuICAgICAgICAgICAgICAgIGJyYW5jaElkOiB0aGlzLnF1ZXJ5LmJyYW5jaElkLFxyXG4gICAgICAgICAgICAgICAgaWQ6IGlkLFxyXG4gICAgICAgICAgICAgICAgZ3JhcGhQcm9wOiBsYWJlbCxcclxuICAgICAgICAgICAgICAgIHJlbGF0ZWRJZDogcmVsYXRlZElkXHJcbiAgICAgICAgICAgIH1dLCAwKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kQ29sbGVjdGlvbi5wcm90b3R5cGUuZGVsZXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGlkcyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGlkc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlcG8ud3JpdGVyLm11dGF0ZShpZHMubWFwKGZ1bmN0aW9uIChpZCkgeyByZXR1cm4gKHtcclxuICAgICAgICAgICAgb3A6ICdkZWxldGUnLFxyXG4gICAgICAgICAgICB0YWJsZTogX3RoaXMudGFibGUsXHJcbiAgICAgICAgICAgIGlkOiBpZFxyXG4gICAgICAgIH0pOyB9KSwgMCk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgIHRoaXMucmVwby5xdWVyeVNldC51bnN1YnNjcmliZShzdWJzY3JpcHRpb24pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBLZWRCYWNrZW5kQ29sbGVjdGlvbjtcclxufShDb2xsZWN0aW9uKSk7XHJcbmV4cG9ydCB7IEtlZEJhY2tlbmRDb2xsZWN0aW9uIH07XHJcbi8qbWl4aW4oXHJcbiAgS2VkQmFja2VuZENvbGxlY3Rpb24ucHJvdG90eXBlLFxyXG4gIE1hcHBlZENvbGxlY3Rpb24ucHJvdG90eXBlLFxyXG4gIFwibWFwXCIsIFwiZmxhdFwiLCBcImNvbmNhdFwiLCBcInJlbmRlclwiLCBcImxvYWRcIik7Ki9cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9a2VkYmFja2VuZC1jb2xsZWN0aW9uLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IHVwZGF0ZUFycmF5IH0gZnJvbSAnLi4va2VkLWJhY2tlbmQtY2xpZW50L3V0aWxzJztcclxuaW1wb3J0IHsgYnJhbmNoU2Vuc2l0aXZlLCBnZXRUYWJsZUZyb21MYWJlbCB9IGZyb20gJy4vdXRpbHMnO1xyXG5pbXBvcnQgeyBhcHBseURlbHRhIH0gZnJvbSAnLi9kZWx0YS1tZXJnZSc7XHJcbnZhciBLZWRCYWNrZW5kUXVlcnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBLZWRCYWNrZW5kUXVlcnkodGFibGUsIHF1ZXJ5LCB1c2VyLCByZXBvLCBtdXRhdGlvblF1ZXVlKSB7XHJcbiAgICAgICAgdGhpcy50YWJsZSA9IHRhYmxlO1xyXG4gICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcclxuICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgIHRoaXMucmVwbyA9IHJlcG87XHJcbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlID0gbXV0YXRpb25RdWV1ZTtcclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBbXTtcclxuICAgICAgICB0aGlzLmRhdGEgPSBbXTtcclxuICAgICAgICB0aGlzLmdvdEluaXRpYWxSZXNwb25zZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaW52YWxpZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubG9hZGVkVmVyc2lvbiA9IDA7XHJcbiAgICAgICAgdGhpcy5fbG9hZFByb21pc2UgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaW5jbHVkZXMgPSBxdWVyeS5pbmNsdWRlID9cclxuICAgICAgICAgICAgdHlwZW9mIHF1ZXJ5LmluY2x1ZGUgPT09ICdzdHJpbmcnID9cclxuICAgICAgICAgICAgICAgIFtxdWVyeS5pbmNsdWRlXSA6XHJcbiAgICAgICAgICAgICAgICBxdWVyeS5pbmNsdWRlIDpcclxuICAgICAgICAgICAgW107XHJcbiAgICB9XHJcbiAgICBLZWRCYWNrZW5kUXVlcnkucXVlcnlLZXkgPSBmdW5jdGlvbiAodGFibGUsIHF1ZXJ5KSB7XHJcbiAgICAgICAgdmFyIG11dGF0aW9uc09uRW1wdHkgPSBxdWVyeS5tdXRhdGlvbnNPbkVtcHR5LCBjb21wYXJhYmxlUHJvcHMgPSB0c2xpYl8xLl9fcmVzdChxdWVyeSwgW1wibXV0YXRpb25zT25FbXB0eVwiXSk7XHJcbiAgICAgICAgcmV0dXJuIHRhYmxlICsgSlNPTi5zdHJpbmdpZnkoY29tcGFyYWJsZVByb3BzKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoS2VkQmFja2VuZFF1ZXJ5LnByb3RvdHlwZSwgXCJxdWVyeUtleVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBLZWRCYWNrZW5kUXVlcnkucXVlcnlLZXkodGhpcy50YWJsZSwgdGhpcy5xdWVyeSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBLZWRCYWNrZW5kUXVlcnkucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEsIGRhdGE7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcy5nb3RJbml0aWFsUmVzcG9uc2UgJiYgIXRoaXMuaW52YWxpZCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gdGhpcy5nZXREYXRhV2l0aE11dGF0aW9uc0FwcGxpZWQodGhpcy5tdXRhdGlvblF1ZXVlLmdldCgpLCB0cnVlLCB0aGlzLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24ubm90aWZ5U3Vic2NyaWJlcihkYXRhLCB0aGlzLmVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gdGhpcy5xdWVyeUxvY2FsbHkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5ub3RpZnlTdWJzY3JpYmVyKGRhdGEsIHRoaXMuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9hZCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUXVlcnkucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAodmVyc2lvbikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbG9hZFByb21pc2U7XHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZ290SW5pdGlhbFJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtdXRhdGlvbnNPbkVtcHR5IHNob3VsZCBuZXZlciBiZSB1c2VkIHR3aWNlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucXVlcnkubXV0YXRpb25zT25FbXB0eTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISghdmVyc2lvbiAmJiB0aGlzLl9sb2FkUHJvbWlzZSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLl9sb2FkUHJvbWlzZV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiBcclxuICAgICAgICAgICAgICAgICAgICAvLyBsb2FkaW5nIGlzIG9uZ29pbmcsIGFuZCBjYWxsZXIgZG9lcyBub3QgcmVxdWlyZSBhIHJlY2VudCByZWZyZXNoLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdhaXQgZm9yIHRoZSBvbmdvaW5nIGxvYWQgdG8gY29tcGxldGVcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgX2Euc2VudCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnNpb24gPSB2ZXJzaW9uIHx8IHRoaXMucmVwby53cml0ZXIucGVyc2lzdGVkVmVyc2lvbi52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZFByb21pc2UgPSB0aGlzLl9sb2FkUHJvbWlzZSA9IHRoaXMuX2xvYWQodmVyc2lvbikudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLl9sb2FkUHJvbWlzZSA9PT0gbG9hZFByb21pc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kYXRhID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5sb2FkZWRWZXJzaW9uID0gTWF0aC5tYXgoX3RoaXMubG9hZGVkVmVyc2lvbiwgdmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLl9sb2FkUHJvbWlzZSA9PT0gbG9hZFByb21pc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb29uZSBoYXMgcmVmcmVzaGVkIG91ciBsb2FkLiBUaGUgZXJyb3IgaXMgdGhlIGZpbmFsIHJlc3VsdC4gU2V0IGl0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmVycm9yID0gZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLl9sb2FkUHJvbWlzZSA9PT0gbG9hZFByb21pc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb29uZSBoYXMgcmVmcmVzaGVkIG91ciBsb2FkLiBXZSdyZSBmaW5pc2hlZC4gRGF0YSBvciBlcnJvciBpcyBhbHJlYWR5IHNldC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXJrIGdvdEluaXRpYWxSZXNwb25zZSB0byB0cnVlIGFuZCBub3RpZnkgc3Vic2NyaWJlcnMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2xvYWRQcm9taXNlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5nb3RJbml0aWFsUmVzcG9uc2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm5vdGlmeVN1YnNjcmliZXJzKF90aGlzLm11dGF0aW9uUXVldWUuZ2V0KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQSBtb3JlIHJlY2VudCBjYWxsIHRvIGxvYWQoKSBpcyBvbmdvaW5nLCBPUiB3YXMgb25nb2luZyBidXQgcmVzcG9uZGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmVmb3JlIHVzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluIGFueSBjYXNlIHJldHVybiB0aGlzLl9sb2FkUHJvbWlzZS4gSWYgaXQncyBvbmdvaW5nIHdlJ2xsIHdhaXQgZm9yIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG8gZmluaXNoLiBJZiBpdCdzIG51bGwsIHdlJ2xsIGJlIHJldHVybmluZyBmaW5hbGx5IGhlcmUgd2l0aG91dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFueSBhY3Rpb24sIGJlY2F1c2UgdGhlIGFjdGlvbiB3YXMgdGFrZW4gYnkgdGhlIHJlZnJlc2hlci5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuX2xvYWRQcm9taXNlOyAvLyBXYWl0IGZvciB0aGUgcmVmcmVzaGVkIGxvYWQgdG8gY29tcGxldGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGxvYWRQcm9taXNlXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUXVlcnkucHJvdG90eXBlLl9sb2FkID0gZnVuY3Rpb24gKHZlcnNpb24pIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMubXV0YXRpb25RdWV1ZS5hZmZlY3RzUXVlcnkodGhpcy50YWJsZSwgdGhpcy5xdWVyeSwgdGhpcy5pbmNsdWRlcykpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGVyZSBhcmUgb3V0Z29pbmcgbXV0YXRpb25zIHRoYXQgYWZmZWN0cyB0aGlzIHF1ZXJ5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIHdhaXQgdGlsbCB0aGV5IHJlYWNoIHNlcnZlciBhbmQgc2VydmVyIHJlc3BvbmRzIHdpdGggT0sgYmVmb3JlIHF1ZXJ5aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBzZXJ2ZXIuIE90aGVyd2lzZSwgd2UgbWF5IGdldCBpbmFjY3VyYXRlIGRhdGEgZnJvbSBzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVwby53cml0ZXIud2FpdEZvclZlcnNpb25Ub1BlcnNpc3QodmVyc2lvbildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlcmUgYXJlIG91dGdvaW5nIG11dGF0aW9ucyB0aGF0IGFmZmVjdHMgdGhpcyBxdWVyeS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTmVlZCB0byB3YWl0IHRpbGwgdGhleSByZWFjaCBzZXJ2ZXIgYW5kIHNlcnZlciByZXNwb25kcyB3aXRoIE9LIGJlZm9yZSBxdWVyeWluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgc2VydmVyLiBPdGhlcndpc2UsIHdlIG1heSBnZXQgaW5hY2N1cmF0ZSBkYXRhIGZyb20gc2VydmVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucXVlcnlTZXJ2ZXIoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzIgLypyZXR1cm4qLywgX2Euc2VudCgpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFF1ZXJ5LnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHtcclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSB0aGlzLnN1YnNjcmlwdGlvbnMuZmlsdGVyKGZ1bmN0aW9uIChzKSB7IHJldHVybiBzICE9PSBzdWJzY3JpcHRpb247IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRRdWVyeS5wcm90b3R5cGUuY29tbWl0TXV0YXRpb25zID0gZnVuY3Rpb24gKG11dGF0aW9ucywgdmVyc2lvbikge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgX2ksIG11dGF0aW9uc18xLCBtLCBkYXRhO1xyXG4gICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5kYXRhKSByZXR1cm4gWzMgLypicmVhayovLCA5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2kgPSAwLCBtdXRhdGlvbnNfMSA9IG11dGF0aW9ucztcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoX2kgPCBtdXRhdGlvbnNfMS5sZW5ndGgpKSByZXR1cm4gWzMgLypicmVhayovLCA4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbSA9IG11dGF0aW9uc18xW19pXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEobS5vcCA9PT0gJ2NsZWFyLWJyYW5jaCcgJiYgKG0uYnJhbmNoSWQgPT09IHRoaXMucXVlcnkuYnJhbmNoSWQpKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucmVmcmVzaE9ySW52YWxpZGF0ZSh2ZXJzaW9uKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKG0ub3AgPT09ICdtZXJnZScgJiYgKCFtLnRhcmdldEJyYW5jaElkIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtLmJyYW5jaElkID09PSB0aGlzLnF1ZXJ5LmJyYW5jaElkIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtLnRhcmdldEJyYW5jaElkID09PSB0aGlzLnF1ZXJ5LmJyYW5jaElkKSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJlZnJlc2hPckludmFsaWRhdGUodmVyc2lvbildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShtLm9wID09PSAndXBkYXRlJyAmJiAoKG0uZGVsdGFEb2MudGFncyAmJiB0aGlzLnF1ZXJ5LnRhZ3MpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAobS5kZWx0YURvYy5uYW1lICYmIHRoaXMucXVlcnkubmFtZSkpKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgN107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEEgdGFnIG1heSBoYXZlIGJlZW4gYWRkZWQsIG9yIHJlbmFtZWQsIGFuZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcXVlcnkgaXMgZGVwZW5kZW50IG9uIHRoZSBzYW1lIHByb3BlcnR5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgcXVlcnkgbXVzdCBiZSByZWZyZXNoZWQgZnJvbSBzZXJ2ZXIgYXMgd2UgY2Fubm90XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbW1pdCB0aGUgbXV0YXRpb25zIGxvY2FsbHkgYXMgd2UgZG9uJ3QgaGF2ZSBhbGwgaW5mby5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZWZyZXNoT3JJbnZhbGlkYXRlKHZlcnNpb24pXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEEgdGFnIG1heSBoYXZlIGJlZW4gYWRkZWQsIG9yIHJlbmFtZWQsIGFuZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcXVlcnkgaXMgZGVwZW5kZW50IG9uIHRoZSBzYW1lIHByb3BlcnR5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgcXVlcnkgbXVzdCBiZSByZWZyZXNoZWQgZnJvbSBzZXJ2ZXIgYXMgd2UgY2Fubm90XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbW1pdCB0aGUgbXV0YXRpb25zIGxvY2FsbHkgYXMgd2UgZG9uJ3QgaGF2ZSBhbGwgaW5mby5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaSsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSB0aGlzLmdldERhdGFXaXRoTXV0YXRpb25zQXBwbGllZChtdXRhdGlvbnMsIGZhbHNlLCB0aGlzLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA5OiByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRRdWVyeS5wcm90b3R5cGUucmVmcmVzaE9ySW52YWxpZGF0ZSA9IGZ1bmN0aW9uICh2ZXJzaW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHRzbGliXzEuX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcy5zdWJzY3JpcHRpb25zLmxlbmd0aCA9PT0gMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmludmFsaWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAzXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMubG9hZCh2ZXJzaW9uKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFF1ZXJ5LnByb3RvdHlwZS5ub3RpZnlTdWJzY3JpYmVycyA9IGZ1bmN0aW9uIChvcHRpbWlzdGljTXV0YXRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5kYXRhICYmIHRoaXMuZ290SW5pdGlhbFJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhXzEgPSB0aGlzLmdldERhdGFXaXRoTXV0YXRpb25zQXBwbGllZChvcHRpbWlzdGljTXV0YXRpb25zLCB0cnVlLCB0aGlzLmRhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAocykge1xyXG4gICAgICAgICAgICAgICAgcy5ub3RpZnlTdWJzY3JpYmVyKGRhdGFfMSwgX3RoaXMuZXJyb3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFF1ZXJ5LnByb3RvdHlwZS5xdWVyeUxvY2FsbHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVwby5xdWVyeVNldC5xdWVyeUxvY2FsbHkodGhpcy50YWJsZSwgdGhpcy5xdWVyeSwgdGhpcy5pbmNsdWRlcyk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFF1ZXJ5LnByb3RvdHlwZS5xdWVyeVNlcnZlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGE7XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yZXBvLmdldENsaWVudCgpLmxpc3QodGhpcy50YWJsZSwgdHNsaWJfMS5fX2Fzc2lnbih7fSwgdGhpcy5xdWVyeSkpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBfYS5zZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBkYXRhXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFF1ZXJ5LnByb3RvdHlwZS5nZXREYXRhV2l0aE11dGF0aW9uc0FwcGxpZWQgPSBmdW5jdGlvbiAobXV0YXRpb25zLCBvcHRpbWlzdGljLCBkYXRhKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBtdXRhdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAobXV0YXRpb24pIHtcclxuICAgICAgICAgICAgZGF0YSA9IF90aGlzLmFwcGx5TXV0YXRpb25zT25EYXRhKGRhdGEsIG11dGF0aW9uLCBvcHRpbWlzdGljKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUXVlcnkucHJvdG90eXBlLmFwcGx5TXV0YXRpb25zT25EYXRhID0gZnVuY3Rpb24gKGRhdGEsIG0sIG9wdGltaXN0aWMpIHtcclxuICAgICAgICBpZiAoYnJhbmNoU2Vuc2l0aXZlKG0pICYmIG0uYnJhbmNoSWQgIT0gdGhpcy5xdWVyeS5icmFuY2hJZClcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgdmFyIF9hID0gdGhpcywgdGFibGUgPSBfYS50YWJsZSwgaW5jbHVkZXMgPSBfYS5pbmNsdWRlcywgbGlzdE9wdGlvbnMgPSBfYS5xdWVyeTtcclxuICAgICAgICB2YXIgc291cmNlSWRzID0gbGlzdE9wdGlvbnMuaGFzRWRnZXNGcm9tID8gW10uY29uY2F0KGxpc3RPcHRpb25zLmhhc0VkZ2VzRnJvbSB8fCBbXSkgOiBbXTtcclxuICAgICAgICB2YXIgcmVxdWVzdGVkVGFncyA9IGxpc3RPcHRpb25zLnRhZ3MgPyBbXS5jb25jYXQobGlzdE9wdGlvbnMudGFncyB8fCBbXSkgOiBbXTtcclxuICAgICAgICBzd2l0Y2ggKG0ub3ApIHtcclxuICAgICAgICAgICAgY2FzZSAndXBkYXRlJzoge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUFycmF5KGRhdGEsIGZ1bmN0aW9uIChkb2MpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZG9jLmlkID09PSBtLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFwcGx5IGRlbHRhIG9uIHVwZGF0ZWQgZG9jdW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVwZGF0ZWREb2MgPSBhcHBseURlbHRhKGRvYywgbS5kZWx0YURvYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpbWlzdGljKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZERvYy4kbWV0YSA9ICd1cGRhdGluZyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVkRG9jO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBpZCBkb2VzIG5vdCBhcHBseSB0byB0aGlzIGRvYywgc2VhcmNoIGluIGdyYXBocyB0aGUgaWQgaXMgZm91bmRcclxuICAgICAgICAgICAgICAgICAgICAvLyBhbW9uZyBncmFwaCBpbmNsdWRlZCBkb2NzLCBhbmQgaWYgc28sIHVwZGF0ZSB0aGF0IG9uZTpcclxuICAgICAgICAgICAgICAgICAgICBpbmNsdWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChsYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmNsdWRlZERvY3MgPSBkb2NbbGFiZWxdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5jbHVkZWREb2NzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlZEFycmF5ID0gdXBkYXRlQXJyYXkoaW5jbHVkZWREb2NzLCBmdW5jdGlvbiAocmVsYXRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWxhdGVkLmlkICE9PSBtLmlkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVsYXRlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlZFJlbGF0ZWQgPSBhcHBseURlbHRhKHJlbGF0ZWQsIG0uZGVsdGFEb2MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpbWlzdGljKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkUmVsYXRlZC4kbWV0YSA9ICd1cGRhdGluZyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZWRSZWxhdGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlZEFycmF5ICE9PSBpbmNsdWRlZERvY3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MgPSB0c2xpYl8xLl9fYXNzaWduKHt9LCBkb2MsIChfYSA9IHt9LCBfYVtsYWJlbF0gPSB1cGRhdGVkQXJyYXksIF9hKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZG9jO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSAnYWRkJzpcclxuICAgICAgICAgICAgICAgIGlmICh0YWJsZSA9PT0gbS50YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaXN0T3B0aW9ucy50YWdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBxdWVyaWVkVGFnc18xID0gW10uY29uY2F0KGxpc3RPcHRpb25zLnRhZ3MpOyAvLyB0YWcgY2FuIGJlIGVpdGhlciBzdHJpbmcgb3Igc3RyaW5nW10uIE1ha2UgaXMgc3RyaW5nW10gYWx3YXlzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobS5kb2MudGFncyAmJiBtLmRvYy50YWdzLnNvbWUoZnVuY3Rpb24gKHRhZykgeyByZXR1cm4gcXVlcmllZFRhZ3NfMS5pbmNsdWRlcyh0YWcpOyB9KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuY29uY2F0KFttLmRvY10pOyAvLyBNYWtlIHRoZSBhZGRlZCBkb2MgYXBwZWFyIGluIHRoZSByZXN1bHQgKG9wdGltaXN0aWMgbXV0YXRpb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVG9kbywgYXBwbHkgYWxzbyBmb3Igb3RoZXIgbGlzdCBvcHRpb25zLCBsaWtlIGlkczpcclxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgYWJvdmUgY29kZSBmb3IgJ2FkZCcgd2FzIG9ubHkgd3JpdHRlbiB0byBjb3ZlciB0aGUgdXNlIGNhc2Ugb2YgdGVhY2hlcnMtcGFnZSBub3RpZmljYXRpb25zIVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7IC8vIGZhbGxiYWNrIGNhc2UgLSBxdWVyeSB3YXMgbm90IGFmZmVjdGVkLlxyXG4gICAgICAgICAgICBjYXNlICdhZGQtcmVsYXRlZCc6XHJcbiAgICAgICAgICAgICAgICBpZiAodGFibGUgPT09IG0udGFibGUgJiYgaW5jbHVkZXMuaW5kZXhPZihtLmdyYXBoUHJvcCkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgZXhwcmVzc2lvbiBpcyBgZGIuY291cnNlQmxvY2tzLi4uLndoYXRldmVyLi4gLmluY2x1ZGUoXCJhYmlsaXRpZXNcIilgLCBkZXRlY3Q6IGRiLmNvdXJzZUJsb2Nrcy5hZGRSZWxhdGVkKGJsb2NrSWQsICdhYmlsaXRpZXMnLCAuLi4pXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gLi4uYmVjYXVzZSB0YWJsZSA9ICdjb3Vyc2VCbG9ja3MnIGFuZCBpbmNsdWRlcyBoYXMgXCJhYmlsaXRpZXNcIi5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlQXJyYXkoZGF0YSwgZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb2MuaWQgIT09IG0uaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZG9jO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVsYXRlZERvYyA9IHRzbGliXzEuX19hc3NpZ24oe30sIG0ucmVsYXRlZERvYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpbWlzdGljKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsYXRlZERvYy4kbWV0YSA9ICdhZGRpbmcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2Fzc2lnbih7fSwgZG9jLCAoX2EgPSB7fSwgX2FbbS5ncmFwaFByb3BdID0gZG9jW20uZ3JhcGhQcm9wXS5jb25jYXQoW3JlbGF0ZWREb2NdKSwgX2EpKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChsaXN0T3B0aW9ucy5oYXNFZGdlc0Zyb20pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlSWRzLmluY2x1ZGVzKG0uaWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGV4cHJlc3Npb24gaXM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgYGRiLmNvdXJzZUJsb2Nrcy5oYXNFZGdlc0Zyb20oW2NvdXJzZUlkXSlgICAobWVhbmluZyB0YWJsZT0nY291cnNlQmxvY2tzJyBhbmQgc291cmNlSWRzIGluY2x1ZGVzIGNvdXJzZUlkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAsIGRldGVjdDogZGIuY291cnNlSW5zdGFuY2VzLmFkZFJlbGF0ZWQoY291cnNlSWQsICdjb3Vyc2VCbG9ja3MnLCAuLi4uKSAvLyBtLmdyYXBoUHJvcCA9PT0gJ2Jsb2NrcyctLT4gZ2V0VGFibGVGcm9tTGFiZWwgLS0+ICdjb3Vyc2VCbG9ja3MnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWJsZSA9PT0gZ2V0VGFibGVGcm9tTGFiZWwobS50YWJsZSwgbS5ncmFwaFByb3ApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxpc3RPcHRpb25zLnRhZ3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuY29uY2F0KHRoaXMuc2V0R3JhcGhQcm9wcyhtLnJlbGF0ZWREb2MpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtLnJlbGF0ZWREb2MudGFncyAmJiByZXF1ZXN0ZWRUYWdzLnNvbWUoZnVuY3Rpb24gKHRhZykgeyByZXR1cm4gbS5yZWxhdGVkRG9jLnRhZ3MuaW5jbHVkZXModGFnKTsgfSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5jb25jYXQodGhpcy5zZXRHcmFwaFByb3BzKG0ucmVsYXRlZERvYykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGxpc3RPcHRpb25zLmlkcyAmJiBsaXN0T3B0aW9ucy5pZHMuc29tZShmdW5jdGlvbiAoaWQpIHsgcmV0dXJuIGlkID09PSBtLnJlbGF0ZWREb2MuaWQ7IH0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQSBjZXJ0YWluIElEIGlzIG9ic2VydmVkLiBBIGRvYyB3aXRoIHRoaXMgaWQgaXMgYmVpbmcgYWRkZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBkb2MgdG8gdGhlIHJlc3VsdC4gRXhhY3RseSB0aGlzIFdJTEwgaGFwcGVuIGluIHRoZSBmb2xsb3dpbmcgdHlwaWNhbCBzY2VuYXJpbzpcclxuICAgICAgICAgICAgICAgICAgICAvLyAxLiBVc2VyIGFkZHMgYSByZWxhdGVkIGRvY3VtZW50IHRvIGEgbGlzdC5cclxuICAgICAgICAgICAgICAgICAgICAvLyAyLiBEb2N1bWVudCByZW1haW5zIHdpdGhpbiB0aGUgTXV0YXRpb25RdWV1ZSB3aGlsZSBiYXRjaC1yZXF1ZXN0IGlzIGJlaW5nIHByb2Nlc3NlZCBieSBzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gMy4gVXNlciBjbGlja3MgdGhlIGFkZGVkIGl0ZW0gdG8gZWRpdCBvciB2aWV3IGl0IChvciBvdXIgY29tcG9uZW50IHJlZGlyZWN0cyB0byBpdHMgZWRpdG9yKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIDQuIEEgbmV3IHF1ZXJ5IG9mIHRoYXQgcGFydGljdWxhciBJRCBpcyBzdWJzY3JpYmVkIHRvIHtpZHM9W3RoZUlkXX1cclxuICAgICAgICAgICAgICAgICAgICAvLyAgICBLZWRCYWNrZW5kUXVlcnkuc3Vic2NyaWJlIHRoZW4gZG9lcyB0aGlzOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgMS4gQ2FsbCBxdWVyeUxvY2FsbHkoKSBiZWZvcmUgcXVlcnlpbmcgc2VydmVyXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAyLiBxdWVyeUxvY2FsbHkoKSBpbnNwZWN0cyBtdXRhdGlvbnMgYW5kIGZpbmRzIGEgbWF0Y2gsIHJldHVybmluZyBhbiBlbXB0eSBsaXN0XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAoYXNzdW1lcyBhcyB3ZSBhcmUgYWRkaW5nIGl0LCBpdCBjYW4ndCBleGlzdCBvbiB0aGUgc2VydmVyIGFueXdheSlcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgIDMuIEtlZEJhY2tlbmRRVWVyeSBhcHBsaWVzIG11dGF0aW9ucyBvbnRvIHRoZSBlbXB0eSBsaXN0LCBhbmQgZW5kcyB1cCBoZXJlIHRvIGFkZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgaXQgb3B0aW1pc3RpY2FsbHkuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICA0LiBXaGVuIHNlcnZlciByZXNwb25kcyB3aXRoIDIwMCBPSywgY2FsbHMgdXMgaGVyZSBhZ2FpbiB3aXRoIG9wdGltaXN0aWM9ZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIHRvIFwicGVyc2lzdFwiIGl0IGluIHRoZSBxdWVyeSdzIGRhdGEgYXJyYXkuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICA0QjogSWYgbm90IDIwMCBPSywgbXV0YXRpb24gbWF5IGJlIGdvbmUgYW5kIHRoZSBzdWJzY3JpYmVyIHdpbGwgc2UgYW4gZXJyb3IgcGFnZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgXCJDb3VsZCBub3QgZmluZCBlbnRpdHkgd2l0aCBpZCBYLlwiIGFsb25nIHdpdGggYSByZWQgZXJyb3IgbWVzc2FnZSBvbiB0aGUgc2NyZWVuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBhYm91dCB0aGF0IGl0IGZhaWxlZCB0byBzYXZlIG9uIHNlcnZlci5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5jb25jYXQodGhpcy5zZXRHcmFwaFByb3BzKG0ucmVsYXRlZERvYykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgICAgIGNhc2UgJ3JlbW92ZS1yZWxhdGVkJzpcclxuICAgICAgICAgICAgICAgIGlmICh0YWJsZSA9PT0gbS50YWJsZSAmJiBpbmNsdWRlcy5pbmRleE9mKG0uZ3JhcGhQcm9wKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlQXJyYXkoZGF0YSwgZnVuY3Rpb24gKGRvYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmNsdWRlZERvY3MgPSBkb2NbbS5ncmFwaFByb3BdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWluY2x1ZGVkRG9jcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkb2M7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb2MuaWQgIT09IG0uaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZG9jO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2Fzc2lnbih7fSwgZG9jLCAoX2EgPSB7fSwgX2FbbS5ncmFwaFByb3BdID0gb3B0aW1pc3RpYyA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXJrIHJlbGF0ZWQtZG9jLXRvLXJlbW92ZSB3aXRoICRtZXRhOiAnZGVsZXRpbmcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdWRlZERvY3MubWFwKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLmlkICE9PSBtLnJlbGF0ZWREb2MuaWQgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgOiB0c2xpYl8xLl9fYXNzaWduKHt9LCBkLCB7ICRtZXRhOiAnZGVsZXRpbmcnIH0pOyB9KSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgcmVsYXRlZC1kb2MtdG8tcmVtb3ZlIGZyb20gZG9jW2dyYXBQcm9wXTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1ZGVkRG9jcy5maWx0ZXIoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQuaWQgIT09IG0ucmVsYXRlZERvYy5pZDsgfSksIF9hKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobGlzdE9wdGlvbnMuaGFzRWRnZXNGcm9tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZUlkcy5pbmNsdWRlcyhtLmlkKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGltaXN0aWMgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5tYXAoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQuaWQgPT09IG0ucmVsYXRlZERvYy5pZCA/IHRzbGliXzEuX19hc3NpZ24oe30sIGQsIHsgJG1ldGE6ICdkZWxldGluZycgfSkgOiBkOyB9KSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmZpbHRlcihmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5pZCAhPT0gbS5yZWxhdGVkRG9jLmlkOyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgICAgICBjYXNlICdkZWxldGUnOlxyXG4gICAgICAgICAgICAgICAgaWYgKHRhYmxlID09PSBtLnRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuZmlsdGVyKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLmlkICE9PSBtLmlkOyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGxpc3RPcHRpb25zLmluY2x1ZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5jbHVkZWRUYWJsZXMgPSBpbmNsdWRlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChsYWJlbCkgeyByZXR1cm4gKHsgbGFiZWw6IGxhYmVsLCB0YWJsZTogZ2V0VGFibGVGcm9tTGFiZWwodGFibGUsIGxhYmVsKSB9KTsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxhYmVsc18xID0gaW5jbHVkZWRUYWJsZXMuZmlsdGVyKGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBfYS50YWJsZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlID09PSBtLnRhYmxlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsYWJlbHNfMS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVBcnJheShkYXRhLCBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbHNfMS5mb3JFYWNoKGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9IF9hLmxhYmVsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfYjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVsYXRlZERvY3MgPSBkb2NbbGFiZWxdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWxhdGVkRG9jcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2MgPSB0c2xpYl8xLl9fYXNzaWduKHt9LCBkb2MsIChfYiA9IHt9LCBfYltsYWJlbF0gPSBvcHRpbWlzdGljID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbGF0ZWREb2NzLm1hcChmdW5jdGlvbiAoZCkgeyByZXR1cm4gZC5pZCA9PT0gbS5pZCA/IHRzbGliXzEuX19hc3NpZ24oe30sIGQsIHsgJG1ldGE6ICdkZWxldGluZycgfSkgOiBkOyB9KSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxhdGVkRG9jcy5maWx0ZXIoZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gX2EuaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlkICE9PSBtLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksIF9iKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZG9jO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUXVlcnkucHJvdG90eXBlLnNldEdyYXBoUHJvcHMgPSBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgdmFyIGNvcHkgPSB0c2xpYl8xLl9fYXNzaWduKHt9LCBkb2MpO1xyXG4gICAgICAgIHRoaXMuaW5jbHVkZXMuZm9yRWFjaChmdW5jdGlvbiAobGFiZWwpIHsgcmV0dXJuIGNvcHlbbGFiZWxdID0gY29weVtsYWJlbF0gfHwgW107IH0pO1xyXG4gICAgICAgIHJldHVybiBjb3B5O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBLZWRCYWNrZW5kUXVlcnk7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IEtlZEJhY2tlbmRRdWVyeSB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1rZWRiYWNrZW5kLXF1ZXJ5LmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IHRhYmxlcyB9IGZyb20gJ2tlZGJhY2tlbmQtc2NoZW1hL3NjaGVtYS5qc29uJztcclxuaW1wb3J0IHsgS2VkQmFja2VuZENvbGxlY3Rpb24gfSBmcm9tICcuL2tlZGJhY2tlbmQtY29sbGVjdGlvbic7XHJcbmltcG9ydCB7IFF1ZXJ5U2V0IH0gZnJvbSAnLi9xdWVyeS1zZXQnO1xyXG5pbXBvcnQgeyBNdXRhdGlvblF1ZXVlIH0gZnJvbSAnLi9tdXRhdGlvbi1xdWV1ZSc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRXcml0ZXIgfSBmcm9tICcuL2tlZGJhY2tlbmQtd3JpdGVyJztcclxuaW1wb3J0IHsgRGVsdGFDb2xsZWN0aW9uIH0gZnJvbSAnLi9kZWx0YS1jb2xsZWN0aW9uL2RlbHRhLWNvbGxlY3Rpb24nO1xyXG52YXIgS2VkQmFja2VuZFJlcG8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBLZWRCYWNrZW5kUmVwbyhnZXRDbGllbnQsIGdldFVzZXIsIGdldFVzZXJEaXNwbGF5TmFtZSwgZGVmYXVsdFF1ZXJ5T3B0aW9ucywgbXV0YXRpb25RdWV1ZSwgcXVlcnlTZXQsIHdyaXRlciwgY2FjaGVPcHRpbWl6ZWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZ2V0Q2xpZW50ID0gZ2V0Q2xpZW50O1xyXG4gICAgICAgIHRoaXMuZ2V0VXNlciA9IGdldFVzZXI7XHJcbiAgICAgICAgdGhpcy5nZXRVc2VyRGlzcGxheU5hbWUgPSBnZXRVc2VyRGlzcGxheU5hbWU7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0UXVlcnlPcHRpb25zID0gZGVmYXVsdFF1ZXJ5T3B0aW9ucztcclxuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUgPSBtdXRhdGlvblF1ZXVlO1xyXG4gICAgICAgIHRoaXMucXVlcnlTZXQgPSBxdWVyeVNldDtcclxuICAgICAgICB0aGlzLndyaXRlciA9IHdyaXRlcjtcclxuICAgICAgICB0aGlzLmNhY2hlT3B0aW1pemVkID0gY2FjaGVPcHRpbWl6ZWQ7XHJcbiAgICAgICAgaWYgKCFkZWZhdWx0UXVlcnlPcHRpb25zKVxyXG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRRdWVyeU9wdGlvbnMgPSB7fTtcclxuICAgICAgICBpZiAoIW11dGF0aW9uUXVldWUpXHJcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZSA9IG5ldyBNdXRhdGlvblF1ZXVlKCk7XHJcbiAgICAgICAgaWYgKCFxdWVyeVNldClcclxuICAgICAgICAgICAgdGhpcy5xdWVyeVNldCA9IG5ldyBRdWVyeVNldCh0aGlzLm11dGF0aW9uUXVldWUpO1xyXG4gICAgICAgIGlmICghd3JpdGVyKVxyXG4gICAgICAgICAgICB0aGlzLndyaXRlciA9IG5ldyBLZWRCYWNrZW5kV3JpdGVyKHRoaXMubXV0YXRpb25RdWV1ZSwgdGhpcy5xdWVyeVNldCwgZ2V0Q2xpZW50LCBnZXRVc2VyLCBnZXRVc2VyRGlzcGxheU5hbWUpO1xyXG4gICAgICAgIE9iamVjdC5rZXlzKHRhYmxlcykuZm9yRWFjaChmdW5jdGlvbiAodGFibGUpIHtcclxuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBuZXcgS2VkQmFja2VuZENvbGxlY3Rpb24oX3RoaXMsIHRhYmxlLCBkZWZhdWx0UXVlcnlPcHRpb25zIHx8IHt9KTtcclxuICAgICAgICAgICAgaWYgKGNhY2hlT3B0aW1pemVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uID0gY29sbGVjdGlvbi5jYWNoZU9wdGltaXplZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzW3RhYmxlXSA9IGNvbGxlY3Rpb247XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5kZWx0YXMgPSBuZXcgRGVsdGFDb2xsZWN0aW9uKHRoaXMud3JpdGVyLmRlbHRhQ2FjaGUsIHtcclxuICAgICAgICAgICAgYnJhbmNoSWQ6IHRoaXMuZGVmYXVsdFF1ZXJ5T3B0aW9ucy5icmFuY2hJZCAvLyBJZiBicmFuY2hJZCBpcyB1bmRlZmluZWQuIERlbHRhQ29sbGVjdGlvbiB3aWxsIHJlc3BvbmQgd2l0aCBFcnJvciBvbiBzdWJzY3JpYmUoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgS2VkQmFja2VuZFJlcG8ucHJvdG90eXBlLnRhYmxlID0gZnVuY3Rpb24gKHRhYmxlTmFtZSkge1xyXG4gICAgICAgIHZhciBjb2xsZWN0aW9uID0gbmV3IEtlZEJhY2tlbmRDb2xsZWN0aW9uKHRoaXMsIHRhYmxlTmFtZSwgdGhpcy5kZWZhdWx0UXVlcnlPcHRpb25zKTtcclxuICAgICAgICBpZiAodGhpcy5jYWNoZU9wdGltaXplZClcclxuICAgICAgICAgICAgY29sbGVjdGlvbiA9IGNvbGxlY3Rpb24uY2FjaGVPcHRpbWl6ZWQoKTtcclxuICAgICAgICByZXR1cm4gY29sbGVjdGlvbjtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUmVwby5wcm90b3R5cGUuX2Nsb25lID0gZnVuY3Rpb24gKHF1ZXJ5T3B0aW9ucywgY2FjaGVPcHRpbWl6ZWQpIHtcclxuICAgICAgICB2YXIgY2xvbmUgPSBuZXcgS2VkQmFja2VuZFJlcG8odGhpcy5nZXRDbGllbnQsIHRoaXMuZ2V0VXNlciwgdGhpcy5nZXRVc2VyRGlzcGxheU5hbWUsIHRzbGliXzEuX19hc3NpZ24oe30sIHRoaXMuZGVmYXVsdFF1ZXJ5T3B0aW9ucywgcXVlcnlPcHRpb25zKSwgdGhpcy5tdXRhdGlvblF1ZXVlLCB0aGlzLnF1ZXJ5U2V0LCB0aGlzLndyaXRlciwgY2FjaGVPcHRpbWl6ZWQgPT09IHVuZGVmaW5lZCA/IHRoaXMuY2FjaGVPcHRpbWl6ZWQgOiBjYWNoZU9wdGltaXplZCk7XHJcbiAgICAgICAgcmV0dXJuIGNsb25lO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRSZXBvLnByb3RvdHlwZS5icmFuY2ggPSBmdW5jdGlvbiAoYnJhbmNoSWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2xvbmUoeyBicmFuY2hJZDogYnJhbmNoSWQgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFJlcG8ucHJvdG90eXBlLnJvbGUgPSBmdW5jdGlvbiAocm9sZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jbG9uZSh7IHJvbGU6IHJvbGUgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFJlcG8ucHJvdG90eXBlLm9wdGltaXplQ2FjaGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Nsb25lKHt9LCB0cnVlKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUmVwby5wcm90b3R5cGUuY2xlYXJCcmFuY2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRlZmF1bHRRdWVyeU9wdGlvbnMuYnJhbmNoSWQpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBjbGVhciBtYXN0ZXIgYnJhbmNoXCIpO1xyXG4gICAgICAgIHRoaXMud3JpdGVyLm11dGF0ZShbeyBvcDogJ2NsZWFyLWJyYW5jaCcsIGJyYW5jaElkOiB0aGlzLmRlZmF1bHRRdWVyeU9wdGlvbnMuYnJhbmNoSWQgfV0sIDApO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRSZXBvLnByb3RvdHlwZS5tZXJnZSA9IGZ1bmN0aW9uICh0YXJnZXRCcmFuY2hJZCkge1xyXG4gICAgICAgIGlmICghdGhpcy5kZWZhdWx0UXVlcnlPcHRpb25zLmJyYW5jaElkKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgbWVyZ2UgZnJvbSBtYXN0ZXIgYnJhbmNoXCIpO1xyXG4gICAgICAgIHRoaXMud3JpdGVyLm11dGF0ZShbeyBvcDogJ21lcmdlJywgYnJhbmNoSWQ6IHRoaXMuZGVmYXVsdFF1ZXJ5T3B0aW9ucy5icmFuY2hJZCwgdGFyZ2V0QnJhbmNoSWQ6IHRhcmdldEJyYW5jaElkIH1dLCAwKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kUmVwby5wcm90b3R5cGUuc2F2ZU5vdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLndyaXRlci53YWl0Rm9yVmVyc2lvblRvUGVyc2lzdCh0aGlzLndyaXRlci5jdXJyZW50VmVyc2lvbildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBLZWRCYWNrZW5kUmVwbztcclxufSgpKTtcclxuZXhwb3J0IHsgS2VkQmFja2VuZFJlcG8gfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9a2VkYmFja2VuZC1yZXBvLmpzLm1hcCIsInZhciBLZWRCYWNrZW5kU3Vic2NyaXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gS2VkQmFja2VuZFN1YnNjcmlwdGlvbihzdWJzY3JpYmVyLCBjb2xsZWN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVyID0gc3Vic2NyaWJlcjtcclxuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSBjb2xsZWN0aW9uO1xyXG4gICAgfVxyXG4gICAgS2VkQmFja2VuZFN1YnNjcmlwdGlvbi5wcm90b3R5cGUubm90aWZ5U3Vic2NyaWJlciA9IGZ1bmN0aW9uIChkYXRhLCBlcnJvcikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvcilcclxuICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlcihbXSwgZXJyb3IsIHRoaXMpO1xyXG4gICAgICAgICAgICBlbHNlIGlmIChkYXRhICE9PSB0aGlzLmxhc3ROb3RpZmllZERhdGEpIHsgLy8gV2lsbCBpbi1mYWN0IGJlIGVxdWFsIGJ5IHJlZmVyZW5jZSBpZiBkYXRhIGlzIHNhbWUgYXMgbGFzdCBub3RpZmljYXRpb24gKGFzIHdlIHVzZSBhbiBpbW11dGFibGUgYXBwcm9hY2ggb24gZGF0YSlcclxuICAgICAgICAgICAgICAgIHRoaXMubGFzdE5vdGlmaWVkRGF0YSA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmliZXIoZGF0YSwgZXJyb3IsIHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVyKFtdLCBleCwgdGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGV4Mikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHdoaWxlIG5vdGlmeWluZyBLZWRCYWNrZW5kU3Vic2NyaWJlcjpcIiwgZXgyLCAnb3JpZ2luYWxseSBub3RpZmllZCBlcnJvcjonLCBleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFN1YnNjcmlwdGlvbi5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uLnVuc3Vic2NyaWJlKHRoaXMpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBLZWRCYWNrZW5kU3Vic2NyaXB0aW9uO1xyXG59KCkpO1xyXG5leHBvcnQgeyBLZWRCYWNrZW5kU3Vic2NyaXB0aW9uIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWtlZGJhY2tlbmQtc3Vic2NyaXB0aW9uLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IE11dGF0aW9uUXVldWUgfSBmcm9tICcuL211dGF0aW9uLXF1ZXVlJztcclxuaW1wb3J0IHsgQmF0Y2hSdW5uZXIgfSBmcm9tICcuLi9rZWQtYmFja2VuZC1jbGllbnQnO1xyXG5pbXBvcnQgeyB0YWJsZXMgfSBmcm9tICdrZWRiYWNrZW5kLXNjaGVtYS9zY2hlbWEuanNvbic7XHJcbmltcG9ydCB7IENhY2hlQnVzdCB9IGZyb20gJy4vY2FjaGUtYnVzdCc7XHJcbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICcuLi9vYnNlcnZhYmxlJztcclxuaW1wb3J0IHsgRGVsdGFDYWNoZSB9IGZyb20gJy4vZGVsdGEtY29sbGVjdGlvbi9kZWx0YS1jYWNoZSc7XHJcbnZhciBLZWRCYWNrZW5kV3JpdGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gS2VkQmFja2VuZFdyaXRlcihtdXRhdGlvblF1ZXVlLCBxdWVyeVNldCwgZ2V0Q2xpZW50LCBnZXRVc2VyLCBnZXRVc2VyRGlzcGxheU5hbWUpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUgPSBtdXRhdGlvblF1ZXVlO1xyXG4gICAgICAgIHRoaXMucXVlcnlTZXQgPSBxdWVyeVNldDtcclxuICAgICAgICB0aGlzLmdldENsaWVudCA9IGdldENsaWVudDtcclxuICAgICAgICB0aGlzLmdldFVzZXIgPSBnZXRVc2VyO1xyXG4gICAgICAgIHRoaXMuZ2V0VXNlckRpc3BsYXlOYW1lID0gZ2V0VXNlckRpc3BsYXlOYW1lO1xyXG4gICAgICAgIHRoaXMuX3RpbWVvdXRJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5faXNTYXZpbmdQcm9taXNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmN1cnJlbnRWZXJzaW9uID0gMDtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlZFZlcnNpb24gPSBuZXcgRW1pdHRlcigwKTtcclxuICAgICAgICB0aGlzLmVycm9yU3Vic2NyaWJlcnMgPSBbXTtcclxuICAgICAgICB0aGlzLnN0YXRlU3Vic2NyaWJlcnMgPSBbXTtcclxuICAgICAgICB0aGlzLmRlbHRhQ2FjaGUgPSBuZXcgRGVsdGFDYWNoZShnZXRDbGllbnQsIGdldFVzZXIsIGdldFVzZXJEaXNwbGF5TmFtZSk7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoS2VkQmFja2VuZFdyaXRlci5wcm90b3R5cGUsIFwiaXNTYXZpbmdcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gISF0aGlzLl9pc1NhdmluZ1Byb21pc2U7IH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEtlZEJhY2tlbmRXcml0ZXIucHJvdG90eXBlLCBcImlzRWRpdGVkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMubXV0YXRpb25RdWV1ZS5nZXQoKS5sZW5ndGggPiAwOyB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEtlZEJhY2tlbmRXcml0ZXIucHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLmVycm9yU3Vic2NyaWJlcnMucHVzaChjYWxsYmFjayk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFdyaXRlci5wcm90b3R5cGUub25TdGF0ZUNoYW5nZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMuc3RhdGVTdWJzY3JpYmVycy5wdXNoKGNhbGxiYWNrKTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kV3JpdGVyLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICB0aGlzLmVycm9yU3Vic2NyaWJlcnMgPSB0aGlzLmVycm9yU3Vic2NyaWJlcnMuZmlsdGVyKGZ1bmN0aW9uIChzKSB7IHJldHVybiBzICE9PSBjYWxsYmFjazsgfSk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZVN1YnNjcmliZXJzID0gdGhpcy5zdGF0ZVN1YnNjcmliZXJzLmZpbHRlcihmdW5jdGlvbiAocykgeyByZXR1cm4gcyAhPT0gY2FsbGJhY2s7IH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRXcml0ZXIucHJvdG90eXBlLmRpc3BhdGNoRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IsIHJldHJ5YWJsZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5lcnJvclN1YnNjcmliZXJzLmZvckVhY2goZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvciwgcmV0cnlhYmxlLCBfdGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKF8pIHsgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRXcml0ZXIucHJvdG90eXBlLmRpc3BhdGNoU3RhdGVDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnN0YXRlU3Vic2NyaWJlcnMuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKF90aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoXykgeyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFdyaXRlci5wcm90b3R5cGUubXV0YXRlID0gZnVuY3Rpb24gKG11dGF0aW9ucywgZGVib3VuY2UpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUuYWRkKG11dGF0aW9ucyk7XHJcbiAgICAgICAgKyt0aGlzLmN1cnJlbnRWZXJzaW9uO1xyXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hTdGF0ZUNoYW5nZSgpO1xyXG4gICAgICAgIHRoaXMucXVlcnlTZXQubm90aWZ5U3Vic2NyaWJlcnMoKTtcclxuICAgICAgICB0aGlzLmRlbHRhQ2FjaGUuYXBwbHlNdXRhdGlvbnModGhpcy5tdXRhdGlvblF1ZXVlLmdldCgpLCB7IG9wdGltaXN0aWM6IHRydWUgfSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9pc1NhdmluZ1Byb21pc2UpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3RpbWVvdXRJZClcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0SWQpO1xyXG4gICAgICAgICAgICB0aGlzLl90aW1lb3V0SWQgPSBzZXRUaW1lb3V0KHRoaXMuc2F2ZS5iaW5kKHRoaXMpLCBkZWJvdW5jZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIGlzU2F2aW5nLCB3ZSBkb24ndCBuZWVkIHRvIGRvIGFueXRoaW5nLCBiZWNhc2UgaXQgd2lsbCByZS1jaGVjayBpZiBhZGRpdGlvbmFsXHJcbiAgICAgICAgLy8gbXV0YXRpb25zIGhhdmUgY29tZSwgd2hlbiBzYXZpbmcgaXMgZG9uZS5cclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kV3JpdGVyLnByb3RvdHlwZS5yZXRyeVNhdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2F2ZSgpO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRXcml0ZXIucHJvdG90eXBlLndhaXRGb3JWZXJzaW9uVG9QZXJzaXN0ID0gZnVuY3Rpb24gKHZlcnNpb24pIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHBlcnNpc3RlZFZlcnNpb247XHJcbiAgICAgICAgICAgIHJldHVybiB0c2xpYl8xLl9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5wZXJzaXN0ZWRWZXJzaW9uLmxvYWQoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzaXN0ZWRWZXJzaW9uID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShwZXJzaXN0ZWRWZXJzaW9uIDwgdmVyc2lvbikpIHJldHVybiBbMyAvKmJyZWFrKi8sIDNdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNhdmUoKTsgLy8gQmUgbW9yZSBlYWdlciB0byBzYXZlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucGVyc2lzdGVkVmVyc2lvbi5maWx0ZXIoZnVuY3Rpb24gKHBlcnNpc3RlZFZlcnNpb24pIHsgcmV0dXJuIHBlcnNpc3RlZFZlcnNpb24gPj0gdmVyc2lvbjsgfSkubG9hZCgpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAzO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBLZWRCYWNrZW5kV3JpdGVyLnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMuX3RpbWVvdXRJZClcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXRJZCk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzU2F2aW5nUHJvbWlzZSlcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lzU2F2aW5nUHJvbWlzZTtcclxuICAgICAgICBpZiAoIXRoaXMuaXNFZGl0ZWQpXHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB0aGlzLl90aW1lb3V0SWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2lzU2F2aW5nUHJvbWlzZSA9IHRoaXMuX3NhdmUoKTtcclxuICAgICAgICB0aGlzLl9pc1NhdmluZ1Byb21pc2UuY2F0Y2goZnVuY3Rpb24gKCkgeyB9KS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLl9pc1NhdmluZ1Byb21pc2UgPSBudWxsOyB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNTYXZpbmdQcm9taXNlO1xyXG4gICAgfTtcclxuICAgIEtlZEJhY2tlbmRXcml0ZXIucHJvdG90eXBlLl9zYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0c2xpYl8xLl9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbXV0YXRpb25zLCB2ZXJzaW9uLCBtdXRhdGlvblJlcXVlc3RzLCByZXNfMSwgZXRhZ011dGF0aW9ucywgZXJyb3JfMTtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoU3RhdGVDaGFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbXV0YXRpb25zID0gdGhpcy5tdXRhdGlvblF1ZXVlLmdldCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uID0gdGhpcy5jdXJyZW50VmVyc2lvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlLm1vdmVUb1NhdmluZ1F1ZXVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG11dGF0aW9uUmVxdWVzdHMgPSB0aGlzLm1hcE11dGF0aW9ucyhtdXRhdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDYsIDExLCAxMl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmdldENsaWVudCgpLmJhdGNoKG11dGF0aW9uUmVxdWVzdHMpXTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc18xID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldGFnTXV0YXRpb25zID0gT2JqZWN0LmtleXMocmVzXzEubmV3RXRhZ3MpLm1hcChmdW5jdGlvbiAoaWQpIHsgcmV0dXJuICh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcDogJ3VwZGF0ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZTogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbHRhRG9jOiB7ICRldGFnOiByZXNfMS5uZXdFdGFnc1tpZF0gfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldE5hbWU6IG51bGwgLy8gV2UgZG9uJ3QgaGF2ZSB0aGUgdGFyZ2V0IG5hbWUuIEJ1dCB0aGlzIG11dGF0aW9uIHdvbid0IGJlIHZpc2libGUgaW4gYSBEZWx0YUNvbGxlY3Rpb24gYW55d2F5LCBzbyBpdCB3b250IGJlIHVzZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW52YWxpZGF0ZSBjYWNoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBDYWNoZUJ1c3QuaW52YWxpZGF0ZUNhY2hlKG11dGF0aW9uUmVxdWVzdHMsIHRoaXMuZ2V0VXNlcigpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tbW1pdCBtdXRhdGlvbnMgYWxvbmcgd2l0aCBldGFnTXV0YXRpb25zIGludG8gcXVlcmllcyBjYWNoZWQgZGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcnNpc3RlZFZlcnNpb24uZGlzcGF0Y2godmVyc2lvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsdGFDYWNoZS5hcHBseU11dGF0aW9ucyhtdXRhdGlvbnMsIHsgb3B0aW1pc3RpYzogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucXVlcnlTZXQuY29tbWl0TXV0YXRpb25zKE11dGF0aW9uUXVldWUubWVyZ2UobXV0YXRpb25zLCBldGFnTXV0YXRpb25zKSwgdmVyc2lvbildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPbiBzdWNjZXNzLCBjbGVhciBzYXZpbmcgcXVldWUgYXMgdGhlIG11dGF0aW9ucyB3aWxsIG5vdyBiZSBjb21taXR0ZWQgdG8gYWxsIHF1ZXJ5J3MgZGF0YSBpbnN0ZWFkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUuY2xlYXJTYXZpbmdRdWV1ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoU3RhdGVDaGFuZ2UoKTsgLy8gaXNFZGl0ZWQgbWF5IGhhdmUgdHVybmVkIHRvIGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpbmFsbHksIG5vdGlmeSBzdWJzY3JpYmVycyBzbyB0aGF0IHZpZXdzIGdldCB1cGRhdGVkIHdpdGggY29tbWl0dGVkIHJlc3VsdHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWVyeVNldC5ub3RpZnlTdWJzY3JpYmVycygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0aGlzLm11dGF0aW9uUXVldWUuZ2V0KCkubGVuZ3RoID4gMCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGRpdGlvbmFsIG11dGF0aW9ucyBoYXBwZW5kIHdoaWxlIHdlIHdlcmUgc2F2aW5nLiBIYW5kbGUgdGhlbSBhcyB3ZWxsLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLl9zYXZlKCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkaXRpb25hbCBtdXRhdGlvbnMgaGFwcGVuZCB3aGlsZSB3ZSB3ZXJlIHNhdmluZy4gSGFuZGxlIHRoZW0gYXMgd2VsbC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDU7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OiByZXR1cm4gWzMgLypicmVhayovLCAxMl07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8xID0gX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcnNpc3RlZFZlcnNpb24uZGlzcGF0Y2hFcnJvcihlcnJvcl8xKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoZXJyb3JfMSAmJiBlcnJvcl8xLm5hbWUgJiYgZXJyb3JfMS5uYW1lLnN0YXJ0c1dpdGgoXCJodHRwNFwiKSkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBY2Nlc3MgQ29udHJvbCBkZW5pZWQsIGJhZCByZXF1ZXN0IG9yIHNpbWlsYXIuIFRocm93IG11dGF0aW9ucyBhd2F5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXJyb3IoZXJyb3JfMSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUuY2xlYXJTYXZpbmdRdWV1ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoU3RhdGVDaGFuZ2UoKTsgLy8gaXNFZGl0ZWQgbWF5IGhhdmUgdHVybmVkIHRvIGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVlcnlTZXQubm90aWZ5U3Vic2NyaWJlcnMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcy5tdXRhdGlvblF1ZXVlLmdldCgpLmxlbmd0aCA+IDApKSByZXR1cm4gWzMgLypicmVhayovLCA4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG8gaG8hIEFkZGl0aW9uYWwgbXV0YXRpb25zIGhhcHBlbmQgd2hpbGUgd2Ugd2VyZSBzYXZpbmcuIEhhbmRsZSB0aGVtIGFsb25lLiBUSGV5IG1pZ2h0IGJlIG1vcmUgbHVja3kuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuX3NhdmUoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBIbyBobyEgQWRkaXRpb25hbCBtdXRhdGlvbnMgaGFwcGVuZCB3aGlsZSB3ZSB3ZXJlIHNhdmluZy4gSGFuZGxlIHRoZW0gYWxvbmUuIFRIZXkgbWlnaHQgYmUgbW9yZSBsdWNreS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDg7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA4OiByZXR1cm4gWzMgLypicmVhayovLCAxMF07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA5OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXJyb3IoZXJyb3JfMSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTA7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMDogcmV0dXJuIFszIC8qYnJlYWsqLywgMTJdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hTdGF0ZUNoYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzcgLyplbmRmaW5hbGx5Ki9dO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTI6IHJldHVybiBbMiAvKnJldHVybiovXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgS2VkQmFja2VuZFdyaXRlci5wcm90b3R5cGUubWFwTXV0YXRpb25zID0gZnVuY3Rpb24gKG11dGF0aW9ucykge1xyXG4gICAgICAgIHZhciBiciA9IG5ldyBCYXRjaFJ1bm5lcigpO1xyXG4gICAgICAgIG11dGF0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAobS5vcCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAndXBkYXRlJzpcclxuICAgICAgICAgICAgICAgICAgICBici51cGRhdGUobS50YWJsZSwgbS5pZCwgbS5kZWx0YURvYywgbS5icmFuY2hJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdhZGQnOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyLmFkZChtLnRhYmxlLCBtLmRvYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdhZGQtcmVsYXRlZCc6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtLnJlbGF0ZWREb2MuJGV0YWcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gJGV0YWcgbWVhbnMgdGhpcyBpcyBhIG5ldyBkb2N1bWVudC4gQWRkIGl0IGJlZm9yZSBsaW5raW5nIHRvIGl0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBici5hZGQodGFibGVzW20udGFibGVdLnJlbGF0aW9uc2hpcHNbbS5ncmFwaFByb3BdLCBtLnJlbGF0ZWREb2MsIG0uYnJhbmNoSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBici5saW5rMihtLnRhYmxlLCBtLmlkLCBtLmdyYXBoUHJvcCwgbS5yZWxhdGVkRG9jLmlkLCBtLmJyYW5jaElkKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3JlbW92ZS1yZWxhdGVkJzpcclxuICAgICAgICAgICAgICAgICAgICBici51bmxpbmsyKG0udGFibGUsIG0uaWQsIG0uZ3JhcGhQcm9wLCBtLnJlbGF0ZWREb2MuaWQsIG0uYnJhbmNoSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAndW5kby1saW5rJzpcclxuICAgICAgICAgICAgICAgICAgICBici51bmRvTGluayhtLnRhYmxlLCBtLmlkLCBtLmdyYXBoUHJvcCwgbS5yZWxhdGVkSWQsIG0uYnJhbmNoSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnZGVsZXRlJzpcclxuICAgICAgICAgICAgICAgICAgICBici5kZWxldGUobS50YWJsZSwgbS5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdjbGVhci1icmFuY2gnOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyLmNsZWFyQnJhbmNoKG0uYnJhbmNoSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnbWVyZ2UnOlxyXG4gICAgICAgICAgICAgICAgICAgIGJyLm1lcmdlKG0uYnJhbmNoSWQsIG0udGFyZ2V0QnJhbmNoSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGJyLm11dGF0aW9uUmVxdWVzdHM7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEtlZEJhY2tlbmRXcml0ZXI7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IEtlZEJhY2tlbmRXcml0ZXIgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9a2VkYmFja2VuZC13cml0ZXIuanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgZ2V0VGFibGVGcm9tTGFiZWwsIGJyYW5jaFNlbnNpdGl2ZSwgZ2xvYmFsT3AgfSBmcm9tICcuL3V0aWxzJztcclxuaW1wb3J0IHsgbWVyZ2VEZWx0YXMgfSBmcm9tICcuL2RlbHRhLW1lcmdlJztcclxudmFyIE11dGF0aW9uUXVldWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBNdXRhdGlvblF1ZXVlKCkge1xyXG4gICAgICAgIHRoaXMucXVldWUgPSBbXTtcclxuICAgICAgICB0aGlzLnNhdmluZ1F1ZXVlID0gW107XHJcbiAgICB9XHJcbiAgICBNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAobXV0YXRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5xdWV1ZSA9IE11dGF0aW9uUXVldWUubWVyZ2UodGhpcy5xdWV1ZSwgbXV0YXRpb25zKTtcclxuICAgIH07XHJcbiAgICBNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5tb3ZlVG9TYXZpbmdRdWV1ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnNhdmluZ1F1ZXVlID0gTXV0YXRpb25RdWV1ZS5tZXJnZSh0aGlzLnNhdmluZ1F1ZXVlLCB0aGlzLnF1ZXVlKTtcclxuICAgICAgICB0aGlzLnF1ZXVlID0gW107XHJcbiAgICB9O1xyXG4gICAgTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuY2xlYXJTYXZpbmdRdWV1ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnNhdmluZ1F1ZXVlID0gW107XHJcbiAgICB9O1xyXG4gICAgTXV0YXRpb25RdWV1ZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNhdmluZ1F1ZXVlLmNvbmNhdCh0aGlzLnF1ZXVlKTtcclxuICAgIH07XHJcbiAgICBNdXRhdGlvblF1ZXVlLnByb3RvdHlwZS5hZmZlY3RzUXVlcnkgPSBmdW5jdGlvbiAodGFibGUsIHF1ZXJ5LCBpbmNsdWRlcykge1xyXG4gICAgICAgIHZhciBtdXRhdGlvbnMgPSB0aGlzLmdldCgpO1xyXG4gICAgICAgIGlmIChtdXRhdGlvbnMuc29tZShmdW5jdGlvbiAobSkgeyByZXR1cm4gbS5vcCA9PT0gJ21lcmdlJyB8fCBtLm9wID09PSAnY2xlYXItYnJhbmNoJzsgfSkpXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGlmIChxdWVyeS5pZHMpIHtcclxuICAgICAgICAgICAgLy8gQSBxdWVyeSB3aXRoIFwiaWRzXCIgZmlsdGVyIHdpbGwgYmUgZWFzeSB0byBkZXRlY3QgYSBuby1tYXRjaCBvbjpcclxuICAgICAgICAgICAgcmV0dXJuIG11dGF0aW9ucy5zb21lKGZ1bmN0aW9uIChtKSB7IHJldHVybiBnbG9iYWxPcChtKSB8fCAoIWJyYW5jaFNlbnNpdGl2ZShtKSB8fCBtLmJyYW5jaElkID09PSBxdWVyeS5icmFuY2hJZCkgJiZcclxuICAgICAgICAgICAgICAgIHF1ZXJ5Lmlkcy5pbmNsdWRlcyhtLmlkKTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE90aGVyd2lzZSwgY2hlY2sgaWYgbXV0YXRpb25zIGFmZmVjdCBzYW1lIGJyYW5jaCBhbmQgdGFibGUuIENvdWxkIGJlIGRvbmUgbW9yZSBmaW5lIGdyYWluZWQsXHJcbiAgICAgICAgLy8gYnV0IHRoYXQgd291bGQgb25seSBiZSBhIHN1Ym9wdGltaXphdGlvbi5cclxuICAgICAgICByZXR1cm4gbXV0YXRpb25zLnNvbWUoZnVuY3Rpb24gKG0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG0ub3AgPT09ICdhZGQnID9cclxuICAgICAgICAgICAgICAgIG0udGFibGUgPT09IHRhYmxlIDpcclxuICAgICAgICAgICAgICAgIG0ub3AgPT09ICdkZWxldGUnID9cclxuICAgICAgICAgICAgICAgICAgICBtLnRhYmxlID09PSB0YWJsZSB8fCAoaW5jbHVkZXMuc29tZShmdW5jdGlvbiAobGFiZWwpIHsgcmV0dXJuIGdldFRhYmxlRnJvbUxhYmVsKHRhYmxlLCBsYWJlbCkgPT09IG0udGFibGU7IH0pKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgZ2xvYmFsT3AobSkgPyB0cnVlIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbS5icmFuY2hJZCA9PSBxdWVyeS5icmFuY2hJZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKG0udGFibGUgPT09IHRhYmxlIHx8IChtLm9wICE9PSAndXBkYXRlJyAmJiAoW3RhYmxlXS5jb25jYXQoaW5jbHVkZXMubWFwKGZ1bmN0aW9uIChsYWJlbCkgeyByZXR1cm4gZ2V0VGFibGVGcm9tTGFiZWwodGFibGUsIGxhYmVsKTsgfSkpLnNvbWUoZnVuY3Rpb24gKHRhYmxlKSB7IHJldHVybiBnZXRUYWJsZUZyb21MYWJlbChtLnRhYmxlLCBtLmdyYXBoUHJvcCkgPT09IHRhYmxlOyB9KSkpKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBNdXRhdGlvblF1ZXVlLm1lcmdlID0gZnVuY3Rpb24gKHF1ZXVlMSwgcXVldWUyKSB7XHJcbiAgICAgICAgdmFyIG11dGFibGVRdWV1ZTEgPSBxdWV1ZTEuc2xpY2UoKTtcclxuICAgICAgICB2YXIgbXV0YWJsZVF1ZXVlMiA9IHF1ZXVlMi5zbGljZSgpO1xyXG4gICAgICAgIC8vaWYgKG11dGFibGVRdWV1ZTEubGVuZ3RoID4gMCkgZGVidWdnZXI7XHJcbiAgICAgICAgdmFyIGxlbiA9IHF1ZXVlMS5sZW5ndGg7XHJcbiAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoaSkge1xyXG4gICAgICAgICAgICB2YXIgbSA9IHF1ZXVlMVtpXTtcclxuICAgICAgICAgICAgaWYgKG0ub3AgPT09ICd1cGRhdGUnKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3ZlcmxhcHBpbmdJZE9wSWR4ID0gbXV0YWJsZVF1ZXVlMi5maW5kSW5kZXgoZnVuY3Rpb24gKG5ld011dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdNdXQub3AgPT09ICd1cGRhdGUnICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld011dC5icmFuY2hJZCA9PT0gbS5icmFuY2hJZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdNdXQuaWQgPT09IG0uaWQ7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChvdmVybGFwcGluZ0lkT3BJZHggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG11dGFibGVRdWV1ZTFbaV0gPSB0c2xpYl8xLl9fYXNzaWduKHt9LCBtLCB7IGRlbHRhRG9jOiBtZXJnZURlbHRhcyhtLmRlbHRhRG9jLCBtdXRhYmxlUXVldWUyW292ZXJsYXBwaW5nSWRPcElkeF0uZGVsdGFEb2MpIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIG11dGFibGVRdWV1ZTIuc3BsaWNlKG92ZXJsYXBwaW5nSWRPcElkeCwgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcclxuICAgICAgICAgICAgX2xvb3BfMShpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG11dGFibGVRdWV1ZTEuY29uY2F0KG11dGFibGVRdWV1ZTIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBNdXRhdGlvblF1ZXVlO1xyXG59KCkpO1xyXG5leHBvcnQgeyBNdXRhdGlvblF1ZXVlIH07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW11dGF0aW9uLXF1ZXVlLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRRdWVyeSB9IGZyb20gJy4va2VkYmFja2VuZC1xdWVyeSc7XHJcbmltcG9ydCAqIGFzIEpzb25TY2hlbWEgZnJvbSAna2VkYmFja2VuZC1zY2hlbWEvc2NoZW1hLmpzb24nO1xyXG5pbXBvcnQgeyBxdWVyeUFycmF5IH0gZnJvbSAnLi91dGlscyc7XHJcbnZhciBRdWVyeVNldCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFF1ZXJ5U2V0KG11dGF0aW9uUXVldWUpIHtcclxuICAgICAgICB0aGlzLm11dGF0aW9uUXVldWUgPSBtdXRhdGlvblF1ZXVlO1xyXG4gICAgICAgIHRoaXMucXVlcmllcyA9IFtdO1xyXG4gICAgfVxyXG4gICAgUXVlcnlTZXQucHJvdG90eXBlLmNvbW1pdE11dGF0aW9ucyA9IGZ1bmN0aW9uIChtdXRhdGlvbnMsIHZlcnNpb24pIHtcclxuICAgICAgICByZXR1cm4gdHNsaWJfMS5fX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRzbGliXzEuX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCBQcm9taXNlLmFsbCh0aGlzLnF1ZXJpZXMubWFwKGZ1bmN0aW9uIChxKSB7IHJldHVybiBxLmNvbW1pdE11dGF0aW9ucyhtdXRhdGlvbnMsIHZlcnNpb24pOyB9KSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFudXBJbnZhbGlkUXVlcmllcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5U2V0LnByb3RvdHlwZS5jbGVhbnVwSW52YWxpZFF1ZXJpZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5xdWVyaWVzID0gdGhpcy5xdWVyaWVzLmZpbHRlcihmdW5jdGlvbiAocSkge1xyXG4gICAgICAgICAgICBpZiAocS5pbnZhbGlkKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocS50aW1lb3V0SGFuZGxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHEudGltZW91dEhhbmRsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcS50aW1lb3V0SGFuZGxlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBRdWVyeVNldC5wcm90b3R5cGUubm90aWZ5U3Vic2NyaWJlcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG9wdGltaXN0aWNNdXRhdGlvbnMgPSB0aGlzLm11dGF0aW9uUXVldWUuZ2V0KCk7XHJcbiAgICAgICAgdGhpcy5xdWVyaWVzLmZvckVhY2goZnVuY3Rpb24gKHEpIHtcclxuICAgICAgICAgICAgcS5ub3RpZnlTdWJzY3JpYmVycyhvcHRpbWlzdGljTXV0YXRpb25zKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBRdWVyeVNldC5wcm90b3R5cGUuZmluZFF1ZXJ5ID0gZnVuY3Rpb24gKHRhYmxlLCBxdWVyeSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXJpZXMuZmluZChmdW5jdGlvbiAocSkgeyByZXR1cm4gcS5xdWVyeUtleSA9PT0gS2VkQmFja2VuZFF1ZXJ5LnF1ZXJ5S2V5KHRhYmxlLCBxdWVyeSk7IH0pO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5U2V0LnByb3RvdHlwZS5xdWVyeUxvY2FsbHkgPSBmdW5jdGlvbiAodGFibGUsIHF1ZXJ5LCBpbmNsdWRlcykge1xyXG4gICAgICAgIC8vIEZvciBub3csIG9ubHkgaGFuZGxlIHRoaXMgdmVyeSBjb21tb24gYW5kIHNwZWNpYWwgY2FzZSAod2hpY2hcclxuICAgICAgICAvLyB3aWxsIHNhdmUgYSBsb3Qgb2YgdW5uZXNjZXNzYXJ5IG5ldHdvcmsgdHJhZmZpYyBpZiBJIGFtIHRoaW5raW5nIHJpZ2h0Li4uKVxyXG4gICAgICAgIHZhciBtdXRhdGlvbnMgPSB0aGlzLm11dGF0aW9uUXVldWUuZ2V0KCk7XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHF1ZXJ5IHdhbnRzIHRvIGdldCBhIHNpbmdsZSBlbnRpdHkgYnkgaXRzIElEOlxyXG4gICAgICAgIGlmIChxdWVyeS5pZHMgJiYgcXVlcnkuaWRzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAvLyBBbmQgaWYgc28sIGlmIHdlIGhhdmUgYW4gb3V0Z29pbmcgbXV0YXRpb24gdG8gY3JlYXRlIHRoYXQgZW50aXR5OlxyXG4gICAgICAgICAgICBpZiAobXV0YXRpb25zLnNvbWUoZnVuY3Rpb24gKG0pIHsgcmV0dXJuIG0ub3AgPT09ICdhZGQtcmVsYXRlZCcgJiYgbS5yZWxhdGVkRG9jLmlkID09PSBxdWVyeS5pZHNbMF07IH0pKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGVuIHJldHVybiBhbiBFTVBUWSByZXNwb25zZSwgc2lnbmFsbGluZyB0aGF0IHdlIGNhbiByZXNvbHZlIHRoaXMgbG9jYWxseSxcclxuICAgICAgICAgICAgICAgIC8vIGJ1dCBsZXQgdGhlIG9wdGlzdGljIGZlYXR1cmUgb2YgS2VkQmFja2VuZFF1ZXJ5IGFwcGx5IHRoZSBtdXRhdGlvbiBiZWZvcmVcclxuICAgICAgICAgICAgICAgIC8vIG5vdGlmeWluZyBzdWJzY3JpYmVycyAod2UgZG9uJ3Qgd2FudCBpdCB0byBiZSBwZXJzaXN0ZW50IGJlZm9yZSB0aGUgc2VydmVyXHJcbiAgICAgICAgICAgICAgICAvLyBoYXMgYWNjZXB0ZWQgdGhlIG11dGF0aW9uKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE9LLCBhbm90aGVyIHF1aXRlIGNvbW1vbiBjYXNlIGlzIHdoZW4gd2UgYXNrIGZvciBhIGNlcnRhaW4gSUQgYW5kIHRoYXQgSUQgcmVwbGllc1xyXG4gICAgICAgIC8vIHdpdGhpbiBhbm90aGVyIHF1ZXJ5XHJcbiAgICAgICAgaWYgKHF1ZXJ5Lmhhc0VkZ2VzRnJvbSB8fCBxdWVyeS5oYXNFZGdlc1RvKVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gTm90IHBvc3NpYmxlIHRvIGhhbmRsZVxyXG4gICAgICAgIGlmICghcXVlcnkuaWRzKVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gRm9yIG5vdywganVzdCB0YWtlIGhpZ2h0IGZvciB0aGlzIHBhcnRpY3VsYXIgYW5kIG1vc3QgY29tbW9uIGNhc2UhXHJcbiAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAocSkge1xyXG4gICAgICAgICAgICBpZiAoIXEuZ290SW5pdGlhbFJlc3BvbnNlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiY29udGludWVcIjtcclxuICAgICAgICAgICAgaWYgKHEucXVlcnkuYnJhbmNoSWQgIT09IHF1ZXJ5LmJyYW5jaElkKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiY29udGludWVcIjtcclxuICAgICAgICAgICAgaWYgKHEucXVlcnkuZmxhZ3MpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJjb250aW51ZVwiOyAvLyBJdCB3b3VsZCBiZSBjb21wbGV4IHRvIHN1cHBvcnQgdmFyaW91cyBmbGFncy4gUXVlcnkncyBkYXRhIG1heSBpbmNsdWRlIGlkcyBvbmx5LiBDYW4ndCByZWx5IG9uIHRoZSBxdWVyeS5cclxuICAgICAgICAgICAgdmFyIHFJbmNsdWRlcyA9IHEuaW5jbHVkZXM7XHJcbiAgICAgICAgICAgIGlmIChxSW5jbHVkZXMubGVuZ3RoID4gMCAmJiAoIXF1ZXJ5LmluY2x1ZGUgfHwgcXVlcnkuaW5jbHVkZS5sZW5ndGggPT09IDApKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBkb24ndCBpbmNsdWRlLCBidXQgdGhpcyBxdWVyeSBkb2VzLiBDaGVjayBpZiB3ZSBjYW4gZmluZCBvdXIgcmVzdWx0IHdpdGhpbiBpdC5cclxuICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9IHFJbmNsdWRlcy5maW5kKGZ1bmN0aW9uIChsKSB7IHJldHVybiBKc29uU2NoZW1hLnRhYmxlc1txLnRhYmxlXVtcInJlbGF0aW9uc2hpcHNcIl1bbF0gPT09IHRhYmxlOyB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChsYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXNfMSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBxLmRhdGE7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbnRpdHkgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdWJEYXRhID0gcXVlcnlBcnJheShxdWVyeSwgZW50aXR5W2xhYmVsXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YkRhdGEuZm9yRWFjaChmdW5jdGlvbiAocikgeyByZXR1cm4gcmVzXzFbci5pZF0gPSByOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdF8xID0gT2JqZWN0LmtleXMocmVzXzEpLm1hcChmdW5jdGlvbiAoaWQpIHsgcmV0dXJuIHJlc18xW2lkXTsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSByZXR1cm4gcmVzdWx0IGlmIHdlIGNvdWxkIGxvb2sgdXAgZXZlcnkgcmVxdWVzdGVkIElEOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcXVlcnkuaWRzLmV2ZXJ5KGZ1bmN0aW9uIChpZCkgeyByZXR1cm4gcmVzdWx0XzEuc29tZShmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZCA9PT0gaWQ7IH0pOyB9KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiY29udGludWVcIjtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogcmVzdWx0XzEgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWluY2x1ZGVzLmV2ZXJ5KGZ1bmN0aW9uIChsYWJlbCkgeyByZXR1cm4gcUluY2x1ZGVzLmluY2x1ZGVzKGxhYmVsKTsgfSkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJjb250aW51ZVwiO1xyXG4gICAgICAgICAgICAvLyBMYXN0bHksIGlmIHRoZSBxdWVyeSBpbmNsdWRlcyBhbGwgZ3JhcGhzIHRoYXQgd2UgZG8sIHBpY2sgdGhlIHN1YnNldCBmcm9tIHRoYXQgcXVlcnkuXHJcbiAgICAgICAgICAgIC8vIENvbmNyZXRlIGV4YW1wbGU6IFdlIG9ic2VydmUgYSBjZXJ0YWluIFRhc2sgYnkgSUQgYW5kIHdhbnQgaXRzIGtub3dsZWRnZVJlcXVpcmVtZW50cyBhbG9uZyB3aXRoIGl0LFxyXG4gICAgICAgICAgICAvLyBhbmQgdGhlcmUncyBhbm90aGVyIHF1ZXJ5IG9mIGFsbCB0YXNrcyB0aGF0IGFsc28gaW5jbHVkZXMga25vd2xlZGdlUmVxdWlyZW1lbnRzLiBVc2UgaXQuIFxyXG4gICAgICAgICAgICBpZiAocS50YWJsZSA9PT0gdGFibGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bHRfMiA9IHF1ZXJ5QXJyYXkocXVlcnksIHEuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAvLyBPbmx5IHJldHVybiByZXN1bHQgaWYgd2UgY291bGQgbG9vayB1cCBldmVyeSByZXF1ZXN0ZWQgSUQ6XHJcbiAgICAgICAgICAgICAgICBpZiAoIXF1ZXJ5Lmlkcy5ldmVyeShmdW5jdGlvbiAoaWQpIHsgcmV0dXJuIHJlc3VsdF8yLnNvbWUoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguaWQgPT09IGlkOyB9KTsgfSkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiY29udGludWVcIjtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiByZXN1bHRfMiB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5xdWVyaWVzOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgcSA9IF9hW19pXTtcclxuICAgICAgICAgICAgdmFyIHN0YXRlXzEgPSBfbG9vcF8xKHEpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHN0YXRlXzEgPT09IFwib2JqZWN0XCIpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhdGVfMS52YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUXVlcnlTZXQucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHtcclxuICAgICAgICB2YXIgX2EgPSBzdWJzY3JpcHRpb24uY29sbGVjdGlvbiwgdGFibGUgPSBfYS50YWJsZSwgcXVlcnkgPSBfYS5xdWVyeSwgcmVwbyA9IF9hLnJlcG87XHJcbiAgICAgICAgdmFyIGtiUXVlcnkgPSB0aGlzLmZpbmRRdWVyeSh0YWJsZSwgcXVlcnkpO1xyXG4gICAgICAgIGlmICgha2JRdWVyeSkge1xyXG4gICAgICAgICAgICBrYlF1ZXJ5ID0gbmV3IEtlZEJhY2tlbmRRdWVyeSh0YWJsZSwgcXVlcnksIHJlcG8uZ2V0VXNlcigpLCByZXBvLCB0aGlzLm11dGF0aW9uUXVldWUpO1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJpZXMucHVzaChrYlF1ZXJ5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChrYlF1ZXJ5LnRpbWVvdXRIYW5kbGUpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChrYlF1ZXJ5LnRpbWVvdXRIYW5kbGUpO1xyXG4gICAgICAgICAgICAgICAga2JRdWVyeS50aW1lb3V0SGFuZGxlID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBrYlF1ZXJ5LnN1YnNjcmliZShzdWJzY3JpcHRpb24pO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5U2V0LnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBfYSA9IHN1YnNjcmlwdGlvbi5jb2xsZWN0aW9uLCB0YWJsZSA9IF9hLnRhYmxlLCBxdWVyeSA9IF9hLnF1ZXJ5LCByZXBvID0gX2EucmVwbztcclxuICAgICAgICB2YXIga2JRdWVyeSA9IHRoaXMuZmluZFF1ZXJ5KHRhYmxlLCBxdWVyeSk7XHJcbiAgICAgICAgaWYgKGtiUXVlcnkpIHtcclxuICAgICAgICAgICAgLy8gUHJvaGliaXQgZnVydGhlciBub3RpZmljYXRpb25zIHRvIHRoaXMgc3Vic2NyaXB0aW9uOlxyXG4gICAgICAgICAgICBrYlF1ZXJ5LnVuc3Vic2NyaWJlKHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIC8vIFJlbGVhc2UgdW5uZXNjZXNzYXJ5IG1lbW9yeSB3aGVuIHRoZXJlIGFyZSBubyBtb3JlIHN1YnNjcmlwdGlvbnMgb2YgdGhpcyBxdWVyeSwgYnkgcmVtb3ZpbmcgdGhlIHF1ZXJ5IGl0c2VsZlxyXG4gICAgICAgICAgICAvLyBUbyB0aGF0IGluIGEgZGVsYXllZCBtYW5uZXIsIHNvIHRoYXQgYW4gdW5zdWJzY3JpYmUoKSBmb2xsb3dlZCBieSBhbiBpbW1lZGlhdGUgc3Vic2NyaWJlKCkgZG9uJ3QgaGF2ZSB0byByZS1xdWVyeSB0aGUgc2VydmVyOlxyXG4gICAgICAgICAgICBpZiAoa2JRdWVyeS5zdWJzY3JpcHRpb25zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gU2NoZWR1bGUgZm9yIGdhcmJhZ2UgY29sbGVjdGlvbiBpbiA1IG1pbnV0ZXM6XHJcbiAgICAgICAgICAgICAgICBrYlF1ZXJ5LnRpbWVvdXRIYW5kbGUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBrYlF1ZXJ5IHN0aWxsIGhhcyBubyBzdWJzY3JpcHRpb25zIChub3QgY2VydGFpbiEgQSBuZXcgc3Vic2NyaWJlciBtYXkgaGF2ZSBjb21lIGFsb25nLi4uKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrYlF1ZXJ5LnN1YnNjcmlwdGlvbnMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN0aWxsIG5vIHN1YnNjcmlwdGlvbnMgb24gaXQsIHRpbWUgdG8gcmVsZWFzZSBzb21lIG1lbW9yeSBhbmQgZm9yZ2V0IHRoZSBpbi1tZW1vcnkgY2FjaGUgb2YgdGhlIHF1ZXJ5IHJlc3VsdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5xdWVyaWVzID0gX3RoaXMucXVlcmllcy5maWx0ZXIoZnVuY3Rpb24gKHEpIHsgcmV0dXJuIHEgIT09IGtiUXVlcnk7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIHRoaXMucXVlcmllcy5sZW5ndGggPiA1MCA/XHJcbiAgICAgICAgICAgICAgICAgICAgNTAwIDogLy8gRG9uJ3QgaG9zdCB0b28gbWFueSBxdWVyaWVzLiBHYXJiYWdlIGNvbGxlY3QgdGhpcyB3aXRoaW4gNTAwIG1zXHJcbiAgICAgICAgICAgICAgICAgICAgNSAqIDYwMDAwKTsgLy8gQWxsb3cgcXVlcnkgaW4gbWVtb3J5IGZvciBhbm90aGVyIDUgbWludXRlc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBRdWVyeVNldDtcclxufSgpKTtcclxuZXhwb3J0IHsgUXVlcnlTZXQgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cXVlcnktc2V0LmpzLm1hcCIsImltcG9ydCB7IHRhYmxlcyB9IGZyb20gJ2tlZGJhY2tlbmQtc2NoZW1hL3NjaGVtYS5qc29uJztcclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRhYmxlRnJvbUxhYmVsKHRhYmxlLCBsYWJlbCkge1xyXG4gICAgcmV0dXJuIHRhYmxlc1t0YWJsZV0ucmVsYXRpb25zaGlwc1tsYWJlbF07XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIHF1ZXJ5QXJyYXkocXVlcnksIGRhdGEpIHtcclxuICAgIHZhciBmaWx0ZXIgPSBnZXRGaWx0ZXJGcm9tUXVlcnkocXVlcnkpO1xyXG4gICAgcmV0dXJuIGRhdGEuZmlsdGVyKGZpbHRlcik7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIEFORChmaWx0ZXIxLCBmaWx0ZXIyKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHgpIHsgcmV0dXJuIGZpbHRlcjEoeCkgJiYgZmlsdGVyMih4KTsgfTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsdGVyRnJvbVF1ZXJ5KHF1ZXJ5KSB7XHJcbiAgICB2YXIgZmlsdGVyID0gZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHRydWU7IH07XHJcbiAgICBpZiAocXVlcnkuZnJvbSlcclxuICAgICAgICByZXR1cm4gQU5EKGZpbHRlciwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguZGF0ZVRpbWUgPj0gcXVlcnkuZnJvbTsgfSk7XHJcbiAgICBpZiAocXVlcnkudG8pXHJcbiAgICAgICAgcmV0dXJuIEFORChmaWx0ZXIsIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmRhdGVUaW1lIDwgcXVlcnkudG87IH0pO1xyXG4gICAgaWYgKHF1ZXJ5LmlkcylcclxuICAgICAgICByZXR1cm4gQU5EKGZpbHRlciwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHF1ZXJ5Lmlkcy5pbmNsdWRlcyh4LmlkKTsgfSk7XHJcbiAgICBpZiAocXVlcnkubmFtZSlcclxuICAgICAgICByZXR1cm4gQU5EKGZpbHRlciwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgubmFtZSA9PT0gcXVlcnkubmFtZTsgfSk7XHJcbiAgICBpZiAocXVlcnkudGFncylcclxuICAgICAgICByZXR1cm4gQU5EKGZpbHRlciwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgudGFncyAmJiBbXS5jb25jYXQocXVlcnkudGFncyB8fCBbXSkuc29tZShmdW5jdGlvbiAodGFnKSB7IHJldHVybiB4LnRhZ3MuaW5jbHVkZXModGFnKTsgfSk7IH0pO1xyXG4gICAgLy8gcXVlcnkuaGFzRWRnZXNGcm9tIGFuZCBxdWVyeS5oYXNFZGdlc1RvIGNhbm5vdCBieSBmaWx0ZXJlZCBoZXJlXHJcbiAgICByZXR1cm4gZmlsdGVyO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBicmFuY2hTZW5zaXRpdmUobSkge1xyXG4gICAgcmV0dXJuIG0ub3AgIT09ICdkZWxldGUnO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBnbG9iYWxPcChtKSB7XHJcbiAgICByZXR1cm4gbS5vcCA9PT0gJ2NsZWFyLWJyYW5jaCcgfHwgbS5vcCA9PT0gJ21lcmdlJztcclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5qcy5tYXAiLCJpbXBvcnQgbWlncmF0ZSBmcm9tICcuL21pZ3JhdGUnO1xyXG5leHBvcnQgdmFyIEtlZE1vZGVsTWlncmF0b3JNaXhpbiA9IGZ1bmN0aW9uIChjbGllbnQpIHtcclxuICAgIGlmIChjbGllbnQuX19taWdyYXRvcl9taXhlZF9pbilcclxuICAgICAgICByZXR1cm47XHJcbiAgICBjbGllbnQuX19taWdyYXRvcl9taXhlZF9pbiA9IHRydWU7XHJcbiAgICB2YXIgZ2V0ID0gY2xpZW50LmdldDtcclxuICAgIHZhciBsaXN0ID0gY2xpZW50Lmxpc3Q7XHJcbiAgICBjbGllbnQuZ2V0ID0gZnVuY3Rpb24gKHRhYmxlLCBpZCwgb3B0aW9ucykge1xyXG4gICAgICAgIHZhciBpbmNsdWRlID0gb3B0aW9ucyAmJiBvcHRpb25zLmluY2x1ZGU7XHJcbiAgICAgICAgcmV0dXJuIGdldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICBtaWdyYXRlKHJlc3VsdCwgdGFibGUsIGluY2x1ZGUgJiYgaW5jbHVkZS50b1N0cmluZygpLnNwbGl0KCcsJykpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIGNsaWVudC5saXN0ID0gZnVuY3Rpb24gKHRhYmxlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIGluY2x1ZGUgPSBvcHRpb25zICYmIG9wdGlvbnMuaW5jbHVkZTtcclxuICAgICAgICByZXR1cm4gbGlzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICByZXN1bHQuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7IHJldHVybiBtaWdyYXRlKGRvYywgdGFibGUsIGluY2x1ZGUgJiYgaW5jbHVkZS50b1N0cmluZygpLnNwbGl0KCcsJykpOyB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gY2xpZW50O1xyXG59O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJpbXBvcnQgbWlncmF0ZVRhc2sgZnJvbSAnLi9taWdyYXRlLXRhc2snO1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtaWdyYXRlQ291cnNlKGNvdXJzZSwgZ3JhcGhzKSB7XHJcbiAgICBpZiAoIWNvdXJzZS5tb2R1bGVzKVxyXG4gICAgICAgIGNvdXJzZS5tb2R1bGVzID0gW107XHJcbiAgICBjb3Vyc2UubW9kdWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChtb2R1bGUpIHtcclxuICAgICAgICBpZiAoIW1vZHVsZS5yZXNvdXJjZXMpIHtcclxuICAgICAgICAgICAgbW9kdWxlLnJlc291cmNlcyA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIW1vZHVsZS50YXNrSWRzKSB7XHJcbiAgICAgICAgICAgIG1vZHVsZS50YXNrSWRzID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBpZiAoIWNvdXJzZS5yZXNwb25zaWJsZVRlYWNoZXJzKSB7XHJcbiAgICAgICAgY291cnNlLnJlc3BvbnNpYmxlVGVhY2hlcnMgPSBbXTtcclxuICAgIH1cclxuICAgIC8vIEVhcmxpZXIgd3Jvbmcgc3BlbGxpbmcgb2YgcmVzb3VyY2VzXHJcbiAgICBpZiAoJ3Jlc291cnNlcycgaW4gY291cnNlICYmICEoJ3Jlc291cmNlcycgaW4gY291cnNlKSkge1xyXG4gICAgICAgIGNvdXJzZS5yZXNvdXJjZXMgPSBjb3Vyc2UucmVzb3Vyc2VzO1xyXG4gICAgICAgIGRlbGV0ZSBjb3Vyc2UucmVzb3Vyc2VzO1xyXG4gICAgfVxyXG4gICAgaWYgKCFjb3Vyc2UucmVzb3VyY2VzKSB7XHJcbiAgICAgICAgY291cnNlLnJlc291cmNlcyA9IFtdO1xyXG4gICAgfVxyXG4gICAgaWYgKGdyYXBocykge1xyXG4gICAgICAgIGdyYXBocy5mb3JFYWNoKGZ1bmN0aW9uIChsYWJlbCkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICd0YXNrcyc6XHJcbiAgICAgICAgICAgICAgICAgICAgY291cnNlLnRhc2tzLmZvckVhY2goZnVuY3Rpb24gKHRhc2spIHsgcmV0dXJuIG1pZ3JhdGVUYXNrKHRhc2spOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1pZ3JhdGUtY291cnNlLmpzLm1hcCIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1pZ3JhdGVUYXNrKHRhc2spIHtcclxuICAgIGlmICghdGFzay5yZXNvdXJjZXMpXHJcbiAgICAgICAgdGFzay5yZXNvdXJjZXMgPSBbXTtcclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1taWdyYXRlLXRhc2suanMubWFwIiwiaW1wb3J0IG1pZ3JhdGVDb3Vyc2UgZnJvbSAnLi9taWdyYXRlLWNvdXJzZSc7XHJcbmltcG9ydCBtaWdyYXRlVGFzayBmcm9tICcuL21pZ3JhdGUtdGFzayc7XHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1pZ3JhdGUoZG9jLCB0YWJsZSwgZ3JhcGhzKSB7XHJcbiAgICBzd2l0Y2ggKHRhYmxlKSB7XHJcbiAgICAgICAgY2FzZSBcImNvdXJzZXNcIjpcclxuICAgICAgICAgICAgbWlncmF0ZUNvdXJzZShkb2MsIGdyYXBocyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJ0YXNrc1wiOlxyXG4gICAgICAgICAgICBtaWdyYXRlVGFzayhkb2MpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1taWdyYXRlLmpzLm1hcCIsImltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XHJcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tIFwiLi9vYnNlcnZhYmxlXCI7XHJcbmltcG9ydCB7IGluaXRNYXBNZXRob2QgfSBmcm9tIFwiLi9tYXBcIjtcclxuaW1wb3J0IHsgVmFsdWUgfSBmcm9tIFwiLi92YWx1ZVwiO1xyXG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSBcIi4vZW1pdHRlclwiO1xyXG52YXIgQ29sbGVjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliXzEuX19leHRlbmRzKENvbGxlY3Rpb24sIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBDb2xsZWN0aW9uKHN1YnNjcmliZSkge1xyXG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBzdWJzY3JpYmUpIHx8IHRoaXM7XHJcbiAgICB9XHJcbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5fbWFwID0gZnVuY3Rpb24gKG1hcHBlcikge1xyXG4gICAgICAgIHRocm93IFwibWl4ZWRpblwiO1xyXG4gICAgfTtcclxuICAgIENvbGxlY3Rpb24uZnJvbSA9IGZ1bmN0aW9uICh4KSB7XHJcbiAgICAgICAgaWYgKHguc3Vic2NyaWJlKVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb24oZnVuY3Rpb24gKHMpIHsgcmV0dXJuIHguc3Vic2NyaWJlKHMpOyB9KTtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh4KSkge1xyXG4gICAgICAgICAgICB2YXIgZW1pdHRlcl8xID0gbmV3IEVtaXR0ZXIoeCk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvbihmdW5jdGlvbiAocykgeyByZXR1cm4gZW1pdHRlcl8xLnN1YnNjcmliZShzKTsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk9ic2VydmFibGVDb2xsZWN0aW9uLmZyb20oKSBjYW4gb25seSB0YWtlIGFycmF5cyBvciBvYnNlcnZhYmxlc1wiKTtcclxuICAgIH07XHJcbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5tYXAgPSBmdW5jdGlvbiAobWFwcGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcChmdW5jdGlvbiAoaXRlbXMpIHsgcmV0dXJuIGl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gbWFwcGVyKGl0ZW0pOyB9KTsgfSk7XHJcbiAgICB9O1xyXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZmxhdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWFwKGZ1bmN0aW9uIChpdGVtcykgeyByZXR1cm4gW10uY29uY2F0LmFwcGx5KFtdLCBpdGVtcyk7IH0pO1xyXG4gICAgfTtcclxuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uIChmaWx0ZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWFwKGZ1bmN0aW9uIChpdGVtcykgeyByZXR1cm4gaXRlbXMuZmlsdGVyKGZpbHRlcik7IH0pO1xyXG4gICAgfTtcclxuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmNvbmNhdCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiBDb2xsZWN0aW9uLmZyb20odGhpcy50b1ZhbHVlKCkuY29tYmluZUxhdGVzdChvdGhlcikubWFwKGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICB2YXIgbWUgPSBfYVswXSwgb3RoZXIgPSBfYVsxXTtcclxuICAgICAgICAgICAgcmV0dXJuIG1lLmNvbmNhdChvdGhlcik7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgfTtcclxuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLm9yZGVyQnkgPSBmdW5jdGlvbiAocHJvcCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvVmFsdWUoKS5tYXAoZnVuY3Rpb24gKGFycmF5KSB7IHJldHVybiBhcnJheS5zbGljZSgpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgdmFyIGFQcm9wID0gYSAmJiBhW3Byb3BdO1xyXG4gICAgICAgICAgICB2YXIgYlByb3AgPSBiICYmIGJbcHJvcF07XHJcbiAgICAgICAgICAgIHJldHVybiBhUHJvcCA+IGJQcm9wID8gMSA6IGFQcm9wIDwgYlByb3AgPyAtMSA6IDA7XHJcbiAgICAgICAgfSk7IH0pLnRvQ29sbGVjdGlvbihmdW5jdGlvbiAoeCkgeyByZXR1cm4geDsgfSk7XHJcbiAgICB9O1xyXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUudG9WYWx1ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgVmFsdWUoZnVuY3Rpb24gKHMpIHsgcmV0dXJuIF90aGlzLnN1YnNjcmliZShzKTsgfSk7XHJcbiAgICB9O1xyXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZ3JvdXBCeSA9IGZ1bmN0aW9uIChwcm9wKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudG9WYWx1ZSgpLm1hcChmdW5jdGlvbiAoaXRlbXMpIHtcclxuICAgICAgICAgICAgdmFyIHJ2ID0ge307XHJcbiAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBsaXN0ID0gcnZbaXRlbVtwcm9wXV0gfHwgKHJ2W2l0ZW1bcHJvcF1dID0gW10pO1xyXG4gICAgICAgICAgICAgICAgbGlzdC5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJ2O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmZpcnN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRvVmFsdWUoKS5tYXAoZnVuY3Rpb24gKGFycikgeyByZXR1cm4gYXJyWzBdOyB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ29sbGVjdGlvbjtcclxufShPYnNlcnZhYmxlKSk7XHJcbmV4cG9ydCB7IENvbGxlY3Rpb24gfTtcclxuQ29sbGVjdGlvbi5wcm90b3R5cGUuX21hcCA9IGluaXRNYXBNZXRob2QoQ29sbGVjdGlvbik7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbGxlY3Rpb24uanMubWFwIiwiaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcclxuaW1wb3J0IHsgVmFsdWUgfSBmcm9tIFwiLi92YWx1ZVwiO1xyXG52YXIgRW1pdHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliXzEuX19leHRlbmRzKEVtaXR0ZXIsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBFbWl0dGVyKGluaXRpYWxWYWx1ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnN1YnNjcmliZXJzID0gX3RoaXMuc3Vic2NyaWJlcnMuZmlsdGVyKGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gX2FbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMgIT09IG9ic2VydmVyO1xyXG4gICAgICAgICAgICAgICAgfSk7IH0sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIF90aGlzLnN1YnNjcmliZXJzLnB1c2goW29ic2VydmVyLCBzdWJzY3JpcHRpb25dKTtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmVycm9yKVxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgX3RoaXMuZXJyb3IsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIG9ic2VydmVyKF90aGlzLnZhbHVlLCB1bmRlZmluZWQsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XHJcbiAgICAgICAgfSkgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5zdWJzY3JpYmVycyA9IFtdO1xyXG4gICAgICAgIF90aGlzLnZhbHVlID0gaW5pdGlhbFZhbHVlO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIEVtaXR0ZXIucHJvdG90eXBlLmRpc3BhdGNoID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuZXJyb3IgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5fZGlzcGF0Y2goKTtcclxuICAgIH07XHJcbiAgICBFbWl0dGVyLnByb3RvdHlwZS5kaXNwYXRjaEVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xyXG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoKCk7XHJcbiAgICB9O1xyXG4gICAgRW1pdHRlci5wcm90b3R5cGUuX2Rpc3BhdGNoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVycy5mb3JFYWNoKGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBfYVswXSwgc3Vic2NyaXB0aW9uID0gX2FbMV07XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlcihfdGhpcy52YWx1ZSwgX3RoaXMuZXJyb3IsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEVtaXR0ZXI7XHJcbn0oVmFsdWUpKTtcclxuZXhwb3J0IHsgRW1pdHRlciB9O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbWl0dGVyLmpzLm1hcCIsInZhciBzdGFjayA9IFtdO1xyXG52YXIgY3VycmVudEZpYmVyID0gbnVsbDtcclxudmFyIHByb3ZpZGVycyA9IFtmdW5jdGlvbiAoKSB7IHJldHVybiBjdXJyZW50RmliZXI7IH1dO1xyXG5mdW5jdGlvbiBwdXNoRmliZXIoZmliZXIpIHtcclxuICAgIHN0YWNrLnB1c2goY3VycmVudEZpYmVyKTtcclxuICAgIGN1cnJlbnRGaWJlciA9IGZpYmVyO1xyXG59XHJcbmZ1bmN0aW9uIHBvcEZpYmVyKCkge1xyXG4gICAgY3VycmVudEZpYmVyID0gc3RhY2sucG9wKCk7XHJcbn1cclxuZXhwb3J0IHZhciBGaWJlckNvbnRleHQgPSB7XHJcbiAgICBnZXQgY3VycmVudCgpIHsgcmV0dXJuIGN1cnJlbnRGaWJlcjsgfSxcclxuICAgIC8qcnVuOiBmdW5jdGlvbiByZXJ1bjxSPihmaWJlcjogRmliZXIsIGZuOiAoKT0+Uik6IFIgfCBQcm9taXNlPFI+IHtcclxuICAgICAgcHVzaEZpYmVyKGZpYmVyKTtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZuKCkpO1xyXG4gICAgICB9IGNhdGNoIChwKSB7XHJcbiAgICAgICAgaWYgKHAgJiYgdHlwZW9mIHAudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgcmV0dXJuIHAudGhlbigoKT0+cmVydW4oZmliZXIsIGZuKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgcG9wRmliZXIoKTtcclxuICAgICAgfVxyXG4gICAgfSwqL1xyXG4gICAgYWRkUHJvdmlkZXI6IGZ1bmN0aW9uIChnZXRDdXJyZW50RmliZXIpIHtcclxuICAgICAgICBwcm92aWRlcnMucHVzaChnZXRDdXJyZW50RmliZXIpO1xyXG4gICAgICAgIHNldEN1cnJlbnRHZXR0ZXJGcm9tUHJvdmlkZXJzKCk7XHJcbiAgICB9LFxyXG4gICAgcmVtb3ZlUHJvdmlkZXI6IGZ1bmN0aW9uIChnZXRDdXJyZW50RmliZXIpIHtcclxuICAgICAgICBwcm92aWRlcnMgPSBwcm92aWRlcnMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwICE9PSBnZXRDdXJyZW50RmliZXI7IH0pO1xyXG4gICAgICAgIHNldEN1cnJlbnRHZXR0ZXJGcm9tUHJvdmlkZXJzKCk7XHJcbiAgICB9XHJcbn07XHJcbmZ1bmN0aW9uIHNldEN1cnJlbnRHZXR0ZXJGcm9tUHJvdmlkZXJzKCkge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpYmVyQ29udGV4dCwgXCJjdXJyZW50XCIsIHtcclxuICAgICAgICBnZXQ6IHByb3ZpZGVycy5yZWR1Y2UoZnVuY3Rpb24gKHAsIGMpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHAoKSB8fCBjKCk7IH07IH0pLFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJVc2UgRmliZXJDb250ZXh0LnB1c2goKSB0byBjaGFuZ2UgY3VycmVudCBmaWJlclwiKTsgfVxyXG4gICAgfSk7XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmliZXItY29udGV4dC5qcy5tYXAiLCJleHBvcnQgKiBmcm9tICcuL29ic2VydmFibGUnO1xyXG5leHBvcnQgKiBmcm9tICcuL3ZhbHVlJztcclxuZXhwb3J0ICogZnJvbSAnLi9jb2xsZWN0aW9uJztcclxuZXhwb3J0ICogZnJvbSAnLi9lbWl0dGVyJztcclxuZXhwb3J0ICogZnJvbSAnLi9maWJlci1jb250ZXh0JztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiZXhwb3J0IGZ1bmN0aW9uIGluaXRNYXBNZXRob2QoY3Rvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChtYXBwZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgY3RvcihmdW5jdGlvbiAob2JzZXJ2ZXIpIHsgcmV0dXJuIF90aGlzLnN1YnNjcmliZShmdW5jdGlvbiAodmFsdWUsIGVycm9yLCBzdWJzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyb3IsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIobWFwcGVyKHZhbHVlKSwgZXJyb3IsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pOyB9KTtcclxuICAgIH07XHJcbn1cclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWFwLmpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBtaXhpbih0YXJnZXRQcm90bywgbWl4aW5Qcm90bykge1xyXG4gICAgdmFyIHByb3BzID0gW107XHJcbiAgICBmb3IgKHZhciBfaSA9IDI7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgIHByb3BzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgfVxyXG4gICAgcHJvcHMuZm9yRWFjaChmdW5jdGlvbiAocHJvcCkgeyByZXR1cm4gdGFyZ2V0UHJvdG9bcHJvcF0gPSBtaXhpblByb3RvW3Byb3BdOyB9KTtcclxufVxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1taXhpbi5qcy5tYXAiLCJ2YXIgT2JzZXJ2YWJsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8vc3RhdGljIGdldCBbU3ltYm9sLnNwZWNpZXNdKCkgeyByZXR1cm4gdGhpczsgfVxyXG4gICAgZnVuY3Rpb24gT2JzZXJ2YWJsZShfc3Vic2NyaWJlKSB7XHJcbiAgICAgICAgdGhpcy5fc3Vic2NyaWJlID0gX3N1YnNjcmliZTtcclxuICAgIH1cclxuICAgIE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpYmUoZnVuY3Rpb24gKGl0ZW1zLCBlcnJvciwgc3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyKGl0ZW1zLCBlcnJvciwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlcihudWxsLCBlcnIsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyb3IsIHsgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uICgpIHsgfSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE9ic2VydmFibGU7XHJcbn0oKSk7XHJcbmV4cG9ydCB7IE9ic2VydmFibGUgfTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2JzZXJ2YWJsZS5qcy5tYXAiLCJpbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSBcIi4vb2JzZXJ2YWJsZVwiO1xyXG5pbXBvcnQgeyBpbml0TWFwTWV0aG9kIH0gZnJvbSBcIi4vbWFwXCI7XHJcbmltcG9ydCB7IENvbGxlY3Rpb24gfSBmcm9tIFwiLi9jb2xsZWN0aW9uXCI7XHJcbmltcG9ydCB7IEZpYmVyQ29udGV4dCB9IGZyb20gJy4vZmliZXItY29udGV4dCc7XHJcbnZhciBWYWx1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIHRzbGliXzEuX19leHRlbmRzKFZhbHVlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gVmFsdWUoc3Vic2NyaWJlKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIHN1YnNjcmliZSkgfHwgdGhpcztcclxuICAgIH1cclxuICAgIFZhbHVlLmZyb20gPSBmdW5jdGlvbiAoeCkge1xyXG4gICAgICAgIGlmICh4LnN1YnNjcmliZSlcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZShmdW5jdGlvbiAocykgeyByZXR1cm4geC5zdWJzY3JpYmUocyk7IH0pO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlZhbHVlLmZyb20oKSBjYW4gb25seSB0YWtlIG9ic2VydmFibGVzXCIpO1xyXG4gICAgfTtcclxuICAgIFZhbHVlLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXNvbHZlZCA9IGZhbHNlLCByZXN1bHQsIGVyciwgbm90aWZ5O1xyXG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLnN1YnNjcmliZShmdW5jdGlvbiAodmFsdWUsIGVycm9yLCBzdWJzY2lwdGlvbikge1xyXG4gICAgICAgICAgICByZXNvbHZlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xyXG4gICAgICAgICAgICBlcnIgPSBlcnJvcjtcclxuICAgICAgICAgICAgaWYgKGVycm9yICYmIG5vdGlmeSlcclxuICAgICAgICAgICAgICAgIG5vdGlmeShudWxsLCBlcnJvciwgc3Vic2NpcHRpb24pO1xyXG4gICAgICAgICAgICBlbHNlIGlmIChub3RpZnkpXHJcbiAgICAgICAgICAgICAgICBub3RpZnkodmFsdWUsIG51bGwsIHN1YnNjaXB0aW9uKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAocmVzb2x2ZWQpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRGaWJlciA9IEZpYmVyQ29udGV4dC5jdXJyZW50O1xyXG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRGaWJlcikge1xyXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEZpYmVyIENvbnRleHRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbnMgPSBjdXJyZW50RmliZXIuc3Vic2NyaXB0aW9ucywgb2JzZXJ2ZXIgPSBjdXJyZW50RmliZXIub2JzZXJ2ZXI7XHJcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbnMucHVzaChzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICBub3RpZnkgPSBvYnNlcnZlcjtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBub3RpZnkgPSBmdW5jdGlvbiAodmFsdWUsIGVycm9yLCBzdWJzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgVmFsdWUucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBfdGhpcy5zdWJzY3JpYmUoZnVuY3Rpb24gKHZhbHVlLCBlcnJvciwgc3Vic2NpcHRpb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvcilcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgc3Vic2NpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgVmFsdWUucHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uIChmbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHsgcmV0dXJuIF90aGlzLnN1YnNjcmliZShmdW5jdGlvbiAodmFsdWUsIGVycm9yLCBzdWJzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyb3IsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGZuKHZhbHVlKSlcclxuICAgICAgICAgICAgICAgIG9ic2VydmVyKHZhbHVlLCBlcnJvciwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICB9KTsgfSk7XHJcbiAgICB9O1xyXG4gICAgVmFsdWUucHJvdG90eXBlLmxvZyA9IGZ1bmN0aW9uIChwcmVmaXgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocHJlZml4LCB4KTtcclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgVmFsdWUucHJvdG90eXBlLnRvQ29sbGVjdGlvbiA9IGZ1bmN0aW9uIChtYXBwZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvbihmdW5jdGlvbiAocykgeyByZXR1cm4gX3RoaXMubWFwKG1hcHBlcikuc3Vic2NyaWJlKHMpOyB9KTtcclxuICAgIH07XHJcbiAgICBWYWx1ZS5wcm90b3R5cGUuY29tYmluZUxhdGVzdCA9IGZ1bmN0aW9uIChvdGhlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IFtudWxsLCBudWxsXTtcclxuICAgICAgICAgICAgdmFyIG15U3Vic2NyaXB0aW9uLCBvdGhlclN1YnNjcmlwdGlvbjtcclxuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbXlTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBvdGhlclN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBteVN1YnNjcmlwdGlvbiA9IF90aGlzLnN1YnNjcmliZShmdW5jdGlvbiAoaXRlbXMsIGVycm9yLCBzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBzLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIobnVsbCwgZXJyb3IsIHN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YWx1ZXNbMF0gPSBpdGVtcztcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZXNbMV0gIT09IG51bGwpXHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIodmFsdWVzLCBudWxsLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgb3RoZXJTdWJzY3JpcHRpb24gPSBvdGhlci5zdWJzY3JpYmUoZnVuY3Rpb24gKHZhbHVlLCBlcnJvciwgcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcy51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyKG51bGwsIGVycm9yLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFsdWVzWzFdID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWVzWzBdICE9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyKHZhbHVlcywgbnVsbCwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgVmFsdWUucHJvdG90eXBlLnN3aXRjaE1hcCA9IGZ1bmN0aW9uIChtYXBwZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgVmFsdWUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XHJcbiAgICAgICAgICAgIHZhciBtYXBwZWRTdWJzY3JpcHRpb24gPSBudWxsO1xyXG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gbnVsbDtcclxuICAgICAgICAgICAgdmFyIHJldHVybmVkU3Vic2NyaXB0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWFwcGVkU3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBlZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXBwZWRTdWJzY3JpcHRpb24gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uID0gX3RoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uIChpdGVtLCBlcnJvciwgcykge1xyXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uID0gcztcclxuICAgICAgICAgICAgICAgIGlmIChtYXBwZWRTdWJzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXBwZWRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXBwZWRTdWJzY3JpcHRpb24gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyKG51bGwsIGVycm9yLCByZXR1cm5lZFN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2YWJsZU9yVmFsdWUgPSBtYXBwZXIoaXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYnNlcnZhYmxlT3JWYWx1ZSAmJiB0eXBlb2Ygb2JzZXJ2YWJsZU9yVmFsdWUuc3Vic2NyaWJlID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBwZWRTdWJzY3JpcHRpb24gPSBvYnNlcnZhYmxlT3JWYWx1ZS5zdWJzY3JpYmUoZnVuY3Rpb24gKHZhbHVlLCBlcnJvciwgcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBlZFN1YnNjcmlwdGlvbiA9IHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIodmFsdWUsIGVycm9yLCByZXR1cm5lZFN1YnNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyKG9ic2VydmFibGVPclZhbHVlLCBudWxsLCBzdWJzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlcihudWxsLCBlcnJvciwgc3Vic2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gcmV0dXJuZWRTdWJzY3JpcHRpb247XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFZhbHVlO1xyXG59KE9ic2VydmFibGUpKTtcclxuZXhwb3J0IHsgVmFsdWUgfTtcclxuVmFsdWUucHJvdG90eXBlLm1hcCA9IGluaXRNYXBNZXRob2QoVmFsdWUpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD12YWx1ZS5qcy5tYXAiLCJleHBvcnQgKiBmcm9tICcuL2pzL2Rpc3QvanMvb2JzZXJ2YWJsZSc7XHJcbiIsImV4cG9ydCAqIGZyb20gJy4vanMvZGlzdC9qcy9rZWQtYmFja2VuZC1yZXBvJztcclxuIiwidmFyIG1hcCA9IHtcblx0XCIuL2VuLVNHXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1TRy5qc1wiLFxuXHRcIi4vZW4tU0cuanNcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLVNHLmpzXCIsXG5cdFwiLi9lbi1hdVwiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4tYXUuanNcIixcblx0XCIuL2VuLWF1LmpzXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1hdS5qc1wiLFxuXHRcIi4vZW4tY2FcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLWNhLmpzXCIsXG5cdFwiLi9lbi1jYS5qc1wiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4tY2EuanNcIixcblx0XCIuL2VuLWdiXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1nYi5qc1wiLFxuXHRcIi4vZW4tZ2IuanNcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLWdiLmpzXCIsXG5cdFwiLi9lbi1pZVwiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4taWUuanNcIixcblx0XCIuL2VuLWllLmpzXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1pZS5qc1wiLFxuXHRcIi4vZW4taWxcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLWlsLmpzXCIsXG5cdFwiLi9lbi1pbC5qc1wiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvZW4taWwuanNcIixcblx0XCIuL2VuLW56XCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9lbi1uei5qc1wiLFxuXHRcIi4vZW4tbnouanNcIjogXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlL2VuLW56LmpzXCIsXG5cdFwiLi9zdlwiOiBcIi4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvc3YuanNcIixcblx0XCIuL3N2LmpzXCI6IFwiLi9ub2RlX21vZHVsZXMvbW9tZW50L2xvY2FsZS9zdi5qc1wiXG59O1xuXG5cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0KHJlcSkge1xuXHR2YXIgaWQgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKTtcblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oaWQpO1xufVxuZnVuY3Rpb24gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSkge1xuXHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1hcCwgcmVxKSkge1xuXHRcdHZhciBlID0gbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIHJlcSArIFwiJ1wiKTtcblx0XHRlLmNvZGUgPSAnTU9EVUxFX05PVF9GT1VORCc7XG5cdFx0dGhyb3cgZTtcblx0fVxuXHRyZXR1cm4gbWFwW3JlcV07XG59XG53ZWJwYWNrQ29udGV4dC5rZXlzID0gZnVuY3Rpb24gd2VicGFja0NvbnRleHRLZXlzKCkge1xuXHRyZXR1cm4gT2JqZWN0LmtleXMobWFwKTtcbn07XG53ZWJwYWNrQ29udGV4dC5yZXNvbHZlID0gd2VicGFja0NvbnRleHRSZXNvbHZlO1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrQ29udGV4dDtcbndlYnBhY2tDb250ZXh0LmlkID0gXCIuL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlIHN5bmMgcmVjdXJzaXZlIHN2fGVuXCI7IiwiaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuLi9jb250cmFjdHMva2VkLW1vZGVsc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0VXNlckNsYWltcyAodXNlcjogVXNlcikge1xyXG4gIHJldHVybiBbe1xyXG4gICAgdHlwZTogXCJlbWFpbFwiLFxyXG4gICAgdmFsdWU6IHVzZXIubWFpbFxyXG4gIH0se1xyXG4gICAgdHlwZTogXCJzY2hvb2xcIixcclxuICAgIHZhbHVlOiB1c2VyLnNjaG9vbFxyXG4gIH1dLmNvbmNhdCh1c2VyLnJvbGVzLm1hcChyb2xlID0+ICh7XHJcbiAgICB0eXBlOiBcInJvbGVcIixcclxuICAgIHZhbHVlOiByb2xlXHJcbiAgfSkpKS5jb25jYXQodXNlci5yb2xlcy5tYXAocm9sZSA9PiAoe1xyXG4gICAgdHlwZTogXCJzY2hvb2xSb2xlXCIsXHJcbiAgICB2YWx1ZTogdXNlci5zY2hvb2wgKyBcIi9cIiArIHJvbGVcclxuICB9KSkpO1xyXG59XHJcbiIsImltcG9ydCB7IEFjY2Vzc0NsYWltLCBEb2N1bWVudEFjY2VzcywgaGFzQWNjZXNzIGFzIF9oYXNBY2Nlc3MsIEFjY2Vzc1JpZ2h0IH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQgeyBEb2N1bWVudCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IGdldFVzZXJDbGFpbXMgZnJvbSAnLi9nZXQtdXNlci1jbGFpbXMnO1xyXG5pbXBvcnQgeyBwYXJzZVF1ZXJ5U3RyaW5nLCBnZW5lcmF0ZVF1ZXJ5U3RyaW5nIH0gZnJvbSBcIi4uL3V0aWxzL3F1ZXJ5LXN0cmluZ1wiO1xyXG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnLi4vY29udHJhY3RzL2tlZC1tb2RlbHMnO1xyXG5leHBvcnQgeyBnZXRVc2VyQ2xhaW1zIH07XHJcblxyXG5leHBvcnQgY29uc3QgSU1QRVJTT05BVElPTl9RVUVSWV9QQVJBTVMgPSBbXHJcbiAgXCJ1c2VyXCIsXHJcbiAgXCJyb2xlXCIsXHJcbiAgXCJzY2hvb2xcIixcclxuICBcImRlYnVnXCIsXHJcbiAgXCJ0ZXN0VmVyc2lvblwiLFxyXG4gIFwidGVzdHZlcnNpb25cIixcclxuICBcImZlYXR1cmVzXCIsXHJcbiAgXCJzY2hvb2xUeXBlXCIsXHJcbiAgXCJzY2hvb2x0eXBlXCJdO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhc0FjY2Vzcyh1c2VyOiBVc2VyLCBkb2M6IERvY3VtZW50LCByZXF1ZXN0ZWRSaWdodDogQWNjZXNzUmlnaHQpIHtcclxuICB2YXIgY2xhaW1zID0gZ2V0VXNlckNsYWltcyh1c2VyKTtcclxuICBpZiAocmVxdWVzdGVkUmlnaHQgIT09ICdSJyAmJiB1c2VyLnR1dG9yRm9yKSB7XHJcbiAgICBjbGFpbXMgPSBjbGFpbXMuZmlsdGVyKGNsYWltID0+IGNsYWltLnR5cGUgIT09ICdlbWFpbCcpO1xyXG4gIH1cclxuICB2YXIgcmVzdWx0ID0gX2hhc0FjY2VzcyhEb2N1bWVudEFjY2Vzcy5mcm9tU3RyaW5nQXJyYXkoZG9jLmFjbCB8fCBbXSksIGNsYWltcywgcmVxdWVzdGVkUmlnaHQpO1xyXG4gIC8vY29uc29sZS5sb2coYEhhcyAke3JlcXVlc3RlZFJpZ2h0fSBhY2Nlc3MgdG8gJHtkb2MubmFtZX0vJHtkb2MuaWR9OiAke3Jlc3VsdH1gKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGFzUmVhZEFjY2Vzcyh1c2VyOiBVc2VyLCBkb2M6IERvY3VtZW50KSB7XHJcbiAgcmV0dXJuIGhhc0FjY2Vzcyh1c2VyLCBkb2MsICdSJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYXNXcml0ZUFjY2Vzcyh1c2VyOiBVc2VyLCBkb2M6IERvY3VtZW50KSB7XHJcbiAgcmV0dXJuIGhhc0FjY2Vzcyh1c2VyLCBkb2MsICdXJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYXNTaGFyZUFjY2Vzcyh1c2VyOiBVc2VyLCBkb2M6IERvY3VtZW50KSB7XHJcbiAgcmV0dXJuIGhhc0FjY2Vzcyh1c2VyLCBkb2MsICdTJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1RlYWNoZXJBdFNjaG9vbCh1c2VyOiBVc2VyLCBzY2hvb2w6IHN0cmluZykge1xyXG4gIGNvbnN0IGlzVGVhY2hlciA9IHVzZXIucm9sZXMuc29tZShyb2xlID0+IHJvbGUgPT09ICdFTVBMT1lFRScgfHwgcm9sZSA9PT0gJ0FETUlOJyk7XHJcbiAgY29uc3QgYmVsb25nc1RvU2Nob29sID0gKHNjaG9vbHx8XCJcIikudG9Mb3dlckNhc2UoKSA9PT0gdXNlci5zY2hvb2wudG9Mb3dlckNhc2UoKTtcclxuICByZXR1cm4gKGlzVGVhY2hlciAmJiBiZWxvbmdzVG9TY2hvb2wpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNBZG1pbk9yVGVhY2hlckF0U2Nob29sKHVzZXI6IFVzZXIsIHNjaG9vbDogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIHVzZXIucm9sZXMuaW5jbHVkZXMoXCJBRE1JTlwiKSB8fCBpc1RlYWNoZXJBdFNjaG9vbCh1c2VyLCBzY2hvb2wpO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgaW1wZXJzb25hdGlvbkVudiA9IHtcclxuICBhY3RBcyAob3B0aW9uczoge3JvbGUsIHNjaG9vbCwgdXJsP30pIHtcclxuICAgIGNvbnN0IHtyb2xlLCBzY2hvb2wsIHVybH0gPSBvcHRpb25zO1xyXG4gICAgY29uc3QgY3VycmVudFF1ZXJ5ID0gcGFyc2VRdWVyeVN0cmluZyhsb2NhdGlvbi5zZWFyY2gpO1xyXG4gICAgY29uc3QgbmV3UXVlcnkgPSB7Li4uY3VycmVudFF1ZXJ5LCByb2xlLCBzY2hvb2x9O1xyXG4gICAgY29uc3QgbmV3UXVlcnlTdHJpbmcgPSBnZW5lcmF0ZVF1ZXJ5U3RyaW5nKG5ld1F1ZXJ5KTtcclxuICAgIGlmICh1cmwpIHtcclxuICAgICAgbG9jYXRpb24uaHJlZiA9IGAke3VybH0ke25ld1F1ZXJ5U3RyaW5nfWA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsb2NhdGlvbi5oYXNoID0gXCIjXCI7XHJcbiAgICAgIGxvY2F0aW9uLnNlYXJjaCA9IG5ld1F1ZXJ5U3RyaW5nO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFjdEFzKG9wdGlvbnM6IHtyb2xlLCBzY2hvb2wsIHVybD99KSB7XHJcbiAgaW1wZXJzb25hdGlvbkVudi5hY3RBcyhvcHRpb25zKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHByZXNlcnZlSW1wZXJzb25hdGlvblF1ZXJ5ICh1cmw6IHN0cmluZywgcXVlcnk6IHtbbmFtZTogc3RyaW5nXSA6IHN0cmluZ30pIHtcclxuICBjb25zdCBjdXJyZW50UXVlcnkgPSBwYXJzZVF1ZXJ5U3RyaW5nKGxvY2F0aW9uLnNlYXJjaCk7XHJcbiAgY29uc3QgcHJlc2VydmVkUXVlcnkgPSB7fTtcclxuICBmb3IgKGNvbnN0IHBhcmFtIG9mIElNUEVSU09OQVRJT05fUVVFUllfUEFSQU1TKSB7XHJcbiAgICBpZiAoY3VycmVudFF1ZXJ5W3BhcmFtXSkgcHJlc2VydmVkUXVlcnlbcGFyYW1dID0gY3VycmVudFF1ZXJ5W3BhcmFtXTtcclxuICB9XHJcbiAgY29uc3QgbmV3UXVlcnlTdHJpbmcgPSBnZW5lcmF0ZVF1ZXJ5U3RyaW5nKHsuLi5wcmVzZXJ2ZWRRdWVyeSwgLi4ucXVlcnl9KTtcclxuICBjb25zdCBwSGFzaCA9IHVybC5pbmRleE9mKCcjJyk7XHJcbiAgcmV0dXJuIHBIYXNoID49IDAgP1xyXG4gICAgYCR7dXJsLnN1YnN0cigwLHBIYXNoKX0ke25ld1F1ZXJ5U3RyaW5nfSR7dXJsLnN1YnN0cihwSGFzaCl9YCA6XHJcbiAgICBgJHt1cmx9JHtuZXdRdWVyeVN0cmluZ31gO1xyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcclxuXHJcbmNvbnN0IEljb25Ecml2ZSA9ICh7IHNpemUgPSAzMCB9KSA9PiAoXHJcbiAgPHN2Z1xyXG4gICAgd2lkdGg9e3NpemV9XHJcbiAgICB2ZXJzaW9uPVwiMS4xXCJcclxuICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxyXG4gICAgeG1sbnNYbGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIlxyXG4gICAgdmlld0JveD1cIjAgMCA1MDguNTIgNTA4LjUyXCJcclxuICAgIGZpbGw9XCIjZmZmZmZmXCJcclxuICAgIHN0eWxlPXt7dmVydGljYWxBbGlnbjogXCJtaWRkbGVcIiwgbWFyZ2luUmlnaHQ6IFwiNHB4XCJ9fVxyXG4gID5cclxuICAgIDxwb2x5Z29uIHBvaW50cz1cIjQ4NC40OTIsMjg0LjU4IDMzOS4wMjQsMzIuNTc3IDE2OS40OTYsMzIuNTc3IDMxNC45OTYsMjg0LjU4XCIgLz5cclxuICAgIDxwb2x5Z29uIHBvaW50cz1cIjE0NS40MzcsNzQuMjc2IDAsMzI2LjI3OSA4NC43NjQsNDczLjA1IDIzMC4xNjksMjIxLjE0M1wiIC8+XHJcbiAgICA8cG9seWdvbiBwb2ludHM9XCIyMzQuMzk2LDMxNi4zNjMgMTQzLjM3MSw0NzUuOTQzIDQyMy43NTYsNDc1Ljk0MyA1MDguNTIsMzE2LjM2XCIgLz5cclxuICA8L3N2Zz5cclxuKTtcclxuXHJcbmNvbnN0IEljb25DbGFzc3Jvb20gPSAoeyBzaXplID0gMzAgfSkgPT4gKFxyXG4gIDxzdmdcclxuICAgIHdpZHRoPXtzaXplfVxyXG4gICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiXHJcbiAgICB4bWxuc1hsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiXHJcbiAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCJcclxuICAgIHZlcnNpb249XCIxLjFcIlxyXG4gID5cclxuICAgIDxwYXRoIGQ9XCJNNSAyQzMuMzQ4IDIgMiAzLjM0OCAyIDV2MTRjMCAxLjY1MiAxLjM0OCAzIDMgM2gxNGMxLjY1MiAwIDMtMS4zNDggMy0zVjVjMC0xLjY1Mi0xLjM0OC0zLTMtM3ptMCAyaDE0Yy41NSAwIDEgLjQ1IDEgMXYxNGMwIC41NS0uNDUgMS0xIDFoLTF2LTJoLTV2Mkg1Yy0uNTUgMC0xLS40NS0xLTFWNWMwLS41NS40NS0xIDEtMXptNyAyYTEuOTk5IDEuOTk5IDAgMSAwIDAgNCAxLjk5OSAxLjk5OSAwIDEgMCAwLTR6TTcuNSA4YTEuNSAxLjUgMCAxIDAgMCAzIDEuNSAxLjUgMCAwIDAgMC0zem05IDBhMS41IDEuNSAwIDEgMCAwIDMgMS41IDEuNSAwIDAgMCAwLTN6TTEyIDExYy0yLjY2IDAtMy41IDIuNS0zLjUgMi41IDAtLjg0OC41LTEuNS41LTEuNS0uMy0uMTg4LTEuMDctLjMxMy0xLjQzOC0uMzEzLTEuMjE0IDAtMi41NjIgMS4xOTItMi41NjIgMlYxNmgxNHYtMi4zMTNjMC0uODA4LTEuNTEyLTItMi41NjMtMi0uMzY3IDAtMS4xMzYuMTI2LTEuNDM3LjMxMyAwIDAgLjUuNjUyLjUgMS41IDAgMC0uODQtMi41LTMuNS0yLjV6XCIgLz5cclxuICA8L3N2Zz5cclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBEcml2ZUJ1dHRvbiA9ICh7bGFiZWw9J0dvb2dsZSBEcml2ZScsIGFjdGlvbn0pID0+IFxyXG4gIDxhIGNsYXNzTmFtZT1cImJ0blwiIG9uQ2xpY2s9e2FjdGlvbn0+PEljb25Ecml2ZSBzaXplPXsxNn0gLz4ge2xhYmVsfTwvYT5cclxuIiwiLy8gQ2xpZW50IGlkIGZvciBHb29nbGVXZWJDbGllbnRcclxuZXhwb3J0IGNvbnN0IFdlYkNsaWVudElkID0gXCI0MjE1NzIyNjIyNjktdTY4djVsZjVvOHNzNXQ2OGw4Z2txM3BmYXJoNmRia3YuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb21cIjtcclxuXHJcbi8vIEdvb2dsZSBEcml2ZSBGaWxlIElkIHRvIGpzb24gZmlsZSB3aXRoIFRhbXBsYXRlcyBmb3IgQ291cnNlIEJ1aWxkZXIgKENsYXNzcm9vbSlcclxuZXhwb3J0IGNvbnN0IFRlbXBsYXRlc0ZpbGVJZCA9ICdodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLzFWN2V4RzZ2TjgzU3E4a2I2dXoxQjZEYVpEVk85ZUxjSmJQN1hGMHZMNGRZL2V4cG9ydD9mb3JtYXQ9dHh0JztcclxuIiwiaW1wb3J0IHsgRURTQ291cnNlLCBFRFNBc3Nlc3NtZW50LCBFRFNTdHVkeVBsYW4sIEVEU1N0dWRlbnRGdXR1cmVBYmlsaXR5LCBFRFNTdHVkZW50LCBFRFNUdWl0aW9uR3JvdXAsIEVEU1R1aXRpb25TdHVkZW50LCBFRFNUZWFjaGVyLCBNb2NrRURTQWNhZGVtaWNZZWFyLCBNb2NrRURTRGF0ZVJhbmdlIH0gZnJvbSAnLi4vY29udHJhY3RzL2Vkcyc7XHJcbmltcG9ydCB7IFJlc3RDbGllbnQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IElzb21vcnBoaWNFbnYsIEJlYXJlclByb3ZpZGVyLCBIdHRwRXJyb3IgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IFNjaG9vbE1vbWVudCwgZ2V0VGVybVN0YXJFbmREYXRlIH0gZnJvbSAnLi4vdXRpbHMvc2Nob29sLW1vbWVudCc7XHJcbmltcG9ydCB7IFNjaG9vbFRlcm0gfSBmcm9tICcuLi91dGlscy9zY2hvb2wtdGVybSc7XHJcbmltcG9ydCB7IGRhdGVUaW1lUmV2aXZlciwgTCB9IGZyb20gJy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IG1vY2tKc29uRmlsZSBmcm9tICcuL21vY2svbW9jay1lZHMtZGF0YS5qc29uJztcclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBTdXNwZW5zZUJhc2VkQVBJLCBtYWtlU3VzcGVuc2VBcGkgfSBmcm9tICcuLi91dGlscy9tYWtlLXN1c3BlbnNlLWFwaSc7XHJcblxyXG5leHBvcnQgY2xhc3MgRWRzQ2xpZW50IHtcclxuICBodHRwOiBSZXN0Q2xpZW50O1xyXG4gIHVzZXJFbWFpbEdldHRlcjogKCk9PnN0cmluZztcclxuICBzdXNwZW5zZTogU3VzcGVuc2VCYXNlZEFQSTxFZHNDbGllbnQ+O1xyXG5cclxuICBjb25zdHJ1Y3RvciAoXHJcbiAgICBpc29tb3JwaGljOiBJc29tb3JwaGljRW52LFxyXG4gICAgYmFzZVVybDogc3RyaW5nLFxyXG4gICAgYmVhcmVyUHJvdmlkZXI6IEJlYXJlclByb3ZpZGVyLFxyXG4gICAgdXNlckVtYWlsR2V0dGVyOiAoKT0+c3RyaW5nXHJcbiAgKSB7XHJcbiAgICB0aGlzLmh0dHAgPSBuZXcgUmVzdENsaWVudCAoaXNvbW9ycGhpYywgYmFzZVVybCwge2JlYXJlclByb3ZpZGVyfSk7XHJcbiAgICB0aGlzLnVzZXJFbWFpbEdldHRlciA9IHVzZXJFbWFpbEdldHRlcjtcclxuICAgIGNvbnN0IGlzQXBpTWV0aG9kID0gbSA9PlxyXG4gICAgICB0eXBlb2YgdGhpc1ttXSA9PT0gJ2Z1bmN0aW9uJyAmJlxyXG4gICAgICBtICE9PSAnY29uc3RydWN0b3InICYmIC8vIFNpbmNlIG1ha2VTdXNwZW5zZUFwaSgpIHdhbGtzIHByb3RvdHlwZSBjaGFpblxyXG4gICAgICBtICE9PSAncHJpdmF0aXppbmdDYWNoZUJ1c3QnICYmXHJcbiAgICAgIG0gIT09ICd1c2VyRW1haWxHZXR0ZXInIC8vIExpc3Qgbm9uLUFQSSBtZXRob2RzIGhlcmUuLi5cclxuICAgICAgO1xyXG5cclxuICAgIE9iamVjdC5rZXlzKEVkc0NsaWVudC5wcm90b3R5cGUpLmZvckVhY2gobWV0aG9kID0+IHtcclxuICAgICAgaWYgKGlzQXBpTWV0aG9kKG1ldGhvZCkpIHtcclxuICAgICAgICB0aGlzW21ldGhvZF0gPSBhdm9pZFNpbXVsdGFub3VzQ2FsbHModGhpc1ttZXRob2RdKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLnN1c3BlbnNlID0gbWFrZVN1c3BlbnNlQXBpKHRoaXMsIHtpc0FwaU1ldGhvZH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBwcml2YXRpemluZ0NhY2hlQnVzdCgpIHtcclxuICAgIHJldHVybiB7dXNlcjogdGhpcy51c2VyRW1haWxHZXR0ZXIoKX07XHJcbiAgfVxyXG5cclxuLyoqXHJcbiAgICogUmV0cmlldmUgYWN0aXZlIGNvdXJzZXMgZm9yIGN1cnJlbnQgbG9nZ2VkIGluIHN0dWRlbnQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gY291cnNlQ29kZSBTaG9ydC1uYW1lIG9mIHRoZSBjb3Vyc2UuIE9wdGlvbmFsLlxyXG4gICAqL1xyXG4gIGFzeW5jIGdldEFjdGl2ZUNvdXJzZXMocToge2NvdXJzZUNvZGU/OiBzdHJpbmcsIHBlcmlvZE5hbWU6IHN0cmluZ30pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHF1ZXJ5OmFueSA9IHRoaXMucHJpdmF0aXppbmdDYWNoZUJ1c3QoKTtcclxuICAgICAgaWYgKHEpIHtcclxuICAgICAgICBpZiAocS5jb3Vyc2VDb2RlKSBxdWVyeS5Db3Vyc2VDb2RlID0gcS5jb3Vyc2VDb2RlO1xyXG4gICAgICAgIGlmIChxLnBlcmlvZE5hbWUpIHF1ZXJ5LlBlcmlvZE5hbWUgPSBxLnBlcmlvZE5hbWU7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5odHRwLmdldChcInN0dWRlbnRhY3RpdmVjb3Vyc2VzXCIsIHF1ZXJ5KTtcclxuICAgICAgaWYgKHJlcy5zdGF0dXMgIT0gMjAwKSB0aHJvdyBuZXcgSHR0cEVycm9yKHJlcy5zdGF0dXMsIGF3YWl0IHJlcy50ZXh0KCkpO1xyXG4gICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgICAgcmV0dXJuIGpzb24uY291cnNlcyBhcyBFRFNDb3Vyc2VbXTtcclxuICAgIH0gY2F0Y2ggKGV4KSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmcm9tIEVEUzogXCIgKyBleCk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihMYEt1bmRlIHR5dsOkcnIgaW50ZSBsYWRkYSB0ZXJtaW5zbcOlbCBlbGxlciBhdmtsYXJhZGUgc3RlZyBmcsOlbiBFRFMuIEbDtnJzw7ZrIGlnZW4gc2VuYXJlLi4uYCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXRyaWV2ZSBsYXRlc3QgYXNzZXNzbWVudHMgZm9yIGN1cnJlbnQgbG9nZ2VkIGluIHVzZXIuXHJcbiAgICogXHJcbiAgICogQHBhcmFtIGxpbWl0IE9wdGlvbmFsIGxpbWl0XHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0TGF0ZXN0QXNzZXNzbWVudHMobGltaXQ/OiBudW1iZXIpIHtcclxuICAgIGNvbnN0IHF1ZXJ5OmFueSA9IHRoaXMucHJpdmF0aXppbmdDYWNoZUJ1c3QoKTtcclxuICAgIGlmICghaXNOYU4obGltaXQpKSBxdWVyeS5Db3VudCA9IGxpbWl0O1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5odHRwLmdldChcInN0dWRlbnRhc3Nlc3NtZW50c1wiLCBxdWVyeSk7XHJcbiAgICBpZiAocmVzLnN0YXR1cyAhPSAyMDApIHRocm93IG5ldyBIdHRwRXJyb3IocmVzLnN0YXR1cywgYXdhaXQgcmVzLnRleHQoKSk7XHJcbiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgIHJldHVybiBqc29uLmFzc2Vzc21lbnRzIGFzIEVEU0Fzc2Vzc21lbnRbXTsgICAgXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXRyaWV2ZSBzdHVkeXBsYW5zIGZvciBjdXJyZW50IGxvZ2dlZC1pbiB1c2VyXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0U3R1ZGVudEdvYWxzKCkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5odHRwLmdldChcInN0dWRlbnRnb2Fsc1wiLCB0aGlzLnByaXZhdGl6aW5nQ2FjaGVCdXN0KCkpO1xyXG4gICAgaWYgKHJlcy5zdGF0dXMgIT0gMjAwKSB0aHJvdyBuZXcgSHR0cEVycm9yKHJlcy5zdGF0dXMsIGF3YWl0IHJlcy50ZXh0KCkpO1xyXG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlcy5qc29uKCk7XHJcbiAgICByZXR1cm4ganNvbi5zdHVkZW50R29hbHMgYXMgRURTU3R1ZHlQbGFuW107ICAgIFxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0U3R1ZGVudEZ1dHVyZUFiaWxpdGllcygpIHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuaHR0cC5nZXQoXCJzdHVkZW50RnV0dXJlQWJpbGl0aWVzXCIsIHRoaXMucHJpdmF0aXppbmdDYWNoZUJ1c3QoKSk7XHJcbiAgICBpZiAocmVzLnN0YXR1cyAhPSAyMDApIHRocm93IG5ldyBIdHRwRXJyb3IocmVzLnN0YXR1cywgYXdhaXQgcmVzLnRleHQoKSk7XHJcbiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgIHJldHVybiBqc29uLnN0dWRlbnRGdXR1cmVBYmlsaXRpZXMgYXMgRURTU3R1ZGVudEZ1dHVyZUFiaWxpdHlbXTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldFRlYWNoZXJUdXRvclN0dWRlbnRzKCkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5odHRwLmdldChcInRlYWNoZXJ0dXRvcnN0dWRlbnRzXCIsIHRoaXMucHJpdmF0aXppbmdDYWNoZUJ1c3QoKSk7XHJcbiAgICBpZiAocmVzLnN0YXR1cyAhPSAyMDApIHRocm93IG5ldyBIdHRwRXJyb3IocmVzLnN0YXR1cywgYXdhaXQgcmVzLnRleHQoKSk7XHJcbiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgIHJldHVybiBqc29uLnN0dWRlbnRzIGFzIEVEU1N0dWRlbnRbXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGdldFNjaG9vbFR1aXRpb25Hcm91cHMoKVxyXG4gICAqIFxyXG4gICAqIFJldHVybiB0dWl0aW9uZ3JvdXBzIGZvciBzY2hvb2xcclxuICAgKiBcclxuICAgKiBAcGFyYW0gc2Nob29sTmFtZSAtIG5hbWUgb2Ygc2Nob29sXHJcbiAgICogQHBhcmFtIGNvdXJzZUNvZGUgLSBTa29sdmVya2V0cyBjb2RlIGZvciBjb3Vyc2VcclxuICAgKi9cclxuICBhc3luYyBnZXRTY2hvb2xUdWl0aW9uR3JvdXBzKHE6IHtzY2hvb2xOYW1lOiBzdHJpbmcsIGNvdXJzZUNvZGU6IHN0cmluZ30pIHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuaHR0cC5nZXQoXCJTY2hvb2xUdWl0aW9uR3JvdXBzXCIsIHsuLi50aGlzLnByaXZhdGl6aW5nQ2FjaGVCdXN0KCksIC4uLnF9KTtcclxuICAgIGlmIChyZXMuc3RhdHVzICE9IDIwMCkgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXMuc3RhdHVzLCBhd2FpdCByZXMudGV4dCgpKTtcclxuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgcmV0dXJuIGpzb24uc2Nob29sVHVpdGlvbkdyb3VwcyBhcyBFRFNUdWl0aW9uR3JvdXBbXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIGdldFR1aXRpb25Hcm91cFN0dWRlbnRzKClcclxuICAgKiBcclxuICAgKiBSZXR1cm4gbmFtZSBhbmQgbWFpbGFkcmVzc2VzIGZvciB0dXRpdGlvbmdyb3VwcyBpbiBzY2hvb2xzXHJcbiAgICogXHJcbiAgICogQHBhcmFtIHNjaG9vbE5hbWUgLSBuYW1lIG9mIHNjaG9vbFxyXG4gICAqIEBwYXJhbSB0dWl0aW9uR3JvdXBOYW1lIC0gdHVpdGlvbiBncnVvcCBuYW1lIGluIEVEU1xyXG4gICAqL1xyXG4gIGFzeW5jIGdldFR1aXRpb25Hcm91cFN0dWRlbnRzKHE6IHtzY2hvb2xOYW1lOiBzdHJpbmcsIHR1aXRpb25Hcm91cE5hbWU6IHN0cmluZ30pIHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuaHR0cC5nZXQoXCJUdWl0aW9uR3JvdXBTdHVkZW50c1wiLCB7Li4udGhpcy5wcml2YXRpemluZ0NhY2hlQnVzdCgpLCAuLi5xfSk7XHJcbiAgICBpZiAocmVzLnN0YXR1cyAhPSAyMDApIHRocm93IG5ldyBIdHRwRXJyb3IocmVzLnN0YXR1cywgYXdhaXQgcmVzLnRleHQoKSk7XHJcbiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzLmpzb24oKTtcclxuICAgIHJldHVybiBqc29uLnR1aXRpb25Hcm91cFN0dWRlbnRzIGFzIEVEU1R1aXRpb25TdHVkZW50W107XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBnZXRTY2hvb2xUZWFjaGVycygpXHJcbiAgICogXHJcbiAgICogUmV0dXJuIG5hbWUgYW5kIG1haWxhZHJlc3NlcyBmb3IgdHV0aXRpb25ncm91cHMgaW4gc2Nob29sc1xyXG4gICAqIFxyXG4gICAqIEBwYXJhbSBzY2hvb2xOYW1lIC0gbmFtZSBvZiBzY2hvb2xcclxuICAgKi9cclxuICBhc3luYyBnZXRTY2hvb2xUZWFjaGVycyhxOiB7c2Nob29sTmFtZTogc3RyaW5nfSkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5odHRwLmdldChcIlNjaG9vbFRlYWNoZXJzXCIsIHsuLi50aGlzLnByaXZhdGl6aW5nQ2FjaGVCdXN0KCksIC4uLnF9KTtcclxuICAgIGlmIChyZXMuc3RhdHVzICE9IDIwMCkgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXMuc3RhdHVzLCBhd2FpdCByZXMudGV4dCgpKTtcclxuICAgIGNvbnN0IGpzb24gPSBhd2FpdCByZXMuanNvbigpO1xyXG4gICAgcmV0dXJuIGpzb24uc2Nob29sVGVhY2hlcnMgYXMgRURTVGVhY2hlcltdO1xyXG4gIH1cclxuICAvLyB3ZSBhc3N1bWUgdGhhdCB0aGUgRURTIHdpbGwgcmV0dXJuIHRoZSBjdXJyZW50IGFjYWRlbWljIHllYXIgZGF0ZXMgZGV0ZXJtaW5lZCBieSB0aGUgY3VycmVudCBkYXRlXHJcbiAgYXN5bmMgZ2V0QWNhZGVtaWNZZWFyVGVybXMoc2Nob29sTG9jYWxlOiBzdHJpbmcsIGRhdGU6IERhdGUpIHtcclxuICAgIC8vIG1vY2sgZGF0YVxyXG4gICAgc3dpdGNoIChzY2hvb2xMb2NhbGUpIHtcclxuICAgICAgY2FzZSAnZW5fc2luJzpcclxuICAgICAgcmV0dXJuIG1vY2tKc29uRmlsZS5Tb3V0aEluZGlhLmZpbHRlcihmID0+IG1vbWVudChkYXRlKS5pc1NhbWVPckFmdGVyKGYuZmlyc3RUZXJtLnN0YXJ0RGF0ZSkgJiYgbW9tZW50KGRhdGUpLmlzU2FtZU9yQmVmb3JlKGYuc2Vjb25kVGVybS5lbmREYXRlKSlbMF0gYXMgTW9ja0VEU0FjYWRlbWljWWVhcjtcclxuICAgICAgY2FzZSAnZW5fbmluJzpcclxuICAgICAgcmV0dXJuIG1vY2tKc29uRmlsZS5Ob3J0aEluZGlhLmZpbHRlcihmID0+IG1vbWVudChkYXRlKS5pc1NhbWVPckFmdGVyKGYuZmlyc3RUZXJtLnN0YXJ0RGF0ZSkgJiYgbW9tZW50KGRhdGUpLmlzU2FtZU9yQmVmb3JlKGYuc2Vjb25kVGVybS5lbmREYXRlKSlbMF0gYXMgTW9ja0VEU0FjYWRlbWljWWVhcjtcclxuICAgICAgY2FzZSAnc3YnOlxyXG4gICAgICB7XHJcbiAgICAgIHZhciBob2xpZGF5cyA9IFtdIGFzIE1vY2tFRFNEYXRlUmFuZ2VbXTtcclxuICAgICAgdmFyIGZpcnN0VGVybU1vbWVudCA9IGdldFRlcm1TdGFyRW5kRGF0ZShkYXRlLCB0cnVlKTtcclxuICAgICAgdmFyIHNlY29uZFRlcm1Nb21lbnQgPSBnZXRUZXJtU3RhckVuZERhdGUoZGF0ZSwgZmFsc2UpO1xyXG5cclxuICAgICAgdmFyIHN0YXJ0Rmlyc3RUZXJtRGF0ZSA9IGZpcnN0VGVybU1vbWVudFswXTtcclxuICAgICAgdmFyIHN0YXJ0U2Vjb25kVGVybURhdGUgPSBzZWNvbmRUZXJtTW9tZW50WzBdO1xyXG4gICAgICB2YXIgZW5kRmlyc3RUZXJtRGF0ZSA9IGZpcnN0VGVybU1vbWVudFsxXTtcclxuICAgICAgdmFyIGVuZFNlY29uZFRlcm1EYXRlID0gc2Vjb25kVGVybU1vbWVudFsxXTtcclxuXHJcbiAgICAgIGNvbnN0IGZpcnN0VGVybSA9IHtzdGFydERhdGU6IG5ldyBEYXRlKHN0YXJ0Rmlyc3RUZXJtRGF0ZS55ZWFyKCksIHN0YXJ0Rmlyc3RUZXJtRGF0ZS5tb250aCgpLCBzdGFydEZpcnN0VGVybURhdGUuZGF0ZSgpKS50b0RhdGVTdHJpbmcoKSwgZW5kRGF0ZTogbmV3IERhdGUoc3RhcnRGaXJzdFRlcm1EYXRlLnllYXIoKSwgZW5kRmlyc3RUZXJtRGF0ZS5tb250aCgpLCBlbmRGaXJzdFRlcm1EYXRlLmRhdGUoKSkudG9EYXRlU3RyaW5nKCl9O1xyXG4gICAgICBjb25zdCBzZWNvbmRUZXJtID0ge3N0YXJ0RGF0ZTogbmV3IERhdGUoc3RhcnRTZWNvbmRUZXJtRGF0ZS55ZWFyKCksIHN0YXJ0U2Vjb25kVGVybURhdGUubW9udGgoKSwgc3RhcnRTZWNvbmRUZXJtRGF0ZS5kYXRlKCkpLnRvRGF0ZVN0cmluZygpLCBlbmREYXRlOiBuZXcgRGF0ZShzdGFydFNlY29uZFRlcm1EYXRlLnllYXIoKSwgZW5kU2Vjb25kVGVybURhdGUubW9udGgoKSwgZW5kU2Vjb25kVGVybURhdGUuZGF0ZSgpKS50b0RhdGVTdHJpbmcoKX07XHJcbiAgICAgIHJldHVybiB7Zmlyc3RUZXJtLCBzZWNvbmRUZXJtLCBob2xpZGF5c307XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIEVEU1BlcmlvZCB7XHJcbiAgcGVyaW9kOiBzdHJpbmc7XHJcbiAgdGVybTogJ0FUJyB8ICdTVCc7XHJcbiAgeWVhcjogbnVtYmVyO1xyXG4gIGNvbnN0cnVjdG9yIChwZXJpb2RTdHJpbmdPclNjaG9vbFRlcm06IHN0cmluZyB8IFNjaG9vbE1vbWVudCkge1xyXG4gICAgaWYgKHR5cGVvZiBwZXJpb2RTdHJpbmdPclNjaG9vbFRlcm0gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHRoaXMucGVyaW9kID0gcGVyaW9kU3RyaW5nT3JTY2hvb2xUZXJtO1xyXG4gICAgICB0aGlzLnRlcm0gPSB0aGlzLnBlcmlvZC5zdGFydHNXaXRoKCdIVCcpID8gJ0FUJyA6ICdTVCc7XHJcbiAgICAgIHRoaXMueWVhciA9IHBhcnNlSW50KHRoaXMucGVyaW9kLnN1YnN0cigyKSk7XHJcbiAgICAgIGlmIChpc05hTih0aGlzLnllYXIpKSB0aHJvdyBuZXcgRXJyb3IgKGBJbnZhbGlkIHBlcmlvZDogJHt0aGlzLnBlcmlvZH1gKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IHNjaG9vbFRlcm0gPSBuZXcgU2Nob29sVGVybShwZXJpb2RTdHJpbmdPclNjaG9vbFRlcm0pO1xyXG4gICAgICB0aGlzLnBlcmlvZCA9IChzY2hvb2xUZXJtLnRlcm0gPT09ICdBVCcgPyBcIkhUXCIgOiBcIlZUXCIpICsgc2Nob29sVGVybS55ZWFyO1xyXG4gICAgICB0aGlzLnRlcm0gPSBzY2hvb2xUZXJtLnRlcm07XHJcbiAgICAgIHRoaXMueWVhciA9IHNjaG9vbFRlcm0ueWVhcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldCBzY2hvb2xUZXJtICgpIDogU2Nob29sVGVybSB7XHJcbiAgICByZXR1cm4gbmV3IFNjaG9vbFRlcm0oe1xyXG4gICAgICBhY2FkZW1pY1llYXI6IHRoaXMudGVybSA9PT0gJ0FUJyA/XHJcbiAgICAgICAgYCR7dGhpcy55ZWFyfS8ke3RoaXMueWVhciArIDF9YCA6XHJcbiAgICAgICAgYCR7dGhpcy55ZWFyLTF9LyR7dGhpcy55ZWFyfWAsXHJcbiAgICAgIHRlcm06IHRoaXMudGVybVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB0b1N0cmluZygpIHtcclxuICAgIHJldHVybiB0aGlzLnBlcmlvZDtcclxuICB9XHJcblxyXG4gIHZhbHVlT2YoKSB7XHJcbiAgICByZXR1cm4gdGhpcy55ZWFyICsgXCI6XCIgKyAodGhpcy50ZXJtID09PSAnU1QnID8gXCIxXCIgOiBcIjJcIik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VKc29uRGF0ZV9vbGQgKGpzb25EYXRlU3RyOiBzdHJpbmcpIDogRGF0ZSB7XHJcbiAgY29uc3QgZGF0ZSA9IGRhdGVUaW1lUmV2aXZlcihcIlwiLCBqc29uRGF0ZVN0cik7XHJcbiAgaWYgKCEoZGF0ZSBpbnN0YW5jZW9mIERhdGUpKSB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEpTT04gZGF0ZSBzdHJpbmc6IFwiICsganNvbkRhdGVTdHIpO1xyXG4gIHJldHVybiBkYXRlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhdm9pZFNpbXVsdGFub3VzQ2FsbHM8VCxBPihtZXRob2Q6ICguLi5hcmdzOkFbXSk9PlByb21pc2U8VD4pIDogKC4uLmFyZ3M6QVtdKT0+UHJvbWlzZTxUPiB7XHJcbiAgbGV0IG9uZ29pbmdQcm9taXNlczoge1thcmdzSnNvbjogc3RyaW5nXTogUHJvbWlzZTxUPn0gPSB7fTtcclxuICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICBjb25zdCBhcmdzSnNvbiA9IEpTT04uc3RyaW5naWZ5KFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKSk7XHJcbiAgICBpZiAoIW9uZ29pbmdQcm9taXNlc1thcmdzSnNvbl0pIHtcclxuICAgICAgb25nb2luZ1Byb21pc2VzW2FyZ3NKc29uXSA9IG1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpLnRoZW4ocmVzdWx0PT57XHJcbiAgICAgICAgZGVsZXRlIG9uZ29pbmdQcm9taXNlc1thcmdzSnNvbl07XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb25nb2luZ1Byb21pc2VzW2FyZ3NKc29uXTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQmVhcmVyUHJvdmlkZXIgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IGVudiB9IGZyb20gJy4uL2dsb2JhbHMvS0VELmVudic7XHJcblxyXG5leHBvcnQgY2xhc3MgR29vZ2xlQ2xpZW50IHtcclxuICB0b2tlbkV4cGlyYXRpb246IERhdGU7XHJcbiAgZ29vZ2xlVG9rZW5Qcm92aWRlcjogQmVhcmVyUHJvdmlkZXI7XHJcbiAgZGlzY292ZXJ5RG9jczogc3RyaW5nW107XHJcbiAgdG9rZW46IHN0cmluZztcclxuXHJcbiAgY29uc3RydWN0b3IoZGlzY292ZXJ5RG9jczogc3RyaW5nKSB7XHJcbiAgICB0aGlzLmdvb2dsZVRva2VuUHJvdmlkZXIgPSBlbnYuZ29vZ2xlVG9rZW5Qcm92aWRlcjtcclxuICAgIHRoaXMuZGlzY292ZXJ5RG9jcyA9IFtdO1xyXG4gICAgdGhpcy5kaXNjb3ZlcnlEb2NzLnB1c2goZGlzY292ZXJ5RG9jcyk7XHJcbiAgfVxyXG5cclxuICBzZXRCZWFyZXJQcm92aWRlcihnb29nbGVUb2tlblByb3ZpZGVyOiBCZWFyZXJQcm92aWRlcikge1xyXG4gICAgdGhpcy5nb29nbGVUb2tlblByb3ZpZGVyID0gZ29vZ2xlVG9rZW5Qcm92aWRlcjtcclxuICB9XHJcblxyXG4gIGFzeW5jIGVuc3VyZUluaXRlZCgpIHtcclxuICAgIC8vIExvYWQgR0FQSSBhbmQgZW5zdXJlIGFsbCBvZiBpdHMgY29tcG9uZW50cyBhcmUgbG9hZGVkXHJcbiAgICBpZiAodHlwZW9mIGdhcGkgPT09ICd1bmRlZmluZWQnIHx8ICFnYXBpLmNsaWVudCB8fCAhZ2FwaS5jbGllbnQuc2V0VG9rZW4pIGF3YWl0IHRoaXMubG9hZEdhcGkoKTtcclxuXHJcbiAgICAvLyBTZXQgdG9rZW5cclxuICAgIGlmICghdGhpcy50b2tlbkV4cGlyYXRpb24gfHwgdGhpcy50b2tlbkV4cGlyYXRpb24gPCBuZXcgRGF0ZSgpKSB7XHJcbiAgICAgIGNvbnN0IHRva2VuUmVzdWx0ID0gYXdhaXQgdGhpcy5nb29nbGVUb2tlblByb3ZpZGVyLmdldEJlYXJlcigpO1xyXG4gICAgICB0aGlzLnRva2VuRXhwaXJhdGlvbiA9IG5ldyBEYXRlKHRva2VuUmVzdWx0LmV4cGlyZXMpO1xyXG4gICAgICB0aGlzLnRva2VuID0gdG9rZW5SZXN1bHQudG9rZW47XHJcbiAgICAgIGdhcGkuY2xpZW50LnNldFRva2VuKHtcclxuICAgICAgICBhY2Nlc3NfdG9rZW46IHRva2VuUmVzdWx0LnRva2VuXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIExvYWQgYWxsIGRpc2NvdnllckRvY3NcclxuICAgIGF3YWl0IGdhcGkuY2xpZW50LmluaXQoe1xyXG4gICAgICBkaXNjb3ZlcnlEb2NzOiB0aGlzLmRpc2NvdmVyeURvY3NcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgbG9hZEdhcGkoKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgaWYgKHR5cGVvZiBnYXBpICE9PSAndW5kZWZpbmVkJyAmJiBnYXBpLmNsaWVudCAmJiBnYXBpLmNsaWVudC5zZXRUb2tlbikgcmV0dXJuIHJlc29sdmUoKTtcclxuICAgICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAgIHNjcmlwdC5zcmMgPSBcImh0dHBzOi8vYXBpcy5nb29nbGUuY29tL2pzL2NsaWVudC5qcz9vbmxvYWQ9Z2FhcGlfbG9hZGVkXCI7XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXS5hcHBlbmRDaGlsZChzY3JpcHQpO1xyXG4gICAgICAod2luZG93IGFzIGFueSkuZ2FhcGlfbG9hZGVkID0gcmVzb2x2ZTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBHb29nbGVDbGllbnQgfSBmcm9tICcuL2dvb2dsZS1jbGllbnQnO1xyXG5cclxuaW50ZXJmYWNlIGRvd25sb2FkQXJncyB7XHJcbiAgZmlsZTogc2VsZWN0ZWRGaWxlO1xyXG4gIGxpbWl0U2l6ZT86IG51bWJlcjtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2Ugc2VsZWN0ZWRGaWxlIHtcclxuICBmaWxlSWQ6IHN0cmluZztcclxuICB1cmw6IHN0cmluZztcclxuICBtaW1lVHlwZTogc3RyaW5nO1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBtb2RpZmllZFRpbWU6IG51bWJlcjtcclxuICBjYW5FeHBvcnQ/OiBib29sZWFuO1xyXG4gIGljb25Vcmw/OiBzdHJpbmc7XHJcbiAgdGh1bWJuYWlsVXJsPzogc3RyaW5nO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIEdvb2dsZURyaXZlIGV4dGVuZHMgR29vZ2xlQ2xpZW50IHtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcignaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZGlzY292ZXJ5L3YxL2FwaXMvZHJpdmUvdjMvcmVzdCcpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0RmlsZShmaWxlSWQpIHtcclxuICAgIGF3YWl0IHRoaXMuZW5zdXJlSW5pdGVkKCk7XHJcbiAgICByZXR1cm4gZ2FwaS5jbGllbnQuZHJpdmUuZmlsZXMuZ2V0KDxhbnk+e1xyXG4gICAgICBmaWxlSWQ6IGZpbGVJZCxcclxuICAgICAgc3VwcG9ydHNBbGxEcml2ZXM6IHRydWUsXHJcbiAgICAgIGZpZWxkczogJ2lkLG5hbWUsbWltZVR5cGUsd2ViVmlld0xpbmssaWNvbkxpbmssbW9kaWZpZWRUaW1lLHRodW1ibmFpbExpbmsnXHJcbiAgICB9KS50aGVuKHJlc3AgPT4ge1xyXG4gICAgICBpZiAocmVzcC5yZXN1bHQubmFtZSkge1xyXG4gICAgICAgIHZhciBmaWxlID0gcmVzcC5yZXN1bHQ7XHJcbiAgICAgICAgcmV0dXJuIHtmaWxlSWQ6IGZpbGUuaWQsIHVybDogZmlsZS53ZWJWaWV3TGluaywgbWltZVR5cGU6IGZpbGUubWltZVR5cGUsIG5hbWU6IGZpbGUubmFtZSwgbW9kaWlmaWVkVGltZTogZmlsZS5tb2RpZmllZFRpbWUsIGljb25Vcmw6IGZpbGUuaWNvbkxpbmssIHRodW1ibmFpbFVybDogZmlsZS50aHVtYm5haWxMaW5rfTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIHVwZGF0ZVBlcm1pc3Npb25zKClcclxuICAgKiBcclxuICAgKiBAcGFyYW0gZmlsZUlkIFxyXG4gICAqIFxyXG4gICAqIE1ha2UgdGhlIGZpbGUgYWNjZXNzaWJsZSB0byBhbGwgaW4gdGhlIGRvbWFpbi4gU2hvdWxkIGJlIHVubmVjZXNzYXJ5IGJ1dCBzb21lXHJcbiAgICogdGVhY2hlcnMgaGF2ZSBjaGFuZ2VkIHRoZWlyIGRlZmF1bHQgcGVybWlzc2lvbnMuXHJcbiAgICogV2UgZG9uJ3QgY2FyZSByaWdodCBub3cgaWYgdGhpcyBmYWlscyBiZWNhdXNlIHRoaXMgaXMganVzdCBhbiBleHRyYSBwcmVjYXV0aW9uLlxyXG4gICAqIElmIHdlIHBsYW4gb24gdXNpbmcgdGhpcyBvbiBvdGhlciBkb21haW5zIHRoZSBkb21haW4tYXR0cmlidXRlIG5lZWRzIHRvIGJlIGR5bmFtaWMuXHJcbiAgICogXHJcbiAgICovXHJcbiAgYXN5bmMgdXBkYXRlUGVybWlzc2lvbnMoZmlsZUlkKSB7XHJcbiAgICBjb25zb2xlLmxvZygndXBkYXRpbmcgcGVybWlzc2lvbnMnKVxyXG4gICAgYXdhaXQgdGhpcy5lbnN1cmVJbml0ZWQoKTtcclxuICAgIGdhcGkuY2xpZW50LmRyaXZlLnBlcm1pc3Npb25zLmNyZWF0ZSg8YW55PntcclxuICAgICAgZmlsZUlkOiBmaWxlSWQsXHJcbiAgICAgIHNlbmROb3RpZmljYXRpb25FbWFpbDogZmFsc2UsXHJcbiAgICAgIHJvbGU6ICdyZWFkZXInLFxyXG4gICAgICB0eXBlOiAnYW55b25lJywgLy8gb3Igc2hvdWxkIHdlIGxpbWl0IHRvIGRvbWFpbiAoZXJyb3IgaWYgaW4gS2Vkc2Nob29scy5jb20pXHJcbiAgICAgIC8vIHR5cGU6ICdkb21haW4nLCBcclxuICAgICAgLy8gZG9tYWluOiAna3Vuc2thcHNza29sYW4uc2UnXHJcbiAgICAgIHN1cHBvcnRzQWxsRHJpdmVzOiB0cnVlXHJcbiAgICB9KS50aGVuKHJlc3AgPT4gY29uc29sZS5sb2cocmVzcCkpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgY3JlYXRlRm9sZGVyKG5hbWUsIHBhcmVudCnCoHtcclxuICAgIGNvbnNvbGUubG9nKCdDcmVhdGluZyBmb2xkZXIgJyArIG5hbWUpO1xyXG4gICAgYXdhaXQgdGhpcy5lbnN1cmVJbml0ZWQoKTtcclxuICAgIHJldHVybiBnYXBpLmNsaWVudC5kcml2ZS5maWxlcy5jcmVhdGUoPGFueT57XHJcbiAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgIG1pbWVUeXBlOiAnYXBwbGljYXRpb24vdm5kLmdvb2dsZS1hcHBzLmZvbGRlcicsXHJcbiAgICAgIHBhcmVudHM6IFtwYXJlbnRdXHJcbiAgICB9KS50aGVuKHJlc3AgPT4gcmVzcC5yZXN1bHQpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0SWRGb3JGb2xkZXJQYXRoKHBhdGg6IHN0cmluZ1tdKSB7XHJcbiAgICBjb25zb2xlLmxvZygnR2V0dGluZyBpZCBmb3IgJyArIHBhdGguam9pbignLycpKTtcclxuICAgIGF3YWl0IHRoaXMuZW5zdXJlSW5pdGVkKCk7XHJcbiAgICBsZXQgcGFyZW50ID0gJ3Jvb3QnO1xyXG4gICAgZm9yICh2YXIgZm9sZGVyIG9mIHBhdGgpIHtcclxuICAgICAgY29uc3QgZm9sZGVySWQgPSBhd2FpdCB0aGlzLmdldElkRm9yRm9sZGVyKGZvbGRlciwgcGFyZW50KTtcclxuICAgICAgaWYgKGZvbGRlcklkKSB7XHJcbiAgICAgICAgcGFyZW50ID0gZm9sZGVySWQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgbmV3Rm9sZGVyID0gYXdhaXQgdGhpcy5jcmVhdGVGb2xkZXIoZm9sZGVyLCBwYXJlbnQpO1xyXG4gICAgICAgIHBhcmVudCA9IG5ld0ZvbGRlci5pZDtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcmVudDtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldElkRm9yRm9sZGVyKG5hbWU6IHN0cmluZywgcGFyZW50OiBzdHJpbmcpIHtcclxuICAgIGNvbnNvbGUubG9nKCdHZXR0aW5nIGlkIGZvciAnICsgbmFtZSk7XHJcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUluaXRlZCgpO1xyXG4gICAgcmV0dXJuIGdhcGkuY2xpZW50LmRyaXZlLmZpbGVzLmxpc3Qoe1xyXG4gICAgICBjb3Jwb3JhOiAndXNlcicsXHJcbiAgICAgIHE6IFwiJ1wiK3BhcmVudCtcIicgaW4gcGFyZW50cyBhbmQgbWltZVR5cGUgPSAnYXBwbGljYXRpb24vdm5kLmdvb2dsZS1hcHBzLmZvbGRlcicgYW5kIG5hbWUgPSAnXCIrbmFtZStcIidcIlxyXG4gICAgfSkudGhlbihyZXNwID0+IHtcclxuICAgICAgaWYgKHJlc3AucmVzdWx0LmZpbGVzLmxlbmd0aCkge1xyXG4gICAgICAgIHJldHVybiByZXNwLnJlc3VsdC5maWxlc1swXS5pZDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgY29weUZpbGUoZmlsZSwgZGVzdGluYXRpb24pIHtcclxuICAgIGNvbnNvbGUubG9nKCdDb3B5aW5nIGZpbGU6ICcgKyBmaWxlLm5hbWUpO1xyXG4gICAgYXdhaXQgdGhpcy5lbnN1cmVJbml0ZWQoKTtcclxuICAgIGlmIChkZXN0aW5hdGlvbikge1xyXG4gICAgICBjb25zdCBwYXJlbnQgPSBhd2FpdCB0aGlzLmdldElkRm9yRm9sZGVyUGF0aChkZXN0aW5hdGlvbik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCBwYXJlbnQgPSAncm9vdCc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZ2FwaS5jbGllbnQuZHJpdmUuZmlsZXMuY29weSg8YW55PntcclxuICAgICAgZmlsZUlkOiBmaWxlLmlkLFxyXG4gICAgICBzdXBwb3J0c0FsbERyaXZlczogdHJ1ZSxcclxuICAgICAgcGFyZW50czogW3BhcmVudF0sXHJcbiAgICAgIG5hbWU6IGZpbGUubmFtZSxcclxuICAgICAgZmllbGRzOiAnaWQsbmFtZSxtaW1lVHlwZSx3ZWJWaWV3TGluayxpY29uTGluayxtb2RpZmllZFRpbWUsdGh1bWJuYWlsTGluaydcclxuICAgIH0pLnRoZW4ocmVzcCA9PiByZXNwLnJlc3VsdCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgLyoqXHJcbiAgICogZG93bmxvYWRGaWxlKClcclxuICAgKiBAcGFyYW0gZmlsZSBcclxuICAgKiBcclxuICAgKiBXaGVuIENsYXNzcm9vbSBoYXMgYmVlbiBpbnRlZ3JhdGVkIHdlIHdpbGwgd2FudCB0byBoYW5kbGUgb25seSB0aGUgZmlsZUlkOnNcclxuICAgKiBzbyB0aGF0IGVkaXRpbmcgY2FwYWJpbGl0aWVzIGFyZSBwZXNlcnZlZCBvbiB0aGUgZmlsZSAoaWYgaXQgaXMgYSBnb29nbGUtYXBwcyBmaWxlKVxyXG4gICAqIFJpZ2h0IG5vdyBnb29nbGUtYXBwcyBmaWxlcyBhcmUgY29udmVydGVkIHRvIHBkZiBhbmQgcGFzc2VkIGludG8gdGhlIGN1cnJlbnQgZmxvdy5cclxuICAgKiBcclxuICAgKiBUT0RPOiBlcnJvciBoYW5kbGluZ1xyXG4gICAqL1xyXG5cclxuICBhc3luYyBkb3dubG9hZEZpbGUoe2ZpbGUsIGxpbWl0U2l6ZX06ZG93bmxvYWRBcmdzKSB7XHJcbiAgICAvLyBBIGZpbGUgdGhhdCBjYW4gYmUgZXhwb3J0ZWQgdG8gUERGIGlzIHJldHJlaXZlZCB3aXRoXHJcbiAgICAvLyBmaWxlLmV4cG9ydCgpIGZyb20gRHJpdmUsIGNvbnZlcnRlZCB0byBhIGJsb2IgYW5kIHRoZW5cclxuICAgIC8vIHRvIGEgRmlsZS5cclxuICAgIC8vIEEgZmlsZSB0aGF0IGNhbiBub3QgYmUgZXhwb3J0ZWQgdG8gUERGIGlzIHJldHJpZXZlZFxyXG4gICAgLy8gdGhyb3VnaCBYSFIgYW5kIGNvbnZlcnRlZCB0byBhIEZpbGUuXHJcblxyXG4gICAgLy8gSWYgd2UgZG9uJ3QgbmVlZCB0byBoYW5kbGUgdGhlIHBoeXNpY2FsIGZpbGVzIG9uIHRoZSBjbGllbnRcclxuICAgIC8vIHdlIGNvdWxkIHNhdmUgb25seSB0aGUgZmlsZUlkOnMgYW5kIGRpc3BsYXkgZmlsZW5hbWUgYW5kIG1pbWVUeXBlXHJcbiAgICAvLyBmb3IgdGhlIGZpbGUgaW4gb3VyIGxpc3RpbmdzLiBXaGVuL2lmIHdlIHVzZSBHb29nbGUgQ2xhc3Nyb29tIGZvclxyXG4gICAgLy8gb3VyIHRhc2staGFuZGxpbmcgdGhhdCB3b3VsZCBiZSB0aGUgcHJlZmVycmVkIGFwcHJvYWNoIHRvIGtlZXBcclxuICAgIC8vIHRoZSBmaWxlIGFzIGFuIGVkaXRhYmxlIEdvb2dsZSBmaWxlXHJcblxyXG4gICAgLy8gSW5pdCB0aGUgZHJpdmUtYXBpIChvbmx5IG5lZWRlZCBmb3IgZG93bmxvYWQgc28gbm90IGxvYWRlZCBpbml0aWFsbHkpXHJcbiAgICBhd2FpdCB0aGlzLmVuc3VyZUluaXRlZCgpO1xyXG5cclxuICAgIGlmIChmaWxlLmNhbkV4cG9ydCkge1xyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2U8RmlsZT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGdhcGkuY2xpZW50LmRyaXZlLmZpbGVzLmV4cG9ydCh7XHJcbiAgICAgICAgICBmaWxlSWQ6IGZpbGUuZmlsZUlkLFxyXG4gICAgICAgICAgbWltZVR5cGU6ICdhcHBsaWNhdGlvbi9wZGYnfVxyXG4gICAgICAgICkudGhlbihyZXNwID0+IHtcclxuICAgICAgICAgIGNvbnN0IGxlbiA9IHJlc3AuYm9keS5sZW5ndGg7XHJcbiAgICAgICAgICBjb25zdCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkobmV3IEFycmF5QnVmZmVyKGxlbikpO1xyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICBkYXRhW2ldID0gcmVzcC5ib2R5LmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2RhdGFdLCB7dHlwZTogJ2FwcGxpY2F0aW9uL3BkZid9KTtcclxuICAgICAgICAgIGNvbnN0IGZpbGVuYW1lID0gZmlsZS5uYW1lKycucGRmJztcclxuICAgICAgICAgIHJlc29sdmUobmV3IEZpbGUoW2Jsb2JdLCBmaWxlbmFtZSwge3R5cGU6ICdhcHBsaWNhdGlvbi9wZGYnLCBsYXN0TW9kaWZpZWQ6IGZpbGUubW9kaWZpZWRUaW1lfSkpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pOyAgXHJcbiAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgLy8gYSBmaWxlIHRoYXQgaXNuJ3QgYSBnb29nbGUtYXBwcyBmaWxlIG5lZWRzIHRvIGJlIGZldGNoZWQgdmlhIFhIUlxyXG4gICAgICAvLyBiZWNhdXNlIHJlc3BvbnNlVHlwZSBhbmQgP2FsdD1tZWRpYSBuZWVkcyB0byBiZSBzZXQgdG8gYXZvaWQgQ09SU1xyXG4gICAgICBjb25zdCB4aHJEb3dubG9hZCA9IChmaWxlOnNlbGVjdGVkRmlsZSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxGaWxlPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgIHhoci5vcGVuKFwiR0VUXCIsIFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vZHJpdmUvdjMvZmlsZXMvXCIrZmlsZS5maWxlSWQrJz9hbHQ9bWVkaWEnLCB0cnVlKTtcclxuICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdBdXRob3JpemF0aW9uJywnQmVhcmVyICcrdGhpcy50b2tlbik7XHJcbiAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InXHJcbiAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmVzb2x2ZShuZXcgRmlsZShbeGhyLnJlc3BvbnNlXSwgZmlsZS5uYW1lLCB7dHlwZTogZmlsZS5taW1lVHlwZSwgbGFzdE1vZGlmaWVkOiBmaWxlLm1vZGlmaWVkVGltZX0pKTtcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICB4aHIuc2VuZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2U8RmlsZT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGlmIChsaW1pdFNpemUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgZ2FwaS5jbGllbnQuZHJpdmUuZmlsZXMuZ2V0KHtcclxuICAgICAgICAgICAgZmlsZUlkOiBmaWxlLmZpbGVJZCxcclxuICAgICAgICAgICAgZmllbGRzOiAnc2l6ZSdcclxuICAgICAgICAgIH0pLnRoZW4ocmVzcCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNpemUgPSBOdW1iZXIocmVzcC5yZXN1bHQuc2l6ZSk7XHJcbiAgICAgICAgICAgIGlmIChzaXplID4gbGltaXRTaXplKjEwMjQqMTAyNCkge1xyXG4gICAgICAgICAgICAgIHJlamVjdCgnR29vZ2xlUGlja2VyRXJyb3I6IEZpbHNpemUgaXMgdG9vIGxhYXJnZScpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB4aHJEb3dubG9hZChmaWxlKS50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICAgIHJlc29sdmUocmVzcCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB4aHJEb3dubG9hZChmaWxlKS50aGVuKHJlc3AgPT4ge1xyXG4gICAgICAgICAgICByZXNvbHZlKHJlc3ApO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IEdvb2dsZVdlYkNsaWVudCB9IGZyb20gJy4vZ29vZ2xlLXdlYmNsaWVudCc7XHJcbmltcG9ydCB7IEdvb2dsZURyaXZlLCBzZWxlY3RlZEZpbGUgfSBmcm9tICcuL2dvb2dsZS1kcml2ZSc7XHJcblxyXG5pbnRlcmZhY2Ugb3B0aW9ucyB7XHJcbiAgdXBsb2FkPzogYm9vbGVhbjtcclxuICBtdWx0aXBsZT86IGJvb2xlYW47XHJcbiAgbGltaXRUeXBlPzogZmFsc2UgfCAnZ29vZ2xlLWFwcHMnIHzCoCdwZGYnO1xyXG59XHJcblxyXG5jb25zdCBtaW1lVHlwZUNvbGxlY3Rpb25zID0ge1xyXG4gICdnb29nbGUtYXBwcycgOiAnYXBwbGljYXRpb24vdm5kLmdvb2dsZS1hcHBzLmRvY3VtZW50LGFwcGxpY2F0aW9uL3ZuZC5nb29nbGUtYXBwcy5wcmVzZW50YXRpb24sYXBwbGljYXRpb24vdm5kLmdvb2dsZS1hcHBzLnNwcmVhZHNoZWV0JyxcclxuICAncGRmJzogJ2FwcGxpY2F0aW9uL3BkZidcclxufTtcclxuXHJcbi8qKlxyXG4gKiBHb29nbGVQaWNrZXJcclxuICogSW5jbHVkZXMgdGhlIGluaXRpYXRpb24gb2YgdGhlIGNvcnJlY3QgYXBpOnMuXHJcbiAqIENlcnRhaW4gb3B0aW9ucyBjYW4gYmUgcGFzc2VkIHRvIHRoZSBjb25zdHJ1Y3RvclxyXG4gKiBhbmQgdGhlcmUgY291bGQgYmUgb3RoZXJzIHdvcnRoIGluY29ycG9yYXRpbmcgKGkuZS4gVGVhbSBEcml2ZS1zdXBwb3J0KS5cclxuICogXHJcbiAqIFJpZ2h0IG5vdyB0d28gb3B0aW9ucyBhcmUgaGFuZGxlZDpcclxuICogLSB1cGxvYWQ6IGlmIGEgdXNlciBjYW4gdXBsb2FkIHRvIERyaXZlIGluIHRoZSBHb29nbGUgRHJpdmUgUGlja2VyXHJcbiAqIC0gbXVsdGlwbGU6IGlmIGEgdXNlciBjYW4gc2VsZWN0IG11bHRpcGxlIGZpbGVzXHJcbiAqIC0gbGltaXRUeXBlOiBhY3RpdmUgbGltaXRzIHRvIGNlcnRhaW4gbWltZVR5cGVzQ29sbGVjdGlvbnNcclxuICogXHJcbiAqIFdlIGNvdWxkIHByb2JhYmx5IHNwbGl0IHRoaXMgaW50byBnb29nbGUtcGlja2VyIGFuZCBnb29nbGUtZHJpdmUgd2hlcmUgZ29vZ2xlLWRyaXZlXHJcbiAqIGhhbmRsZXMgdGhlIGV4cGxpY2l0IGNhbGxzIHRvIHRoZSBnb29nbGUgZHJpdmUgYXBpLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEdvb2dsZVBpY2tlciBleHRlbmRzIEdvb2dsZVdlYkNsaWVudCB7XHJcbiAgcGlja2VyOiBnb29nbGUucGlja2VyLlBpY2tlcjtcclxuICBvcHRpb25zOiBvcHRpb25zO1xyXG4gIGRyaXZlOiBHb29nbGVEcml2ZTtcclxuXHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucz86IG9wdGlvbnMpIHtcclxuICAgIHN1cGVyKFsnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9kcml2ZSddKTtcclxuICAgIHRoaXMub3B0aW9ucyA9IHt1cGxvYWQ6IGZhbHNlLCBtdWx0aXBsZTogZmFsc2UsIGxpbWl0VHlwZTogZmFsc2V9O1xyXG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xyXG4gICAgY29uc29sZS5sb2codGhpcy5vcHRpb25zKTtcclxuICAgIHRoaXMuZHJpdmUgPSBuZXcgR29vZ2xlRHJpdmUoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIHNob3coKVxyXG4gICAqIFxyXG4gICAqIElmIGEgc2luZ2xlIGZpbGUgaXMgcmVxdWVzdGVkIGZyb20gdGhlIHBpY2tlciBhIGxpc3Qgb2YgZmlsZXMgd2l0aCBvbmUgZWxlbWVudCBpcyByZXR1cm5lZC5cclxuICAgKiBJdCBpcyB1cCB0byB0aGUgY2FsbGVyIHRvIGhhbmRsZSB0aGUgbGlzdCBpbiBhIHJlbGV2YW50IG1hbm5lci5cclxuICAgKiBcclxuICAgKiBNb3JlIGRhdGEgZnJvbSB0aGUgZmlsZSBjb3VsZCBiZSBleHRyYWN0ZWQgaWYgaXQgaXMgZGVlbWVkIG5lY2Vzc2FyeS5cclxuICAgKiBcclxuICAgKi9cclxuICBhc3luYyBzaG93KCkge1xyXG4gICAgYXdhaXQgdGhpcy5lbnN1cmVJbml0ZWQoKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxzZWxlY3RlZEZpbGVbXT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBjb25zdCBjYWxsYmFjayA9IChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgIGlmIChyZXNwb25zZVsnYWN0aW9uJ10gPT0gZ29vZ2xlLnBpY2tlci5BY3Rpb24uQ0FOQ0VMKSB7XHJcbiAgICAgICAgICAgIHJlamVjdCgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2VbJ2FjdGlvbiddID09IGdvb2dsZS5waWNrZXIuQWN0aW9uLlBJQ0tFRCkge1xyXG4gICAgICAgICAgbGV0IHNlbGVjdGVkID0gW107XHJcbiAgICAgICAgICByZXNwb25zZS5kb2NzLm1hcChkb2MgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB7aWQ6IGZpbGVJZCwgbWltZVR5cGUsIG5hbWUsIG1vZGlmaWVkVGltZSwgaWNvblVybCwgdXJsfSA9IGRvYztcclxuICAgICAgICAgICAgY29uc3QgY2FuRXhwb3J0ID0gbWltZVR5cGUuaW5jbHVkZXMoJ2dvb2dsZS1hcHBzJyk7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkLnB1c2goe2ZpbGVJZCwgbWltZVR5cGUsIG5hbWUsIG1vZGlmaWVkVGltZSwgY2FuRXhwb3J0LCBpY29uVXJsLCB1cmx9KTtcclxuICAgICAgICAgICAgLy8gdXBkYXRlIHBlcm1pc3Npb25zIHRvIHJlYWQgYnkgYWxsIGluIGRvbWFpblxyXG4gICAgICAgICAgICB0aGlzLmRyaXZlLnVwZGF0ZVBlcm1pc3Npb25zKGZpbGVJZCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKHNlbGVjdGVkKTtcclxuICAgICAgICAgIHJlc29sdmUoc2VsZWN0ZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHBpY2tlcmJ1aWxkZXIgPSBuZXcgZ29vZ2xlLnBpY2tlci5QaWNrZXJCdWlsZGVyKClcclxuICAgICAgICAuZW5hYmxlRmVhdHVyZShnb29nbGUucGlja2VyLkZlYXR1cmUuU1VQUE9SVF9EUklWRVMpXHJcbiAgICAgICAgLmVuYWJsZUZlYXR1cmUoZ29vZ2xlLnBpY2tlci5GZWF0dXJlLlNVUFBPUlRfVEVBTV9EUklWRVMpXHJcbiAgICAgICAgLmFkZFZpZXcoXHJcbiAgICAgICAgICBuZXcgZ29vZ2xlLnBpY2tlci5Eb2NzVmlldygpXHJcbiAgICAgICAgICAgIC5zZXRPd25lZEJ5TWUodHJ1ZSkgLy8gc2hvdWxkIHRoaXMgYmUgYW4gb3B0aW9uP1xyXG4gICAgICAgICAgICAuc2V0SW5jbHVkZUZvbGRlcnModHJ1ZSlcclxuICAgICAgICApXHJcbiAgICAgICAgLmFkZFZpZXcoXHJcbiAgICAgICAgICBuZXcgZ29vZ2xlLnBpY2tlci5Eb2NzVmlldygpXHJcbiAgICAgICAgICAgIC5zZXRJbmNsdWRlRm9sZGVycyh0cnVlKVxyXG4gICAgICAgICAgICAuc2V0RW5hYmxlVGVhbURyaXZlcyh0cnVlKVxyXG4gICAgICAgIClcclxuICAgICAgICAuc2V0TG9jYWxlKFwic3ZcIikgLy8gc2hvdWxkIHRoaXMgYmUgYW4gb3B0aW9uP1xyXG4gICAgICAgIC5zZXRTaXplKDEwNTEsNjUwKSAvLyBzaG91bGQgdGhpcyBiZSBhbiBvcHRpb24/XHJcbiAgICAgICAgLnNldE9BdXRoVG9rZW4odGhpcy5hdXRoVG9rZW4pXHJcbiAgICAgICAgLnNldENhbGxiYWNrKGNhbGxiYWNrKTtcclxuICAgICAgaWYgKHRoaXMub3B0aW9ucy51cGxvYWQpIHtcclxuICAgICAgICBwaWNrZXJidWlsZGVyLmFkZFZpZXcobmV3IGdvb2dsZS5waWNrZXIuRG9jc1VwbG9hZFZpZXcoKS5zZXRJbmNsdWRlRm9sZGVycyh0cnVlKSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5tdWx0aXBsZSkge1xyXG4gICAgICAgIHBpY2tlcmJ1aWxkZXIuZW5hYmxlRmVhdHVyZShnb29nbGUucGlja2VyLkZlYXR1cmUuTVVMVElTRUxFQ1RfRU5BQkxFRCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5saW1pdFR5cGUpIHtcclxuICAgICAgICB2YXIgbWltZVR5cGVzID0gbWltZVR5cGVDb2xsZWN0aW9uc1t0aGlzLm9wdGlvbnMubGltaXRUeXBlXTtcclxuICAgICAgICBjb25zb2xlLmxvZyhtaW1lVHlwZXMpO1xyXG4gICAgICAgIHBpY2tlcmJ1aWxkZXIuc2V0U2VsZWN0YWJsZU1pbWVUeXBlcyhtaW1lVHlwZXMpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMucGlja2VyID0gcGlja2VyYnVpbGRlci5idWlsZCgpO1xyXG4gICAgICB0aGlzLnBpY2tlci5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBlbnYgZnJvbSAnLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgV2ViQ2xpZW50SWQgfSBmcm9tICcuL2NvbmZpZ3MnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdvb2dsZVdlYkNsaWVudCB7XHJcbiAgYXV0aFRva2VuOiBzdHJpbmc7XHJcbiAgc2NvcGVzOiBzdHJpbmdbXTtcclxuXHJcbiAgY29uc3RydWN0b3Ioc2NvcGVzKSB7XHJcbiAgICB0aGlzLnNjb3BlcyA9IFsnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC91c2VyaW5mby5lbWFpbCcsICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL3VzZXJpbmZvLnByb2ZpbGUnXTtcclxuICAgIHRoaXMuc2NvcGVzLnB1c2goLi4uc2NvcGVzKTtcclxuICB9XHJcbiAgYXN5bmMgZW5zdXJlSW5pdGVkKCkge1xyXG4gICAgLy8gTG9hZCBHQVBJXHJcbiAgICBpZiAodHlwZW9mIGdhcGkgPT09IFwidW5kZWZpbmVkXCIpIGF3YWl0IHRoaXMubG9hZEdhcGkoKTtcclxuXHJcbiAgICAvLyBLRURTU2Nob29sc1xyXG4gICAgY29uc3QgU0NPUEVTID0gdGhpcy5zY29wZXMuam9pbignICcpO1xyXG4gICAgXHJcbiAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSxyZWplY3QpID0+IHtcclxuICAgICAgZ2FwaS5sb2FkKFwiY2xpZW50OmF1dGgyXCIsICgpID0+IHtcclxuICAgICAgICAvLyBDYWxscyBhdXRob3JpemUgd2l0aG91dCBwcm9tcHRpbmcgdGhlIHVzZXIuIElmIGF1dGhvcml6YXRpb24gaGFzbid0IGJlZW4gZ2l2ZW4gYnlcclxuICAgICAgICAvLyB0aGUgdXNlciBhbiBlcnJvciBpcyByZXR1cm5lZCBhbmQgd2UgY2FsbCBhdXRob3JpemUgYWdhaW4gd2l0aCBjb25zZW50LXNjcmVlblxyXG4gICAgICAgIGxldCByZWF1dGhvcml6ZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICByZXR1cm4gZ2FwaS5hdXRoMi5hdXRob3JpemUoe1xyXG4gICAgICAgICAgY2xpZW50X2lkOiBXZWJDbGllbnRJZCxcclxuICAgICAgICAgIHNjb3BlOiBTQ09QRVMsXHJcbiAgICAgICAgICByZXNwb25zZV90eXBlOiAncGVybWlzc2lvbicsXHJcbiAgICAgICAgICBsb2dpbl9oaW50OiBlbnYuY3VycmVudFVzZXIubWFpbCxcclxuICAgICAgICAgIHByb21wdDogJ25vbmUnXHJcbiAgICAgICAgfSwgKHJlc3ApID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3ApO1xyXG4gICAgICAgICAgaWYgKHJlc3AuZXJyb3IpIHtcclxuICAgICAgICAgICAgLy8gbm8gY29uc2VudCBnaXZlbiBzbyByZWF1dGhvcml6ZVxyXG4gICAgICAgICAgICByZWF1dGhvcml6ZSA9IHRydWU7ICAgICAgICAgICAgXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBjaGVjayBpZiB3ZSBoYXZlIGFsbCB0aGUgc2NvcGVzIHdlIHdhbnRcclxuICAgICAgICAgICAgY29uc3Qgc2NvcGVzZXQgPSBuZXcgU2V0KHJlc3Auc2NvcGUuc3BsaXQoJyAnKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1pc3NpbmdTY29wZXMgPSB0aGlzLnNjb3Blcy5maWx0ZXIoeCA9PiAhc2NvcGVzZXQuaGFzKHgpKTtcclxuICAgICAgICAgICAgaWYgKG1pc3NpbmdTY29wZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdtaXNzaW5nIHNjb3BlcycpO1xyXG4gICAgICAgICAgICAgIC8vIHNjb3BlcyBhcmUgbWlzc2luZyBmcm9tIG91ciBjb25zZW50IHNvIHJlYXV0aG9yaXplXHJcbiAgICAgICAgICAgICAgcmVhdXRob3JpemUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIGV2ZXJ5dGhpbmcgc2VlbXMgdG8gYmUgb2sgc28gc3RvcmUgb3VyIHRva2VuXHJcbiAgICAgICAgICAgICAgdGhpcy5hdXRoVG9rZW4gPSByZXNwLmFjY2Vzc190b2tlbjtcclxuICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBpZiAocmVhdXRob3JpemUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlYXV0aG9yaXplJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBnYXBpLmF1dGgyLmF1dGhvcml6ZSh7XHJcbiAgICAgICAgICAgICAgY2xpZW50X2lkOiBXZWJDbGllbnRJZCxcclxuICAgICAgICAgICAgICBzY29wZTogU0NPUEVTLFxyXG4gICAgICAgICAgICAgIHJlc3BvbnNlX3R5cGU6ICdwZXJtaXNzaW9uJyxcclxuICAgICAgICAgICAgICBsb2dpbl9oaW50OiBlbnYuY3VycmVudFVzZXIubWFpbCxcclxuICAgICAgICAgICAgICBwcm9tcHQ6ICdjb25zZW50J1xyXG4gICAgICAgICAgICB9LCAocmVzcCkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3ApO1xyXG4gICAgICAgICAgICAgIGlmIChyZXNwLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzb21ldGhpbmcgaXMgc3RpbGwgd3Jvbmcgc28gdGhyb3cgYW4gZXJyb3JcclxuICAgICAgICAgICAgICAgIHJlamVjdCgnR29vZ2xlIFdlYiBDbGllbnQ6IE5vIGFjY2VzcyB0b2tlbicpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3ZSBub3cgaGF2ZSBhIHRva2VuIChob3BlZnVsbHkgd2l0aCB0aGUgcmlnaHQgc2NvcGVzKVxyXG4gICAgICAgICAgICAgICAgLy8gc2hvdWxkIHdlIGNoZWNrIGFnYWluP1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hdXRoVG9rZW4gPSByZXNwLmFjY2Vzc190b2tlbjtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChyZXNwLmV4cGlyZXNfaW4gPCA1MDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdhcGkuYXV0aDIuYXV0aG9yaXplKHtcclxuICAgICAgICAgICAgICBjbGllbnRfaWQ6IFdlYkNsaWVudElkLFxyXG4gICAgICAgICAgICAgIHNjb3BlOiBTQ09QRVMsXHJcbiAgICAgICAgICAgICAgcmVzcG9uc2VfdHlwZTogJ3Blcm1pc3Npb24nLFxyXG4gICAgICAgICAgICAgIGxvZ2luX2hpbnQ6IGVudi5jdXJyZW50VXNlci5tYWlsLFxyXG4gICAgICAgICAgICAgIHByb21wdDogJ25vbmUnXHJcbiAgICAgICAgICAgIH0sIChyZXNwKSA9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5hdXRoVG9rZW4gPSByZXNwLmFjY2Vzc190b2tlbjtcclxuICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIExvYWQgUGlja2VyIEFQSVxyXG4gICAgaWYgKHR5cGVvZiBnb29nbGUgPT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIGdvb2dsZS5waWNrZXIgPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgZ2FwaS5sb2FkKFwicGlja2VyXCIsICgpID0+IHsgcmVzb2x2ZSgpIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICBsb2FkR2FwaSgpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGlmICh0eXBlb2YgZ2FwaSAhPT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIHJlc29sdmUoKTtcclxuICAgICAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcclxuICAgICAgc2NyaXB0LnNyYyA9IFwiaHR0cHM6Ly9hcGlzLmdvb2dsZS5jb20vanMvY2xpZW50LmpzP29ubG9hZD1nYWFwaV9sb2FkZWRcIjtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKHNjcmlwdCk7XHJcbiAgICAgICh3aW5kb3cgYXMgYW55KS5nYWFwaV9sb2FkZWQgPSByZXNvbHZlO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBmdW5jdGlvbiBjb3Vyc2VOYW1lVG9Dc3NDbGFzcyhjc3NQcmVmaXg6IHN0cmluZywgY291cnNlTmFtZTogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIGAke2Nzc1ByZWZpeH0ke2NvdXJzZU5hbWUuc3Vic3RyKDAsMykudG9Mb3dlckNhc2UoKX1gO1xyXG59XHJcbiIsImltcG9ydCB7IFVzZXJUYXNrc0JveFByb3BzIH0gZnJvbSBcIi4uL3dlZWtwbGFubmVyL3VzZXItdGFza3MtYm94XCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0V2Vla3BsYW5uZXJQcm9ncmVzc0RhdGEodGFza1NldHM6IFBhcnRpYWw8VXNlclRhc2tzQm94UHJvcHM+W10pIHtcclxuICAgIHZhciBjaGFydFRhc2tzOiB7XHJcbiAgICAgICAgY29tcGxldGVkVGFza3M6IG51bWJlciwgXHJcbiAgICAgICAgdG90YWxOdW1iZXJPZlRhc2tzOiBudW1iZXIsXHJcbiAgICAgICAgc3ViamVjdERhdGE6IHtcclxuICAgICAgICAgICAgW2NvbHVtbkhlYWRlcjogc3RyaW5nXTogeyBjb21wbGV0ZWROdW1iZXJPZlRhc2tzOiBudW1iZXIsIG51bWJlck9mVGFza3M6IG51bWJlciB9XHJcbiAgICAgICAgfVxyXG4gICAgfSA9IHtjb21wbGV0ZWRUYXNrczogMCwgdG90YWxOdW1iZXJPZlRhc2tzOiAwICwgc3ViamVjdERhdGE6IHt9fTtcclxuXHJcbiAgICB0YXNrU2V0cy5mb3JFYWNoKGVsZW0gPT4gZWxlbS5sZWFybmluZ0dvYWxzLmZvckVhY2goeCA9PiB7XHJcbiAgICAgICAgdmFyIHN1YmplY3RDb21wbGV0ZWRUYXNrcyA9IHgudGFza3MuZmlsdGVyKHQgPT4gdC5kb25lKS5sZW5ndGg7XHJcbiAgICAgICAgbGV0IGNvdXJzZVN1YmplY3REYXRhID0gY2hhcnRUYXNrcy5zdWJqZWN0RGF0YVtlbGVtLmNvdXJzZU5hbWVdO1xyXG4gICAgICAgIGlmICghY291cnNlU3ViamVjdERhdGEpIHtcclxuICAgICAgICAgICAgY291cnNlU3ViamVjdERhdGEgPSBjaGFydFRhc2tzLnN1YmplY3REYXRhW2VsZW0uY291cnNlTmFtZV0gPSB7XHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWROdW1iZXJPZlRhc2tzOiAwLFxyXG4gICAgICAgICAgICAgICAgbnVtYmVyT2ZUYXNrczogMFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb3Vyc2VTdWJqZWN0RGF0YS5jb21wbGV0ZWROdW1iZXJPZlRhc2tzICs9IHN1YmplY3RDb21wbGV0ZWRUYXNrcztcclxuICAgICAgICBjb3Vyc2VTdWJqZWN0RGF0YS5udW1iZXJPZlRhc2tzICs9IHgudGFza3MubGVuZ3RoO1xyXG5cclxuICAgICAgICBjaGFydFRhc2tzLmNvbXBsZXRlZFRhc2tzICs9IHN1YmplY3RDb21wbGV0ZWRUYXNrcztcclxuICAgICAgICBjaGFydFRhc2tzLnRvdGFsTnVtYmVyT2ZUYXNrcyArPSB4LnRhc2tzLmxlbmd0aDtcclxuICAgIH0pKTtcclxuICAgIHJldHVybiBjaGFydFRhc2tzO1xyXG59IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICAgIG51bWJlck9mVGFza3M6IG51bWJlcjtcclxuICAgIGNvbXBsZXRlZE51bWJlck9mVGFza3M6IG51bWJlcjtcclxuICAgIG1heGltdW1UYXNrc0Rpc3BsYXllZD86IG51bWJlcjtcclxuICAgIGJhY2tncm91bmRDb2xvcj86IHN0cmluZztcclxuICAgIHByb2dyZXNzQ29sb3I/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBHb2FsUHJvZ3Jlc3MgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHM+IHtcclxuICAgIHB1YmxpYyBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xyXG4gICAgICAgIG51bWJlcm9mVGFza3M6IDAsXHJcbiAgICAgICAgY29tcGxldGVkTnVtYmVyT2ZUYXNrczogMCxcclxuICAgICAgICBtYXhpbXVtVGFza3NEaXNwbGF5ZWQ6IDEwLFxyXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJsaWdodGdyZXlcIixcclxuICAgICAgICBwcm9ncmVzc0NvbG9yOiBcIiMzZGJjYTJcIixcclxuICAgIH07XHJcblxyXG4gICAgY3JlYXRlUHJvZ3Jlc3MgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgeyBudW1iZXJPZlRhc2tzLCBjb21wbGV0ZWROdW1iZXJPZlRhc2tzLCBtYXhpbXVtVGFza3NEaXNwbGF5ZWQsIGJhY2tncm91bmRDb2xvciwgcHJvZ3Jlc3NDb2xvciB9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBsZXQgcHJvZ3Jlc3MgPSBbXTtcclxuICAgICAgICBpZihudW1iZXJPZlRhc2tzID4gbWF4aW11bVRhc2tzRGlzcGxheWVkKXtcclxuICAgICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJwcm9ncmVzcy1vdmVydmlld1wiPiB7Y29tcGxldGVkTnVtYmVyT2ZUYXNrc30gLyB7bnVtYmVyT2ZUYXNrc30gPC9kaXY+O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgdGFza05vID0gMTsgdGFza05vIDw9IG51bWJlck9mVGFza3M7IHRhc2tObysrKSB7XHJcbiAgICAgICAgICAgIHByb2dyZXNzLnB1c2goXHJcbiAgICAgICAgICAgIDxzdmcga2V5PXt0YXNrTm99PlxyXG4gICAgICAgICAgICAgICAgPGNpcmNsZSBjbGFzc05hbWU9XCJjaXJjbGUtY2hhcnQtYmFja2dyb3VuZFwiIGZpbGw9e3Rhc2tObyA+IGNvbXBsZXRlZE51bWJlck9mVGFza3MgPyBiYWNrZ3JvdW5kQ29sb3IgOiBwcm9ncmVzc0NvbG9yfSBjeD1cIjhcIiBjeT1cIjhcIiByPVwiOFwiIC8+XHJcbiAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcHJvZ3Jlc3M7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCl7ICBcclxuICAgICAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJnb2Fscy1wcm9ncmVzc1wiPnt0aGlzLmNyZWF0ZVByb2dyZXNzKCl9PC9kaXY+XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gICAgcGVyY2VudGFnZTogbnVtYmVyO1xyXG4gICAgYmFja2dyb3VuZENvbG9yPzogc3RyaW5nO1xyXG4gICAgcHJvZ3Jlc3NDb2xvcj86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFByb2dyZXNzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzPiB7XHJcbiAgICBwdWJsaWMgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcclxuICAgICAgICBwZXJjZW50YWdlOiAwLFxyXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjRjFGNUY0XCIsXHJcbiAgICAgICAgcHJvZ3Jlc3NDb2xvcjogXCIjM2RiY2EyXCIsXHJcbiAgICB9O1xyXG5cclxuICAgIHJlbmRlcigpe1xyXG4gICAgICAgIGNvbnN0IHtwZXJjZW50YWdlLCBiYWNrZ3JvdW5kQ29sb3IsIHByb2dyZXNzQ29sb3J9ID0gdGhpcy5wcm9wcztcclxuICAgICAgICBjb25zdCByb3VuZGVkUGVyY2VudGFnZSA9IE1hdGgucm91bmQocGVyY2VudGFnZSk7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJwcm9ncmVzcy1jaGFydFwiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjI1XCI+XHJcbiAgICAgICAgICAgIDxyZWN0IGZpbGw9e2JhY2tncm91bmRDb2xvcn0gIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIiByeD1cIjRcIi8+XHJcbiAgICAgICAgICAgIDxyZWN0IGNsYXNzTmFtZT1cImZpbGxcIiBmaWxsPXtwcm9ncmVzc0NvbG9yfSB3aWR0aD17YCR7cm91bmRlZFBlcmNlbnRhZ2V9JWB9IGhlaWdodD1cIjEwMCVcIiByeD1cIjRcIi8+XHJcbiAgICAgICAgICAgIDx0ZXh0IGNsYXNzTmFtZT1cImZpbGxlZC10ZXh0XCIgdGV4dEFuY2hvcj1cIm1pZGRsZVwiIHg9XCI1MCVcIiB5PVwiNTAlXCIgZHk9XCIuM2VtXCI+e2Ake3JvdW5kZWRQZXJjZW50YWdlfSVgfTwvdGV4dD5cdFxyXG4gICAgICAgICAgICA8L3N2Zz5cclxuICAgICAgICApXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IExpbmsgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuaW1wb3J0IHsgVmFsdWUsIEVtaXR0ZXIgfSBmcm9tICdrZWRiYWNrZW5kL29ic2VydmFibGUnO1xyXG5pbXBvcnQgeyBsaXZlUXVlcnlWaWV3IH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xpdmUtcXVlcnktdmlldyc7XHJcbmltcG9ydCB7IExhenlDb250ZW50IH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xhenktY29udGVudCc7XHJcbmltcG9ydCB7IEVsbGlwc2lzTG9hZGVyIH0gZnJvbSAnLi4vLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvZWxsaXBzaXMtbG9hZGVyJztcclxuaW1wb3J0IHsgcHJlc2VydmVJbXBlcnNvbmF0aW9uUXVlcnkgfSBmcm9tICcuLi8uLi8uLi9hY2Nlc3MtY29udHJvbCc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEJhbm5lclByb3BzIHtcclxuICB0aXRsZTogc3RyaW5nLFxyXG4gIGJhY2tncm91bmRJbWFnZT86IHN0cmluZyxcclxuICB0YWJzOiB7IG5hbWU6IHN0cmluZyB8IEpTWC5FbGVtZW50LCBrZXk6IHN0cmluZywgbGluaz86IHN0cmluZywgb25DbGljaz86ICgpID0+IHZvaWQsIGRyYWdnYWJsZT86IGJvb2xlYW4gIH1bXSxcclxuICBidXR0b25zPzogSlNYLkVsZW1lbnRbXSxcclxuICBhY3RpdmVUYWI6IHN0cmluZztcclxuICBjb3JuZXJCb3g/OiBzdHJpbmcgfCBKU1guRWxlbWVudDtcclxuICBibG9ja3M/OiBBcnJheTx7IGlkOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgc3RlcHM6IEFycmF5PHsgbGluazogc3RyaW5nLCBzdGVwTm86IG51bWJlciwgaXNBY3RpdmU6IGJvb2xlYW59PiB9PlxyXG4gIHNvcnRhYmxlVGFicz86IGJvb2xlYW47XHJcbiAgb25UYWJEcm9wPzogKHNvdXJjZTogc3RyaW5nLCB0YXJnZXQ6IHN0cmluZywgcGxhY2VtZW50OiAnYmVmb3JlJyB8ICdhZnRlcicpID0+IHZvaWRcclxufVxyXG5cclxuaW50ZXJmYWNlIExhenlCYW5uZXJQcm9wcyB7XHJcbiAgbGF6eVByb3BzOiBWYWx1ZTxCYW5uZXJQcm9wcz5cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIExhenlCYW5uZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8TGF6eUJhbm5lclByb3BzPiB7XHJcbiAgZHJhZ1N0YXRlID0gbmV3IEVtaXR0ZXIoeyB0YWJCZWluZ0RyYWdnZWQ6ICcnLCB0YWJCZWluZ0hvdmVyZWQ6ICcnLCBpbnNlcnRCZWZvcmU6IGZhbHNlLCBvcmlnaW5DbGllbnRYOiAtMSB9KTtcclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3QgeyBsYXp5UHJvcHMgfSA9IHRoaXMucHJvcHM7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LXJvdyBzdi1sYXlvdXQgc3Ytc2tpcC1zcGFjZXJcIiBzdHlsZT17eyBvdmVyZmxvdzogXCJ2aXNpYmxlXCIgfX0+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdi1sYXlvdXQgc3Ytc2tpcC1zcGFjZXIgc3YtY29sdW1uLTEyXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LXNjcmlwdC1wb3J0bGV0IHN2LXBvcnRsZXQgc3Ytc2tpcC1zcGFjZXJcIj5cclxuICAgICAgICAgICAgPExhenlDb250ZW50IG5vRXJyb3I+XHJcbiAgICAgICAgICAgICAge2xhenlQcm9wcy5tYXAoKHsgYmFja2dyb3VuZEltYWdlIH0pID0+IGJhY2tncm91bmRJbWFnZSAmJiA8c3R5bGU+e2BcclxuICAgICAgICAgICAgICAucGFnZUhlYWRlciB7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJyR7YmFja2dyb3VuZEltYWdlfScpICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBgfTwvc3R5bGU+KX1cclxuICAgICAgICAgICAgPC9MYXp5Q29udGVudD5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwYWdlSGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgPGE+XHJcbiAgICAgICAgICAgICAgICA8aDE+PExhenlDb250ZW50IG5vRXJyb3I+e2xhenlQcm9wcy5tYXAocHJvcHMgPT4gPD57cHJvcHMudGl0bGV9PC8+KX08L0xhenlDb250ZW50PjwvaDE+XHJcbiAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgIDxMYXp5Q29udGVudCBub0Vycm9yPntsYXp5UHJvcHMubWFwKCh7IGNvcm5lckJveCB9KSA9PiBjb3JuZXJCb3ggJiZcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFnZUhlYWRlckNvcm5lckJveFwiPlxyXG4gICAgICAgICAgICAgICAgICB7Y29ybmVyQm94fVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+KX1cclxuICAgICAgICAgICAgICA8L0xhenlDb250ZW50PlxyXG5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvbnNGaWVsZFwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidXR0b25zQ29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxMYXp5Q29udGVudCBzcGlubmVyPXs8RWxsaXBzaXNMb2FkZXIgLz59PntsYXp5UHJvcHMubWFwKCh7IHRhYnMsIGJ1dHRvbnMsIGFjdGl2ZVRhYiwgYmxvY2tzLCBzb3J0YWJsZVRhYnMsIG9uVGFiRHJvcCB9KSA9PiA8PlxyXG4gICAgICAgICAgICAgICAgICAgIHtibG9ja3MgPyA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIHtibG9ja3MubWFwKGJsb2NrID0+IDxkaXYga2V5PXtibG9jay5pZH0gY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24tdmVydGljYWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGE+e2Jsb2NrLm5hbWV9PC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ0bi1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YmxvY2suc3RlcHMubWFwKHN0ZXAgPT4gPFJlYWN0LkZyYWdtZW50IGtleT17c3RlcC5zdGVwTm99PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bz17c3RlcC5saW5rfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcImJ0biBidG4tc21hbGwgc3RlcC1idXR0b25cIiArIChzdGVwLmlzQWN0aXZlID8gXCIgYWN0aXZlUGFnZVwiIDogXCJcIil9ID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtzdGVwLnN0ZXBOb31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L0xpbms+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD4pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+KX1cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdob3Jpem9udGFsTWVudSc+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8TGF6eUNvbnRlbnQ+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYWdTdGF0ZS5tYXAoKHsgdGFiQmVpbmdEcmFnZ2VkLCB0YWJCZWluZ0hvdmVyZWQsIGluc2VydEJlZm9yZSwgb3JpZ2luQ2xpZW50WCB9KSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDx1bFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtzb3J0YWJsZVRhYnMgPyBcInNvcnRhYmxlXCIgOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Ecm9wPXtvblRhYkRyb3AgPyBldiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YWJCZWluZ0hvdmVyZWQgJiYgdGFiQmVpbmdEcmFnZ2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25UYWJEcm9wKHRhYkJlaW5nRHJhZ2dlZCwgdGFiQmVpbmdIb3ZlcmVkLCBpbnNlcnRCZWZvcmUgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JlZm9yZScgOiAnYWZ0ZXInKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYWdTdGF0ZS5kaXNwYXRjaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5kcmFnU3RhdGUudmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiQmVpbmdIb3ZlcmVkOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJCZWluZ0RyYWdnZWQ6ICcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IG51bGx9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0YWJzLm1hcCgoeyBuYW1lLCBrZXksIGxpbmssIG9uQ2xpY2ssIGRyYWdnYWJsZSB9LCBpZHgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNBY3RpdmUgPSBhY3RpdmVUYWIgPT09IGtleSB8fCAoYWN0aXZlVGFiID09PSAnJCcgJiYgaWR4ID09PSAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qge2RyYWdTdGF0ZX0gPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gbmFtZSB8fCBMYChOYW1ubMO2cyBmbGlrKWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA8UmVhY3QuRnJhZ21lbnQga2V5PXtrZXl9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpbnNlcnRCZWZvcmUgJiYgdGFiQmVpbmdIb3ZlcmVkID09PSBrZXkgPyA8bGkgY2xhc3NOYW1lPVwiZHJvcC10YXJnZXRcIiBvbkRyYWdPdmVyPXtldiA9PiBldi5wcmV2ZW50RGVmYXVsdCgpfT4mbmJzcDs8L2xpPiA6IG51bGx9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlID8gXCJhY3RpdmVQYWdlXCIgOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXkgPT09IHRhYkJlaW5nRHJhZ2dlZCA/IFwiZHJhZy1zb3VyY2VcIiA6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvcnRhYmxlVGFicyAmJiBkcmFnZ2FibGUgPyBcImRyYWdnYWJsZVwiIDogXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXS5maWx0ZXIoeD0+eCkuam9pbignICcpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlPXtzb3J0YWJsZVRhYnMgJiYgZHJhZ2dhYmxlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25EcmFnU3RhcnQ9e3NvcnRhYmxlVGFicyAmJiBkcmFnZ2FibGUgPyBldiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2LmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gXCJtb3ZlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdTdGF0ZS5kaXNwYXRjaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZHJhZ1N0YXRlLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbkNsaWVudFg6IGV2LmNsaWVudFgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiQmVpbmdEcmFnZ2VkOiBrZXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ092ZXI9e3NvcnRhYmxlVGFicyA/IGV2ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhYkJlaW5nRHJhZ2dlZCA9PT0ga2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ1N0YXRlLmRpc3BhdGNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmRyYWdTdGF0ZS52YWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkJlaW5nSG92ZXJlZDogJydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0YWJCZWluZ0RyYWdnZWQpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXYuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSBcIm1vdmVcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIm9uRHJhZ092ZXI6IFwiICsgbmFtZSArIFwiLiBpZHg6IFwiICsgaWR4ICsgXCIuIG90aGVySWR4OiBcIiArIG90aGVySWR4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ1N0YXRlLmRpc3BhdGNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5kcmFnU3RhdGUudmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiQmVpbmdIb3ZlcmVkOiBrZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0QmVmb3JlOiBvcmlnaW5DbGllbnRYID4gZXYuY2xpZW50WH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTogbnVsbH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRHJhZ0VuZD17ZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYWdTdGF0ZS5kaXNwYXRjaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZHJhZ1N0YXRlLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYkJlaW5nSG92ZXJlZDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiQmVpbmdEcmFnZ2VkOiAnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmsgPyBsaW5rLnN0YXJ0c1dpdGgoXCI6XCIpID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj17cHJlc2VydmVJbXBlcnNvbmF0aW9uUXVlcnkobGluay5zdWJzdHIoMSksIHt9KX0+e25hbWV9PC9hPiA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rIHRvPXtsaW5rfT57bmFtZX08L0xpbms+IDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljayA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgb25DbGljaz17b25DbGlja30+e25hbWV9PC9hPiA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyFpbnNlcnRCZWZvcmUgJiYgdGFiQmVpbmdIb3ZlcmVkID09PSBrZXkgPyA8bGkgY2xhc3NOYW1lPVwiZHJvcC10YXJnZXRcIiAgb25EcmFnT3Zlcj17ZXYgPT4gZXYucHJldmVudERlZmF1bHQoKX0+Jm5ic3A7PC9saT4gOiBudWxsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1JlYWN0LkZyYWdtZW50PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YnV0dG9ucyAmJiBidXR0b25zLm1hcCgoYnRuLCBpZHgpID0+IDxsaSBjbGFzc05hbWU9XCJhY3Rpb24tdGFiXCIga2V5PXtgYnRuJHtpZHh9YH0+e2J0bn08L2xpPil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD4pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9MYXp5Q29udGVudD5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPC8+KX1cclxuICAgICAgICAgICAgICAgICAgPC9MYXp5Q29udGVudD5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBCYW5uZXIgPSAocHJvcHM6IEJhbm5lclByb3BzKSA9PiA8TGF6eUJhbm5lciBsYXp5UHJvcHM9e25ldyBFbWl0dGVyPEJhbm5lclByb3BzPihwcm9wcyl9IC8+XHJcblxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBEaWFsb2dzIH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2RpYWxvZ3MnO1xyXG5pbXBvcnQgeyBXaXRoR3JhcGhzLCBLZWRCYWNrZW5kUmVwbyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IENvdXJzZUluc3RhbmNlLCBDb3Vyc2VUYWIsIENvdXJzZUJsb2NrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBEaWFsb2dzQ29udGV4dCB9IGZyb20gJy4vZGlhbG9nLWNvbnRleHQnO1xyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICAgIGRpYWxvZ3M6IGFueVtdO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG59XHJcblxyXG5leHBvcnQgY29uc3Qgc2V0dXBEaWFsb2dzID0gPFAgZXh0ZW5kcyBvYmplY3Q+KENvbXBvbmVudDogUmVhY3QuQ29tcG9uZW50VHlwZTxQPikgPT5cclxuICBjbGFzcyBEaWFsb2dDb250ZW50IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xyXG4gICAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICBkaWFsb2dzOiBbXVxyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLm9wZW5EaWFsb2cgPSB0aGlzLm9wZW5EaWFsb2cuYmluZCh0aGlzKTtcclxuICAgICAgdGhpcy5jbG9zZURpYWxvZyA9IHRoaXMuY2xvc2VEaWFsb2cuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuRGlhbG9nKGRpYWxvZykge1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHsgZGlhbG9nczogWy4uLnRoaXMuc3RhdGUuZGlhbG9ncywgZGlhbG9nXSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZURpYWxvZygpIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGRpYWxvZ3M6IHRoaXMuc3RhdGUuZGlhbG9ncy5zbGljZSgwLCB0aGlzLnN0YXRlLmRpYWxvZ3MubGVuZ3RoIC0gMSkgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKCkge1xyXG4gICAgICBjb25zdCB7IGRpYWxvZ3MgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICAgIHJldHVybiA8RGlhbG9nc0NvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3tvcGVuRGlhbG9nIDogdGhpcy5vcGVuRGlhbG9nLCBjbG9zZURpYWxvZzp0aGlzLmNsb3NlRGlhbG9nfX0+XHJcbiAgICAgICAgPENvbXBvbmVudCB7Li4udGhpcy5wcm9wcyBhcyBQfT48L0NvbXBvbmVudD5cclxuICAgICAgICA8RGlhbG9ncyBkaWFsb2dzPXtkaWFsb2dzfSBwb3BEaWFsb2c9e3RoaXMuY2xvc2VEaWFsb2d9IC8+XHJcbiAgICAgPC9EaWFsb2dzQ29udGV4dC5Qcm92aWRlcj5cclxuICAgIH1cclxuICB9IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuZXhwb3J0IGNvbnN0IERpYWxvZ3NDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dCh7b3BlbkRpYWxvZzogbnVsbCwgY2xvc2VEaWFsb2c6IG51bGx9KTsiLCJleHBvcnQgY29uc3QgRmllbGRMaW1pdHMgPSB7XHJcbiAgTUFYX0NIQVJTX0lOX0NPTlRFTlRTOiA0MDAwLFxyXG4gIE1BWF9DSEFSU19UQVNLX05BTUVTOiA2NCxcclxuICBNQVhfQ0hBUlNfVEFTS19JTlRST19URVhUOiAyMDBcclxufTtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgZnV0dXJlQWJpbGl0aWVzIH0gZnJvbSAnLi4vLi4vLi4vY29udHJhY3RzL2tlZC1tb2RlbHMnO1xyXG5pbXBvcnQgeyBPcGVuQ2xvc2VCb3ggfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvb3Blbi1jbG9zZS1ib3gnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICB0aXRsZTogc3RyaW5nXHJcbiAgc2VsZWN0ZWRGQXM6IHN0cmluZ1tdXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBGdXR1cmVBYmlsaXRpZXNCb3ggPSAoe1xyXG4gIHRpdGxlLFxyXG4gIHNlbGVjdGVkRkFzXHJcbn06IFByb3BzKSA9PiA8T3BlbkNsb3NlQm94IHRpdGxlPXs8cD57dGl0bGV9PC9wPn0gY2xhc3NOYW1lPVwibGFyZ2VyXCI+XHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImFiaWxpdHlMaXN0XCI+XHJcbiAgICAgIHtzZWxlY3RlZEZBcy5tYXAoZmEgPT5cclxuICAgICAgICA8ZGl2IGtleT17ZmF9IGNsYXNzTmFtZT1cImNvbnRlbnRQYXJ0XCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnRUZXh0XCI+XHJcbiAgICAgICAgICAgIDxwPntmYX08L3A+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKX1cclxuICAgIDwvZGl2PlxyXG48L09wZW5DbG9zZUJveD5cclxuIiwiaW1wb3J0IFJlYWN0LCB7IFN1c3BlbnNlIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBXb3JkQmFua0NvbnRlbnRTZXR0aW5ncyB9IGZyb20gJy4uL3ZpZXdlci1lZGl0b3IvY291cnNlLWNvbnRlbnRzL3dvcmQtYmFuay1jb250ZW50LXNldHRpbmdzJztcclxuaW1wb3J0IHsgRWxsaXBzaXNMb2FkZXIgfSBmcm9tICcuLi8uLi9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9lbGxpcHNpcy1sb2FkZXInO1xyXG5pbXBvcnQgeyBjZmcgfSBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL0tFRC5jZmcnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBzdWJqZWN0OiBzdHJpbmc7XHJcbiAgc3RlcDogbnVtYmVyO1xyXG4gIG9uU2VsZWN0OiAoc2VsZWN0ZWRXb3JkQmFuazoge25hbWU6IHN0cmluZywgdXJsOiBzdHJpbmd9KSA9PiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgU2VsZWN0V29yZEJhbmsgPSAoe3N1YmplY3QsIHN0ZXAsIG9uU2VsZWN0fTogUHJvcHMpID0+IDxkaXYgc3R5bGU9e3ttaW5IZWlnaHQ6IDQwMH19PjxTdXNwZW5zZSBmYWxsYmFjaz17PEVsbGlwc2lzTG9hZGVyIC8+fT5cclxuICAgIDxXb3JkQmFua0NvbnRlbnRTZXR0aW5ncyBzdWJqZWN0TmFtZT17c3ViamVjdH0gc3RlcE5vPXtzdGVwfSBvbkNoYW5nZT17KHtuYW1lLCBrZXl9KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gYCR7Y2ZnLktFRF9XT1JEQkFOS1NfVVJMfT9zdWJqZWN0PSR7c3ViamVjdH0mc3RlcD0ke3N0ZXB9Jmxpc3Q9JHtrZXl9YDtcclxuICAgICAgICBvblNlbGVjdCh7bmFtZSwgdXJsfSk7XHJcbiAgICAgIH1cclxuICAgIH0gLz5cclxuICA8L1N1c3BlbnNlPlxyXG48L2Rpdj47XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgbGVmdDogUmVhY3QuUmVhY3ROb2RlO1xyXG4gIHJpZ2h0OiBSZWFjdC5SZWFjdE5vZGU7XHJcbiAgcmlnaHRXaWR0aDogMSB8IDIgfCAzIHwgNCB8IDUgfCA2IHwgNyB8IDggfMKgOSB8IDEwIHwgMTE7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBUd29Db2x1bW5zUGFnZSA9ICh7IGxlZnQsIHJpZ2h0LCByaWdodFdpZHRoIH06IFByb3BzKSA9PiAoXHJcbiAgPGRpdiBjbGFzc05hbWU9XCJzdi1yb3cgc3YtbGF5b3V0XCI+XHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWxheW91dCBzdi1za2lwLXNwYWNlciBzdi1jb2x1bW4tMTJcIj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdi1zcGFjZXItMjBweHZ0IHN2LXZlcnRpY2FsIHN2LWxheW91dCBzdi1za2lwLXNwYWNlclwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFnZWNvbnRlbnQgc3YtbGF5b3V0IHN2LXNwYWNlci0yMHB4dnQgc3Ytc2tpcC1zcGFjZXJcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3Ytcm93IHN2LWxheW91dCBzdi1za2lwLXNwYWNlclwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YHN2LWxheW91dCBzdi1za2lwLXNwYWNlciBzdi1jb2x1bW4tJHsxMi1yaWdodFdpZHRofWB9PlxyXG4gICAgICAgICAgICAgIHtsZWZ0fVxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2Bzdi1sYXlvdXQgc3YtY29sdW1uLSR7cmlnaHRXaWR0aH1gfT5cclxuICAgICAgICAgICAgICB7cmlnaHR9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgPC9kaXY+XHJcbik7XHJcbiIsImludGVyZmFjZSBPcmRlcmVkRG9jdW1lbnQge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgb3JkZXI6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlb3JkZXIoZG9jczogT3JkZXJlZERvY3VtZW50W10sIHNvdXJjZUlkOiBzdHJpbmcsIHRhcmdldElkOiBzdHJpbmcsIHBsYWNlbWVudDogJ2JlZm9yZScgfCAnYWZ0ZXInKSB7XHJcbiAgY29uc3QgZG9jc1dpdGhJZHggPSBkb2NzLm1hcCgoZG9jLCBpZHgpID0+ICh7ZG9jLCBpZHh9KSk7XHJcbiAgY29uc3Qgc291cmNlV2l0aElkeCA9IGRvY3NXaXRoSWR4LmZpbHRlcigoe2RvY30pID0+IGRvYy5pZCA9PT0gc291cmNlSWQpWzBdO1xyXG4gIGNvbnN0IHRhcmdldFdpdGhJZHggPSBkb2NzV2l0aElkeC5maWx0ZXIoKHtkb2N9KSA9PiBkb2MuaWQgPT09IHRhcmdldElkKVswXTtcclxuICBpZiAoc291cmNlV2l0aElkeCAmJiB0YXJnZXRXaXRoSWR4KSB7XHJcbiAgICBjb25zdCB0YXJnZXRJZHggPSB0YXJnZXRXaXRoSWR4LmlkeDtcclxuICAgIGxldCBuZXdPcmRlciA9IHNvdXJjZVdpdGhJZHguZG9jLm9yZGVyO1xyXG4gICAgaWYgKHBsYWNlbWVudCA9PT0gJ2FmdGVyJykge1xyXG4gICAgICAvLyBQbGFjZSBzb3VyY2UgYWZ0ZXIgdGFyZ2V0XHJcbiAgICAgIGlmICh0YXJnZXRJZHggPT09IGRvY3MubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgIC8vIFRhcmdldCBpcyBsYXN0XHJcbiAgICAgICAgbmV3T3JkZXIgPSBEYXRlLm5vdygpOyAvLyBEYXRlLm5vdygpIGlzIGFsd2F5cyBsYXN0ICh1bmxlc3MgYSB0YWIgaXMgbWVhbmluZ2Z1bGx5IGdpdmVuIGEgZnV0dXJlIG9yZGVyIC0gdGhlbiBsZXQgaXQgc3RheSBsYXN0ISlcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBHaXZlIGFuIG9yZGVyIGJldHdlZW4gdGFyZ2V0IGFuZCBpdHMgY3VycmVudCBuZWlnaGJvdXIgdG8gdGhlIHJpZ2h0XHJcbiAgICAgICAgbmV3T3JkZXIgPSBkb2NzW3RhcmdldElkeF0ub3JkZXIgKyBNYXRoLnJhbmRvbSgpICogKGRvY3NbdGFyZ2V0SWR4KzFdLm9yZGVyIC0gZG9jc1t0YXJnZXRJZHhdLm9yZGVyKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gUGxhY2Ugc291cmNlIGJlZm9yZSB0YXJnZXRcclxuICAgICAgaWYgKHRhcmdldElkeCA9PT0gMCkge1xyXG4gICAgICAgIC8vIFRhcmdldCBpcyBmaXJzdFxyXG4gICAgICAgIG5ld09yZGVyID0gTWF0aC5yb3VuZChkb2NzWzBdLm9yZGVyIC0gMTAwIC0gMTAwMDAgKiBNYXRoLnJhbmRvbSgpKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBHaXZlIGFuIG9yZGVyIGJldHdlZW4gdGFyZ2V0IGFuZCBpdHMgY3VycmVudCBuZWlnaGJvciB0byB0aGUgbGVmdFxyXG4gICAgICAgIG5ld09yZGVyID0gZG9jc1t0YXJnZXRJZHgtMV0ub3JkZXIgKyBNYXRoLnJhbmRvbSgpICogKGRvY3NbdGFyZ2V0SWR4XS5vcmRlciAtIGRvY3NbdGFyZ2V0SWR4LTFdLm9yZGVyKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3T3JkZXI7XHJcbiAgfVxyXG4gIHJldHVybiAwO1xyXG59XHJcbiIsImltcG9ydCB7IENvdXJzZUluc3RhbmNlLCBDb3Vyc2VUYWIsIENvdXJzZUJsb2NrLCBTdGVwQ291cnNlSW5zdGFuY2UgfSBmcm9tIFwia2VkYmFja2VuZC9tb2RlbHNcIjtcclxuaW1wb3J0IHsgZmxhdHRlbiwgZGlzdGluY3QgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZVRhc2tUYWdzQW5kU3ViamVjdChjb3Vyc2U6IENvdXJzZUluc3RhbmNlLCB0YWI6IENvdXJzZVRhYiwgYmxvY2s6IENvdXJzZUJsb2NrKSB7XHJcbiAgY29uc3QgdGFncyA9IFtjb3Vyc2UuaWRdOyAgXHJcbiAgXHJcbiAgaWYgKHRhYi50YWJDbGFzcyA9PT0gJ21pc3Npb24tdGFiJykge1xyXG4gICAgLy8gSWYgdGFzayBiZWxvbmdzIHRvIGEgbWlzc2lvbiB0YWIsXHJcbiAgICAvLyBpdCBzaG91bGQgYmUgdGFnZ2VkIHdpdGggYWxsIHRoZSBzdWJqZWN0cyBvZiB0aGUgY291cnNlXHJcbiAgICBjb25zdCBvdGhlclN1YmplY3RUYWJzID0gY291cnNlLnRhYnMhXHJcbiAgICAgIC5maWx0ZXIodGFiID0+IHRhYi50YWJDbGFzcyA9PT0gJ3N1YmplY3QtdGFiJyk7XHJcblxyXG4gICAgY29uc3Qgc3ViamVjdHMgPSBkaXN0aW5jdChvdGhlclN1YmplY3RUYWJzLm1hcCh0YWIgPT4gdGFiLnN1YmplY3QpLCBzID0+IHMuc3ViamVjdENvZGUpO1xyXG4gICAgY29uc3QgY291cnNlQ29kZVRhZ3MgPSBkaXN0aW5jdChmbGF0dGVuKFxyXG4gICAgICBvdGhlclN1YmplY3RUYWJzLm1hcChcclxuICAgICAgICB0YWIgPT4gdGFiLnRhZ3MuZmlsdGVyKHRhZyA9PiB0YWcuc3RhcnRzV2l0aChcImNvdXJzZTpcIikpXHJcbiAgICAgIClcclxuICAgICkpO1xyXG5cclxuICAgIHRhZ3MucHVzaCguLi5zdWJqZWN0cy5tYXAocyA9PiBcInN1YjpcIiArIHMuc3ViamVjdENvZGUpKTtcclxuICAgIHRhZ3MucHVzaCguLi5jb3Vyc2VDb2RlVGFncyk7XHJcbiAgICBjb25zdCBzdWJqZWN0ID0gc3ViamVjdHMubWFwKHMgPT4gcy5zdWJqZWN0TmFtZSkuam9pbignLCAnKTtcclxuICAgIHJldHVybiB7IHRhZ3MsIHN1YmplY3QgfTtcclxuICB9IGVsc2Uge1xyXG4gICAgdGFncy5wdXNoKC4uLih0YWIgfHwgYmxvY2spLnRhZ3MuZmlsdGVyKHRhZyA9PiB0YWcuc3RhcnRzV2l0aChcImNvdXJzZTpcIikpKTtcclxuICAgIGlmIChjb3Vyc2UudHlwZSA9PT0gJ3RoZW1lLWNvdXJzZScpXHJcbiAgICAgIHRhZ3MucHVzaCguLi50YWIudGFncy5maWx0ZXIodGFnID0+IHRhZy5zdGFydHNXaXRoKFwic3ViOlwiKSkpO1xyXG4gICAgZWxzZVxyXG4gICAgICB0YWdzLnB1c2goLi4uYmxvY2sudGFncy5maWx0ZXIodGFnID0+IHRhZy5zdGFydHNXaXRoKFwic3ViOlwiKSkpO1xyXG4gICAgY29uc3Qgc3ViamVjdCA9IGNvdXJzZS50eXBlID09PSAndGhlbWUtY291cnNlJyA/XHJcbiAgICAgIHRhYi5zdWJqZWN0LnN1YmplY3ROYW1lIDpcclxuICAgICAgKGNvdXJzZSBhcyBTdGVwQ291cnNlSW5zdGFuY2UpLnN1YmplY3Quc3ViamVjdE5hbWU7XHJcbiAgICByZXR1cm4geyB0YWdzLCBzdWJqZWN0IH07XHJcbiAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgeyBDb3Vyc2VJbnN0YW5jZSB9IGZyb20gXCJrZWRiYWNrZW5kL21vZGVsc1wiO1xyXG5pbXBvcnQgeyBkaXN0aW5jdCwgZmxhdHRlbiB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTdWJqZWN0Q29kZXMgKHRhZ3M6IHN0cmluZ1tdKSB7XHJcbiAgcmV0dXJuIGRpc3RpbmN0KCh0YWdzIHx8wqBbXSlcclxuICAgIC5maWx0ZXIodGFnID0+IHRhZy5zdGFydHNXaXRoKFwic3ViOlwiKSlcclxuICAgIC5tYXAodGFnID0+IHRhZy5zdWJzdHIoXCJzdWI6XCIubGVuZ3RoKSlcclxuICApOztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFNjaG9vbFllYXJzKHRhZ3M6IHN0cmluZ1tdKSB7XHJcbiAgcmV0dXJuIGRpc3RpbmN0KCh0YWdzIHx8IFtdKVxyXG4gICAgLmZpbHRlcih0YWcgPT4gdGFnLnN0YXJ0c1dpdGgoXCJjb3Vyc2U6XCIpKVxyXG4gICAgLm1hcCh0YWcgPT4gdGFnLnN1YnN0cih0YWcuaW5kZXhPZihcInxcIikgKyAxKSkgLy8gU2Nob29sIHllYXIgaXMgY29uY2F0ZW5hdGVkIGFzIHBpcGUgKyBzY2hvb2x5ZWFyLiBFeGFtcGxlOiBcIkdSR1JGWVMwMXw0LTZcIlxyXG4gICk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlQ291cnNlSW5zdGFuY2VUYWdzICh0YWdzOiBzdHJpbmdbXSwgc3ViamVjdENvZGVzOiBzdHJpbmdbXSwgc2Nob29sWWVhcnM6IHN0cmluZ1tdKSB7XHJcbiAgY29uc3Qgb3RoZXJUYWdzID0gKHRhZ3MgfHwgW10pLmZpbHRlcih0YWcgPT4gIXRhZy5zdGFydHNXaXRoKFwiY291cnNlOlwiKSAmJiAhdGFnLnN0YXJ0c1dpdGgoXCJzdWI6XCIpKTtcclxuICBjb25zdCBzdWJqZWN0VGFncyA9IHN1YmplY3RDb2Rlcy5tYXAoc3ViID0+IFwic3ViOlwiICsgc3ViKTtcclxuICBjb25zdCBjb3Vyc2VUYWdzID0gZmxhdHRlbihcclxuICAgICAgICBzdWJqZWN0Q29kZXMubWFwKHN1YiA9PlxyXG4gICAgICAgICAgc2Nob29sWWVhcnMubWFwKHNjaG9vbFllYXIgPT5cclxuICAgICAgICAgICAgXCJjb3Vyc2U6XCIgKyBzdWIgKyBcInxcIiArIHNjaG9vbFllYXIpKSk7XHJcbiAgcmV0dXJuIG90aGVyVGFnc1xyXG4gICAgLmNvbmNhdChzdWJqZWN0VGFncylcclxuICAgIC5jb25jYXQoY291cnNlVGFncyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlVGFnc0Zyb21TY2hvb2xZZWFycyh0YWdzOiBzdHJpbmdbXSwgc2Nob29sWWVhcnM6IHN0cmluZ1tdKSB7XHJcbiAgLy9zY2hvb2xZZWFycyA9IHNjaG9vbFllYXJzLm1hcChhZnRlckNvbG9uKTtcclxuICBjb25zdCBzdWJqZWN0Q29kZXMgPSBnZXRTdWJqZWN0Q29kZXModGFncyk7XHJcbiAgcmV0dXJuIGNvbXB1dGVDb3Vyc2VJbnN0YW5jZVRhZ3ModGFncywgc3ViamVjdENvZGVzLCBzY2hvb2xZZWFycyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlVGFnc0Zyb21TdWJqZWN0Q29kZXModGFnczogc3RyaW5nW10sIHN1YmplY3RDb2Rlczogc3RyaW5nW10pIHtcclxuICAvL3N1YmplY3RDb2RlcyA9IHN1YmplY3RDb2Rlcy5tYXAoYWZ0ZXJDb2xvbik7XHJcbiAgY29uc3Qgc2Nob29sWWVhcnMgPSBnZXRTY2hvb2xZZWFycyh0YWdzKTtcclxuICByZXR1cm4gY29tcHV0ZUNvdXJzZUluc3RhbmNlVGFncyh0YWdzLCBzdWJqZWN0Q29kZXMsIHNjaG9vbFllYXJzKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWZ0ZXJDb2xvbiAoc3RyOiBzdHJpbmcpIHtcclxuICBjb25zdCBwQ29sb24gPSBzdHIuaW5kZXhPZignOicpO1xyXG4gIHJldHVybiBwQ29sb24gPj0gMCA/XHJcbiAgICBzdHIuc3Vic3RyKHBDb2xvbiArIDEpIDpcclxuICAgIHN0cjtcclxufVxyXG4iLCJcclxuZXhwb3J0IGZ1bmN0aW9uIGdldENvdXJzZUNvZGVzRnJvbVRhZ3ModGFnczogc3RyaW5nW10pIHtcclxuICByZXR1cm4gKHRhZ3MgfHwgW10pXHJcbiAgICAuZmlsdGVyKHRhZyA9PiB0YWcuc3RhcnRzV2l0aChcImNvdXJzZTpcIikpXHJcbiAgICAubWFwKGNvdXJzZVRhZyA9PiBjb3Vyc2VUYWcuc3Vic3RyKFwiY291cnNlOlwiLmxlbmd0aCkpO1xyXG59XHJcbiIsImltcG9ydCB7IGRiIH0gZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9kYic7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RHJhZnRJZChzY2hvb2w6IHN0cmluZywgY291cnNlSWQ6IHN0cmluZykge1xyXG4gIHJldHVybiBkYi5zY2hvb2xzLm5hbWUoc2Nob29sKS5zaW5nbGUoKSAvLyBHZXQgdGhlIHNjaG9vbCBPYnNlcnZhYmxlXHJcbiAgICAuc3dpdGNoTWFwKHNjaG9vbCA9PlxyXG4gICAgICBkYi5icmFuY2hlc1xyXG4gICAgICAgIC5oYXNFZGdlc0Zyb20oW3NjaG9vbC5vZmZpY2lhbEJyYW5jaElkXSkgLy8gVGhlIG9mZmljaWFsIGRyYWZ0IGhhcyBlZGdlcyBmcm9tIHRoZSBvZmZpY2lhbCBzY2hvb2wgYnJhbmNoXHJcbiAgICAgICAgLm5hbWUoXCJkcmFmdFwiKSAvLyBUaGVyZSBtaWdodCBiZSBvdGhlciBwZXJzb25hbCBkcmFmdHMgaW4gZnV0dXJlLiBSZXF1aXJlbWVudCBvZiB0aGUgY29tbW9uIGRyYWZ0IGlzIHRoYXQgaXQgaXMgbmFtZWQgXCJkcmFmdFwiXHJcbiAgICAgICAgLnRhZ3MoY291cnNlSWQpIC8vIEZpbmQgdGhlIG9uZSB0YWdnZWQgd2l0aCB0aGUgY291cnNlSWQuIFRoZXJlIGFyZSBzZXZlcmFsIGRyYWZ0cyAtIG9uZSBmb3IgZWFjaCBjb3Vyc2UuXHJcbiAgICAgICAgLmlkc09ubHkoKVxyXG4gICAgICAgIC5tYXAoKHtpZH0pID0+IGlkKVxyXG4gICAgICAgIC5maXJzdCgpXHJcbiAgICApO1xyXG59XHJcblxyXG4iLCJpbXBvcnQgeyBBYmlsaXR5LCBDZW50cmFsQ29udGVudCwgS25vd2xlZGdlUmVxdWlyZW1lbnQsIENvdXJzZSB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgVmFsdWUsIENvbGxlY3Rpb24sIEVtaXR0ZXIgfSBmcm9tICdrZWRiYWNrZW5kL29ic2VydmFibGUnO1xyXG5pbXBvcnQgeyBkYiB9IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvZGInO1xyXG5pbXBvcnQgeyBnZXRPcmRlcmVkRG9jcyB9IGZyb20gJy4vb3JkZXJlZC1yZXF1aXJlbWVudHMnO1xyXG5pbXBvcnQgeyBXaXRoR3JhcGhzIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuXHJcblxyXG5leHBvcnQgdHlwZSBDb3Vyc2VXaXRoUmVxdWlyZW1lbnRzID0gV2l0aEdyYXBoczxDb3Vyc2UsIFwiYWJpbGl0aWVzXCIgfCBcImNlbnRyYWxDb250ZW50XCIgfCBcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiPjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTdGFuZGFyZENvdXJzZXNXaXRoT3JkZXJlZFJlcXVpcmVtZW50cyhjb3Vyc2VDb2Rlczogc3RyaW5nW10pOiBWYWx1ZTxDb3Vyc2VXaXRoUmVxdWlyZW1lbnRzW10+IHtcclxuICBjb25zdCBjb3Vyc2VDb2RlVGFncyA9IGNvdXJzZUNvZGVzLm1hcChjb2RlID0+IGNvZGUuc3RhcnRzV2l0aCgnY291cnNlOicpID8gY29kZSA6IFwiY291cnNlOlwiICsgY29kZSk7XHJcbiAgaWYgKGNvdXJzZUNvZGVUYWdzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG5ldyBFbWl0dGVyKFtdKTtcclxuICByZXR1cm4gZGIuY291cnNlcy5pbmNsdWRlKFwiYWJpbGl0aWVzXCIsIFwiY2VudHJhbENvbnRlbnRcIiwgXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIilcclxuICAgIC50YWdzKC4uLmNvdXJzZUNvZGVUYWdzKVxyXG4gICAgLmZpbHRlcihjb3Vyc2UgPT4gY291cnNlLmlzVGVtcGxhdGUpIC8vIEJVR0JVRzogSW4gS0csIHdlIHdvdWxkIG5lZWQgdGhpcyBmaWx0ZXIsIG5vdCBLUy4gTmVlZCBhbm90aGVyIGF1dGhvcml6ZWQgd2F5IG9mIGdldHRpbmcgdGhlIHN0YW5kYXJkIGNvdXJzZSBvbmx5IVxyXG4gICAgLm1hcChjb3Vyc2UgPT4gKHtcclxuICAgICAgLi4uY291cnNlLFxyXG4gICAgICBhYmlsaXRpZXM6IGdldE9yZGVyZWREb2NzKGNvdXJzZS5hYmlsaXRpZXMsIGNvdXJzZS5hYmlsaXRpZXNPcmRlciksXHJcbiAgICAgIGNlbnRyYWxDb250ZW50OiBnZXRPcmRlcmVkRG9jcyhjb3Vyc2UuY2VudHJhbENvbnRlbnQsIGNvdXJzZS5jZW50cmFsQ29udGVudE9yZGVyKSxcclxuICAgICAga25vd2xlZGdlUmVxdWlyZW1lbnRzOiBnZXRPcmRlcmVkRG9jcyhjb3Vyc2Uua25vd2xlZGdlUmVxdWlyZW1lbnRzLCBjb3Vyc2Uua25vd2xlZGdlUmVxdWlyZW1lbnRzT3JkZXIpXHJcbiAgICB9KSkudG9WYWx1ZSgpXHJcbn1cclxuIiwiaW1wb3J0IGVudiBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBpc1RlYWNoZXJBdFNjaG9vbCB9IGZyb20gJy4uLy4uLy4uL2FjY2Vzcy1jb250cm9sJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0VtcGxveWVlKGF0U2Nob29sPzogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIGF0U2Nob29sID9cclxuICAgIGlzVGVhY2hlckF0U2Nob29sKGVudi5jdXJyZW50VXNlciwgYXRTY2hvb2wpIHx8IGVudi5jdXJyZW50VXNlci5yb2xlcy5pbmNsdWRlcyhcIkFETUlOXCIpIDpcclxuICAgIGVudi5jdXJyZW50VXNlci5yb2xlcy5zb21lKHJvbGUgPT4gcm9sZSA9PT0gJ0VNUExPWUVFJyB8fCByb2xlID09PSAnQURNSU4nKTtcclxufVxyXG4iLCJpbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudidcclxuaW1wb3J0IHsgaXNBZG1pbk9yVGVhY2hlckF0U2Nob29sIH0gZnJvbSAnLi4vLi4vLi4vYWNjZXNzLWNvbnRyb2wnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzS2VkU3RhZmYoKSB7XHJcbiAgcmV0dXJuIGlzQWRtaW5PclRlYWNoZXJBdFNjaG9vbChlbnYuY3VycmVudFVzZXIsIFwic3RhbmRhcmRcIik7XHJcbn1cclxuIiwiaW1wb3J0IHsgZGIsIGdsb2JhbElkIH0gZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9kYic7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbGlzdENvdXJzZUluc3RhbmNlcygpIHtcclxuICByZXR1cm4gZGIuY291cnNlSW5zdGFuY2VzLmhhc0VkZ2VzRnJvbShbZ2xvYmFsSWRdKTtcclxufVxyXG4iLCJpbXBvcnQgeyBDb2xsZWN0aW9uLCBFbWl0dGVyLCBWYWx1ZSB9IGZyb20gJ2tlZGJhY2tlbmQvb2JzZXJ2YWJsZSc7XHJcbmltcG9ydCB7IFRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9kYic7XHJcbmltcG9ydCB7IGZsYXR0ZW4sIGRpc3RpbmN0IH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBXaXRoR3JhcGhzIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuXHJcbi8qKiBDb3Vyc2UgKi9cclxuaW50ZXJmYWNlIE9yZGVyRGVmaW5pbmdEb2Mge1xyXG4gIGtub3dsZWRnZVJlcXVpcmVtZW50c09yZGVyPzogc3RyaW5nW10gICAvLyBDb3Vyc2VcclxuICBjZW50cmFsQ29udGVudE9yZGVyPzogc3RyaW5nW10gICAgICAgICAgLy8gQ291cnNlXHJcbiAgYWJpbGl0aWVzT3JkZXI/OiBzdHJpbmdbXSAgICAgICAgICAgICAgIC8vIENvdXJzZSArIFN1YmplY3RcclxufVxyXG5cclxuLyoqIENvdXJzZSwgQ291cnNlSW5zdGFuY2UsIFRhc2ssIExlYXJuaW5nR29hbHNDb250ZW50IG9yIENvdXJzZUJsb2NrICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmVxdWlyZW1lbnRzQ29udGFpbmluZ0RvYyB7XHJcbiAgdGFnczogc3RyaW5nW107ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvdXJzZSArIENvdXJzZUluc3RhbmNlLCBUYXNrXHJcbiAgY2VudHJhbENvbnRlbnQ/OiB7aWQ6IHN0cmluZ31bXTsgICAgICAgIC8vIENvdXJzZSArIExlYXJuaW5nR29hbHNDb250ZW50ICsgQ291cnNlQmxvY2sgKyBUYXNrXHJcbiAga25vd2xlZGdlUmVxdWlyZW1lbnRzPzoge2lkOiBzdHJpbmd9W107IC8vIENvdXJzZSArIExlYXJuaW5nR29hbHNDb250ZW50ICsgQ291cnNlQmxvY2sgKyBUYXNrXHJcbiAgYWJpbGl0aWVzPzoge2lkOiBzdHJpbmd9W107IC8vIENvdXJzZSwgTGVhcm5pbmdHb2Fsc0NvbnRlbnQsIENvdXJzZUJsb2NrLCBUYXNrXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRPcmRlcmVkRG9jczxUIGV4dGVuZHMge2lkOiBzdHJpbmd9Pihkb2NzPzogVFtdLCBvcmRlcj86IHN0cmluZ1tdLCB7YXBwZW5kTGVmdG92ZXJzfSA9IHthcHBlbmRMZWZ0b3ZlcnM6ZmFsc2V9KSB7XHJcbiAgLy8gTWFyayBkb2MgSURzIHRoYXQgd2hlcmUgcHJlc2VudCBpbiBnaXZlbiAnb3JkZXInIGFycmF5LlxyXG4gIC8vIFdpbGwgYmUgdXNlZCB0byBmaW5kIGxlZnQtb3ZlcnMgdGhhdCB3ZXJlIG5vdCBwcmVzZW50IGluIHRoZSAnb3JkZXInIGFycmF5LlxyXG4gIGNvbnN0IG1hcmtlZERvY3M6IHtbaWQ6IHN0cmluZ106IHRydWV9ID0ge307XHJcblxyXG4gIGlmICghZG9jcyB8fCAhb3JkZXIpIHtcclxuICAgIC8vIFNwZWNpYWwgY2FzZTogbm8gZG9jcyBvciBubyBvcmRlci4gRG9uJ3QgZmFpbC4gSnVzdCByZXR1cm4gZG9jcyBhcyBpcy5cclxuICAgIHJldHVybiBkb2NzO1xyXG4gIH1cclxuXHJcbiAgLy8gTWFwIGdpdmVuICdvcmRlcicgYXJyYXkgdG8gY29ycmVzcG9uZGluZyBkb2NzLiBBbHNvIG1hcmsgaW4gbWFya2VkRG9jcy5cclxuICBjb25zdCByZXN1bHQgPSAoZG9jcyAmJiBvcmRlciA/XHJcbiAgICBvcmRlci5tYXAoaWQgPT4ge1xyXG4gICAgICBtYXJrZWREb2NzW2lkXSA9IHRydWU7XHJcbiAgICAgIHJldHVybiBkb2NzLmZpbmQoZG9jID0+IGRvYy5pZCA9PT0gaWQpO1xyXG4gICAgfSkuZmlsdGVyKGRvYyA9PiAhIWRvYykgOlxyXG4gICAgZG9jcyk7XHJcblxyXG4gIGlmIChhcHBlbmRMZWZ0b3ZlcnMpIHsgICAgICBcclxuICAgIC8vIElmIGFueSBsZWZ0b3ZlcnMgYXJlIHRoZXJlLCBjb25jYXQgdGhlbSBhdCB0aGUgZW5kOlxyXG4gICAgY29uc3QgbGVmdE92ZXJzID0gZG9jcy5maWx0ZXIoZG9jID0+ICFtYXJrZWREb2NzW2RvYy5pZF0pO1xyXG4gICAgcmV0dXJuIHJlc3VsdC5jb25jYXQobGVmdE92ZXJzKTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlUmVxdWlyZW1lbnRPcmRlcjxUIGV4dGVuZHMgUmVxdWlyZW1lbnRzQ29udGFpbmluZ0RvYz4ob2JqOiBULCBvcmRlckRlZmluZXI/OiBPcmRlckRlZmluaW5nRG9jKTogVmFsdWU8VD4ge1xyXG4gIGxldCBvcmRlckRlZmluaW5nRG9jT2JzZXJ2YWJsZTogVmFsdWU8T3JkZXJEZWZpbmluZ0RvY1tdPjtcclxuICBpZiAob3JkZXJEZWZpbmVyKSB7XHJcbiAgICAvLyBVc2VyIHByb3ZpZGVkIHRoZSBvcmRlckRlZmluaW5nIGRvYyAodXNlIGNhc2UgaXMgd2hlbiBvYmogaXMgYSBDb3Vyc2Ugb3IgU3ViamVjdCwgd2hpY2ggY29udGFpbnMgaXRzIG9yZGVyIGJ5IGl0c2VsZi4gVXNlciB0aGVuIHByb3ZpZGVzIHRoZSBDb3Vyc2Ugb3IgU3ViamVjdCBpbiBib3RoIGFyZ3MpXHJcbiAgICBvcmRlckRlZmluaW5nRG9jT2JzZXJ2YWJsZSA9IG5ldyBFbWl0dGVyKFtvcmRlckRlZmluZXJdKTtcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc3QgY291cnNlQ29kZXMgPSBvYmoudGFncy5maWx0ZXIodGFnID0+IHRhZy5zdGFydHNXaXRoKFwiY291cnNlOlwiKSk7XHJcbiAgICBpZiAoY291cnNlQ29kZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiBuZXcgRW1pdHRlcihvYmopOyAvLyBObyBjb3Vyc2UgdGFncy4gTm90IHBvc3NpYmxlIHRvIHJlc29sdmUgb3JkZXIuXHJcbiAgICB9XHJcbiAgICBvcmRlckRlZmluaW5nRG9jT2JzZXJ2YWJsZSA9IGRiLmNvdXJzZXMudGFncyguLi5jb3Vyc2VDb2RlcykudG9WYWx1ZSgpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG9yZGVyRGVmaW5pbmdEb2NPYnNlcnZhYmxlLm1hcChvcmRlckhvbGRlcnMgPT4ge1xyXG4gICAgY29uc3QgYWJpbGl0aWVzT3JkZXIgPSBmbGF0dGVuKG9yZGVySG9sZGVycy5tYXAob3JkZXJIb2xkZXIgPT4gb3JkZXJIb2xkZXIuYWJpbGl0aWVzT3JkZXIgfHwgW10pKTtcclxuICAgIGNvbnN0IGNjT3JkZXIgPSBmbGF0dGVuKG9yZGVySG9sZGVycy5tYXAob3JkZXJIb2xkZXIgPT4gb3JkZXJIb2xkZXIuY2VudHJhbENvbnRlbnRPcmRlciB8fCBbXSkpO1xyXG4gICAgY29uc3Qga3JPcmRlciA9IGZsYXR0ZW4ob3JkZXJIb2xkZXJzLm1hcChvcmRlckhvbGRlciA9PiBvcmRlckhvbGRlci5rbm93bGVkZ2VSZXF1aXJlbWVudHNPcmRlciB8fCBbXSkpO1xyXG4gICAgY29uc3Qgb2JqQ2xvbmUgPSBPYmplY3QuYXNzaWduKHt9LCBvYmopO1xyXG4gICAgaWYgKG9iakNsb25lLmFiaWxpdGllcykgb2JqQ2xvbmUuYWJpbGl0aWVzID0gZ2V0T3JkZXJlZERvY3Mob2JqLmFiaWxpdGllcywgYWJpbGl0aWVzT3JkZXIpO1xyXG4gICAgaWYgKG9iakNsb25lLmNlbnRyYWxDb250ZW50KSBvYmpDbG9uZS5jZW50cmFsQ29udGVudCA9IGdldE9yZGVyZWREb2NzKG9iai5jZW50cmFsQ29udGVudCwgY2NPcmRlcik7XHJcbiAgICBpZiAob2JqQ2xvbmUua25vd2xlZGdlUmVxdWlyZW1lbnRzKSBvYmpDbG9uZS5rbm93bGVkZ2VSZXF1aXJlbWVudHMgPSBnZXRPcmRlcmVkRG9jcyhvYmoua25vd2xlZGdlUmVxdWlyZW1lbnRzLCBrck9yZGVyKTtcclxuICAgIHJldHVybiBvYmpDbG9uZTtcclxuICB9KTtcclxufVxyXG4iLCJpbXBvcnQgeyBLZWRCYWNrZW5kUmVwbyB9IGZyb20gXCJrZWRiYWNrZW5kL3JlcG9cIjtcclxuaW1wb3J0IHsgUm91dGVDb21wb25lbnRQcm9wcyB9IGZyb20gJ3JlYWN0LXJvdXRlcic7XHJcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9kYic7XHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgQ291cnNlSW5zdGFuY2UgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFB1Ymxpc2hDb3Vyc2VBcmd1bWVudHMge1xyXG4gIHNjaG9vbDogc3RyaW5nO1xyXG4gIGRyYWZ0UmVwbzogS2VkQmFja2VuZFJlcG87XHJcbiAgY291cnNlOiBDb3Vyc2VJbnN0YW5jZTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHB1Ymxpc2hDb3Vyc2Uoe3NjaG9vbCwgZHJhZnRSZXBvLCBjb3Vyc2V9OiBQdWJsaXNoQ291cnNlQXJndW1lbnRzKSB7XHJcbiAgbGV0IGRlc3RpbmF0aW9uUmVwbzogS2VkQmFja2VuZFJlcG87XHJcbiAgaWYgKHNjaG9vbCA9PT0gXCJzdGFuZGFyZFwiKSB7XHJcbiAgICAvLyBFZGl0aW5nIFN0YW5kYXJkIFNjaG9vbCBzaG91bGQgbWVyZ2UgdG8gcmVhbGl0eS5cclxuICAgIGRyYWZ0UmVwby5tZXJnZSgpO1xyXG4gICAgZGVzdGluYXRpb25SZXBvID0gZGI7XHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgLy8gRWRpdGluZyBjZXJ0YWluIHNjaG9vbCBzaG91bGQgbWVyZ2UgdG8gc2Nob29sIGJyYW5jaC5cclxuICAgIGNvbnN0IHNjaG9vbEJyYW5jaElkID0gYXdhaXQgZGIuc2Nob29scy5uYW1lKHNjaG9vbCkuc2luZ2xlKCkubWFwKHNjaG9vbCA9PiBzY2hvb2wub2ZmaWNpYWxCcmFuY2hJZCkubG9hZCgpO1xyXG4gICAgZHJhZnRSZXBvLm1lcmdlKHNjaG9vbEJyYW5jaElkKTtcclxuICAgIGRlc3RpbmF0aW9uUmVwbyA9IGRiLmJyYW5jaChzY2hvb2xCcmFuY2hJZCk7XHJcbiAgfVxyXG4gIGRlc3RpbmF0aW9uUmVwby5jb3Vyc2VJbnN0YW5jZXMudXBkYXRlKGNvdXJzZSwge1xyXG4gICAgbW9kaWZpZWREYXRlOiBEYXRlLm5vdygpLFxyXG4gICAgbW9kaWZpZWRCeToge1xyXG4gICAgICBuYW1lOiBlbnYuY3VycmVudFVzZXIuZGlzcGxheU5hbWUsXHJcbiAgICAgIHVybDogYG1haWx0bzoke2Vudi5jdXJyZW50VXNlci5tYWlsfWBcclxuICAgIH1cclxuICB9KTtcclxuICAvL2F3YWl0IGRiLnNhdmVOb3coKTtcclxuICAvL2hpc3RvcnkucHVzaChgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9L3RhYnMvJHthY3RpdmVUYWIgfHwgJyQnfWApO1xyXG59XHJcblxyXG4iLCJpbXBvcnQgeyBUYXNrLCBMZWFybmluZ0dvYWxzQ29udGVudCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgY29tcGFyZVByb3AsIGZsYXR0ZW4gfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgZ2V0T3JkZXJlZERvY3MgfSBmcm9tICcuL29yZGVyZWQtcmVxdWlyZW1lbnRzJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTb3J0ZWRUYXNrcyhjb250ZW50OiBMZWFybmluZ0dvYWxzQ29udGVudCkge1xyXG4gIHJldHVybiBnZXRPcmRlcmVkRG9jcyhjb250ZW50LnRhc2tzLCBjb250ZW50LnRhc2tPcmRlciwge2FwcGVuZExlZnRvdmVyczogdHJ1ZX0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZVVwZGF0ZWRPcmRlcjxUIGV4dGVuZHMge2lkOiBzdHJpbmd9PihcclxuICBkb2NzOiBUW10sXHJcbiAgY3VycmVudE9yZGVyOiBzdHJpbmdbXSB8IHVuZGVmaW5lZCxcclxuICBzb3VyY2U6IFQsXHJcbiAgdGFyZ2V0OiBULFxyXG4gIHBsYWNlbWVudDogJ2JlZm9yZScgfCAnYWZ0ZXInLFxyXG4gIHthcHBlbmRMZWZ0b3ZlcnN9ID0ge2FwcGVuZExlZnRvdmVyczogZmFsc2V9KSA6IHN0cmluZ1tdXHJcbntcclxuICBjb25zdCBvcmRlcmVkSWRzID0gZ2V0T3JkZXJlZERvY3MoZG9jcywgY3VycmVudE9yZGVyLCB7YXBwZW5kTGVmdG92ZXJzOiB0cnVlfSkubWFwKHQgPT4gdC5pZCk7XHJcbiAgY29uc3QgcGxhY2VCZWZvcmUgPSBwbGFjZW1lbnQgPT09ICdiZWZvcmUnO1xyXG5cclxuICBjb25zdCByZXN1bHQgPSBmbGF0dGVuKFxyXG4gICAgb3JkZXJlZElkc1xyXG4gICAgICAuZmlsdGVyKGlkID0+IGlkICE9PSBzb3VyY2UuaWQpIC8vIFJlbW92ZSBzb3VyY2UgaWRcclxuICAgICAgLm1hcChpZCA9PiBpZCAhPT0gdGFyZ2V0LmlkID9cclxuICAgICAgICAvLyBXZSdyZSBub3Qgb24gdGFyZ2V0XHJcbiAgICAgICAgaWQgOlxyXG4gICAgICAgIC8vIFdlJ3JlIG9uIHRhcmdldC4gUGxhY2UgYmVmb3JlIG9yIGFmdGVyP1xyXG4gICAgICAgIHBsYWNlQmVmb3JlID9cclxuICAgICAgICAgIFtzb3VyY2UuaWQsIGlkXSA6XHJcbiAgICAgICAgICBbaWQsIHNvdXJjZS5pZF1cclxuICAgICAgKVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IFN0cmlwR3JhcGhzLCBLZWRCYWNrZW5kUmVwbyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IENvdXJzZUluc3RhbmNlLCBDb3Vyc2VUYWIsIENvdXJzZUNvbnRlbnQsIFJpY2hUZXh0Q29udGVudCwgTGVhcm5pbmdHb2Fsc0NvbnRlbnQsIEVtYmVkZGVkSFRNTENvbnRlbnQsIFJlc291cmNlTGlzdCwgV29yZEJhbmtDb250ZW50IH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBjcmVhdGVVVUlEIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQgeyBpc0tlZFN0YWZmIH0gZnJvbSAnLi4vbG9naWMvaXMta2VkLXN0YWZmJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgY291cnNlOiBTdHJpcEdyYXBoczxDb3Vyc2VJbnN0YW5jZT47XHJcbiAgdGFiOiBTdHJpcEdyYXBoczxDb3Vyc2VUYWI+O1xyXG4gIGJyYW5jaDogS2VkQmFja2VuZFJlcG87XHJcbiAgdHlwZT86IGtleW9mIHR5cGVvZiBBRERfVElUTEVTXHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgb3BlbjogYm9vbGVhbjtcclxuICBjb250ZW50VHlwZTogc3RyaW5nO1xyXG59XHJcblxyXG5jb25zdCBDT05URU5UX1RZUEVTID0ge1xyXG4gIFwicmljaC10ZXh0XCI6IExgVGV4dHJ1dGFgLFxyXG4gIFwieW91dHViZS1tb3ZpZVwiOiBMYFlvdXR1YmUgZmlsbWAsXHJcbiAgXCJsZWFybmluZy1nb2Fsc1wiOiBMYEzDpHJhbmRlbcOlbCBvY2ggdXBwZ2lmdGVyYCxcclxuICBcInJlc291cmNlLWxpc3RcIjogTGBSZXN1cnNsaXN0YWAsXHJcbiAgXCJlbWJlZGRlZC1odG1sXCI6IExgSW5iw6RkZGFkIEhUTUxgLFxyXG4gIFwid29yZC1iYW5rXCI6IExgT3JkYmFua2BcclxufTtcclxuXHJcbmNvbnN0IEFERF9USVRMRVM6IHR5cGVvZiBDT05URU5UX1RZUEVTID0ge1xyXG4gIFwicmljaC10ZXh0XCI6IExgTMOkZ2cgdGlsbCB0ZXh0YCxcclxuICBcInlvdXR1YmUtbW92aWVcIjogTGBMw6RnZyB0aWxsIHlvdXR1YmUgZmlsbWAsXHJcbiAgXCJsZWFybmluZy1nb2Fsc1wiOiBMYEzDpGdnIHRpbGwgbMOkcmFuZGVtw6VsIG9jaCB1cHBnaWZ0ZXJgLFxyXG4gIFwicmVzb3VyY2UtbGlzdFwiOiBMYEzDpGdnIHRpbGwgcmVzdXJzbGlzdGFgLFxyXG4gIFwiZW1iZWRkZWQtaHRtbFwiOiBMYEzDpGdnIHRpbGwgaW5iw6RkZGFkIEhUTUxgLFxyXG4gIFwid29yZC1iYW5rXCI6IExgTMOkZ2cgdGlsbCBvcmRiYW5rYFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQWRkQ29udGVudEJ1dHRvbiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcclxuICBjb25zdHJ1Y3RvciAocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlciAocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgb3BlbjogZmFsc2UsXHJcbiAgICAgIGNvbnRlbnRUeXBlOiAncmljaC10ZXh0J1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZUNvbnRlbnQoKSB7XHJcbiAgICBjb25zdCB7dGFiLCBicmFuY2gsIHR5cGV9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IG5ld0NvbnRlbnQgPSB0aGlzLm5ld0NvbnRlbnQodHlwZSB8fCB0aGlzLnN0YXRlLmNvbnRlbnRUeXBlKTtcclxuICAgIGJyYW5jaC5jb3Vyc2VUYWJzLmFkZFJlbGF0ZWQodGFiLmlkLCBcImNvbnRlbnRzXCIsIG5ld0NvbnRlbnQpO1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7b3BlbjogZmFsc2V9KTtcclxuICB9XHJcblxyXG4gIG5ld0NvbnRlbnQoY29udGVudFR5cGU6IHN0cmluZykgOkNvdXJzZUNvbnRlbnR7XHJcbiAgICBzd2l0Y2ggKGNvbnRlbnRUeXBlIGFzIGtleW9mIHR5cGVvZiBDT05URU5UX1RZUEVTKSB7XHJcbiAgICAgIGNhc2UgXCJyaWNoLXRleHRcIjogcmV0dXJuIHRoaXMubmV3UmljaFRleHQoKTtcclxuICAgICAgY2FzZSBcImxlYXJuaW5nLWdvYWxzXCI6IHJldHVybiB0aGlzLm5ld0xlYXJuaW5nR29hbCgpO1xyXG4gICAgICBjYXNlIFwiZW1iZWRkZWQtaHRtbFwiOiByZXR1cm4gdGhpcy5uZXdFbWJlZGRlZEhUTUwoKTtcclxuICAgICAgY2FzZSBcIndvcmQtYmFua1wiOiByZXR1cm4gdGhpcy5uZXdXb3JkQmFuaygpO1xyXG4gICAgICBjYXNlIFwicmVzb3VyY2UtbGlzdFwiOiByZXR1cm4gdGhpcy5uZXdSZXNvdXJjZUxpc3QoKTtcclxuICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmV3V29yZEJhbmsoKTogV29yZEJhbmtDb250ZW50IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHR5cGU6ICd3b3JkLWJhbmsnLFxyXG4gICAgICB0YWdzOiBbdGhpcy5wcm9wcy5jb3Vyc2UuaWRdLFxyXG4gICAgICBpZDogY3JlYXRlVVVJRCgpLFxyXG4gICAgICBvcmRlcjogRGF0ZS5ub3coKSxcclxuICAgICAgbG9ja2VkOiB0aGlzLnByb3BzLnRhYi5sb2NrZWQsXHJcbiAgICAgIGxvY2tEZWxldGU6IGlzS2VkU3RhZmYoKSxcclxuICAgICAgaGlkZGVuOiBmYWxzZSxcclxuICAgICAgc2VsZWN0ZWRXb3JkQmFuazogbnVsbFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIG5ld1JpY2hUZXh0KCk6IFJpY2hUZXh0Q29udGVudCB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0eXBlOiBcInJpY2gtdGV4dFwiLFxyXG4gICAgICB0YWdzOiBbdGhpcy5wcm9wcy5jb3Vyc2UuaWRdLFxyXG4gICAgICBpZDogY3JlYXRlVVVJRCgpLFxyXG4gICAgICBvcmRlcjogRGF0ZS5ub3coKSxcclxuICAgICAgbG9ja2VkOiB0aGlzLnByb3BzLnRhYi5sb2NrZWQsXHJcbiAgICAgIGxvY2tEZWxldGU6IGlzS2VkU3RhZmYoKSwgLy8gQmVjYXVzZSBpZiBhIHRlYWNoZXIgd2FzIGFsbG9lZCB0byBjcmVhdGVzIHRoaXMsIHdlIG5lZWQgdG8gYWxsb3cgaGVyIHRvIGRlbGV0ZSBpdCFcclxuICAgICAgaGlkZGVuOiBmYWxzZSxcclxuICAgICAgaHRtbDogJycsXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZXdFbWJlZGRlZEhUTUwoKTogRW1iZWRkZWRIVE1MQ29udGVudCB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0eXBlOiBcImVtYmVkZGVkLWh0bWxcIixcclxuICAgICAgdGFnczogW3RoaXMucHJvcHMuY291cnNlLmlkXSxcclxuICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcclxuICAgICAgb3JkZXI6IERhdGUubm93KCksXHJcbiAgICAgIGxvY2tlZDogdGhpcy5wcm9wcy50YWIubG9ja2VkLFxyXG4gICAgICBsb2NrRGVsZXRlOiBpc0tlZFN0YWZmKCksXHJcbiAgICAgIGhpZGRlbjogZmFsc2UsXHJcbiAgICAgIGh0bWw6ICcnXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZXdMZWFybmluZ0dvYWwoKTogTGVhcm5pbmdHb2Fsc0NvbnRlbnQge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdHlwZTogXCJsZWFybmluZy1nb2Fsc1wiLFxyXG4gICAgICB0YWdzOiBbdGhpcy5wcm9wcy5jb3Vyc2UuaWRdLFxyXG4gICAgICBpZDogY3JlYXRlVVVJRCgpLFxyXG4gICAgICBsb2NrZWQ6IHRoaXMucHJvcHMudGFiLmxvY2tlZCxcclxuICAgICAgbG9ja0RlbGV0ZTogaXNLZWRTdGFmZigpLCAvLyBCZWNhdXNlIGlmIGEgdGVhY2hlciB3YXMgYWxsb2VkIHRvIGNyZWF0ZXMgdGhpcywgd2UgbmVlZCB0byBhbGxvdyBoZXIgdG8gZGVsZXRlIGl0IVxyXG4gICAgICBoaWRkZW46IGZhbHNlLFxyXG4gICAgICBoYXNDb21tb25MZWFybmluZ0dvYWxzOiB0aGlzLnByb3BzLmNvdXJzZS50eXBlID09PSAndGhlbWUtY291cnNlJyxcclxuICAgICAgY29tbW9uTGVhcm5pbmdHb2FsczogW10sXHJcbiAgICAgIG9yZGVyOiBEYXRlLm5vdygpLFxyXG4gICAgICBoaWRkZW5UYXNrczogW10sXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZXdSZXNvdXJjZUxpc3QoKTogUmVzb3VyY2VMaXN0IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHR5cGU6IFwicmVzb3VyY2UtbGlzdFwiLFxyXG4gICAgICB0YWdzOiBbdGhpcy5wcm9wcy5jb3Vyc2UuaWRdLFxyXG4gICAgICBpZDogY3JlYXRlVVVJRCgpLFxyXG4gICAgICBsb2NrZWQ6IHRoaXMucHJvcHMudGFiLmxvY2tlZCxcclxuICAgICAgbG9ja0RlbGV0ZTogaXNLZWRTdGFmZigpLFxyXG4gICAgICBvcmRlcjogRGF0ZS5ub3coKSxcclxuICAgICAgaGlkZGVuOiBmYWxzZSxcclxuICAgICAgcmVzb3VyY2VzOiBbXVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgaWYgKHRoaXMuc3RhdGUub3Blbikge1xyXG4gICAgICByZXR1cm4gPGRpdj5cclxuICAgICAgICA8c2VsZWN0IG9uQ2hhbmdlPXtldiA9PiB0aGlzLnNldFN0YXRlKHtjb250ZW50VHlwZTogZXYudGFyZ2V0LnZhbHVlfSl9PlxyXG4gICAgICAgICAge09iamVjdC5rZXlzKENPTlRFTlRfVFlQRVMpLm1hcChjb250ZW50VHlwZSA9PlxyXG4gICAgICAgICAgICA8b3B0aW9uIGtleT17Y29udGVudFR5cGV9IHZhbHVlPXtjb250ZW50VHlwZX0+XHJcbiAgICAgICAgICAgICAge0NPTlRFTlRfVFlQRVNbY29udGVudFR5cGVdfVxyXG4gICAgICAgICAgICA8L29wdGlvbj4pfVxyXG4gICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgIDxhIGNsYXNzTmFtZT1cImJ0biBwdWxsLXJpZ2h0XCIgb25DbGljaz17KCk9PnRoaXMuc2V0U3RhdGUoe29wZW46IGZhbHNlfSl9PntMYEF2YnJ5dGB9PC9hPlxyXG4gICAgICAgIDxhIGNsYXNzTmFtZT1cImJ0biBidG4tZGVmYXVsdFwiIG9uQ2xpY2s9eygpPT50aGlzLmNyZWF0ZUNvbnRlbnQoKX0+e0xgU2thcGFgfTwvYT5cclxuICAgICAgPC9kaXY+O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIDw+PGFcclxuICAgICAgY2xhc3NOYW1lPVwiYnRuXCJcclxuICAgICAgb25DbGljaz17KCk9PntcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy50eXBlKSB7XHJcbiAgICAgICAgICB0aGlzLmNyZWF0ZUNvbnRlbnQoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7b3BlbjogdHJ1ZX0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfX0+XHJcbiAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtcGx1c1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIC8+XHJcbiAgICAgICAge3RoaXMucHJvcHMudHlwZSA/IEFERF9USVRMRVNbdGhpcy5wcm9wcy50eXBlXcKgOiBMYEzDpGdnIHRpbGwgaW5uZWjDpWxsYH1cclxuICAgIDwvYT4mbmJzcDs8Lz47XHJcbiAgfVxyXG59IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBDb3Vyc2VUYWIsIENvdXJzZUluc3RhbmNlLCBSaWNoVGV4dENvbnRlbnQsIENvdXJzZUJsb2NrLCBUaGVtZUNvdXJzZVRhYiwgU3RlcENvdXJzZVRhYiB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgU3RyaXBHcmFwaHMsIFdpdGhHcmFwaHMsIEtlZEJhY2tlbmRSZXBvIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgUmVuYW1lYWJsZVRleHQgfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvcmVuYW1lYWJsZS10ZXh0JztcclxuaW1wb3J0IHsgY3JlYXRlVVVJRCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgd2l0aFJvdXRlciwgUm91dGVDb21wb25lbnRQcm9wcyB9IGZyb20gJ3JlYWN0LXJvdXRlcic7XHJcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9kYic7XHJcbmltcG9ydCB7IGlzS2VkU3RhZmYgfSBmcm9tICcuLi9sb2dpYy9pcy1rZWQtc3RhZmYnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIGV4dGVuZHMgUm91dGVDb21wb25lbnRQcm9wcyB7XHJcbiAgdHlwZTogXCJ0aGVtZS1jb3Vyc2UtdGFiXCIgfCBcInN0ZXAtY291cnNlLXRhYlwiO1xyXG4gIGNvdXJzZTogU3RyaXBHcmFwaHM8Q291cnNlSW5zdGFuY2U+O1xyXG4gIGJyYW5jaDogS2VkQmFja2VuZFJlcG87XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgZHJhZnRJZDogc3RyaW5nO1xyXG4gIGJsb2NrPzogQ291cnNlQmxvY2s7XHJcbiAgc3RlcE5vPzogbnVtYmVyO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIGVkaXRpbmdOYW1lOiBib29sZWFuO1xyXG4gIG5hbWU6IHN0cmluZztcclxufVxyXG5cclxuY2xhc3MgQWRkVGFiQnV0dG9uIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgZWRpdGluZ05hbWU6IGZhbHNlLFxyXG4gICAgICBuYW1lOiBcIlwiXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGNyZWF0ZVRhYih0YWJOYW1lOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe2VkaXRpbmdOYW1lOiBmYWxzZSwgbmFtZTogXCJcIn0pO1xyXG4gICAgY29uc3Qge3R5cGUsIGJyYW5jaCwgZHJhZnRJZCwgY291cnNlLCBzY2hvb2wsIGhpc3RvcnksIGJsb2NrLCBzdGVwTm99ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IHRhYlRlbXBsYXRlID0ge1xyXG4gICAgICBpZDogY3JlYXRlVVVJRCgpLFxyXG4gICAgICB0YWJUaXRsZTogdGFiTmFtZSwgLy8gRGVwcmVjYXRlZC4gVXNlIG5hbWUgaW5zdGVhZC5cclxuICAgICAgbmFtZTogdGFiTmFtZSxcclxuICAgICAgb3JkZXI6IERhdGUubm93KCksXHJcbiAgICAgIGxvY2tlZDogaXNLZWRTdGFmZigpID8gdHJ1ZSA6IGZhbHNlLFxyXG4gICAgICBhY2w6IFsgXCJyb2xlOlVTRVI6UlwiLCBgc2Nob29sUm9sZToke3NjaG9vbH0vRU1QTE9ZRUU6U2AgXSxcclxuICAgICAgLy9hYmlsaXRpZXNPcmRlcjogW10sXHJcbiAgICAgIC8va25vd2xlZGdlUmVxdWlyZW1lbnRzT3JkZXI6IFtdLFxyXG4gICAgICAvL2NlbnRyYWxDb250ZW50T3JkZXI6IFtdXHJcbiAgICB9O1xyXG4gICAgY29uc3QgbmV3VGFiID0gKHR5cGUgPT09ICd0aGVtZS1jb3Vyc2UtdGFiJyA/XHJcbiAgICAgIHtcclxuICAgICAgICB0eXBlOiAndGhlbWUtY291cnNlLXRhYicsXHJcbiAgICAgICAgdGFiQ2xhc3M6ICdjb250ZW50LXRhYicsXHJcbiAgICAgICAgdGFnczogW3RoaXMucHJvcHMuY291cnNlLmlkXSxcclxuICAgICAgICAuLi50YWJUZW1wbGF0ZSxcclxuICAgICAgfSBhcyBUaGVtZUNvdXJzZVRhYiA6XHJcbiAgICAgIHtcclxuICAgICAgICB0eXBlOiAnc3RlcC1jb3Vyc2UtdGFiJyxcclxuICAgICAgICB0YWJDbGFzczogJ2NvbnRlbnQtdGFiJyxcclxuICAgICAgICB0YWdzOiBbLi4uYmxvY2sudGFnc10sIC8vIENvbnRhaW5zIGJvdGggY291cnNlSWQgYW5kIGNvdXJzZTpjb3Vyc2VDb2RlXHJcbiAgICAgICAgLi4udGFiVGVtcGxhdGUsXHJcbiAgICAgICAgc3RlcE5vOiBzdGVwTm9cclxuICAgICAgfSBhcyBTdGVwQ291cnNlVGFiKTtcclxuXHJcbiAgICAvKmNvbnN0IHRvcENvbnRlbnQ6IFJpY2hUZXh0Q29udGVudCA9IHtcclxuICAgICAgdHlwZTogJ3JpY2gtdGV4dCcsXHJcbiAgICAgIGlkOiBjcmVhdGVVVUlEKCksXHJcbiAgICAgIHRhZ3M6IFt0aGlzLnByb3BzLmNvdXJzZS5pZF0sXHJcbiAgICAgIGh0bWw6IGA8aDI+JHt0YWJOYW1lfTwvaDJgLFxyXG4gICAgICBvcmRlcjogRGF0ZS5ub3coKSxcclxuICAgICAgbG9ja2VkOiB0cnVlLFxyXG4gICAgICBoaWRkZW46IGZhbHNlXHJcbiAgICB9OyovXHJcbiAgICBpZiAobmV3VGFiLnR5cGUgPT09ICdzdGVwLWNvdXJzZS10YWInKSB7XHJcbiAgICAgIGJyYW5jaC5jb3Vyc2VCbG9ja3MuYWRkUmVsYXRlZChibG9jay5pZCwgXCJ0YWJzXCIsIG5ld1RhYik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBicmFuY2guY291cnNlSW5zdGFuY2VzLmFkZFJlbGF0ZWQoY291cnNlLmlkLCBcInRhYnNcIiwgbmV3VGFiKTtcclxuICAgIH1cclxuICAgIC8vYnJhbmNoLmNvdXJzZVRhYnMuYWRkUmVsYXRlZChuZXdUYWIuaWQsIFwiY29udGVudHNcIiwgdG9wQ29udGVudCk7XHJcbiAgICBhd2FpdCBicmFuY2guc2F2ZU5vdygpO1xyXG4gICAgaGlzdG9yeS5wdXNoKGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2UuaWR9L3RhYnMvJHtuZXdUYWIuaWR9L2RyYWZ0cy8ke2RyYWZ0SWR9L2VkaXRgKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHtzY2hvb2wsIGNvdXJzZSwgYnJhbmNofSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCB7ZWRpdGluZ05hbWUsIG5hbWV9ID0gdGhpcy5zdGF0ZTtcclxuICAgIHJldHVybiA8PlxyXG4gICAgICAgIDxhXHJcbiAgICAgICAgICBvbkNsaWNrPXtlZGl0aW5nTmFtZSA/IG51bGwgOiBldiA9PiB0aGlzLnNldFN0YXRlKHtlZGl0aW5nTmFtZTogdHJ1ZSwgbmFtZTogJyd9KX0+XHJcbiAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1wbHVzXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgLz5cclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgIWVkaXRpbmdOYW1lID9cclxuICAgICAgICAgICAgICAnICcgKyBMYE55IGZsaWtgOlxyXG4gICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgICAgc3R5bGU9e3tjb2xvcjogXCJibGFja1wifX1cclxuICAgICAgICAgICAgICBhdXRvRm9jdXNcclxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17TGBGbGlrbmFtbmB9XHJcbiAgICAgICAgICAgICAgdmFsdWU9e25hbWV9XHJcbiAgICAgICAgICAgICAgc2l6ZT17MzB9XHJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2V2ID0+IHRoaXMuc2V0U3RhdGUoe25hbWU6IGV2LnRhcmdldC52YWx1ZX0pfVxyXG4gICAgICAgICAgICAgIG9uS2V5UHJlc3M9e2V2ID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChldi5rZXkgPT09ICdFbnRlcicpIHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVUYWIobmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICBvbkJsdXI9eygpPT50aGlzLnNldFN0YXRlKHtlZGl0aW5nTmFtZTogZmFsc2V9KX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgIH1cclxuICAgICAgICA8L2E+XHJcblxyXG4gICAgICAgIHsvKiAgICAgXHJcbiAgICAgICAgPFJlbmFtZWFibGVUZXh0XHJcbiAgICAgICAgICBlYWdlcj17ZmFsc2V9XHJcbiAgICAgICAgICBtYXhDaGFycz17ODB9XHJcbiAgICAgICAgICB0ZXh0PXtuYW1lfVxyXG4gICAgICAgICAgb25DaGFuZ2U9e3ZhbHVlID0+IHtcclxuICAgICAgICB9fS8+XHJcbiAgICAgICAgKi99XHJcbiAgICA8Lz47XHJcbiAgfVxyXG59XHJcbmNvbnN0IEFkZFRhYkJ1dHRvbldpdGhSb3V0ZXIgPSB3aXRoUm91dGVyKEFkZFRhYkJ1dHRvbilcclxuZXhwb3J0IHtBZGRUYWJCdXR0b25XaXRoUm91dGVyIGFzIEFkZFRhYkJ1dHRvbn07XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IExhenlDb250ZW50IH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xhenktY29udGVudCc7XHJcbmltcG9ydCB7IGRiLCBDb3Vyc2VJbnN0YW5jZXMgfSBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL2RiJztcclxuaW1wb3J0IHsgU3Bpbm5lciB9IGZyb20gJy4uLy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3NwaW5uZXInO1xyXG5pbXBvcnQgeyBSb3V0ZUNvbXBvbmVudFByb3BzLCB3aXRoUm91dGVyIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcclxuaW1wb3J0IHsgTCwgY29tcGFyZVByb3AgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IGlzVGVhY2hlckF0U2Nob29sLCBpc0FkbWluT3JUZWFjaGVyQXRTY2hvb2wsIHByZXNlcnZlSW1wZXJzb25hdGlvblF1ZXJ5IH0gZnJvbSAnLi4vLi4vLi4vYWNjZXNzLWNvbnRyb2wnO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IGdldERyYWZ0SWQgfSBmcm9tICcuLi9sb2dpYy9nZXQtZHJhZnQtaWQnO1xyXG5pbXBvcnQgeyBpc0tlZFN0YWZmIH0gZnJvbSAnLi4vbG9naWMvaXMta2VkLXN0YWZmJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyBleHRlbmRzIFJvdXRlQ29tcG9uZW50UHJvcHMge1xyXG4gIHNjaG9vbDogc3RyaW5nO1xyXG4gIGRpc3BsYXlOYW1lOiBzdHJpbmc7XHJcbiAgZHJhZnRJZDogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIG9wZW46IGJvb2xlYW47XHJcbiAgc2Nob29scz86IEFycmF5PHtpZDogc3RyaW5nLCBuYW1lOiBzdHJpbmcsIGRpc3BsYXlOYW1lOiBzdHJpbmd9PlxyXG59XHJcblxyXG5jbGFzcyBDbGlja2FibGVTY2hvb2xEaXZXaXRoUm91dGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xyXG4gIGRpdkVsZW07XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgb3BlbjogZmFsc2VcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIG9wZW4oKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtvcGVuOiB0cnVlfSk7XHJcbiAgICBpZiAoIXRoaXMuc3RhdGUuc2Nob29scykge1xyXG4gICAgICBjb25zdCBzY2hvb2xzID0gYXdhaXQgZGIuc2Nob29sc1xyXG4gICAgICAgIC50YWdzKFwicHJpbWFyeVwiKVxyXG4gICAgICAgIC5tYXAoKHtpZCwgbmFtZSwgZGlzcGxheU5hbWV9KSA9PiAoe2lkLCBuYW1lLCBkaXNwbGF5TmFtZTogZGlzcGxheU5hbWUgfHwgbmFtZSB8fCBcIjxuYW1ubMO2cz5cIn0pKVxyXG4gICAgICAgIC50b1ZhbHVlKCkubG9hZCgpO1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHtzY2hvb2xzfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe29wZW46IGZhbHNlfSk7XHJcbiAgfVxyXG4gIFxyXG4gIGFzeW5jIHNlbGVjdFNjaG9vbCAoc2Nob29sOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHttYXRjaCwgaGlzdG9yeX0gPSB0aGlzLnByb3BzOyAgICAgICAgICAgXHJcbiAgICBjb25zdCB7Y291cnNlSWQsIHRhYklkLCBkcmFmdElkLCBjb250ZW50SWQsIHRhc2tJZH0gPSBtYXRjaC5wYXJhbXMgYXMgYW55O1xyXG4gICAgY29uc3QgY2FuSW1wZXJzb25hdGUgPVxyXG4gICAgICBlbnYuY3VycmVudFVzZXIucm9sZXMuaW5jbHVkZXMoXCJBRE1JTlwiKSB8fCAgLy8gSXMgYWRtaW5cclxuICAgICAgbG9jYXRpb24uc2VhcmNoLmluY2x1ZGVzKCdyb2xlPScpOyAgICAgICAgICAvLyBTZWVtcyB0byBiZSBpbXBlcnNvbmF0ZWQgYXMgbm9uLWFkbWluIChvbmx5IGFkbWlucyBjYW4gZG8gdGhhdClcclxuXHJcbiAgICBhc3luYyBmdW5jdGlvbiBnZXRSb3V0ZSgpIHtcclxuICAgICAgY29uc3Qgb3RoZXJEcmFmdElkID0gZHJhZnRJZCAmJiBhd2FpdCBnZXREcmFmdElkKHNjaG9vbCwgY291cnNlSWQpLmxvYWQoKTtcclxuICAgICAgaWYgKHRhc2tJZCAmJiBjb250ZW50SWQgJiYgb3RoZXJEcmFmdElkICYmIChpc0FkbWluT3JUZWFjaGVyQXRTY2hvb2woZW52LmN1cnJlbnRVc2VyLCBzY2hvb2wpIHx8IGNhbkltcGVyc29uYXRlKSkge1xyXG4gICAgICAgIHJldHVybiBgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9L3RhYnMvJHt0YWJJZCB8fCBcIiRcIn0vY29udGVudHMvJHtjb250ZW50SWR9L3Rhc2tzLyR7dGFza0lkfS9kcmFmdHMvJHtvdGhlckRyYWZ0SWR9L2VkaXRgO1xyXG4gICAgICB9IGVsc2UgaWYgKHRhc2tJZCkge1xyXG4gICAgICAgIHJldHVybiBgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9L3RhYnMvJHt0YWJJZCB8fCBcIiRcIn0vdGFza3MvJHt0YXNrSWR9YDtcclxuICAgICAgfSBlbHNlIGlmIChvdGhlckRyYWZ0SWQgJiYgKGlzQWRtaW5PclRlYWNoZXJBdFNjaG9vbChlbnYuY3VycmVudFVzZXIsIHNjaG9vbCkgfHwgY2FuSW1wZXJzb25hdGUpKSB7XHJcbiAgICAgICAgcmV0dXJuIGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2VJZH0vdGFicy8ke3RhYklkIHx8wqBcIiRcIn0vZHJhZnRzLyR7b3RoZXJEcmFmdElkfS9lZGl0YDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZUlkfS90YWJzLyR7dGFiSWQgfHzCoFwiJFwifWA7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoc2Nob29sICE9PSB0aGlzLnByb3BzLnNjaG9vbCkge1xyXG4gICAgICBjb25zdCByb3V0ZSA9IGF3YWl0IGdldFJvdXRlKCk7XHJcbiAgICAgIGlmIChjYW5JbXBlcnNvbmF0ZSkge1xyXG4gICAgICAgIC8vIElmIGN1cnJlbnQgdXNlciBjYW4gaW1wZXJzb25hdGUgKGlzIGFkbWluIG9yIGlzIGFscmVhZHkgaW1wZXJzb25hdGluZyBlbXBsb3llZSBhdCBzb21lIHNjaG9vbCksXHJcbiAgICAgICAgLy8gbWFrZSBzdXJlIHRvIGltcGVyc29uYXRlIHRoZSBjb3JyZWN0IHNjaG9vbCB3aGVuIHN3aXRjaGluZyBzY2hvb2wsIHNvIHRoYXRcclxuICAgICAgICAvLyBhZG1pbnMgY2FuIGFjdCBhcyBhbiBlbXBsb3llZSBvbiB0aGF0IHNjaG9vbCB3aGVuIGxvb2tpbmcgYXQgdGhlaXIgY291cnNlcy5cclxuICAgICAgICAvLyBUaGlzIHdpbGwgbWFrZSBpdCBlYXNpZXIgZm9yIGFkbWlucyB0byB1bmRlcnN0YW5kIHdoYXQgZW1wbG95ZWVzIGF0IHRoZSBzY2hvb2xcclxuICAgICAgICAvLyBjYW4gZG8gd2l0aCB0aGUgY291cnNlc1xyXG4gICAgICAgIGNvbnN0IGJhc2VVcmwgPSBwcmVzZXJ2ZUltcGVyc29uYXRpb25RdWVyeShsb2NhdGlvbi5wYXRobmFtZSwgc2Nob29sID09PSAnc3RhbmRhcmQnID9cclxuICAgICAgICAgIHtyb2xlOiB1bmRlZmluZWQsIHNjaG9vbH0gOlxyXG4gICAgICAgICAge3JvbGU6IFwiRU1QTE9ZRUVcIiwgc2Nob29sfSk7XHJcbiAgICAgICAgbG9jYXRpb24uaHJlZiA9IGAke2Jhc2VVcmx9IyR7cm91dGV9YDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBOb3QgYW4gYWRtaW4sIGp1c3QgcmVkaXJlY3QgdG8gdGhlIHJvdXRlIGFuZCBub3JtYWwgYWNjZXNzIGNvbnRyb2wgd2lsbCBhcHBseVxyXG4gICAgICAgIGhpc3RvcnkucHVzaChyb3V0ZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuY2xvc2UoKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHtzY2hvb2wsIGRyYWZ0SWQsIGRpc3BsYXlOYW1lIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3Qge29wZW4sIHNjaG9vbHN9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICByZXR1cm4gPGRpdiB0YWJJbmRleD17MX0gc3R5bGU9e3tvdXRsaW5lOiAwfX0gb25CbHVyPXsoKT0+dGhpcy5jbG9zZSgpfT5cclxuICAgICAgeyFvcGVuID8gPD5cclxuICAgICAgICA8aDUgb25DbGljaz17KCk9PnRoaXMub3BlbigpfT57c2Nob29sICE9PSBcInN0YW5kYXJkXCIgPyAoZGlzcGxheU5hbWUgfHwgc2Nob29sKSA6IExgU3RhbmRhcmRgfTwvaDU+XHJcbiAgICAgICAge2RyYWZ0SWQgJiYgPHAgY2xhc3NOYW1lPVwicGFnZVNpZGVUZXh0XCI+e0xgQXJiZXRzdmVyc2lvbmB9PC9wPn1cclxuICAgICAgPC8+IDogIXNjaG9vbHMgP1xyXG4gICAgICAgIDxTcGlubmVyIC8+IDogPD5cclxuICAgICAgICAgIDxoNSBvbkNsaWNrPXsoKT0+dGhpcy5jbG9zZSgpfT57TGBWw6R4bGEgc2tvbGFgfTwvaDU+XHJcbiAgICAgICAgICA8dWw+XHJcbiAgICAgICAgICAgIDxsaSBvbkNsaWNrPXsoKT0+dGhpcy5zZWxlY3RTY2hvb2woXCJzdGFuZGFyZFwiKX0+e0xgU3RhbmRhcmRgfTwvbGk+XHJcbiAgICAgICAgICAgIHtzY2hvb2xzLmZpbHRlcigoe25hbWV9KSA9PiBuYW1lICE9PSAnc3RhbmRhcmQnKVxyXG4gICAgICAgICAgICAgIC5zb3J0KChhLGIpID0+IGEuZGlzcGxheU5hbWUubG9jYWxlQ29tcGFyZShiLmRpc3BsYXlOYW1lLCBbXCJzdlwiLFwiZW5cIl0pKVxyXG4gICAgICAgICAgICAgIC5tYXAoKHtpZCwgbmFtZTogc2Nob29sLCBkaXNwbGF5TmFtZX0pID0+XHJcbiAgICAgICAgICAgICAgICA8bGkga2V5PXtpZH1cclxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCk9PnRoaXMuc2VsZWN0U2Nob29sKHNjaG9vbCl9PlxyXG4gICAgICAgICAgICAgICAge2Rpc3BsYXlOYW1lfVxyXG4gICAgICAgICAgICA8L2xpPil9XHJcbiAgICAgICAgICA8L3VsPlxyXG4gICAgICAgIDwvPn1cclxuICAgICAgPC9kaXY+XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgQ2xpY2thYmxlU2Nob29sRGl2ID0gd2l0aFJvdXRlcihDbGlja2FibGVTY2hvb2xEaXZXaXRoUm91dGVyKTtcclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSAna2VkYmFja2VuZC9vYnNlcnZhYmxlJztcclxuaW1wb3J0IHsgQ291cnNlSW5zdGFuY2UsIEJyYW5jaCwgQ291cnNlQmxvY2ssIENvdXJzZVRhYiB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgV2l0aEdyYXBocywgS2VkQmFja2VuZFJlcG8gfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBDb3Vyc2VUYWJBcmVhIH0gZnJvbSAnLi9jb3Vyc2UtdGFiLWFyZWEnO1xyXG5pbXBvcnQgeyBDb3Vyc2VTZXR0aW5nc0FyZWEgfSBmcm9tICcuL2NvdXJzZS1zZXR0aW5ncy1hcmVhJztcclxuaW1wb3J0IHsgTCwgc2hvd0Vycm9yLCBjb21wYXJlUHJvcCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgRWRpdG9yRm9vdGVyQnV0dG9ucyB9IGZyb20gJy4vZWRpdG9yLWZvb3Rlci1idXR0b25zJztcclxuaW1wb3J0IHsgVHdvQ29sdW1uc1BhZ2UgfSBmcm9tICcuLi9jb21tb24vdHdvLWNvbHVtbnMtcGFnZSc7XHJcbmltcG9ydCB7IFdlZWtQbGFubmVyIH0gZnJvbSAnLi4vLi4vd2Vla3BsYW5uZXIvd2Vla3BsYW5uZXInO1xyXG5pbXBvcnQgeyBpc1RlYWNoZXJBdFNjaG9vbCB9IGZyb20gJy4uLy4uLy4uL2FjY2Vzcy1jb250cm9sJztcclxuaW1wb3J0IGVudiBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgY2ZnIGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmNmZyc7XHJcbmltcG9ydCB7IHdpdGhSb3V0ZXIsIFJvdXRlQ29tcG9uZW50UHJvcHMgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuaW1wb3J0IHsgSG9yaXpvbnRhbEl0ZW0gfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvaG9yaXpvbnRhbC1pdGVtJztcclxuaW1wb3J0IHsgQWxpZ25Ib3Jpem9udGFsIH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2FsaWduLWhvcml6b250YWwnO1xyXG5pbXBvcnQgeyBwdWJsaXNoQ291cnNlIH0gZnJvbSAnLi4vbG9naWMvcHVibGlzaC1jb3Vyc2UnO1xyXG5pbXBvcnQgeyBkYiwgQ291cnNlSW5zdGFuY2VzIH0gZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9kYic7XHJcbmltcG9ydCB7IExhenlDb250ZW50IH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xhenktY29udGVudCc7XHJcbmltcG9ydCB7IGNvbXB1dGVQcmVkZXN0aW5hdGVkSWQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IFZlcnNpb25IaXN0b3J5Qm94IH0gZnJvbSAnLi92ZXJzaW9uLWhpc3RvcnkvdmVyc2lvbi1oaXN0b3J5LWJveCc7XHJcbmltcG9ydCB7IFJlc291cmNlTGlzdFZpZXcgfSBmcm9tICcuL2NvdXJzZS1jb250ZW50cy9yZXNvdXJjZS1saXN0LXZpZXcnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIGV4dGVuZHMgUm91dGVDb21wb25lbnRQcm9wcyB7XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgY291cnNlSWQ6IHN0cmluZztcclxuICBkcmFmdElkOiBzdHJpbmc7XHJcbiAgY291cnNlOiBXaXRoR3JhcGhzPENvdXJzZUluc3RhbmNlLCBcInRhYnNcIiB8IFwiYmxvY2tzXCI+XHJcbiAgYnJhbmNoOiBLZWRCYWNrZW5kUmVwb1xyXG4gIHRhYnM6IENvdXJzZVRhYltdXHJcbiAgYWN0aXZlVGFiOiBzdHJpbmc7XHJcbiAgZWRpdE1vZGU/OiBib29sZWFuO1xyXG4gIGJsb2NrOiBDb3Vyc2VCbG9jayB8IG51bGw7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBDb3Vyc2VBcmVhID0gd2l0aFJvdXRlcigoe1xyXG4gIHNjaG9vbCxcclxuICBjb3Vyc2VJZCxcclxuICBkcmFmdElkLFxyXG4gIGNvdXJzZSxcclxuICBicmFuY2gsXHJcbiAgdGFicyxcclxuICBhY3RpdmVUYWIsXHJcbiAgZWRpdE1vZGUsXHJcbiAgaGlzdG9yeSxcclxuICBibG9ja1xyXG59OiBQcm9wcykgPT4ge1xyXG4gIGNvbnN0IHRhYiA9IHRhYnMuZmlsdGVyKHRhYiA9PiB0YWIuaWQgPT09IGFjdGl2ZVRhYilbMF0gfHwgdGFic1swXTtcclxuICB2YXIgY3VycmVudFRhYlJlc291cmNlcyA9IHRhYiAmJlxyXG4gICAgYnJhbmNoLmNvdXJzZUNvbnRlbnRzLmhhc0VkZ2VzRnJvbShbdGFiLmlkXSkuZmlsdGVyKHg9PiB4LnR5cGUgPT09IFwicmVzb3VyY2UtbGlzdFwiKS5maXJzdCgpO1xyXG5cclxuICByZXR1cm4gPFR3b0NvbHVtbnNQYWdlXHJcbiAgICByaWdodD17ZWRpdE1vZGUgJiYgZHJhZnRJZCA/XHJcbiAgICAgIC8vIEluIGVkaXQgbW9kZSwgc2hvdyB0aGUgZHJhZnQgZWRpdHMgdG8gdGhlIHJpZ2h0XHJcbiAgICAgIDxkaXY+XHJcbiAgICAgICAgPFZlcnNpb25IaXN0b3J5Qm94IGlzQWRtaW49e3NjaG9vbCA9PT0gJ3N0YW5kYXJkJ30gYnJhbmNoSWQ9e2RyYWZ0SWR9IGJyYW5jaFR5cGU9XCJkcmFmdC1icmFuY2hcIiAvPlxyXG4gICAgICA8L2Rpdj4gOlxyXG4gICAgICAvLyBJbiB2aWV3IG1vZGUsIHNob3cgV2Vla1BsYW5uZXIgdG8gdGhlIHJpZ2h0XHJcbiAgICAgIC8vIEluIHZpZXcgbW9kZSwgc2hvdyBSZXNvdXJjZXMgdG8gdGhlIHJpZ2h0XHJcbiAgICAgIDw+XHJcbiAgICAgIDxXZWVrUGxhbm5lciBlbnY9e2Vudn0gdmlld0NvdXJzZVVybD17Y2ZnLktFRF9DT1VSU0VfVklFV0VSX1VSTH0gLz5cclxuICAgICAge2N1cnJlbnRUYWJSZXNvdXJjZXMgJiYgPFJlc291cmNlTGlzdFZpZXcgY29udGVudD17Y3VycmVudFRhYlJlc291cmNlc30vPn1cclxuICAgICAgPC8+fVxyXG4gICAgcmlnaHRXaWR0aD17NX1cclxuICAgIGxlZnQ9ezw+XHJcbiAgICAgIDxDb3Vyc2VUYWJBcmVhXHJcbiAgICAgICAgc2Nob29sPXtzY2hvb2x9XHJcbiAgICAgICAgY291cnNlPXtjb3Vyc2V9XHJcbiAgICAgICAgYnJhbmNoPXticmFuY2h9XHJcbiAgICAgICAgdGFiPXt0YWJ9XHJcbiAgICAgICAgZWRpdE1vZGU9e2VkaXRNb2RlfVxyXG4gICAgICAgIGRyYWZ0SWQ9e2RyYWZ0SWR9XHJcbiAgICAgICAgYmxvY2s9e2Jsb2NrfVxyXG4gICAgICAgIGxhenlDb250ZW50cz17dGFiID9cclxuICAgICAgICAgIGJyYW5jaC5jb3Vyc2VDb250ZW50cy5pbmNsdWRlKFwidGFza3NcIikuaGFzRWRnZXNGcm9tKFt0YWIuaWRdKS50b1ZhbHVlKCkgOlxyXG4gICAgICAgICAgbmV3IEVtaXR0ZXIoW10pfVxyXG4gICAgICAgIC8+XHJcbiAgICAgIHshZWRpdE1vZGUgPyBlbnYuY3VycmVudFVzZXIucm9sZXMuaW5jbHVkZXMoXCJBRE1JTlwiKSB8fCBpc1RlYWNoZXJBdFNjaG9vbChlbnYuY3VycmVudFVzZXIsIHNjaG9vbCkgPyA8PlxyXG4gICAgICAgIDxici8+XHJcbiAgICAgICAgPGhyLz5cclxuICAgICAgICA8QWxpZ25Ib3Jpem9udGFsPlxyXG4gICAgICAgICAge2RyYWZ0SWQgJiYgPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi1sYXJnZSBidG4td2FybmluZ1wiXHJcbiAgICAgICAgICAgICAgb25DbGljaz17YXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHVibGlzaENvdXJzZSh7XHJcbiAgICAgICAgICAgICAgICAgIHNjaG9vbCxcclxuICAgICAgICAgICAgICAgICAgY291cnNlOiBjb3Vyc2UgYXMgQ291cnNlSW5zdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgIGRyYWZ0UmVwbzogZGIuYnJhbmNoKGRyYWZ0SWQpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGRiLnNhdmVOb3coKTtcclxuICAgICAgICAgICAgICAgIGhpc3RvcnkucHVzaChgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9L3RhYnMvJHt0YWIgPyB0YWIuaWQgOiAnJCd9YCk7XHJcbiAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWxnIGZhLXBsYXlcIiBhcmlhLWhpZGRlbj17dHJ1ZX0gLz4mbmJzcDtcclxuICAgICAgICAgICAgICB7TGBQdWJsaWNlcmFgfVxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuXHJcbiAgICAgICAgICA8L0hvcml6b250YWxJdGVtPn1cclxuICAgICAgICAgIDxMYXp5Q29udGVudD57XHJcbiAgICAgICAgICAgICAgQ291cnNlSW5zdGFuY2VzLmdldEJyYW5jaElkKGRiLnNjaG9vbHMubmFtZShzY2hvb2wpLnNpbmdsZSgpLCBjb3Vyc2VJZCkubWFwKGV4aXN0aW5nRHJhZnRJZCA9PiA8PlxyXG4gICAgICAgICAgICAgICAgPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi1sYXJnZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17ZXhpc3RpbmdEcmFmdElkID8gXHJcbiAgICAgICAgICAgICAgICAgICAgICAvLyBOYXZpZ2F0ZSB0byBlZGl0IGV4aXN0aW5nIGRyYWZ0XHJcbiAgICAgICAgICAgICAgICAgICAgICAoKT0+aGlzdG9yeS5wdXNoKGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2VJZH0vdGFicy8ke3RhYiA/IHRhYi5pZCA6ICckJ30vZHJhZnRzLyR7ZXhpc3RpbmdEcmFmdElkfS9lZGl0YCkgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgZHJhZnQgZm9yIHRoZSBicmFuY2ggYW5kIHRoZW4gbmF2aWdhdGUgdG8gaXRcclxuICAgICAgICAgICAgICAgICAgICAgIGFzeW5jICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2Nob29sRW50aXR5ID0gYXdhaXQgZGIuc2Nob29scy5uYW1lKHNjaG9vbCkuc2luZ2xlKCkubG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0RyYWZ0SWQgPSBhd2FpdCBjb21wdXRlUHJlZGVzdGluYXRlZElkKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nob29sRW50aXR5Lm9mZmljaWFsQnJhbmNoSWQgKyBjb3Vyc2VJZCArIFwiZHJhZnRcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0RyYWZ0QnJhbmNoRG9jOiBCcmFuY2ggPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogbmV3RHJhZnRJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjbDogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInJvbGU6VVNFUjpSXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBzY2hvb2xSb2xlOiR7c2Nob29sRW50aXR5Lm5hbWV9L0VNUExPWUVFOlNgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2RyYWZ0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjaG9vbElkOiBzY2hvb2xFbnRpdHkuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmVlUGFyZW50SWQ6IHNjaG9vbEVudGl0eS5vZmZpY2lhbEJyYW5jaElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFnczogW2NvdXJzZUlkXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGIuYnJhbmNoZXMuYWRkUmVsYXRlZChzY2hvb2xFbnRpdHkub2ZmaWNpYWxCcmFuY2hJZCwgXCJhcHByb3ZlZENoaWxkcmVuXCIsIG5ld0RyYWZ0QnJhbmNoRG9jKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBkYi5zYXZlTm93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5wdXNoKGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2VJZH0vdGFicy8ke3RhYiA/IHRhYi5pZCA6ICckJ30vZHJhZnRzLyR7bmV3RHJhZnRJZH0vZWRpdGApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dFcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAge2V4aXN0aW5nRHJhZnRJZCA/IDw+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1sZyBmYS1wZW5jaWxcIiAvPiB7ZHJhZnRJZCA/IExgRm9ydHPDpHR0IHJlZGlnZXJhYDogTGBSZWRpZ2VyYWB9XHJcbiAgICAgICAgICAgICAgICAgICAgPC8+IDogPD5cclxuICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWxnIGZhLXBsdXNcIiAvPiB7TGBTa2FwYSBza29sYW5zIHZlcnNpb24gYXYga3Vyc2VuYH1cclxuICAgICAgICAgICAgICAgICAgICA8Lz5cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvSG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgICAgICAgICB7ZHJhZnRJZCB8fCAhZXhpc3RpbmdEcmFmdElkID8gdW5kZWZpbmVkIDogPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi1sYXJnZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCk9Pmhpc3RvcnkucHVzaChgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9L3RhYnMvJHt0YWIgPyB0YWIuaWQgOiAnJCd9L2RyYWZ0cy8ke2V4aXN0aW5nRHJhZnRJZH1gKX1cclxuICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWV5ZVwiIC8+IHtMYFZpc2EgcmVkaWdlcmFkIHZlcnNpb25gfVxyXG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvSG9yaXpvbnRhbEl0ZW0+fVxyXG4gICAgICAgICAgICAgIDwvPilcclxuICAgICAgICAgIH08L0xhenlDb250ZW50PlxyXG4gICAgICAgICAge2RyYWZ0SWQgJiYgPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi1sYXJnZVwiXHJcbiAgICAgICAgICAgICAgb25DbGljaz17KCk9PntcclxuICAgICAgICAgICAgICAgIGhpc3RvcnkucHVzaChgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9L3RhYnMvJHt0YWIgPyB0YWIuaWQgOiAnJCd9YCk7XHJcbiAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWxnIGZhLWFycm93LWxlZnRcIiAvPiB7TGBBdnNsdXRhIHJlZGlnZXJpbmdgfVxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgIDwvSG9yaXpvbnRhbEl0ZW0+fVxyXG4gICAgICAgIDwvQWxpZ25Ib3Jpem9udGFsPlxyXG4gICAgICA8Lz46IHVuZGVmaW5lZCA6XHJcbiAgICAgICAgPD5cclxuICAgICAgICAgIDxici8+XHJcbiAgICAgICAgICA8aHIgLz5cclxuICAgICAgICAgIDxFZGl0b3JGb290ZXJCdXR0b25zXHJcbiAgICAgICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgICAgICBjb3Vyc2U9e2NvdXJzZSBhcyBDb3Vyc2VJbnN0YW5jZX1cclxuICAgICAgICAgICAgdGFiPXt0YWJ9XHJcbiAgICAgICAgICAgIGFjdGl2ZVRhYj17YWN0aXZlVGFifVxyXG4gICAgICAgICAgICBkcmFmdElkPXtkcmFmdElkfVxyXG4gICAgICAgICAgICBjb3Vyc2VUeXBlPXtjb3Vyc2UudHlwZX1cclxuICAgICAgICAgICAgYmxvY2tJZD17YmxvY2sgJiYgYmxvY2suaWR9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgIDwvPlxyXG4gICAgICB9XHJcbiAgICA8Lz5cclxuICB9IC8+XHJcbn0pO1xyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IENvdXJzZVRhYiwgQ291cnNlSW5zdGFuY2UsIFJpY2hUZXh0Q29udGVudCwgVGFzaywgTGVhcm5pbmdHb2Fsc0NvbnRlbnQsIFRoZW1lQ291cnNlVGFiLCBTdGVwQ291cnNlVGFiLCBDb3Vyc2VCbG9jaywgVGhlbWVDb3Vyc2VJbnN0YW5jZSwgU3RlcENvdXJzZUluc3RhbmNlIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBTdHJpcEdyYXBocywgV2l0aEdyYXBocywgS2VkQmFja2VuZFJlcG8gfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBjcmVhdGVVVUlEIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQgeyB3aXRoUm91dGVyLCBSb3V0ZUNvbXBvbmVudFByb3BzIH0gZnJvbSAncmVhY3Qtcm91dGVyJztcclxuaW1wb3J0IGVudiBmcm9tICcuLi8uLi8uLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBkYiB9IGZyb20gJy4uLy4uLy4uLy4uL2dsb2JhbHMvZGInO1xyXG5pbXBvcnQgeyBnZXRDb3Vyc2VDb2Rlc0Zyb21UYWdzIH0gZnJvbSAnLi4vLi4vbG9naWMvZ2V0LWNvdXJzZS1jb2Rlcy1mcm9tLXRhZ3MnO1xyXG5pbXBvcnQgeyBpc0tlZFN0YWZmIH0gZnJvbSAnLi4vLi4vbG9naWMvaXMta2VkLXN0YWZmJztcclxuaW1wb3J0IHsgY29tcHV0ZVRhc2tUYWdzQW5kU3ViamVjdCB9IGZyb20gJy4uLy4uL2xvZ2ljL2NvbXB1dGUtdGFzay10YWdzLWFuZC1zdWJqZWN0JztcclxuXHJcbmludGVyZmFjZSBQcm9wcyBleHRlbmRzIFJvdXRlQ29tcG9uZW50UHJvcHMge1xyXG4gIGJyYW5jaDogS2VkQmFja2VuZFJlcG87XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgY291cnNlOiBTdHJpcEdyYXBoczxDb3Vyc2VJbnN0YW5jZT47XHJcbiAgdGFiOiBTdHJpcEdyYXBoczxUaGVtZUNvdXJzZVRhYiB8IFN0ZXBDb3Vyc2VUYWI+O1xyXG4gIGRyYWZ0SWQ6IHN0cmluZztcclxuICBjb250ZW50OiBMZWFybmluZ0dvYWxzQ29udGVudDtcclxuICBibG9jaz86IENvdXJzZUJsb2NrO1xyXG4gIGxlYXJuaW5nR29hbDogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIGVkaXRpbmdOYW1lOiBib29sZWFuO1xyXG4gIG5hbWU6IHN0cmluZztcclxufVxyXG5cclxuY2xhc3MgQWRkVGFza0J1dHRvbiBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGVkaXRpbmdOYW1lOiBmYWxzZSxcclxuICAgICAgbmFtZTogXCJcIlxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBjcmVhdGVUYXNrKHRhc2tOYW1lOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe2VkaXRpbmdOYW1lOiBmYWxzZSwgbmFtZTogXCJcIn0pO1xyXG4gICAgY29uc3Qge2JyYW5jaCwgZHJhZnRJZCwgY291cnNlLCB0YWIsIHNjaG9vbCwgY29udGVudCwgaGlzdG9yeSwgYmxvY2ssIGxlYXJuaW5nR29hbH0gPSB0aGlzLnByb3BzO1xyXG4gICAgLy9jb25zdCBjb3Vyc2UgPSBhd2FpdCBkYi5jb3Vyc2VJbnN0YW5jZXMuaWQoY291cnNlSWQpLmxvYWQoKTtcclxuICAgIC8vY29uc3QgY291cnNlVmlld2VyVXJsS1MgPSBlbnYuY291cnNlVmlld2VyVXJsS1M7XHJcbiAgICBjb25zdCB7IHRhZ3MsIHN1YmplY3QgfSA9IGNvbXB1dGVUYXNrVGFnc0FuZFN1YmplY3QoY291cnNlIGFzIENvdXJzZUluc3RhbmNlLCB0YWIgYXMgQ291cnNlVGFiLCBibG9jayk7XHJcbiAgICBjb25zdCBuZXdUYXNrOiBUYXNrID0ge1xyXG4gICAgICBpZDogY3JlYXRlVVVJRCgpLFxyXG4gICAgICB0YWdzLFxyXG4gICAgICBuYW1lOiB0YXNrTmFtZSxcclxuICAgICAgYWNsOiBbIFwicm9sZTpVU0VSOlJcIiwgYHNjaG9vbFJvbGU6JHtzY2hvb2x9L0VNUExPWUVFOlNgIF0sXHJcbiAgICAgIHVybDogXCJcIixcclxuICAgICAgdGFza1R5cGU6ICd0YXNrJyxcclxuICAgICAgbGVhcm5pbmdHb2FsOiBsZWFybmluZ0dvYWwsXHJcbiAgICAgIGZ1dHVyZUFiaWxpdGllczogW10sXHJcbiAgICAgIHJlc291cmNlczogW10sXHJcbiAgICAgIHN1YmplY3RcclxuICAgIH07XHJcbiAgICBicmFuY2guY291cnNlQ29udGVudHMuYWRkUmVsYXRlZChjb250ZW50LmlkLCBcInRhc2tzXCIsIG5ld1Rhc2spO1xyXG4gICAgYXdhaXQgYnJhbmNoLnNhdmVOb3coKTtcclxuICAgIGhpc3RvcnkucHVzaChgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlLmlkfS90YWJzLyR7dGFiLmlkfS9jb250ZW50cy8ke2NvbnRlbnQuaWR9L3Rhc2tzLyR7bmV3VGFzay5pZH0vZHJhZnRzLyR7ZHJhZnRJZH0vZWRpdGApO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qge2VkaXRpbmdOYW1lLCBuYW1lfSA9IHRoaXMuc3RhdGU7XHJcbiAgICByZXR1cm4gPD5cclxuICAgICAgICA8YSBjbGFzc05hbWU9XCJidG5cIlxyXG4gICAgICAgICAgb25DbGljaz17ZWRpdGluZ05hbWUgPyBudWxsIDogZXYgPT4gdGhpcy5zZXRTdGF0ZSh7ZWRpdGluZ05hbWU6IHRydWUsIG5hbWU6ICcnfSl9PlxyXG4gICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtcGx1c1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIC8+XHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgICFlZGl0aW5nTmFtZSA/XHJcbiAgICAgICAgICAgICAgJyAnICsgKGlzS2VkU3RhZmYoKSA/IExgTMOkZ2cgdGlsbCB1cHBnaWZ0YCA6IExgTMOkZ2cgdGlsbCBlZ2VuIHVwcGdpZnRgKTpcclxuICAgICAgICAgICAgPGlucHV0XHJcbiAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxyXG4gICAgICAgICAgICAgIGF1dG9Gb2N1c1xyXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtMYFVwcGdpZnRlbnMgbmFtbmB9XHJcbiAgICAgICAgICAgICAgdmFsdWU9e25hbWV9XHJcbiAgICAgICAgICAgICAgc2l6ZT17NTB9XHJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2V2ID0+IHRoaXMuc2V0U3RhdGUoe25hbWU6IGV2LnRhcmdldC52YWx1ZX0pfVxyXG4gICAgICAgICAgICAgIG9uS2V5UHJlc3M9e2V2ID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChldi5rZXkgPT09ICdFbnRlcicpIHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVUYXNrKG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgb25CbHVyPXsoKT0+dGhpcy5zZXRTdGF0ZSh7ZWRpdGluZ05hbWU6IGZhbHNlfSl9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgPC9hPlxyXG4gICAgPC8+O1xyXG4gIH1cclxufVxyXG5jb25zdCBBZGRUYXNrQnV0dG9uV2l0aFJvdXRlciA9IHdpdGhSb3V0ZXIoQWRkVGFza0J1dHRvbilcclxuZXhwb3J0IHtBZGRUYXNrQnV0dG9uV2l0aFJvdXRlciBhcyBBZGRUYXNrQnV0dG9ufTtcclxuXHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IENvdXJzZUNvbnRlbnQsIFJlc291cmNlTGlzdCwgQ291cnNlSW5zdGFuY2UsIFJpY2hUZXh0Q29udGVudCwgTGVhcm5pbmdHb2Fsc0NvbnRlbnQsIENvdXJzZVRhYiwgQ291cnNlQmxvY2ssIEVtYmVkZGVkSFRNTENvbnRlbnQsIFdvcmRCYW5rQ29udGVudCwgU3RlcENvdXJzZUluc3RhbmNlLCBTdGVwQ291cnNlVGFiIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbywgU3RyaXBHcmFwaHMsIFdpdGhHcmFwaHMgfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBSaWNoVGV4dENvbnRlbnRCb3ggfSBmcm9tICcuL3JpY2gtdGV4dCc7XHJcbmltcG9ydCB7IExlYXJuaW5nVGFza3NDb250ZW50Qm94IH0gZnJvbSAnLi9sZWFybmluZy10YXNrcy1jb250ZW50LWJveCc7XHJcbmltcG9ydCB7IEVtYmVkZGVkSFRNTENvbnRlbnRCb3ggfSBmcm9tICcuL2VtYmVkZGVkLWh0bWwnO1xyXG5pbXBvcnQgeyBXb3JkQmFua0NvbnRlbnRCb3ggfSBmcm9tICcuL3dvcmQtYmFuay1jb250ZW50LWJveCc7XHJcbmltcG9ydCB7IFJlc291cmNlTGlzdENvbnRlbnRCb3ggfSBmcm9tICcuL3Jlc291cmNlLWxpc3QnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDb3Vyc2VDb250ZW50UHJvcHMge1xyXG4gIHJlcG86IEtlZEJhY2tlbmRSZXBvO1xyXG4gIGNvdXJzZTogU3RyaXBHcmFwaHM8Q291cnNlSW5zdGFuY2U+O1xyXG4gIGNvbnRlbnQ6IFdpdGhHcmFwaHM8Q291cnNlQ29udGVudCwgXCJ0YXNrc1wiPjtcclxuICBzaWJsaW5nQ29udGVudHM6IFdpdGhHcmFwaHM8Q291cnNlQ29udGVudCwgXCJ0YXNrc1wiPltdOyAvLyBTaWJsaW5nIGNvbnRlbnRzIGluY2x1ZGluZyBzZWxmXHJcbiAgZWRpdE1vZGU6IGJvb2xlYW47XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgY291cnNlVGFiOiBTdHJpcEdyYXBoczxDb3Vyc2VUYWI+O1xyXG4gIGRyYWZ0SWQ6IHN0cmluZztcclxuICByZXBvcnROdW1DaGFycz86IChudW1DaGFyczogbnVtYmVyKSA9PiB2b2lkO1xyXG4gIG1heENoYXJzPzogbnVtYmVyO1xyXG4gIGJsb2NrPzogQ291cnNlQmxvY2s7XHJcbn1cclxuXHJcbi8qZXhwb3J0IGNvbnN0IENvbnRlbnRCb3ggPSAoe3JlcG8sIGNvbnRlbnR9OiBDb3Vyc2VDb250ZW50UHJvcHMpPT4gKFxyXG4gIDxkaXYgY2xhc3NOYW1lPXtbXCJjb3Vyc2UtY29udGVudC1ib3hcIiwgXCJrZWRfYm94ZWRcIl0uam9pbignICcpfSBzdHlsZT17e3Bvc2l0aW9uOiAncmVsYXRpdmUnfX0+XHJcbiAgICA8Q29uY3JldGVDb21wb25lbnQgey4uLntyZXBvLCBjb250ZW50fX0gLz4gICAgXHJcbiAgICA8ZGl2IHN0eWxlPXt7cG9zaXRpb246ICdhYnNvbHV0ZScsIHRvcDogMCwgcmlnaHQ6IDB9fT5cclxuICAgICAgICB7bW9kdWxlT3JkZXJlZEluZGV4ID4gMCAmJiA8c3Bhbj5cclxuICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWFycm93LWNpcmNsZS11cCBzZWxlY3RhYmxlXCJcclxuICAgICAgICAgICAgYXJpYS1oaWRkZW49XCJ0cnVlXCJcclxuICAgICAgICAgICAgb25DbGljaz17KCk9PnRoaXMucHJvcHMub25SZW9yZGVyKC0xKX0gLz4gPC9zcGFuPn1cclxuICAgICAgICB7bW9kdWxlT3JkZXJlZEluZGV4IDwgY291cnNlLm1vZHVsZXMubGVuZ3RoIC0gMSAmJiA8c3Bhbj5cclxuICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWFycm93LWNpcmNsZS1kb3duIHNlbGVjdGFibGVcIlxyXG4gICAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxyXG4gICAgICAgICAgICBvbkNsaWNrPXsoKT0+dGhpcy5wcm9wcy5vblJlb3JkZXIoMSl9IC8+IDwvc3Bhbj59XHJcbiAgICAgICAgPFJlbW92ZUl0ZW1cclxuICAgICAgICAgIHRpdGxlPVwiVGEgYm9ydCBtb2R1bGVuXCJcclxuICAgICAgICAgIHN0eWxlPXt7ZGlzcGxheTogJ2lubGluZS1ibG9jayd9fVxyXG4gICAgICAgICAgb25DbGljaz17KCk9PmNvbmZpcm0oTGBUYSBib3J0IG1vZHVsICR7bW9kdWxlLm5hbWV9P2ApICYmIGhvc3QudXBkYXRlKHttb2R1bGVzOiB7JHNwbGljZTogW1ttb2R1bGVJbmRleCwgMV1dfX0pfSAvPlxyXG4gICAgICA8L2Rpdj4gICAgXHJcbiAgPC9kaXY+XHJcbikqL1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIENvdXJzZUNvbnRlbnRCb3goe3JlcG8sIGNvbnRlbnQsIHNpYmxpbmdDb250ZW50cywgZWRpdE1vZGUsIGNvdXJzZSwgZHJhZnRJZCwgc2Nob29sLCBjb3Vyc2VUYWIsIHJlcG9ydE51bUNoYXJzLCBtYXhDaGFycywgYmxvY2t9OiBDb3Vyc2VDb250ZW50UHJvcHMpIHtcclxuICBzd2l0Y2ggKGNvbnRlbnQudHlwZSkge1xyXG4gICAgY2FzZSBcInJpY2gtdGV4dFwiOiByZXR1cm4gPFJpY2hUZXh0Q29udGVudEJveCB7Li4ue3JlcG8sIGNvbnRlbnQ6IGNvbnRlbnQgYXMgUmljaFRleHRDb250ZW50LCBlZGl0TW9kZSwgcmVwb3J0TnVtQ2hhcnMsIG1heENoYXJzfX0gLz5cclxuICAgIGNhc2UgXCJsZWFybmluZy1nb2Fsc1wiOiByZXR1cm4gPExlYXJuaW5nVGFza3NDb250ZW50Qm94IHsuLi57XHJcbiAgICAgIHJlcG8sXHJcbiAgICAgIGNvbnRlbnQ6IGNvbnRlbnQgYXMgV2l0aEdyYXBoczxMZWFybmluZ0dvYWxzQ29udGVudCwgXCJ0YXNrc1wiPixcclxuICAgICAgZWRpdE1vZGUsXHJcbiAgICAgIGNvdXJzZSxcclxuICAgICAgZHJhZnRJZCxcclxuICAgICAgY291cnNlVGFiLFxyXG4gICAgICBzY2hvb2wsXHJcbiAgICAgIGJsb2NrfX0gLz5cclxuICAgIGNhc2UgXCJyZXNvdXJjZS1saXN0XCI6IHJldHVybiA8UmVzb3VyY2VMaXN0Q29udGVudEJveCB7Li4ue3JlcG8sIGNvbnRlbnQ6IGNvbnRlbnQgYXMgUmVzb3VyY2VMaXN0LCBlZGl0TW9kZX19IC8+XHJcbiAgICBjYXNlIFwiZW1iZWRkZWQtaHRtbFwiOiByZXR1cm4gPEVtYmVkZGVkSFRNTENvbnRlbnRCb3ggey4uLntyZXBvLCBjb250ZW50OiBjb250ZW50IGFzIEVtYmVkZGVkSFRNTENvbnRlbnQsIGVkaXRNb2RlLCByZXBvcnROdW1DaGFycywgbWF4Q2hhcnN9fSAvPlxyXG4gICAgY2FzZSBcIndvcmQtYmFua1wiOiByZXR1cm4gPFdvcmRCYW5rQ29udGVudEJveCB7Li4ue1xyXG4gICAgICByZXBvLFxyXG4gICAgICBlZGl0TW9kZSwgXHJcbiAgICAgIGNvbnRlbnQ6IGNvbnRlbnQgYXMgV29yZEJhbmtDb250ZW50LFxyXG4gICAgICBzaWJsaW5nV29yZEJhbmtzOiBzaWJsaW5nQ29udGVudHMuZmlsdGVyKGMgPT4gYy50eXBlID09PSAnd29yZC1iYW5rJyAmJiBjLmlkICE9PSBjb250ZW50LmlkKSBhcyBXb3JkQmFua0NvbnRlbnRbXSxcclxuICAgICAgY291cnNlOiBjb3Vyc2UgYXMgU3RlcENvdXJzZUluc3RhbmNlLFxyXG4gICAgICBjb3Vyc2VUYWI6IGNvdXJzZVRhYiBhcyBXaXRoR3JhcGhzPFN0ZXBDb3Vyc2VUYWIsIFwiY29udGVudHNcIj59fSAvPlxyXG4gICAgZGVmYXVsdDogcmV0dXJuIDxwPk9rw6RuZCBpbm5laMOlbGxzdHlwOiB7Y29udGVudC50eXBlfTwvcD47XHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgQ291cnNlQ29udGVudCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuXHJcbmV4cG9ydCB0eXBlIENvdXJzZUNvbnRlbnRUeXBlcyA9IENvdXJzZUNvbnRlbnRbXCJ0eXBlXCJdO1xyXG5cclxuZXhwb3J0IGNvbnN0IENPVVJTRV9DT05URU5UX1RZUEVTOiB7W3R5cGUgaW4gQ291cnNlQ29udGVudFR5cGVzXTogc3RyaW5nfSA9IHtcclxuICBcInJpY2gtdGV4dFwiOiBMYFRleHRydXRhYCxcclxuICBcInlvdXR1YmUtbW92aWVcIjogTGBZb3V0dWJlIGZpbG1gLFxyXG4gIFwibGVhcm5pbmctZ29hbHNcIjogTGBMw6RyYW5kZW3DpWwgb2NoIHVwcGdpZnRlcmAsXHJcbiAgXCJyZXNvdXJjZS1saXN0XCI6IExgUmVzdXJzbGlzdGFgLFxyXG4gIFwiZW1iZWRkZWQtaHRtbFwiOiBMYEluYsOkZGRhZCBIVE1MYCxcclxuICBcIndvcmQtYmFua1wiOiBMYE9yZGJhbmtgXHJcbn07XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEVtYmVkZGVkSFRNTENvbnRlbnQgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgaXNLZWRTdGFmZiB9IGZyb20gJy4uLy4uL2xvZ2ljL2lzLWtlZC1zdGFmZic7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHJlcG86IEtlZEJhY2tlbmRSZXBvO1xyXG4gIGNvbnRlbnQ6IEVtYmVkZGVkSFRNTENvbnRlbnQ7XHJcbiAgZWRpdE1vZGU6IGJvb2xlYW47XHJcbiAgbWF4Q2hhcnM/OiBudW1iZXI7XHJcbiAgcmVwb3J0TnVtQ2hhcnM/OiAobnVtQ2hhcnM6IG51bWJlcikgPT4gdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IEVtYmVkZGVkSFRNTENvbnRlbnRCb3ggPSAoe2NvbnRlbnQsIHJlcG8sIGVkaXRNb2RlLCByZXBvcnROdW1DaGFycywgbWF4Q2hhcnN9OiBQcm9wcykgPT5cclxuICBlZGl0TW9kZSAmJiAoIWNvbnRlbnQubG9ja2VkIHx8IGlzS2VkU3RhZmYoKSkgP1xyXG4gICAgPGRpdj5cclxuICAgICAgPGg0PntMYEluYsOkZGRhdCBtYXRlcmlhbGB9PC9oND5cclxuICAgICAgPHA+e0xgS2xpcHAgaW4gSFRNTCBrb2QgbmVkYW5gfTwvcD5cclxuICAgICAgPHRleHRhcmVhIHN0eWxlPXt7d2lkdGg6IFwiMTAwJVwiLCBoZWlnaHQ6IFwiMTAwcHhcIn19XHJcbiAgICAgICAgdmFsdWU9e2NvbnRlbnQuaHRtbH1cclxuICAgICAgICBvbkNoYW5nZT17KHt0YXJnZXQ6IHt2YWx1ZTogaHRtbH19KSA9PlxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoaHRtbC5sZW5ndGggPiBtYXhDaGFycykgcmV0dXJuO1xyXG4gICAgICAgICAgICByZXBvLmNvdXJzZUNvbnRlbnRzLnVwZGF0ZTxFbWJlZGRlZEhUTUxDb250ZW50Pihjb250ZW50LCB7aHRtbH0pO1xyXG4gICAgICAgICAgICByZXBvcnROdW1DaGFycyhodG1sLmxlbmd0aCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSAvPlxyXG4gICAgPC9kaXY+IDpcclxuICAgIDxkaXYgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IGNvbnRlbnQuaHRtbH19IC8+O1xyXG4iLCJleHBvcnQgKiBmcm9tICcuL2NvdXJzZS1jb250ZW50LXR5cGVzJztcclxuZXhwb3J0ICogZnJvbSAnLi9jb250ZW50LWJveCc7XHJcbmV4cG9ydCAqIGZyb20gJy4vcmljaC10ZXh0JztcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8sIFdpdGhHcmFwaHMsIFN0cmlwR3JhcGhzIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgTGVhcm5pbmdHb2Fsc0NvbnRlbnQsIENvdXJzZUluc3RhbmNlLCBDb3Vyc2VUYWIsIFRoZW1lQ291cnNlSW5zdGFuY2UsIENvdXJzZUJsb2NrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBMZWFybmluZ1Rhc2tzU2V0dGluZ3MgfSBmcm9tICcuL2xlYXJuaW5nLXRhc2tzLXNldHRpbmdzJztcclxuaW1wb3J0IHsgaXNLZWRTdGFmZiB9IGZyb20gJy4uLy4uL2xvZ2ljL2lzLWtlZC1zdGFmZic7XHJcbmltcG9ydCB7IExlYXJuaW5nVGFza3NXaXRoQ29tbW9uR29hbHMgfSBmcm9tICcuL2xlYXJuaW5nLXRhc2tzLXdpdGgtY29tbW9uLWdvYWxzJztcclxuaW1wb3J0IHsgTGVhcm5pbmdUYXNrc1dpdGhTZXBhcmF0ZUdvYWxzIH0gZnJvbSAnLi9sZWFybmluZy10YXNrcy13aXRoLXNlcGFyYXRlLWdvYWxzJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgcmVwbzogS2VkQmFja2VuZFJlcG87XHJcbiAgY291cnNlOiBTdHJpcEdyYXBoczxDb3Vyc2VJbnN0YW5jZT47XHJcbiAgY29udGVudDogV2l0aEdyYXBoczxMZWFybmluZ0dvYWxzQ29udGVudCwgXCJ0YXNrc1wiPjtcclxuICBlZGl0TW9kZTogYm9vbGVhbjtcclxuICBzY2hvb2w6IHN0cmluZztcclxuICBkcmFmdElkOiBzdHJpbmc7XHJcbiAgY291cnNlVGFiOiBTdHJpcEdyYXBoczxDb3Vyc2VUYWI+O1xyXG4gIGJsb2NrPzogQ291cnNlQmxvY2s7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgY29uc3QgTGVhcm5pbmdUYXNrc0NvbnRlbnRCb3ggPSAoe2NvbnRlbnQsIGVkaXRNb2RlLCByZXBvLCBjb3Vyc2UsIHNjaG9vbCwgZHJhZnRJZCwgY291cnNlVGFiLCBibG9ja306IFByb3BzKSA9PiB7XHJcbiAgY29uc3QgeyBoYXNDb21tb25MZWFybmluZ0dvYWxzLCBjb21tb25MZWFybmluZ0dvYWxzLCB0YXNrcyB9ID0gY29udGVudDtcclxuICBjb25zdCByZWZpbmVkTGVhcm5pbmdHb2FscyA9IGNvbW1vbkxlYXJuaW5nR29hbHNcclxuICAgIC5tYXAoZ29hbCA9PiBnb2FsLnRyaW0oKSkuZmlsdGVyKGdvYWwgPT4gISFnb2FsKTtcclxuICBcclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJrZWRfYm94ZWRcIj5cclxuICAgIHtlZGl0TW9kZSAmJiAoIWNvbnRlbnQubG9ja2VkIHx8IGlzS2VkU3RhZmYoKSkgP1xyXG4gICAgICA8TGVhcm5pbmdUYXNrc1NldHRpbmdzIGNvdXJzZT17Y291cnNlfSBjb250ZW50PXtjb250ZW50fSByZXBvPXtyZXBvfSB0YWI9e2NvdXJzZVRhYn0gLz46XHJcbiAgICAgIGNvdXJzZVRhYi50YWJDbGFzcyAhPT0gJ21pc3Npb24tdGFiJyA/XHJcbiAgICAgICAgPGgyPntMYEzDpHJhbmRlbcOlbCBvY2ggdXBwZ2lmdGVyYH08L2gyPiA6XHJcbiAgICAgICAgPGgyPntMYFVwcGRyYWdgfTwvaDI+XHJcbiAgICAgIH1cclxuICAgIDxociAvPlxyXG4gICAge2hhc0NvbW1vbkxlYXJuaW5nR29hbHMgJiYgY291cnNlVGFiLnRhYkNsYXNzICE9PSAnbWlzc2lvbi10YWInID9cclxuICAgICAgPExlYXJuaW5nVGFza3NXaXRoQ29tbW9uR29hbHMgey4uLntjb250ZW50LCBlZGl0TW9kZSwgcmVwbywgY291cnNlLCBzY2hvb2wsIGRyYWZ0SWQsIGNvdXJzZVRhYiwgYmxvY2ssIGxlYXJuaW5nR29hbHM6IHJlZmluZWRMZWFybmluZ0dvYWxzfX0gLz4gOlxyXG4gICAgICA8TGVhcm5pbmdUYXNrc1dpdGhTZXBhcmF0ZUdvYWxzIHsuLi57Y29udGVudCwgZWRpdE1vZGUsIHJlcG8sIGNvdXJzZSwgc2Nob29sLCBkcmFmdElkLCBjb3Vyc2VUYWIsIGJsb2NrLCBsZWFybmluZ0dvYWxzOiByZWZpbmVkTGVhcm5pbmdHb2Fsc319IC8+XHJcbiAgICB9XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IExlYXJuaW5nR29hbHNDb250ZW50LCBDb3Vyc2VJbnN0YW5jZSwgQ291cnNlVGFiIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbywgU3RyaXBHcmFwaHMgfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBBbGlnbkhvcml6b250YWwgfSBmcm9tICcuLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvYWxpZ24taG9yaXpvbnRhbCc7XHJcbmltcG9ydCB7IEhvcml6b250YWxJdGVtIH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2hvcml6b250YWwtaXRlbSc7XHJcbmltcG9ydCB7IGlzS2VkU3RhZmYgfSBmcm9tICcuLi8uLi9sb2dpYy9pcy1rZWQtc3RhZmYnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBjb3Vyc2U6IFN0cmlwR3JhcGhzPENvdXJzZUluc3RhbmNlPixcclxuICBjb250ZW50OiBMZWFybmluZ0dvYWxzQ29udGVudDtcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwbztcclxuICB0YWI6IFN0cmlwR3JhcGhzPENvdXJzZVRhYj47XHJcbn1cclxuZXhwb3J0IGNvbnN0IExlYXJuaW5nVGFza3NTZXR0aW5ncyA9ICh7dGFiLCBjb250ZW50LCByZXBvfTogUHJvcHMpID0+IDxkaXY+XHJcbiAgPGgyPnt0YWIudGFiQ2xhc3MgIT09ICdtaXNzaW9uLXRhYicgP1xyXG4gICAgTGBMw6RyYW5kZW3DpWwgb2NoIHVwcGdpZnRlcmAgOlxyXG4gICAgTGBVcHBkcmFnYH08L2gyPlxyXG4gIHtpc0tlZFN0YWZmKCkgJiYgdGFiLnRhYkNsYXNzICE9PSAnbWlzc2lvbi10YWInID8gPD5cclxuICAgIDxkaXY+PEFsaWduSG9yaXpvbnRhbD5cclxuICAgICAgPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjaGVja2VkPXtjb250ZW50Lmhhc0NvbW1vbkxlYXJuaW5nR29hbHN9XHJcbiAgICAgICAgb25DaGFuZ2U9e2V2ID0+IHJlcG8uY291cnNlQ29udGVudHMudXBkYXRlPExlYXJuaW5nR29hbHNDb250ZW50Pihjb250ZW50LCB7aGFzQ29tbW9uTGVhcm5pbmdHb2FsczogISFldi50YXJnZXQuY2hlY2tlZH0pfSAvPlxyXG4gICAgICA8L0hvcml6b250YWxJdGVtPlxyXG4gICAgICA8SG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgPHA+XHJcbiAgICAgICAgJm5ic3A7e0xgU3BlY2lmaWNlcmEgZ2VtZW5zYW1tYSBsw6RyYW5kZW3DpWwgZsO2ciBzYW10bGlnYSB1cHBnaWZ0ZXJgfVxyXG4gICAgICAgIDwvcD5cclxuICAgICAgPC9Ib3Jpem9udGFsSXRlbT5cclxuICAgIDwvQWxpZ25Ib3Jpem9udGFsPjwvZGl2PlxyXG5cclxuICAgIDxkaXY+XHJcbiAgICAgIDxwPlxyXG4gICAgICAgICAge2NvbnRlbnQuaGFzQ29tbW9uTGVhcm5pbmdHb2FscyA/XHJcbiAgICAgICAgICAgIExgQW5nZSBkZSBnZW1lbnNhbW1hIGzDpHJhbmRlbcOlbGVuLiBBbmdlIGV0dCBsw6RyYW5kZW3DpWwgcGVyIHJhZC5gIDpcclxuICAgICAgICAgICAgTGBBbmdlIGV0dCBsw6RyYW5kZW3DpWwgcGVyIHJhZC5gXHJcbiAgICAgICAgICB9XHJcbiAgICAgIDwvcD5cclxuICAgICAgICA8dGV4dGFyZWEgY2xhc3NOYW1lPVwibGVhcm5pbmctZ29hbC1ib3hcIiB2YWx1ZT17Y29udGVudC5jb21tb25MZWFybmluZ0dvYWxzLmpvaW4oJ1xcbicpfVxyXG4gICAgICAgICAgb25DaGFuZ2U9e2V2ID0+IHJlcG8uY291cnNlQ29udGVudHMudXBkYXRlPExlYXJuaW5nR29hbHNDb250ZW50Pihjb250ZW50LCB7XHJcbiAgICAgICAgICAgIGNvbW1vbkxlYXJuaW5nR29hbHM6IGV2LnRhcmdldC52YWx1ZS5zcGxpdCgnXFxuJylcclxuICAgICAgICAgIH0pfSAvPlxyXG4gICAgPC9kaXY+XHJcbiAgPC8+IDogbnVsbH1cclxuPC9kaXY+XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvLCBXaXRoR3JhcGhzLCBTdHJpcEdyYXBocyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IExlYXJuaW5nR29hbHNDb250ZW50LCBDb3Vyc2VJbnN0YW5jZSwgQ291cnNlQmxvY2ssIENvdXJzZVRhYiwgU3RlcENvdXJzZVRhYiwgVGhlbWVDb3Vyc2VUYWIsIFN0ZXBDb3Vyc2VJbnN0YW5jZSwgVGFzayB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgTCwgYXJyYXlUb0xvb2t1cCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgVGFza0xpc3QsIExlYXJuaW5nTW9kdWxlVGFzayB9IGZyb20gJy4uLy4uLy4uL2NvdXJzZS12aWV3ZXIvc3ViY29tcG9uZW50cy90YXNrLWxpc3QnO1xyXG5pbXBvcnQgeyBBZGRUYXNrQnV0dG9uIH0gZnJvbSAnLi9hZGQtdGFzay1idXR0b24nO1xyXG5pbXBvcnQgeyBTb3J0YWJsZVRhc2tMaXN0IH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL3NvcnRhYmxlLXRhc2stbGlzdCc7XHJcbmltcG9ydCB7IExpbmsgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuaW1wb3J0IHsgY29tcHV0ZVVwZGF0ZWRPcmRlciwgZ2V0U29ydGVkVGFza3MgfSBmcm9tICcuLi8uLi9sb2dpYy90YXNrLW9yZGVyJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgcmVwbzogS2VkQmFja2VuZFJlcG87XHJcbiAgY291cnNlOiBTdHJpcEdyYXBoczxDb3Vyc2VJbnN0YW5jZT47XHJcbiAgY291cnNlVGFiOiBTdHJpcEdyYXBoczxDb3Vyc2VUYWI+O1xyXG4gIGNvbnRlbnQ6IFdpdGhHcmFwaHM8TGVhcm5pbmdHb2Fsc0NvbnRlbnQsIFwidGFza3NcIj47XHJcbiAgZHJhZnRJZDogc3RyaW5nO1xyXG4gIGVkaXRNb2RlOiBib29sZWFuO1xyXG4gIGxlYXJuaW5nR29hbHM6IHN0cmluZ1tdO1xyXG4gIGJsb2NrPzogQ291cnNlQmxvY2s7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBMZWFybmluZ1Rhc2tzV2l0aENvbW1vbkdvYWxzID0gKHsgc2Nob29sLCByZXBvLCBjb250ZW50LCBkcmFmdElkLCBlZGl0TW9kZSwgY291cnNlLCBjb3Vyc2VUYWIsIGxlYXJuaW5nR29hbHMsIGJsb2NrIH06IFByb3BzKSA9PiB7XHJcbiAgY29uc3QgdGFza3MgPSBnZXRTb3J0ZWRUYXNrcyhjb250ZW50KTtcclxuICBjb25zdCBzdWJqZWN0VG9UYXNrc0xvb2t1cCA9IGFycmF5VG9Mb29rdXAodGFza3MsIHQgPT4gdC5zdWJqZWN0IHx8IFwiXCIpO1xyXG4gIGNvbnN0IHN1YmplY3QgPSBjb3Vyc2UudHlwZSA9PT0gJ3N0ZXAtY291cnNlJyA/XHJcbiAgICAoY291cnNlIGFzIFN0ZXBDb3Vyc2VJbnN0YW5jZSkuc3ViamVjdCA6XHJcbiAgICBjb3Vyc2VUYWIuc3ViamVjdDtcclxuXHJcbiAgaWYgKHN1YmplY3QgJiYgIXN1YmplY3RUb1Rhc2tzTG9va3VwW3N1YmplY3Quc3ViamVjdE5hbWVdKSB7XHJcbiAgICAvLyBNYWtlIHN1cmUgd2UgaGF2ZSBhdCBsZWFzdCBvbmUgc3ViamVjdCBoZWFkaW5nIGlmIHRhc2sgbGlzdCBpcyBlbXB0eTpcclxuICAgIHN1YmplY3RUb1Rhc2tzTG9va3VwW3N1YmplY3Quc3ViamVjdE5hbWVdID0gW107XHJcbiAgfVxyXG4gIC8vIFRPRE86IEtvbGxhIGjDpHIgb2NoIGkgbGVhcm5pbmctdGFza3Mtd2l0aC1zZXBhcmF0ZS1nb2Fscy5cclxuICAvLyAgKiBCZWjDtnZzIHN1YmplY3QtbG9va3VwP1xyXG4gIC8vICAqIEthbiB2aSBicnl0YSB2eS12YXJpYW50ZW4gZnLDpW4gZWRpdCB2YXJpYW50ZW4/IChpIGLDpWRhIGZhbGxlbj8pXHJcbiAgLy8gU2VkYW46XHJcbiAgLy8gICogSW1wbGVtZW50ZXJhIGVkaXQgdmFyaWFudGVybmEuIEzDpGdnIHRpbGwuXHJcbiAgLy8gICogSW1wbGVtZW50ZXJhIHNvcnRlcmluZyBmdW5rdGlvbmFsaXRldCBpIFNvcnRhYmxlVGFza0xpc3QuXHJcbiAgLy8gICogSSBhbGwgdnllciBhdiB0YXNrcyAoc3ViamVjdCBwbGFubmVyICsgY291cnNldmlld2VyKTogXHJcbiAgLy8gICAgKiBHw6UgaWdlbm9tIGFsbGEgdGFzayBpIGRlbiBvcmRuaW5nZW4gZG9tIHJlZGFuIMOkciBpXHJcbiAgLy8gICAgKiBcclxuICByZXR1cm4gPD5cclxuICAgIHtPYmplY3Qua2V5cyhzdWJqZWN0VG9UYXNrc0xvb2t1cCkubWFwKHN1YmplY3QgPT4ge1xyXG4gICAgICBjb25zdCB0YXNrTGlzdCA9IHN1YmplY3RUb1Rhc2tzTG9va3VwW3N1YmplY3RdO1xyXG4gICAgICBjb25zdCBsZWFybmluZ01vZHVsZVRhc2tzOiBMZWFybmluZ01vZHVsZVRhc2tbXSA9IHRhc2tMaXN0Lm1hcCh0YXNrID0+ICh7XHJcbiAgICAgICAgaWQ6IHRhc2suaWQsXHJcbiAgICAgICAgbmFtZTogdGFzay5uYW1lLFxyXG4gICAgICAgIHVybDogZWRpdE1vZGUgP1xyXG4gICAgICAgICAgYCMvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2UuaWR9L3RhYnMvJHtjb3Vyc2VUYWIuaWR9L2NvbnRlbnRzLyR7Y29udGVudC5pZH0vdGFza3MvJHt0YXNrLmlkfS9kcmFmdHMvJHtkcmFmdElkfS9lZGl0YCA6XHJcbiAgICAgICAgICBkcmFmdElkID9cclxuICAgICAgICAgICAgYCMvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2UuaWR9L3RhYnMvJHtjb3Vyc2VUYWIuaWR9L2NvbnRlbnRzLyR7Y29udGVudC5pZH0vdGFza3MvJHt0YXNrLmlkfS9kcmFmdHMvJHtkcmFmdElkfWAgOlxyXG4gICAgICAgICAgICBgIy8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZS5pZH0vdGFicy8ke2NvdXJzZVRhYi5pZH0vdGFza3MvJHt0YXNrLmlkfWAsXHJcbiAgICAgICAgY291cnNlTmFtZTogY291cnNlLm5hbWUsXHJcbiAgICAgICAgbGVhcm5pbmdHb2FsOiBzdWJqZWN0LFxyXG4gICAgICAgIHN0ZXA6IGNvdXJzZVRhYi50eXBlID09PSAnc3RlcC1jb3Vyc2UtdGFiJyA/IChjb3Vyc2VUYWIgYXMgU3RlcENvdXJzZVRhYikuc3RlcE5vIDogdW5kZWZpbmVkLFxyXG4gICAgICAgIHRhc2ssXHJcbiAgICAgICAgY291cnNlSW5mbzoge1xyXG4gICAgICAgICAgc2Nob29sLFxyXG4gICAgICAgICAgY291cnNlOiBjb3Vyc2UuaWQsXHJcbiAgICAgICAgICB0YWI6IGNvdXJzZVRhYi5pZFxyXG4gICAgICAgIH1cclxuICAgICAgfSkpO1xyXG5cclxuICAgICAgZnVuY3Rpb24gbGlua1RvVGFzayAodGFzazogVGFzaykge1xyXG4gICAgICAgIHJldHVybiBgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlLmlkfS90YWJzLyR7Y291cnNlVGFiLmlkfS9jb250ZW50cy8ke2NvbnRlbnQuaWR9L3Rhc2tzLyR7dGFzay5pZH0vZHJhZnRzLyR7ZHJhZnRJZH0vZWRpdGA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdiBrZXk9e3N1YmplY3R9PlxyXG4gICAgICAgICAgPGg1PntzdWJqZWN0fTwvaDU+XHJcbiAgICAgICAgICA8dWw+XHJcbiAgICAgICAgICAgIHtsZWFybmluZ0dvYWxzLm1hcChsZyA9PiA8bGkga2V5PXtsZ30+e2xnfTwvbGk+KX1cclxuICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgICB7IWVkaXRNb2RlID9cclxuICAgICAgICAgICAgPFRhc2tMaXN0IGxlYXJuaW5nVGFza3M9e2xlYXJuaW5nTW9kdWxlVGFza3N9IC8+IDogPD5cclxuICAgICAgICAgICAgICA8U29ydGFibGVUYXNrTGlzdFxyXG4gICAgICAgICAgICAgICAgdGFza01ldGFzPXtsZWFybmluZ01vZHVsZVRhc2tzLm1hcCgoe3Rhc2t9KSA9PiAoe3Rhc2ssIGlzVGFza093bmVyOiB0cnVlfSkpfVxyXG4gICAgICAgICAgICAgICAgcmVuZGVyRWRpdExpbms9eyh7dGFza30pID0+IDw+PExpbmsgdG89e2xpbmtUb1Rhc2sodGFzayl9IGNsYXNzTmFtZT1cImVkaXRJdGVtXCIvPiZuYnNwOzwvPn1cclxuICAgICAgICAgICAgICAgIHJlbmRlckxpbms9eyh7dGFza30pID0+IDxMaW5rIHRvPXtsaW5rVG9UYXNrKHRhc2spfT57dGFzay5uYW1lfTwvTGluaz4gfVxyXG4gICAgICAgICAgICAgICAgb25Tb3J0PXsoc291cmNlLCB0YXJnZXQsIHBsYWNlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkT3JkZXIgPSBjb21wdXRlVXBkYXRlZE9yZGVyIChcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50LnRhc2tzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQudGFza09yZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZSxcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIHthcHBlbmRMZWZ0b3ZlcnM6IHRydWV9KTtcclxuICAgICAgICAgICAgICAgICAgcmVwby5jb3Vyc2VDb250ZW50cy51cGRhdGU8TGVhcm5pbmdHb2Fsc0NvbnRlbnQ+KGNvbnRlbnQsIHt0YXNrT3JkZXI6IHVwZGF0ZWRPcmRlcn0pOyAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfX0gLz5cclxuICAgICAgICAgICAgICA8QWRkVGFza0J1dHRvblxyXG4gICAgICAgICAgICAgICAgYnJhbmNoPXtyZXBvfVxyXG4gICAgICAgICAgICAgICAgY29udGVudD17Y29udGVudH1cclxuICAgICAgICAgICAgICAgIGNvdXJzZT17Y291cnNlfVxyXG4gICAgICAgICAgICAgICAgc2Nob29sPXtzY2hvb2x9XHJcbiAgICAgICAgICAgICAgICBkcmFmdElkPXtkcmFmdElkfVxyXG4gICAgICAgICAgICAgICAgdGFiPXtjb3Vyc2VUYWJ9XHJcbiAgICAgICAgICAgICAgICBibG9jaz17YmxvY2t9XHJcbiAgICAgICAgICAgICAgICBsZWFybmluZ0dvYWw9e3N1YmplY3R9IC8+XHJcblxyXG4gICAgICAgICAgICA8Lz59XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICk7XHJcbiAgICB9KX08Lz47XHJcbn1cclxuXHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvLCBXaXRoR3JhcGhzLCBTdHJpcEdyYXBocyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IExlYXJuaW5nR29hbHNDb250ZW50LCBDb3Vyc2VJbnN0YW5jZSwgQ291cnNlQmxvY2ssIENvdXJzZVRhYiwgU3RlcENvdXJzZVRhYiwgVGhlbWVDb3Vyc2VUYWIsIFRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IEwsIGFycmF5VG9Mb29rdXAgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IFRhc2tMaXN0LCBMZWFybmluZ01vZHVsZVRhc2sgfSBmcm9tICcuLi8uLi8uLi9jb3Vyc2Utdmlld2VyL3N1YmNvbXBvbmVudHMvdGFzay1saXN0JztcclxuaW1wb3J0IHsgQWRkVGFza0J1dHRvbiB9IGZyb20gJy4vYWRkLXRhc2stYnV0dG9uJztcclxuaW1wb3J0IHsgU29ydGFibGVUYXNrTGlzdCB9IGZyb20gJy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9zb3J0YWJsZS10YXNrLWxpc3QnO1xyXG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcbmltcG9ydCB7IGNvbXB1dGVVcGRhdGVkT3JkZXIsIGdldFNvcnRlZFRhc2tzIH0gZnJvbSAnLi4vLi4vbG9naWMvdGFzay1vcmRlcic7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHNjaG9vbDogc3RyaW5nO1xyXG4gIHJlcG86IEtlZEJhY2tlbmRSZXBvO1xyXG4gIGNvdXJzZTogU3RyaXBHcmFwaHM8Q291cnNlSW5zdGFuY2U+O1xyXG4gIGNvdXJzZVRhYjogU3RyaXBHcmFwaHM8Q291cnNlVGFiPjtcclxuICBjb250ZW50OiBXaXRoR3JhcGhzPExlYXJuaW5nR29hbHNDb250ZW50LCBcInRhc2tzXCI+O1xyXG4gIGRyYWZ0SWQ6IHN0cmluZztcclxuICBlZGl0TW9kZTogYm9vbGVhbjtcclxuICBsZWFybmluZ0dvYWxzOiBzdHJpbmdbXTtcclxuICBibG9jaz86IENvdXJzZUJsb2NrO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgTGVhcm5pbmdUYXNrc1dpdGhTZXBhcmF0ZUdvYWxzID0gKHsgc2Nob29sLCByZXBvLCBjb250ZW50LCBkcmFmdElkLCBlZGl0TW9kZSwgY291cnNlLCBjb3Vyc2VUYWIsIGxlYXJuaW5nR29hbHMsIGJsb2NrIH06IFByb3BzKSA9PiB7XHJcbiAgY29uc3QgdGFza3MgPSBnZXRTb3J0ZWRUYXNrcyhjb250ZW50KTtcclxuICBjb25zdCBjYXRoZWdvcml6ZWRUYXNrczogeyBbaWQ6IHN0cmluZ106IHRydWUgfSA9IHt9O1xyXG4gIGNvbnN0IGdvYWxUb1Rhc2tzTG9va3VwID0gbGVhcm5pbmdHb2Fscy5yZWR1Y2UoKHJlcywgZ29hbCkgPT4ge1xyXG4gICAgcmVzW2dvYWxdID0gdGFza3MuZmlsdGVyKHRhc2sgPT4ge1xyXG4gICAgICBpZiAodGFzay5sZWFybmluZ0dvYWwgJiYgdGFzay5sZWFybmluZ0dvYWwuc3BsaXQoJ1xcbicpXHJcbiAgICAgICAgLm1hcChsaW5lID0+IGxpbmUudHJpbSgpLnRvTG93ZXJDYXNlKCkpXHJcbiAgICAgICAgLmluY2x1ZGVzKGdvYWwudG9Mb3dlckNhc2UoKSkpIHtcclxuICAgICAgICBjYXRoZWdvcml6ZWRUYXNrc1t0YXNrLmlkXSA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlcztcclxuICB9LCB7fSBhcyB7IFtsZzogc3RyaW5nXTogVGFza1tdIH0pO1xyXG5cclxuICBjb25zdCB1bmNhdGhlZ29yaXplZFRhc2tzID0gdGFza3MuZmlsdGVyKHQgPT4gIWNhdGhlZ29yaXplZFRhc2tzW3QuaWRdKTtcclxuICBpZiAoY291cnNlVGFiLnRhYkNsYXNzID09PSAnbWlzc2lvbi10YWInIHx8IHRhc2tzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgZ29hbFRvVGFza3NMb29rdXBbJyddID0gdW5jYXRoZWdvcml6ZWRUYXNrcztcclxuICB9IGVsc2UgaWYgKHVuY2F0aGVnb3JpemVkVGFza3MubGVuZ3RoID4gMCkge1xyXG4gICAgZ29hbFRvVGFza3NMb29rdXBbTGDDlnZlcmdyaXBhbmRlYF0gPSB1bmNhdGhlZ29yaXplZFRhc2tzO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gbGlua1RvVGFzayh0YXNrOiBUYXNrKSB7XHJcbiAgICByZXR1cm4gYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZS5pZH0vdGFicy8ke2NvdXJzZVRhYi5pZH0vY29udGVudHMvJHtjb250ZW50LmlkfS90YXNrcy8ke3Rhc2suaWR9L2RyYWZ0cy8ke2RyYWZ0SWR9L2VkaXRgO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIDw+XHJcbiAgICB7T2JqZWN0LmtleXMoZ29hbFRvVGFza3NMb29rdXApLm1hcChnb2FsID0+IHtcclxuICAgICAgY29uc3QgdGFza0xpc3QgPSBnb2FsVG9UYXNrc0xvb2t1cFtnb2FsXTtcclxuICAgICAgY29uc3QgbGVhcm5pbmdNb2R1bGVUYXNrczogTGVhcm5pbmdNb2R1bGVUYXNrW10gPSB0YXNrTGlzdC5tYXAodGFzayA9PiAoe1xyXG4gICAgICAgIGlkOiB0YXNrLmlkLFxyXG4gICAgICAgIG5hbWU6IHRhc2submFtZSxcclxuICAgICAgICB1cmw6IGVkaXRNb2RlID9cclxuICAgICAgICAgIGAjLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlLmlkfS90YWJzLyR7Y291cnNlVGFiLmlkfS9jb250ZW50cy8ke2NvbnRlbnQuaWR9L3Rhc2tzLyR7dGFzay5pZH0vZHJhZnRzLyR7ZHJhZnRJZH0vZWRpdGAgOlxyXG4gICAgICAgICAgZHJhZnRJZCA/XHJcbiAgICAgICAgICAgIGAjLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlLmlkfS90YWJzLyR7Y291cnNlVGFiLmlkfS9jb250ZW50cy8ke2NvbnRlbnQuaWR9L3Rhc2tzLyR7dGFzay5pZH0vZHJhZnRzLyR7ZHJhZnRJZH1gIDpcclxuICAgICAgICAgICAgYCMvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2UuaWR9L3RhYnMvJHtjb3Vyc2VUYWIuaWR9L3Rhc2tzLyR7dGFzay5pZH1gLFxyXG4gICAgICAgIGNvdXJzZU5hbWU6IGNvdXJzZS5uYW1lLFxyXG4gICAgICAgIGxlYXJuaW5nR29hbDogY291cnNlVGFiLnRhYkNsYXNzID09PSAnbWlzc2lvbi10YWInID8gTGBVcHBkcmFnYCA6IGdvYWwsXHJcbiAgICAgICAgc3RlcDogY291cnNlVGFiLnR5cGUgPT09ICdzdGVwLWNvdXJzZS10YWInID8gKGNvdXJzZVRhYiBhcyBTdGVwQ291cnNlVGFiKS5zdGVwTm8gOiB1bmRlZmluZWQsXHJcbiAgICAgICAgdGFzayxcclxuICAgICAgICBjb3Vyc2VJbmZvOiB7XHJcbiAgICAgICAgICBzY2hvb2wsXHJcbiAgICAgICAgICBjb3Vyc2U6IGNvdXJzZS5pZCxcclxuICAgICAgICAgIHRhYjogY291cnNlVGFiLmlkXHJcbiAgICAgICAgfVxyXG4gICAgICB9KSk7XHJcbiAgICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdiBrZXk9e2dvYWx9PlxyXG4gICAgICAgICAge2dvYWwgJiYgPGg0Pntnb2FsfTwvaDQ+fVxyXG4gICAgICAgICAgeyFlZGl0TW9kZSA/XHJcbiAgICAgICAgICAgIDxUYXNrTGlzdCBsZWFybmluZ1Rhc2tzPXtsZWFybmluZ01vZHVsZVRhc2tzfSAvPiA6XHJcbiAgICAgICAgICAgIDw+XHJcbiAgICAgICAgICAgICAgPFNvcnRhYmxlVGFza0xpc3RcclxuICAgICAgICAgICAgICAgIHRhc2tNZXRhcz17bGVhcm5pbmdNb2R1bGVUYXNrcy5tYXAoKHsgdGFzayB9KSA9PiAoeyB0YXNrLCBpc1Rhc2tPd25lcjogdHJ1ZSB9KSl9XHJcbiAgICAgICAgICAgICAgICByZW5kZXJFZGl0TGluaz17KHsgdGFzayB9KSA9PiA8PjxMaW5rIHRvPXtsaW5rVG9UYXNrKHRhc2spfSBjbGFzc05hbWU9XCJlZGl0SXRlbVwiIC8+Jm5ic3A7PC8+fVxyXG4gICAgICAgICAgICAgICAgcmVuZGVyTGluaz17KHsgdGFzayB9KSA9PiA8TGluayB0bz17bGlua1RvVGFzayh0YXNrKX0+e3Rhc2submFtZX08L0xpbms+fVxyXG4gICAgICAgICAgICAgICAgb25Tb3J0PXsoc291cmNlLCB0YXJnZXQsIHBsYWNlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkT3JkZXIgPSBjb21wdXRlVXBkYXRlZE9yZGVyKFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQudGFza3MsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudC50YXNrT3JkZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldCxcclxuICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgeyBhcHBlbmRMZWZ0b3ZlcnM6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgIHJlcG8uY291cnNlQ29udGVudHMudXBkYXRlPExlYXJuaW5nR29hbHNDb250ZW50Pihjb250ZW50LCB7IHRhc2tPcmRlcjogdXBkYXRlZE9yZGVyIH0pO1xyXG4gICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgIDxBZGRUYXNrQnV0dG9uXHJcbiAgICAgICAgICAgICAgICBicmFuY2g9e3JlcG99XHJcbiAgICAgICAgICAgICAgICBjb250ZW50PXtjb250ZW50fVxyXG4gICAgICAgICAgICAgICAgY291cnNlPXtjb3Vyc2V9XHJcbiAgICAgICAgICAgICAgICBzY2hvb2w9e3NjaG9vbH1cclxuICAgICAgICAgICAgICAgIGRyYWZ0SWQ9e2RyYWZ0SWR9XHJcbiAgICAgICAgICAgICAgICB0YWI9e2NvdXJzZVRhYn1cclxuICAgICAgICAgICAgICAgIGJsb2NrPXtibG9ja31cclxuICAgICAgICAgICAgICAgIGxlYXJuaW5nR29hbD17Z29hbH0gLz5cclxuICAgICAgICAgICAgPC8+XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICk7XHJcbiAgICB9KX08Lz47XHJcbn1cclxuXHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFN0cmlwR3JhcGhzIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgUmVzb3VyY2VMaXN0LCBDb3Vyc2VDb250ZW50IH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBWYWx1ZSB9IGZyb20gJ2tlZGJhY2tlbmQvb2JzZXJ2YWJsZSc7XHJcbmltcG9ydCB7IGxpdmVRdWVyeVZpZXcgfSBmcm9tICcuLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvbGl2ZS1xdWVyeS12aWV3JztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgICBjb250ZW50OiBWYWx1ZTxTdHJpcEdyYXBoczxDb3Vyc2VDb250ZW50Pj47XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBSZXNvdXJjZUxpc3RWaWV3ID0gbGl2ZVF1ZXJ5VmlldygoeyBjb250ZW50IH06IFByb3BzKSA9PlxyXG4gICAgY29udGVudC5tYXAoY29udGVudFJlc291cmNlcyA9PiB7XHJcbiAgICAgICAgdmFyIHJlc291cmNlTGlzdCA9IChjb250ZW50UmVzb3VyY2VzIGFzIFJlc291cmNlTGlzdCB8IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgcmV0dXJuIDxkaXY+XHJcbiAgICAgICAgICAgIHtyZXNvdXJjZUxpc3QgJiYgcmVzb3VyY2VMaXN0LnJlc291cmNlcy5sZW5ndGggPiAwICYmIDxkaXYgY2xhc3NOYW1lPVwia2VkX2JveGVkIGtwTWVudVwiPlxyXG4gICAgICAgICAgICAgICAgPGgyPlJlc3Vyc2VyPC9oMj5cclxuICAgICAgICAgICAgICAgIDxociAvPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YXNrQ29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZUxpc3QucmVzb3VyY2VzLm1hcChyZXMgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9e3Jlcy51cmx9IHRhcmdldD1cIl9ibGFua1wiPntyZXMubmFtZX08L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgfSkpXHJcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VDb250ZXh0IH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBpc0tlZFN0YWZmIH0gZnJvbSAnLi4vLi4vbG9naWMvaXMta2VkLXN0YWZmJztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8gfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBSZXNvdXJjZUxpc3QgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IERpYWxvZ3NDb250ZXh0IH0gZnJvbSAnLi4vLi4vY29tbW9uL2RpYWxvZy1jb250ZXh0JztcclxuaW1wb3J0IHsgRWRpdFJlc291cmNlIH0gZnJvbSAnLi4vLi4vLi4vY291cnNlLWJ1aWxkZXIvbW9kYWwtcGFnZXMvZWRpdC1yZXNvdXJjZSc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gICAgcmVwbzogS2VkQmFja2VuZFJlcG87XHJcbiAgICBjb250ZW50OiBSZXNvdXJjZUxpc3Q7XHJcbiAgICBlZGl0TW9kZTogYm9vbGVhbjtcclxuICB9XHJcblxyXG5leHBvcnQgY29uc3QgUmVzb3VyY2VMaXN0Q29udGVudEJveCA9ICh7IGNvbnRlbnQsIGVkaXRNb2RlLCByZXBvIH06IFByb3BzKSA9PiB7XHJcbiAgICBjb25zdCB7IHJlc291cmNlcyB9ID0gY29udGVudDtcclxuICAgIGxldCBjb250ZXh0ID0gdXNlQ29udGV4dChEaWFsb2dzQ29udGV4dCk7XHJcbiAgICByZXR1cm4gZWRpdE1vZGUgJiYgKCFjb250ZW50LmxvY2tlZCB8fCBpc0tlZFN0YWZmKCkpID9cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJrZWRfYm94ZWRcIj5cclxuICAgICAgICAgICAgICAgIDxoND57TGBSZXN1cnNlcmB9PC9oND5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFza0NvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlcy5tYXAoKHJlc291cmNlLCBpZHgpID0+IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIiBrZXk9e2lkeH0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cImVkaXRJdGVtXCIgb25DbGljaz17KCk9PiBjb250ZXh0Lm9wZW5EaWFsb2coPEVkaXRSZXNvdXJjZSB0aXRsZT1cIkVkaXQgcmVzb3VyY2VcIiByZXNvdXJjZT17cmVzb3VyY2V9IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblNhdmU9eyhyZXMpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXNbaWR4XSA9IHJlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwby5jb3Vyc2VDb250ZW50cy51cGRhdGU8UmVzb3VyY2VMaXN0Pihjb250ZW50LCB7cmVzb3VyY2VzOiBbLi4ucmVzb3VyY2VzXX0pOyBjb250ZXh0LmNsb3NlRGlhbG9nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25EZWxldGU9eygpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXMuc3BsaWNlKGlkeCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcG8uY291cnNlQ29udGVudHMudXBkYXRlPFJlc291cmNlTGlzdD4oY29udGVudCwge3Jlc291cmNlczogWy4uLnJlc291cmNlc10gfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jbG9zZURpYWxvZygpO31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz4pfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L2E+Jm5ic3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPXtyZXNvdXJjZS51cmx9PntyZXNvdXJjZS5uYW1lfTwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+ICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJidG5cIiBvbkNsaWNrID0geygpPT4gY29udGV4dC5vcGVuRGlhbG9nKDxFZGl0UmVzb3VyY2UgdGl0bGU9XCJSZXN1cnNcIiBvblNhdmU9eyhyZXNvdXJjZSkgPT4ge3JlcG8uY291cnNlQ29udGVudHMudXBkYXRlPFJlc291cmNlTGlzdD4oY29udGVudCwge3Jlc291cmNlczogWy4uLnJlc291cmNlcywgcmVzb3VyY2VdfSk7IGNvbnRleHQuY2xvc2VEaWFsb2coKTt9fS8+KX0+PGkgY2xhc3NOYW1lPVwiZmEgZmEtcGx1c1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIC8+e0xgTMOkZ2cgdGlsbCByZXN1cnNgfTwvYT5cclxuICAgICAgICAgICAgICAgIDwvZGl2PiA6IDxkaXY+PC9kaXY+ICAgICBcclxufSIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFJpY2hUZXh0Q29udGVudCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgV3lzaXd5ZyB9IGZyb20gJy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnJztcclxuaW1wb3J0IGFjdGlvbnMgZnJvbSAnLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL3d5c2l3eWcvYWN0aW9ucy1zdic7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgaXNLZWRTdGFmZiB9IGZyb20gJy4uLy4uL2xvZ2ljL2lzLWtlZC1zdGFmZic7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHJlcG86IEtlZEJhY2tlbmRSZXBvO1xyXG4gIGNvbnRlbnQ6IFJpY2hUZXh0Q29udGVudDtcclxuICBlZGl0TW9kZTogYm9vbGVhbjtcclxuICBtYXhDaGFycz86IG51bWJlcjtcclxuICByZXBvcnROdW1DaGFycz86IChudW1DaGFyczogbnVtYmVyKSA9PiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgUmljaFRleHRDb250ZW50Qm94ID0gKHtjb250ZW50LCByZXBvLCBlZGl0TW9kZSwgcmVwb3J0TnVtQ2hhcnMsIG1heENoYXJzfTogUHJvcHMpID0+IGVkaXRNb2RlID8gPGRpdj5cclxuICA8V3lzaXd5Z1xyXG4gICAgaHRtbD17Y29udGVudC5odG1sfVxyXG4gICAgZGVmYXVsdEFjdGlvbnM9e2FjdGlvbnN9XHJcbiAgICByZWFkT25seT17IWVkaXRNb2RlIHx8IChjb250ZW50LmxvY2tlZCAmJiAhaXNLZWRTdGFmZigpKSB9XHJcbiAgICByZXBvcnROdW1DaGFycz17cmVwb3J0TnVtQ2hhcnN9XHJcbiAgICBtYXhDaGFycz17bWF4Q2hhcnN9XHJcbiAgICBhY3Rpb25zPXtbXHJcbiAgICAgIFwiYm9sZFwiLFxyXG4gICAgICBcIml0YWxpY1wiLFxyXG4gICAgICBcInVuZGVybGluZVwiLFxyXG4gICAgICBcInN0cmlrZXRocm91Z2hcIixcclxuICAgICAgXCJoZWFkaW5nMlwiLFxyXG4gICAgICBcImhlYWRpbmczXCIsXHJcbiAgICAgIFwib2xpc3RcIixcclxuICAgICAgXCJ1bGlzdFwiLFxyXG4gICAgICBcIm91dGRlbnRcIixcclxuICAgICAgXCJpbmRlbnRcIixcclxuICAgICAgXCJsaW5lXCIsXHJcbiAgICAgIFwibGlua1wiLFxyXG4gICAgICBcImltYWdlXCJdfVxyXG4gICAgb25DaGFuZ2U9e2VkaXRNb2RlICYmIChodG1sID0+IHJlcG8uY291cnNlQ29udGVudHMudXBkYXRlPFJpY2hUZXh0Q29udGVudD4oY29udGVudCwge2h0bWx9KSl9IC8+XHJcblxyXG48L2Rpdj4gOiA8ZGl2PlxyXG4gIDxkaXYgY2xhc3NOYW1lPVwicmljaC10ZXh0LXJlYWRvbmx5XCIgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IGNvbnRlbnQuaHRtbH19IC8+XHJcbjwvZGl2PjtcclxuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8sIFdpdGhHcmFwaHMgfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBXb3JkQmFua0NvbnRlbnQsIFN0ZXBDb3Vyc2VJbnN0YW5jZSwgU3RlcENvdXJzZVRhYiB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgY2ZnIH0gZnJvbSAnLi4vLi4vLi4vLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuaW1wb3J0IHsgV29yZEJhbmtDb250ZW50U2V0dGluZ3MgfSBmcm9tICcuL3dvcmQtYmFuay1jb250ZW50LXNldHRpbmdzJztcclxuaW1wb3J0IHsgU3Bpbm5lciB9IGZyb20gJy4uLy4uLy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3NwaW5uZXInO1xyXG5pbXBvcnQgeyBFbGxpcHNpc0xvYWRlciB9IGZyb20gJy4uLy4uLy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL2VsbGlwc2lzLWxvYWRlcic7XHJcbmltcG9ydCB7IGlzS2VkU3RhZmYgfSBmcm9tICcuLi8uLi9sb2dpYy9pcy1rZWQtc3RhZmYnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwb1xyXG4gIGNvbnRlbnQ6IFdvcmRCYW5rQ29udGVudFxyXG4gIHNpYmxpbmdXb3JkQmFua3M6IFdvcmRCYW5rQ29udGVudFtdXHJcbiAgZWRpdE1vZGU6IGJvb2xlYW5cclxuICBjb3Vyc2U6IFN0ZXBDb3Vyc2VJbnN0YW5jZVxyXG4gIGNvdXJzZVRhYjogU3RlcENvdXJzZVRhYlxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gV29yZEJhbmtDb250ZW50Qm94KHtyZXBvLCBjb250ZW50LCBzaWJsaW5nV29yZEJhbmtzLCBlZGl0TW9kZSwgY291cnNlLCBjb3Vyc2VUYWJ9OiBQcm9wcykge1xyXG4gIGNvbnN0IHtzZWxlY3RlZFdvcmRCYW5rfSA9IGNvbnRlbnQ7XHJcbiAgY29uc3Qge3N1YmplY3ROYW1lfSA9IGNvdXJzZS5zdWJqZWN0O1xyXG4gIGNvbnN0IHtzdGVwTm99ID0gY291cnNlVGFiO1xyXG4gIGNvbnN0IGlmcmFtZVNyYyA9IHNlbGVjdGVkV29yZEJhbmsgJiYgYCR7Y2ZnLktFRF9XT1JEQkFOS1NfVVJMfT9wcmV2aWV3PXRydWUmc3ViamVjdD0ke3N1YmplY3ROYW1lfSZzdGVwPSR7c3RlcE5vfSZsaXN0PSR7c2VsZWN0ZWRXb3JkQmFuay5rZXl9YDtcclxuICBjb25zdCBbaWZyYW1lSGVpZ2h0LCBzZXRJZnJhbWVIZWlnaHRdID0gdXNlU3RhdGUoMjAwKTtcclxuICBjb25zdCBpZnJhbWVSZWYgPSB1c2VSZWY8SFRNTElGcmFtZUVsZW1lbnQ+KCk7XHJcbiAgY29uc3Qgd29yZEJhbmtzQWxyZWFkeUFkZGVkID0gc2libGluZ1dvcmRCYW5rcy5tYXAoYyA9PiBjLnNlbGVjdGVkV29yZEJhbmsgJiYgYy5zZWxlY3RlZFdvcmRCYW5rLmtleSlcclxuICAgIC5maWx0ZXIoa2V5ID0+ICEha2V5KTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpPT5zZXRJZnJhbWVIZWlnaHQoMjAwKSwgW3NlbGVjdGVkV29yZEJhbmsgJiYgc2VsZWN0ZWRXb3JkQmFuay5rZXldKTsvLyBSZXNldCBpZnJhbWUgaGVpZ2h0IHdoZW5ldmVyIHNlbGVjdGVkIHdvcmQgYmFuayBjaGFuZ2VzIGFuZCBsZXQgb25sb2FkIGZpeCBpdC5cclxuICAgIFxyXG4gIHJldHVybiA8PlxyXG4gICAge2VkaXRNb2RlICYmICghY29udGVudC5sb2NrZWQgfHwgaXNLZWRTdGFmZigpKSAmJiA8UmVhY3QuU3VzcGVuc2UgZmFsbGJhY2s9ezxFbGxpcHNpc0xvYWRlci8+fT5cclxuICAgICAgPFdvcmRCYW5rQ29udGVudFNldHRpbmdzIHsuLi57c3ViamVjdE5hbWUsIHN0ZXBObywgd29yZEJhbmtzQWxyZWFkeUFkZGVkIH19XHJcbiAgICAgICAgc2VsZWN0ZWRXb3JkQmFuaz17c2VsZWN0ZWRXb3JkQmFua31cclxuICAgICAgICBvbkNoYW5nZT17KHtuYW1lLCBrZXl9KSA9PiB7XHJcbiAgICAgICAgICByZXBvLmNvdXJzZUNvbnRlbnRzLnVwZGF0ZTxXb3JkQmFua0NvbnRlbnQ+KGNvbnRlbnQsIHtzZWxlY3RlZFdvcmRCYW5rOiB7bmFtZSwga2V5fX0pO1xyXG4gICAgICAgIH19XHJcbiAgICAgIC8+XHJcbiAgICA8L1JlYWN0LlN1c3BlbnNlPn1cclxuICAgIHtzZWxlY3RlZFdvcmRCYW5rICYmIFxyXG4gICAgICA8aWZyYW1lXHJcbiAgICAgICAgcmVmPXtpZnJhbWVSZWZ9XHJcbiAgICAgICAgc2Nyb2xsaW5nPVwibm9cIlxyXG4gICAgICAgIGZyYW1lQm9yZGVyPVwiMFwiXHJcbiAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIixcclxuICAgICAgICAgIGhlaWdodDogaWZyYW1lSGVpZ2h0LFxyXG4gICAgICAgICAgcGFkZGluZzogMCxcclxuICAgICAgICAgIG1hcmdpbjogMFxyXG4gICAgICAgIH19XHJcbiAgICAgICAgc3JjPXtpZnJhbWVTcmN9XHJcbiAgICAgICAgb25Mb2FkPXsoKT0+e1xyXG4gICAgICAgICAgc2V0SWZyYW1lSGVpZ2h0KGlmcmFtZVJlZi5jdXJyZW50LmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQpO1xyXG4gICAgICAgIH19IC8+XHJcbiAgICB9XHJcbiAgPC8+O1xyXG59XHJcblxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBjZmcgfSBmcm9tICcuLi8uLi8uLi8uLi9nbG9iYWxzL0tFRC5jZmcnO1xyXG5pbXBvcnQgdXNlRmV0Y2ggZnJvbSAnZmV0Y2gtc3VzcGVuc2UnO1xyXG5pbXBvcnQgeyBDaGVja2xpc3QgfSBmcm9tICcuLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvY2hlY2tsaXN0JztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IFNlbGVjdCBmcm9tICdyZWFjdC1zZWxlY3QnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBzdWJqZWN0TmFtZTogc3RyaW5nXHJcbiAgc3RlcE5vOiBudW1iZXJcclxuICBzZWxlY3RlZFdvcmRCYW5rPzoge25hbWU6IHN0cmluZywga2V5OiBzdHJpbmd9XHJcbiAgd29yZEJhbmtzQWxyZWFkeUFkZGVkPzogc3RyaW5nW11cclxuICBvbkNoYW5nZTogKHdvcmRCYW5rOiB7bmFtZTogc3RyaW5nLCBrZXk6IHN0cmluZ30pID0+IHZvaWRcclxufVxyXG5cclxuaW50ZXJmYWNlIEF2YWlsYWJsZVdvcmRCYW5rIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBvcmRlcjogc3RyaW5nO1xyXG4gIHVybDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gV29yZEJhbmtDb250ZW50U2V0dGluZ3MgKHtzdWJqZWN0TmFtZSwgc3RlcE5vLCBzZWxlY3RlZFdvcmRCYW5rLCB3b3JkQmFua3NBbHJlYWR5QWRkZWQsIG9uQ2hhbmdlfTogUHJvcHMpIHtcclxuICBjb25zdCBhcGlVcmwgPSBgJHtjZmcuS0VEX0VOVU1fV09SREJBTktTX1VSTH0/c3YuY29udGVudHR5cGU9YXBwbGljYXRpb24vanNvbiZzdWJqZWN0PSR7c3ViamVjdE5hbWV9JnN0ZXA9JHtzdGVwTm99YDtcclxuICBsZXQgYXZhaWxhYmxlV29yZEJhbmtzID0gdXNlRmV0Y2goYXBpVXJsKSBhcyBBdmFpbGFibGVXb3JkQmFua1tdO1xyXG5cclxuICAvLyBGaWx0ZXIgb3V0IHdvcmQgYmFua3MgdGhhdCB3YXMgYWxyZWFkeSBhZGRlZCB0byB0aGUgc2FtZSB0YWJcclxuICBhdmFpbGFibGVXb3JkQmFua3MgPSBhdmFpbGFibGVXb3JkQmFua3MuZmlsdGVyKCh7b3JkZXJ9KSA9PlxyXG4gICAgKHNlbGVjdGVkV29yZEJhbmsgJiYgb3JkZXIgPT09IHNlbGVjdGVkV29yZEJhbmsua2V5KSB8fFxyXG4gICAgIXdvcmRCYW5rc0FscmVhZHlBZGRlZCB8fFxyXG4gICAgIXdvcmRCYW5rc0FscmVhZHlBZGRlZC5pbmNsdWRlcyhvcmRlcikpO1xyXG4gIFxyXG4gIHJldHVybiA8ZGl2PlxyXG4gICAgPGgzPntzZWxlY3RlZFdvcmRCYW5rID8gc2VsZWN0ZWRXb3JkQmFuay5uYW1lIDogTGBWw6RsaiBvcmRiYW5rYH08L2gzPlxyXG4gICAgPFNlbGVjdFxyXG4gICAgICBpc011bHRpPXtmYWxzZX1cclxuICAgICAgcGxhY2Vob2xkZXI9e0xgVsOkbGogYmxhbmQgb3JkYmFua2VyIGbDtnIgJHtzdWJqZWN0TmFtZX0sIHN0ZWcgJHtzdGVwTm99YH1cclxuICAgICAgbm9PcHRpb25zTWVzc2FnZT17KCk9PkxgS3VuZGUgaW50ZSBoaXR0YSB0aWxsZ8OkbmdsaWdhIG9yZGJhbmtlciBmw7ZyICR7c3ViamVjdE5hbWV9LCBzdGVnICR7c3RlcE5vfWB9XHJcbiAgICAgIG9wdGlvbnM9e2F2YWlsYWJsZVdvcmRCYW5rcy5tYXAoKHtuYW1lLCBpZCwgb3JkZXIsIHVybH0pID0+ICh7bGFiZWw6IG5hbWUsIHZhbHVlOiBvcmRlcn0pKX1cclxuICAgICAgdmFsdWU9e3NlbGVjdGVkV29yZEJhbmsgJiYge2xhYmVsOiBzZWxlY3RlZFdvcmRCYW5rLm5hbWUsIHZhbHVlOiBzZWxlY3RlZFdvcmRCYW5rLmtleX19XHJcbiAgICAgIG9uQ2hhbmdlPXsob3B0aW9uOiB7bGFiZWw6IHN0cmluZywgdmFsdWU6IHN0cmluZ30pID0+IG9uQ2hhbmdlKHtuYW1lOiBvcHRpb24ubGFiZWwsIGtleTogb3B0aW9uLnZhbHVlfSl9IC8+XHJcbiAgPC9kaXY+O1xyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgVmFsdWUsIEVtaXR0ZXIgfSBmcm9tICdrZWRiYWNrZW5kL29ic2VydmFibGUnO1xyXG5pbXBvcnQgeyBDb3Vyc2VDb250ZW50LCBDb3Vyc2VJbnN0YW5jZSwgVGhlbWVDb3Vyc2VJbnN0YW5jZSwgVGhlbWVDb3Vyc2VUYWIsIENvdXJzZVRhYiwgQ291cnNlQmxvY2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IGxpdmVRdWVyeVZpZXcgfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvbGl2ZS1xdWVyeS12aWV3JztcclxuaW1wb3J0IHsgY29tcGFyZVByb3AsIEwgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvLCBXaXRoR3JhcGhzLCBTdHJpcEdyYXBocyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IEFkZENvbnRlbnRCdXR0b24gfSBmcm9tICcuL2FkZC1jb250ZW50LWJ1dHRvbic7XHJcbmltcG9ydCB7IENvdXJzZUNvbnRlbnRCb3gsIENPVVJTRV9DT05URU5UX1RZUEVTIH0gZnJvbSAnLi9jb3Vyc2UtY29udGVudHMnO1xyXG5pbXBvcnQgeyBSZW1vdmVJdGVtIH0gZnJvbSAnLi4vLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvcmVtb3ZlLWl0ZW0nO1xyXG5pbXBvcnQgeyBBbGlnbkhvcml6b250YWwgfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvYWxpZ24taG9yaXpvbnRhbCc7XHJcbmltcG9ydCB7IEhvcml6b250YWxJdGVtIH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2hvcml6b250YWwtaXRlbSc7XHJcbmltcG9ydCB7IENvdXJzZVRhYkNsYXNzZXMgfSBmcm9tICcuL2NvdXJzZS10YWIvdGFiLWNsYXNzZXMnO1xyXG5pbXBvcnQgeyBpc0tlZFN0YWZmIH0gZnJvbSAnLi4vbG9naWMvaXMta2VkLXN0YWZmJztcclxuaW1wb3J0IHsgVGFiU2V0dGluZ3MgfSBmcm9tICcuL3RhYi1zZXR0aW5ncyc7XHJcbmltcG9ydCB7IExhenlDb250ZW50IH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xhenktY29udGVudCc7XHJcbmltcG9ydCB7IENvdXJzZVRhYkNvbnRlbnRCb3ggfSBmcm9tICcuL2NvdXJzZS10YWItY29udGVudC1ib3gnO1xyXG5pbXBvcnQgeyBUYWJTZXR0aW5nc0FkbWluIH0gZnJvbSAnLi90YWItc2V0dGluZ3MtYWRtaW4nO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBzY2hvb2w6IHN0cmluZztcclxuICBkcmFmdElkOiBzdHJpbmc7XHJcbiAgY291cnNlOiBXaXRoR3JhcGhzPENvdXJzZUluc3RhbmNlLCBcInRhYnNcIiB8IFwiYmxvY2tzXCI+O1xyXG4gIGJyYW5jaDogS2VkQmFja2VuZFJlcG87XHJcbiAgYmxvY2s6IENvdXJzZUJsb2NrIHwgbnVsbDtcclxuICB0YWI6IFN0cmlwR3JhcGhzPENvdXJzZVRhYj4sXHJcbiAgZWRpdE1vZGU/OiBib29sZWFuXHJcbiAgbGF6eUNvbnRlbnRzOiBWYWx1ZTxXaXRoR3JhcGhzPENvdXJzZUNvbnRlbnQsIFwidGFza3NcIj5bXT47XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBDb3Vyc2VUYWJBcmVhID0gbGl2ZVF1ZXJ5VmlldygoeyBjb3Vyc2UsIGJyYW5jaCwgYmxvY2ssIHRhYiwgZWRpdE1vZGUsIGxhenlDb250ZW50cywgc2Nob29sLCBkcmFmdElkIH06IFByb3BzKSA9PlxyXG4gIGxhenlDb250ZW50cy5tYXAoY29udGVudHMgPT4ge1xyXG4gICAgaWYgKCF0YWIpIHtcclxuICAgICAgaWYgKGVkaXRNb2RlKVxyXG4gICAgICAgIHJldHVybiA8cD57TGBEZW5uYSBrdXJzIHNha25hciBpbm5laMOlbGwuIFNrYXBhIG55IGZsaWsgZ2Vub20ga25hcHBlbiBvdmFuYH08L3A+XHJcbiAgICAgIGVsc2VcclxuICAgICAgICByZXR1cm4gaXNLZWRTdGFmZigpID9cclxuICAgICAgICAgIDxwPntMYERlbm5hIGt1cnMgc2FrbmFyIGlubmVow6VsbC4gVsOkbGogUmVkaWdlcmEga25hcHBlbiBmw7ZyIGF0dCBsw6RnZ2EgdGlsbCBmbGlrYXIuYH08L3A+IDpcclxuICAgICAgICAgIDxwPntMYERlbm5hIGt1cnMgc2FrbmFyIGlubmVow6VsbC5gfTwvcD5cclxuICAgIH1cclxuICAgIGNvbnRlbnRzID0gY29udGVudHMuc2xpY2UoKS5zb3J0KGNvbXBhcmVQcm9wKFwib3JkZXJcIikpO1xyXG4gICAgcmV0dXJuIDxkaXY+XHJcbiAgICAgIHtlZGl0TW9kZSA/IDw+XHJcbiAgICAgICAge2lzS2VkU3RhZmYoKSB8fCAhdGFiLmxvY2tlZCA/XHJcbiAgICAgICAgICA8VGFiU2V0dGluZ3MgY291cnNlPXtjb3Vyc2UgYXMgQ291cnNlSW5zdGFuY2V9IHRhYj17dGFifSByZXBvPXticmFuY2h9IC8+IDpcclxuICAgICAgICAgIG51bGx9XHJcbiAgICAgICAge2lzS2VkU3RhZmYoKSA/XHJcbiAgICAgICAgICA8VGFiU2V0dGluZ3NBZG1pbiBjb3Vyc2U9e2NvdXJzZSBhcyBDb3Vyc2VJbnN0YW5jZX0gdGFiPXt0YWJ9IHJlcG89e2JyYW5jaH0gYmxvY2s9e2Jsb2NrfSAvPiA6XHJcbiAgICAgICAgICBudWxsfVxyXG4gICAgICA8Lz4gOiBudWxsXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHtjb250ZW50cy5tYXAoKGNvbnRlbnQsIGNvbnRlbnRPcmRlckluZGV4KSA9PiA8Q291cnNlVGFiQ29udGVudEJveFxyXG4gICAgICAgIGtleT17Y29udGVudC5pZH1cclxuICAgICAgICBjb250ZW50PXtjb250ZW50fVxyXG4gICAgICAgIGJyYW5jaD17YnJhbmNofVxyXG4gICAgICAgIGNvbnRlbnRPcmRlckluZGV4PXtjb250ZW50T3JkZXJJbmRleH1cclxuICAgICAgICBjb250ZW50cz17Y29udGVudHN9XHJcbiAgICAgICAgY291cnNlPXtjb3Vyc2V9XHJcbiAgICAgICAgZHJhZnRJZD17ZHJhZnRJZH1cclxuICAgICAgICBlZGl0TW9kZT17ZWRpdE1vZGV9XHJcbiAgICAgICAgc2Nob29sPXtzY2hvb2x9XHJcbiAgICAgICAgYmxvY2s9e2Jsb2NrfVxyXG4gICAgICAgIHRhYj17dGFifSAvPil9XHJcblxyXG4gICAgICAgIHshIWVkaXRNb2RlICYmIChpc0tlZFN0YWZmKCkgfHwgIXRhYi5sb2NrZWQpICYmIDw+XHJcblxyXG4gICAgICAgICAge3RhYi50YWJDbGFzcyA9PT0gJ3dvcmQtYmFuay10YWInICYmXHJcblxyXG4gICAgICAgICAgICAvLyBbIEFkZCBXb3JkIEJhbmsgXSBidXR0b25cclxuICAgICAgICAgICAgPEFkZENvbnRlbnRCdXR0b24gdHlwZT1cIndvcmQtYmFua1wiIHRhYj17dGFifSBicmFuY2g9e2JyYW5jaH0gY291cnNlPXtjb3Vyc2V9IC8+fVxyXG5cclxuICAgICAgICAgIHt0YWIudGFiQ2xhc3MgIT09ICd3b3JkLWJhbmstdGFiJyAmJlxyXG4gICAgICAgICAgICh0YWIudGFiQ2xhc3MgPT09ICdtaXNzaW9uLXRhYicgfHwgdGFiLnRhYkNsYXNzID09PSAnc3ViamVjdC10YWInIHx8IGNvdXJzZS50eXBlID09PSAnc3RlcC1jb3Vyc2UnKSAmJlxyXG4gICAgICAgICAgICFjb250ZW50cy5zb21lKGMgPT4gYy50eXBlID09PSAnbGVhcm5pbmctZ29hbHMnKSAmJlxyXG5cclxuICAgICAgICAgICAgLy8gWyBBZGQgTGVhcm5pbmcgR29hbHMgXSBidXR0b25cclxuICAgICAgICAgICAgPEFkZENvbnRlbnRCdXR0b24gdHlwZT1cImxlYXJuaW5nLWdvYWxzXCIgdGFiPXt0YWJ9IGJyYW5jaD17YnJhbmNofSBjb3Vyc2U9e2NvdXJzZX0gLz5cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB7IC8vIFsgQWRkIFRleHQgXSBidXR0b25cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIDxBZGRDb250ZW50QnV0dG9uIHR5cGU9XCJyaWNoLXRleHRcIiB0YWI9e3RhYn0gYnJhbmNoPXticmFuY2h9IGNvdXJzZT17Y291cnNlfSAvPlxyXG5cclxuICAgICAgICAgIHtjb250ZW50cy5maWx0ZXIoYz0+IGMudHlwZSA9PSBcInJlc291cmNlLWxpc3RcIikubGVuZ3RoID09IDAgJiZcclxuICAgICAgICAgICAgIC8vIFsgQWRkIFJlc291cmNlIF0gYnV0dG9uXHJcbiAgICAgICAgICAgICA8QWRkQ29udGVudEJ1dHRvbiB0eXBlPVwicmVzb3VyY2UtbGlzdFwiIHRhYj17dGFifSBicmFuY2g9e2JyYW5jaH0gY291cnNlPXtjb3Vyc2V9IC8+XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAge3RhYi50YWJDbGFzcyA9PT0gJ2ludHJvLXRhYicgfHwgdGFiLnRhYkNsYXNzID09PSAncnVuLXVwLXRhYicgJiZcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBbIEFkZCBFbWJlZGRlZCBIVE1MIF0gYnV0dG9uXHJcbiAgICAgICAgICAgIDxBZGRDb250ZW50QnV0dG9uIHR5cGU9XCJlbWJlZGRlZC1odG1sXCIgdGFiPXt0YWJ9IGJyYW5jaD17YnJhbmNofSBjb3Vyc2U9e2NvdXJzZX0gLz59XHJcbiAgICAgICAgPC8+XHJcbiAgICAgIH1cclxuICAgIDwvZGl2PlxyXG4gIH0pXHJcbilcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgV2l0aEdyYXBocywgS2VkQmFja2VuZFJlcG8sIFN0cmlwR3JhcGhzIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgQ291cnNlQ29udGVudCwgQ291cnNlSW5zdGFuY2UsIENvdXJzZVRhYiwgQ291cnNlQmxvY2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IGlzS2VkU3RhZmYgfSBmcm9tICcuLi9sb2dpYy9pcy1rZWQtc3RhZmYnO1xyXG5pbXBvcnQgeyBDb3Vyc2VDb250ZW50Qm94LCBDT1VSU0VfQ09OVEVOVF9UWVBFUyB9IGZyb20gJy4vY291cnNlLWNvbnRlbnRzJztcclxuaW1wb3J0IHsgQWxpZ25Ib3Jpem9udGFsIH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2FsaWduLWhvcml6b250YWwnO1xyXG5pbXBvcnQgeyBIb3Jpem9udGFsSXRlbSB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9ob3Jpem9udGFsLWl0ZW0nO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBSZW1vdmVJdGVtIH0gZnJvbSAnLi4vLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvcmVtb3ZlLWl0ZW0nO1xyXG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSAna2VkYmFja2VuZC9vYnNlcnZhYmxlJztcclxuaW1wb3J0IHsgTGF6eUNvbnRlbnQgfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvbGF6eS1jb250ZW50JztcclxuaW1wb3J0IHsgcmVvcmRlciB9IGZyb20gJy4uL2xvZ2ljL2NoYW5nZS1zb3J0LW9yZGVyJztcclxuaW1wb3J0IHsgRmllbGRMaW1pdHMgfSBmcm9tICcuLi9jb21tb24vZmllbGQtbGltaXRzJztcclxuXHJcbmNvbnN0IHtNQVhfQ0hBUlNfSU5fQ09OVEVOVFN9ID0gRmllbGRMaW1pdHM7XHJcblxyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBlZGl0TW9kZTogYm9vbGVhblxyXG4gIGNvbnRlbnQ6IFdpdGhHcmFwaHM8Q291cnNlQ29udGVudCwgXCJ0YXNrc1wiPlxyXG4gIGNvbnRlbnRzOiBXaXRoR3JhcGhzPENvdXJzZUNvbnRlbnQsIFwidGFza3NcIj5bXVxyXG4gIGJyYW5jaDogS2VkQmFja2VuZFJlcG87XHJcbiAgY291cnNlOiBXaXRoR3JhcGhzPENvdXJzZUluc3RhbmNlLCBcInRhYnNcIiB8IFwiYmxvY2tzXCI+O1xyXG4gIHRhYjogU3RyaXBHcmFwaHM8Q291cnNlVGFiPjtcclxuICBzY2hvb2w6IHN0cmluZztcclxuICBkcmFmdElkOiBzdHJpbmc7XHJcbiAgY29udGVudE9yZGVySW5kZXg6IG51bWJlcjtcclxuICBibG9jazogQ291cnNlQmxvY2sgfCBudWxsO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ291cnNlVGFiQ29udGVudEJveCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcz4ge1xyXG4gIG51bUNoYXJzT2JzZXJ2YWJsZSA9IG5ldyBFbWl0dGVyKDApOyAvLyBEZWRpY2F0ZWQgc3RhdGUgZm9yIGEgc3ViLXBhcnQgb2YgdGhlIGdlbmVyYXRlZCBET00gKGF2b2lkIGluZmluaXRlIGxvb3ApXHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgLy9udW1DaGFyczogMFxyXG4gICAgfVxyXG4gIH1cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7IGVkaXRNb2RlLCBjb250ZW50LCBicmFuY2gsIGNvdXJzZSwgdGFiLCBzY2hvb2wsIGRyYWZ0SWQsIGNvbnRlbnRPcmRlckluZGV4LCBjb250ZW50cywgYmxvY2sgfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCBrZWRTdGFmZiA9IGlzS2VkU3RhZmYoKTtcclxuICAgIC8vY29uc3QgeyBudW1DaGFycyB9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IHsgbnVtQ2hhcnNPYnNlcnZhYmxlIH0gPSB0aGlzO1xyXG4gICAgcmV0dXJuICFlZGl0TW9kZSB8fCAoY29udGVudC5sb2NrZWQgJiYgIWtlZFN0YWZmKSA/XHJcbiAgICAgIC8vXHJcbiAgICAgIC8vIE5vdCBlZGl0IG1vZGU6XHJcbiAgICAgIC8vXHJcbiAgICAgIDxDb3Vyc2VDb250ZW50Qm94XHJcbiAgICAgICAga2V5PXtjb250ZW50LmlkfVxyXG4gICAgICAgIHJlcG89e2JyYW5jaH1cclxuICAgICAgICBjb250ZW50PXtjb250ZW50fVxyXG4gICAgICAgIHNpYmxpbmdDb250ZW50cz17Y29udGVudHN9XHJcbiAgICAgICAgY291cnNlPXtjb3Vyc2V9XHJcbiAgICAgICAgZWRpdE1vZGU9e2VkaXRNb2RlfVxyXG4gICAgICAgIGNvdXJzZVRhYj17dGFifVxyXG4gICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgIGRyYWZ0SWQ9e2RyYWZ0SWR9XHJcbiAgICAgICAgYmxvY2s9e2Jsb2NrfSAvPiA6XHJcbiAgICAgIC8vXHJcbiAgICAgIC8vIEVkaXQgbW9kZTpcclxuICAgICAgLy9cclxuICAgICAgPGRpdiBrZXk9e2NvbnRlbnQuaWR9IGNsYXNzTmFtZT17W1wiY291cnNlLWNvbnRlbnQtYm94XCIsIGNvbnRlbnQudHlwZSAhPT0gJ2xlYXJuaW5nLWdvYWxzJyAmJiBcImtlZF9ib3hlZFwiXS5maWx0ZXIoeCA9PiAhIXgpLmpvaW4oJyAnKX0gc3R5bGU9e3sgcG9zaXRpb246ICdyZWxhdGl2ZScgfX0+XHJcbiAgICAgICAgPEFsaWduSG9yaXpvbnRhbD5cclxuICAgICAgICAgIDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiYm94LW1pbmktbGFiZWxcIj57Q09VUlNFX0NPTlRFTlRfVFlQRVNbY29udGVudC50eXBlXX08L3A+XHJcbiAgICAgICAgICA8L0hvcml6b250YWxJdGVtPlxyXG4gICAgICAgICAgPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgICAgICB7a2VkU3RhZmYgP1xyXG4gICAgICAgICAgICAgIDw+XHJcbiAgICAgICAgICAgICAgICAmbmJzcDtcclxuICAgICAgICAgIDxpbnB1dFxyXG4gICAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIiBjaGVja2VkPXshY29udGVudC5sb2NrZWR9XHJcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtldiA9PiBicmFuY2guY291cnNlQ29udGVudHMudXBkYXRlKGNvbnRlbnQsIHsgbG9ja2VkOiAhZXYudGFyZ2V0LmNoZWNrZWQgfSl9IC8+XHJcbiAgICAgICAgICAgICAgICB7TGBUaWxsw6V0IHJlZGlnZXJpbmdgfVxyXG4gICAgICAgICAgICAgICAgeyFjb250ZW50LmxvY2tlZCA/IDw+XHJcbiAgICAgICAgICAgICAgICAgICZuYnNwO1xyXG4gICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIiBjaGVja2VkPXshY29udGVudC5sb2NrRGVsZXRlfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtldiA9PiBicmFuY2guY291cnNlQ29udGVudHMudXBkYXRlKGNvbnRlbnQsIHsgbG9ja0RlbGV0ZTogIWV2LnRhcmdldC5jaGVja2VkIH0pfSAvPlxyXG4gICAgICAgICAgICAgICAgICB7TGBUaWxsw6V0IGTDtmxqYSBydXRhbmB9XHJcbiAgICAgICAgICAgICAgICA8Lz4gOiBudWxsfVxyXG4gICAgICAgICAgICAgIDwvPiA6IG51bGx9XHJcbiAgICAgICAgICA8L0hvcml6b250YWxJdGVtPlxyXG4gICAgICAgIDwvQWxpZ25Ib3Jpem9udGFsPlxyXG4gICAgICAgIDxDb3Vyc2VDb250ZW50Qm94XHJcbiAgICAgICAgICByZXBvPXticmFuY2h9XHJcbiAgICAgICAgICBjb250ZW50PXtjb250ZW50fVxyXG4gICAgICAgICAgc2libGluZ0NvbnRlbnRzPXtjb250ZW50c31cclxuICAgICAgICAgIGNvdXJzZT17Y291cnNlfVxyXG4gICAgICAgICAgZWRpdE1vZGU9e3RydWV9XHJcbiAgICAgICAgICBzY2hvb2w9e3NjaG9vbH1cclxuICAgICAgICAgIGRyYWZ0SWQ9e2RyYWZ0SWR9XHJcbiAgICAgICAgICBjb3Vyc2VUYWI9e3RhYn1cclxuICAgICAgICAgIG1heENoYXJzPXtNQVhfQ0hBUlNfSU5fQ09OVEVOVFN9XHJcbiAgICAgICAgICByZXBvcnROdW1DaGFycz17bnVtQ2hhcnMgPT4ge1xyXG4gICAgICAgICAgICAvLyBBdm9pZCBzZXR0aW5nIHN0YXRlIGJlY2F1c2UgaXQgdHVybnMgb3V0IHRvIGJlIGluZmluaXRlIGxvb3AuXHJcbiAgICAgICAgICAgIC8vIChzZXRTdGF0ZSgpIGxlYWRzIHRvIHJlLXJlbmRlciBvZiB0aGlzIHdob2xlIGNvbXBvbmVudCwgbGVhZGluZyB0b1xyXG4gICAgICAgICAgICAvLyByZS1yZW5kZXIgb2YgQ291cnNlQ29udGVudEJveCwgdGhhdCBjYWxscyByZXBvcnROdW1DaGFycyBldGMuLi4pXHJcbiAgICAgICAgICAgIC8vIEluc3RlYWQgd2UgY29tbXVuaWNhdGUgdGhpcyBwYXJ0aWN1bGFyIHN0YXRlIHRvIGEgZGVkaWNhdGVkIE9ic2VydmFibGVcclxuICAgICAgICAgICAgLy8gdGhhdCB3aWxsIG9ubHkgdXBkYXRlIHRoZSBwYXJ0aWN1bGFyIGNvbXBvbmVudCB0aGF0IGlzIGFmZmVjdGVkIGJ5IGl0LlxyXG4gICAgICAgICAgICBudW1DaGFyc09ic2VydmFibGUuZGlzcGF0Y2gobnVtQ2hhcnMpO1xyXG4gICAgICAgICAgICAvL3RoaXMuc2V0U3RhdGUoeyBudW1DaGFycyB9KTtcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgICBibG9jaz17YmxvY2t9XHJcbiAgICAgICAgLz5cclxuICAgICAgICA8ZGl2IHN0eWxlPXt7IHBvc2l0aW9uOiAnYWJzb2x1dGUnLCB0b3A6IDAsIHJpZ2h0OiAwIH19PlxyXG4gICAgICAgICAgeyhrZWRTdGFmZiB8fCAhY29udGVudC5sb2NrZWQpICYmIGNvbnRlbnRPcmRlckluZGV4ID4gMCAmJiA8c3Bhbj5cclxuICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtYXJyb3ctY2lyY2xlLXVwIHNlbGVjdGFibGVcIlxyXG4gICAgICAgICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXHJcbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3T3JkZXIgPSByZW9yZGVyKGNvbnRlbnRzLCBjb250ZW50LmlkLCBjb250ZW50c1tjb250ZW50T3JkZXJJbmRleCAtIDFdLmlkLCBcImJlZm9yZVwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXdPcmRlcikge1xyXG4gICAgICAgICAgICAgICAgICBicmFuY2guY291cnNlQ29udGVudHMudXBkYXRlKGNvbnRlbnQsIHsgb3JkZXI6IG5ld09yZGVyIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH19IC8+IDwvc3Bhbj59XHJcbiAgICAgICAgICB7KGtlZFN0YWZmIHx8ICFjb250ZW50LmxvY2tlZCkgJiYgY29udGVudE9yZGVySW5kZXggPCBjb250ZW50cy5sZW5ndGggLSAxICYmIDxzcGFuPlxyXG4gICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1hcnJvdy1jaXJjbGUtZG93biBzZWxlY3RhYmxlXCJcclxuICAgICAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIlxyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld09yZGVyID0gcmVvcmRlcihjb250ZW50cywgY29udGVudC5pZCwgY29udGVudHNbY29udGVudE9yZGVySW5kZXggKyAxXS5pZCwgXCJhZnRlclwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXdPcmRlcikge1xyXG4gICAgICAgICAgICAgICAgICBicmFuY2guY291cnNlQ29udGVudHMudXBkYXRlKGNvbnRlbnQsIHsgb3JkZXI6IG5ld09yZGVyIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH19IC8+IDwvc3Bhbj59XHJcbiAgICAgICAgICB7a2VkU3RhZmYgfHwgIWNvbnRlbnQubG9ja0RlbGV0ZSA/IDxSZW1vdmVJdGVtXHJcbiAgICAgICAgICAgIHRpdGxlPXtzY2hvb2wgPT09ICdzdGFuZGFyZCcgPyBMYFRhIGJvcnQgaW5uZWjDpWxsc3J1dGFuYCA6IExgRMO2bGogaW5uZWjDpWxsc3J1dGFuYH1cclxuICAgICAgICAgICAgc3R5bGU9e3sgZGlzcGxheTogJ2lubGluZS1ibG9jaycgfX1cclxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gY29uZmlybShMYFRhIGJvcnQgaW5uZWjDpWxsP2ApICYmIGJyYW5jaC5jb3Vyc2VUYWJzLnJlbW92ZVJlbGF0ZWQodGFiLmlkLCBcImNvbnRlbnRzXCIsIGNvbnRlbnQpfSAvPlxyXG4gICAgICAgICAgICA6IG51bGx9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAge2NvbnRlbnQudHlwZSA9PT0gJ3JpY2gtdGV4dCcgPyA8TGF6eUNvbnRlbnQ+e1xyXG4gICAgICAgICAgbnVtQ2hhcnNPYnNlcnZhYmxlLm1hcChudW1DaGFycyA9PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17W1wiY2hhci1jb3VudGVyLWJvdHRvbVwiXS5jb25jYXQobnVtQ2hhcnMgPj0gTUFYX0NIQVJTX0lOX0NPTlRFTlRTID8gXCJvdmVyZmxvd2VkXCIgOiBbXSkuam9pbignICcpfT5cclxuICAgICAgICAgICAgICB7TGBUZXh0ZW4gaW5uZWjDpWxsZXIgJHtudW1DaGFyc30gYXYgbWF4ICR7TUFYX0NIQVJTX0lOX0NPTlRFTlRTfSB0aWxsw6V0bmEgdGVja2VuYH1cclxuICAgICAgICAgICAgPC9kaXY+KVxyXG4gICAgICAgICAgfTwvTGF6eUNvbnRlbnQ+IDpcclxuICAgICAgICAgIHVuZGVmaW5lZH1cclxuICAgICAgPC9kaXY+XHJcblxyXG4gIH1cclxufSIsImltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IENvdXJzZUluc3RhbmNlIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IENvdXJzZVRhYkNsYXNzZXMgPSB7XHJcbiAgXCJpbnRyby10YWJcIjogTGBJbnRyb2R1a3Rpb25zZmxpa2AsXHJcbiAgXCJydW4tdXAtdGFiXCI6IExgVXBwdGFrdHNmbGlrYCxcclxuICBcInN1YmplY3QtdGFiXCI6IExgw4RtbmVzZmxpa2AsXHJcbiAgXCJtaXNzaW9uLXRhYlwiOiBMYFVwcGRyYWdzZmxpa2AsXHJcbiAgXCJjb250ZW50LXRhYlwiOiBMYEdlbmVyZWxsIGZsaWtgLFxyXG4gIFwidGVhY2hlci10YWJcIjogTGBMw6RyYXJzaWRhYCxcclxuICBcIndvcmQtYmFuay10YWJcIjogTGBPcmRiYW5rYFxyXG59XHJcblxyXG50eXBlIFRhYlR5cGVPcHRJbiA9IHtbVGFiVHlwZSBpbiBrZXlvZiB0eXBlb2YgQ291cnNlVGFiQ2xhc3Nlc10/OiBib29sZWFufTtcclxuXHJcbmV4cG9ydCBjb25zdCBUYWJUeXBlc1BlckNvdXJzZVR5cGU6IHtbQ291cnNlVHlwZSBpbiBDb3Vyc2VJbnN0YW5jZVtcInR5cGVcIl1dOiBBcnJheTxrZXlvZiB0eXBlb2YgQ291cnNlVGFiQ2xhc3Nlcz59ID0ge1xyXG4gIFwic3RlcC1jb3Vyc2VcIjogW1xyXG4gICAgXCJjb250ZW50LXRhYlwiLFxyXG4gICAgXCJpbnRyby10YWJcIixcclxuICAgIFwidGVhY2hlci10YWJcIixcclxuICAgIFwid29yZC1iYW5rLXRhYlwiXHJcbiAgXSxcclxuICBcInRoZW1lLWNvdXJzZVwiOiBbXHJcbiAgICBcImNvbnRlbnQtdGFiXCIsXHJcbiAgICBcInJ1bi11cC10YWJcIixcclxuICAgIFwic3ViamVjdC10YWJcIixcclxuICAgIFwibWlzc2lvbi10YWJcIixcclxuICAgIFwidGVhY2hlci10YWJcIlxyXG4gIF1cclxufTtcclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBkYiwgQ291cnNlSW5zdGFuY2VzIH0gZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9kYic7XHJcbmltcG9ydCB7IEJhbm5lclByb3BzLCBMYXp5QmFubmVyIH0gZnJvbSAnLi4vY29tbW9uL2Jhbm5lcic7XHJcbmltcG9ydCB7IEVtaXR0ZXIsIENvbGxlY3Rpb24sIE9ic2VydmFibGUsIFZhbHVlIH0gZnJvbSAna2VkYmFja2VuZC9vYnNlcnZhYmxlJztcclxuaW1wb3J0IHsgTCwgc2hvd0Vycm9yLCBjb21wYXJlUHJvcCwgY29tcGFyZVByb3BzIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgY2ZnIGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmNmZyc7XHJcbmltcG9ydCB7IGlzVGVhY2hlckF0U2Nob29sLCBwcmVzZXJ2ZUltcGVyc29uYXRpb25RdWVyeSB9IGZyb20gJy4uLy4uLy4uL2FjY2Vzcy1jb250cm9sJztcclxuaW1wb3J0IHsgQWRkVGFiQnV0dG9uIH0gZnJvbSAnLi9hZGQtdGFiLWJ1dHRvbic7XHJcbmltcG9ydCB7IHdpdGhSb3V0ZXIsIFJvdXRlQ29tcG9uZW50UHJvcHMgfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xyXG5pbXBvcnQgeyBDb3Vyc2VBcmVhIH0gZnJvbSAnLi9jb3Vyc2UtYXJlYSc7XHJcbmltcG9ydCB7IExpbmsgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuaW1wb3J0IHsgVGFza0VkaXRvciB9IGZyb20gJy4vdGFzay90YXNrLWVkaXRvcic7XHJcbmltcG9ydCB7IENsaWNrYWJsZVNjaG9vbERpdiB9IGZyb20gJy4vY2xpY2thYmxlLXNjaG9vbC1kaXYnO1xyXG5pbXBvcnQgeyBpc0VtcGxveWVlIH0gZnJvbSAnLi4vbG9naWMvaXMtZW1wbG95ZWUnO1xyXG5pbXBvcnQgeyBUYXNrVmlld2VyUGFnZSB9IGZyb20gJy4vdGFzay92aWV3ZXIvdGFzay12aWV3ZXItcGFnZSc7XHJcbmltcG9ydCB7IGlzS2VkU3RhZmYgfSBmcm9tICcuLi9sb2dpYy9pcy1rZWQtc3RhZmYnO1xyXG5pbXBvcnQgeyBDb3Vyc2VUYWIsIFRoZW1lQ291cnNlVGFiLCBUaGVtZUNvdXJzZUluc3RhbmNlLCBDb3Vyc2VJbnN0YW5jZSwgQ291cnNlQmxvY2ssIFN0ZXBDb3Vyc2VUYWIsIFNjaG9vbCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8sIFdpdGhHcmFwaHMsIFN0cmlwR3JhcGhzIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgTGF6eUNvbnRlbnQgfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvbGF6eS1jb250ZW50JztcclxuaW1wb3J0IHsgcmVvcmRlciB9IGZyb20gJy4uL2xvZ2ljL2NoYW5nZS1zb3J0LW9yZGVyJztcclxuaW1wb3J0IHsgSW5qZWN0ZWRJbnRsUHJvcHMsIGluamVjdEludGwgfSBmcm9tICdyZWFjdC1pbnRsJztcclxuaW1wb3J0IHsgc2V0dXBJbnRsIH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL1NldHVwTGFuZ3VhZ2VJbnRsJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyBleHRlbmRzIFJvdXRlQ29tcG9uZW50UHJvcHM8YW55PiB7XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgY291cnNlSWQ6IHN0cmluZztcclxuICBhY3RpdmVUYWI/OiBzdHJpbmc7XHJcbiAgZHJhZnRJZD86IHN0cmluZztcclxuICBlZGl0TW9kZT86IGJvb2xlYW47XHJcbiAgY29udGVudElkPzogc3RyaW5nO1xyXG4gIHRhc2tJZD86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IENvdXJzZVZpZXdlclBhZ2UgPSB3aXRoUm91dGVyKCgoeyBzY2hvb2wsIGNvdXJzZUlkLCBhY3RpdmVUYWIsIGRyYWZ0SWQsIGVkaXRNb2RlLCBoaXN0b3J5LCBjb250ZW50SWQsIHRhc2tJZCB9OiBQcm9wcyApID0+IHtcclxuICBjb25zdCByZXBvID0gZWRpdE1vZGUgP1xyXG4gICAgZGIgOiAvLyBJbiBlZGl0IG1vZGUsIGRvIG5vdCBvcHRpbWl6ZSBjYWNoZSwgYXMgaXQgcHJvaGliaXRzIGNvbGxhYm9yYXRpb25cclxuICAgIGRiLm9wdGltaXplQ2FjaGUoKTtcclxuXHJcbiAgY29uc3Qgc2Nob29sT2JzZXJ2YWJsZSA9IHJlcG8uc2Nob29scy5uYW1lKHNjaG9vbCkuc2luZ2xlKCk7XHJcblxyXG4gIGNvbnN0IGJyYW5jaE9ic2VydmFibGUgPSBkcmFmdElkID8gLy8gSW4gZWRpdCBtb2RlLCBkcmFmdElkIGlzIGRlZmluZWQuXHJcbiAgICBuZXcgRW1pdHRlcihyZXBvLmJyYW5jaChkcmFmdElkKSkgOlxyXG4gICAgc2Nob29sT2JzZXJ2YWJsZS5tYXAoc2Nob29sID0+IHJlcG8uYnJhbmNoKHNjaG9vbC5vZmZpY2lhbEJyYW5jaElkKSk7XHJcblxyXG4gIGNvbnN0IGNvdXJzZU9ic2VydmFibGUgPSBicmFuY2hPYnNlcnZhYmxlLnN3aXRjaE1hcChicmFuY2ggPT5cclxuICAgIGJyYW5jaC5jb3Vyc2VJbnN0YW5jZXMuaW5jbHVkZShcImJsb2Nrc1wiLCBcInRhYnNcIikuaWQoY291cnNlSWQpKTtcclxuXHJcbiAgY29uc3QgaW50ZXJtZWRpYXRlT2JzZXJ2YWJsZVVuc29ydGVkOiBWYWx1ZTx7XHJcbiAgICBjb3Vyc2U6IFdpdGhHcmFwaHM8Q291cnNlSW5zdGFuY2UsIFwiYmxvY2tzXCIgfCBcInRhYnNcIj5cclxuICAgIHRhYnM6IENvdXJzZVRhYltdXHJcbiAgICBicmFuY2g6IEtlZEJhY2tlbmRSZXBvLFxyXG4gICAgYmxvY2s6IENvdXJzZUJsb2NrIHwgbnVsbCxcclxuICAgIHNjaG9vbEVudGl0eTogU2Nob29sXHJcbiAgfT4gPSBjb3Vyc2VPYnNlcnZhYmxlLmNvbWJpbmVMYXRlc3Qoc2Nob29sT2JzZXJ2YWJsZSlcclxuICAgIC5zd2l0Y2hNYXAoKFtjb3Vyc2UsIHNjaG9vbEVudGl0eV0pID0+IHtcclxuICAgICAgY29uc3QgYnJhbmNoID0gZHJhZnRJZCA/XHJcbiAgICAgICAgcmVwby5icmFuY2goZHJhZnRJZCkgOlxyXG4gICAgICAgIHJlcG8uYnJhbmNoKHNjaG9vbEVudGl0eS5vZmZpY2lhbEJyYW5jaElkKTtcclxuXHJcbiAgICAgIGlmIChjb3Vyc2UudHlwZSA9PT0gJ3RoZW1lLWNvdXJzZScpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEVtaXR0ZXIoe2NvdXJzZSwgdGFiczogY291cnNlLnRhYnMsIGJyYW5jaCwgYmxvY2s6IG51bGwsIHNjaG9vbEVudGl0eX0pO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChhY3RpdmVUYWIgJiYgYWN0aXZlVGFiICE9PSAnJCcpXHJcbiAgICAgICAgcmV0dXJuIGJyYW5jaC5jb3Vyc2VCbG9ja3MuaGFzRWRnZXNUbyhbYWN0aXZlVGFiXSkuaW5jbHVkZShcInRhYnNcIikudG9WYWx1ZSgpXHJcbiAgICAgICAgICAubWFwKChbYmxvY2tdKSA9PiAoe1xyXG4gICAgICAgICAgICBjb3Vyc2UsXHJcbiAgICAgICAgICAgIHRhYnM6IGJsb2NrLnRhYnMsXHJcbiAgICAgICAgICAgIGJyYW5jaCxcclxuICAgICAgICAgICAgYmxvY2s6IGJsb2NrIHx8IGNvdXJzZS5ibG9ja3NbMF0sXHJcbiAgICAgICAgICAgIHNjaG9vbEVudGl0eVxyXG4gICAgICAgICAgfSkpO1xyXG4gICAgICBpZiAoY291cnNlLmJsb2Nrcy5sZW5ndGggPiAwKVxyXG4gICAgICAgIHJldHVybiBicmFuY2guY291cnNlQmxvY2tzLmluY2x1ZGUoXCJ0YWJzXCIpLmlkKGNvdXJzZS5ibG9ja3NbMF0uaWQpXHJcbiAgICAgICAgICAubWFwKGJsb2NrID0+ICh7XHJcbiAgICAgICAgICAgIGNvdXJzZSxcclxuICAgICAgICAgICAgdGFiczogYmxvY2sudGFicyxcclxuICAgICAgICAgICAgYnJhbmNoLFxyXG4gICAgICAgICAgICBibG9jayxcclxuICAgICAgICAgICAgc2Nob29sRW50aXR5XHJcbiAgICAgICAgICB9KSk7XHJcbiAgICAgIHJldHVybiBuZXcgRW1pdHRlcih7Y291cnNlLCB0YWJzOiBbXSwgYnJhbmNoLCBibG9jazogbnVsbCwgc2Nob29sRW50aXR5fSk7XHJcbiAgICB9KTtcclxuXHJcbiAgY29uc3QgaW50ZXJtZWRpYXRlT2JzZXJ2YWJsZSA9IGludGVybWVkaWF0ZU9ic2VydmFibGVVbnNvcnRlZC5tYXAodmFscyA9PiAoe1xyXG4gICAgLi4udmFscyxcclxuICAgIHRhYnM6IHZhbHMudGFicyAmJiB2YWxzLnRhYnMuc29ydChjb21wYXJlUHJvcHMoW1wic3RlcE5vXCIsIFwib3JkZXJcIl0pKVxyXG4gIH0pKTtcclxuXHJcbiAgY29uc3QgYmFubmVyUHJvcHNPYnNlcnZhYmxlID0gaW50ZXJtZWRpYXRlT2JzZXJ2YWJsZVxyXG4gICAgLm1hcDxCYW5uZXJQcm9wcz4oKHtjb3Vyc2UsIHRhYnMsIGJyYW5jaCwgYmxvY2ssIHNjaG9vbEVudGl0eX0pID0+IHtcclxuICAgICAgcmV0dXJuIGdldENvdXJzZUJhbm5lclByb3BzKFxyXG4gICAgICAgIHRhYnMsXHJcbiAgICAgICAgZWRpdE1vZGUsXHJcbiAgICAgICAgc2Nob29sLFxyXG4gICAgICAgIHNjaG9vbEVudGl0eSxcclxuICAgICAgICBkcmFmdElkLFxyXG4gICAgICAgIGNvdXJzZSBhcyBDb3Vyc2VJbnN0YW5jZSxcclxuICAgICAgICBicmFuY2gsXHJcbiAgICAgICAgYWN0aXZlVGFiLFxyXG4gICAgICAgIGJsb2NrKVxyXG4gICAgfSk7XHJcblxyXG4gIHJldHVybiA8PlxyXG4gICAgPExhenlCYW5uZXJcclxuICAgICAgbGF6eVByb3BzPXtiYW5uZXJQcm9wc09ic2VydmFibGV9XHJcbiAgICAvPlxyXG4gICAgICB7XHJcbiAgICAgICAgdGFza0lkID8gZWRpdE1vZGUgP1xyXG4gICAgICAgICAgPExhenlDb250ZW50PlxyXG4gICAgICAgICAgICB7aW50ZXJtZWRpYXRlT2JzZXJ2YWJsZS5tYXAoKHticmFuY2gsIGJsb2NrLCBjb3Vyc2UsIHRhYnN9KSA9PiA8VGFza0VkaXRvclxyXG4gICAgICAgICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgICAgICAgIGNvdXJzZT17Y291cnNlfVxyXG4gICAgICAgICAgICAgIGRyYWZ0SWQ9e2RyYWZ0SWR9XHJcbiAgICAgICAgICAgICAgYnJhbmNoPXticmFuY2h9XHJcbiAgICAgICAgICAgICAgYWN0aXZlVGFiPXthY3RpdmVUYWJ9XHJcbiAgICAgICAgICAgICAgY29udGVudElkPXtjb250ZW50SWR9XHJcbiAgICAgICAgICAgICAgdGFza0lkPXt0YXNrSWR9XHJcbiAgICAgICAgICAgICAgYmxvY2tJZD17YmxvY2sgJiYgYmxvY2suaWR9XHJcbiAgICAgICAgICAgIC8+KX1cclxuICAgICAgICAgIDwvTGF6eUNvbnRlbnQ+IDpcclxuICAgICAgICAgIDxUYXNrVmlld2VyUGFnZVxyXG4gICAgICAgICAgICBzY2hvb2w9e3NjaG9vbH1cclxuICAgICAgICAgICAgY291cnNlSWQ9e2NvdXJzZUlkfVxyXG4gICAgICAgICAgICBsYXp5UmVwbz17YnJhbmNoT2JzZXJ2YWJsZX1cclxuICAgICAgICAgICAgYWN0aXZlVGFiPXthY3RpdmVUYWJ9XHJcbiAgICAgICAgICAgIHRhc2tJZD17dGFza0lkfVxyXG4gICAgICAgICAgICBjb250ZW50SWQ9e2NvbnRlbnRJZH1cclxuICAgICAgICAgICAgZHJhZnRJZD17ZHJhZnRJZH1cclxuICAgICAgICAvPiA6XHJcbiAgICAgICAgPExhenlDb250ZW50PlxyXG4gICAgICAgICAge2ludGVybWVkaWF0ZU9ic2VydmFibGUubWFwKCh7YnJhbmNoLCBibG9jaywgY291cnNlLCB0YWJzfSkgPT4gXHJcbiAgICAgICAgICAgIDxDb3Vyc2VBcmVhXHJcbiAgICAgICAgICAgICAgc2Nob29sPXtzY2hvb2x9XHJcbiAgICAgICAgICAgICAgY291cnNlSWQ9e2NvdXJzZUlkfVxyXG4gICAgICAgICAgICAgIGRyYWZ0SWQ9e2RyYWZ0SWR9XHJcbiAgICAgICAgICAgICAgY291cnNlPXtjb3Vyc2V9XHJcbiAgICAgICAgICAgICAgYnJhbmNoPXticmFuY2h9XHJcbiAgICAgICAgICAgICAgdGFicz17dGFic31cclxuICAgICAgICAgICAgICBhY3RpdmVUYWI9e2FjdGl2ZVRhYn1cclxuICAgICAgICAgICAgICBlZGl0TW9kZT17ZWRpdE1vZGV9XHJcbiAgICAgICAgICAgICAgYmxvY2s9e2Jsb2NrfVxyXG4gICAgICAgICAgLz4pfVxyXG4gICAgICAgIDwvTGF6eUNvbnRlbnQ+XHJcbiAgICAgIH1cclxuICA8Lz5cclxufSkpO1xyXG5cclxuZnVuY3Rpb24gZ2V0Q291cnNlQmFubmVyUHJvcHMoXHJcbiAgdGFiczogQ291cnNlVGFiW10sXHJcbiAgZWRpdE1vZGU6IGJvb2xlYW4sXHJcbiAgc2Nob29sOiBzdHJpbmcsXHJcbiAgc2Nob29sRW50aXR5OiBTY2hvb2wsXHJcbiAgZHJhZnRJZDogc3RyaW5nLFxyXG4gIGNvdXJzZTogQ291cnNlSW5zdGFuY2UsXHJcbiAgYnJhbmNoOiBLZWRCYWNrZW5kUmVwbyxcclxuICBhY3RpdmVUYWI6IHN0cmluZyxcclxuICBibG9jaz86IENvdXJzZUJsb2NrKSA6IEJhbm5lclByb3BzXHJcbntcclxuICBjb25zdCBrZWRTdGFmZiA9IGlzS2VkU3RhZmYoKTtcclxuICBjb25zdCBjb3Vyc2VJZCA9IGNvdXJzZS5pZDtcclxuICBjb25zdCBhY3RpdmVUYWJPYmogPSB0YWJzLmZpbHRlcih0YWIgPT4gdGFiLmlkID09PSBhY3RpdmVUYWIpWzBdIHx8IHRhYnNbMF07XHJcbiAgaWYgKGNvdXJzZS50eXBlID09PSAnc3RlcC1jb3Vyc2UnICYmIGFjdGl2ZVRhYk9iaiAmJiBhY3RpdmVUYWJPYmoudHlwZSA9PT0gJ3N0ZXAtY291cnNlLXRhYicpIHtcclxuICAgIHRhYnMgPSB0YWJzLmZpbHRlcih0YWIgPT4gdGFiLnR5cGUgPT09ICdzdGVwLWNvdXJzZS10YWInICYmIHRhYi5zdGVwTm8gPT09IGFjdGl2ZVRhYk9iai5zdGVwTm8pO1xyXG4gIH1cclxuICBjb25zdCBiYW5uZXJUYWJzID0gKGlzRW1wbG95ZWUoKSA/IHRhYnMgOiB0YWJzLmZpbHRlcih0YWIgPT4gdGFiLnRhYkNsYXNzICE9PSAndGVhY2hlci10YWInKSlcclxuICAgIC5tYXA8QmFubmVyUHJvcHNbXCJ0YWJzXCJdW251bWJlcl0+KHRhYiA9PiAoe1xyXG4gICAgICBrZXk6IHRhYi5pZCxcclxuICAgICAgbmFtZTogdGFiLnRhYlRpdGxlLCAvLyBUT0RPOiBSZXBsYWNlIHdpdGggdGFiLm5hbWUhXHJcbiAgICAgIGRyYWdnYWJsZTogdHJ1ZSxcclxuICAgICAgbGluazogZWRpdE1vZGUgP1xyXG4gICAgICAgIGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2VJZH0vdGFicy8ke3RhYi5pZH0ke2RyYWZ0SWQgPyBgL2RyYWZ0cy8ke2RyYWZ0SWR9YCA6ICcnfS9lZGl0YCA6XHJcbiAgICAgICAgYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZUlkfS90YWJzLyR7dGFiLmlkfSR7ZHJhZnRJZCA/IGAvZHJhZnRzLyR7ZHJhZnRJZH1gIDogJyd9YFxyXG4gICAgfSkpO1xyXG4gIGNvbnN0IGJ1dHRvbnM6IEpTWC5FbGVtZW50W10gPSBbXTtcclxuICBpZiAoZWRpdE1vZGUgJiYgKGtlZFN0YWZmIHx8IGNvdXJzZS5hbGxvd0FkZFRhYnMpKSB7XHJcbiAgICBpZiAoY291cnNlLnR5cGUgPT09ICd0aGVtZS1jb3Vyc2UnKSB7XHJcbiAgICAgIGJ1dHRvbnMucHVzaCg8QWRkVGFiQnV0dG9uXHJcbiAgICAgICAgICB0eXBlPVwidGhlbWUtY291cnNlLXRhYlwiXHJcbiAgICAgICAgICBrZXk9XCIkYWRkVGFiXCIgc2Nob29sPXtzY2hvb2x9IGNvdXJzZT17Y291cnNlfSBicmFuY2g9e2JyYW5jaH0gZHJhZnRJZD17ZHJhZnRJZH0gLz4pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3Qgc3RlcE5vID0gYWN0aXZlVGFiT2JqID9cclxuICAgICAgICAoYWN0aXZlVGFiT2JqIGFzIFN0ZXBDb3Vyc2VUYWIpLnN0ZXBObyA6XHJcbiAgICAgICAgYmxvY2suc3RlcE51bWJlcnNbMF0gfHwgMTtcclxuICAgICAgYnV0dG9ucy5wdXNoKDxBZGRUYWJCdXR0b25cclxuICAgICAgICB0eXBlPVwic3RlcC1jb3Vyc2UtdGFiXCJcclxuICAgICAgICBrZXk9XCIkYWRkVGFiXCJcclxuICAgICAgICBzY2hvb2w9e3NjaG9vbH0gY291cnNlPXtjb3Vyc2V9IGJyYW5jaD17YnJhbmNofSBkcmFmdElkPXtkcmFmdElkfSBibG9jaz17YmxvY2t9IHN0ZXBObz17c3RlcE5vfVxyXG4gICAgICAvPik7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGlmIChrZWRTdGFmZikge1xyXG4gICAgLy8gUmVtb3ZlIHRoZSBcInJvbGVcIiBhdHRyaWJ1dGUgZnJvbSBxdWVyeSwgYXMgd2Ugd2FudCB0byBzdG9wIGltcGVyc29uYXRpbmcgYW4gRW1wbG95ZWUgd2hlbiB1c2luZyB0aGUgYWRtaW4gaW50ZXJmYWNlXHJcbiAgICBidXR0b25zLnB1c2goPGFcclxuICAgICAgaHJlZj17cHJlc2VydmVJbXBlcnNvbmF0aW9uUXVlcnkoY2ZnLktFRF9TVUJKRUNUX1BMQU5ORVJfQURNSU5fVVJMLCB7cm9sZTogdW5kZWZpbmVkfSkgK1xyXG4gICAgICAgIGAjL2FkbWluL2NvdXJzZXMvJHtjb3Vyc2VJZH0vc2V0dGluZ3NgfVxyXG4gICAgICBrZXk9XCIkc2V0dGluZ3NcIlxyXG4gICAgICB0aXRsZT17TGBJbnN0w6RsbG5pbmdhcmB9XHJcbiAgICA+XHJcbiAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWNvZ1wiIGFyaWEtaGlkZGVuPXt0cnVlfSAvPiZuYnNwO1xyXG4gICAgPC9hPik7XHJcbiAgfVxyXG4gIGNvbnN0IGJhbm5lclByb3BzOiBCYW5uZXJQcm9wcyA9IHtcclxuICAgIHRpdGxlOiBjb3Vyc2UubmFtZSxcclxuICAgIGJhY2tncm91bmRJbWFnZTogbnVsbCxcclxuICAgIHRhYnM6IGJhbm5lclRhYnMsXHJcbiAgICBjb3JuZXJCb3g6IDxDbGlja2FibGVTY2hvb2xEaXYgc2Nob29sPXtzY2hvb2x9IGRyYWZ0SWQ9e2RyYWZ0SWR9IGRpc3BsYXlOYW1lPXtzY2hvb2xFbnRpdHkuZGlzcGxheU5hbWUgfHwgc2Nob29sfSAvPixcclxuICAgIGJ1dHRvbnMsXHJcbiAgICBhY3RpdmVUYWI6IGFjdGl2ZVRhYiB8fCAoYmFubmVyVGFic1swXSAmJiBiYW5uZXJUYWJzWzBdLmtleSksXHJcbiAgICBibG9ja3M6IGNvdXJzZS5ibG9ja3MgJiYgY291cnNlLmJsb2Nrcy5zb3J0KGNvbXBhcmVQcm9wKFwiYmxvY2tOb1wiKSkubWFwKCh7aWQ6IGJsb2NrSWQsIG5hbWUsIHN0ZXBOdW1iZXJzfSkgPT4gKHtcclxuICAgICAgaWQ6IGJsb2NrSWQsXHJcbiAgICAgIG5hbWUsXHJcbiAgICAgIHN0ZXBzOiBzdGVwTnVtYmVycy5tYXAoc3RlcE5vID0+ICh7XHJcbiAgICAgICAgaXNBY3RpdmU6IGFjdGl2ZVRhYk9iaiAmJiBzdGVwTm8gPT09IChhY3RpdmVUYWJPYmogYXMgU3RlcENvdXJzZVRhYikuc3RlcE5vLFxyXG4gICAgICAgIHN0ZXBObyxcclxuICAgICAgICBsaW5rOiBgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9L2Jsb2Nrcy8ke2Jsb2NrSWR9L3N0ZXBzLyR7c3RlcE5vfWBcclxuICAgICAgfSkpXHJcbiAgICB9KSksXHJcbiAgICBzb3J0YWJsZVRhYnM6IGVkaXRNb2RlICYmIChrZWRTdGFmZiB8fCBjb3Vyc2UuYWxsb3dSZW9yZGVyVGFicyksXHJcbiAgICBvblRhYkRyb3A6IGFzeW5jIChzb3VyY2UsIHRhcmdldCwgcGxhY2VtZW50KSA9PiB7XHJcbiAgICAgIGNvbnN0IG5ld09yZGVyID0gcmVvcmRlcih0YWJzLCBzb3VyY2UsIHRhcmdldCwgcGxhY2VtZW50KTtcclxuICAgICAgaWYgKG5ld09yZGVyKSB7XHJcbiAgICAgICAgY29uc3Qgc291cmNlVGFiID0gdGFicy5maW5kKHQgPT4gdC5pZCA9PT0gc291cmNlKTtcclxuICAgICAgICBpZiAoc291cmNlVGFiKSB7XHJcbiAgICAgICAgICBicmFuY2guY291cnNlVGFicy51cGRhdGUoc291cmNlVGFiLCB7b3JkZXI6IG5ld09yZGVyfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuICByZXR1cm4gYmFubmVyUHJvcHM7XHJcbn1cclxuXHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvLCBTdHJpcEdyYXBocyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IHdpdGhSb3V0ZXIsIFJvdXRlUHJvcHMsIFJvdXRlQ29tcG9uZW50UHJvcHMgfSBmcm9tICdyZWFjdC1yb3V0ZXInO1xyXG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XHJcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9kYic7XHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgcHVibGlzaENvdXJzZSB9IGZyb20gJy4uL2xvZ2ljL3B1Ymxpc2gtY291cnNlJztcclxuaW1wb3J0IHsgSG9yaXpvbnRhbEl0ZW0gfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvaG9yaXpvbnRhbC1pdGVtJztcclxuaW1wb3J0IHsgQWxpZ25Ib3Jpem9udGFsIH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2FsaWduLWhvcml6b250YWwnO1xyXG5pbXBvcnQgeyBpc0tlZFN0YWZmIH0gZnJvbSAnLi4vbG9naWMvaXMta2VkLXN0YWZmJztcclxuaW1wb3J0IHsgQ291cnNlVGFiLCBDb3Vyc2VJbnN0YW5jZSB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgRG9jdW1lbnRBY2Nlc3MsIGhhc0FjY2VzcyB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgaGFzV3JpdGVBY2Nlc3MsIGhhc1NoYXJlQWNjZXNzIH0gZnJvbSAnLi4vLi4vLi4vYWNjZXNzLWNvbnRyb2wnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBzY2hvb2w6IHN0cmluZztcclxuICBjb3Vyc2U6IENvdXJzZUluc3RhbmNlO1xyXG4gIHRhYjogU3RyaXBHcmFwaHM8Q291cnNlVGFiPjtcclxuICBhY3RpdmVUYWI6IHN0cmluZztcclxuICBkcmFmdElkOiBzdHJpbmc7XHJcbiAgYmxvY2tJZD86IHN0cmluZztcclxuICBjb3Vyc2VUeXBlOiAndGhlbWUtY291cnNlJyB8ICdzdGVwLWNvdXJzZSdcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IEVkaXRvckZvb3RlckJ1dHRvbnMgPSB3aXRoUm91dGVyKCh7IHNjaG9vbCwgY291cnNlLCB0YWIsIGFjdGl2ZVRhYiwgZHJhZnRJZCwgaGlzdG9yeSwgY291cnNlVHlwZSwgYmxvY2tJZCB9OiBQcm9wcyAmIFJvdXRlQ29tcG9uZW50UHJvcHMpID0+IDw+XHJcbiAge3RhYiAmJiAoaXNLZWRTdGFmZigpIHx8ICF0YWIubG9ja2VkIHx8IGNvdXJzZS5hbGxvd1JlbW92ZVRhYnMpID8gPGRpdiBjbGFzc05hbWU9XCJidG4gYnRuLXdhcm5pbmcgcHVsbC1yaWdodFwiIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IGRyYWZ0UmVwbyA9IGRiLmJyYW5jaChkcmFmdElkKTtcclxuICAgIGNvbnN0IGNvdXJzZVRhYiA9IGF3YWl0IGRyYWZ0UmVwby5jb3Vyc2VUYWJzXHJcbiAgICAgIC5pbmNsdWRlKFwiY29udGVudHNcIilcclxuICAgICAgLmluY2x1ZGVJZHNPbmx5KClcclxuICAgICAgLmlkKGFjdGl2ZVRhYilcclxuICAgICAgLmxvYWQoKTtcclxuICAgIGNvbnN0IGNvbnRlbnRzID0gYXdhaXQgZHJhZnRSZXBvLmNvdXJzZUNvbnRlbnRzXHJcbiAgICAgIC5pbmNsdWRlKFwidGFza3NcIilcclxuICAgICAgLmluY2x1ZGVJZHNPbmx5KClcclxuICAgICAgLmlkcyhjb3Vyc2VUYWIuY29udGVudHMubWFwKCh7aWR9KSA9PiBpZCkpXHJcbiAgICAgIC50b1ZhbHVlKCkubG9hZCgpO1xyXG4gICAgXHJcbiAgICBpZiAoaXNLZWRTdGFmZigpICYmIHNjaG9vbCA9PT0gJ3N0YW5kYXJkJykge1xyXG4gICAgICAvL1xyXG4gICAgICAvLyBPbmx5IHJlbW92ZSByZWxhdGVkIGNvbnRlbnRzIGFuZCB0YXNrcyBpZiB3ZSBhcmUgZGVsZXRpbmcgYSBwaHlzaWNhbCB0YWIgaGVyZVxyXG4gICAgICAvL1xyXG4gICAgICBjb250ZW50cy5mb3JFYWNoKGNvbnRlbnQgPT4ge1xyXG4gICAgICAgIGNvbnRlbnQudGFza3MuZm9yRWFjaCh0YXNrID0+IHtcclxuICAgICAgICAgIGRyYWZ0UmVwby5jb3Vyc2VDb250ZW50cy5yZW1vdmVSZWxhdGVkKGNvbnRlbnQuaWQsIFwidGFza3NcIiwgdGFzayk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBjb3Vyc2VUYWIuY29udGVudHMuZm9yRWFjaChjb250ZW50ID0+IHtcclxuICAgICAgICBkcmFmdFJlcG8uY291cnNlVGFicy5yZW1vdmVSZWxhdGVkKGNvdXJzZVRhYi5pZCwgXCJjb250ZW50c1wiLCBjb250ZW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoY291cnNlVHlwZSA9PT0gJ3RoZW1lLWNvdXJzZScpIHtcclxuICAgICAgZHJhZnRSZXBvLmNvdXJzZUluc3RhbmNlcy5yZW1vdmVSZWxhdGVkKGNvdXJzZS5pZCwgXCJ0YWJzXCIsIGNvdXJzZVRhYik7XHJcbiAgICB9IGVsc2UgaWYgKGJsb2NrSWQpIHtcclxuICAgICAgZHJhZnRSZXBvLmNvdXJzZUJsb2Nrcy5yZW1vdmVSZWxhdGVkKGJsb2NrSWQsIFwidGFic1wiLCBjb3Vyc2VUYWIpO1xyXG4gICAgfVxyXG4gICAgYXdhaXQgZGIuc2F2ZU5vdygpO1xyXG4gICAgaGlzdG9yeS5wdXNoKGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2UuaWR9L3RhYnMvJC9kcmFmdHMvJHtkcmFmdElkfS9lZGl0YCk7XHJcbiAgfX0+XHJcbiAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS10cmFzaFwiIGFyaWEtaGlkZGVuPXt0cnVlfSAvPiZuYnNwO1xyXG4gICAgICAgIHtMYFRhIGJvcnQgZmxpa2VuYH1cclxuICA8L2Rpdj4gOiBudWxsfVxyXG4gIDxkaXY+XHJcbiAgICA8QWxpZ25Ib3Jpem9udGFsPlxyXG4gICAgICA8SG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiYnRuXCJcclxuICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgaGlzdG9yeS5wdXNoKGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2UuaWR9L3RhYnMvJHthY3RpdmVUYWIgfHwgJyQnfS9kcmFmdHMvJHtkcmFmdElkfWApO1xyXG4gICAgICAgICAgfX1cclxuICAgICAgICA+XHJcbiAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1leWVcIiBhcmlhLWhpZGRlbj17dHJ1ZX0gLz4mbmJzcDtcclxuICAgICAgICAgIHtMYEbDtnJoYW5kc2dyYW5za2FgfVxyXG4gICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICA8L0hvcml6b250YWxJdGVtPlxyXG4gICAgICA8SG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgJm5ic3A7XHJcbiAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiYnRuXCJcclxuICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgaGlzdG9yeS5wdXNoKGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2UuaWR9L2hpc3RvcnlgKTtcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtaGlzdG9yeVwiIGFyaWEtaGlkZGVuPXt0cnVlfSAvPiZuYnNwO1xyXG4gICAgICAgICAge0xgVmVyc2lvbnNoaXN0b3Jpa2B9XHJcbiAgICAgICAgPC9idXR0b24+XHJcbiAgICAgIDwvSG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgIDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICAmbmJzcDtcclxuICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJidG4gYnRuLXdhcm5pbmdcIlxyXG4gICAgICAgICAgb25DbGljaz17YXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCBwdWJsaXNoQ291cnNlKHtcclxuICAgICAgICAgICAgICBzY2hvb2wsXHJcbiAgICAgICAgICAgICAgY291cnNlLFxyXG4gICAgICAgICAgICAgIGRyYWZ0UmVwbzogZGIuYnJhbmNoKGRyYWZ0SWQpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhd2FpdCBkYi5zYXZlTm93KCk7XHJcbiAgICAgICAgICAgIGhpc3RvcnkucHVzaChgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlLmlkfS90YWJzLyR7YWN0aXZlVGFiIHx8ICckJ31gKTtcclxuICAgICAgICAgIH19XHJcbiAgPlxyXG4gICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtcGxheVwiIGFyaWEtaGlkZGVuPXt0cnVlfSAvPiZuYnNwO1xyXG4gICAgICAgICAge0xgUHVibGljZXJhYH1cclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgPC9Ib3Jpem9udGFsSXRlbT5cclxuICAgIDwvQWxpZ25Ib3Jpem9udGFsPlxyXG4gIDwvZGl2PlxyXG4gIDxici8+XHJcbiAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG5cIiBvbkNsaWNrPXsoKT0+XHJcbiAgICAgIGhpc3RvcnkucHVzaChgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlLmlkfS90YWJzLyR7YWN0aXZlVGFiIHx8ICckJ31gKX0+XHJcbiAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1hcnJvdy1sZWZ0XCIgYXJpYS1oaWRkZW49e3RydWV9IC8+Jm5ic3A7XHJcbiAgICB7LypzY2hvb2wgPT09ICdzdGFuZGFyZCcgP1xyXG4gICAgICBMYFZpc2Egb2ZmaWNpZWxsYSBzdGFuZGFyZHZlcnNpb25lbmAgOlxyXG4gIExgVmlzYSBza29sYW5zIG9mZmljaWVsbGEgdmVyc2lvbmAqLyBMYEF2c2x1dGEgcmVkaWdlcmluZ2B9XHJcblxyXG4gIDwvYnV0dG9uPlxyXG5cclxuPC8+KTtcclxuXHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgSGFzaFJvdXRlciBhcyBSb3V0ZXIsIFJvdXRlLCBMaW5rLCBSZWRpcmVjdCwgUm91dGVQcm9wcywgUm91dGVDb21wb25lbnRQcm9wcyB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgeyBFcnJvclN1Y2Nlc3NGZWVkYmFjayB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL2Vycm9yLXN1Y2Nlc3MtZmVlZGJhY2snO1xyXG5pbXBvcnQgeyBCYW5uZXIsIExhenlCYW5uZXIsIEJhbm5lclByb3BzIH0gZnJvbSAnLi4vY29tbW9uL2Jhbm5lcic7XHJcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvbG9hZGluZy1pbmRpY2F0b3InO1xyXG5pbXBvcnQgeyBsaXZlUXVlcnlWaWV3IH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xpdmUtcXVlcnktdmlldyc7XHJcbmltcG9ydCB7IFNjaG9vbHMsIGRiIH0gZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9kYic7XHJcbmltcG9ydCB7IFNjaG9vbCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJ2tlZGJhY2tlbmQvb2JzZXJ2YWJsZSc7XHJcbmltcG9ydCB7IENvdXJzZVZpZXdlclBhZ2UgfSBmcm9tICcuL2NvdXJzZS12aWV3ZXItcGFnZSc7XHJcbmltcG9ydCB7IFR3b0NvbHVtbnNQYWdlIH0gZnJvbSAnLi4vY29tbW9uL3R3by1jb2x1bW5zLXBhZ2UnO1xyXG5pbXBvcnQgeyBXZWVrUGxhbm5lciB9IGZyb20gJy4uLy4uL3dlZWtwbGFubmVyL3dlZWtwbGFubmVyJztcclxuaW1wb3J0IHsgTGlzdENvdXJzZXMgfSBmcm9tICcuL2xpc3QtY291cnNlcyc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IGNmZyBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL0tFRC5jZmcnO1xyXG5pbXBvcnQgeyBSZWRpcmVjdFRvU3RlcCB9IGZyb20gJy4vcmVkaXJlY3QtdG8tc3RlcCc7XHJcbmltcG9ydCB7IFZlcnNpb25IaXN0b3J5UGFnZSB9IGZyb20gJy4vdmVyc2lvbi1oaXN0b3J5JztcclxuaW1wb3J0IHsga2VlcFNlc3Npb25BbGl2ZSB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL2tlZXAtc2Vzc2lvbi1hbGl2ZSc7XHJcbmltcG9ydCB7IHNldHVwRGlhbG9ncyB9IGZyb20gJy4uL2NvbW1vbi9kaWFsb2ctY29udGVudCc7XHJcblxyXG4vLyBLZWVwIFNlc3Npb24gQWxpdmVcclxua2VlcFNlc3Npb25BbGl2ZSgpO1xyXG5cclxuY29uc3QgR2V0TXlTY2hvb2wgPSBsaXZlUXVlcnlWaWV3PHtyZW5kZXI6IChzY2hvb2w6IFNjaG9vbCkgPT4gYW55fT4oKHtyZW5kZXJ9KSA9PlxyXG4gIFNjaG9vbHMubXlTY2hvb2wubWFwKHNjaG9vbCA9PiByZW5kZXIoc2Nob29sKSkpO1xyXG5cclxuZXhwb3J0IGNvbnN0IFN1YmplY3RQbGFubmVyVmlld2VyQXBwID0gc2V0dXBEaWFsb2dzKCgpPT4gPGRpdlxyXG4gIG9uS2V5RG93bj17ZXYgPT4ge1xyXG4gICAgaWYgKGV2LndoaWNoID09PSA4MyAmJiAoZXYuY3RybEtleSB8fCBldi5tZXRhS2V5KSkgeyAvLyBDVFJMLVNcclxuICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgZGIuc2F2ZU5vdygpLnRoZW4oKCk9PntcclxuICAgICAgICAvKi8vIFdoZW4gc2F2ZWQsIGV4aXQgZWRpdCBtb2RlIHNvIHRoYXQgb25lIGNhbiB2aWV3IHRoZSByZXN1bHQgYXMgdXNlcnMgc2VlIGl0LlxyXG4gICAgICAgIGlmIChsb2NhdGlvbi5oYXNoLmVuZHNXaXRoKCcvZWRpdCcpKSB7XHJcbiAgICAgICAgICBsb2NhdGlvbi5oYXNoID0gbG9jYXRpb24uaGFzaC5zdWJzdHIoMCwgbG9jYXRpb24uaGFzaC5sZW5ndGggLSAnL2VkaXQnLmxlbmd0aCk7XHJcbiAgICAgICAgfSovXHJcbiAgICAgIH0pO1xyXG4gICAgfX19PlxyXG4gIDxSb3V0ZXI+XHJcbiAgICA8PlxyXG4gICAgICA8Um91dGUgcGF0aD1cIi9cIiBleGFjdCByZW5kZXI9eygpPT48UmVkaXJlY3QgdG89e2AvY291cnNlc2B9IC8+fSAvPlxyXG4gICAgICA8Um91dGUgcGF0aD1cIi9jb3Vyc2VzXCIgZXhhY3QgcmVuZGVyPXsoKT0+PD5cclxuICAgICAgICA8QmFubmVyXHJcbiAgICAgICAgICB0aXRsZT17TGBLdXJzZXJgfVxyXG4gICAgICAgICAgdGFicz17W119XHJcbiAgICAgICAgICBhY3RpdmVUYWI9XCIkXCJcclxuICAgICAgICAvPlxyXG4gICAgICAgIDxUd29Db2x1bW5zUGFnZVxyXG4gICAgICAgICAgbGVmdD17PExpc3RDb3Vyc2VzIHNob3dJbmFjdGl2ZT17dHJ1ZX0gLz59XHJcbiAgICAgICAgICByaWdodD17PFdlZWtQbGFubmVyIGVudj17ZW52fSB2aWV3Q291cnNlVXJsPXtjZmcuS0VEX0NPVVJTRV9WSUVXRVJfVVJMfSAvPn1cclxuICAgICAgICAgIHJpZ2h0V2lkdGg9ezV9XHJcbiAgICAgICAgLz5cclxuICAgICAgPC8+fS8+XHJcblxyXG4gICAgICB7LyogUmVkaXJlY3QgZnJvbSBcIi9jb3Vyc2VzLy4uLlwiIHRvIFwiL3tteVNjaG9vbH0vY291cnNlcy8uLi5cIiAqL31cclxuICAgICAgPFJvdXRlIHBhdGg9XCIvY291cnNlcy86Y291cnNlSWRcIiBleGFjdD17ZmFsc2V9IHJlbmRlcj17KHttYXRjaH0pPT5cclxuICAgICAgICA8R2V0TXlTY2hvb2wgcmVuZGVyPXsoc2Nob29sOiBTY2hvb2wpID0+XHJcbiAgICAgICAgICA8UmVkaXJlY3QgdG89e1xyXG4gICAgICAgICAgICBgLyR7c2Nob29sLm5hbWV9L2NvdXJzZXMvJHttYXRjaC5wYXJhbXMuY291cnNlSWR9YH1cclxuICAgICAgICAgIC8+fVxyXG4gICAgICAgIC8+fVxyXG4gICAgICAvPlxyXG5cclxuICAgICAgey8qIFZpZXcgQ291cnNlIHdpdGhvdXQga25vd2luZyB3aGljaCB0YWIgKi99XHJcbiAgICAgIDxSb3V0ZSBleGFjdCBwYXRoPVwiLzpzY2hvb2wvY291cnNlcy86Y291cnNlSWRcIiByZW5kZXI9eyh7bWF0Y2h9KSA9PiB7XHJcbiAgICAgICAgY29uc3Qge3NjaG9vbCwgY291cnNlSWR9ID0gbWF0Y2gucGFyYW1zO1xyXG4gICAgICAgIHJldHVybiA8Q291cnNlVmlld2VyUGFnZVxyXG4gICAgICAgICAgc2Nob29sPXtzY2hvb2x9XHJcbiAgICAgICAgICBjb3Vyc2VJZD17Y291cnNlSWR9IC8+O1xyXG4gICAgICAgIH19ICAvPlxyXG5cclxuICAgICAgey8qPFJvdXRlIHBhdGg9XCIvOnNjaG9vbC9jb3Vyc2VzLzpjb3Vyc2VJZC9lZGl0XCIgcmVuZGVyPXsoe21hdGNofSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHtzY2hvb2wsIGNvdXJzZUlkfSA9IG1hdGNoLnBhcmFtcztcclxuICAgICAgICByZXR1cm4gPENvdXJzZUluc3RhbmNlVmlld1xyXG4gICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgIGNvdXJzZUlkPXtjb3Vyc2VJZH0gLz47XHJcbiAgICAgICAgfX0gIC8+Ki99XHJcblxyXG4gICAgICB7LyogVmlldyBDb3Vyc2Ugd2l0aCBjZXJ0YWluIGFjdGl2ZSB0YWIgKi99XHJcbiAgICAgIDxSb3V0ZSBleGFjdCBwYXRoPVwiLzpzY2hvb2wvY291cnNlcy86Y291cnNlSWQvdGFicy86dGFiSWQ/XCIgcmVuZGVyPXsoe21hdGNofSkgPT4ge1xyXG4gICAgICAgICAgY29uc3Qge3NjaG9vbCwgY291cnNlSWQsIHRhYklkfSA9IG1hdGNoLnBhcmFtcztcclxuICAgICAgICAgIHJldHVybiA8Q291cnNlVmlld2VyUGFnZVxyXG4gICAgICAgICAgICBzY2hvb2w9e3NjaG9vbH1cclxuICAgICAgICAgICAgY291cnNlSWQ9e2NvdXJzZUlkfVxyXG4gICAgICAgICAgICBhY3RpdmVUYWI9e3RhYklkfSAvPn19IC8+XHJcblxyXG4gICAgICB7LyogVmlldyBkcmFmdCB3aXRob3V0IGtub3dpbmcgdGFiICovfVxyXG4gICAgICA8Um91dGUgZXhhY3QgcGF0aD1cIi86c2Nob29sL2NvdXJzZXMvOmNvdXJzZUlkL3NldHRpbmdzLzpkcmFmdElkXCJcclxuICAgICAgICByZW5kZXI9eyh7bWF0Y2h9KSA9PiB7XHJcbiAgICAgICAgICBjb25zdCB7c2Nob29sLCBjb3Vyc2VJZCwgZHJhZnRJZH0gPSBtYXRjaC5wYXJhbXM7XHJcbiAgICAgICAgICByZXR1cm4gPENvdXJzZVZpZXdlclBhZ2VcclxuICAgICAgICAgICAgc2Nob29sPXtzY2hvb2x9XHJcbiAgICAgICAgICAgIGNvdXJzZUlkPXtjb3Vyc2VJZH1cclxuICAgICAgICAgICAgYWN0aXZlVGFiPVwiJHNldHRpbmdzXCJcclxuICAgICAgICAgICAgZHJhZnRJZD17ZHJhZnRJZH0gLz59fSAvPlxyXG5cclxuICAgICAgey8qIFZpZXcgZHJhZnQgYW5kIGNlcnRhaW4gdGFiICovfVxyXG4gICAgICA8Um91dGUgZXhhY3QgcGF0aD1cIi86c2Nob29sL2NvdXJzZXMvOmNvdXJzZUlkL3RhYnMvOnRhYklkL2RyYWZ0cy86ZHJhZnRJZFwiXHJcbiAgICAgICAgcmVuZGVyPXsoe21hdGNofSkgPT4ge1xyXG4gICAgICAgICAgY29uc3Qge3NjaG9vbCwgY291cnNlSWQsIHRhYklkLCBkcmFmdElkfSA9IG1hdGNoLnBhcmFtcztcclxuICAgICAgICAgIHJldHVybiA8Q291cnNlVmlld2VyUGFnZVxyXG4gICAgICAgICAgICBzY2hvb2w9e3NjaG9vbH1cclxuICAgICAgICAgICAgY291cnNlSWQ9e2NvdXJzZUlkfVxyXG4gICAgICAgICAgICBhY3RpdmVUYWI9e3RhYklkfVxyXG4gICAgICAgICAgICBkcmFmdElkPXtkcmFmdElkfSAvPn19IC8+XHJcblxyXG4gICAgICB7LyogRWRpdCBkcmFmdCBhbmQgY2VydGFpbiB0YWIgKi99XHJcbiAgICAgIDxSb3V0ZSBleGFjdCBwYXRoPVwiLzpzY2hvb2wvY291cnNlcy86Y291cnNlSWQvdGFicy86dGFiSWQvZHJhZnRzLzpkcmFmdElkL2VkaXRcIlxyXG4gICAgICAgIHJlbmRlcj17KHttYXRjaH0pID0+IHtcclxuICAgICAgICAgIGNvbnN0IHtzY2hvb2wsIGNvdXJzZUlkLCB0YWJJZCwgZHJhZnRJZH0gPSBtYXRjaC5wYXJhbXM7XHJcbiAgICAgICAgICByZXR1cm4gPENvdXJzZVZpZXdlclBhZ2VcclxuICAgICAgICAgICAgc2Nob29sPXtzY2hvb2x9XHJcbiAgICAgICAgICAgIGNvdXJzZUlkPXtjb3Vyc2VJZH1cclxuICAgICAgICAgICAgYWN0aXZlVGFiPXt0YWJJZH1cclxuICAgICAgICAgICAgZHJhZnRJZD17ZHJhZnRJZH1cclxuICAgICAgICAgICAgZWRpdE1vZGU9e3RydWV9IC8+fX0gLz5cclxuXHJcbiAgICAgIHsvKiBWaWV3IHRhc2sgKi99XHJcbiAgICAgIDxSb3V0ZSBleGFjdCBwYXRoPVwiLzpzY2hvb2wvY291cnNlcy86Y291cnNlSWQvdGFicy86dGFiSWQvdGFza3MvOnRhc2tJZFwiXHJcbiAgICAgICAgcmVuZGVyPXsoe21hdGNofSkgPT4ge1xyXG4gICAgICAgICAgY29uc3Qge3NjaG9vbCwgY291cnNlSWQsIHRhYklkLCB0YXNrSWR9ID0gbWF0Y2gucGFyYW1zO1xyXG4gICAgICAgICAgcmV0dXJuIDxDb3Vyc2VWaWV3ZXJQYWdlXHJcbiAgICAgICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgICAgICBjb3Vyc2VJZD17Y291cnNlSWR9XHJcbiAgICAgICAgICAgIGFjdGl2ZVRhYj17dGFiSWR9XHJcbiAgICAgICAgICAgIHRhc2tJZD17dGFza0lkfVxyXG4gICAgICAgICAgICBlZGl0TW9kZT17ZmFsc2V9IC8+fX0gLz5cclxuXHJcbiAgICAgIHsvKiBWaWV3IHRhc2sgb24gY2VydGFpbiBkcmFmdCAocHJldmlldyBtb2RlKSAqL31cclxuICAgICAgPFJvdXRlIGV4YWN0IHBhdGg9XCIvOnNjaG9vbC9jb3Vyc2VzLzpjb3Vyc2VJZC90YWJzLzp0YWJJZC9jb250ZW50cy86Y29udGVudElkL3Rhc2tzLzp0YXNrSWQvZHJhZnRzLzpkcmFmdElkXCJcclxuICAgICAgICByZW5kZXI9eyh7bWF0Y2h9KSA9PiB7XHJcbiAgICAgICAgICBjb25zdCB7c2Nob29sLCBjb3Vyc2VJZCwgdGFiSWQsIHRhc2tJZCwgZHJhZnRJZCwgY29udGVudElkIH0gPSBtYXRjaC5wYXJhbXM7XHJcbiAgICAgICAgICByZXR1cm4gPENvdXJzZVZpZXdlclBhZ2VcclxuICAgICAgICAgICAgc2Nob29sPXtzY2hvb2x9XHJcbiAgICAgICAgICAgIGNvdXJzZUlkPXtjb3Vyc2VJZH1cclxuICAgICAgICAgICAgYWN0aXZlVGFiPXt0YWJJZH1cclxuICAgICAgICAgICAgdGFza0lkPXt0YXNrSWR9XHJcbiAgICAgICAgICAgIGNvbnRlbnRJZD17Y29udGVudElkfVxyXG4gICAgICAgICAgICBkcmFmdElkPXtkcmFmdElkfVxyXG4gICAgICAgICAgICBlZGl0TW9kZT17ZmFsc2V9IC8+fX0gLz5cclxuXHJcbiAgICAgIHsvKiBFZGl0IHRhc2sgb24gY2VydGFpbiBkcmFmdCAqL31cclxuICAgICAgPFJvdXRlIGV4YWN0IHBhdGg9XCIvOnNjaG9vbC9jb3Vyc2VzLzpjb3Vyc2VJZC90YWJzLzp0YWJJZC9jb250ZW50cy86Y29udGVudElkL3Rhc2tzLzp0YXNrSWQvZHJhZnRzLzpkcmFmdElkL2VkaXRcIlxyXG4gICAgICAgIHJlbmRlcj17KHttYXRjaH0pID0+IHtcclxuICAgICAgICAgIGNvbnN0IHtzY2hvb2wsIGNvdXJzZUlkLCB0YWJJZCwgY29udGVudElkLCB0YXNrSWQsIGRyYWZ0SWR9ID0gbWF0Y2gucGFyYW1zO1xyXG4gICAgICAgICAgcmV0dXJuIDxDb3Vyc2VWaWV3ZXJQYWdlXHJcbiAgICAgICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgICAgICBjb3Vyc2VJZD17Y291cnNlSWR9XHJcbiAgICAgICAgICAgIGFjdGl2ZVRhYj17dGFiSWR9XHJcbiAgICAgICAgICAgIGNvbnRlbnRJZD17Y29udGVudElkfVxyXG4gICAgICAgICAgICB0YXNrSWQ9e3Rhc2tJZH1cclxuICAgICAgICAgICAgZHJhZnRJZD17ZHJhZnRJZH1cclxuICAgICAgICAgICAgZWRpdE1vZGU9e3RydWV9IC8+fX0gLz5cclxuICAgICAgXHJcbiAgICAgIHsvKiBTdGVwIGNvdXJzZXM6IExpbmsgdG8gY2VydGFpbiBibG9jayBhbmQgc3RlcCAqL31cclxuICAgICAgPFJvdXRlIGV4YWN0IHBhdGg9XCIvOnNjaG9vbC9jb3Vyc2VzLzpjb3Vyc2VJZC9ibG9ja3MvOmJsb2NrSWQvc3RlcHMvOnN0ZXBOb1wiXHJcbiAgICAgICAgcmVuZGVyPXsoe21hdGNofSkgPT4ge1xyXG4gICAgICAgICAgY29uc3Qge3NjaG9vbCwgY291cnNlSWQsIGJsb2NrSWQsIHN0ZXBOb30gPSBtYXRjaC5wYXJhbXM7XHJcbiAgICAgICAgICByZXR1cm4gPFJlZGlyZWN0VG9TdGVwXHJcbiAgICAgICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgICAgICBjb3Vyc2VJZD17Y291cnNlSWR9XHJcbiAgICAgICAgICAgIGJsb2NrSWQ9e2Jsb2NrSWR9XHJcbiAgICAgICAgICAgIHN0ZXBObz17c3RlcE5vfVxyXG4gICAgICAgICAgIC8+O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgLz5cclxuXHJcbiAgICAgIHsvKiBFZGl0IHZlcnNpb24gaGlzdG9yeSAqL31cclxuICAgICAgPFJvdXRlIGV4YWN0IHBhdGg9XCIvOnNjaG9vbC9jb3Vyc2VzLzpjb3Vyc2VJZC9oaXN0b3J5XCJcclxuICAgICAgICByZW5kZXI9eyh7bWF0Y2h9KSA9PiB7XHJcbiAgICAgICAgICBjb25zdCB7c2Nob29sLCBjb3Vyc2VJZCwgYmxvY2tJZCwgc3RlcE5vfSA9IG1hdGNoLnBhcmFtcztcclxuICAgICAgICAgIHJldHVybiA8VmVyc2lvbkhpc3RvcnlQYWdlXHJcbiAgICAgICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgICAgICBjb3Vyc2VJZD17Y291cnNlSWR9XHJcbiAgICAgICAgICAgLz47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAvPlxyXG5cclxuICAgICAgPEVycm9yU3VjY2Vzc0ZlZWRiYWNrIC8+XHJcbiAgICAgIDxMb2FkaW5nSW5kaWNhdG9yIC8+XHJcbiAgICA8Lz5cclxuICA8L1JvdXRlcj5cclxuPC9kaXY+KVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBsaXZlUXVlcnlWaWV3IH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xpdmUtcXVlcnktdmlldyc7XHJcbmltcG9ydCB7IGxpc3RDb3Vyc2VJbnN0YW5jZXMgfSBmcm9tICcuLi8uLi9sb2dpYy9saXN0LWNvdXJzZS1pbnN0YW5jZXMnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBTdHVkZW50Q291cnNlc0JveCB9IGZyb20gJy4vc3R1ZGVudC1jb3Vyc2VzLWJveCc7XHJcbi8vaW1wb3J0IGVudiBmcm9tICcuLi8uLi8uLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBzaG93SW5hY3RpdmU/OiBib29sZWFuXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBMaXN0Q291cnNlcyA9IGxpdmVRdWVyeVZpZXcoKHtzaG93SW5hY3RpdmV9OiBQcm9wcyk9PlxyXG4gIChzaG93SW5hY3RpdmUgP1xyXG4gICAgbGlzdENvdXJzZUluc3RhbmNlcygpIDpcclxuICAgIGxpc3RDb3Vyc2VJbnN0YW5jZXMoKS50YWdzKFwiYWN0aXZlXCIpXHJcbiAgKSAub3JkZXJCeShcIm5hbWVcIilcclxuICAgIC5tYXAoKHtpZCwgbmFtZSwgdHlwZSwgZGVzY3JpcHRpb24sIHRhZ3N9KSA9PiAoe1xyXG4gICAgICBpZCxcclxuICAgICAgbmFtZSxcclxuICAgICAgdHlwZSxcclxuICAgICAgdGFncyxcclxuICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICAgIHVybDogYC9jb3Vyc2VzLyR7aWR9YFxyXG4gICAgfSkpXHJcbiAgICAuZ3JvdXBCeShcInR5cGVcIilcclxuICAgIC5tYXAoYXJyYXlzQnlUeXBlID0+ICh7XHJcbiAgICAgIHRoZW1lQ291cnNlczogYXJyYXlzQnlUeXBlW1widGhlbWUtY291cnNlXCJdLFxyXG4gICAgICBzdGVwQ291cnNlczogYXJyYXlzQnlUeXBlW1wic3RlcC1jb3Vyc2VcIl1cclxuICAgIH0pKVxyXG4gICAgLm1hcCgoe3RoZW1lQ291cnNlcywgc3RlcENvdXJzZXN9KSA9PiA8PlxyXG5cclxuICAgICAge3RoZW1lQ291cnNlcyAmJiA8U3R1ZGVudENvdXJzZXNCb3ggXHJcbiAgICAgICAgdGl0bGU9e0xgVGVtYWt1cnNlcmB9XHJcbiAgICAgICAgY291cnNlcz17dGhlbWVDb3Vyc2VzfVxyXG4gICAgICAvPn1cclxuXHJcbiAgICAgIHtzdGVwQ291cnNlcyAmJiA8U3R1ZGVudENvdXJzZXNCb3hcclxuICAgICAgICB0aXRsZT17TGBTdGVna3Vyc2VyYH1cclxuICAgICAgICBjb3Vyc2VzPXtzdGVwQ291cnNlc31cclxuICAgICAgLz59XHJcblxyXG48Lz4pKTtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgeyBBbGlnbkhvcml6b250YWwgfSBmcm9tICcuLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvYWxpZ24taG9yaXpvbnRhbCc7XHJcbmltcG9ydCB7IEhvcml6b250YWxJdGVtIH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2hvcml6b250YWwtaXRlbSc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHRpdGxlOiBzdHJpbmc7XHJcbiAgY291cnNlczogQXJyYXk8e1xyXG4gICAgbmFtZTogc3RyaW5nLFxyXG4gICAgZGVzY3JpcHRpb246IHN0cmluZyxcclxuICAgIHRhZ3M6IHN0cmluZ1tdLFxyXG4gICAgdXJsOiBzdHJpbmcsXHJcbiAgICBpZDogc3RyaW5nXHJcbiAgfT47XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBTdHVkZW50Q291cnNlc0JveCA9ICh7dGl0bGUsIGNvdXJzZXN9OiBQcm9wcykgPT5cclxuICA8ZGl2IGNsYXNzTmFtZT1cImtlZF9ib3hlZFwiPlxyXG4gICAgPGgzPnt0aXRsZX08L2gzPlxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJ0YXNrQ29udGFpbmVyIG9kZC1ldmVuXCI+XHJcbiAgICAgIHtjb3Vyc2VzLm1hcCgoe2lkLCBuYW1lLCBkZXNjcmlwdGlvbiwgdGFnc30pID0+XHJcbiAgICAgICAgPEFsaWduSG9yaXpvbnRhbD5cclxuICAgICAgICAgIDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdHVkZW50Q291cnNlXCI+XHJcbiAgICAgICAgICAgICAgPExpbmsgdG89e2AvY291cnNlcy8ke2lkfWB9PntuYW1lfTwvTGluaz5cclxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJzbWFsbFwiPntkZXNjcmlwdGlvbn08L3A+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9Ib3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgIHt0YWdzLmluY2x1ZGVzKFwiYWN0aXZlXCIpID8gdW5kZWZpbmVkIDogPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBpbGwgaW5jb21wbGV0ZVwiPkluYWt0aXY8L2Rpdj5cclxuICAgICAgICAgIDwvSG9yaXpvbnRhbEl0ZW0+fVxyXG4gICAgICAgIDwvQWxpZ25Ib3Jpem9udGFsPlxyXG4gICAgICApfVxyXG4gICAgPC9kaXY+XHJcbiAgPC9kaXY+XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IExhenlDb250ZW50IH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xhenktY29udGVudCc7XHJcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vLi4vLi4vZ2xvYmFscy9kYic7XHJcbmltcG9ydCB7IGNvbXBhcmVQcm9wIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBSZWRpcmVjdCB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBzY2hvb2w6IHN0cmluZ1xyXG4gIGNvdXJzZUlkOiBzdHJpbmdcclxuICBibG9ja0lkOiBzdHJpbmdcclxuICBzdGVwTm86IHN0cmluZyB8IG51bWJlclxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgUmVkaXJlY3RUb1N0ZXAgPSAoe1xyXG4gIHNjaG9vbCxcclxuICBjb3Vyc2VJZCxcclxuICBibG9ja0lkLFxyXG4gIHN0ZXBOb1xyXG59OiBQcm9wcykgPT4gPExhenlDb250ZW50PntcclxuICBkYi5vcHRpbWl6ZUNhY2hlKCkuc2Nob29scy5uYW1lKHNjaG9vbCkuc2luZ2xlKClcclxuICAgIC5tYXAoc2Nob29sID0+IGRiLmJyYW5jaChzY2hvb2wub2ZmaWNpYWxCcmFuY2hJZCkpXHJcbiAgICAuc3dpdGNoTWFwKGJyYW5jaFJlcG8gPT5cclxuICAgICAgYnJhbmNoUmVwby5jb3Vyc2VCbG9ja3MuaW5jbHVkZShcInRhYnNcIikuaWQoYmxvY2tJZClcclxuICAgICAgICAubWFwKGJsb2NrID0+IHtcclxuICAgICAgICAgIGNvbnN0IGZpcnN0VGFiID0gYmxvY2sudGFicy5maWx0ZXIodGFiID0+ICcnK3RhYi5zdGVwTm8gPT09ICcnK3N0ZXBObykuc29ydChjb21wYXJlUHJvcChcIm9yZGVyXCIpKVswXTtcclxuICAgICAgICAgIGlmIChmaXJzdFRhYilcclxuICAgICAgICAgICAgcmV0dXJuIDxSZWRpcmVjdFxyXG4gICAgICAgICAgICAgIHRvPXtgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9L3RhYnMvJHtmaXJzdFRhYi5pZH1gfVxyXG4gICAgICAgICAgICAvPjtcclxuICAgICAgICAgIHJldHVybiA8UmVkaXJlY3RcclxuICAgICAgICAgICAgdG89e2AvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2VJZH1gfVxyXG4gICAgICAgICAgLz47XHJcbiAgICAgICAgfSkpXHJcbn08L0xhenlDb250ZW50PiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEFsaWduSG9yaXpvbnRhbCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9hbGlnbi1ob3Jpem9udGFsJztcclxuaW1wb3J0IHsgQ291cnNlSW5zdGFuY2UsIENvdXJzZVRhYiwgQ291cnNlQmxvY2ssIFRoZW1lQ291cnNlSW5zdGFuY2UgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IEhvcml6b250YWxJdGVtIH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2hvcml6b250YWwtaXRlbSc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvLCBTdHJpcEdyYXBocyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IGZsYXR0ZW4gfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IGdldFNjaG9vbFllYXJzLCBjb21wdXRlQ291cnNlSW5zdGFuY2VUYWdzIH0gZnJvbSAnLi4vbG9naWMvY291cnNlLWluc3RhbmNlLXRhZ3MnO1xyXG5pbXBvcnQgeyBUYWJSZXF1aXJlbWVudHMgfSBmcm9tICcuL3RhYi1zZXR0aW5ncy1yZXF1aXJlbWVudHMnO1xyXG5pbXBvcnQgeyBPcGVuQ2xvc2VCb3ggfSBmcm9tICcuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvb3Blbi1jbG9zZS1ib3gnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBjb3Vyc2U6IENvdXJzZUluc3RhbmNlO1xyXG4gIHRhYjogU3RyaXBHcmFwaHM8Q291cnNlVGFiPjtcclxuICBibG9jaz86IENvdXJzZUJsb2NrO1xyXG4gIHJlcG86IEtlZEJhY2tlbmRSZXBvO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgVGFiU2V0dGluZ3NBZG1pbiA9ICh7IHRhYiwgcmVwbywgY291cnNlLCBibG9jayB9OiBQcm9wcykgPT4ge1xyXG4gIGNvbnN0IHsgc3ViamVjdENvZGUsIHN1YmplY3ROYW1lIH0gPSB0YWIuc3ViamVjdCA/XHJcbiAgICB0YWIuc3ViamVjdCA6XHJcbiAgICBjb3Vyc2UudHlwZSA9PT0gJ3RoZW1lLWNvdXJzZScgJiYgY291cnNlLnN1YmplY3RzICYmIGNvdXJzZS5zdWJqZWN0cy5sZW5ndGggPiAwID9cclxuICAgICAgeyBzdWJqZWN0Q29kZTogY291cnNlLnN1YmplY3RzWzBdLmNvZGUsIHN1YmplY3ROYW1lOiBjb3Vyc2Uuc3ViamVjdHNbMF0ubmFtZSB9IDpcclxuICAgICAgY291cnNlLnR5cGUgPT09ICdzdGVwLWNvdXJzZScgP1xyXG4gICAgICAgIHsgc3ViamVjdENvZGU6IGNvdXJzZS5zdWJqZWN0LnN1YmplY3RDb2RlLCBzdWJqZWN0TmFtZTogY291cnNlLnN1YmplY3Quc3ViamVjdE5hbWUgfSA6XHJcbiAgICAgICAgeyBzdWJqZWN0Q29kZTogJycsIHN1YmplY3ROYW1lOiAnJyB9O1xyXG4gIGNvbnN0IGNvdXJzZVNjaG9vbFllYXJzID0gZ2V0U2Nob29sWWVhcnMoY291cnNlLnRhZ3MpO1xyXG4gIGNvbnN0IHNjaG9vbFllYXI6IG51bGwgfCBzdHJpbmcgPSBnZXRTY2hvb2xZZWFycyh0YWIudGFncylbMF0gfHwgY291cnNlU2Nob29sWWVhcnNbMF0gfHwgbnVsbDtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIC8vXHJcbiAgICAvLyBFZGl0IFwic3RhbmRhcmRcIiBzY2hvb2w6IENob29zZSB0YWIgdHlwZVxyXG4gICAgLy9cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwia2VkX2JveGVkXCI+XHJcbiAgICAgIDxwIGNsYXNzTmFtZT1cImJveC1taW5pLWxhYmVsXCI+e0xgQWRtaW5pc3RyYXRpdmEgSW5zdMOkbGxuaW5nYXIgZsO2ciBmbGlrZW4gJHt0YWIubmFtZSB8fCB0YWIudGFiVGl0bGV9YH08L3A+XHJcbiAgICAgIDxBbGlnbkhvcml6b250YWw+XHJcbiAgICAgICAgPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNoZWNrZWQ9e3RhYi5sb2NrZWR9XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtldiA9PiByZXBvLmNvdXJzZVRhYnMudXBkYXRlKHRhYiwgeyBsb2NrZWQ6ICEhZXYudGFyZ2V0LmNoZWNrZWQgfSl9IC8+XHJcbiAgICAgICAgPC9Ib3Jpem9udGFsSXRlbT5cclxuICAgICAgICA8SG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgICB7TGBMw6VzIGZsaWtlbiBmcsOlbiByZWRpZ2VyaW5nIGbDtnJ1dG9tIGTDpHIgZGV0IGV4cGxpY2l0IHRpbGzDpXRzYH1cclxuICAgICAgICA8L0hvcml6b250YWxJdGVtPlxyXG4gICAgICA8L0FsaWduSG9yaXpvbnRhbD5cclxuICAgICAge2NvdXJzZS50eXBlID09PSAnc3RlcC1jb3Vyc2UnICYmIDw+XHJcbiAgICAgICAgPGJyLz5cclxuICAgICAgICA8T3BlbkNsb3NlQm94IHRpdGxlPXtMYEF2YW5jZXJhdC4uLmB9PlxyXG4gICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG5cIiBvbkNsaWNrPXthc3luYyAoKT0+e1xyXG4gICAgICAgICAgICBjb25zdCBzY2hvb2xZZWFyID0gZ2V0U2Nob29sWWVhcnMoYmxvY2sudGFncylbMF07XHJcbiAgICAgICAgICAgIGF3YWl0IHVwZGF0ZVN1YmplY3RBbmRTY2hvb2xZZWFycyhjb3Vyc2UsIGNvdXJzZS5zdWJqZWN0LnN1YmplY3ROYW1lLCBjb3Vyc2Uuc3ViamVjdC5zdWJqZWN0Q29kZSwgc2Nob29sWWVhcik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB9PntMYEfDtnIgb20ga29wcGxpbmdlbiB0aWxsIMOkbW5lIG9jaCDDpXJza3Vyc3NwYW5uYH08L2J1dHRvbj5cclxuICAgICAgICA8L09wZW5DbG9zZUJveD5cclxuICAgICAgPC8+fVxyXG4gICAgICB7Y291cnNlLnR5cGUgPT09ICd0aGVtZS1jb3Vyc2UnICYmIHRhYi50YWJDbGFzcyA9PT0gJ3N1YmplY3QtdGFiJyAmJiAhIXN1YmplY3RDb2RlICYmIDw+XHJcbiAgICAgICAgPGJyLz5cclxuICAgICAgICB7Y291cnNlLnN1YmplY3RzLmxlbmd0aCA+IDEgJiYgPEFsaWduSG9yaXpvbnRhbD5cclxuICAgICAgICAgIDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImtjbGFiZWxcIj57TGDDhG1uZWB9PC9sYWJlbD5cclxuICAgICAgICAgIDwvSG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgICA8SG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgICAgIDxzZWxlY3RcclxuICAgICAgICAgICAgICB2YWx1ZT17c3ViamVjdENvZGV9XHJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2FzeW5jIGV2ID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGlzIHRhYidzIHN1YmplY3QgYW5kIHRhZ3NcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN1YmplY3RDb2RlID0gZXYudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3ViamVjdE5hbWUgPSBjb3Vyc2Uuc3ViamVjdHNcclxuICAgICAgICAgICAgICAgICAgLmZpbHRlcihzID0+IHMuY29kZSA9PT0gc3ViamVjdENvZGUpXHJcbiAgICAgICAgICAgICAgICAgIC5tYXAocyA9PiBzLm5hbWUpWzBdIHx8IHN1YmplY3RDb2RlO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlU3ViamVjdEFuZFNjaG9vbFllYXJzKGNvdXJzZSwgc3ViamVjdE5hbWUsIHN1YmplY3RDb2RlLCBzY2hvb2xZZWFyKTtcclxuICAgICAgICAgICAgICB9fT5cclxuICAgICAgICAgICAgICB7Y291cnNlLnN1YmplY3RzLm1hcCgoeyBuYW1lLCBjb2RlIH0pID0+XHJcbiAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17Y29kZX0gdmFsdWU9e2NvZGV9PntuYW1lfTwvb3B0aW9uPil9XHJcbiAgICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgICAgPC9Ib3Jpem9udGFsSXRlbT5cclxuICAgICAgICA8L0FsaWduSG9yaXpvbnRhbD59XHJcbiAgICAgICAge2NvdXJzZVNjaG9vbFllYXJzLmxlbmd0aCA+IDEgJiYgPD5cclxuXHJcbiAgICAgICAgICA8QWxpZ25Ib3Jpem9udGFsPlxyXG4gICAgICAgICAgICA8SG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImtjbGFiZWxcIj57TGBWw6RsaiDDpXJza3Vyc2B9PC9sYWJlbD5cclxuICAgICAgICAgICAgPC9Ib3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgICAgPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgICAgICAgIDxzZWxlY3QgdmFsdWU9e3NjaG9vbFllYXJ9XHJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17YXN5bmMgZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBzY2hvb2xZZWFyID0gZXYudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBzdWJqZWN0TmFtZSA9IGNvdXJzZS5zdWJqZWN0c1xyXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIocyA9PiBzLmNvZGUgPT09IHN1YmplY3RDb2RlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5tYXAocyA9PiBzLm5hbWUpWzBdIHx8IHN1YmplY3RDb2RlO1xyXG4gICAgICAgICAgICAgICAgICBhd2FpdCB1cGRhdGVTdWJqZWN0QW5kU2Nob29sWWVhcnMoY291cnNlLCBzdWJqZWN0TmFtZSwgc3ViamVjdENvZGUsIHNjaG9vbFllYXIpO1xyXG4gICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICB7Y291cnNlU2Nob29sWWVhcnMubWFwKHllYXIgPT4gPG9wdGlvbiBrZXk9e3llYXJ9IHZhbHVlPXt5ZWFyfT57TGDDhXJza3VycyAke3llYXJ9YH08L29wdGlvbj4pfVxyXG4gICAgICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgICAgICA8L0hvcml6b250YWxJdGVtPlxyXG4gICAgICAgICAgPC9BbGlnbkhvcml6b250YWw+XHJcbiAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICA8VGFiUmVxdWlyZW1lbnRzIHJlcG89e3JlcG99IHRhYj17dGFifSAvPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8YnIvPlxyXG4gICAgICAgICAgPE9wZW5DbG9zZUJveCB0aXRsZT17TGBBdmFuY2VyYXQuLi5gfT5cclxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG5cIiBvbkNsaWNrPXthc3luYyAoKT0+e1xyXG4gICAgICAgICAgICAgIGF3YWl0IHVwZGF0ZVN1YmplY3RBbmRTY2hvb2xZZWFycyhjb3Vyc2UsIHN1YmplY3ROYW1lLCBzdWJqZWN0Q29kZSwgc2Nob29sWWVhcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfT57TGBHw7ZyIG9tIGtvcHBsaW5nZW4gdGlsbCDDpG1uZSBvY2ggw6Vyc2t1cnNzcGFubmB9PC9idXR0b24+XHJcbiAgICAgICAgICA8L09wZW5DbG9zZUJveD5cclxuXHJcbiAgICAgICAgPC8+fVxyXG4gICAgICA8Lz59XHJcbiAgICA8L2Rpdj5cclxuICApO1xyXG5cclxuICBhc3luYyBmdW5jdGlvbiB1cGRhdGVTdWJqZWN0QW5kU2Nob29sWWVhcnMoY291cnNlOiBTdHJpcEdyYXBoczxDb3Vyc2VJbnN0YW5jZT4sIHN1YmplY3ROYW1lOiBzdHJpbmcsIHN1YmplY3RDb2RlOiBzdHJpbmcsIHNjaG9vbFllYXI6IHN0cmluZykge1xyXG4gICAgY29uc3QgdGFiVGFncyA9IGNvbXB1dGVDb3Vyc2VJbnN0YW5jZVRhZ3ModGFiLnRhZ3MsIFtzdWJqZWN0Q29kZV0sIFtzY2hvb2xZZWFyXSk7XHJcblxyXG4gICAgcmVwby5jb3Vyc2VUYWJzLnVwZGF0ZSh0YWIsIHtcclxuICAgICAgc3ViamVjdDoge1xyXG4gICAgICAgIHN1YmplY3RDb2RlLFxyXG4gICAgICAgIHN1YmplY3ROYW1lXHJcbiAgICAgIH0sXHJcbiAgICAgIHRhZ3M6IHRhYlRhZ3NcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEFsc28gdXBkYXRlIGFsbCB0YXNrcyBjb25uZWN0ZWQgdG8gdGhpcyB0YWJcclxuICAgIC8vIE5lZWQgdG8gbW92ZSB0aGVtIHRvIHRoZSBuZXcgc3ViamVjdFxyXG4gICAgY29uc3QgbGdDb250ZW50cyA9IGF3YWl0IHJlcG8uY291cnNlQ29udGVudHNcclxuICAgICAgLmhhc0VkZ2VzRnJvbShbdGFiLmlkXSlcclxuICAgICAgLmluY2x1ZGUoXCJ0YXNrc1wiKVxyXG4gICAgICAuaW5jbHVkZUlkc0FuZE5hbWVzT25seSgpXHJcbiAgICAgIC50b1ZhbHVlKCkubG9hZCgpO1xyXG4gICAgY29uc3QgdGFza3MgPSBmbGF0dGVuKGxnQ29udGVudHMubWFwKGMgPT4gYy50YXNrcykpO1xyXG4gICAgZm9yIChjb25zdCB0YXNrIG9mIHRhc2tzKSB7XHJcbiAgICAgIGNvbnN0IHRhZ3MgPSBjb21wdXRlQ291cnNlSW5zdGFuY2VUYWdzKFtjb3Vyc2UuaWRdLCBbc3ViamVjdENvZGVdLCBbc2Nob29sWWVhcl0pO1xyXG4gICAgICByZXBvLnRhc2tzLnVwZGF0ZSh0YXNrLCB7dGFncywgc3ViamVjdDogc3ViamVjdE5hbWV9KTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8sIFdpdGhHcmFwaHMsIFN0cmlwR3JhcGhzIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgVGFzaywgVGhlbWVDb3Vyc2VUYWIsIENvdXJzZVRhYiB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgS25vd2xlZGdlTWF0cml4IH0gZnJvbSAnLi4vLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMva25vd2xlZGdlLW1hdHJpeCc7XHJcbmltcG9ydCB7IExhenlDb250ZW50IH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xhenktY29udGVudCc7XHJcbmltcG9ydCB7IGdldENvdXJzZUNvZGVzRnJvbVRhZ3MgfSBmcm9tICcuLi9sb2dpYy9nZXQtY291cnNlLWNvZGVzLWZyb20tdGFncyc7XHJcbmltcG9ydCB7IEwsIHNob3dFcnJvciB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgZ2V0U3RhbmRhcmRDb3Vyc2VzV2l0aE9yZGVyZWRSZXF1aXJlbWVudHMgfSBmcm9tICcuLi9sb2dpYy9nZXQtc3RhbmRhcmQtY291cnNlcy13aXRoLW9yZGVyZWQtcmVxdWlyZW1lbnRzJztcclxuaW1wb3J0IHsgT3BlbkNsb3NlQm94IH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL29wZW4tY2xvc2UtYm94JztcclxuaW1wb3J0IHsgU2VsZWN0UmVsYXRlZERvY3MgfSBmcm9tICcuLi8uLi9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9zZWxlY3QtcmVsYXRlZC1kb2NzJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgcmVwbzogS2VkQmFja2VuZFJlcG9cclxuICB0YWI6IFN0cmlwR3JhcGhzPENvdXJzZVRhYj5cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFRhYlJlcXVpcmVtZW50cyA9ICh7XHJcbiAgcmVwbyxcclxuICB0YWJcclxufTogUHJvcHMpID0+IDxMYXp5Q29udGVudD57XHJcbiAgZ2V0U3RhbmRhcmRDb3Vyc2VzV2l0aE9yZGVyZWRSZXF1aXJlbWVudHMoXHJcbiAgICBnZXRDb3Vyc2VDb2Rlc0Zyb21UYWdzKHRhYi50YWdzKSlcclxuICAubWFwKGNvdXJzZVRlbXBsYXRlcyA9PiBjb3Vyc2VUZW1wbGF0ZXMubGVuZ3RoID09PSAwID9cclxuXHJcbiAgICA8cD57TGBGbGlrZW4gw6RyIGludGUga29wcGxhZCB0aWxsIG7DpWdvdCDDpG1uZSAvIMOlcnNrdXJzYH08L3A+XHJcbiAgICA6XHJcblxyXG4gICAgPGRpdj5cclxuICAgICAge2NvdXJzZVRlbXBsYXRlcy5tYXAoKHtpZCwgbmFtZSwgYWJpbGl0aWVzLCBjZW50cmFsQ29udGVudCwga25vd2xlZGdlUmVxdWlyZW1lbnRzfSkgPT4gPGRpdiBrZXk9e2lkfT5cclxuICAgICAgICB7Y291cnNlVGVtcGxhdGVzLmxlbmd0aCA9PT0gMSA/IHVuZGVmaW5lZCA6IDxoMT57bmFtZX08L2gxPn1cclxuICAgICAgICAgIDxPcGVuQ2xvc2VCb3ggY2xhc3NOYW1lPVwibGFyZ2VyXCIgdGl0bGU9ezxwPntMYEzDpXMgZmxpa2VucyBrdW5za2Fwc2tyYXZgfTwvcD59PlxyXG4gICAgICAgICAgICA8cD5cclxuICAgICAgICAgICAgICAgIHtMYE1hcmtlcmEgZGUga3Vuc2thcHNrcmF2IHNvbSDDpG1uZXNmbGlrZW4gc2thIHTDpGNrYS5gfVxyXG4gICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgIDxMYXp5Q29udGVudD57XHJcbiAgICAgICAgICAgICAgcmVwb1tcImtub3dsZWRnZS1yZXF1aXJlbWVudHNcIl0uaGFzRWRnZXNGcm9tKFt0YWIuaWRdKS5pZHNPbmx5KCkudG9WYWx1ZSgpLm1hcCh0YWJzS3JzID0+IHsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gPEtub3dsZWRnZU1hdHJpeFxyXG4gICAgICAgICAgICAgICAgICBrbm93bGVkZ2VSZXF1aXJlbWVudHM9e2tub3dsZWRnZVJlcXVpcmVtZW50c31cclxuICAgICAgICAgICAgICAgICAgbWFya2VkSWRzPXt0YWJzS3JzLm1hcCgoe2lkfSkgPT4gaWQpfVxyXG4gICAgICAgICAgICAgICAgICBpZHNUb01hcmtOb3RPaz17e319XHJcbiAgICAgICAgICAgICAgICAgIG1hcmtNb2RlPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgICBvbk1hcmtDaGFuZ2VkPXsobWFya2VkSWQ6IHN0cmluZywgaXNNYXJrZWQ6IGJvb2xlYW4pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgaW52YWxpZCBrbm93bGVkZ2UgcmVxdWlyZW1lbnRzICh0aG9zZSB0aGF0IGFyZSBub3QgcGFydCBvZiB0aGUgc3RhbmRhcmQgY291cnNlKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIENhbiBoYXBwZW4gYWZ0ZXIgY2hhbmdpbmcgc2Nob29sIHllYXIgLyBjb3Vyc2Ugb3Igc3ViamVjdC5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnZhbGlkS3JzID0gdGFic0tycy5maWx0ZXIoa3IgPT4gIWtub3dsZWRnZVJlcXVpcmVtZW50cy5zb21lKCh7aWR9KSA9PiBrci5pZCA9PT0gaWQpKTtcclxuICAgICAgICAgICAgICAgICAgICBpbnZhbGlkS3JzLmZvckVhY2goaW52YWxpZEtyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIHJlcG8uY291cnNlVGFicy5yZW1vdmVSZWxhdGVkKHRhYi5pZCwgXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIiwgaW52YWxpZEtyKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXJrZWREb2MgPSBrbm93bGVkZ2VSZXF1aXJlbWVudHMuZmlsdGVyKCh7aWR9KSA9PiBpZCA9PT0gbWFya2VkSWQpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc01hcmtlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmVwby5jb3Vyc2VUYWJzLmFkZFJlbGF0ZWQodGFiLmlkLCBcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiLCBtYXJrZWREb2MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXBvLmNvdXJzZVRhYnMucmVtb3ZlUmVsYXRlZCh0YWIuaWQsIFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCIsIG1hcmtlZERvYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICB9KX08L0xhenlDb250ZW50PlxyXG4gICAgICAgICAgPC9PcGVuQ2xvc2VCb3g+XHJcblxyXG4gICAgICAgICAgPExhenlDb250ZW50PntcclxuICAgICAgICAgICAgcmVwby5hYmlsaXRpZXMuaGFzRWRnZXNGcm9tKFt0YWIuaWRdKS5pZHNPbmx5KCkudG9WYWx1ZSgpLm1hcCh0YWJBYmlsaXRpZXMgPT4ge1xyXG4gICAgICAgICAgICAgIHJldHVybiA8U2VsZWN0UmVsYXRlZERvY3NcclxuICAgICAgICAgICAgICAgIG9wdGlvbnM9e2FiaWxpdGllc31cclxuICAgICAgICAgICAgICAgIHRpdGxlPXtMYEzDpXMgZmxpa2VucyBmw7ZybcOlZ29yYH1cclxuICAgICAgICAgICAgICAgIG1hcmtlZElkcz17dGFiQWJpbGl0aWVzLm1hcCgoe2lkfSkgPT4gaWQpfVxyXG4gICAgICAgICAgICAgICAgbWFya01vZGU9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAvL21pZ3JhdGVkSWRzPXt0YXNrICYmIHRhc2subWlncmF0ZWRUZXh0cyAmJiB0YXNrLm1pZ3JhdGVkVGV4dHMuYWJpbGl0aWVzfVxyXG4gICAgICAgICAgICAgICAgb25NYXJrQ2hhbmdlZD17KG1hcmtlZElkLCBpc01hcmtlZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgaW52YWxpZCBhYmlsaXRpZXMgKHRob3NlIHRoYXQgYXJlIG5vdCBwYXJ0IG9mIHRoZSBzdGFuZGFyZCBjb3Vyc2UpXHJcbiAgICAgICAgICAgICAgICAgIC8vIENhbiBoYXBwZW4gYWZ0ZXIgY2hhbmdpbmcgc2Nob29sIHllYXIgLyBjb3Vyc2Ugb3Igc3ViamVjdC5cclxuICAgICAgICAgICAgICAgICAgY29uc3QgaW52YWxpZEFiaWxpdGllcyA9IHRhYkFiaWxpdGllcy5maWx0ZXIoYSA9PiAhYWJpbGl0aWVzLnNvbWUoKHtpZH0pID0+IGEuaWQgPT09IGlkKSk7XHJcbiAgICAgICAgICAgICAgICAgIGludmFsaWRBYmlsaXRpZXMuZm9yRWFjaChpbnZhbGlkQWJpbGl0eSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVwby5jb3Vyc2VUYWJzLnJlbW92ZVJlbGF0ZWQodGFiLmlkLCBcImFiaWxpdGllc1wiLCBpbnZhbGlkQWJpbGl0eSk7XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCBtYXJrZWREb2MgPSBhYmlsaXRpZXMuZmlsdGVyKCh7aWR9KSA9PiBpZCA9PT0gbWFya2VkSWQpWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc01hcmtlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmVwby5jb3Vyc2VUYWJzLmFkZFJlbGF0ZWQodGFiLmlkLCBcImFiaWxpdGllc1wiLCBtYXJrZWREb2MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXBvLmNvdXJzZVRhYnMucmVtb3ZlUmVsYXRlZCh0YWIuaWQsIFwiYWJpbGl0aWVzXCIsIG1hcmtlZERvYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgfSl9PC9MYXp5Q29udGVudD5cclxuXHJcbiAgICAgICAgICA8TGF6eUNvbnRlbnQ+e1xyXG4gICAgICAgICAgICByZXBvW1wiY2VudHJhbC1jb250ZW50XCJdLmhhc0VkZ2VzRnJvbShbdGFiLmlkXSkuaWRzT25seSgpLnRvVmFsdWUoKS5tYXAodGFic0NDcyA9PiB7XHJcblxyXG4gICAgICAgICAgICAgIHJldHVybiA8U2VsZWN0UmVsYXRlZERvY3NcclxuICAgICAgICAgICAgICAgIG9wdGlvbnM9e2NlbnRyYWxDb250ZW50fVxyXG4gICAgICAgICAgICAgICAgdGl0bGU9e0xgTMOlcyBmbGlrZW5zIGNlbnRyYWxhIGlubmVow6VsbGB9XHJcbiAgICAgICAgICAgICAgICBtYXJrZWRJZHM9e3RhYnNDQ3MubWFwKGNjID0+IGNjLmlkKX1cclxuICAgICAgICAgICAgICAgIG1hcmtNb2RlPXt0cnVlfVxyXG4gICAgICAgICAgICAgICAgLy9taWdyYXRlZElkcz17dGFzayAmJiB0YXNrLm1pZ3JhdGVkVGV4dHMgJiYgdGFzay5taWdyYXRlZFRleHRzLmNlbnRyYWxDb250ZW50fVxyXG4gICAgICAgICAgICAgICAgb25NYXJrQ2hhbmdlZD17KG1hcmtlZElkLCBpc01hcmtlZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgaW52YWxpZCBjZW50cmFsIGNvbnRlbnRzICh0aG9zZSB0aGF0IGFyZSBub3QgcGFydCBvZiB0aGUgc3RhbmRhcmQgY291cnNlKVxyXG4gICAgICAgICAgICAgICAgICAvLyBDYW4gaGFwcGVuIGFmdGVyIGNoYW5naW5nIHNjaG9vbCB5ZWFyIC8gY291cnNlIG9yIHN1YmplY3QuXHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGludmFsaWRDZW50cmFsQ29udGVudHMgPSB0YWJzQ0NzLmZpbHRlcihjYyA9PiAhY2VudHJhbENvbnRlbnQuc29tZSgoe2lkfSkgPT4gY2MuaWQgPT09IGlkKSk7XHJcbiAgICAgICAgICAgICAgICAgIGludmFsaWRDZW50cmFsQ29udGVudHMuZm9yRWFjaChpbnZhbGlkQ0MgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcG8uY291cnNlVGFicy5yZW1vdmVSZWxhdGVkKHRhYi5pZCwgXCJjZW50cmFsQ29udGVudFwiLCBpbnZhbGlkQ0MpO1xyXG4gICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgbWFya2VkRG9jID0gY2VudHJhbENvbnRlbnQuZmlsdGVyKCh7aWR9KSA9PiBpZCA9PT0gbWFya2VkSWQpWzBdO1xyXG4gICAgICAgICAgICAgICAgICBpZiAoaXNNYXJrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXBvLmNvdXJzZVRhYnMuYWRkUmVsYXRlZCh0YWIuaWQsIFwiY2VudHJhbENvbnRlbnRcIiwgbWFya2VkRG9jKTtcclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXBvLmNvdXJzZVRhYnMucmVtb3ZlUmVsYXRlZCh0YWIuaWQsIFwiY2VudHJhbENvbnRlbnRcIiwgbWFya2VkRG9jKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAvPiAgXHJcbiAgICAgICAgICAgIH0pfTwvTGF6eUNvbnRlbnQ+XHJcblxyXG5cclxuICAgICAgPC9kaXY+KX1cclxuICAgIDwvZGl2PlxyXG4gIClcclxufTwvTGF6eUNvbnRlbnQ+IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgQWxpZ25Ib3Jpem9udGFsIH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2FsaWduLWhvcml6b250YWwnO1xyXG5pbXBvcnQgeyBDb3Vyc2VJbnN0YW5jZSwgQ291cnNlVGFiIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBIb3Jpem9udGFsSXRlbSB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9ob3Jpem9udGFsLWl0ZW0nO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbywgU3RyaXBHcmFwaHMgfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBDb3Vyc2VUYWJDbGFzc2VzLCBUYWJUeXBlc1BlckNvdXJzZVR5cGUgfSBmcm9tICcuL2NvdXJzZS10YWIvdGFiLWNsYXNzZXMnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBnZXRTY2hvb2xZZWFycywgY29tcHV0ZUNvdXJzZUluc3RhbmNlVGFncyB9IGZyb20gJy4uL2xvZ2ljL2NvdXJzZS1pbnN0YW5jZS10YWdzJztcclxuaW1wb3J0IHsgVGV4dElucHV0IH0gZnJvbSAnLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2Zvcm0tZmllbGQtdGV4dC1pbnB1dCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGNvdXJzZTogQ291cnNlSW5zdGFuY2U7XHJcbiAgdGFiOiBTdHJpcEdyYXBoczxDb3Vyc2VUYWI+O1xyXG4gIHJlcG86IEtlZEJhY2tlbmRSZXBvO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgVGFiU2V0dGluZ3MgPSAoeyB0YWIsIHJlcG8sIGNvdXJzZSB9OiBQcm9wcykgPT4ge1xyXG4gIGNvbnN0IHsgc3ViamVjdENvZGUsIHN1YmplY3ROYW1lIH0gPSB0YWIuc3ViamVjdCA/XHJcbiAgICB0YWIuc3ViamVjdCA6XHJcbiAgICBjb3Vyc2UudHlwZSA9PT0gJ3RoZW1lLWNvdXJzZScgJiYgY291cnNlLnN1YmplY3RzICYmIGNvdXJzZS5zdWJqZWN0cy5sZW5ndGggPiAwID9cclxuICAgICAgeyBzdWJqZWN0Q29kZTogY291cnNlLnN1YmplY3RzWzBdLmNvZGUsIHN1YmplY3ROYW1lOiBjb3Vyc2Uuc3ViamVjdHNbMF0ubmFtZSB9IDpcclxuICAgICAgeyBzdWJqZWN0Q29kZTogJycsIHN1YmplY3ROYW1lOiAnJyB9O1xyXG4gIGNvbnN0IGNvdXJzZVNjaG9vbFllYXJzID0gZ2V0U2Nob29sWWVhcnMoY291cnNlLnRhZ3MpO1xyXG4gIGNvbnN0IHNjaG9vbFllYXI6IG51bGwgfCBzdHJpbmcgPSBnZXRTY2hvb2xZZWFycyh0YWIudGFncylbMF0gfHwgY291cnNlU2Nob29sWWVhcnNbMF0gfHwgbnVsbDtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIC8vXHJcbiAgICAvLyBFZGl0IFwic3RhbmRhcmRcIiBzY2hvb2w6IENob29zZSB0YWIgdHlwZVxyXG4gICAgLy9cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwia2VkX2JveGVkXCI+XHJcbiAgICAgIDxwIGNsYXNzTmFtZT1cImJveC1taW5pLWxhYmVsXCI+e0xgSW5zdMOkbGxuaW5nYXIgZsO2ciBmbGlrZW4gJHt0YWIubmFtZSB8fCB0YWIudGFiVGl0bGV9YH08L3A+XHJcbiAgICAgIDxBbGlnbkhvcml6b250YWw+XHJcbiAgICAgICAgPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgICAgPGxhYmVsIGNsYXNzTmFtZT1cImtjbGFiZWxcIj57TGBGbGlrZW5zIHR5cGB9PC9sYWJlbD5cclxuICAgICAgICA8L0hvcml6b250YWxJdGVtPlxyXG4gICAgICAgIDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICAgIDxzZWxlY3RcclxuICAgICAgICAgICAgdmFsdWU9e3RhYi50YWJDbGFzc31cclxuICAgICAgICAgICAgb25DaGFuZ2U9e2V2ID0+XHJcbiAgICAgICAgICAgICAgcmVwby5jb3Vyc2VUYWJzLnVwZGF0ZSh0YWIsIGV2LnRhcmdldC52YWx1ZSA9PT0gJ3N1YmplY3QtdGFiJyA/IHtcclxuICAgICAgICAgICAgICAgIHRhYkNsYXNzOiBldi50YXJnZXQudmFsdWUgYXMga2V5b2YgdHlwZW9mIENvdXJzZVRhYkNsYXNzZXMsXHJcbiAgICAgICAgICAgICAgICBzdWJqZWN0OiB7IHN1YmplY3RDb2RlLCBzdWJqZWN0TmFtZSB9LFxyXG4gICAgICAgICAgICAgICAgdGFnczogY29tcHV0ZUNvdXJzZUluc3RhbmNlVGFncyh0YWIudGFncywgW3N1YmplY3RDb2RlXSwgW3NjaG9vbFllYXJdKVxyXG4gICAgICAgICAgICAgIH0gOiB7XHJcbiAgICAgICAgICAgICAgICAgIHRhYkNsYXNzOiBldi50YXJnZXQudmFsdWUgYXMga2V5b2YgdHlwZW9mIENvdXJzZVRhYkNsYXNzZXMsXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIHtUYWJUeXBlc1BlckNvdXJzZVR5cGVbY291cnNlLnR5cGVdLm1hcCh0YWJDbGFzcyA9PlxyXG4gICAgICAgICAgICAgIDxvcHRpb24ga2V5PXt0YWJDbGFzc30gdmFsdWU9e3RhYkNsYXNzfT5cclxuICAgICAgICAgICAgICAgIHtDb3Vyc2VUYWJDbGFzc2VzW3RhYkNsYXNzXX1cclxuICAgICAgICAgICAgICA8L29wdGlvbj4pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgIDwvSG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgIDwvQWxpZ25Ib3Jpem9udGFsPlxyXG4gICAgICA8VGV4dElucHV0IGxhYmVsPXtMYEZsaWtlbnMgbmFtbmB9IGlkPVwiVGFiU2V0dGluZ3M6bmFtZVwiIHZhbHVlPXt0YWIubmFtZSB8fCB0YWIudGFiVGl0bGV9XHJcbiAgICAgICAgb25DaGFuZ2U9e25hbWUgPT5cclxuICAgICAgICAgIHJlcG8uY291cnNlVGFicy51cGRhdGUodGFiLCB7XHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgIHRhYlRpdGxlOiBuYW1lIC8vIERlcHJlY2F0ZWQuIFRvZG86IHJlbW92ZS5cclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSAvPlxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufVxyXG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvLCBXaXRoR3JhcGhzLCBTdHJpcEdyYXBocyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IFRhc2ssIENvdXJzZUJsb2NrLCBDb3Vyc2VUYWIgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IEtub3dsZWRnZU1hdHJpeCB9IGZyb20gJy4uLy4uLy4uLy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL2tub3dsZWRnZS1tYXRyaXgnO1xyXG5pbXBvcnQgeyBMYXp5Q29udGVudCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9sYXp5LWNvbnRlbnQnO1xyXG5pbXBvcnQgeyBnZXRDb3Vyc2VDb2Rlc0Zyb21UYWdzIH0gZnJvbSAnLi4vLi4vLi4vbG9naWMvZ2V0LWNvdXJzZS1jb2Rlcy1mcm9tLXRhZ3MnO1xyXG5pbXBvcnQgeyBMLCBzaG93RXJyb3IgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IGdldFN0YW5kYXJkQ291cnNlc1dpdGhPcmRlcmVkUmVxdWlyZW1lbnRzIH0gZnJvbSAnLi4vLi4vLi4vbG9naWMvZ2V0LXN0YW5kYXJkLWNvdXJzZXMtd2l0aC1vcmRlcmVkLXJlcXVpcmVtZW50cyc7XHJcbmltcG9ydCB7IHJlc29sdmVSZXF1aXJlbWVudE9yZGVyLCBSZXF1aXJlbWVudHNDb250YWluaW5nRG9jIH0gZnJvbSAnLi4vLi4vLi4vbG9naWMvb3JkZXJlZC1yZXF1aXJlbWVudHMnO1xyXG5pbXBvcnQgeyBTZWxlY3RSZWxhdGVkRG9jcyB9IGZyb20gJy4uLy4uLy4uLy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3NlbGVjdC1yZWxhdGVkLWRvY3MnO1xyXG5pbXBvcnQgeyBDaGVja2xpc3QgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvY2hlY2tsaXN0JztcclxuaW1wb3J0IHsgT3BlbkNsb3NlQm94IH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL29wZW4tY2xvc2UtYm94JztcclxuaW1wb3J0IHsgZnV0dXJlQWJpbGl0aWVzIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vY29udHJhY3RzL2tlZC1tb2RlbHMnO1xyXG5pbXBvcnQgeyBSZXFzUmVmZXJlbmNpbmdEb2MgfSBmcm9tICcuLi8uLi8uLi8uLi9jb3Vyc2UtYnVpbGRlci9jb3Vyc2VzL2J1c2luZXNzLWxvZ2ljJztcclxuaW1wb3J0IHsgZmVhdHVyZXMgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi9mZWF0dXJlcyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHJlcG86IEtlZEJhY2tlbmRSZXBvXHJcbiAgdGFzazogU3RyaXBHcmFwaHM8VGFzaz4gJiBSZXFzUmVmZXJlbmNpbmdEb2NcclxuICB0YWJJZHM6IHN0cmluZ1tdLFxyXG4gIHVuY292ZXJlZElkczogeyBbaWQ6IHN0cmluZ106IHRydWUgfSxcclxuICBibG9ja0lkOiBzdHJpbmcgfCBudWxsXHJcbiAgYWxsQ292ZXJlZFNlbnRlbmNlcz86IHsgW2lkOiBzdHJpbmddOiBzdHJpbmcgW119W11cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IEVkaXRSZXF1aXJlbWVudHMgPSAoe1xyXG4gIHJlcG8sXHJcbiAgdGFzayxcclxuICB0YWJJZHMsXHJcbiAgdW5jb3ZlcmVkSWRzLFxyXG4gIGJsb2NrSWQsXHJcbiAgYWxsQ292ZXJlZFNlbnRlbmNlc1xyXG59OiBQcm9wcykgPT4ge1xyXG4gIHJldHVybiA8TGF6eUNvbnRlbnQ+e1xyXG4gICAgYmxvY2tJZCA/XHJcblxyXG4gICAgICByZXBvLmNvdXJzZUJsb2Nrc1xyXG4gICAgICAgIC5pbmNsdWRlKFwiYWJpbGl0aWVzXCIsIFwiY2VudHJhbENvbnRlbnRcIiwgXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIilcclxuICAgICAgICAuaWQoYmxvY2tJZClcclxuICAgICAgICAubWFwKGJsb2NrID0+IDxkaXY+XHJcbiAgICAgICAgICA8RWRpdFJlcXVpcmVtZW50c0lubmVyIHsuLi57cmVwbywgdGFzaywgdW5jb3ZlcmVkSWRzLCB0YWJPckJsb2NrOiBibG9jaywgYWxsQ292ZXJlZFNlbnRlbmNlc319IC8+XHJcbiAgICAgICAgPC9kaXY+KSA6XHJcblxyXG4gICAgICByZXBvLmNvdXJzZVRhYnNcclxuICAgICAgICAuaW5jbHVkZShcImFiaWxpdGllc1wiLCBcImNlbnRyYWxDb250ZW50XCIsIFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCIpXHJcbiAgICAgICAgLmlkcyh0YWJJZHMpXHJcbiAgICAgICAgLnRvVmFsdWUoKS5tYXAodGFicyA9PiA8ZGl2PlxyXG4gICAgICAgICAge3RhYnMubGVuZ3RoID09PSAxID9cclxuICAgICAgICAgICAgPEVkaXRSZXF1aXJlbWVudHNJbm5lciB7Li4ue3JlcG8sIHRhc2ssIHVuY292ZXJlZElkcywgdGFiT3JCbG9jazogdGFic1swXSwgYWxsQ292ZXJlZFNlbnRlbmNlc319IC8+IDpcclxuICAgICAgICAgIHRhYnMubWFwKHRhYiA9PiA8T3BlbkNsb3NlQm94IGtleT17dGFiLmlkfSB0aXRsZT17PGg0Pnt0YWIubmFtZSB8fCB0YWIudGFiVGl0bGV9e1xyXG4gICAgICAgICAgICB0YWIuc3ViamVjdCAmJiB0YWIuc3ViamVjdC5zdWJqZWN0TmFtZSAmJiB0YWIuc3ViamVjdC5zdWJqZWN0TmFtZSAhPT0gKHRhYi5uYW1lIHx8IHRhYi50YWJUaXRsZSkgP1xyXG4gICAgICAgICAgICAgIGAgKCR7dGFiLnN1YmplY3Quc3ViamVjdE5hbWV9KWA6ICcnXHJcbiAgICAgICAgICB9PC9oND59PlxyXG4gICAgICAgICAgICAgIDxFZGl0UmVxdWlyZW1lbnRzSW5uZXIgey4uLntyZXBvLCB0YXNrLCB1bmNvdmVyZWRJZHMsIHRhYk9yQmxvY2s6IHRhYiwgaGFzTXVsdGlwbGVTdWJqZWN0czogdHJ1ZSwgYWxsQ292ZXJlZFNlbnRlbmNlc319IC8+XHJcbiAgICAgICAgICAgIDwvT3BlbkNsb3NlQm94PiApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICA8L2Rpdj4pXHJcbiAgfTwvTGF6eUNvbnRlbnQ+XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBFZGl0UmVxdWlyZW1lbnRzSW5uZXIgPSAoe1xyXG4gIHRhYk9yQmxvY2s6IHRhYk9yQmxvY2ssXHJcbiAgcmVwbyxcclxuICB0YXNrLFxyXG4gIHVuY292ZXJlZElkcyxcclxuICBoYXNNdWx0aXBsZVN1YmplY3RzLFxyXG4gIGFsbENvdmVyZWRTZW50ZW5jZXNcclxufToge1xyXG4gIHJlcG86IEtlZEJhY2tlbmRSZXBvXHJcbiAgdGFzazogU3RyaXBHcmFwaHM8VGFzaz4gJiBSZXFzUmVmZXJlbmNpbmdEb2NcclxuICB1bmNvdmVyZWRJZHM6IHsgW2lkOiBzdHJpbmddOiB0cnVlIH0sXHJcbiAgdGFiT3JCbG9jazpcclxuICAgIFdpdGhHcmFwaHM8Q291cnNlVGFiLCBcImFiaWxpdGllc1wiIHwgXCJjZW50cmFsQ29udGVudFwiIHwgXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIj4gfFxyXG4gICAgV2l0aEdyYXBoczxDb3Vyc2VCbG9jaywgXCJhYmlsaXRpZXNcIiB8IFwiY2VudHJhbENvbnRlbnRcIiB8IFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCI+LFxyXG4gIGhhc011bHRpcGxlU3ViamVjdHM/OiBib29sZWFuLFxyXG4gIGFsbENvdmVyZWRTZW50ZW5jZXM6IHsgW2lkOiBzdHJpbmddOiBzdHJpbmcgW119W11cclxufSkgPT4gIHtcclxuY29uc3QgW21hcmtCeVNlbnRlbmNlVmlld0FjdGl2ZSwgc2V0QWN0aXZlXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuY29uc3Qge21hcmtQYXJ0aWFsS1JzfSA9IGZlYXR1cmVzO1xyXG5yZXR1cm4gPExhenlDb250ZW50PntcclxuICByZXNvbHZlUmVxdWlyZW1lbnRPcmRlcih0YWJPckJsb2NrKS5tYXAodGFiID0+IHtcclxuICAgIGNvbnN0IHN1YmplY3ROYW1lID0gJ3R5cGUnIGluIHRhYiAmJiB0YWIuc3ViamVjdCAmJiB0YWIuc3ViamVjdC5zdWJqZWN0TmFtZTtcclxuICAgIHJldHVybiA8PlxyXG4gICAgICB7dGFzay50YXNrVHlwZSAhPT0gJ2V4ZXJjaXNlJyAmJiA8ZGl2IGNsYXNzTmFtZT1cImtlZF9ib3hlZFwiPlxyXG4gICAgICAgIDxoMz57TGBWw6RsaiBrdW5za2Fwc2tyYXZgfTwvaDM+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXRyaXgta25vd2xlZGdlLXRpdGxlXCI+XHJcbiAgICAgICAgICA8cD57TGBNYXJrZXJhIGRlIGt1bnNrYXBza3JhdiBzb20gZGluIHVwcGdpZnQgdMOkY2tlci5gfTwvcD5cclxuICAgICAgICAgIHttYXJrUGFydGlhbEtScyAmJiA8cD48aSBjbGFzc05hbWU9e1wiZmFiIGZhLWNyZWF0aXZlLWNvbW1vbnMtbmQgXCIgKyAobWFya0J5U2VudGVuY2VWaWV3QWN0aXZlID8gXCJhY3RpdmVQYXJ0aWFsVmlld1wiIDogXCJcIil9IG9uQ2xpY2s9eygpPT4gc2V0QWN0aXZlKCFtYXJrQnlTZW50ZW5jZVZpZXdBY3RpdmUpfT48L2k+PC9wPn1cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8S25vd2xlZGdlTWF0cml4XHJcbiAgICAgICAgICBrbm93bGVkZ2VSZXF1aXJlbWVudHM9e3RhYi5rbm93bGVkZ2VSZXF1aXJlbWVudHN9XHJcbiAgICAgICAgICBtYXJrZWRJZHM9e3Rhc2sua25vd2xlZGdlUmVxdWlyZW1lbnRzLm1hcCgoeyBpZCB9KSA9PiBpZCl9XHJcbiAgICAgICAgICBleHBsYWluZWRSZXF1aXJlbWVudHM9e3Rhc2suZXhwbGFpbmVkUmVxdWlyZW1lbnRzIHx8IHt9fVxyXG4gICAgICAgICAgaWRzVG9NYXJrTm90T2s9e3VuY292ZXJlZElkc31cclxuICAgICAgICAgIG1hcmtNb2RlPXt0cnVlfVxyXG4gICAgICAgICAgbWFya0J5U2VudGVuY2VWaWV3ID0ge21hcmtCeVNlbnRlbmNlVmlld0FjdGl2ZX1cclxuICAgICAgICAgIG1pZ3JhdGVkSWRzPXt0YXNrICYmIHRhc2subWlncmF0ZWRUZXh0cyAmJiB0YXNrLm1pZ3JhdGVkVGV4dHMua25vd2xlZGdlUmVxdWlyZW1lbnRzfVxyXG4gICAgICAgICAgcGFydGlhbFJlcXVpcm1lbnRzID0ge3Rhc2sucGFydGlhbFJlcXVpcm1lbnRzIHx8IHt9fVxyXG4gICAgICAgICAgY292ZXJlZFBhcnRpYWxSZXF1aXJtZW50cyA9IHthbGxDb3ZlcmVkU2VudGVuY2VzfVxyXG4gICAgICAgICAgbWFya1BhcnRpYWxGZWF0dXJlRW5hYmxlZCA9IHttYXJrUGFydGlhbEtSc31cclxuICAgICAgICAgIG9uRXhwbGFpbmVkUmVxdWlyZW1lbnRzQ2hhbmdlZD17KHJlcXVpcmVtZW50SWQsIHRleHQpID0+XHJcbiAgICAgICAgICAgIHJlcG8udGFza3MudXBkYXRlKHRhc2ssIHtcclxuICAgICAgICAgICAgICBleHBsYWluZWRSZXF1aXJlbWVudHM6IHtcclxuICAgICAgICAgICAgICAgIC4uLnRhc2suZXhwbGFpbmVkUmVxdWlyZW1lbnRzLFxyXG4gICAgICAgICAgICAgICAgW3JlcXVpcmVtZW50SWRdOiB0ZXh0XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KX1cclxuICAgICAgICAgIG9uVXBkYXRlUGFydGlhbEtub3dsZWRnZSA9IHsocmVxdWlyZW1lbnRJZCwgcGFydGlhbENvbnRlbnRzKT0+IHtcclxuICAgICAgICAgICAgLy9pdCBtaWdodCBiZSB0aGUgY2FzZSB0aGF0IHRoZSBmZWF0dXJlIGZsYWcgaXMgYWN0aXZlLCB0aGUgcmVxdWlybWVudCBpcyBzZXQgYXMgbWFya2VkIGFuZCBubyBwYXJ0aWFsIGRhdGEgaXMgc2F2ZWRcclxuICAgICAgICAgICAgLy93aGVuIHVuc2VsZWN0aW5nIHRoZSByZXF1aXJtZW50LCB3ZSBzaG91bGQgZG8gbm90aGluZyBhcyBubyBwYXJ0aWFsIGRhdGEgaXMgc2F2ZWRcclxuICAgICAgICAgICBcclxuICAgICAgICAgICAvLyB2YXIgcmVzdWx0ID0gc2hvdWxkUmVtb3ZlICYmIHRhc2sucGFydGlhbFJlcXVpcm1lbnRzLmZpbHRlcihwciA9PiBwYXJ0aWFsQ29udGVudHMuZmlsdGVyKHBjID0+ICFwcltyZXF1aXJlbWVudElkXS5pbmNsdWRlcyhwYykpKTtcclxuICAgICAgICAgICAgLy92YXIgZXhpc3RpbmdSZXF1aXJlbWVudHMgPSB0YXNrLnBhcnRpYWxSZXF1aXJtZW50c1tyZXF1aXJlbWVudElkXSB8fCBbXTtcclxuXHJcblxyXG4gICAgICAgICAgICByZXBvLnRhc2tzLnVwZGF0ZSh0YXNrLCB7XHJcbiAgICAgICAgICAgIHBhcnRpYWxSZXF1aXJtZW50czpcclxuICAgICAgICAgICAgeyBcclxuICAgICAgICAgICAgICAuLi50YXNrLnBhcnRpYWxSZXF1aXJtZW50cyxcclxuICAgICAgICAgICAgICBbcmVxdWlyZW1lbnRJZF06WyAuLi5wYXJ0aWFsQ29udGVudHNdXHJcbiAgICAgICAgICAgIH19XHJcbiAgICAgICAgICApXHJcbiAgICAgICAgICBjb25zdCBtYXJrZWREb2MgPSB0YWIua25vd2xlZGdlUmVxdWlyZW1lbnRzLmZpbHRlcigoeyBpZCB9KSA9PiBpZCA9PT0gcmVxdWlyZW1lbnRJZClbMF07XHJcbiAgICAgICAgICBpZihwYXJ0aWFsQ29udGVudHMubGVuZ3RoID09PSAwKXtcclxuICAgICAgICAgICAgcmVwby50YXNrcy5yZW1vdmVSZWxhdGVkKHRhc2suaWQsIFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCIsIG1hcmtlZERvYyk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYoIXRhc2sucGFydGlhbFJlcXVpcm1lbnRzIHx8ICF0YXNrLnBhcnRpYWxSZXF1aXJtZW50c1tyZXF1aXJlbWVudElkXSB8fCB0YXNrLnBhcnRpYWxSZXF1aXJtZW50c1tyZXF1aXJlbWVudElkXS5sZW5ndGggPT09IDApe1xyXG4gICAgICAgICAgICByZXBvLnRhc2tzLmFkZFJlbGF0ZWQodGFzay5pZCwgXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIiwgbWFya2VkRG9jKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9fVxyXG4gICAgICAgICAgb25NYXJrQ2hhbmdlZD17KG1hcmtlZElkOiBzdHJpbmcsIGlzTWFya2VkOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hcmtlZERvYyA9IHRhYi5rbm93bGVkZ2VSZXF1aXJlbWVudHMuZmlsdGVyKCh7IGlkIH0pID0+IGlkID09PSBtYXJrZWRJZClbMF07XHJcbiAgICAgICAgICAgIGlmIChpc01hcmtlZCkge1xyXG4gICAgICAgICAgICAgIGlmIChoYXNNdWx0aXBsZVN1YmplY3RzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBNaXNzaW9uIHRhYnMgbmVlZHMgdG8gc3RvcmUgdGhlIHN1YmplY3QgbmFtZSBjb25uZWN0ZWQgdG8gZWFjaCBrbm93bGVkZ2UgcmVxdWlyZW1lbnQ6XHJcbiAgICAgICAgICAgICAgICByZXBvLnRhc2tzLnVwZGF0ZSh0YXNrLCB7aWRzVG9TdWJqZWN0TWFwOiB7Li4udGFzay5pZHNUb1N1YmplY3RNYXAsIFttYXJrZWRJZF06IHN1YmplY3ROYW1lfX0pO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXBvLnRhc2tzLnVwZGF0ZSh0YXNrLCB7aWRzVG9TdWJqZWN0TWFwOiB1bmRlZmluZWR9KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgcmVwby50YXNrcy5hZGRSZWxhdGVkKHRhc2suaWQsIFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCIsIG1hcmtlZERvYyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgaWYgKGhhc011bHRpcGxlU3ViamVjdHMpIHtcclxuICAgICAgICAgICAgICAgIC8vIE1pc3Npb24gdGFicyBuZWVkcyB0byBkZWxldGUgdGhlIHN1YmplY3QgbmFtZSBjb25uZWN0ZWQgdG8gZWFjaCBrbm93bGVkZ2UgcmVxdWlyZW1lbnQ6XHJcbiAgICAgICAgICAgICAgICByZXBvLnRhc2tzLnVwZGF0ZSh0YXNrLCB7aWRzVG9TdWJqZWN0TWFwOiB7Li4udGFzay5pZHNUb1N1YmplY3RNYXAsIFttYXJrZWRJZF06IHVuZGVmaW5lZH19KTtcclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVwby50YXNrcy51cGRhdGUodGFzaywge2lkc1RvU3ViamVjdE1hcDogdW5kZWZpbmVkfSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHJlcG8udGFza3MucmVtb3ZlUmVsYXRlZCh0YXNrLmlkLCBcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiLCBtYXJrZWREb2MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgIC8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICB9XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXRcIj5cclxuICAgICAgICA8U2VsZWN0UmVsYXRlZERvY3NcclxuICAgICAgICAgIHRpdGxlPXtMYFbDpGxqIGbDtnJtw6Vnb3JgfVxyXG4gICAgICAgICAgb3B0aW9ucz17dGFiLmFiaWxpdGllc31cclxuICAgICAgICAgIG1hcmtlZElkcz17dGFzay5hYmlsaXRpZXMubWFwKGEgPT4gYS5pZCl9XHJcbiAgICAgICAgICBtYXJrTW9kZT17dHJ1ZX1cclxuICAgICAgICAgIG1pZ3JhdGVkSWRzPXt0YXNrICYmIHRhc2subWlncmF0ZWRUZXh0cyAmJiB0YXNrLm1pZ3JhdGVkVGV4dHMuYWJpbGl0aWVzfVxyXG4gICAgICAgICAgb25NYXJrQ2hhbmdlZD17KG1hcmtlZElkLCBpc01hcmtlZCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtYXJrZWREb2MgPSB0YWIuYWJpbGl0aWVzLmZpbHRlcihhID0+IGEuaWQgPT09IG1hcmtlZElkKVswXTtcclxuICAgICAgICAgICAgaWYgKGlzTWFya2VkKSB7XHJcbiAgICAgICAgICAgICAgcmVwby50YXNrcy5hZGRSZWxhdGVkKHRhc2suaWQsIFwiYWJpbGl0aWVzXCIsIG1hcmtlZERvYyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcmVwby50YXNrcy5yZW1vdmVSZWxhdGVkKHRhc2suaWQsIFwiYWJpbGl0aWVzXCIsIG1hcmtlZERvYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH19XHJcbiAgICAgICAgLz5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXRcIj5cclxuICAgICAgICA8U2VsZWN0UmVsYXRlZERvY3NcclxuICAgICAgICAgIHRpdGxlPXtMYFbDpGxqIGNlbnRyYWx0IGlubmVow6VsbGB9XHJcbiAgICAgICAgICBvcHRpb25zPXt0YWIuY2VudHJhbENvbnRlbnR9XHJcbiAgICAgICAgICBtYXJrZWRJZHM9e3Rhc2suY2VudHJhbENvbnRlbnQubWFwKGNjID0+IGNjLmlkKX1cclxuICAgICAgICAgIG1hcmtNb2RlPXt0cnVlfVxyXG4gICAgICAgICAgbWlncmF0ZWRJZHM9e3Rhc2sgJiYgdGFzay5taWdyYXRlZFRleHRzICYmIHRhc2subWlncmF0ZWRUZXh0cy5jZW50cmFsQ29udGVudH1cclxuICAgICAgICAgIG9uTWFya0NoYW5nZWQ9eyhtYXJrZWRJZCwgaXNNYXJrZWQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbWFya2VkRG9jID0gdGFiLmNlbnRyYWxDb250ZW50LmZpbHRlcihhID0+IGEuaWQgPT09IG1hcmtlZElkKVswXTtcclxuICAgICAgICAgICAgaWYgKGlzTWFya2VkKSB7XHJcbiAgICAgICAgICAgICAgcmVwby50YXNrcy5hZGRSZWxhdGVkKHRhc2suaWQsIFwiY2VudHJhbENvbnRlbnRcIiwgbWFya2VkRG9jKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICByZXBvLnRhc2tzLnJlbW92ZVJlbGF0ZWQodGFzay5pZCwgXCJjZW50cmFsQ29udGVudFwiLCBtYXJrZWREb2MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgIC8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0XCI+XHJcbiAgICAgICAgPE9wZW5DbG9zZUJveCBjbGFzc05hbWU9XCJsYXJnZXJcIiB0aXRsZT17PHA+e0xgVsOkbGogZnJhbXRpZHNmw7ZybcOlZ29yYH08L3A+fT5cclxuICAgICAgICAgIDxiciAvPlxyXG4gICAgICAgICAgPENoZWNrbGlzdFxyXG4gICAgICAgICAgICBhdmFpbGFibGU9e2Z1dHVyZUFiaWxpdGllcy5tYXAoZmEgPT4gKHsgbmFtZTogZmEsIGtleTogZmEgfSkpfVxyXG4gICAgICAgICAgICBzZWxlY3RlZD17dGFzay5mdXR1cmVBYmlsaXRpZXN9XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtzZWxlY3RlZEZhcyA9PiByZXBvLnRhc2tzLnVwZGF0ZSh0YXNrLCB7IGZ1dHVyZUFiaWxpdGllczogc2VsZWN0ZWRGYXMgfSl9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgIDwvT3BlbkNsb3NlQm94PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvPjtcclxuICB9KVxyXG59PC9MYXp5Q29udGVudD5cclxufSIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFRhc2ssIExlYXJuaW5nR29hbHNDb250ZW50LCBDb3Vyc2VJbnN0YW5jZSwgQ291cnNlVGFiIH0gZnJvbSBcImtlZGJhY2tlbmQvbW9kZWxzXCI7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvLCBXaXRoR3JhcGhzLCBTdHJpcEdyYXBocyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IFRhc2tNaWdyYXRpb25Cb3ggfSBmcm9tICcuLi8uLi8uLi8uLi9jb3Vyc2UtYnVpbGRlci9tb2RhbC1wYWdlcy9lZGl0LXRhc2svdGFzay1taWdyYXRpb24tYm94JztcclxuaW1wb3J0IFJlYWN0RGF0ZVBpY2tlciBmcm9tICdyZWFjdC1kYXRlcGlja2VyJztcclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBDaGVja2xpc3QgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvY2hlY2tsaXN0JztcclxuaW1wb3J0IHsgTGF6eUNvbnRlbnQgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvbGF6eS1jb250ZW50JztcclxuaW1wb3J0IHsgRmllbGRMaW1pdHMgfSBmcm9tICcuLi8uLi8uLi9jb21tb24vZmllbGQtbGltaXRzJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgdGFzazogVGFzaztcclxuICB3cml0ZUFjY2VzczogYm9vbGVhbjtcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwbztcclxuICBjb250ZW50SWQ6IHN0cmluZztcclxuICB0YWI6IFN0cmlwR3JhcGhzPENvdXJzZVRhYj47XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBCYXNpY0VkaXRhYmxlVGFza0ZpZWxkcyA9ICh7dGFzaywgd3JpdGVBY2Nlc3MsIHJlcG8sIGNvbnRlbnRJZCwgdGFifTogUHJvcHMpID0+IHtcclxuICBjb25zdCB0YWJDbGFzcyA9IHRhYiA/IHRhYi50YWJDbGFzcyA6IG51bGw7IC8vIHRhYiBpcyB1bmRlZmluZWQgb24gc3RlcCBjb3Vyc2VzLiBCdXQgdGhlcmUgYXJlIG5vIG1pc3Npb24gdGFicyBvbiBzdGVwIGNvdXJzZXMuXHJcbiAgcmV0dXJuIDxkaXY+XHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWwgc3BhY2VkXCI+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgPHA+e3RhYkNsYXNzID09PSAnbWlzc2lvbi10YWInID9cclxuICAgICAgICAgIExgVXBwZHJhZ2V0cyBuYW1uOmAgOlxyXG4gICAgICAgICAgTGBVcHBnaWZ0ZW5zIG5hbW46YH08L3A+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgIDxpbnB1dCBhdXRvRm9jdXMgdHlwZT1cInRleHRcIiBzaXplPXszNX0gdmFsdWU9e3Rhc2submFtZX0gZGlzYWJsZWQ9eyF3cml0ZUFjY2Vzc30gcmVhZE9ubHk9eyF3cml0ZUFjY2Vzc30gb25DaGFuZ2U9e2V2ID0+IHtcclxuICAgICAgICAgIHJlcG8udGFza3MudXBkYXRlKHRhc2ssIHtuYW1lOiBldi50YXJnZXQudmFsdWUuc3Vic3RyKDAsIEZpZWxkTGltaXRzLk1BWF9DSEFSU19UQVNLX05BTUVTKX0pO1xyXG4gICAgICAgIH0gfSAvPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG5cclxuICAgIHt0YXNrLm1pZ3JhdGVkVGV4dHMgJiYgd3JpdGVBY2Nlc3MgJiYgPFRhc2tNaWdyYXRpb25Cb3ggdGFzaz17dGFza30gY291cnNlPXtudWxsfSB1cGRhdGVMaW5rPXsoaWQsIGxpbmtPclVubGluaykgPT5cclxuICAgICAgICB7dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkIHlldFwiKTt9fSAvPn1cclxuICAgIFxyXG4gICAge3RhYkNsYXNzICE9PSAnbWlzc2lvbi10YWInICYmIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbCBzcGFjZWRcIj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICA8cD57TGBMw6RyYW5kZW3DpWw6YH08L3A+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgIDxMYXp5Q29udGVudD57cmVwby5jb3Vyc2VDb250ZW50cy5pZChjb250ZW50SWQpLm1hcChjb250ZW50ID0+IHtcclxuICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgIT09ICdsZWFybmluZy1nb2FscycpIHJldHVybiA8cD57TGBFaiB2YWxiYXJ0YH08L3A+O1xyXG4gICAgICAgICAgY29uc3Qge2hhc0NvbW1vbkxlYXJuaW5nR29hbHN9ID0gKGNvbnRlbnQgYXMgTGVhcm5pbmdHb2Fsc0NvbnRlbnQpO1xyXG4gICAgICAgICAgY29uc3QgbGVhcm5pbmdHb2FscyA9IChjb250ZW50IGFzIExlYXJuaW5nR29hbHNDb250ZW50KS5jb21tb25MZWFybmluZ0dvYWxzO1xyXG4gICAgICAgICAgY29uc3QgYXZhaWxhYmxlR29hbHMgPSBsZWFybmluZ0dvYWxzLm1hcChsZyA9PiBsZy50cmltKCkpLmZpbHRlcihsZyA9PiBsZylcclxuICAgICAgICAgICAgICAubWFwKGxnID0+ICh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBsZyxcclxuICAgICAgICAgICAgICAgIGtleTogbGdcclxuICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICByZXR1cm4gPENoZWNrbGlzdFxyXG4gICAgICAgICAgICAgIGF2YWlsYWJsZT17YXZhaWxhYmxlR29hbHN9XHJcbiAgICAgICAgICAgICAgc2VsZWN0ZWQ9e3Rhc2subGVhcm5pbmdHb2FsLnNwbGl0KCdcXG4nKX1cclxuICAgICAgICAgICAgICBvbkNoYW5nZT17KGdvYWxzLCBnb2FsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGFzQ29tbW9uTGVhcm5pbmdHb2Fscykge1xyXG4gICAgICAgICAgICAgICAgICByZXBvLnRhc2tzLnVwZGF0ZSh0YXNrLCB7bGVhcm5pbmdHb2FsOiBnb2Fscy5qb2luKCdcXG4nKX0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgcmVwby50YXNrcy51cGRhdGUodGFzaywge2xlYXJuaW5nR29hbDogZ29hbH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAvPjtcclxuICAgICAgICB9KX08L0xhenlDb250ZW50PiAgICAgIFxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2Pn1cclxuICAgIFxyXG5cclxuICAgIDw+PGgyPnt0YWJDbGFzcyA9PT0gJ21pc3Npb24tdGFiJyA/IExgVXBwZHJhZ3N0eXBgIDogTGBVcHBnaWZ0c3R5cGB9PC9oMj5cclxuICAgICAgPENoZWNrbGlzdCBhdmFpbGFibGU9e1tcclxuICAgICAgICB0YWJDbGFzcyAhPT0gJ21pc3Npb24tdGFiJyAmJiB7bmFtZTogTGDDlnZuaW5nc3VwcGdpZnRgLCBrZXk6ICdleGVyY2lzZSd9LFxyXG4gICAgICAgIHtuYW1lOiBMYFVwcGdpZnRgLCBrZXk6IFwidGFza1wifSxcclxuICAgICAgICB7bmFtZTogTGBJbmzDpG1uaW5nc3VwcGdpZnRgLCBrZXk6ICdhc3NpZ25tZW50J30sXHJcbiAgICAgIF0uZmlsdGVyKHg9PngpfVxyXG4gICAgICAgIHNlbGVjdGVkPXtbdGFzay50YXNrVHlwZV19XHJcbiAgICAgICAgb25DaGFuZ2U9eyhfLCBjbGlja2VkS2V5KSA9PiByZXBvLnRhc2tzLnVwZGF0ZSh0YXNrLCB7dGFza1R5cGU6IGNsaWNrZWRLZXkgYXMgYW55fSl9XHJcbiAgICAgIC8+XHJcbiAgICAgIHt0YXNrLnRhc2tUeXBlID09PSAnYXNzaWdubWVudCcgJiYgPD5cclxuICAgICAgICA8cD5JbmzDpG1uaW5nc2RhdHVtPC9wPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAgPFJlYWN0RGF0ZVBpY2tlciBuZXh0TW9udGhCdXR0b25MYWJlbD1cIlwiIHNob3dXZWVrTnVtYmVycz17dHJ1ZX0gcHJldmlvdXNNb250aEJ1dHRvbkxhYmVsPVwiXCIgc2VsZWN0ZWQ9e3Rhc2suZGVhZGxpbmUgJiYgbW9tZW50KHRhc2suZGVhZGxpbmUpLnRvRGF0ZSgpfSBkYXRlRm9ybWF0PVwieXl5eS1NTS1kZFwiIGxvY2FsZT17XCJzdlwifSBwb3BwZXJQbGFjZW1lbnQ9XCJib3R0b20tc3RhcnRcIiBvbkNoYW5nZT17dmFsdWUgPT4ge1xyXG4gICAgICAgICAgICAgIHJlcG8udGFza3MudXBkYXRlKHRhc2ssIHtkZWFkbGluZTogbW9tZW50KHZhbHVlKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpfSApO1xyXG4gICAgICAgICAgICB9IH0gLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAge3Rhc2suZGVhZGxpbmUgJiYgPGEgY2xhc3NOYW1lPVwiZGVsZXRlRGF0ZVwiIGhyZWY9XCIjXCIgdGl0bGU9XCJUYSBib3J0IGlubMOkbW5pbmdzZGF0dW1cIiBvbkNsaWNrPXtldiA9PiB7XHJcbiAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICByZXBvLnRhc2tzLnVwZGF0ZSh0YXNrLCB7ZGVhZGxpbmU6IG51bGx9KTtcclxuICAgICAgICAgICAgfX0+PC9hPn1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGFza0NvbnRhaW5lclwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCIgb25DbGljaz17KCk9PlxyXG4gICAgICAgICAgICByZXBvLnRhc2tzLnVwZGF0ZSh0YXNrLCB7c2VuZFRvVXJrdW5kOiB0YXNrLnNlbmRUb1Vya3VuZCA9PSBudWxsID8gZmFsc2UgOiAhdGFzay5zZW5kVG9Vcmt1bmR9KX0+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17XCJjaGVja0JveFwiICsgKCh0YXNrLnNlbmRUb1Vya3VuZCA9PSBudWxsID8gdHJ1ZSA6IHRhc2suc2VuZFRvVXJrdW5kKSA/IFwiIGNoZWNrZWRcIiA6IFwiXCIpfT48L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+VmVyaWZ5IGFzc2lnbm1lbnRzIHdpdGggVXJrdW5kPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC8+fVxyXG4gICAgPC8+XHJcbiAgPC9kaXY+O1xyXG59XHJcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbywgU3RyaXBHcmFwaHMsIFdpdGhHcmFwaHMgfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBUYXNrLCBDb3Vyc2VJbnN0YW5jZSwgU3RlcENvdXJzZVRhYiwgQ291cnNlVGFiLCBUaGVtZUNvdXJzZVRhYiB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgRm9ybUZpZWxkIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2Zvcm0tZmllbGQnO1xyXG5pbXBvcnQgeyBUZXh0SW5wdXQgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvZm9ybS1maWVsZC10ZXh0LWlucHV0JztcclxuaW1wb3J0IHsgTCwgY29tcGFyZVByb3BzIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBCYXNpY0VkaXRhYmxlVGFza0ZpZWxkcyB9IGZyb20gJy4vYmFzaWMtZWRpdGFibGUtdGFzay1maWVsZHMnO1xyXG5pbXBvcnQgeyBUYXNrRm9vdGVyQnV0dG9ucyB9IGZyb20gJy4vdGFzay1mb290ZXItYnV0dG9ucyc7XHJcbmltcG9ydCB7IEludHJvZHVjdGlvblRleHRFZGl0b3IgfSBmcm9tICcuL2ludHJvZHVjdGlvbi10ZXh0LWVkaXRvcic7XHJcbmltcG9ydCB7IFRhc2tEZXNjcmlwdGlvbkVkaXRvciB9IGZyb20gJy4vdGFzay1kZXNjcmlwdGlvbi1lZGl0b3InO1xyXG5pbXBvcnQgeyBUYXNrV29ya2luZ1Byb2NlZHVyZUVkaXRvciB9IGZyb20gJy4vdGFzay13b3JraW5nLXByb2NlZHVyZS1lZGl0b3InO1xyXG5pbXBvcnQgeyBUYXNrRW1iZWRkZWRIVE1MRWRpdG9yIH0gZnJvbSAnLi90YXNrLWVtYmVkZGVkLWh0bWwtZWRpdG9yJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgcmVwbzogS2VkQmFja2VuZFJlcG87XHJcbiAgY291cnNlOiBXaXRoR3JhcGhzPENvdXJzZUluc3RhbmNlLCBcInRhYnNcIiB8IFwiYmxvY2tzXCI+O1xyXG4gIHRhYjogQ291cnNlVGFiO1xyXG4gIHRhYklkOiBzdHJpbmc7XHJcbiAgY29udGVudElkOiBzdHJpbmc7XHJcbiAgd3JpdGVBY2Nlc3M6IGJvb2xlYW47XHJcbiAgZHJhZnRJZDogc3RyaW5nO1xyXG4gIHNjaG9vbDogc3RyaW5nO1xyXG4gIHRhc2s6IFN0cmlwR3JhcGhzPFRhc2s+O1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgRWRpdFRhc2tGb3JtID0gKHtyZXBvLCBjb3Vyc2UsIGRyYWZ0SWQsIHRhYklkLCB0YWIsIGNvbnRlbnRJZCwgd3JpdGVBY2Nlc3MsIHRhc2ssIHNjaG9vbH06IFByb3BzKSA9PiB7XHJcbiAgcmV0dXJuIDw+XHJcbiAgICA8QmFzaWNFZGl0YWJsZVRhc2tGaWVsZHMgcmVwbz17cmVwb30gdGFzaz17dGFza30gd3JpdGVBY2Nlc3M9e3dyaXRlQWNjZXNzfSBjb250ZW50SWQ9e2NvbnRlbnRJZH0gdGFiPXt0YWJ9IC8+XHJcbiAgICA8SW50cm9kdWN0aW9uVGV4dEVkaXRvciByZXBvPXtyZXBvfSB0YXNrPXt0YXNrfSB3cml0ZUFjY2Vzcz17d3JpdGVBY2Nlc3N9IC8+XHJcbiAgICA8VGFza0Rlc2NyaXB0aW9uRWRpdG9yIHdyaXRlQWNjZXNzPXt3cml0ZUFjY2Vzc30gdGFzaz17dGFza30gcmVwbz17cmVwb30gLz5cclxuICAgIDxUYXNrV29ya2luZ1Byb2NlZHVyZUVkaXRvciB3cml0ZUFjY2Vzcz17d3JpdGVBY2Nlc3N9IHRhc2s9e3Rhc2t9IHJlcG89e3JlcG99IHN0ZXA9e3RhYiAmJiB0YWIudHlwZSA9PT0gJ3N0ZXAtY291cnNlLXRhYicgJiYgdGFiLnN0ZXBOb30gLz5cclxuICAgIDxUYXNrRW1iZWRkZWRIVE1MRWRpdG9yIHdyaXRlQWNjZXNzPXt3cml0ZUFjY2Vzc30gdGFzaz17dGFza30gcmVwbz17cmVwb30gLz5cclxuICAgIDxUYXNrRm9vdGVyQnV0dG9ucyByZXBvPXtyZXBvfSB0YXNrPXt0YXNrfSBjb3Vyc2VJZD17Y291cnNlLmlkfSBkcmFmdElkPXtkcmFmdElkfSB0YWJJZD17dGFiSWR9IGNvbnRlbnRJZD17Y29udGVudElkfSBzY2hvb2w9e3NjaG9vbH0gLz5cclxuICA8Lz47XHJcbn1cclxuXHJcbi8qXHJcblxyXG4gICogSW50ZSBrdW5uYSDDpG5kcmEgb3JkbmluZyBww6UgbMOlc3RhIHJ1dG9yIG9tIGludGUgaXNLZWRTdGFmZigpLlxyXG4gICogSW5nZW4gbMOkZ2cgdGlsbCB1cHBnaWZ0cy1rbmFwcCBvbSBpbnRlIGVkaXRNb2RlLlxyXG4gICogXHJcbiAgKiBSZWRpZ2VyYSB1cHBnaWZ0c2lubmVow6VsbFxyXG4gICogTMOlcyBsw6RyYW5kZW3DpWxlbiB0aWxsIGFkbWluIGFsbHRpZFxyXG4gICogS3VubmEga2xpY2thIGluIHNpZyBww6UgdXBwZ2lmdGVuXHJcbiAgKiBLdW5uYSB0YSBib3J0IHVwcGdpZnRcclxuICAqIEt1bm5hIG5vbGxzdMOkbGxhIMOkbmRyaW5nYXIgZsO2ciBza29sYW5cclxuXHJcbiovIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8gfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBUYXNrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBXeXNpd3lnIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL3d5c2l3eWcnO1xyXG5pbXBvcnQgYWN0aW9uc19zd2VkaXNoIGZyb20gJy4uLy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnL2FjdGlvbnMtc3YnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwb1xyXG4gIHRhc2s6IFRhc2tcclxuICB3cml0ZUFjY2VzczogYm9vbGVhblxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgSW50cm9kdWN0aW9uVGV4dEVkaXRvciA9ICh7cmVwbywgdGFzaywgd3JpdGVBY2Nlc3N9OiBQcm9wcyk9PiA8PlxyXG4gIDxoND57TGBJbnRyb3RleHRgfTwvaDQ+XHJcbiAgPHAgY2xhc3NOYW1lPVwic3ViSGVhZGVyXCI+KFNrcml2IGVuIGludHJvZHVrdGlvbiB0aWxsIHVwcGdpZnRlbik8L3A+XHJcbiAgPFd5c2l3eWdcclxuICAgIGFjdGlvbnM9e1tcclxuICAgICAgXCJib2xkXCIsXHJcbiAgICAgIFwiaXRhbGljXCIsXHJcbiAgICAgIFwidW5kZXJsaW5lXCIsXHJcbiAgICAgIFwibGlua1wiLFxyXG4gICAgICBcImltYWdlXCJcclxuICAgIF19XHJcbiAgICBkZWZhdWx0QWN0aW9ucz17YWN0aW9uc19zd2VkaXNofVxyXG4gICAgcmVhZE9ubHk9eyF3cml0ZUFjY2Vzc31cclxuICAgIGh0bWw9e3Rhc2suY29udGVudCB8fCBcIlwifVxyXG4gICAgb25DaGFuZ2U9e2h0bWwgPT4gcmVwby50YXNrcy51cGRhdGUodGFzaywge2NvbnRlbnQ6IGh0bWx9KX0gIC8+XHJcbjwvPlxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IFd5c2l3eWcgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zyc7XHJcbmltcG9ydCBhY3Rpb25zX3N3ZWRpc2ggZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL3d5c2l3eWcvYWN0aW9ucy1zdic7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgdGFza1R5cGVIZWFkaW5ncyB9IGZyb20gJy4uL3RleHRzJztcclxuaW1wb3J0IHsgRmllbGRMaW1pdHMgfSBmcm9tICcuLi8uLi8uLi9jb21tb24vZmllbGQtbGltaXRzJztcclxuaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gVGFza0Rlc2NyaXB0aW9uRWRpdG9yKHsgd3JpdGVBY2Nlc3MsIHRhc2ssIHJlcG8gfTogeyB3cml0ZUFjY2VzczogYm9vbGVhbiwgdGFzazogVGFzaywgcmVwbzogS2VkQmFja2VuZFJlcG8gfSkge1xyXG4gICAgY29uc3QgW251bUNoYXJzLCBzZXROdW1DaGFyc10gPSB1c2VTdGF0ZSgwKTtcclxuICAgIHJldHVybiA8PlxyXG4gICAgICAgIDxoND57dGFza1R5cGVIZWFkaW5nc1t0YXNrLnRhc2tUeXBlXSB8fCBMYFVwcGdpZnRgfTwvaDQ+XHJcbiAgICAgICAgPHAgY2xhc3NOYW1lPVwic3ViSGVhZGVyXCI+e0xgKFNrcml2IGluIGVuIGtvcnQgZsO2cmtsYXJpbmcsIG1heCAke0ZpZWxkTGltaXRzLk1BWF9DSEFSU19UQVNLX0lOVFJPX1RFWFR9IHRlY2tlbiwgdmFkIHVwcGdpZnRlbiBnw6VyIHV0IHDDpS4pYH08L3A+XHJcbiAgICAgICAgPFd5c2l3eWcgYWN0aW9ucz17W1xyXG4gICAgICAgICAgICBcImJvbGRcIixcclxuICAgICAgICBdfVxyXG4gICAgICAgICAgICBkZWZhdWx0QWN0aW9ucz17YWN0aW9uc19zd2VkaXNofVxyXG4gICAgICAgICAgICByZWFkT25seT17IXdyaXRlQWNjZXNzfVxyXG4gICAgICAgICAgICBodG1sPXt0YXNrLmRlc2NyaXB0aW9uIHx8IFwiXCJ9XHJcbiAgICAgICAgICAgIG1heENoYXJzPXtGaWVsZExpbWl0cy5NQVhfQ0hBUlNfVEFTS19JTlRST19URVhUfVxyXG4gICAgICAgICAgICByZXBvcnROdW1DaGFycz17bnVtQ2hhcnMgPT4gc2V0TnVtQ2hhcnMobnVtQ2hhcnMpfVxyXG4gICAgICAgICAgICBvbkNoYW5nZT17aHRtbCA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXBvLnRhc2tzLnVwZGF0ZSh0YXNrLCB7IGRlc2NyaXB0aW9uOiBodG1sIH0pO1xyXG4gICAgICAgICAgICB9fVxyXG4gICAgICAgIC8+XHJcbiAgICAgICAgPGRpdiBzdHlsZT17e3RleHRBbGlnbjogJ3JpZ2h0Jywgb3BhY2l0eTogMC43LCBmb250U2l6ZTogJzhwdCd9fT57TGAke251bUNoYXJzfSBhdiAke0ZpZWxkTGltaXRzLk1BWF9DSEFSU19UQVNLX0lOVFJPX1RFWFR9YH08L2Rpdj5cclxuICAgIDwvPjtcclxufVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBUYXNrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IGlzS2VkU3RhZmYgfSBmcm9tICcuLi8uLi8uLi9sb2dpYy9pcy1rZWQtc3RhZmYnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICB3cml0ZUFjY2VzczogYm9vbGVhblxyXG4gIHRhc2s6IFRhc2tcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwb1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgVGFza0VtYmVkZGVkSFRNTEVkaXRvciA9ICh7dGFzaywgcmVwb306IFByb3BzKSA9PiBpc0tlZFN0YWZmKCkgPyB0YXNrLmVtYmVkZGVkSHRtbCA/IDxkaXY+XHJcbiAgPGg0PntMYEluYsOkZGRhdCBtYXRlcmlhbGB9PC9oND5cclxuICA8cD57TGBLbGlwcCBpbiBIVE1MIGtvZCBuZWRhbmB9PC9wPlxyXG4gIDx0ZXh0YXJlYSBzdHlsZT17e3dpZHRoOiBcIjEwMCVcIiwgaGVpZ2h0OiBcIjEwMHB4XCJ9fVxyXG4gICAgdmFsdWU9e3Rhc2suZW1iZWRkZWRIdG1sfVxyXG4gICAgb25DaGFuZ2U9e2V2ID0+IHJlcG8udGFza3MudXBkYXRlKHRhc2ssIHtlbWJlZGRlZEh0bWw6IGV2LnRhcmdldC52YWx1ZX0pfSAvPlxyXG48L2Rpdj4gOlxyXG48ZGl2PlxyXG4gIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuXCJcclxuICAgIG9uQ2xpY2s9eygpPT5yZXBvLnRhc2tzLnVwZGF0ZSh0YXNrLCB7ZW1iZWRkZWRIdG1sOiBcIiBcIn0pfVxyXG4gID5cclxuICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWNvZGVcIiBhcmlhLWhpZGRlbiAvPiZuYnNwO3tMYEzDpGdnIHRpbGwgaW5iw6RkZGF0IG1hdGVyaWFsYH1cclxuICA8L2J1dHRvbj5cclxuICA8YnIvPlxyXG4gIDxici8+XHJcbjwvZGl2PiA6XHJcbjxkaXYgLz47XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgd2l0aFJvdXRlciwgUm91dGVQcm9wcywgUm91dGVDb21wb25lbnRQcm9wcyB9IGZyb20gJ3JlYWN0LXJvdXRlcic7XHJcbmltcG9ydCB7IExpbmsgfSBmcm9tICdyZWFjdC1yb3V0ZXItZG9tJztcclxuaW1wb3J0IHsgZGIgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi9nbG9iYWxzL2RiJztcclxuaW1wb3J0IGVudiBmcm9tICcuLi8uLi8uLi8uLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBwdWJsaXNoQ291cnNlIH0gZnJvbSAnLi4vLi4vLi4vbG9naWMvcHVibGlzaC1jb3Vyc2UnO1xyXG5pbXBvcnQgeyBIb3Jpem9udGFsSXRlbSB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9ob3Jpem9udGFsLWl0ZW0nO1xyXG5pbXBvcnQgeyBBbGlnbkhvcml6b250YWwgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvYWxpZ24taG9yaXpvbnRhbCc7XHJcbmltcG9ydCB7IFRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHNjaG9vbDogc3RyaW5nO1xyXG4gIGNvdXJzZUlkOiBzdHJpbmc7XHJcbiAgdGFiSWQ6IHN0cmluZztcclxuICBjb250ZW50SWQ6IHN0cmluZztcclxuICBkcmFmdElkOiBzdHJpbmc7XHJcbiAgdGFzazogVGFzaztcclxuICByZXBvOiBLZWRCYWNrZW5kUmVwbztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFRhc2tGb290ZXJCdXR0b25zID0gd2l0aFJvdXRlcigoeyBzY2hvb2wsIGNvdXJzZUlkLCB0YWJJZCwgY29udGVudElkLCBkcmFmdElkLCB0YXNrLCByZXBvLCBoaXN0b3J5IH06IFByb3BzICYgUm91dGVDb21wb25lbnRQcm9wcykgPT4gPD5cclxuICA8ZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ0biBidG4td2FybmluZyBwdWxsLXJpZ2h0XCIgb25DbGljaz17YXN5bmMgKCkgPT4ge1xyXG4gICAgICByZXBvLmNvdXJzZUNvbnRlbnRzLnJlbW92ZVJlbGF0ZWQoY29udGVudElkLCBcInRhc2tzXCIsIHRhc2spO1xyXG4gICAgICBhd2FpdCBkYi5zYXZlTm93KCk7XHJcbiAgICAgIGhpc3RvcnkucHVzaChgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9L3RhYnMvJHt0YWJJZH0vZHJhZnRzLyR7ZHJhZnRJZH0vZWRpdGApO1xyXG4gICAgfX0+XHJcbiAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLXRyYXNoXCIgYXJpYS1oaWRkZW49e3RydWV9IC8+Jm5ic3A7XHJcbiAgICAgICAge0xgVGEgYm9ydCB1cHBnaWZ0ZW5gfVxyXG4gICAgPC9kaXY+XHJcbiAgICA8QWxpZ25Ib3Jpem9udGFsPlxyXG4gICAgICA8SG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgICAgPGJ1dHRvblxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiYnRuXCJcclxuICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgcmVwby5zYXZlTm93KCk7XHJcbiAgICAgICAgICAgIGhpc3RvcnkucHVzaChgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9L3RhYnMvJHt0YWJJZCB8fCAnJCd9L2NvbnRlbnRzLyR7Y29udGVudElkfS90YXNrcy8ke3Rhc2suaWR9L2RyYWZ0cy8ke2RyYWZ0SWR9YCk7XHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgID5cclxuICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWV5ZVwiIGFyaWEtaGlkZGVuPXt0cnVlfSAvPiZuYnNwO1xyXG4gICAgICAgICAge0xgRsO2cmhhbmRzZ3JhbnNrYWB9XHJcbiAgICAgICAgPC9idXR0b24+XHJcbiAgICAgIDwvSG9yaXpvbnRhbEl0ZW0+XHJcbiAgICAgIDxIb3Jpem9udGFsSXRlbT5cclxuICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICBjbGFzc05hbWU9XCJidG5cIlxyXG4gICAgICAgICAgb25DbGljaz17YXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBoaXN0b3J5LnB1c2goYC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZUlkfS90YWJzLyR7dGFiSWQgfHwgJyQnfS9kcmFmdHMvJHtkcmFmdElkfS9lZGl0YCk7XHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgID5cclxuICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWFycm93LWxlZnRcIiBhcmlhLWhpZGRlbj17dHJ1ZX0gLz4mbmJzcDtcclxuICAgICAgICAgIHtMYMOFdGVyZ8OlIHRpbGwgZmxpa2VuYH1cclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgPC9Ib3Jpem9udGFsSXRlbT5cclxuICAgICAgey8qPEhvcml6b250YWxJdGVtPlxyXG4gICAgICAgIDxidXR0b25cclxuICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4td2FybmluZ1wiXHJcbiAgICAgICAgICBvbkNsaWNrPXthc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGF3YWl0IHB1Ymxpc2hDb3Vyc2Uoe1xyXG4gICAgICAgICAgICAgIHNjaG9vbCxcclxuICAgICAgICAgICAgICBjb3Vyc2VJZCxcclxuICAgICAgICAgICAgICBkcmFmdFJlcG86IHJlcG9cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGF3YWl0IGRiLnNhdmVOb3coKTtcclxuICAgICAgICAgICAgaGlzdG9yeS5wdXNoKGAvJHtzY2hvb2x9L2NvdXJzZXMvJHtjb3Vyc2VJZH0vdGFicy8ke3RhYklkIHx8ICckJ31gKTtcclxuICAgICAgICAgIH19XHJcbiAgPlxyXG4gICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtcGxheVwiIGFyaWEtaGlkZGVuPXt0cnVlfSAvPiZuYnNwO1xyXG4gICAgICAgICAge0xgUHVibGljZXJhYH1cclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgPC9Ib3Jpem9udGFsSXRlbT4qL31cclxuICAgIDwvQWxpZ25Ib3Jpem9udGFsPlxyXG4gIDwvZGl2PlxyXG4gIDxici8+XHJcbiAgey8qPGJ1dHRvbiBjbGFzc05hbWU9XCJidG5cIiBvbkNsaWNrPXsoKT0+XHJcbiAgICAgIGhpc3RvcnkucHVzaChgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9L3RhYnMvJHt0YWJJZCB8fCAnJCd9L3Rhc2tzLyR7dGFza0lkfWApfT5cclxuICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWFycm93LWxlZnRcIiBhcmlhLWhpZGRlbj17dHJ1ZX0gLz4mbmJzcDtcclxuICAgIHtMYEF2c2x1dGEgcmVkaWdlcmluZ2B9XHJcblxyXG4gIDwvYnV0dG9uPiovfVxyXG48Lz4pO1xyXG5cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyB1c2VDb250ZXh0IH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBUYXNrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBXeXNpd3lnLCBBY3Rpb24gfSBmcm9tICcuLi8uLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvd3lzaXd5Zyc7XHJcbmltcG9ydCBhY3Rpb25zX3N3ZWRpc2ggZnJvbSAnLi4vLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL3d5c2l3eWcvYWN0aW9ucy1zdic7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRSZXBvIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgTCwgc2hvd0Vycm9yIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBEaWFsb2dzQ29udGV4dCB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9kaWFsb2ctY29udGV4dCc7XHJcbmltcG9ydCB7IGlzS2VkU3RhZmYgfSBmcm9tICcuLi8uLi8uLi9sb2dpYy9pcy1rZWQtc3RhZmYnO1xyXG5pbXBvcnQgeyBTZWxlY3RXb3JkQmFuayB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9zZWxlY3Qtd29yZC1iYW5rJztcclxuaW1wb3J0IHsgc2F2ZVNlbGVjdGlvbiwgcmVzdG9yZVNlbGVjdGlvbiB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy93eXNpd3lnL3Jlc3RvcmUtc2VsZWN0aW9uJztcclxuaW1wb3J0IHsgY2ZnIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBUYXNrV29ya2luZ1Byb2NlZHVyZUVkaXRvcih7IHdyaXRlQWNjZXNzLCB0YXNrLCByZXBvLCBzdGVwIH06IHsgd3JpdGVBY2Nlc3M6IGJvb2xlYW4sIHRhc2s6IFRhc2ssIHJlcG86IEtlZEJhY2tlbmRSZXBvLCBzdGVwPzogbnVtYmVyIH0pIHtcclxuICBjb25zdCBkaWFsb2dDdHggPSB1c2VDb250ZXh0KERpYWxvZ3NDb250ZXh0KTtcclxuXHJcbiAgY29uc3QgYWN0aW9uczogKFBhcnRpYWw8QWN0aW9uPiB8IHN0cmluZylbXSA9IFtcclxuICAgIFwiYm9sZFwiLFxyXG4gICAgXCJpdGFsaWNcIixcclxuICAgIFwidW5kZXJsaW5lXCIsXHJcbiAgICBcIm9saXN0XCIsXHJcbiAgICBcIm91dGRlbnRcIixcclxuICAgIFwiaW5kZW50XCIsXHJcbiAgICBcImxpbmtcIixcclxuICAgIFwiaW1hZ2VcIlxyXG4gIF07XHJcblxyXG4gIGlmICh3cml0ZUFjY2VzcyAmJiBpc0tlZFN0YWZmKCkpIHtcclxuICAgIGlmIChzdGVwKSB7XHJcbiAgICAgIC8vIFRoaXMgdGFzayBpcyBwdXQgb24gYSBzdGVwLiBXZSBjb3VsZCBsaW5rIHRvIGEgd29yZCBiYW5rOlxyXG4gICAgICBhY3Rpb25zLnB1c2goe1xyXG4gICAgICAgIG5hbWU6IFwibGlzdFdvcmRCYW5rXCIsXHJcbiAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtYm9va1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nLFxyXG4gICAgICAgIHRpdGxlOiBMYEzDpG5rYSB0aWxsIG9yZGJhbmtgLFxyXG4gICAgICAgIHJlc3VsdChldiwgd3lzaXd5Zykge1xyXG4gICAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gc2F2ZVNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgZGlhbG9nQ3R4Lm9wZW5EaWFsb2coPFNlbGVjdFdvcmRCYW5rIHN1YmplY3Q9e3Rhc2suc3ViamVjdH0gc3RlcD17c3RlcH0gb25TZWxlY3Q9eyh7IG5hbWUsIHVybCB9KSA9PiB7XHJcbiAgICAgICAgICAgIGRpYWxvZ0N0eC5jbG9zZURpYWxvZygpO1xyXG4gICAgICAgICAgICByZXN0b3JlU2VsZWN0aW9uKHNlbGVjdGlvbik7XHJcbiAgICAgICAgICAgIGNvbnN0IGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgICAgIGVsZW0uaHJlZiA9IHVybDtcclxuICAgICAgICAgICAgZWxlbS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShuYW1lKSk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdpbnNlcnRIVE1MJywgZmFsc2UsIGVsZW0ub3V0ZXJIVE1MKTtcclxuICAgICAgICAgIH0gfSAvPik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGFjdGlvbnMucHVzaCh7XHJcbiAgICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWxpbmtcIiBzdHlsZT1cImNvbG9yOnZhcigtLWNvbC1hY2NlbnQpXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPicsXHJcbiAgICAgIHRpdGxlOiAnUmVzdXJzIGzDpG5rJyxcclxuICAgICAgcmVzdWx0OiAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdXJsID0gd2luZG93LnByb21wdCgnQW5nZSBsw6Rua2VucyBVUkwgZsO2ciByZXN1cnNlbicpXHJcbiAgICAgICAgaWYodXJsKSB7XHJcbiAgICAgICAgICAvL2NoZWNrIHRoYXQgdGhlIGVudGVyZWQgVVJMIGlzIHRoZSBzYW1lIHdpdGggdGhlIGN1cnJlbnQgb25lXHJcbiAgICAgICAgICBjb25zdCB1cmxPYmogPSBuZXcgVVJMKCcnLCB1cmwpO1xyXG4gICAgICAgICAgaWYodXJsT2JqLmhvc3QgIT09IHdpbmRvdy5sb2NhdGlvbi5ob3N0KSB7XHJcbiAgICAgICAgICAgIHNob3dFcnJvcihcIk9naWx0aWcgcmVzdXJzYWRyZXNzXCIpOyBcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvL21hdGNoIHRoZSByZXNvdXJjZUlkXHJcbiAgICAgICAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKFwiKFteXFwufC9dKykuKFteXFwuXSspKD89XFwuaHRtbClcIik7XHJcbiAgICAgICAgICB2YXIgdXJsUmVzdWx0cyA9IHJlZ2V4LmV4ZWModXJsT2JqLnBhdGhuYW1lKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYoIWNmZy5LRURfUkVTT1VSQ0VTX1VSTCkge1xyXG4gICAgICAgICAgICBzaG93RXJyb3IoXCJSZXN1cnNlciBVUkwgw6RyIGludGUga29uZmlndXJlcmFkXCIpOyBcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy9yZXBsYWNlIGNmZyB2YWx1ZSB3aXRoIHRoZSBvbmUgZnJvbSB0aGUgcHJvdmlkZWQgdXJsXHJcbiAgICAgICAgICB2YXIgdmFsdWVGcm9tQ29uZmlnID0gY2ZnLktFRF9SRVNPVVJDRVNfVVJMLnJlcGxhY2UoXCJ7dmFsdWV9XCIsIHVybFJlc3VsdHNbMF0pO1xyXG4gICAgICAgICAgaWYodmFsdWVGcm9tQ29uZmlnKSBkb2N1bWVudC5leGVjQ29tbWFuZCgnY3JlYXRlTGluaycsIGZhbHNlLCB2YWx1ZUZyb21Db25maWcpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIDw+XHJcbiAgICA8aDQ+e0xgQXJiZXRzcHJvY2Vzc2B9PC9oND5cclxuICAgIDxXeXNpd3lnIGFjdGlvbnM9e2FjdGlvbnN9IGRlZmF1bHRBY3Rpb25zPXthY3Rpb25zX3N3ZWRpc2h9IHJlYWRPbmx5PXshd3JpdGVBY2Nlc3N9IGh0bWw9e3Rhc2sud29ya2luZ1Byb2NlZHVyZSB8fCBcIlwifSBvbkNoYW5nZT17aHRtbCA9PiB7XHJcbiAgICAgIHJlcG8udGFza3MudXBkYXRlKHRhc2ssIHsgd29ya2luZ1Byb2NlZHVyZTogaHRtbCB9KTtcclxuICAgIH19IC8+XHJcbiAgPC8+O1xyXG59XHJcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IGxpdmVRdWVyeVZpZXcgfSBmcm9tICcuLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvbGl2ZS1xdWVyeS12aWV3JztcclxuaW1wb3J0IHsgVmFsdWUgfSBmcm9tICdrZWRiYWNrZW5kL29ic2VydmFibGUnO1xyXG5pbXBvcnQgeyBXaXRoR3JhcGhzLCBLZWRCYWNrZW5kUmVwbyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IENvdXJzZUluc3RhbmNlLCBUYXNrLCBDb3Vyc2VUYWIgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IFR3b0NvbHVtbnNQYWdlIH0gZnJvbSAnLi4vLi4vY29tbW9uL3R3by1jb2x1bW5zLXBhZ2UnO1xyXG5pbXBvcnQgeyBFZGl0VGFza0Zvcm0gfSBmcm9tICcuL3JpZ2h0LWNvbHVtbi9lZGl0LXRhc2stZm9ybSc7XHJcbmltcG9ydCB7IFRhc2tWaWV3ZXIgfSBmcm9tICcuL3ZpZXdlci90YXNrLXZpZXdlcic7XHJcbmltcG9ydCB7IExhenlDb250ZW50IH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xhenktY29udGVudCc7XHJcbmltcG9ydCB7IHJlc29sdmVSZXF1aXJlbWVudE9yZGVyIH0gZnJvbSAnLi4vLi4vbG9naWMvb3JkZXJlZC1yZXF1aXJlbWVudHMnO1xyXG5pbXBvcnQgeyBFZGl0UmVxdWlyZW1lbnRzIH0gZnJvbSAnLi9sZWZ0LWNvbHVtbi9lZGl0LXJlcXVpcmVtZW50cyc7XHJcbmltcG9ydCB7IGlzVGVhY2hlckF0U2Nob29sIH0gZnJvbSAnLi4vLi4vLi4vLi4vYWNjZXNzLWNvbnRyb2wnO1xyXG5pbXBvcnQgeyBpc0tlZFN0YWZmIH0gZnJvbSAnLi4vLi4vbG9naWMvaXMta2VkLXN0YWZmJztcclxuaW1wb3J0IHsgaXNFbXBsb3llZSB9IGZyb20gJy4uLy4uL2xvZ2ljL2lzLWVtcGxveWVlJztcclxuXHJcbmltcG9ydCB7IGdldElkc05vdENvdmVyZWRCeVJlcVJlZmVyZW5jaW5nRG9jcyB9IGZyb20gJy4uLy4uLy4uL2NvdXJzZS1idWlsZGVyL2NvdXJzZXMvYnVzaW5lc3MtbG9naWMnO1xyXG5pbXBvcnQgeyBmbGF0dGVuIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQcm9wcyB7XHJcbiAgc2Nob29sOiBzdHJpbmc7XHJcbiAgY291cnNlOiBXaXRoR3JhcGhzPENvdXJzZUluc3RhbmNlLCBcInRhYnNcIiB8IFwiYmxvY2tzXCI+O1xyXG4gIGRyYWZ0SWQ6IHN0cmluZztcclxuICBicmFuY2g6IEtlZEJhY2tlbmRSZXBvXHJcbiAgYWN0aXZlVGFiOiBzdHJpbmc7XHJcbiAgY29udGVudElkOiBzdHJpbmc7XHJcbiAgdGFza0lkOiBzdHJpbmc7XHJcbiAgYmxvY2tJZDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgVGFza0VkaXRvciA9IGxpdmVRdWVyeVZpZXcoKHtcclxuICBzY2hvb2wsXHJcbiAgY291cnNlLFxyXG4gIGFjdGl2ZVRhYixcclxuICBkcmFmdElkLFxyXG4gIGJyYW5jaCxcclxuICBjb250ZW50SWQsXHJcbiAgdGFza0lkLFxyXG4gIGJsb2NrSWQgfTogUHJvcHMpID0+XHJcbntcclxuICBjb25zdCB0aGVtZUNvdXJzZVRhYiA9IGNvdXJzZS50YWJzLmZpbmQodCA9PiB0LmlkID09PSBhY3RpdmVUYWIpO1xyXG4gIGNvbnN0IGludm9sdmVkVGFiSWRzID0gKHRoZW1lQ291cnNlVGFiICYmIHRoZW1lQ291cnNlVGFiLnRhYkNsYXNzID09PSAnbWlzc2lvbi10YWInKSA/XHJcbiAgICBjb3Vyc2UudGFicy5maWx0ZXIodGFiID0+IHRhYi50YWJDbGFzcyA9PT0gJ3N1YmplY3QtdGFiJykubWFwKHRhYiA9PiB0YWIuaWQpIDpcclxuICAgIFthY3RpdmVUYWJdO1xyXG4gIHJldHVybiBicmFuY2gudGFza3NcclxuICAgIC5pbmNsdWRlKFwiYWJpbGl0aWVzXCIsIFwiY2VudHJhbENvbnRlbnRcIiwgXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIikuaW5jbHVkZUlkc09ubHkoKVxyXG4gICAgLy8uZGVidWcoKVxyXG4gICAgLmhhc0VkZ2VzRnJvbShbY29udGVudElkXSlcclxuICAgIC50b1ZhbHVlKClcclxuICAgIC5jb21iaW5lTGF0ZXN0KFxyXG4gICAgICBicmFuY2guY291cnNlVGFic1xyXG4gICAgICAgIC5pbmNsdWRlKFwiYWJpbGl0aWVzXCIsIFwiY2VudHJhbENvbnRlbnRcIiwgXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIilcclxuICAgICAgICAuaW5jbHVkZUlkc09ubHkoKVxyXG4gICAgICAgIC5pZHMoaW52b2x2ZWRUYWJJZHMpKVxyXG4gICAgLnN3aXRjaE1hcCgoW3Rhc2tzLCBpbnZvbHZlZFRhYnNdKSA9PiB7XHJcbiAgICAgIGNvbnN0IHRhc2sgPSB0YXNrcy5maWx0ZXIodCA9PiB0LmlkID09PSB0YXNrSWQpWzBdO1xyXG4gICAgICBjb25zdCB1bmNvdmVyZWRJZHMgPSBnZXRJZHNOb3RDb3ZlcmVkQnlSZXFSZWZlcmVuY2luZ0RvY3MoaW52b2x2ZWRUYWJzLCB0YXNrcyk7XHJcbiAgICAgIC8vY29tcHV0ZSB1bmNvdmVyZWQgc2VudGVuY2VzXHJcbiAgICAgIGNvbnN0IGFsbENvdmVyZWRTZW50ZW5jZXMgPSB0YXNrcyAmJiBmbGF0dGVuPHtbaWQ6c3RyaW5nXTpzdHJpbmdbXX0+KHRhc2tzLmZpbHRlcihyZXEgPT4gcmVxLnBhcnRpYWxSZXF1aXJtZW50cyAhPSBudWxsKS5tYXAoKHtwYXJ0aWFsUmVxdWlybWVudHN9KT0+IHBhcnRpYWxSZXF1aXJtZW50cykpO1xyXG5cclxuICAgICAgcmV0dXJuIHJlc29sdmVSZXF1aXJlbWVudE9yZGVyKHRhc2spLm1hcCh0YXNrID0+IHtcclxuICAgICAgICByZXR1cm4gPFR3b0NvbHVtbnNQYWdlXHJcbiAgICAgICAgICBsZWZ0PXs8RWRpdFJlcXVpcmVtZW50c1xyXG4gICAgICAgICAgICByZXBvPXticmFuY2h9XHJcbiAgICAgICAgICAgIHRhc2s9e3Rhc2t9XHJcbiAgICAgICAgICAgIHVuY292ZXJlZElkcz17dW5jb3ZlcmVkSWRzfVxyXG4gICAgICAgICAgICB0YWJJZHM9e2ludm9sdmVkVGFiSWRzfVxyXG4gICAgICAgICAgICBibG9ja0lkPXtibG9ja0lkfSBcclxuICAgICAgICAgICAgYWxsQ292ZXJlZFNlbnRlbmNlcyA9IHthbGxDb3ZlcmVkU2VudGVuY2VzfS8+fSAvLyBWaWQgXCJVcHBkcmFnXCIsIHNraWNrYSBpbiBhbGxhIMOkbW5lc2ZsaWthcnMgSUQgaMOkciFcclxuICAgICAgICAgIHJpZ2h0PXs8RWRpdFRhc2tGb3JtXHJcbiAgICAgICAgICAgIHJlcG89e2JyYW5jaH1cclxuICAgICAgICAgICAgc2Nob29sPXtzY2hvb2x9XHJcbiAgICAgICAgICAgIGNvdXJzZT17Y291cnNlfVxyXG4gICAgICAgICAgICBkcmFmdElkPXtkcmFmdElkfVxyXG4gICAgICAgICAgICB0YWJJZD17YWN0aXZlVGFifVxyXG4gICAgICAgICAgICB0YWI9e2ludm9sdmVkVGFicy5maW5kKHQgPT4gdC5pZCA9PT0gYWN0aXZlVGFiKSBhcyBDb3Vyc2VUYWJ9XHJcbiAgICAgICAgICAgIGNvbnRlbnRJZD17Y29udGVudElkfVxyXG4gICAgICAgICAgICB3cml0ZUFjY2Vzcz17aXNFbXBsb3llZShzY2hvb2wpfVxyXG4gICAgICAgICAgICB0YXNrPXt0YXNrfVxyXG4gICAgICAgICAgLz59XHJcbiAgICAgICAgICByaWdodFdpZHRoPXs2fVxyXG4gICAgICAgIC8+XHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG59KTtcclxuIiwiaW1wb3J0IHsgVGFza1R5cGUgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmV4cG9ydCBjb25zdCB0YXNrVHlwZUhlYWRpbmdzID0ge1xyXG4gIGV4ZXJjaXNlOiBMYMOWdm5pbmdzdXBwZ2lmdGAsXHJcbiAgdGFzazogTGBVcHBnaWZ0YCxcclxuICBhc3NpZ25tZW50OiBMYElubMOkbW5pbmdzdXBwZ2lmdGBcclxufTtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgbGl2ZVF1ZXJ5VmlldyB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9saXZlLXF1ZXJ5LXZpZXcnO1xyXG5pbXBvcnQgeyBWYWx1ZSB9IGZyb20gJ2tlZGJhY2tlbmQvb2JzZXJ2YWJsZSc7XHJcbmltcG9ydCB7IFdpdGhHcmFwaHMsIEtlZEJhY2tlbmRSZXBvIH0gZnJvbSAna2VkYmFja2VuZC9yZXBvJztcclxuaW1wb3J0IHsgQ291cnNlSW5zdGFuY2UsIFRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IFR3b0NvbHVtbnNQYWdlIH0gZnJvbSAnLi4vLi4vLi4vY29tbW9uL3R3by1jb2x1bW5zLXBhZ2UnO1xyXG5pbXBvcnQgeyBFZGl0VGFza0Zvcm0gfSBmcm9tICcuLi9yaWdodC1jb2x1bW4vZWRpdC10YXNrLWZvcm0nO1xyXG5pbXBvcnQgeyBXZWVrUGxhbm5lciB9IGZyb20gJy4uLy4uLy4uLy4uL3dlZWtwbGFubmVyL3dlZWtwbGFubmVyJztcclxuaW1wb3J0IHsgVGFza1ZpZXdlciB9IGZyb20gJy4vdGFzay12aWV3ZXInO1xyXG5pbXBvcnQgeyBMYXp5Q29udGVudCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9sYXp5LWNvbnRlbnQnO1xyXG5pbXBvcnQgeyByZXNvbHZlUmVxdWlyZW1lbnRPcmRlciB9IGZyb20gJy4uLy4uLy4uL2xvZ2ljL29yZGVyZWQtcmVxdWlyZW1lbnRzJztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgUm91dGVDb21wb25lbnRQcm9wcywgd2l0aFJvdXRlciB9IGZyb20gJ3JlYWN0LXJvdXRlcic7XHJcbmltcG9ydCB7IEFsaWduSG9yaXpvbnRhbCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9hbGlnbi1ob3Jpem9udGFsJztcclxuaW1wb3J0IGVudiBmcm9tICcuLi8uLi8uLi8uLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgY2ZnIGZyb20gJy4uLy4uLy4uLy4uLy4uL2dsb2JhbHMvS0VELmNmZyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFByb3Bze1xyXG4gIHNjaG9vbDogc3RyaW5nO1xyXG4gIGNvdXJzZUlkOiBzdHJpbmc7XHJcbiAgbGF6eVJlcG86IFZhbHVlPEtlZEJhY2tlbmRSZXBvPlxyXG4gIGFjdGl2ZVRhYjogc3RyaW5nO1xyXG4gIHRhc2tJZDogc3RyaW5nO1xyXG4gIGRyYWZ0SWQ/OiBzdHJpbmc7XHJcbiAgY29udGVudElkPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgVGFza1ZpZXdlclBhZ2UgPSBsaXZlUXVlcnlWaWV3KChwcm9wczogUHJvcHMpID0+XHJcbiAgcHJvcHMubGF6eVJlcG8ubWFwKHJlcG8gPT4gPFRhc2tWaWV3ZXJQYWdlSW5uZXIgey4uLnsuLi5wcm9wcywgcmVwb319IC8+KSk7XHJcblxyXG5leHBvcnQgY29uc3QgVGFza1ZpZXdlclBhZ2VJbm5lciA9IHdpdGhSb3V0ZXIobGl2ZVF1ZXJ5Vmlldygoe1xyXG4gIHNjaG9vbCwgY291cnNlSWQsIGFjdGl2ZVRhYiwgcmVwbywgdGFza0lkLCBkcmFmdElkLCBjb250ZW50SWQsIGhpc3Rvcnl9OiBQcm9wcyAmIHtyZXBvOiBLZWRCYWNrZW5kUmVwb30gJiBSb3V0ZUNvbXBvbmVudFByb3BzKSA9PiAoXHJcbiAgICByZXBvLnRhc2tzXHJcbiAgICAgIC5pbmNsdWRlKFwiYWJpbGl0aWVzXCIsIFwiY2VudHJhbENvbnRlbnRcIiwgXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIilcclxuICAgICAgLmlkKHRhc2tJZClcclxuICAgICAgLm1hcCgodGFzaykgPT4gPFR3b0NvbHVtbnNQYWdlXHJcbiAgICAgICAgbGVmdD17PExhenlDb250ZW50PntyZXNvbHZlUmVxdWlyZW1lbnRPcmRlcih0YXNrKS5tYXAodGFzayA9PiA8PlxyXG4gICAgICAgICAgICA8VGFza1ZpZXdlclxyXG4gICAgICAgICAgICAgIHNjaG9vbD17c2Nob29sfVxyXG4gICAgICAgICAgICAgIHRhc2s9e3Rhc2t9XHJcbiAgICAgICAgICAgICAgY291cnNlSWQ9e2NvdXJzZUlkfVxyXG4gICAgICAgICAgICAgIGFiaWxpdGllcz17dGFzay5hYmlsaXRpZXN9XHJcbiAgICAgICAgICAgICAgY2VudHJhbENvbnRlbnQ9e3Rhc2suY2VudHJhbENvbnRlbnR9XHJcbiAgICAgICAgICAgICAgcmVxdWlyZW1lbnRzPXt0YXNrLmtub3dsZWRnZVJlcXVpcmVtZW50c31cclxuICAgICAgICAgICAgICBmdXR1cmVBYmlsaXRpZXM9e3Rhc2suZnV0dXJlQWJpbGl0aWVzfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICB7ZHJhZnRJZCAmJiBjb250ZW50SWQgJiYgPD5cclxuICAgICAgICAgICAgICA8aHIgLz5cclxuICAgICAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidG5cIlxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCk9Pmhpc3RvcnkucHVzaChgLyR7c2Nob29sfS9jb3Vyc2VzLyR7Y291cnNlSWR9L3RhYnMvJHthY3RpdmVUYWJ9L2NvbnRlbnRzLyR7Y29udGVudElkfS90YXNrcy8ke3Rhc2tJZH0vZHJhZnRzLyR7ZHJhZnRJZH0vZWRpdGApfVxyXG4gICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWxnIGZhLXBlbmNpbFwiIC8+IHtMYEZvcnRzw6R0dCByZWRpZ2VyYWB9XHJcbiAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgIDwvPn1cclxuICAgICAgICAgIDwvPil9XHJcbiAgICAgICAgPC9MYXp5Q29udGVudD59XHJcbiAgICAgICAgcmlnaHQ9ezxXZWVrUGxhbm5lciBlbnY9e2Vudn0gdmlld0NvdXJzZVVybD17Y2ZnLktFRF9DT1VSU0VfVklFV0VSX1VSTH0gLz59XHJcbiAgICAgICAgcmlnaHRXaWR0aD17NX1cclxuICAgICAgLz4pXHJcbikpKTtcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFJlcG8gfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBUYXNrLCBBYmlsaXR5LCBDZW50cmFsQ29udGVudCwgS25vd2xlZGdlUmVxdWlyZW1lbnQgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IGlzRW1wbG95ZWUgfSBmcm9tICcuLi8uLi8uLi9sb2dpYy9pcy1lbXBsb3llZSc7XHJcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuaW1wb3J0IHsgVGFza0Fzc2lnbm1lbnRzIH0gZnJvbSAnLi4vLi4vLi4vLi4vY291cnNlLXZpZXdlci9jb3Vyc2UtcGFnZS90YXNrLWFzc2lnbm1lbnRzJztcclxuaW1wb3J0IHsgQWJpbGl0aWVzQm94IH0gZnJvbSAnLi4vLi4vLi4vLi4vY291cnNlLXZpZXdlci9zdWJjb21wb25lbnRzL2FiaWxpdGllcy1ib3gnO1xyXG5pbXBvcnQgeyBDZW50cmFsQ29udGVudEJveCB9IGZyb20gJy4uLy4uLy4uLy4uL2NvdXJzZS12aWV3ZXIvc3ViY29tcG9uZW50cy9jZW50cmFsLWNvbnRlbnQtYm94JztcclxuaW1wb3J0IHsgS25vd2xlZGdlUmVxdWlyZW1lbnRzQm94IH0gZnJvbSAnLi4vLi4vLi4vLi4vY291cnNlLXZpZXdlci9zdWJjb21wb25lbnRzL2tub3dsZWRnZS1yZXF1aXJlbWVudHMtdGFibGUnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyB0YXNrVHlwZUhlYWRpbmdzIH0gZnJvbSAnLi4vdGV4dHMnO1xyXG5pbXBvcnQgeyBGdXR1cmVBYmlsaXRpZXNCb3ggfSBmcm9tICcuLi8uLi8uLi9jb21tb24vZnV0dXJlLWFiaWxpdGllcy1ib3gnO1xyXG5pbXBvcnQgeyBmZWF0dXJlcyB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL2ZlYXR1cmVzJztcclxuXHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHNjaG9vbDogc3RyaW5nO1xyXG4gIHRhc2s6IFRhc2s7XHJcbiAgY291cnNlSWQ6IHN0cmluZztcclxuICBhYmlsaXRpZXM6IEFiaWxpdHlbXTtcclxuICBjZW50cmFsQ29udGVudDogQ2VudHJhbENvbnRlbnRbXTtcclxuICByZXF1aXJlbWVudHM6IEtub3dsZWRnZVJlcXVpcmVtZW50W107XHJcbiAgZnV0dXJlQWJpbGl0aWVzOiBzdHJpbmdbXTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFRhc2tWaWV3ZXIgPSAoeyBzY2hvb2wsIHRhc2ssIGNvdXJzZUlkLCBhYmlsaXRpZXMsIGNlbnRyYWxDb250ZW50LCByZXF1aXJlbWVudHMsIGZ1dHVyZUFiaWxpdGllcyB9OiBQcm9wcykgPT4ge1xyXG4gIGNvbnN0IGRlYWRsaW5lVG9vTGF0ZSA9IHRhc2suZGVhZGxpbmUgJiYgbW9tZW50KHRhc2suZGVhZGxpbmUpLmVuZE9mKCdkYXknKSA8IG1vbWVudCgpO1xyXG4gIFxyXG4gIHJldHVybiA8ZGl2PlxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzdi10ZXh0LXBvcnRsZXQgc3YtdXNlLW1hcmdpbnMgc3Ytc2tpcC1zcGFjZXJcIj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdi10ZXh0LXBvcnRsZXQtY29udGVudFwiPlxyXG4gICAgICAgIDxoMSBjbGFzc05hbWU9XCJoMVwiPnt0YXNrLm5hbWV9PC9oMT5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXRcIj5cclxuICAgICAge3Rhc2suY29udGVudCAmJiA8PlxyXG4gICAgICAgIDxkaXYgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3sgX19odG1sOiB0YXNrLmNvbnRlbnQgfX0gLz5cclxuICAgICAgPC8+fVxyXG4gICAgPC9kaXY+XHJcbiAgICB7dGFzay5kZXNjcmlwdGlvbiAmJiA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0XCI+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtbXCJrZWRfYm94ZWRcIiwgXCJ0YXNrQm94XCIsIHRhc2sudGFza1R5cGVdLmpvaW4oJyAnKX0gc3R5bGU9e3tjbGVhcjpcImJvdGhcIn19PlxyXG4gICAgICAgIDxoMj57dGFza1R5cGVIZWFkaW5nc1t0YXNrLnRhc2tUeXBlXSB8fCBMYFVwcGdpZnRgfTwvaDI+XHJcbiAgICAgICAgPGRpdiBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogdGFzay5kZXNjcmlwdGlvbn19IC8+XHJcbiAgICAgIDwvZGl2PiAgICAgIFxyXG4gICAgPC9kaXY+fVxyXG4gICAge3Rhc2sud29ya2luZ1Byb2NlZHVyZSAmJiA8ZGl2PlxyXG4gICAgICA8aDMgY2xhc3NOYW1lPVwiaDNcIj57TGBBcmJldHNwcm9jZXNzYH08L2gzPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInJpY2gtdGV4dC1yZWFkb25seVwiIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7X19odG1sOiB0YXNrLndvcmtpbmdQcm9jZWR1cmV9fSAvPlxyXG4gICAgPC9kaXY+fVxyXG4gICAge3Rhc2suZW1iZWRkZWRIdG1sICYmIDxkaXYgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IHRhc2suZW1iZWRkZWRIdG1sfX0gLz59XHJcbiAgICA8YnIgLz5cclxuICAgIHt0YXNrLnRhc2tUeXBlID09PSAnYXNzaWdubWVudCcgJiYgZmVhdHVyZXMua3NBc3NpZ25tZW50cyA/IDw+XHJcbiAgICAgIDxoMj5JbmzDpG1uaW5nc3VwcGdpZnQ8L2gyPlxyXG4gICAgICB7aXNFbXBsb3llZShzY2hvb2wpID9cclxuICAgICAgICA8cD5Iw6RyIGthbiBkdSBzb20gbMOkcmFyZSBzZSBlbGV2ZXJuYXMgaW5sw6RtbmFkZSBhcmJldGVuLlxyXG4gICAgPC9wPiA6IGlzRW1wbG95ZWUoKSA/IDxwPlxyXG4gICAgICAgIHtMYERldHRhIMOkciBlbiBpbmzDpG1uaW5nc3VwcGdpZnQgbWVkIGlubMOkbW5pbmdzZGF0dW0gJHttb21lbnQodGFzay5kZWFkbGluZSkuZm9ybWF0KCdZWVlZLU1NLUREJyl9YH1cclxuICAgIDwvcD4gOiA8PlxyXG4gICAgICAgICAgPHA+LiBMw6RtbmEgaW4gZGl0dCBhcmJldGUgc29tIGVuIHBkZiwgZG9jIGVsbGVyIG9kdCBmaWxcclxuICAgICAgICAgICAgZ2Vub20gYXR0IGRyYSBkZXQgdGlsbCBmw6RsdGV0IHVuZGVyLlxyXG4gICAgICA8L3A+XHJcbiAgICAgICAgICB7dGFzay5kZWFkbGluZSA/IDxwPjxiPlxyXG4gICAgICAgICAgICBEZW4gaMOkciB1cHBnaWZ0ZW4ge2RlYWRsaW5lVG9vTGF0ZSA/ICdza3VsbGUgdmFyaXQgaW5sw6RtbmFkICcgOiAnc2thbGwgdmFyYSBpbmzDpG1uYWQgJ31cclxuICAgICAgICAgICAge21vbWVudCh0YXNrLmRlYWRsaW5lKS5mb3JtYXQoJ1lZWVktTU0tREQnKX1cclxuICAgICAgICAgIDwvYj48L3A+IDogdW5kZWZpbmVkfVxyXG4gICAgICAgIDwvPn1cclxuICAgICAgPFRhc2tBc3NpZ25tZW50c1xyXG4gICAgICAgIGNvdXJzZUlkPXtjb3Vyc2VJZH1cclxuICAgICAgICB0YXNrSWQ9e3Rhc2suaWR9XHJcbiAgICAgICAgc2Nob29sPXtzY2hvb2x9XHJcbiAgICAgICAgc2VuZFRvVXJrdW5kID0ge3Rhc2suc2VuZFRvVXJrdW5kfVxyXG4gICAgICAvPlxyXG4gICAgICA8YnIgLz5cclxuICAgIDwvPiA6IHVuZGVmaW5lZH1cclxuICAgIHtmdXR1cmVBYmlsaXRpZXMubGVuZ3RoID4gMCA/IDxGdXR1cmVBYmlsaXRpZXNCb3hcclxuICAgICAgICB0aXRsZT17TGBJIGRlbiBow6RyIHVwcGdpZnRlbiBiZWhhbmRsYXMgZsO2bGphbmRlIGZyYW10aWRzZsO2cm3DpWdvcmB9XHJcbiAgICAgICAgc2VsZWN0ZWRGQXM9e2Z1dHVyZUFiaWxpdGllc31cclxuICAgICAgLz46IG51bGx9XHJcblxyXG4gICAgICB7cmVxdWlyZW1lbnRzLmxlbmd0aCA+IDAgJiYgdGFzay50YXNrVHlwZSAhPT0gJ2V4ZXJjaXNlJyA/IDxLbm93bGVkZ2VSZXF1aXJlbWVudHNCb3hcclxuICAgICAgICB0aXRsZT1cIkkgZGVuIGjDpHIgdXBwZ2lmdGVuIGJlZMO2bXMgZsO2bGphbmRlIGt1bnNrYXBza3JhdlwiXHJcbiAgICAgICAgY2xhc3NOYW1lPVwibGFyZ2VyXCJcclxuICAgICAgICBoZWFkZXJPcGVuPXtmYWxzZX1cclxuICAgICAgICByZXF1aXJlbWVudHM9e3JlcXVpcmVtZW50c31cclxuICAgICAgICBpZHNUb1N1YmplY3RNYXA9e3Rhc2suaWRzVG9TdWJqZWN0TWFwfVxyXG4gICAgICAgIGV4cGxhaW5lZFJlcXVpcmVtZW50cz17dGFzay5leHBsYWluZWRSZXF1aXJlbWVudHN9XHJcbiAgICAgICAgcGFydGlhbFJlcXVpcm1lbnRzID0ge3Rhc2sucGFydGlhbFJlcXVpcm1lbnRzfVxyXG4gICAgICAvPiA6IG51bGx9XHJcbiAgICAgIFxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJzdi1odG1sLXBvcnRsZXQgc3YtcG9ydGxldCBzdi1za2lwLXNwYWNlclwiPlxyXG4gICAgICB7YWJpbGl0aWVzLmxlbmd0aCA+IDAgPyA8QWJpbGl0aWVzQm94XHJcbiAgICAgICAgdGl0bGU9XCJEZW4gaMOkciB1cHBnaWZ0ZW4gYmVoYW5kbGFyIGbDtmxqYW5kZSBmw7ZybcOlZ29yXCJcclxuICAgICAgICBjbGFzc05hbWU9XCJsYXJnZXJcIlxyXG4gICAgICAgIGhlYWRlck9wZW49e2ZhbHNlfVxyXG4gICAgICAgIGFiaWxpdGllcz17YWJpbGl0aWVzfSAvPiA6IG51bGx9XHJcblxyXG4gICAgICB7Y2VudHJhbENvbnRlbnQubGVuZ3RoID4gMCA/IDxDZW50cmFsQ29udGVudEJveFxyXG4gICAgICAgIHRpdGxlPVwiRGVuIGjDpHIgdXBwZ2lmdGVuIGJlaGFuZGxhciBmw7ZsamFuZGUgY2VudHJhbGEgaW5uZWjDpWxsXCJcclxuICAgICAgICBjbGFzc05hbWU9XCJsYXJnZXJcIlxyXG4gICAgICAgIGhlYWRlck9wZW49e2ZhbHNlfVxyXG4gICAgICAgIGNlbnRyYWxDb250ZW50PXtjZW50cmFsQ29udGVudH0gLz4gOiBudWxsIH1cclxuICAgIDwvZGl2PlxyXG4gICAgPGhyIC8+XHJcbiAgICB7Lyp1c2VyVGFzayAhPT0gdW5kZWZpbmVkICYmIDxkaXYgY2xhc3NOYW1lPVwidGFza0NvbnRhaW5lclwiPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICBjbGFzc05hbWU9e2BzZWxlY3RlZEJveCR7dXNlclRhc2sgJiYgdXNlclRhc2suJG1ldGEgIT09ICdkZWxldGluZycgPyAnIHNlbGVjdGVkJyA6ICcnfWB9XHJcbiAgICAgICAgICAgIHN0eWxlPXtpc1dvcmtpbmcgPyB7IG9wYWNpdHk6IDAuNSB9IDoge319XHJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+ICFpc1dvcmtpbmcgJiYgdGhpcy50b2dnbGVUYXNrKCl9PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgIHt1c2VyVGFzayA/XHJcbiAgICAgICAgICAgIExgVGEgYm9ydCB1cHBnaWZ0ZW4gZnLDpW4gJHtmb3JXZWVrU3RyaW5nfWAgOlxyXG4gICAgICAgICAgICBMYEzDpGdnIHRpbGwgdXBwZ2lmdGVuIGkgJHtmb3JXZWVrU3RyaW5nfWB9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+Ki99XHJcbiAgICA8aHIgLz5cclxuICAgIHt0YXNrLnJlc291cmNlcyAmJiB0YXNrLnJlc291cmNlcy5sZW5ndGggPiAwICYmIDxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXRcIj5cclxuICAgICAgPGgyPlJlc3Vyc2VyIGtvcHBsYWRlIHRpbGwgdXBwZ2lmdGVuPC9oMj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YXNrQ29udGFpbmVyXCI+XHJcbiAgICAgICAge3Rhc2sucmVzb3VyY2VzLm1hcCgociwgaWR4KSA9PlxyXG4gICAgICAgICAgPGRpdiBrZXk9e2lkeH0gY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgIDxhIGhyZWY9e3IudXJsfT57ci5uYW1lfTwvYT5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApfVxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGJyIC8+XHJcbiAgICA8L2Rpdj59XHJcblxyXG4gICA8YnIgLz5cclxuICA8L2Rpdj5cclxufSIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vLi4vLi4vLi4vZ2xvYmFscy9kYic7XHJcbmltcG9ydCB7IExhenlDb250ZW50IH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL2xhenktY29udGVudCc7XHJcbmltcG9ydCB7IERlbHRhLCBEZWx0YURvYywgRGVsdGFSZWxhdGlvbiB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgRGVsdGFEb2NCb3ggfSBmcm9tICcuL2RlbHRhZG9jLWJveCc7XHJcbmltcG9ydCB7IERlbHRhTGlua0JveCB9IGZyb20gJy4vZGVsdGFsaW5rLWJveCc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGJyYW5jaElkOiBzdHJpbmc7XHJcbiAgZWRpdGFibGU6IGJvb2xlYW47XHJcbiAgdGFnPzogc3RyaW5nO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZWx0YUtleShkZWx0YTogRGVsdGEpIHtcclxuICBpZiAoZGVsdGEudHlwZSA9PT0gJ21vZGlmeScpXHJcbiAgICByZXR1cm4gZGVsdGEudGFyZ2V0SWQ7XHJcbiAgcmV0dXJuIGRlbHRhLnNvdXJjZUlkICsgZGVsdGEubGFiZWwgKyBkZWx0YS50YXJnZXRJZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIERlbHRhVmlldyAoe2JyYW5jaElkLCB0YWcsIGVkaXRhYmxlfTogUHJvcHMpIHtcclxuICBsZXQgZGVsdGFzID0gZGIuYnJhbmNoKGJyYW5jaElkKS5kZWx0YXM7XHJcbiAgaWYgKHRhZykge1xyXG4gICAgZGVsdGFzID0gZGVsdGFzLnRhZ3ModGFnKTtcclxuICB9XHJcblxyXG4gIHJldHVybiA8TGF6eUNvbnRlbnQ+XHJcbiAgICB7ZGVsdGFzLnRvVmFsdWUoKS5tYXAoZGVsdGFzID0+XHJcbiAgICAgIGRlbHRhcy5sZW5ndGggPT09IDAgPyA8ZGl2PlxyXG4gICAgICAgIDxwIHN0eWxlPXt7b3BhY2l0eTogMC41LCBmb250U3R5bGU6ICdpdGFsaWMnfX0+e3RhZyA/XHJcbiAgICAgICAgICBMYFNrb2xhbnMgdmVyc2lvbiDDpHIgaWRlbnRpc2sgbWVkIG9yZ2luYWxldGAgOlxyXG4gICAgICAgICAgTGBEZXQgZmlubnMgaW5nYSDDpG5kcmluZ2FyIGF0dCBwdWJsaWNlcmEuYH08L3A+XHJcbiAgICAgIDwvZGl2PiA6XHJcblxyXG4gICAgICAvL1xyXG4gICAgICAvLyBOb3JtYWwgdmlldyAobGlzdCBhbGwgY2hhbmdlcyArIG9wdGlvbiB0byBjbGVhciBhbGwpXHJcbiAgICAgIC8vXHJcbiAgICAgIDw+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YXNrQ29udGFpbmVyIG9kZC1ldmVuXCI+XHJcbiAgICAgICAgICB7ZGVsdGFzLm1hcChkZWx0YSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IGRlbHRhS2V5KGRlbHRhKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRlbHRhLnR5cGUgPT09ICdtb2RpZnknID9cclxuICAgICAgICAgICAgICA8RGVsdGFEb2NCb3ggZGVsdGE9e2RlbHRhfSBlZGl0YWJsZT17ZWRpdGFibGV9IGtleT17a2V5fSBvbkRlbGV0ZT17KCk9PntcclxuICAgICAgICAgICAgICAgIC8vIFVuZG8gRGVsdGFEb2NcclxuICAgICAgICAgICAgICAgIHVuZG9EZWx0YURvYyhkZWx0YSk7XHJcbiAgICAgICAgICAgICAgfX0gLz4gOlxyXG4gICAgICAgICAgICAgIDxEZWx0YUxpbmtCb3ggZGVsdGE9e2RlbHRhfSBlZGl0YWJsZT17ZWRpdGFibGV9IGtleT17a2V5fSBvbkRlbGV0ZT17KCk9PntcclxuICAgICAgICAgICAgICAgIC8vIFVuZG8gTGlua1xyXG4gICAgICAgICAgICAgICAgdW5kb0RlbHRhUmVsYXRpb24oZGVsdGEpO1xyXG4gICAgICAgICAgICAgIH19IC8+O1xyXG4gICAgICAgICAgfSl9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG4gYnRuLWxhcmdlIGJ0bi13YXJuaW5nXCJcclxuICAgICAgICAgIG9uQ2xpY2s9eygpPT57XHJcbiAgICAgICAgICAgIGlmIChjb25maXJtKHRhZyA/XHJcbiAgICAgICAgICAgICAgTGDDhXRnw6RyZGVuIMOldGVyc3TDpGxsZXQga3Vyc2VuIHRpbGwgc3RhbmRhcmQuXFxuXFxuVmlsbCBkdSBmb3J0c8OkdHRhP2AgOiBcclxuICAgICAgICAgICAgICBMYMOFdGfDpHJkZW4gcmFkZXJhciBzYW10bGlnYSDDpG5kcmluZ2FyIHNvbSDDpG5udSBpbnRlIMOkciBwdWJsaWNlcmFkZS5cXG5cXG5WaWxsIGR1IGZvcnRzw6R0dGE/YCkpXHJcbiAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBkZWx0YSBvZiBkZWx0YXMpIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKGRlbHRhLnR5cGUgPT09ICdtb2RpZnknKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5kb0RlbHRhRG9jKGRlbHRhKTtcclxuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB1bmRvRGVsdGFSZWxhdGlvbihkZWx0YSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgID57dGFnID9cclxuICAgICAgICAgIExgw4V0ZXJzdMOkbGwgdGlsbCBvcmdpbmFsZXRgOlxyXG4gICAgICAgICAgTGBSYWRlcmEgYWxsYSBvcHVibGljZXJhZGUgw6RuZHJpbmdhcmBcclxuICAgICAgICAgIH08L2J1dHRvbj5cclxuICAgICAgPC8+XHJcbiAgICApfVxyXG4gIDwvTGF6eUNvbnRlbnQ+XHJcblxyXG4gIGZ1bmN0aW9uIHVuZG9EZWx0YVJlbGF0aW9uKGRlbHRhOiBEZWx0YVJlbGF0aW9uKSB7XHJcbiAgICBkYi5icmFuY2goYnJhbmNoSWQpLnRhYmxlKGRlbHRhLnNvdXJjZVRhYmxlKVxyXG4gICAgICAudW5kb0xpbmsoZGVsdGEuc291cmNlSWQsIGRlbHRhLmxhYmVsLCBkZWx0YS50YXJnZXRJZCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB1bmRvRGVsdGFEb2MoZGVsdGE6IERlbHRhRG9jKSB7XHJcbiAgICBjb25zdCB1bmRvaW5ncyA9IHt9O1xyXG4gICAgT2JqZWN0LmtleXMoZGVsdGEuZGF0YSkuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICB1bmRvaW5nc1trZXldID0geyAkdW5zZXQ6IDAgfTtcclxuICAgIH0pO1xyXG4gICAgZGIuYnJhbmNoKGJyYW5jaElkKS50YWJsZShkZWx0YS50YWJsZSkudXBkYXRlKHtcclxuICAgICAgaWQ6IGRlbHRhLnRhcmdldElkLFxyXG4gICAgICBuYW1lOiBkZWx0YS50YXJnZXROYW1lXHJcbiAgICB9LCB1bmRvaW5ncyk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgRGVsdGFEb2MgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IG1heExlbmd0aCwgY2FwaXRhbGl6ZUZpcnN0LCBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBtb2RlbE5hbWVzLCBGcmllbmRseVByb3BTcGVjLCBkZWx0YVR5cGVzIH0gZnJvbSAnLi9tb2RlbC1mcmllbmRseS1uYW1lcyc7XHJcbmltcG9ydCB7IHNob3J0RGF0ZUZvcm1hdCB9IGZyb20gJy4uLy4uLy4uL2NvdXJzZS1idWlsZGVyL3V0aWxzJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgZGVsdGE6IERlbHRhRG9jXHJcbiAgZWRpdGFibGU6IGJvb2xlYW5cclxuICBvbkRlbGV0ZTogKCk9PnZvaWRcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIERlbHRhRG9jQm94ICh7ZGVsdGEsIGVkaXRhYmxlLCBvbkRlbGV0ZX06IFByb3BzKSB7XHJcbiAgY29uc3QgZW50aXR5TmFtZSA9IGRlbHRhLnRhcmdldE5hbWUgJiYgbWF4TGVuZ3RoKGRlbHRhLnRhcmdldE5hbWUsIDgwKTtcclxuICBjb25zdCBjbGFzc05hbWVzID0gW1wic2Nob29sQ291cnNlXCJdO1xyXG4gIGlmIChkZWx0YS4kbWV0YSkgY2xhc3NOYW1lcy5wdXNoKGBlbnRpdHltZXRhLSR7ZGVsdGEuJG1ldGF9YCk7XHJcblxyXG4gIGNvbnN0IGZyaWVuZGx5RW50aXR5VHlwZSA9IGNhcGl0YWxpemVGaXJzdChcclxuICAgIG1vZGVsTmFtZXMuZW50aXR5VHlwZXNbZGVsdGEudGFibGVdIHx8IGRlbHRhLnRhYmxlKTtcclxuXHJcbiAgY29uc3QgZnJpZW5kbHlQcm9wcyA9IE9iamVjdC5rZXlzKGRlbHRhLmRhdGEpLm1hcChwcm9wID0+XHJcbiAgICAoe1xyXG4gICAgICBwcm9wU3BlYzogbW9kZWxOYW1lcy5wcm9wZXJ0eU5hbWVzW3Byb3BdIGFzIEZyaWVuZGx5UHJvcFNwZWMsXHJcbiAgICAgIHByb3BcclxuICAgIH0pKTtcclxuICBjb25zdCBoYXNVbmtub3duUHJvcHMgPSBmcmllbmRseVByb3BzLnNvbWUoZnAgPT4gIWZwLnByb3BTcGVjKTtcclxuICBcclxuICByZXR1cm4gPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMuam9pbignICcpfT5cclxuICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICB7ZWRpdGFibGUgPyA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcCBwdWxsLXJpZ2h0XCI+XHJcbiAgICAgICAgPGEgY2xhc3NOYW1lPVwicmVtb3ZlSXRlbVwiIG9uQ2xpY2s9e29uRGVsZXRlfT48L2E+XHJcbiAgICAgIDwvZGl2PiA6IG51bGx9XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAge2VudGl0eU5hbWUgP1xyXG4gICAgICAgICAgPGE+e2ZyaWVuZGx5RW50aXR5VHlwZX0gXCJ7ZW50aXR5TmFtZX1cIjwvYT4gOlxyXG4gICAgICAgICAgPGE+e2ZyaWVuZGx5RW50aXR5VHlwZX08L2E+fVxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICAge2ZyaWVuZGx5UHJvcHMuZmlsdGVyKCh7cHJvcFNwZWN9KSA9PiBwcm9wU3BlYykubWFwKCh7cHJvcFNwZWM6IFt0eXBlLCBwcm9wTmFtZV0sIHByb3B9KSA9PlxyXG4gICAgICA8ZGl2IGtleT17cHJvcH0+XHJcbiAgICAgICAge3R5cGUgPT09IGRlbHRhVHlwZXMuT2JzY3VyZSA/XHJcbiAgICAgICAgICA8cD57cHJvcE5hbWV9PC9wPiA6XHJcbiAgICAgICAgICB0eXBlID09PSBkZWx0YVR5cGVzLkhpZGRlbkNoYW5nZSA/IG51bGwgOlxyXG4gICAgICAgICAgPHA+e3Byb3BOYW1lfToge21vZGVsTmFtZXMuZ2V0UHJvcFZhbChkZWx0YS5kYXRhW3Byb3BdLCB0eXBlLCBwcm9wKX08L3A+fVxyXG4gICAgICA8L2Rpdj4pfVxyXG4gICAge2hhc1Vua25vd25Qcm9wcyA/IDxkaXY+XHJcbiAgICAgIDxwIHRpdGxlPXtKU09OLnN0cmluZ2lmeShkZWx0YS5kYXRhLCBudWxsLCA0KX0+e0xgw4RuZHJpbmdhciBpIGludGVybmEgZWdlbnNrYXBlcmB9PC9wPlxyXG4gICAgPC9kaXY+IDogbnVsbH1cclxuICAgIDxkaXY+XHJcbiAgICAgIDxwIGNsYXNzTmFtZT1cInNtYWxsXCI+XHJcbiAgICAgICAgICB7c2hvcnREYXRlRm9ybWF0KGRlbHRhLmRhdGVUaW1lKX0ge2RlbHRhLmNvbnRyaWJ1dG9ycy5qb2luKCcsICcpfVxyXG4gICAgICA8L3A+XHJcbiAgICA8L2Rpdj5cclxuICA8L2Rpdj47XHJcbn0iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBEZWx0YVJlbGF0aW9uIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBtYXhMZW5ndGgsIEwgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IG1vZGVsTmFtZXMsIEZyaWVuZGx5UHJvcFNwZWMsIGRlbHRhVHlwZXMsIHJlbW92ZUh0bWxUYWdzIH0gZnJvbSAnLi9tb2RlbC1mcmllbmRseS1uYW1lcyc7XHJcbmltcG9ydCB7IHNob3J0RGF0ZUZvcm1hdCB9IGZyb20gJy4uLy4uLy4uL2NvdXJzZS1idWlsZGVyL3V0aWxzJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgZGVsdGE6IERlbHRhUmVsYXRpb25cclxuICBlZGl0YWJsZTogYm9vbGVhblxyXG4gIG9uRGVsZXRlOiAoKT0+dm9pZFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gRGVsdGFMaW5rQm94ICh7ZGVsdGEsIGVkaXRhYmxlLCBvbkRlbGV0ZX06IFByb3BzKSB7XHJcbiAgY29uc3QgZW50aXR5TmFtZSA9IGRlbHRhLnRhcmdldE5hbWUgJiYgbWF4TGVuZ3RoKHJlbW92ZUh0bWxUYWdzKGRlbHRhLnRhcmdldE5hbWUpLCA4MCk7XHJcbiAgY29uc3QgY2xhc3NOYW1lcyA9IFtcInNjaG9vbENvdXJzZVwiXTtcclxuICBpZiAoZGVsdGEuJG1ldGEpIGNsYXNzTmFtZXMucHVzaChgZW50aXR5bWV0YS0ke2RlbHRhLiRtZXRhfWApO1xyXG5cclxuICBjb25zdCBmcmllbmRseU9wZXJhdGlvbiA9IG1vZGVsTmFtZXMuZ2V0TW9kaWZpZWRMaW5rSGVhZGluZyhkZWx0YSk7XHJcbiAgXHJcbiAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzLmpvaW4oJyAnKX0+XHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAge2VkaXRhYmxlID8gPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3AgcHVsbC1yaWdodFwiPlxyXG4gICAgICAgIDxhIGNsYXNzTmFtZT1cInJlbW92ZUl0ZW1cIiBvbkNsaWNrPXtvbkRlbGV0ZX0+PC9hPlxyXG4gICAgICA8L2Rpdj4gOiBudWxsfVxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgIHtlbnRpdHlOYW1lID9cclxuICAgICAgICAgIDxhPntmcmllbmRseU9wZXJhdGlvbn0gXCJ7ZW50aXR5TmFtZX1cIjwvYT4gOlxyXG4gICAgICAgICAgPGE+e2ZyaWVuZGx5T3BlcmF0aW9ufTwvYT59XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgICA8ZGl2PlxyXG4gICAgICA8cCBjbGFzc05hbWU9XCJzbWFsbFwiPlxyXG4gICAgICAgICAge3Nob3J0RGF0ZUZvcm1hdChkZWx0YS5kYXRlVGltZSl9IHtkZWx0YS5jb250cmlidXRvcn1cclxuICAgICAgPC9wPlxyXG4gICAgPC9kaXY+XHJcbiAgPC9kaXY+O1xyXG59IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgTGF6eUNvbnRlbnQgfSBmcm9tICcuLi8uLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvbGF6eS1jb250ZW50JztcclxuaW1wb3J0IHsgZGIsIENvdXJzZUluc3RhbmNlcyB9IGZyb20gJy4uLy4uLy4uLy4uL2dsb2JhbHMvZGInO1xyXG5pbXBvcnQgeyBMYXp5QmFubmVyLCBCYW5uZXJQcm9wcyB9IGZyb20gJy4uLy4uL2NvbW1vbi9iYW5uZXInO1xyXG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSAna2VkYmFja2VuZC9vYnNlcnZhYmxlJztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgTGluayB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgeyBWZXJzaW9uSGlzdG9yeUJveCB9IGZyb20gJy4vdmVyc2lvbi1oaXN0b3J5LWJveCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHNjaG9vbDogc3RyaW5nXHJcbiAgY291cnNlSWQ6IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgVmVyc2lvbkhpc3RvcnlQYWdlID0gKHtzY2hvb2wsIGNvdXJzZUlkfTogUHJvcHMpID0+IHtcclxuICBjb25zdCBzY2hvb2xPYnNlcnZhYmxlID0gZGIuc2Nob29scy5uYW1lKHNjaG9vbCkuc2luZ2xlKCk7XHJcbiAgY29uc3QgZHJhZnRPYnNlcnZhYmxlID1cclxuICAgIENvdXJzZUluc3RhbmNlcy5nZXRCcmFuY2hJZChzY2hvb2xPYnNlcnZhYmxlLCBjb3Vyc2VJZClcclxuICAgICAgLm1hcChkcmFmdElkID0+IGRiLmJyYW5jaChkcmFmdElkKSk7XHJcblxyXG4gIGNvbnN0IGJyYW5jaE9ic2VydmFibGUgPVxyXG4gICAgc2Nob29sT2JzZXJ2YWJsZS5tYXAoc2Nob29sID0+IGRiLmJyYW5jaChzY2hvb2wub2ZmaWNpYWxCcmFuY2hJZCkpO1xyXG5cclxuICBjb25zdCBiYW5uZXJQcm9wc09ic2VydmFibGUgPVxyXG4gICAgZHJhZnRPYnNlcnZhYmxlLnN3aXRjaE1hcChyZXBvID0+IHJlcG8uY291cnNlSW5zdGFuY2VzLmlkKGNvdXJzZUlkKS5tYXAoY291cnNlID0+ICh7XHJcbiAgICAgIHRpdGxlOiBjb3Vyc2UubmFtZSxcclxuICAgICAgdGFiczogW3tuYW1lOiBMYFZlcnNpb25zaGlzdG9yaWtgLCBrZXk6YHZlcnNpb25oaXN0b3J5YH1dLFxyXG4gICAgICBidXR0b25zOiBbPExpbmtcclxuICAgICAgICB0bz17YC8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZUlkfWB9XHJcbiAgICAgICAga2V5PVwiJHNldHRpbmdzXCJcclxuICAgICAgICB0aXRsZT17TGBWaXNhIGt1cnNlbmB9XHJcbiAgICAgID5cclxuICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1leWVcIiBhcmlhLWhpZGRlbj17dHJ1ZX0gLz4mbmJzcDtcclxuICAgICAgPC9MaW5rPl1cclxuICAgIH0gYXMgQmFubmVyUHJvcHMpKSk7XHJcbiAgcmV0dXJuIDw+XHJcbiAgICA8TGF6eUJhbm5lciBsYXp5UHJvcHM9e2Jhbm5lclByb3BzT2JzZXJ2YWJsZX0gLz5cclxuICAgIDxMYXp5Q29udGVudD57XHJcbiAgICAgIHNjaG9vbE9ic2VydmFibGUubWFwKCh7ZGlzcGxheU5hbWU6IHNjaG9vbERpc3BsYXlOYW1lLCBvZmZpY2lhbEJyYW5jaElkfSkgPT4gXHJcbiAgICAgICAgPFZlcnNpb25IaXN0b3J5Qm94XHJcbiAgICAgICAgICBicmFuY2hUeXBlPVwic2Nob29sLWJyYW5jaFwiXHJcbiAgICAgICAgICBicmFuY2hJZD17b2ZmaWNpYWxCcmFuY2hJZH1cclxuICAgICAgICAgIGNvdXJzZUlkPXtjb3Vyc2VJZH1cclxuICAgICAgICAgIGlzQWRtaW49e2ZhbHNlfVxyXG4gICAgICAgICAgLz5cclxuICAgIClcclxuICB9PC9MYXp5Q29udGVudD5cclxuICA8Lz5cclxuXHJcbiAgLyo8YnV0dG9uXHJcbiAgICBjbGFzc05hbWU9XCJidG4gYnRuLWxhcmdlIGJ0bi13YXJuaW5nXCJcclxuICAgIG9uQ2xpY2s9e2FzeW5jICgpPT57XHJcbiAgICAgIGlmIChjb25maXJtKExgQWxsYSBtb2RpZmllcmluZ2FyIHNvbSBnam9ydHMgZsO2ciBza29sYW4gJHtzY2hvb2xEaXNwbGF5TmFtZX0ga29tbWVyIGF0dCBmw7Zyc3Zpbm5hLlxyXG4gICAgICBcclxuICAgICAgRm9ydHPDpHR0P2ApKSB7XHJcbiAgICAgICAgY29uc3QgYnJhbmNoID0gYXdhaXQgYnJhbmNoT2JzZXJ2YWJsZS5sb2FkKCk7XHJcbiAgICAgICAgYnJhbmNoLmNsZWFyQnJhbmNoKCk7XHJcbiAgICAgICAgZGIuYnJhbmNoZXMuZGVsZXRlKClcclxuICAgICAgfVxyXG4gICAgfX1cclxuICA+e0xgw4V0ZXJzdMOkbGwga3Vyc2VuIHRpbGwgc3RhbmRhcmRgfTwvYnV0dG9uPiAqL1xyXG5cclxufVxyXG4iLCJpbXBvcnQgeyBLZWRUYWJsZU5hbWUgfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBMLCBtYXhMZW5ndGggfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IENvdXJzZUluc3RhbmNlLCBDb3Vyc2VCbG9jaywgQ291cnNlQ29udGVudCwgQ291cnNlVGFiLCBUYXNrLCBEZWx0YVJlbGF0aW9uIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5cclxuY29uc3QgVGV4dCA9IFN5bWJvbChcIlR5cGVUZXh0XCIpO1xyXG5jb25zdCBDaGVja2JveCA9IFN5bWJvbChcIlR5cGVDaGVja2JveFwiKTtcclxuY29uc3QgT2JzY3VyZSA9IFN5bWJvbChcIlR5cGVPYnN1cmVcIik7XHJcbmNvbnN0IEhpZGRlbkNoYW5nZSA9IFN5bWJvbChcIlR5cGVIaWRkZW5DaGFuZ2VcIik7XHJcbmNvbnN0IEh0bWwgPSBTeW1ib2woXCJUeXBlSHRtbFwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBkZWx0YVR5cGVzID0ge1xyXG4gIFRleHQsXHJcbiAgSHRtbCxcclxuICBDaGVja2JveCxcclxuICBPYnNjdXJlLFxyXG4gIEhpZGRlbkNoYW5nZVxyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgRnJpZW5kbHlQcm9wU3BlYyA9IFtQcm9wZXJ0eVR5cGUsIHN0cmluZ107XHJcblxyXG50eXBlIFByb3BlcnR5VHlwZSA9IHR5cGVvZiBkZWx0YVR5cGVzW2tleW9mIHR5cGVvZiBkZWx0YVR5cGVzXTtcclxudHlwZSBQcm9wZXJ0eU1hcDxUPiA9IHtbUCBpbiBrZXlvZiBUXT86IEZyaWVuZGx5UHJvcFNwZWN9O1xyXG5cclxuaW50ZXJmYWNlIE1vZGVsTmFtZXMge1xyXG4gIGVudGl0eVR5cGVzOiB7W3RhYmxlTmFtZU9yTGFiZWwgaW4gS2VkVGFibGVOYW1lXT86IHN0cmluZ31cclxuICBtb2RpZmllZExpbmtzOiB7W2xhYmVsOiBzdHJpbmddOiBbc3RyaW5nLCBzdHJpbmddfVxyXG4gIHByb3BlcnR5TmFtZXM6XHJcbiAgICBQcm9wZXJ0eU1hcDxDb3Vyc2VJbnN0YW5jZT4gJlxyXG4gICAgUHJvcGVydHlNYXA8Q291cnNlQmxvY2s+ICZcclxuICAgIFByb3BlcnR5TWFwPENvdXJzZUNvbnRlbnQ+ICZcclxuICAgIFByb3BlcnR5TWFwPENvdXJzZVRhYj4gJlxyXG4gICAgUHJvcGVydHlNYXA8VGFzaz5cclxuICBnZXRNb2RpZmllZExpbmtIZWFkaW5nKGRlbHRhUmVsYXRpb246IERlbHRhUmVsYXRpb24pOiBzdHJpbmc7XHJcbiAgZ2V0UHJvcFZhbChwOiBhbnksIHR5cGU6IFByb3BlcnR5VHlwZSwgcHJvcDogc3RyaW5nKTogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgbW9kZWxOYW1lczogTW9kZWxOYW1lcyA9IHtcclxuICBlbnRpdHlUeXBlczoge1xyXG4gICAgY291cnNlQmxvY2tzOiBMYGt1cnNibG9ja2AsXHJcbiAgICBjb3Vyc2VDb250ZW50czogTGBpbm5laMOlbGxzcnV0YWAsXHJcbiAgICBjb3Vyc2VJbnN0YW5jZXM6IExga3Vyc2AsXHJcbiAgICBjb3Vyc2VUYWJzOiBMYGZsaWtgLFxyXG4gICAgc2Nob29sczogTGBza29sYWAsXHJcbiAgICB0YXNrczogTGB1cHBnaWZ0YCxcclxuICB9LFxyXG4gIG1vZGlmaWVkTGlua3M6IHtcclxuICAgIHRhYnM6IFtMYFRpbGxhZ2QgZmxpa2AsIExgQm9ydHRhZ2VuIGZsaWtgXSxcclxuICAgIGJsb2NrczogW0xgVGlsbGFndCBibG9ja2AsIExgQm9ydHRhZ2V0IGJsb2NrYF0sXHJcbiAgICBhYmlsaXRpZXM6IFtMYFRpbGxhZ2QgZsO2cm3DpWdhYCwgTGBCb3J0dGFnZW4gZsO2cm3DpWdhYF0sXHJcbiAgICBjZW50cmFsQ29udGVudDogW0xgVGlsbGFndCBjZW50cmFsdCBpbm5laMOlbGxgLCBMYEJvcnR0YWdldCBjZW50cmFsdCBpbm5laMOlbGxgXSxcclxuICAgIGtub3dsZWRnZVJlcXVpcmVtZW50czogW0xgVGlsbGFndCBrdW5za2Fwc2tyYXZgLCBMYEJvcnR0YWdldCBrdW5za2Fwc2tyYXZgXSxcclxuICAgIHRhc2tzOiBbTGBUaWxsYWdkIHVwcGdpZnRgLCBMYEJvcnR0YWdlbiB1cHBnaWZ0YF0sXHJcbiAgICBjb250ZW50czogW0xgVGlsbGFnZCBpbm5laMOlbGxzcnV0YWAsIExgQm9ydHRhZ2VuIGlubmVow6VsbHNydXRhYF1cclxuICB9LFxyXG4gIHByb3BlcnR5TmFtZXM6IHtcclxuICAgIGFsbG93QWRkVGFiczogW0NoZWNrYm94LCBMYMOEbmRyYXQgb20gdGlsbMOkZ2cgYXYgZmxpayBza2EgdmFyYSB0aWxsw6V0ZXRgXSxcclxuICAgIGFsbG93UmVtb3ZlVGFiczogW0NoZWNrYm94LCBMYMOEbmRyYXQgb20gYm9ydHRhZ25pbmcgYXYgZmxpayBza2EgdmFyYSB0aWxsw6V0ZXRgXSxcclxuICAgIGFsbG93UmVvcmRlclRhYnM6IFtDaGVja2JveCwgTGDDhG5kcmF0IG9tIGRldCBza2EgdmEgdGlsbMOldGV0IGF0dCDDpG5kcmEgb3JkbmluZyBww6UgZmxpa2BdLFxyXG4gICAgYXNzaWdubWVudDogW0NoZWNrYm94LCBMYMOEbmRyYWQgZmxhZ2dhIGbDtnIgaW5sw6RtbmluZ3N1cHBnaWZ0YF0sXHJcbiAgICBjb21tb25MZWFybmluZ0dvYWxzOiBbVGV4dCwgTGDDhG5kcmFkZSBnZW1lbnNhbW1hIGzDpHJhbmRlbcOlbGBdLFxyXG4gICAgY29udGVudDogW0h0bWwsIExgw4RuZHJhZCBpbm5laMOlbGxzdGV4dGBdLFxyXG4gICAgY3JlYXRlZEJ5OiBbSGlkZGVuQ2hhbmdlLCBMYFNrYXBhZCBhdmBdLFxyXG4gICAgY3JlYXRlZERhdGU6IFtIaWRkZW5DaGFuZ2UsIExgU2thcGFkIGRhdHVtYF0sXHJcbiAgICBkYXRlVGltZTogW09ic2N1cmUsIExgw4RuZGF0IGRhdHVtIC8gdGlkYF0sXHJcbiAgICBkZWFkbGluZTogW1RleHQsIExgw4RuZHJhdCBpbmzDpG1uaW5nc2RhdHVtYF0sXHJcbiAgICBkZXNjcmlwdGlvbjogW0h0bWwsIExgw4RuZHJhZCBiZXNrcml2bmluZ2BdLFxyXG4gICAgZW1iZWRkZWRIdG1sOiBbT2JzY3VyZSwgTGBMYWd0IHRpbGwgaW5iw6RkZGFkIEhUTUxgXSxcclxuICAgIGV4cGxhaW5lZFJlcXVpcmVtZW50czogW09ic2N1cmUsIExgTGFndCB0aWxsIGVnbmEgZsO2cmtsYXJpbmdhciBhdiBrdW5za2Fwc2tyYXZgXSxcclxuICAgIGZ1dHVyZUFiaWxpdGllczogW1RleHQsIExgw4RuZHJhZGUgZnJhbXRpZHNmw7ZybcOlZ29yYF0sXHJcbiAgICBoYXNDb21tb25MZWFybmluZ0dvYWxzOiBbQ2hlY2tib3gsIExgw4RuZHJhZCBpbnN0w6RsbG5pbmcgZsO2ciBnZW1lbnNhbW1hIGzDpHJhbmRlbcOlbGBdLFxyXG4gICAgaGlkZGVuOiBbQ2hlY2tib3gsIExgw4RuZHJhZCBmbGFnZ2EgXCJnw7ZtZFwiYF0sIC8vIFRoaXMgcHJvcCBzaG91bGQgbm90IGJlIHVzZWQgSSB0aGlua1xyXG4gICAgaGlkZGVuVGFza3M6IFtPYnNjdXJlLCBMYMOEbmRyYXQgbGlzdGFuIHDDpSBnw7ZtZGEgdXBwZ2lmdGVyYF0sIC8vIEkgdGhpbmsgdGhpcyBwcm9wIHNob3VsZCBub3QgYmUgdXNlZFxyXG4gICAgaHRtbDogW09ic2N1cmUsIExgw4RuZHJhdCBpbm5laMOlbGxgXSxcclxuICAgIGxlYXJuaW5nR29hbDogW1RleHQsIExgTMOkcmFuZGVtw6VsYF0sXHJcbiAgICBsb2NrRGVsZXRlOiBbQ2hlY2tib3gsIExgw4RuZHJhdCBmbGFnZ2E6IFwibMOlcyBmcsOlbiBib3J0dGFnbmluZ1wiYF0sXHJcbiAgICBsb2NrZWQ6IFtDaGVja2JveCwgTGDDhG5kcmFkIGZsYWdnYTogXCJmw7ZyYmp1ZCDDpG5kcmluZyBhdiBmbGlrYXJcImBdLFxyXG4gICAgbWlncmF0ZWRUZXh0czogW09ic2N1cmUsIExgw4RuZHJpbmdhciBpIG1pZ3JlcmFkZSB0ZXh0ZXIgZnLDpW4gc2tvbHZlcmtldGBdLFxyXG4gICAgbW9kaWZpZWRCeTogW0hpZGRlbkNoYW5nZSwgTGDDhG5kcmFkIGF2YF0sXHJcbiAgICBtb2RpZmllZERhdGU6IFtIaWRkZW5DaGFuZ2UsIExgw4RuZHJpbmdzZGF0dW1gXSxcclxuICAgIHRhc2tPcmRlcjogW09ic2N1cmUsIExgw4RuZHJhZCBvcmRuaW5nIHDDpSB1cHBnaWZ0ZXJgXSxcclxuICAgIG5hbWU6IFtUZXh0LCBMYMOEbmRyYXQgbmFtbmBdLFxyXG4gICAgb3JkZXI6IFtPYnNjdXJlLCBMYMOEbmRyYWQgb3JkbmluZ2BdLFxyXG4gICAgcmVzb3VyY2VzOiBbT2JzY3VyZSwgTGDDhG5kcmFkZSBpIHJlc3Vyc2VyYF0sXHJcbiAgICBzY2hvb2w6IFtUZXh0LCBMYFNrb2xhYF0sIC8vIE11c3QgbmV2ZXIgYmUgdW5kb25lIGlzb2xhdGVkIHdpdGhvdXQgbG9naWNcclxuICAgIHN0ZXBObzogW1RleHQsIExgU3RlZ251bW1lcmBdLCAvLyBNdXN0IG5ldmVyIGJlIHVuZG9uZSBpc29sYXRlZCB3aXRob3V0IGxvZ2ljXHJcbiAgICBzdGVwTnVtYmVyczogW1RleHQsIExgU3RlZ251bW1lcmBdLC8vIE11c3QgbmV2ZXIgYmUgdW5kb25lIGlzb2xhdGVkIHdpdGhvdXQgbG9naWNcclxuICAgIHN1YmplY3Q6IFtUZXh0LCBMYMOEbW5lYF0sIC8vIE11c3QgbmV2ZXIgYmUgdW5kb25lIGlzb2xhdGVkIHdpdGhvdXQgbG9naWNcclxuICAgIHN1YmplY3RzOiBbT2JzY3VyZSwgTGDDhG1uZW5gXSwgLy8gTXVzdCBuZXZlciBiZSB1bmRvbmUgaXNvbGF0ZWQgd2l0aG91dCBsb2dpY1xyXG4gICAgdGFiQ2xhc3M6IFtUZXh0LCBMYFR5cCBhdiBmbGlrYF0sIC8vIE11c3QgbmV2ZXIgYmUgdW5kb25lIGlzb2xhdGVkIHdpdGhvdXQgbG9naWNcclxuICAgIHRhYlRpdGxlOiBbSGlkZGVuQ2hhbmdlLCBMYEZsaWtuYW1uYF0sIC8vIERlcHJlY2F0ZWRcclxuICAgIHRhc2tUeXBlOiBbVGV4dCwgTGBVcHBnaWZ0c3R5cGBdLFxyXG4gICAgdXJsOiBbVGV4dCwgTGBVcmxgXSxcclxuICAgIHdvcmtpbmdQcm9jZWR1cmU6IFtIdG1sLCBMYEFyYmV0c3Byb2Nlc3NgXSxcclxuICAgIHlvdXR1YmVJZDogW09ic2N1cmUsIExgWW91dHViZSBJRGBdXHJcbiAgfSxcclxuICBnZXRNb2RpZmllZExpbmtIZWFkaW5nKGRlbHRhOiBEZWx0YVJlbGF0aW9uKSB7XHJcbiAgICBjb25zdCBoZWFkaW5nU3BlYyA9IG1vZGVsTmFtZXMubW9kaWZpZWRMaW5rc1tkZWx0YS5sYWJlbF07XHJcbiAgICBpZiAoIWhlYWRpbmdTcGVjKSB7XHJcbiAgICAgIHJldHVybiBkZWx0YS50eXBlID09PSAnYWRkJyA/IExgVGlsbGFndCBvYmpla3RgIDpcclxuICAgICAgIGRlbHRhLnR5cGUgPT09ICdyZW1vdmUnID8gTGBCb3J0dGFnZXQgb2JqZWt0YCA6XHJcbiAgICAgICBMYMOFbmdyYWQgbMOkbmtuaW5nYDsgLy8gU2hvdWxkIG5ldmVyIGJlXHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGVsdGEudHlwZSA9PT0gJ2FkZCcgP1xyXG4gICAgICBoZWFkaW5nU3BlY1swXSA6IGRlbHRhLnR5cGUgPT09ICdyZW1vdmUnID9cclxuICAgICAgaGVhZGluZ1NwZWNbMV0gOiBMYMOFbmdyYWQgbMOkbmtuaW5nYDsgLy8gU2hvdWxkIG5ldmVyIGJlXHJcbiAgfSxcclxuICBnZXRQcm9wVmFsKHA6IGFueSwgdHlwZTogUHJvcGVydHlUeXBlLCBwcm9wOiBzdHJpbmcpIHtcclxuICAgIHN3aXRjaCAocCkge1xyXG4gICAgICBjYXNlIHRydWU6IHJldHVybiBMYFDDpXNsYWdldGA7XHJcbiAgICAgIGNhc2UgZmFsc2U6IHJldHVybiBMYEF2c2xhZ2V0YDtcclxuICAgICAgY2FzZSAncHJpbWFyeSc6IHJldHVybiBMYEdydW5kc2tvbGFgO1xyXG4gICAgICBjYXNlICdneW1uYXNpdW0nOiByZXR1cm4gTGBHeW1uYXNpZXNrb2xhYDtcclxuICAgICAgY2FzZSAnZXhlcmNpc2UnOiByZXR1cm4gTGDDlnZuaW5nc3VwcGdpZnRgO1xyXG4gICAgICBjYXNlICd0YXNrJzogcmV0dXJuIExgVXBwZ2lmdGA7XHJcbiAgICAgIGNhc2UgJ2Fzc2lnbm1lbnQnOiByZXR1cm4gTGBJbmzDpG1uaW5nc3VwcGdpZnRgO1xyXG4gICAgICBjYXNlICd0aGVtZS1jb3Vyc2UnOiByZXR1cm4gTGBUZW1ha3Vyc2A7XHJcbiAgICAgIGNhc2UgJ3N0ZXAtY291cnNlJzogcmV0dXJuIExgU3RlZ2t1cnNgO1xyXG4gICAgICBjYXNlICdpbnRyby10YWInOiByZXR1cm4gTGBJbnRyb2R1a3Rpb25zZmxpa2A7XHJcbiAgICAgIGNhc2UgJ3J1bi11cC10YWInOiByZXR1cm4gTGBVcHB0YWt0YDtcclxuICAgICAgY2FzZSAnc3ViamVjdC10YWInOiByZXR1cm4gTGDDhG1uZXNmbGlrYDtcclxuICAgICAgY2FzZSAnbWlzc2lvbi10YWInOiByZXR1cm4gTGBVcHBkcmFnc2ZsaWtgO1xyXG4gICAgICBjYXNlICdjb250ZW50LXRhYic6IHJldHVybiBMYElubmVow6VsbHNmbGlrYDtcclxuICAgICAgY2FzZSAndGVhY2hlci10YWInOiByZXR1cm4gTGBMw6RyYXJzaWRhYDtcclxuICAgICAgY2FzZSAnd29yZC1iYW5rLXRhYic6IHJldHVybiBMYE9yZGJhbmtgO1xyXG4gICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgaWYgKHAgPT0gbnVsbCkgcmV0dXJuIExgTm9sbHN0w6RsbHRgO1xyXG4gICAgICAgIGlmIChwID09PSBcIlwiKSByZXR1cm4gTGAodG9tdClgO1xyXG4gICAgICAgIGlmICh0eXBlID09PSBIdG1sKSByZXR1cm4gbWF4TGVuZ3RoKHJlbW92ZUh0bWxUYWdzKHApLCAzMDApO1xyXG4gICAgICAgIGlmICh0eXBlb2YgcCA9PT0gJ3N0cmluZycpIHJldHVybiBwO1xyXG4gICAgICAgIGlmIChwLnN1YmplY3ROYW1lKSByZXR1cm4gcC5zdWJqZWN0TmFtZTtcclxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkocCwgbnVsbCwgMik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVIdG1sVGFncyhodG1sOiBzdHJpbmcpIHtcclxuICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICBkaXYuaW5uZXJIVE1MID0gaHRtbDtcclxuICByZXR1cm4gZGl2LmlubmVyVGV4dDtcclxufVxyXG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBEZWx0YVZpZXcgfSBmcm9tICcuL2RlbHRhLXZpZXcnO1xyXG5cclxudHlwZSBQcm9wcyA9IHtcclxuICBicmFuY2hJZDogc3RyaW5nXHJcbiAgYnJhbmNoVHlwZTogJ3NjaG9vbC1icmFuY2gnXHJcbiAgY291cnNlSWQ6IHN0cmluZ1xyXG4gIGlzQWRtaW46IGJvb2xlYW5cclxufSB8IHtcclxuICBicmFuY2hJZDogc3RyaW5nXHJcbiAgYnJhbmNoVHlwZTogJ2RyYWZ0LWJyYW5jaCdcclxuICBpc0FkbWluOiBib29sZWFuXHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gVmVyc2lvbkhpc3RvcnlCb3gocHJvcHM6IFByb3BzKSB7XHJcbiAgY29uc3QgdGl0bGUgPSBwcm9wcy5icmFuY2hUeXBlID09PSAnc2Nob29sLWJyYW5jaCcgP1xyXG4gICAgPGgyPntMYFNrb2xhbnMgw6RuZHJpbmdhcmB9PC9oMj4gOlxyXG4gICAgPGgzPntMYE9wdWJsaWNlcmFkZSDDpG5kcmluZ2FyYH08L2gzPjtcclxuXHJcbiAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwia2VkX2JveGVkXCI+XHJcbiAgICB7dGl0bGV9XHJcbiAgICA8RGVsdGFWaWV3XHJcbiAgICAgIGJyYW5jaElkPXtwcm9wcy5icmFuY2hJZH1cclxuICAgICAgZWRpdGFibGU9eyFwcm9wcy5pc0FkbWlufVxyXG4gICAgICB0YWc9e3Byb3BzLmJyYW5jaFR5cGUgPT09ICdzY2hvb2wtYnJhbmNoJyA/IHByb3BzLmNvdXJzZUlkIDogbnVsbH0gLz5cclxuICA8L2Rpdj47XHJcbn1cclxuIiwiaW1wb3J0IHsgRG9jdW1lbnQsIENvdXJzZSwgS25vd2xlZGdlUmVxdWlyZW1lbnQsIENvdXJzZU1vZHVsZSwgVGFzaywgU29mdERvY3VtZW50QWNjZXNzIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBmbGF0dGVuLCBMIH0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzL3V0aWxzXCI7XHJcbmltcG9ydCB7IFdpdGhHcmFwaHMgfSBmcm9tICdrZWRiYWNrZW5kL3JlcG8nO1xyXG5pbXBvcnQgeyBnZXRFbWFpbEZyb21Eb2NBY2Nlc3MgfSBmcm9tICcuLi91dGlscyc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VW5jb3ZlcmVkS25vd2xlZGdlUmVxdWlyZW1lbnRzKGNvdXJzZTogQ291cnNlKSB7XHJcbiAgY29uc3QgdW5jb3ZlcmVkUmVxdWlyZW1lbnRzID0gY291cnNlLmtub3dsZWRnZVJlcXVpcmVtZW50cy5yZWR1Y2UoKHJlc3VsdCwgaXRlbSkgPT4ge1xyXG4gICAgcmVzdWx0W2l0ZW0uaWRdID0gaXRlbTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfSwge30gYXMgeyBbaWQ6IHN0cmluZ106IEtub3dsZWRnZVJlcXVpcmVtZW50IH0pO1xyXG5cclxuICBjb3Vyc2UudGFza3MuZm9yRWFjaCh0YXNrID0+IHtcclxuICAgIHRhc2sua25vd2xlZGdlUmVxdWlyZW1lbnRzLmZvckVhY2goa3IgPT4ge1xyXG4gICAgICBkZWxldGUgdW5jb3ZlcmVkUmVxdWlyZW1lbnRzW2tyLmlkXTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gT2JqZWN0LmtleXModW5jb3ZlcmVkUmVxdWlyZW1lbnRzKS5tYXAoaWQgPT4gdW5jb3ZlcmVkUmVxdWlyZW1lbnRzW2lkXSk7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmVxc1JlZmVyZW5jaW5nRG9jIHtcclxuICBrbm93bGVkZ2VSZXF1aXJlbWVudHM6IEFycmF5PHtpZDogc3RyaW5nfT5cclxuICBhYmlsaXRpZXM6IEFycmF5PHtpZDogc3RyaW5nfT5cclxuICBjZW50cmFsQ29udGVudDogQXJyYXk8e2lkOiBzdHJpbmd9PlxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SWRzTm90Q292ZXJlZEJ5VGFza3MoY291cnNlOiBDb3Vyc2UpIDoge1tpZDogc3RyaW5nXTogdHJ1ZX0ge1xyXG4gIHJldHVybiBnZXRJZHNOb3RDb3ZlcmVkQnlSZXFSZWZlcmVuY2luZ0RvY3MoXHJcbiAgICBbY291cnNlIGFzIFdpdGhHcmFwaHM8Q291cnNlLCBcImFiaWxpdGllc1wiIHwgXCJjZW50cmFsQ29udGVudFwiIHwgXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIj5dLFxyXG4gICAgY291cnNlLnRhc2tzIGFzIFdpdGhHcmFwaHM8VGFzaywgXCJhYmlsaXRpZXNcIiB8IFwiY2VudHJhbENvbnRlbnRcIiB8IFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCI+W10pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SWRzTm90Q292ZXJlZEJ5UmVxUmVmZXJlbmNpbmdEb2NzKFxyXG4gIHRlbXBsYXRlczogUmVxc1JlZmVyZW5jaW5nRG9jW10sXHJcbiAgZG9jc0JlaW5nQ2hlY2tlZDogUmVxc1JlZmVyZW5jaW5nRG9jW10pIDoge1tpZDogc3RyaW5nXTogdHJ1ZX1cclxue1xyXG4gIGNvbnN0IHVuY292ZXJlZElkcyA9IHt9O1xyXG4gIC8vIDEuIE1hcmsgdGhlIGlkcyBvZiBhbGwga25vd2xlZGdlIHJlcXVpcmVtZW50cywgYWJpbGl0aWVzIGFuZCBjZW50cmFsIGNvbnRlbnQgZm9yIHRoaXMgY291cnNlOlxyXG4gIHRlbXBsYXRlcy5mb3JFYWNoKGNvdXJzZSA9PiB7XHJcbiAgICBjb3Vyc2Uua25vd2xlZGdlUmVxdWlyZW1lbnRzLmZvckVhY2gociA9PiB7XHJcbiAgICAgIHVuY292ZXJlZElkc1tyLmlkXSA9IHRydWU7XHJcbiAgICB9KTtcclxuICAgIGNvdXJzZS5hYmlsaXRpZXMuZm9yRWFjaChhID0+IHtcclxuICAgICAgdW5jb3ZlcmVkSWRzW2EuaWRdID0gdHJ1ZTtcclxuICAgIH0pO1xyXG4gICAgY291cnNlLmNlbnRyYWxDb250ZW50LmZvckVhY2goY2MgPT4ge1xyXG4gICAgICB1bmNvdmVyZWRJZHNbY2MuaWRdID0gdHJ1ZTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG4gIC8vIDIuIExpc3QgYWxsIHRhc2tzIGFuZCB1bm1hcmsgYWxsIGlkcyB0aGF0IHRoZXkgcmVmZXIgdG9cclxuICBkb2NzQmVpbmdDaGVja2VkLmZvckVhY2goZG9jID0+IHtcclxuICAgIGRvYy5rbm93bGVkZ2VSZXF1aXJlbWVudHMuZm9yRWFjaChrciA9PiB7XHJcbiAgICAgIGRlbGV0ZSB1bmNvdmVyZWRJZHNba3IuaWRdO1xyXG4gICAgfSk7XHJcbiAgICBkb2MuYWJpbGl0aWVzLmZvckVhY2goYSA9PiB7XHJcbiAgICAgIGRlbGV0ZSB1bmNvdmVyZWRJZHNbYS5pZF07XHJcbiAgICB9KTtcclxuICAgIGRvYy5jZW50cmFsQ29udGVudC5mb3JFYWNoKGNjID0+IHtcclxuICAgICAgZGVsZXRlIHVuY292ZXJlZElkc1tjYy5pZF07XHJcbiAgICB9KTtcclxuICB9KTtcclxuICByZXR1cm4gdW5jb3ZlcmVkSWRzO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2FuaXR5Q2hlY2sgKGNvdXJzZTogQ291cnNlKSB7XHJcbiAgZnVuY3Rpb24gaGFzRHVwbGljYXRlVGFza3MoY291cnNlOiBDb3Vyc2UpIHtcclxuICAgIGNvbnN0IHRhc2tJZHM6IHtbaWQ6c3RyaW5nXTogYm9vbGVhbn0gPSB7fTtcclxuICAgIHJldHVybiBmbGF0dGVuKGNvdXJzZS5tb2R1bGVzLm1hcChtb2R1bGUgPT4gbW9kdWxlLnRhc2tJZHMubWFwKHRhc2tJZCA9PiB7XHJcbiAgICAgIGlmICh0YXNrSWRzW3Rhc2tJZF0pIHtcclxuICAgICAgICBjb25zdCB0YXNrID0gY291cnNlLnRhc2tzLmZpbmQodCA9PiB0LmlkID09PSB0YXNrSWQpO1xyXG4gICAgICAgIHJldHVybiBMYFNhbW1hIHVwcGdpZnQgZsO2cmVrb21tZXIgZmxlcmEgZ8OlbmdlcjogXCIke3Rhc2submFtZX1cImA7XHJcbiAgICAgIH1cclxuICAgICAgdGFza0lkc1t0YXNrSWRdID0gdHJ1ZTtcclxuICAgIH0pLmZpbHRlcih4ID0+IHgpKSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB0YXNrc1dpdGhTYW1lVXJsKGNvdXJzZTogQ291cnNlKSB7XHJcbiAgICBjb25zdCB0YXNrVXJsczoge1t1cmw6c3RyaW5nXTogVGFza30gPSB7fTtcclxuICAgIHJldHVybiBjb3Vyc2UudGFza3MubWFwKHRhc2sgPT4ge1xyXG4gICAgICBpZiAodGFzay51cmwpIHtcclxuICAgICAgICBpZiAodGFza1VybHNbdGFzay51cmxdKSB7XHJcbiAgICAgICAgICByZXR1cm4gTGBUdsOlIHVwcGdpZnRlciBwZWthciBww6Ugc2FtbWEgVVJMOiBcIiR7dGFza1VybHNbdGFzay51cmxdLm5hbWV9XCIgc2FtdCBcIiR7dGFzay5uYW1lfVwiYDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGFza1VybHNbdGFzay51cmxdID0gdGFzaztcclxuICAgICAgfVxyXG4gICAgfSkuZmlsdGVyKHggPT4geCk7ICBcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhc0VtcHR5TW9kdWxlTmFtZXMoY291cnNlOiBDb3Vyc2UpIHtcclxuICAgIHJldHVybiBjb3Vyc2UubW9kdWxlcy5zb21lIChtb2R1bGUgPT4gbW9kdWxlLm5hbWUgPT09IFwiXCIpICYmXHJcbiAgICAgIExgRGV0IGZpbm5zIG1pbnN0IGVuIG1vZHVsIHV0YW4gYW5naXZldCBuYW1uYDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhc0R1cGxpY2F0ZU1vZHVsZU5hbWVzKGNvdXJzZTogQ291cnNlKSB7XHJcbiAgICBjb25zdCBtb2R1bGVOYW1lczoge1tuYW1lOiBzdHJpbmddOiB0cnVlfSA9IHt9O1xyXG4gICAgcmV0dXJuIGNvdXJzZS5tb2R1bGVzLm1hcChtb2R1bGUgPT4ge1xyXG4gICAgICBpZiAobW9kdWxlLm5hbWUgJiYgbW9kdWxlTmFtZXNbbW9kdWxlLm5hbWVdKSB7XHJcbiAgICAgICAgcmV0dXJuIExgTW9kdWxlbiBtZWQgbmFtbiAke21vZHVsZS5uYW1lfSBmw7ZyZWtvbW1lciBmbGVyYSBnw6VuZ2VyYDtcclxuICAgICAgfVxyXG4gICAgICBpZiAobW9kdWxlLm5hbWUpIG1vZHVsZU5hbWVzW21vZHVsZS5uYW1lXSA9IHRydWU7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgY29uc3QgY2hlY2tzID0gZmxhdHRlbihbXHJcbiAgICBoYXNEdXBsaWNhdGVUYXNrcyhjb3Vyc2UpLFxyXG4gICAgdGFza3NXaXRoU2FtZVVybChjb3Vyc2UpLFxyXG4gICAgaGFzRW1wdHlNb2R1bGVOYW1lcyhjb3Vyc2UpLFxyXG4gICAgaGFzRHVwbGljYXRlTW9kdWxlTmFtZXMoY291cnNlKVxyXG4gIF0pO1xyXG5cclxuICByZXR1cm4gY2hlY2tzLmZpbHRlciAocmVzdWx0ID0+IHJlc3VsdCk7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGFza3NQZXJJZCAoY291cnNlOiBDb3Vyc2UpIHtcclxuICBjb25zdCByZXN1bHQ6IHtbaWQ6IHN0cmluZ106IFRhc2tbXX0gPSB7fTtcclxuICBmdW5jdGlvbiBhZGQoaWQ6IHN0cmluZywgdGFzazogVGFzaykge1xyXG4gICAgY29uc3QgbGlzdCA9IHJlc3VsdFtpZF0gfHwgKHJlc3VsdFtpZF0gPSBbXSk7XHJcbiAgICBsaXN0LnB1c2godGFzayk7XHJcbiAgfVxyXG4gIGNvdXJzZS50YXNrcy5mb3JFYWNoKHRhc2sgPT4ge1xyXG4gICAgdGFzay5hYmlsaXRpZXMuZm9yRWFjaChhID0+IGFkZChhLmlkLCB0YXNrKSk7XHJcbiAgICB0YXNrLmNlbnRyYWxDb250ZW50LmZvckVhY2goYyA9PiBhZGQoYy5pZCwgdGFzaykpO1xyXG4gICAgdGFzay5mdXR1cmVBYmlsaXRpZXMuZm9yRWFjaChmYSA9PiBhZGQoZmEsIHRhc2spKTtcclxuICB9KTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vKiogUmV0dXJucyBhbiBhY2Nlc3MgbGlzdCBmb3IgYSBjb3Vyc2UgaW4gYSBiYWNrd2FyZCBjb21wYXRpYmxlIHdheSAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0U29mdEFjY2Vzc0xpc3QgKGNvdXJzZTogQ291cnNlKTogU29mdERvY3VtZW50QWNjZXNzW10ge1xyXG4gIGNvbnN0IHtyZXNwb25zaWJsZVRlYWNoZXJzfSA9IGNvdXJzZTtcclxuICBjb25zdCByZXN1bHQgPSByZXNwb25zaWJsZVRlYWNoZXJzLm1hcChkYSA9Pih7XHJcbiAgICBuYW1lOiBkYS5uYW1lLFxyXG4gICAgZW1haWw6IGdldEVtYWlsRnJvbURvY0FjY2VzcyhkYSksXHJcbiAgICBhY2Nlc3M6IGRhLmFjY2VzcyB8fCAnZWRpdCdcclxuICB9IGFzIFNvZnREb2N1bWVudEFjY2VzcykpO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuIiwiaW1wb3J0IHsgS25vd2xlZGdlUmVxdWlyZW1lbnQgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IGZsYXR0ZW4gfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XHJcblxyXG4vL2dldCBzZW50ZW5jZXMgYnkgcmVxdWlyZW1lbnRcclxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlcXVpcm1lbnRTZW50ZW5jZXMocmVxdWlyZW1lbnQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcclxuICByZXR1cm4gcmVxdWlyZW1lbnQuc3BsaXQoXCIuXCIpLmZpbHRlcihlID0+IHsgcmV0dXJuIGUgfSk7XHJcbn1cclxuXHJcbi8vcmV0cmlldmUgc2VudGVuY2VzXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTYXZlZFNlbnRlbmNlcyhwYXJ0aWFsUmVxdWlybWVudHM6IHN0cmluZyBbXSk6IHN0cmluZ1tdIHtcclxuICByZXR1cm4gcGFydGlhbFJlcXVpcm1lbnRzLm1hcChmdW5jdGlvbiAob2JqKSB7XHJcbiAgICByZXR1cm4gb2JqLnRyaW0oKTtcclxuICB9KSB8fCBbXTtcclxufVxyXG5cclxuLy9jaGVjayBhbGwgcmVxdWlyZW1lbnRzIGFyZSBtYXJrZWRcclxuZXhwb3J0IGZ1bmN0aW9uIGFsbFJlcXVpcmVtZW50U2VudGVjZXNNYXJrZWQocmVxdWlyZW1lbnROYW1lOiBzdHJpbmcsIHBhcnRpYWxSZXF1aXJlbWVudHM6IHN0cmluZ1tdKTogYm9vbGVhbiB7XHJcbiAgdmFyIHRleHRTZW50ZW5jZXMgPSBnZXRSZXF1aXJtZW50U2VudGVuY2VzKHJlcXVpcmVtZW50TmFtZSk7XHJcbiAgcmV0dXJuIHBhcnRpYWxSZXF1aXJlbWVudHMgJiYgcGFydGlhbFJlcXVpcmVtZW50cy5sZW5ndGggPT09IHRleHRTZW50ZW5jZXMubGVuZ3RoOztcclxufVxyXG5cclxuLy9nZXQgdGhlIHBhcnRpYWwgc2F2ZWQgc2VudGVuY2VzIGZvciB0aGUgZGVmYXVsdCB2aWV3XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRQYXJ0aWFsQ29udGVudERlZmF1bHRWaWV3KHJlcXVpcmVtZW50OiBLbm93bGVkZ2VSZXF1aXJlbWVudCwgcGFydGlhbFJlcXVpcm1lbnRzOnN0cmluZyBbXSwgYWxyZWFkeUNvdmVyZWRQYXJ0aWFsUmVxdWlybWVudHM6IHsgW2lkOiBzdHJpbmddOiBzdHJpbmcgW119W10sIHNraXBOb3RNYXJrZWQ6IGJvb2xlYW4pOiBzdHJpbmcge1xyXG4gIHZhciByZXN1bHRlZEh0bWwgPSByZXF1aXJlbWVudC5uYW1lO1xyXG4gIHZhciB0ZXh0U2VudGVuY2VzID0gZ2V0UmVxdWlybWVudFNlbnRlbmNlcyhyZXF1aXJlbWVudC5uYW1lKTtcclxuICB2YXIgcm93UmVxdWlybWVudHMgPSBwYXJ0aWFsUmVxdWlybWVudHMgJiYgZ2V0U2F2ZWRTZW50ZW5jZXMocGFydGlhbFJlcXVpcm1lbnRzKTtcclxuICB2YXIgYWxsUmVxQ292ZXJlZFNlbnRlbmNlID0gYWxyZWFkeUNvdmVyZWRQYXJ0aWFsUmVxdWlybWVudHMgJiYgZ2V0Q292ZXJlZFNlbnRlY2VzKGFscmVhZHlDb3ZlcmVkUGFydGlhbFJlcXVpcm1lbnRzLCByZXF1aXJlbWVudC5pZCk7XHJcbiAgdmFyIGFsbFJlcVNlbnRlbmNlc01hcmtlZCA9IGFsbFJlcXVpcmVtZW50U2VudGVjZXNNYXJrZWQocmVxdWlyZW1lbnQubmFtZSwgcm93UmVxdWlybWVudHMpO1xyXG5cclxuICB0ZXh0U2VudGVuY2VzLmZvckVhY2goc2VudGVuY2UgPT4ge1xyXG4gICAgLy90cmltbSBjdXJyZW50IHNlbnRlbmNlXHJcbiAgICB2YXIgdHJpbW1lZFNlbnRlbmNlID0gc2VudGVuY2UudHJpbSgpO1xyXG4gICAgdmFyIGZ1bGxTZW50ZW5jZSA9IHNlbnRlbmNlICsgXCIuXCI7XHJcbiAgICBpZiAocm93UmVxdWlybWVudHMgJiYgcm93UmVxdWlybWVudHMuaW5jbHVkZXModHJpbW1lZFNlbnRlbmNlKSAmJiAhYWxsUmVxU2VudGVuY2VzTWFya2VkKSB7XHJcbiAgICAgIHJlc3VsdGVkSHRtbCA9IHJlc3VsdGVkSHRtbC5yZXBsYWNlKGZ1bGxTZW50ZW5jZSwgYDxzcGFuIGNsYXNzPSR7XCJtYXJrZWRHcmVlblwifT4ke2Z1bGxTZW50ZW5jZX08L3NwYW4+YCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdmFyIGNvdmVyZWRTZW50ZWNlID0gYWxsUmVxQ292ZXJlZFNlbnRlbmNlICYmIGFsbFJlcUNvdmVyZWRTZW50ZW5jZS5pbmNsdWRlcyh0cmltbWVkU2VudGVuY2UpO1xyXG4gICAgICBpZihjb3ZlcmVkU2VudGVjZSl7XHJcbiAgICAgICAgcmVzdWx0ZWRIdG1sID0gcmVzdWx0ZWRIdG1sLnJlcGxhY2UoZnVsbFNlbnRlbmNlLCBgPHNwYW4+JHtmdWxsU2VudGVuY2V9PC9zcGFuPmApO1xyXG4gICAgICB9IGVsc2UgaWYgKCFhbGxSZXFTZW50ZW5jZXNNYXJrZWQgJiYgYWxsUmVxQ292ZXJlZFNlbnRlbmNlICYmIGFsbFJlcUNvdmVyZWRTZW50ZW5jZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgcmVzdWx0ZWRIdG1sID0gcmVzdWx0ZWRIdG1sLnJlcGxhY2UoZnVsbFNlbnRlbmNlLCBgPHNwYW4gY2xhc3M9JHtcIm1hcmtlZFJlZFwifT4ke2Z1bGxTZW50ZW5jZX08L3NwYW4+YCk7XHJcbiAgICAgIH0gXHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgcmV0dXJuIHJlc3VsdGVkSHRtbDtcclxufVxyXG5cclxuLy9jaGVjayB0aGUgY3VycmVudCByZXF1aXJlbWVudCBpcyBhbHJlYWR5IGNvdmVyZWRcclxuZXhwb3J0IGZ1bmN0aW9uIGlzUGFydGlhbENvdmVyZWRSZXF1aXJtZW50KHJlcXVpcmVtZW50OiBLbm93bGVkZ2VSZXF1aXJlbWVudCwgYWxyZWFkeUNvdmVyZWRQYXJ0aWFsUmVxdWlybWVudHM6IHsgW2lkOiBzdHJpbmddOiBzdHJpbmcgW119W10pe1xyXG4gIHZhciB0ZXh0U2VudGVuY2VzID0gZ2V0UmVxdWlybWVudFNlbnRlbmNlcyhyZXF1aXJlbWVudC5uYW1lKTtcclxuICB2YXIgcmVzdWx0ID0gZmFsc2U7XHJcbiAgZm9yKHZhciBpPTA7IGkgPCB0ZXh0U2VudGVuY2VzLmxlbmd0aDsgaSsrKXtcclxuICAgIHZhciB0cmltbWVkU2VudGVuY2UgPSB0ZXh0U2VudGVuY2VzW2ldLnRyaW0oKTtcclxuICAgIHZhciBhbGxDb3ZlcmVkU2VudGVuY2VSZXEgPSBhbHJlYWR5Q292ZXJlZFBhcnRpYWxSZXF1aXJtZW50cyAmJiBnZXRDb3ZlcmVkU2VudGVjZXMoYWxyZWFkeUNvdmVyZWRQYXJ0aWFsUmVxdWlybWVudHMsIHJlcXVpcmVtZW50LmlkKTtcclxuICAgIHZhciBjb3ZlcmVkU2VudGVjZSA9IGFsbENvdmVyZWRTZW50ZW5jZVJlcSAmJiBhbGxDb3ZlcmVkU2VudGVuY2VSZXEuaW5jbHVkZXModHJpbW1lZFNlbnRlbmNlKTtcclxuICAgIGlmKGNvdmVyZWRTZW50ZWNlKXtcclxuICAgICAgcmVzdWx0ID0gdHJ1ZTtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbi8vY29tcHV0ZSB0aGUgY292ZXJlZCBzZW50ZWNlcyBleGNsdWRpbmcgdGhlIGN1cnJlbnQgcmVxdWlyZW1lbnRcclxuZXhwb3J0IGZ1bmN0aW9uIGdldENvdmVyZWRTZW50ZWNlcyhhbGxSZXE6IHsgW2lkOiBzdHJpbmddOiBzdHJpbmcgW119W10sIHJlcXVpcmVtZW50SWQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcclxuICB2YXIgcmVzdWx0QXJyYXkgPSBbXTtcclxuICBhbGxSZXEuZm9yRWFjaChvYmogPT4ge1xyXG4gICAgdmFyIGFzc2lnbmVkUmVxID0gT2JqZWN0LmFzc2lnbihbXSwgT2JqZWN0LmtleXMob2JqKS5maWx0ZXIocmVxSWQgPT4gcmVxSWQgPT0gcmVxdWlyZW1lbnRJZCkubWFwKGsgPT4gb2JqW2tdLm1hcChlbGVtID0+IGVsZW0udHJpbSgpKSkpO1xyXG4gICAgcmVzdWx0QXJyYXkucHVzaCguLi5hc3NpZ25lZFJlcSk7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIGZsYXR0ZW48c3RyaW5nPihyZXN1bHRBcnJheSk7XHJcbn1cclxuXHJcbi8vc29ydCB0aGUgc2VsZWN0ZWQgc2VudGVuY2VzIGJ5IHRoZSBvcmRlciBvZiB0aGUgYXBwZWFyYW5jZSBpbiB0aGUgcmVxdWlyZW1lbnRcclxuZXhwb3J0IGZ1bmN0aW9uIGdldFNvcnRlZFJlcXVpcm1lbnRzKHRleHRTZW50ZW5jZXM6IHN0cmluZ1tdLCBwYXJ0aWFsUmVxdWlybWVudHM6IHN0cmluZ1tdKTogc3RyaW5nW117XHJcbiAgdmFyIG91dHB1dCA9IFtdO1xyXG4gIHZhciBpbmRleGVkU2VudGVuY2VzID0gdGV4dFNlbnRlbmNlcy5tYXAoKGUgLGkpID0+IHtyZXR1cm4ge2luZDogaSwgdmFsOiBlfX0pO1xyXG4gIG91dHB1dCA9IGluZGV4ZWRTZW50ZW5jZXMuZmlsdGVyKHM9PiBwYXJ0aWFsUmVxdWlybWVudHMuaW5jbHVkZXMocy52YWwpKTtcclxuICByZXR1cm4gb3V0cHV0ID8gb3V0cHV0LnNvcnQoKHgsIHkpID0+IHguaW5kID4geS5pbmQgPyAxIDogLTEpLm1hcChzPT4gcy52YWwpIDogW107XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRNaWdyYXRpb25UaXRsZShpc01pZ3JhdGVkLCBtYXJrTW9kZSl7XHJcbiAgcmV0dXJuIGlzTWlncmF0ZWQgP1xyXG4gICAgbWFya01vZGUgP1xyXG4gICAgICBgU2tvbHZlcmtldCBoYXIgdXBwZGF0ZXJhdCB0ZXh0ZW5zIGZvcm11bGVyaW5nLiBEdSBrYW4gZ3JhbnNrYSDDpG5kcmluZ2VuIGdlbm9tIGF0dCBmw6RsbGEgdXQgdmFybmluZ3Nib3hlbiB0aWxsIGjDtmdlciwgbWVkIHRpdGVsIFwiVXBwZGF0ZXJhZGUgZm9ybXVsZXJpbmdhciBmcsOlbiBTa29sdmVya2V0XCJgIDpcclxuICAgICAgYFNrb2x2ZXJrZXQgaGFyIHVwcGRhdGVyYXQgdGV4dGVucyBmb3JtdWxlcmluZywgbWVuIGRldHRhIGhhciDDpG5udSBpbnRlIGdyYW5za2F0cyBhdiB1cHBnaWZ0ZW5zIHJlZGlnZXJpbmdzYmVow7ZyaWdlYCA6XHJcbiAgICB1bmRlZmluZWRcclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEwgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IFNjaG9vbENvdXJzZXMgfSBmcm9tICcuLi9zdWItY29tcG9uZW50cy9zY2hvb2wtY291cnNlcyc7XHJcbmltcG9ydCB7IFJlc291cmNlIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBkdEZvcm1hdCB9IGZyb20gJy4uL3V0aWxzJztcclxuaW1wb3J0IHsgRGlhbG9nIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9jb3Vyc2UtZWRpdG9yLWhvc3QnO1xyXG5pbXBvcnQgdmFsaWRVcmwgZnJvbSAndmFsaWQtdXJsJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgcmVzb3VyY2U/OiBSZXNvdXJjZTtcclxuICB0aXRsZTogc3RyaW5nO1xyXG4gIG9uU2F2ZTogKG5ld1Jlc291cmNlOiBSZXNvdXJjZSkgPT4gdm9pZDtcclxuICBvbkRlbGV0ZT86ICgpPT52b2lkO1xyXG59XHJcblxyXG50eXBlIFN0YXRlID0gUmVzb3VyY2U7XHJcblxyXG5leHBvcnQgY2xhc3MgRWRpdFJlc291cmNlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLFN0YXRlPiBpbXBsZW1lbnRzIERpYWxvZyB7XHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0gdGhpcy5wcm9wcy5yZXNvdXJjZSB8fCB7bmFtZTogJycsIHVybDogJyd9O1xyXG4gIH1cclxuXHJcbiAgc2F2ZSgpIHtcclxuICAgIGNvbnN0IHJlc291cmNlID0gdGhpcy5zdGF0ZTtcclxuICAgIGlmICghdmFsaWRVcmwuaXNVcmkocmVzb3VyY2UudXJsKSkgdGhyb3cgbmV3IEVycm9yKExgQW5naXZlbiBVUkwgJyR7cmVzb3VyY2UudXJsfScgw6RyIG9naWx0aWcuIFNrYSBiw7ZyamEgbWVkIGV4ZW1wZWx2aXMgaHR0cDosIGh0dHBzOiBlbGxlciBtYWlsdG86YCk7XHJcbiAgICB0aGlzLnByb3BzLm9uU2F2ZShyZXNvdXJjZSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7dGl0bGUsIG9uU2F2ZSwgb25EZWxldGV9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IHJlc291cmNlID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IGlzVmFsaWRVcmwgPSB2YWxpZFVybC5pc1VyaSh0aGlzLnN0YXRlLnVybCk7XHJcblxyXG4gICAgcmV0dXJuIDxkaXY+PGRpdiBjbGFzc05hbWU9XCJzdi1odG1sLXBvcnRsZXQgc3YtcG9ydGxldCBzdi1za2lwLXNwYWNlclwiPlxyXG4gICAgICA8aDI+e3RpdGxlfTwvaDI+XHJcbiAgICAgIDxociAvPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPk5hbW46PC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGF1dG9Gb2N1c1xyXG4gICAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgICAgc2l6ZT17NTB9XHJcbiAgICAgICAgICAgIHZhbHVlPXtyZXNvdXJjZS5uYW1lfVxyXG4gICAgICAgICAgICBvbkNoYW5nZT17ZXY9PnRoaXMuc2V0U3RhdGUoe25hbWU6IGV2LnRhcmdldC52YWx1ZX0pfSAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wIHNwYWNlZFwiPjwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5Mw6Ruazo8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcCBcIj5cclxuICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgICBzaXplPXs1MH1cclxuICAgICAgICAgICAgdmFsdWU9e3Jlc291cmNlLnVybH1cclxuICAgICAgICAgICAgb25DaGFuZ2U9e2V2PT50aGlzLnNldFN0YXRlKHt1cmw6IGV2LnRhcmdldC52YWx1ZX0pfSAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wIHNwYWNlZFwiPjwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGJyIC8+PC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXRcIj5cclxuICAgICAgICB7KHJlc291cmNlLmNyZWF0ZWREYXRlIHx8IHJlc291cmNlLm1vZGlmaWVkRGF0ZSkgJiYgPGRpdj5cclxuICAgICAgICAgIHtyZXNvdXJjZS5jcmVhdGVkRGF0ZSAmJiA8cD5cclxuICAgICAgICAgICAgUmVzdXJzZW4vTMOkbmtlbiBza2FwYWRlcyB7ZHRGb3JtYXQocmVzb3VyY2UuY3JlYXRlZERhdGUpfSBhdiA8c3Ryb25nPntyZXNvdXJjZS5jcmVhdGVkQnkubmFtZX08L3N0cm9uZz4uXHJcbiAgICAgICAgICA8L3A+fVxyXG4gICAgICAgICAge3Jlc291cmNlLm1vZGlmaWVkRGF0ZSAmJiA8cD5cclxuICAgICAgICAgICAgUmVzdXJzZW4vTMOkbmtlbiByZWRpZ2VyYWRlcyBzZW5hc3Qge2R0Rm9ybWF0KHJlc291cmNlLm1vZGlmaWVkRGF0ZSl9IGF2IDxzdHJvbmc+e3Jlc291cmNlLm1vZGlmaWVkQnkubmFtZX08L3N0cm9uZz4uXHJcbiAgICAgICAgICA8L3A+fVxyXG4gICAgICAgICAgPGJyIC8+PGJyLz5cclxuICAgICAgICA8L2Rpdj59XHJcbiAgICAgICAge29uRGVsZXRlICYmIDxkaXYgdGFiSW5kZXg9ezJ9IGNsYXNzTmFtZT1cImJ0biBidG4td2FybmluZyBidG4tbGFyZ2UgcHVsbC1yaWdodFwiIG9uQ2xpY2s9eygpPT5vbkRlbGV0ZSgpfT5cclxuICAgICAgICAgIFRhIGJvcnQgcmVzdXJzL2zDpG5rXHJcbiAgICAgICAgPC9kaXY+fVxyXG4gICAgICAgIDxhIHRhYkluZGV4PXsxfSBjbGFzc05hbWU9e1wiYnRuIGJ0bi1sYXJnZVwiICsgKGlzVmFsaWRVcmwgPyBcIlwiIDogXCIgYnRuLWluYWN0aXZlXCIpfSBvbkNsaWNrPXtpc1ZhbGlkVXJsICYmICgoKSA9PiBvblNhdmUocmVzb3VyY2UpKX0+U3BhcmE8L2E+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHtUYXNrLCBDb3Vyc2V9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgT3BlbkNsb3NlQm94IH0gZnJvbSAnLi4vLi4vLi4vdXRpbGl0eS1jb21wb25lbnRzL29wZW4tY2xvc2UtYm94JztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgdGFzazogVGFzaztcclxuICBjb3Vyc2U6IENvdXJzZTtcclxuICB1cGRhdGVMaW5rOiAoaWQ6IHN0cmluZywgbGlua09yVW5saW5rOiBib29sZWFuKSA9PiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVGFza01pZ3JhdGlvbkJveCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcz4ge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qge3Rhc2ssIGNvdXJzZSwgdXBkYXRlTGlua30gPSB0aGlzLnByb3BzO1xyXG4gICAgaWYgKCF0YXNrLm1pZ3JhdGVkVGV4dHMpIHJldHVybiA8PiZuYnNwOzwvPjtcclxuICAgIGNvbnN0IHthYmlsaXRpZXMsIGNlbnRyYWxDb250ZW50LCBrbm93bGVkZ2VSZXF1aXJlbWVudHN9ID0gdGFzay5taWdyYXRlZFRleHRzO1xyXG4gICAgY29uc3Qga3JzID0gT2JqZWN0LmtleXMoa25vd2xlZGdlUmVxdWlyZW1lbnRzIHx8IHt9KS5tYXAoaWQgPT4gKHtcclxuICAgICAgLi4uY291cnNlLmtub3dsZWRnZVJlcXVpcmVtZW50cy5maW5kKHQgPT4gdC5pZCA9PT0gaWQpLFxyXG4gICAgICAuLi5rbm93bGVkZ2VSZXF1aXJlbWVudHNbaWRdXHJcbiAgICB9KSkvLy5maWx0ZXIoKHtuYW1lfSkgPT4gISFuYW1lKTtcclxuICAgIGNvbnN0IGtyQSA9IHt0aXRsZTogXCJVcHBkYXRlcmF0IGt1bnNrYXBza3JhdiBmw7ZyIGJldHlnZXQgQVwiLCB0eXBlOiBcImtub3dsZWRnZVJlcXVpcmVtZW50c1wiLCBpdGVtczoga3JzLmZpbHRlcihrciA9PiBrci5ncmFkZVN0ZXAgPT09ICdBJyl9O1xyXG4gICAgY29uc3Qga3JDID0ge3RpdGxlOiBcIlVwcGRhdGVyYXQgS3Vuc2thcHNrcmF2IGbDtnIgYmV0eWdldCBDXCIsIHR5cGU6IFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCIsIGl0ZW1zOiBrcnMuZmlsdGVyKGtyID0+IGtyLmdyYWRlU3RlcCA9PT0gJ0MnKX07XHJcbiAgICBjb25zdCBrckUgPSB7dGl0bGU6IFwiVXBwZGF0ZXJhdCBrdW5za2Fwc2tyYXYgZsO2ciBiZXR5Z2V0IEVcIiwgdHlwZTogXCJrbm93bGVkZ2VSZXF1aXJlbWVudHNcIiwgaXRlbXM6IGtycy5maWx0ZXIoa3IgPT4ga3IuZ3JhZGVTdGVwID09PSAnRScpfTtcclxuICAgIGNvbnN0IGFicyA9IHt0aXRsZTogXCJVcHBkYXRlcmFkZSBmw7ZybcOlZ29yXCIsIHR5cGU6IFwiYWJpbGl0aWVzXCIsIGl0ZW1zOiBPYmplY3Qua2V5cyhhYmlsaXRpZXMgfHwge30pLm1hcChpZCA9PiAoe1xyXG4gICAgICAuLi5jb3Vyc2UuYWJpbGl0aWVzLmZpbmQodCA9PiB0LmlkID09PSBpZCksXHJcbiAgICAgIC4uLmFiaWxpdGllc1tpZF19KVxyXG4gICAgKX0vLy5maWx0ZXIoKHtuYW1lfSkgPT4gISFuYW1lKX07XHJcbiAgICBjb25zdCBjY3MgPSB7dGl0bGU6IFwiVXBwZGF0ZXJhdCBjZW50cmFsdCBpbm5laMOlbGxcIiwgdHlwZTogXCJjZW50cmFsQ29udGVudFwiLCBpdGVtczogT2JqZWN0LmtleXMoY2VudHJhbENvbnRlbnQgfHwge30pLm1hcChpZCA9PiAoe1xyXG4gICAgICAuLi5jb3Vyc2UuY2VudHJhbENvbnRlbnQuZmluZChjYyA9PiBjYy5pZCA9PSBpZCksXHJcbiAgICAgIC4uLmNlbnRyYWxDb250ZW50W2lkXVxyXG4gICAgICB9KVxyXG4gICAgKX0vLy5maWx0ZXIoKHtuYW1lfSkgPT4gISFuYW1lKX07XHJcbiAgICBjb25zdCB0YWJsZXNUb1Nob3cgPSBba3JBLCBrckMsIGtyRSwgY2NzLCBhYnNdLmZpbHRlcihib3hJbmZvID0+IGJveEluZm8uaXRlbXMubGVuZ3RoID4gMCk7XHJcbiAgICBpZiAodGFibGVzVG9TaG93Lmxlbmd0aCA9PT0gMCkgcmV0dXJuIDw+Jm5ic3A7PC8+O1xyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxPcGVuQ2xvc2VCb3ggY2xhc3NOYW1lPVwibGFyZ2VyXCIgdGl0bGU9ezxkaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ3YXJuaW5nRmxhZ1wiPlxyXG4gICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtZXhjbGFtYXRpb24tdHJpYW5nbGVcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPHA+VXBwZGF0ZXJhZGUgZm9ybXVsZXJpbmdhciBmcsOlbiBTa29sdmVya2V0PC9wPlxyXG4gICAgICA8L2Rpdj59PlxyXG4gICAgICAgIHt0YWJsZXNUb1Nob3cubWFwKCh7dGl0bGUsIHR5cGUsIGl0ZW1zfSkgPT4gPGRpdiBrZXk9e3RpdGxlfT5cclxuICAgICAgICAgIDxoNT57dGl0bGV9PC9oNT5cclxuICAgICAgICAgIDx0YWJsZT5cclxuICAgICAgICAgICAgPHRoZWFkPlxyXG4gICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgIDx0aCBzdHlsZT17e3dpZHRoOiBcIjQwJVwifX0+VXJzcHJ1bmdsaWcgZm9ybXVsZXJpbmc8L3RoPlxyXG4gICAgICAgICAgICAgICAgPHRoIHN0eWxlPXt7d2lkdGg6IFwiNDAlXCJ9fT5Ta29sdmVya2V0cyBueWEgZm9ybXVsZXJpbmc8L3RoPlxyXG4gICAgICAgICAgICAgICAgPHRoPlTDpGNrZXIgdXBwZ2lmdGVuIGRlbiBueWEgZm9ybXVsZXJpbmdlbj88L3RoPlxyXG4gICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgIDwvdGhlYWQ+XHJcbiAgICAgICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgICAgICB7aXRlbXMubWFwKGl0ZW0gPT4gPHRyIGtleT17aXRlbS5pZH0+XHJcbiAgICAgICAgICAgICAgICA8dGQgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IGl0ZW0ub2xkVGV4dH19IC8+XHJcbiAgICAgICAgICAgICAgICA8dGQgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IGl0ZW0ubmFtZX19IC8+XHJcbiAgICAgICAgICAgICAgICA8dGQ+XHJcbiAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCk9PnVwZGF0ZUxpbmsoaXRlbS5pZCwgdHJ1ZSl9PkphIC0gYmVow6VsbCBrb3BwbGluZ2VuPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCk9PnVwZGF0ZUxpbmsoaXRlbS5pZCwgZmFsc2UpfT5OZWogLSB0YSBib3J0IGtvcHBsaW5nZW48L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgPC90cj4pfVxyXG4gICAgICAgICAgICA8L3Rib2R5PlxyXG4gICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICA8L2Rpdj4pfVxyXG4gICAgICA8L09wZW5DbG9zZUJveD5cclxuXHJcbiAgICApXHJcbiAgfVxyXG59IiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuZXhwb3J0IGNvbnN0IEVsbGlwc2lzTG9hZGVyID0gKCkgPT5cclxuICA8aW1nXHJcbiAgICBzdHlsZT17e2JvcmRlcjogMCwgbWFyZ2luOiAwLCBwYWRkaW5nOiAwfX1cclxuICAgIGNsYXNzTmFtZT1cImVsbGlwc2lzLWxvYWRlclwiIC8+O1xyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7S25vd2xlZGdlUmVxdWlyZW1lbnR9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgZ2V0UGFydGlhbENvbnRlbnREZWZhdWx0VmlldywgZ2V0UmVxdWlybWVudFNlbnRlbmNlcywgZ2V0Q292ZXJlZFNlbnRlY2VzLCBnZXRTYXZlZFNlbnRlbmNlcywgXHJcbiAgaXNQYXJ0aWFsQ292ZXJlZFJlcXVpcm1lbnQsIGdldE1pZ3JhdGlvblRpdGxlLCBnZXRTb3J0ZWRSZXF1aXJtZW50cywgYWxsUmVxdWlyZW1lbnRTZW50ZWNlc01hcmtlZCB9IGZyb20gJy4uL2tub3dsZWRnZS1tYXRyaXgtcGFydGlhbC11dGlscyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGtub3dsZWRnZVJlcXVpcmVtZW50czogS25vd2xlZGdlUmVxdWlyZW1lbnRbXTtcclxuICBpZHNUb01hcmtOb3RPaz86IHtbaWQ6IHN0cmluZ106IHRydWV9O1xyXG4gIGV4cGxhaW5lZFJlcXVpcmVtZW50cz86IHtbcmVxdWlyZW1lbnRJZDogc3RyaW5nXTogc3RyaW5nfVxyXG4gIHBhcnRpYWxSZXF1aXJtZW50cz86IHtbaWQ6IHN0cmluZ106IHN0cmluZ1tdfVxyXG4gIC8vIFByb3BzIHVzZWQgaW4gZWRpdCBtb2RlIChlZGl0aW5nIGNvdXJzZSB0ZW1wbGF0ZXMpXHJcbiAgLy9jb3ZlcmVkSWRzPzogc3RyaW5nW107XHJcbiAgLy8gUHJvcHMgdXNlZCBpbiBtYXJrIG1vZGUgKGVkaXRpbmcgdGFza3MpXHJcbiAgbWFya01vZGU/OiBib29sZWFuO1xyXG4gIG1hcmtlZElkcz86IHN0cmluZ1tdO1xyXG4gIG1pZ3JhdGVkSWRzPzoge1tpZDogc3RyaW5nXTogYW55fTtcclxuICBvbk1hcmtDaGFuZ2VkOiAoaWQ6IHN0cmluZywgaXNNYXJrZWQ6IGJvb2xlYW4pID0+IHZvaWQ7XHJcbiAgb25FeHBsYWluZWRSZXF1aXJlbWVudHNDaGFuZ2VkPzogKHJlcUlkOiBzdHJpbmcsIHRleHQ6IHN0cmluZykgPT4gdm9pZDtcclxuICBvblVwZGF0ZVBhcnRpYWxLbm93bGVkZ2U/OiAocmVxSWQ6IHN0cmluZywgdGV4dDogc3RyaW5nW10pID0+IHZvaWQ7XHJcbiAgbWFya0J5U2VudGVuY2VWaWV3PzogYm9vbGVhbjtcclxuICBjb3ZlcmVkUGFydGlhbFJlcXVpcm1lbnRzPzoge1tpZDogc3RyaW5nXTogc3RyaW5nW119W107XHJcbiAgbWFya1BhcnRpYWxGZWF0dXJlRW5hYmxlZD86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBLbm93bGVkZ2VNYXRyaXggZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIHt9PiB7XHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgfVxyXG5cclxuICBnZXRLbm93bGVkZ2VTZW50ZW5jZXNDb250ZW50KHJlcXVpcmVtZW50OiBLbm93bGVkZ2VSZXF1aXJlbWVudCwgcGFydGlhbFJlcXVpcm1lbnRzOiBzdHJpbmdbXSwgaW5kZXg6IG51bWJlciwgbWFya2VkT2s6IGJvb2xlYW4sIGlzTWlncmF0ZWQ6IGJvb2xlYW4pIHtcclxuICAgIGNvbnN0IHtjb3ZlcmVkUGFydGlhbFJlcXVpcm1lbnRzLCBtYXJrTW9kZX0gPSB0aGlzLnByb3BzO1xyXG4gICAgLy9zcGxpdCB0ZXh0IGluIHNlbnRlY2VzXHJcbiAgICB2YXIgdGV4dFNlbnRlbmNlcyA9IGdldFJlcXVpcm1lbnRTZW50ZW5jZXMocmVxdWlyZW1lbnQubmFtZSk7XHJcblxyXG4gICAgLy9nZXQgc2F2ZWQgc2VuY2VudGVjZXMgZm9yIHRoZSBjdXJyZW50IHJlcXVpcmVtZW50XHJcbiAgICB2YXIgcm93UmVxdWlybWVudHMgPSBwYXJ0aWFsUmVxdWlybWVudHMgJiYgZ2V0U2F2ZWRTZW50ZW5jZXMocGFydGlhbFJlcXVpcm1lbnRzKTtcclxuICAgIC8vZ2V0IGFsbCBzYXZlZCBzZW50ZWNlcyBleGNsdWRpbmcgdGhlIGN1cnJlbnQgb25lc1xyXG4gICAgdmFyIGFsbENvdmVyZWRTZW50ZW5jZVJlcSA9IGNvdmVyZWRQYXJ0aWFsUmVxdWlybWVudHMgJiYgZ2V0Q292ZXJlZFNlbnRlY2VzKGNvdmVyZWRQYXJ0aWFsUmVxdWlybWVudHMsIHJlcXVpcmVtZW50LmlkKTtcclxuXHJcbiAgICByZXR1cm4gPHRkIGtleT17aW5kZXh9IHRpdGxlPXtnZXRNaWdyYXRpb25UaXRsZShpc01pZ3JhdGVkLCBtYXJrTW9kZSl9Pnt0ZXh0U2VudGVuY2VzLm1hcCgoc2VudGVuY2UsIGspID0+IHtcclxuICAgICAgdmFyIHRyaW1tZWRTZW50ZW5jZSA9IHNlbnRlbmNlLnRyaW0oKTtcclxuICAgICAgdmFyIGhhc1ZhbHVlID0gcm93UmVxdWlybWVudHMgJiYgcm93UmVxdWlybWVudHMuaW5jbHVkZXModHJpbW1lZFNlbnRlbmNlKSB8fCBtYXJrZWRPayAmJiAhcm93UmVxdWlybWVudHM7XHJcbiAgICAgIHZhciBzZW50ZW5jZU5vdE1hcmtlZCA9ICFhbGxDb3ZlcmVkU2VudGVuY2VSZXEuaW5jbHVkZXModHJpbW1lZFNlbnRlbmNlKTtcclxuXHJcbiAgICAgIHJldHVybiA8c3BhbiBrZXk9e2t9IGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7IF9faHRtbDogc2VudGVuY2UgPyBzZW50ZW5jZSArIFwiLlwiIDogXCJcIiB9fVxyXG4gICAgICAgIGNsYXNzTmFtZT17XCJzZWxlY3RhYmxlXCIgKyAoaGFzVmFsdWUgPyBcIiBtYXJrZWRHcmVlblwiIDogKHNlbnRlbmNlTm90TWFya2VkID8gXCIgbWFya2VkUmVkXCIgOiBcIlwiKSl9XHJcbiAgICAgICAgb25DbGljaz17KCkgPT4ge1xyXG4gICAgICAgICAgdmFyIHVwZGF0ZWRSZXF1aXJtZW50cyA9IHBhcnRpYWxSZXF1aXJtZW50cyA/IE9iamVjdC5hc3NpZ24oW10sIHBhcnRpYWxSZXF1aXJtZW50cykgOiBbXTtcclxuICAgICAgICAgIHZhciBzaG91bGRCZVJlbW92ZWQgPSByb3dSZXF1aXJtZW50cyAmJiByb3dSZXF1aXJtZW50cy5pbmNsdWRlcyh0cmltbWVkU2VudGVuY2UpO1xyXG4gICAgICAgICAgLy9jaGVjayBpZiBubyBwYXJ0aWFsIGRhdGEgc2F2ZWQsIGJ1dCB0aGUgcmVxdWlybWVudCBpcyBtYXJrZWRPa1xyXG4gICAgICAgICAgaWYgKG1hcmtlZE9rICYmICghcm93UmVxdWlybWVudHMgfHwgcm93UmVxdWlybWVudHMubGVuZ3RoID09IDApKSB7XHJcbiAgICAgICAgICAgIC8vc2F2ZSBhbGwgZXhjZXB0aW5nIHRoZSBvbmUgdGhhdCBzaG91bGQgYmUgcmVtb3ZlZFxyXG4gICAgICAgICAgICB1cGRhdGVkUmVxdWlybWVudHMgPSB0ZXh0U2VudGVuY2VzLmZpbHRlcih4ID0+IHggIT0gc2VudGVuY2UpO1xyXG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uVXBkYXRlUGFydGlhbEtub3dsZWRnZShyZXF1aXJlbWVudC5pZCwgZ2V0U29ydGVkUmVxdWlybWVudHModGV4dFNlbnRlbmNlcywgdXBkYXRlZFJlcXVpcm1lbnRzKSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoc2hvdWxkQmVSZW1vdmVkKSB7XHJcbiAgICAgICAgICAgICAgdXBkYXRlZFJlcXVpcm1lbnRzID0gcGFydGlhbFJlcXVpcm1lbnRzLmZpbHRlcihyZXEgPT4gcmVxICE9IHNlbnRlbmNlKVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHVwZGF0ZWRSZXF1aXJtZW50cy5wdXNoKHNlbnRlbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uVXBkYXRlUGFydGlhbEtub3dsZWRnZShyZXF1aXJlbWVudC5pZCwgZ2V0U29ydGVkUmVxdWlybWVudHModGV4dFNlbnRlbmNlcywgdXBkYXRlZFJlcXVpcm1lbnRzKSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9fT48L3NwYW4+XHJcbiAgICB9KX08L3RkPlxyXG4gIH1cclxuXHJcbiAgb25SZXF1aXJlbWVudENoYW5nZWQocmVxdWlyZW1lbnQ6IEtub3dsZWRnZVJlcXVpcmVtZW50LCB2YWx1ZTogYm9vbGVhbiwgcGFydGlhbFZhbHVlczogc3RyaW5nW10sIGFsbFBhcnRpYWxNYXJrZWQ6IGJvb2xlYW4pIHtcclxuICAgIGlmICh0aGlzLnByb3BzLm9uVXBkYXRlUGFydGlhbEtub3dsZWRnZSkge1xyXG4gICAgICAvL3JlbW92ZSBhbGwgc2F2ZWQgc2VudGVjZXMgaWYgdGhlIHJlcXVpcmVtZW50IGlzIHVuY2hlY2tlZFxyXG4gICAgICAodmFsdWUgJiYgIXBhcnRpYWxWYWx1ZXMgfHwgYWxsUGFydGlhbE1hcmtlZCkgPyB0aGlzLnByb3BzLm9uVXBkYXRlUGFydGlhbEtub3dsZWRnZShyZXF1aXJlbWVudC5pZCwgW10pIDogdGhpcy5wcm9wcy5vblVwZGF0ZVBhcnRpYWxLbm93bGVkZ2UocmVxdWlyZW1lbnQuaWQsIGdldFJlcXVpcm1lbnRTZW50ZW5jZXMocmVxdWlyZW1lbnQubmFtZSkpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnByb3BzLm9uTWFya0NoYW5nZWQocmVxdWlyZW1lbnQuaWQsICF2YWx1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7IGtub3dsZWRnZVJlcXVpcmVtZW50cywgbWFya2VkSWRzLCBtaWdyYXRlZElkcywgZXhwbGFpbmVkUmVxdWlyZW1lbnRzLCBtYXJrQnlTZW50ZW5jZVZpZXcsIG1hcmtQYXJ0aWFsRmVhdHVyZUVuYWJsZWR9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IHsgaWRzVG9NYXJrTm90T2ssIG1hcmtNb2RlLCBvbkV4cGxhaW5lZFJlcXVpcmVtZW50c0NoYW5nZWQsIHBhcnRpYWxSZXF1aXJtZW50cywgY292ZXJlZFBhcnRpYWxSZXF1aXJtZW50cyB9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICBjb25zdCBjb2x1bW5zID0gW1wiRVwiLCBcIkNcIiwgXCJBXCJdO1xyXG4gICAgY29uc3Qgcm93czogS25vd2xlZGdlUmVxdWlyZW1lbnRbXVtdID0gW107XHJcbiAgICBjb25zdCByZXFzID0ga25vd2xlZGdlUmVxdWlyZW1lbnRzLnNsaWNlKCk7XHJcbiAgICBsZXQgcm93OiBLbm93bGVkZ2VSZXF1aXJlbWVudFtdIHwgbnVsbCA9IG51bGw7XHJcbiAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICByb3cgPSBjb2x1bW5zLm1hcChncmFkZSA9PiB7XHJcbiAgICAgICAgY29uc3QgcE5leHQgPSByZXFzLmZpbmRJbmRleChyID0+IHIuZ3JhZGVTdGVwICYmIHIuZ3JhZGVTdGVwLnRvVXBwZXJDYXNlKCkgPT09IGdyYWRlKTtcclxuICAgICAgICBpZiAocE5leHQgPCAwKSByZXR1cm4gbnVsbDtcclxuICAgICAgICBjb25zdCBydiA9IHJlcXNbcE5leHRdO1xyXG4gICAgICAgIHJlcXMuc3BsaWNlKHBOZXh0LCAxKTtcclxuICAgICAgICByZXR1cm4gcnY7XHJcbiAgICAgIH0pO1xyXG4gICAgICBpZiAocm93LmV2ZXJ5KHIgPT4gciA9PT0gbnVsbCkpXHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIHJvd3MucHVzaChyb3cpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiA8dGFibGUgY2xhc3NOYW1lPVwia25vd2xlZGdlLW1hdHJpeFwiPlxyXG4gICAgICAgIDx0aGVhZD5cclxuICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAge2NvbHVtbnMubWFwKGMgPT4gPHRoIGtleT17Y30+e2N9PC90aD4pfVxyXG4gICAgICAgICAgPC90cj5cclxuICAgICAgICA8L3RoZWFkPlxyXG4gICAgICAgIDx0Ym9keT5cclxuICAgICAgICAgIHtyb3dzLm1hcCgocm93LGkpID0+IDxSZWFjdC5GcmFnbWVudCBrZXk9e2l9PlxyXG4gICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAge3Jvdy5tYXAoKHJlcXVpcmVtZW50LGopID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzTWFya2VkT0sgPSByZXF1aXJlbWVudCAmJiBtYXJrZWRJZHMgJiYgbWFya2VkSWRzLmluZGV4T2YocmVxdWlyZW1lbnQuaWQpID49IDA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc01hcmtlZE5vdE9LID0gcmVxdWlyZW1lbnQgJiYgaWRzVG9NYXJrTm90T2sgJiYgaWRzVG9NYXJrTm90T2tbcmVxdWlyZW1lbnQuaWRdOy8vbm90IHVzZWQgYW55bW9yZVxyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNNaWdyYXRlZCA9IHJlcXVpcmVtZW50ICYmIG1pZ3JhdGVkSWRzICYmICEhbWlncmF0ZWRJZHNbcmVxdWlyZW1lbnQuaWRdO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJvd1BhcnRpYWxSZXF1aXJlbWVudHMgPSBwYXJ0aWFsUmVxdWlybWVudHMgJiYgcGFydGlhbFJlcXVpcm1lbnRzW3JlcXVpcmVtZW50LmlkXTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJ0aWFsVmFsdWVzID0gcm93UGFydGlhbFJlcXVpcmVtZW50cyAmJiBnZXRTYXZlZFNlbnRlbmNlcyhyb3dQYXJ0aWFsUmVxdWlyZW1lbnRzKTtcclxuICAgICAgICAgICAgICAgIHZhciBhbGxSZXFTZW50ZW5jZXNNYXJrZWQgPSBhbGxSZXF1aXJlbWVudFNlbnRlY2VzTWFya2VkKHJlcXVpcmVtZW50Lm5hbWUsIHBhcnRpYWxWYWx1ZXMpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB2YXIgaGFzUGFydGlhbENvdmVyZWQgPSBpc1BhcnRpYWxDb3ZlcmVkUmVxdWlybWVudChyZXF1aXJlbWVudCwgY292ZXJlZFBhcnRpYWxSZXF1aXJtZW50cyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWFya2VkUmVkID0gIShwYXJ0aWFsVmFsdWVzICYmIHBhcnRpYWxWYWx1ZXMubGVuZ3RoID4gMCB8fCBoYXNQYXJ0aWFsQ292ZXJlZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hcmtCeVNlbnRlbmNlVmlldyAmJiBtYXJrUGFydGlhbEZlYXR1cmVFbmFibGVkID8gdGhpcy5nZXRLbm93bGVkZ2VTZW50ZW5jZXNDb250ZW50KHJlcXVpcmVtZW50LCByb3dQYXJ0aWFsUmVxdWlyZW1lbnRzLCBqLCBpc01hcmtlZE9LLCBpc01pZ3JhdGVkKSA6XHJcbiAgICAgICAgICAgICAgICA8dGRcclxuICAgICAgICAgICAgICAgICAga2V5PXtqfVxyXG4gICAgICAgICAgICAgICAgICBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogcmVxdWlyZW1lbnQgPyAocm93UGFydGlhbFJlcXVpcmVtZW50cyAmJiByb3dQYXJ0aWFsUmVxdWlyZW1lbnRzLmxlbmd0aCB8fCBoYXNQYXJ0aWFsQ292ZXJlZCkgPyBcclxuICAgICAgICAgICAgICAgICAgICBnZXRQYXJ0aWFsQ29udGVudERlZmF1bHRWaWV3KHJlcXVpcmVtZW50LCByb3dQYXJ0aWFsUmVxdWlyZW1lbnRzLCBjb3ZlcmVkUGFydGlhbFJlcXVpcm1lbnRzLCBtYXJrZWRSZWQpIDogcmVxdWlyZW1lbnQubmFtZSA6IFwiXCJ9fVxyXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9eyhtYXJrTW9kZSA/IFwic2VsZWN0YWJsZVwiIDogXCJcIikgK1xyXG4gICAgICAgICAgICAgICAgICAoaXNNaWdyYXRlZCA/IFwiIG1pZ3JhdGVkXCIgOiBcIlwiKSArXHJcbiAgICAgICAgICAgICAgICAgIChpc01hcmtlZE9LICYmICghcm93UGFydGlhbFJlcXVpcmVtZW50cyB8fCBhbGxSZXFTZW50ZW5jZXNNYXJrZWQpP1xyXG4gICAgICAgICAgICAgICAgICAgIFwiIG1hcmtlZEdyZWVuXCIgOlxyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlZFJlZCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICBcIiBtYXJrZWRSZWRcIjpcclxuICAgICAgICAgICAgICAgICAgICAgIFwiXCIpfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e21hcmtNb2RlICYmIHJlcXVpcmVtZW50ID9cclxuICAgICAgICAgICAgICAgICAgICAgICgpPT50aGlzLm9uUmVxdWlyZW1lbnRDaGFuZ2VkKHJlcXVpcmVtZW50LCBpc01hcmtlZE9LLCBwYXJ0aWFsVmFsdWVzLCBhbGxSZXFTZW50ZW5jZXNNYXJrZWQpIDpcclxuICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZH1cclxuICAgICAgICAgICAgICAgICAgICB0aXRsZT17Z2V0TWlncmF0aW9uVGl0bGUoaXNNaWdyYXRlZCwgbWFya01vZGUpfSAvPlxyXG4gICAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICB7ZXhwbGFpbmVkUmVxdWlyZW1lbnRzICYmIDx0cj5cclxuICAgICAgICAgICAgICB7cm93Lm1hcCgocmVxdWlyZW1lbnQsaikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnRpYWxTZW50ZW5jZXMgPSBwYXJ0aWFsUmVxdWlybWVudHMgJiYgcGFydGlhbFJlcXVpcm1lbnRzW3JlcXVpcmVtZW50LmlkXSAmJiBnZXRTYXZlZFNlbnRlbmNlcyhwYXJ0aWFsUmVxdWlybWVudHNbcmVxdWlyZW1lbnQuaWRdKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzTWFya2VkT0sgPSByZXF1aXJlbWVudCAmJiBtYXJrZWRJZHMgJiYgbWFya2VkSWRzLmluZGV4T2YocmVxdWlyZW1lbnQuaWQpID49IDAgfHwgcGFydGlhbFNlbnRlbmNlcyAmJiBwYXJ0aWFsU2VudGVuY2VzLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gPHRkIGtleT17an0+XHJcbiAgICAgICAgICAgICAgICAgIHtpc01hcmtlZE9LID8gPHRleHRhcmVhXHJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9e0xgQmVza3JpdiBrcmF2ZXRgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImlucHV0VGV4dEJveCBpbnB1dFRleHRMYXJnZVwiIHN0eWxlPXt7d2lkdGg6IFwiMTAwJVwifX1cclxuICAgICAgICAgICAgICAgICAgICByZWFkT25seT17IW1hcmtNb2RlfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXtleHBsYWluZWRSZXF1aXJlbWVudHNbcmVxdWlyZW1lbnQuaWRdIHx8IFwiXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e29uRXhwbGFpbmVkUmVxdWlyZW1lbnRzQ2hhbmdlZCAmJiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICBldiA9PiBvbkV4cGxhaW5lZFJlcXVpcmVtZW50c0NoYW5nZWQocmVxdWlyZW1lbnQuaWQsIGV2LnRhcmdldC52YWx1ZSkpfVxyXG4gICAgICAgICAgICAgICAgICAvPiA6IHVuZGVmaW5lZH1cclxuICAgICAgICAgICAgICAgICAgPC90ZD59KX1cclxuICAgICAgICAgICAgPC90cj59XHJcbiAgICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XHJcbiAgICAgICAgICApfVxyXG4gICAgICAgIDwvdGJvZHk+XHJcbiAgICAgIDwvdGFibGU+XHJcblxyXG4gICAgey8qcmV0dXJuIDxkaXY+XHJcbiAgICAgIDx0YWJsZT5cclxuICAgICAgICA8dGhlYWQ+XHJcbiAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgIDx0aD5FPC90aD5cclxuICAgICAgICAgICAgPHRoPkM8L3RoPlxyXG4gICAgICAgICAgICA8dGg+QTwvdGg+XHJcbiAgICAgICAgICA8L3RyPlxyXG4gICAgICAgIDwvdGhlYWQ+XHJcbiAgICAgICAgPHRib2R5PlxyXG4gICAgICAgICAge3Rib2R5Lm1hcCgocm93LCBpKSA9PiBcclxuICAgICAgICAgIDx0ciBrZXk9e2l9Pntyb3cubWFwKChjZWxsLCBqKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzTWFya2VkT0sgPSBwcm9wcy5tYXJrZWRJZHMgJiYgcHJvcHMubWFya2VkSWRzLmluZGV4T2YoY2VsbC5pZCkgPj0gMDtcclxuICAgICAgICAgICAgY29uc3QgaXNNYXJrZWROb3RPSyA9IHByb3BzLmlkc1RvTWFya05vdE9rICYmIHByb3BzLmlkc1RvTWFya05vdE9rW2NlbGwuaWRdO1xyXG4gICAgICAgICAgICByZXR1cm4gPHRkXHJcbiAgICAgICAgICAgICAga2V5PXtqfVxyXG4gICAgICAgICAgICAgIHJvd1NwYW49e2NlbGwucm93U3Bhbn1cclxuICAgICAgICAgICAgICBjbGFzc05hbWU9eyhwcm9wcy5tYXJrTW9kZSA/IFwic2VsZWN0YWJsZVwiIDogXCJcIikgK1xyXG4gICAgICAgICAgICAgICAgKGlzTWFya2VkT0sgP1xyXG4gICAgICAgICAgICAgICAgICBcIiBtYXJrZWRHcmVlblwiIDpcclxuICAgICAgICAgICAgICAgICAgKGlzTWFya2VkTm90T0sgP1xyXG4gICAgICAgICAgICAgICAgICAgIFwiIG1hcmtlZFJlZFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIFwiXCIpKX1cclxuICAgICAgICAgICAgICBvbkNsaWNrPXtwcm9wcy5tYXJrTW9kZSAmJiAoKCk9PnByb3BzLm9uTWFya0NoYW5nZWQoY2VsbC5pZCwgIWlzTWFya2VkT0spKX0+XHJcbiAgICAgICAgICAgICAge2NlbGwuaHRtbCAmJiA8ZGl2IHN0eWxlPXt7cG9zaXRpb246ICdyZWxhdGl2ZSd9fT5cclxuICAgICAgICAgICAgICAgIDxwXHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2VsbC50eXBlID09PSAnYWJpbGl0eScgPyAnYWJpbGl0eVRleHQnIDogJ2NyaXRlcmlhVGV4dCd9XHJcbiAgICAgICAgICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7X19odG1sOiBjZWxsLmh0bWx9fSAvPlxyXG4gICAgICAgICAgICAgICAge3Byb3BzLmVkaXRNb2RlICYmIDxSZW1vdmVJdGVtIGNsYXNzTmFtZT1cInVwcGVyUmlnaHRcIiBvbkNsaWNrPXsoKT0+XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2VsbElkcyhcclxuICAgICAgICAgICAgICAgICAgICBjZWxsLnR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgY2VsbC5yb3dJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldENlbGxJZHMoXHJcbiAgICAgICAgICAgICAgICAgICAgICBjZWxsLnR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICBjZWxsLnJvd0luZGV4KS5maWx0ZXIoaWQgPT4gaWQgIT0gY2VsbC5pZCkgKX0gLz4gfVxyXG4gICAgICAgICAgICAgIDwvZGl2Pn1cclxuICAgICAgICAgICAgPC90ZD59KX1cclxuICAgICAgICAgIDwvdHI+KX1cclxuICAgICAgICA8L3Rib2R5PlxyXG4gICAgICA8L3RhYmxlPlxyXG4gICAgPC9kaXY+Ki99XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgTCB9IGZyb20gXCIuLi8uLi8uLi91dGlscy91dGlsc1wiO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBvbkNsaWNrLFxyXG4gIGNsYXNzTmFtZT8sXHJcbiAgc3R5bGU/LFxyXG4gIHRpdGxlP1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IFJlbW92ZUl0ZW0gPSAoeyBvbkNsaWNrLCBjbGFzc05hbWUsIHN0eWxlLCB0aXRsZSB9OiBQcm9wcykgPT5cclxuXHJcbiAgPGRpdlxyXG4gICAgdGl0bGU9e3RpdGxlIHx8IExgUmFkZXJhYH1cclxuICAgIGNsYXNzTmFtZT17XCJyZW1vdmVJdGVtIFwiICsgKGNsYXNzTmFtZSB8fCBcIlwiKX1cclxuICAgIG9uQ2xpY2s9e29uQ2xpY2t9IHN0eWxlPXtzdHlsZX0gLz5cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBDb3Vyc2UsIENvdXJzZU1vZHVsZSwgVGFzaywgRG9jdW1lbnQgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IE9wZW5DbG9zZUJveCB9IGZyb20gXCIuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvb3Blbi1jbG9zZS1ib3hcIjtcclxuaW1wb3J0IHsgYXJyYXlUb0xvb2t1cCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgZ2V0VW5jb3ZlcmVkS25vd2xlZGdlUmVxdWlyZW1lbnRzIH0gZnJvbSAnLi4vY291cnNlcy9idXNpbmVzcy1sb2dpYyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIG9wdGlvbnM6IChEb2N1bWVudCAmIHtncm91cD86IHN0cmluZ30pW107XHJcbiAgdGl0bGU7XHJcbiAgbWFya01vZGU6IGJvb2xlYW47XHJcbiAgbWFya2VkSWRzOiBzdHJpbmdbXTtcclxuICBtaWdyYXRlZElkcz86IHtbaWQ6IHN0cmluZ106IGFueX07XHJcbiAgdW5jb3ZlcmVkSWRzPzoge1tpZDogc3RyaW5nXTogdHJ1ZX07XHJcbiAgb25NYXJrQ2hhbmdlZDogKGlkOiBzdHJpbmcsIGlzTWFya2VkOiBib29sZWFuKSA9PiB2b2lkO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU2VsZWN0UmVsYXRlZERvY3MgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsU3RhdGU+IHtcclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7fTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHtvcHRpb25zLCB0aXRsZSwgbWFya2VkSWRzLCBtYXJrTW9kZSwgbWlncmF0ZWRJZHMsIHVuY292ZXJlZElkc30gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3QgZ3JvdXBlZE9wdGlvbnMgPSBhcnJheVRvTG9va3VwKG9wdGlvbnMsIGQgPT4gZC5ncm91cCB8fCBcImRlZmF1bHRcIik7XHJcbiAgICBjb25zdCBncm91cHMgPSBPYmplY3Qua2V5cyhncm91cGVkT3B0aW9ucyk7XHJcbiAgICByZXR1cm4gPE9wZW5DbG9zZUJveCB0aXRsZT17PHA+e3RpdGxlfTwvcD59IGNsYXNzTmFtZT1cImxhcmdlclwiPlxyXG4gICAgICAgIHtncm91cHMubWFwKGdyb3VwID0+IDxSZWFjdC5GcmFnbWVudCBrZXk9e2dyb3VwfT5cclxuICAgICAgICAgIHtncm91cHMubGVuZ3RoID09PSAxID8gbnVsbCA6IDw+PGJyLz48aDU+e2dyb3VwfTwvaDU+PGhyLz48Lz59XHJcbiAgICAgICAgICB7Z3JvdXBlZE9wdGlvbnNbZ3JvdXBdLm1hcChvcHRpb24gPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpc01hcmtlZCA9IG1hcmtlZElkcy5zb21lKHggPT4geCA9PT0gb3B0aW9uLmlkKTtcclxuICAgICAgICAgICAgY29uc3QgaXNNaWdyYXRlZCA9IG1pZ3JhdGVkSWRzICYmICEhbWlncmF0ZWRJZHNbb3B0aW9uLmlkXTtcclxuICAgICAgICAgICAgY29uc3QgaXNVbmNvdmVyZWQgPSB1bmNvdmVyZWRJZHMgJiYgdW5jb3ZlcmVkSWRzW29wdGlvbi5pZF07XHJcbiAgICAgICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIiBrZXk9e29wdGlvbi5pZH0gb25DbGljaz17KCk9PlxyXG4gICAgICAgICAgICAgIG1hcmtNb2RlICYmIHRoaXMucHJvcHMub25NYXJrQ2hhbmdlZChvcHRpb24uaWQsICFpc01hcmtlZCl9PlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtcImhvcml6b250YWxJdGVtIHRvcCBzcGFjZWRcIiArXHJcbiAgICAgICAgICAgICAgICAobWFya01vZGUgPyBcIiBzZWxlY3RhYmxlXCIgOiBcIlwiKSArXHJcbiAgICAgICAgICAgICAgICAoaXNNYXJrZWQgPyBcIiBtYXJrZWRHcmVlblwiIDogKGlzVW5jb3ZlcmVkID9cclxuICAgICAgICAgICAgICAgICAgXCIgbWFya2VkUmVkXCI6XHJcbiAgICAgICAgICAgICAgICAgIFwiXCIpKSArXHJcbiAgICAgICAgICAgICAgICAoaXNNaWdyYXRlZCA/IFwiIG1pZ3JhdGVkXCIgOiBcIlwiKX1cclxuICAgICAgICAgICAgICAgIHRpdGxlPXtpc01pZ3JhdGVkID9cclxuICAgICAgICAgICAgICAgICAgbWFya01vZGUgP1xyXG4gICAgICAgICAgICAgICAgICAgIGBTa29sdmVya2V0IGhhciB1cHBkYXRlcmF0IHRleHRlbnMgZm9ybXVsZXJpbmcuIER1IGthbiBncmFuc2thIMOkbmRyaW5nZW4gZ2Vub20gYXR0IGbDpGxsYSB1dCB2YXJuaW5nc2JveGVuIHRpbGwgaMO2Z2VyLCBtZWQgdGl0ZWwgXCJVcHBkYXRlcmFkZSBmb3JtdWxlcmluZ2FyIGZyw6VuIFNrb2x2ZXJrZXRcImAgOlxyXG4gICAgICAgICAgICAgICAgICAgIGBTa29sdmVya2V0IGhhciB1cHBkYXRlcmF0IHRleHRlbnMgZm9ybXVsZXJpbmcsIG1lbiBkZXR0YSBoYXIgw6RubnUgaW50ZSBncmFuc2thdHMgYXYgdXBwZ2lmdGVucyByZWRpZ2VyaW5nc2JlaMO2cmlnZWAgOlxyXG4gICAgICAgICAgICAgICAgICB1bmRlZmluZWR9PlxyXG4gICAgICAgICAgICAgICAgPHAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IG9wdGlvbi5uYW1lfX0gLz5cclxuICAgICAgICAgICAgICAgIDxiciAvPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj47XHJcbiAgICAgICAgICB9KX1cclxuICAgICAgICA8L1JlYWN0LkZyYWdtZW50Pil9XHJcbiAgICA8L09wZW5DbG9zZUJveD5cclxuICB9XHJcbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcblxyXG5leHBvcnQgY29uc3QgU3Bpbm5lciA9ICgpPT4gPHNwYW4+PGkgY2xhc3NOYW1lPVwiZmEgZmEtc3Bpbm5lciBmYS1zcGluXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPiZuYnNwOzwvc3Bhbj47XHJcbiIsImltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuaW1wb3J0IHsgTCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgRG9jdW1lbnQsIFJlc291cmNlLCBNb2RpZmljYXRpb25UcmFja2VkLCBDb3Vyc2UsIFRhc2ssIFNvZnREb2N1bWVudEFjY2VzcyB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgQmF0Y2hSdW5uZXIsIGNyZWF0ZVVVSUQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB1cGRhdGUgZnJvbSAncmVhY3QtYWRkb25zLXVwZGF0ZSc7XHJcbmltcG9ydCB7IFVzZXIgfSBmcm9tICcuLi8uLi9jb250cmFjdHMva2VkLW1vZGVscyc7XHJcbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgZ2V0Rmlyc3RBbmRMYXN0V2Vla09mVGVybSB9IGZyb20gJy4uLy4uL3V0aWxzL3NjaG9vbC1tb21lbnQnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZURvY3VtZW50R3JhcGhzKG9sZERvYywgbmV3RG9jLCB0YWJsZTogc3RyaW5nLCBncmFwaHM6IHsgW2xhYmVsOiBzdHJpbmddOiBzdHJpbmcgfSwgYmF0Y2g6IEJhdGNoUnVubmVyKSB7XHJcbiAgY29uc3QgZG9jVXBkYXRlcyA9IHt9O1xyXG4gIGNvbnN0IGRvY0lkID0gbmV3RG9jLmlkO1xyXG4gIGZvciAobGV0IG5hdlByb3Agb2YgT2JqZWN0LmtleXMoZ3JhcGhzKSkge1xyXG4gICAgY29uc3QgZm9yZWlnblRhYmxlID0gZ3JhcGhzW25hdlByb3BdO1xyXG4gICAgY29uc3Qgb2xkTGlzdDogRG9jdW1lbnRbXSA9IG9sZERvY1tuYXZQcm9wXSB8fCBbXTtcclxuICAgIGNvbnN0IG5ld0xpc3Q6IERvY3VtZW50W10gPSBuZXdEb2NbbmF2UHJvcF07XHJcbiAgICBpZiAoIW5ld0xpc3QpIGNvbnRpbnVlO1xyXG4gICAgY29uc3QgdHVwbGVzID0gbmV3TGlzdFxyXG4gICAgICAubWFwKChkb2MsIGlkeCk9Pih7ZG9jLCBpZHh9KSk7IC8vIENyZWF0ZSB0dWJsZXMgb2Yge2RvYywgYXJyYXktaW5kZXh9IHNvIHdlIGNhbiB1cGRhdGUgcmVzdWx0XHJcbiAgICBjb25zdCBhZGRlZCA9IHR1cGxlcy5maWx0ZXIodHVwbGUgPT4gIW9sZExpc3Quc29tZShvID0+IG8uaWQgPT09IHR1cGxlLmRvYy5pZCkpOyAvLyBGaW5kIGFkZGVkIGl0ZW1zXHJcblxyXG4gICAgZm9yIChsZXQgYSBvZiBhZGRlZCkge1xyXG4gICAgICBjb25zdCBtdXRhdGVkU3ViRG9jID0gey4uLmEuZG9jfTtcclxuICAgICAgY29uc3QgbWV0YSA9IG11dGF0ZWRTdWJEb2MuJG1ldGE7XHJcbiAgICAgIGRlbGV0ZSBtdXRhdGVkU3ViRG9jLiRtZXRhOyAvLyBEZWxldGUgJG1ldGEgc28gdGhhdCBcImFkZFwiIG9yIFwidXBkYXRlXCIgZG9lcyBub3QgcGVyc2lzdGUgdG8gbmV4dCBzdGF0ZS5cclxuICAgICAgaWYgKG1ldGEgPT09ICdhZGQnKSB7XHJcbiAgICAgICAgaWYgKCFtdXRhdGVkU3ViRG9jLmlkKSBtdXRhdGVkU3ViRG9jLmlkID0gY3JlYXRlVVVJRCgpOyAvLyBHZW5lcmF0ZSBJRCBpZiBub3QgZG9uZSB5ZXQuXHJcbiAgICAgICAgLy8gTm93IHB1dCBhbiAnYWRkJyBtdXRhdGlvbiBpbiB0aGUgYmF0Y2ggcXVldWUuXHJcbiAgICAgICAgYmF0Y2guYWRkKGZvcmVpZ25UYWJsZSwgbXV0YXRlZFN1YkRvYyk7XHJcbiAgICAgIH0gZWxzZSBpZiAobWV0YSA9PT0gJ3VwZGF0ZScpIHtcclxuICAgICAgICBiYXRjaC5wdXQoZm9yZWlnblRhYmxlLCBtdXRhdGVkU3ViRG9jKTtcclxuICAgICAgfVxyXG4gICAgICBiYXRjaC5saW5rKHRhYmxlLCBkb2NJZCwgZm9yZWlnblRhYmxlLCBtdXRhdGVkU3ViRG9jLmlkLCBuYXZQcm9wKTtcclxuXHJcbiAgICAgIC8vIFVwZGF0ZSByZXN1bHQgc28gdGhhdCBzdGF0ZSBpcyByZWZsZWN0ZWQgYWZ0ZXIgc3VjY2VzZnVsIFBPU1QgdG8gc2VydmVyLlxyXG4gICAgICBpZiAoIWRvY1VwZGF0ZXNbbmF2UHJvcF0pIGRvY1VwZGF0ZXNbbmF2UHJvcF0gPSB7fTtcclxuICAgICAgZG9jVXBkYXRlc1tuYXZQcm9wXVthLmlkeF0gPSB7JHNldDogbXV0YXRlZFN1YkRvY307XHJcbiAgICB9XHJcbiAgICBjb25zdCByZW1vdmVkID0gb2xkTGlzdC5maWx0ZXIobyA9PiAhbmV3TGlzdC5zb21lKG4gPT4gbi5pZCA9PT0gby5pZCkpO1xyXG4gICAgZm9yIChsZXQgciBvZiByZW1vdmVkKSB7XHJcbiAgICAgIGJhdGNoLnVubGluayh0YWJsZSwgZG9jSWQsIGZvcmVpZ25UYWJsZSwgci5pZCwgbmF2UHJvcCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCB1cGRhdGVkID0gdHVwbGVzLmZpbHRlcih0dXBsZSA9PiBvbGRMaXN0LnNvbWUobyA9PiBvLmlkID09PSB0dXBsZS5kb2MuaWQgJiYgdHVwbGUuZG9jLiRtZXRhID09PSAndXBkYXRlJykpO1xyXG4gICAgZm9yIChsZXQgdSBvZiB1cGRhdGVkKSB7XHJcbiAgICAgIGNvbnN0IG11dGF0ZWRTdWJEb2MgPSB7Li4udS5kb2N9O1xyXG4gICAgICBkZWxldGUgbXV0YXRlZFN1YkRvYy4kbWV0YTtcclxuICAgICAgYmF0Y2gucHV0KGZvcmVpZ25UYWJsZSwgbXV0YXRlZFN1YkRvYyk7XHJcblxyXG4gICAgICAvLyBVcGRhdGUgcmVzdWx0IHNvIHRoYXQgJG1ldGEgaXMgcmVtb3ZlZCBmcm9tIG5hdmlnYXRpb24gcHJvcCBhZnRlciBzdWNjZXNzZnVsIFBPU1QgdG8gc2VydmVyLlxyXG4gICAgICBpZiAoIWRvY1VwZGF0ZXNbbmF2UHJvcF0pIGRvY1VwZGF0ZXNbbmF2UHJvcF0gPSB7fTtcclxuICAgICAgZG9jVXBkYXRlc1tuYXZQcm9wXVt1LmlkeF0gPSB7JHNldDogbXV0YXRlZFN1YkRvY307XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiB1cGRhdGUobmV3RG9jLCBkb2NVcGRhdGVzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGR0Rm9ybWF0KGRhdGVUaW1lOiBudW1iZXIgfCBEYXRlIHwgbW9tZW50Lk1vbWVudCkge1xyXG4gIHJldHVybiBtb21lbnQoZGF0ZVRpbWUpLmZvcm1hdCgnWVlNTUREIEhIOm1tJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzaG9ydERhdGVGb3JtYXQoZGF0ZVRpbWU6IG51bWJlciB8IERhdGUgfCBtb21lbnQuTW9tZW50KSB7XHJcbiAgcmV0dXJuIG1vbWVudChkYXRlVGltZSkuZm9ybWF0KCdZWU1NREQnKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3J0UGVyc29uTmFtZUZvcm1hdChuYW1lOiBzdHJpbmcpIHtcclxuICBpZiAoIW5hbWUpIHJldHVybiBcIlwiO1xyXG4gIGNvbnN0IG5hbWVzID0gbmFtZS5zcGxpdCgnICcpLmZpbHRlcihuID0+ICEhbik7XHJcbiAgY29uc3QgbGFzdE5hbWUgPSBuYW1lcy5wb3AoKTtcclxuICByZXR1cm4gbmFtZXMubWFwKG5hbWUgPT4gYCR7bmFtZVswXX0uYCkuY29uY2F0KGxhc3ROYW1lKS5qb2luKCcgJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVNb2RpZmljYXRpb25TdGFtcCAobm93OiBudW1iZXIsIG9iajogTW9kaWZpY2F0aW9uVHJhY2tlZCwgdXNlcjogVXNlcikge1xyXG4gIHJldHVybiB1cGRhdGUob2JqLCB7XHJcbiAgICBkYXRlVGltZTogeyRzZXQ6IG5vd30sIC8vIEZvciBxdWVyaWVzLi4uXHJcbiAgICBtb2RpZmllZERhdGU6IHskc2V0OiBub3d9LFxyXG4gICAgbW9kaWZpZWRCeToge1xyXG4gICAgICAkc2V0OiB7XHJcbiAgICAgICAgbmFtZTogdXNlci5kaXNwbGF5TmFtZSxcclxuICAgICAgICB1cmw6IFwibWFpbHRvOlwiICsgdXNlci5tYWlsXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUNyZWF0aW9uU3RhbXA8VCBleHRlbmRzIE1vZGlmaWNhdGlvblRyYWNrZWQ+IChub3c6IG51bWJlciwgb2JqOiBULCB1c2VyOiBVc2VyKTogVCB7XHJcbiAgcmV0dXJuIHVwZGF0ZShvYmosIHtcclxuICAgIGNyZWF0ZWREYXRlOiB7JHNldDogbm93fSxcclxuICAgIGNyZWF0ZWRCeToge1xyXG4gICAgICAkc2V0OiB7XHJcbiAgICAgICAgbmFtZTogdXNlci5kaXNwbGF5TmFtZSxcclxuICAgICAgICB1cmw6IFwibWFpbHRvOlwiICsgdXNlci5tYWlsXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEVtYWlsRnJvbURvY0FjY2VzcyAocmVzb3VyY2U6IFNvZnREb2N1bWVudEFjY2Vzcykge1xyXG4gIGlmIChyZXNvdXJjZS5lbWFpbCkgcmV0dXJuIHJlc291cmNlLmVtYWlsO1xyXG4gIHJldHVybiByZXNvdXJjZS51cmwgP1xyXG4gICAgcmVzb3VyY2UudXJsLnN0YXJ0c1dpdGgoJ21haWx0bzonKSA/XHJcbiAgICAgIHJlc291cmNlLnVybC5zdWJzdHJpbmcoJ21haWx0bzonLmxlbmd0aCkgOlxyXG4gICAgICByZXNvdXJjZS51cmwgOlxyXG4gICAgcmVzb3VyY2UudXJsO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlTW9kaWZpY2F0aW9uQW5kQ3JlYXRpb25TdGFtcHMob2JqOiBNb2RpZmljYXRpb25UcmFja2VkLCB1c2VyOiBVc2VyKSB7XHJcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICBvYmogPSB1cGRhdGVNb2RpZmljYXRpb25TdGFtcChub3csIG9iaiwgdXNlcik7XHJcbiAgaWYgKCFvYmouY3JlYXRlZEJ5KSBvYmogPSB1cGRhdGVDcmVhdGlvblN0YW1wKG5vdywgb2JqLCB1c2VyKTtcclxuICByZXR1cm4gb2JqO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlFdGFncyhkb2M6IERvY3VtZW50LCBuZXdFdGFnczoge1tpZDogc3RyaW5nXTogc3RyaW5nfSwgZ3JhcGhzOiBzdHJpbmdbXSkge1xyXG4gIGNvbnN0IHJlcyA9IHsuLi5kb2N9O1xyXG4gIGNvbnN0IGV0YWcgPSBuZXdFdGFnc1tkb2MuaWRdO1xyXG4gIGlmIChldGFnKVxyXG4gICAgcmVzLiRldGFnID0gZXRhZztcclxuICBmb3IgKGxldCBsYWJlbCBvZiBncmFwaHMpIHtcclxuICAgIGNvbnN0IG5ld0xpc3QgPSBkb2NbbGFiZWxdLm1hcChkID0+IGFwcGx5RXRhZ3MoZCwgbmV3RXRhZ3MsIFtdKSk7XHJcbiAgICByZXNbbGFiZWxdID0gbmV3TGlzdDtcclxuICB9XHJcbiAgcmV0dXJuIHJlcztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRCbG9iKGJsb2I6IEJsb2IsIG06IChyOkZpbGVSZWFkZXIpPT52b2lkKSB7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICByZWFkZXIub25sb2FkID0gZXYgPT4gcmVzb2x2ZSgoZXYudGFyZ2V0IGFzIGFueSkucmVzdWx0KTtcclxuICAgIHJlYWRlci5vbmFib3J0ID0gZXYgPT4gcmVqZWN0KG5ldyBFcnJvcihcImZpbGUgcmVhZCBhYm9ydGVkXCIpKTtcclxuICAgIHJlYWRlci5vbmVycm9yID0gZXYgPT4gcmVqZWN0KChldi50YXJnZXQgYXMgYW55KS5lcnJvcik7XHJcbiAgICBtKHJlYWRlcik7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZWFkQmxvYkFzVGV4dCAoYmxvYjogQmxvYikge1xyXG4gIHJldHVybiByZWFkQmxvYihibG9iLCByPT5yLnJlYWRBc1RleHQoYmxvYikpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVhZEJsb2JBc0RhdGFVcmwgKGJsb2I6IEJsb2IpIHtcclxuICByZXR1cm4gcmVhZEJsb2IoYmxvYiwgcj0+ci5yZWFkQXNEYXRhVVJMKGJsb2IpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFsbG93Q29weShlOiBSZWFjdC5EcmFnRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSB7XHJcbiAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdjb3B5JztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUNvdXJzZUJ1aWxkZXJTdGF0dXMoc3RhdHVzOiAndW5zYXZlZCcgfCAnc2F2ZWQnIHwgJ2Vycm9yJyB8ICcnKSB7XHJcbiAgY29uc3QgZGl2ID0gJCgnZGl2LmNvdXJzZS1idWlsZGVyJylbMF07XHJcbiAgaWYgKGRpdikgZGl2LmNsYXNzTmFtZSA9IFwiY291cnNlLWJ1aWxkZXJcIiArIChzdGF0dXMgPyBcIiBzdGF0dXMgXCIgKyBzdGF0dXMgOiBcIlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvYWRDb3Vyc2UoaWQ6IHN0cmluZywgb3B0aW9ucz86IHtcclxuICAgIGluY2x1ZGVUZW1wbGF0ZUNoYWluPzogYm9vbGVhbixcclxuICAgIGluY2x1ZGU/OiBzdHJpbmdbXVxyXG4gIH0pOiBQcm9taXNlPENvdXJzZT5cclxue1xyXG4gIGNvbnN0IGNsaWVudCA9IGVudi5rZWRCYWNrZW5kQ2xpZW50O1xyXG4gIGNvbnN0IGluY2x1ZGVUZW1wbGF0ZUNoYWluID0gb3B0aW9ucyAmJiBvcHRpb25zLmluY2x1ZGVUZW1wbGF0ZUNoYWluO1xyXG4gIGNvbnN0IGluY2x1ZGVUYXNrcyA9ICFvcHRpb25zIHx8ICFvcHRpb25zLmluY2x1ZGUgfHwgb3B0aW9ucy5pbmNsdWRlLmluZGV4T2YoXCJ0YXNrc1wiKSAhPT0gLTE7XHJcbiAgY29uc3QgW2NvdXJzZSwgY291cnNlVGFza3MsIHRlbXBsYXRlQ2hhaW5dID0gKGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgIGNsaWVudC5nZXQoXCJjb3Vyc2VzXCIsIGlkLCB7XHJcbiAgICAgIGluY2x1ZGU6IG9wdGlvbnMgJiYgb3B0aW9ucy5pbmNsdWRlID8gb3B0aW9ucy5pbmNsdWRlLmZpbHRlcihpID0+IGkgIT09IFwidGFza3NcIikgOiBbXHJcbiAgICAgICAgXCJjZW50cmFsQ29udGVudFwiLFxyXG4gICAgICAgIFwia25vd2xlZGdlUmVxdWlyZW1lbnRzXCIsXHJcbiAgICAgICAgXCJhYmlsaXRpZXNcIixcclxuICAgICAgICBcImltYWdlc1wiLFxyXG4gICAgICAgIFwiYWNsXCIgLy8gRG9uJ3QgaW5jbHVkZSB0YXNrcyBoZXJlLi4uXHJcbiAgICAgIF1cclxuICAgIH0pLFxyXG4gICAgLy8gLi4uIGJ1dCBpbmNsdWRlIHRhc2tzIGhlcmUgaW5zdGVhZCBzbyB0aGF0IHdlIGNhbiBsb2FkIHRoZSBncmFwaHMgZm9yIHRoZVxyXG4gICAgLy8gdGFza3MgYXMgd2VsbCFcclxuICAgIGluY2x1ZGVUYXNrcyAmJiBjbGllbnQubGlzdChcInRhc2tzXCIsIHtcclxuICAgICAgaGFzRWRnZXNGcm9tOiBpZCxcclxuICAgICAgaW5jbHVkZTogWydrbm93bGVkZ2VSZXF1aXJlbWVudHMnLCAnY2VudHJhbENvbnRlbnQnLCAnYWJpbGl0aWVzJywgJ2FjbCddLFxyXG4gICAgICBmbGFnczogWydpbmNsdWRlSWRzT25seSddIC8vIERvbid0IG5lZWQgcmVkdW5kYW50IGluZm8gdGhhdCdzIGFscmVhZHkgb24gY291cnNlXHJcbiAgICB9KSxcclxuICAgIGluY2x1ZGVUZW1wbGF0ZUNoYWluICYmIGNsaWVudC5saXN0KFwiY291cnNlc1wiLCB7XHJcbiAgICAgIGhhc0VkZ2VzRnJvbTogaWQsXHJcbiAgICAgIGZsYWdzOiBbJ2lkc09ubHknXVxyXG4gICAgfSlcclxuICBdKSkgYXMgW0NvdXJzZSwgVGFza1tdLCBDb3Vyc2VbXV07XHJcbiAgY291cnNlLnRhc2tzID0gY291cnNlVGFza3M7XHJcblxyXG4gIC8vIENvcnJlY3QgdGhlIG9yZGVyIG9mIEFiaWxpdGllc1xyXG4gIGlmIChjb3Vyc2UuYWJpbGl0aWVzICYmIGNvdXJzZS5hYmlsaXRpZXNPcmRlcikge1xyXG4gICAgY291cnNlLmFiaWxpdGllcyA9IGNvdXJzZS5hYmlsaXRpZXNPcmRlci5tYXAoaWQgPT5cclxuICAgICAgY291cnNlLmFiaWxpdGllcy5maW5kKGEgPT4gYS5pZCA9PT0gaWQpKTtcclxuICB9XHJcblxyXG4gIC8vIENvcnJlY3QgdGhlIG9yZGVyIG9mIEtub3dsZWRnZVJlcXVpcmVtZW50c1xyXG4gIGlmIChjb3Vyc2Uua25vd2xlZGdlUmVxdWlyZW1lbnRzICYmIGNvdXJzZS5rbm93bGVkZ2VSZXF1aXJlbWVudHNPcmRlcikge1xyXG4gICAgY291cnNlLmtub3dsZWRnZVJlcXVpcmVtZW50cyA9IGNvdXJzZS5rbm93bGVkZ2VSZXF1aXJlbWVudHNPcmRlci5tYXAoaWQgPT5cclxuICAgICAgY291cnNlLmtub3dsZWRnZVJlcXVpcmVtZW50cy5maW5kKGMgPT4gYy5pZCA9PT0gaWQpKTtcclxuICB9XHJcblxyXG4gIC8vIENvcnJlY3QgdGhlIG9yZGVyIG9mIENlbnRyYWxDb250ZW50XHJcbiAgaWYgKGNvdXJzZS5jZW50cmFsQ29udGVudCAmJiBjb3Vyc2UuY2VudHJhbENvbnRlbnRPcmRlcikge1xyXG4gICAgY291cnNlLmNlbnRyYWxDb250ZW50ID0gY291cnNlLmNlbnRyYWxDb250ZW50T3JkZXIubWFwKGlkID0+XHJcbiAgICAgIGNvdXJzZS5jZW50cmFsQ29udGVudC5maW5kKGNjID0+IGNjLmlkID09PSBpZCkpOy8vLmZpbHRlcih4ID0+ICEheCk7Ly8gRGVidWdnaW5nIHNvbXRoaW4nIC4gTm9ybWFsbHkgdGhlIGxhc3QgLmZpbHRlcigpLi4uIHBhcnQgc2hvdWxkIG5vdCBiZSBuZXNjZXNzYXJ5Li4uXHJcbiAgfVxyXG4gIFxyXG4gIC8vIEluY2x1ZGUgdGVtcGxhdGUgY2hhaW4gaWYgcmVxdWVzdGVkLlxyXG4gIGlmIChpbmNsdWRlVGVtcGxhdGVDaGFpbikgY291cnNlLnRlbXBsYXRlQ2hhaW4gPSB0ZW1wbGF0ZUNoYWluO1xyXG4gIHJldHVybiBjb3Vyc2U7XHJcbn1cclxuXHJcbi8vIENoZWNrIGRpZmZlcmVuY2VzIGJldHdlZW4gdHdvIGFycmF5IG9mIHR5cGUgVFxyXG5leHBvcnQgZnVuY3Rpb24gaGFzQ2hhbmdlcyhvcmlnaW5hbFZhbHVlczogQXJyYXk8YW55PiwgY3VycmVudFZhbHVlczogQXJyYXk8YW55Pik6IGJvb2xlYW57XHJcbiAgcmV0dXJuIG9yaWdpbmFsVmFsdWVzID09PSB1bmRlZmluZWQgfHwgY3VycmVudFZhbHVlcy5maWx0ZXIoKHgpID0+ICFvcmlnaW5hbFZhbHVlcy5pbmNsdWRlcyh4KSkubGVuZ3RoID4gMCB8fCBvcmlnaW5hbFZhbHVlcy5maWx0ZXIoKHgpID0+ICFjdXJyZW50VmFsdWVzLmluY2x1ZGVzKHgpKS5sZW5ndGggPiAwO1xyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IGVudiBmcm9tICcuLi8uLi8uLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBBc3NpZ25tZW50LCBVcmt1bmRSZXNwb25zZSB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgc2hvd0Vycm9yLCBjb21wYXJlUHJvcHMgfSBmcm9tICcuLi8uLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IFNwaW5uZXIgfSBmcm9tICcuLi8uLi9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9zcGlubmVyJztcclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBIdHRwRXJyb3IsIGNyZWF0ZVVVSUQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IGhhc1dyaXRlQWNjZXNzLCBpc1RlYWNoZXJBdFNjaG9vbCB9IGZyb20gJy4uLy4uLy4uL2FjY2Vzcy1jb250cm9sJztcclxuaW1wb3J0IGRvd25sb2FkIGZyb20gJ2Rvd25sb2FkanMnO1xyXG5pbXBvcnQge1xyXG4gIGdldFVya3VuZFNpZ25pZmljYW5jZUNsYXNzLFxyXG4gIGdldFVya3VuZFN0YXR1c0NsYXNzLFxyXG4gIGdldFVya3VuZEhvdmVyVGV4dH0gZnJvbSAnLi91cmt1bmQtdXRpbHMnO1xyXG5pbXBvcnQgeyBpc0VtcGxveWVlIH0gZnJvbSAnLi4vLi4vY291cnNlLWJ1aWxkZXIta3MvbG9naWMvaXMtZW1wbG95ZWUnO1xyXG5pbXBvcnQgeyBHb29nbGVQaWNrZXIgfSBmcm9tICcuLi8uLi8uLi9hcGlzL2dvb2dsZS1waWNrZXInO1xyXG5pbXBvcnQgeyBEcml2ZUJ1dHRvbiB9IGZyb20gXCIuLi8uLi8uLi9hcGlzL2J1dHRvbnNcIjtcclxuaW1wb3J0IHsgZmVhdHVyZXMgfSBmcm9tICcuLi8uLi8uLi9mZWF0dXJlcyc7XHJcbmltcG9ydCB7IEdvb2dsZURyaXZlLCBzZWxlY3RlZEZpbGUgfSBmcm9tICcuLi8uLi8uLi9hcGlzL2dvb2dsZS1kcml2ZSc7XHJcblxyXG5jb25zdCBNQVhfVVJLVU5EX0ZJTEVfU0laRV9NQiA9IDUwO1xyXG5jb25zdCBNQVhfTk9OVVJLVU5EX0ZJTEVfU0laRV9NQiA9IDEwMDtcclxuY29uc3QgQUxMT1dFRF9FWFRFTlNJT05TID0gW1xyXG4gIFwiLnBkZlwiLFxyXG4gIFwiLm9kdFwiLFxyXG4gIFwiLmRvY3hcIixcclxuICBcIi5kb2NcIixcclxuICBcIi5jYWRcIixcclxuICBcIi53YXZcIixcclxuICBcIi5tcDNcIixcclxuICBcIi5tcGVnNFwiLFxyXG4gIFwiLm1wNFwiLFxyXG4gIFwiLnppcFwiLFxyXG4gIFwiLnBuZ1wiLFxyXG4gIFwiLmpwZ1wiLFxyXG4gIFwiLmpwZWdcIixcclxuICBcIi5naWZcIlxyXG5dO1xyXG5jb25zdCBVUktVTkRfRVhURU5TSU9OUyA9IFtcclxuICBcIi5wZGZcIixcclxuICBcIi5vZHRcIixcclxuICBcIi5kb2N4XCIsXHJcbiAgXCIuZG9jXCJcclxuXTtcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgY291cnNlSWQ6IHN0cmluZztcclxuICB0YXNrSWQ6IHN0cmluZztcclxuICBzY2hvb2w6IHN0cmluZztcclxuICBzZW5kVG9Vcmt1bmQ6IGJvb2xlYW47XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgYXNzaWdubWVudHM6IEFzc2lnbm1lbnRbXTtcclxuICBsb2FkaW5nOiBib29sZWFuO1xyXG4gIHVwbG9hZGluZ0ZpbGU/OiBGaWxlO1xyXG4gIGVycm9yPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVGFza0Fzc2lnbm1lbnRzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgYXNzaWdubWVudHM6IFtdLFxyXG4gICAgICBsb2FkaW5nOiB0cnVlXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0U3RhdGVQcm9taXNlZChjYjogKHByZXZTdGF0ZTogUmVhZG9ubHk8U3RhdGU+LCBwcm9wczogUHJvcHMpID0+IFBhcnRpYWw8U3RhdGU+KSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzdXBlci5zZXRTdGF0ZShjYiBhcyBhbnksIHJlc29sdmUpKTtcclxuICB9ICBcclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICB0aGlzLmxvYWQoKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzOiBQcm9wcykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKG5leHRQcm9wcy50YXNrSWQgIT09IHRoaXMucHJvcHMudGFza0lkIHx8XHJcbiAgICAgICAgICBuZXh0UHJvcHMuY291cnNlSWQgIT09IHRoaXMucHJvcHMuY291cnNlSWQpXHJcbiAgICAgIHtcclxuICAgICAgICBhd2FpdCB0aGlzLnNldFN0YXRlUHJvbWlzZWQoKCk9Pih7XHJcbiAgICAgICAgICBhc3NpZ25tZW50czogW10sXHJcbiAgICAgICAgICBsb2FkaW5nOiB0cnVlXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZCgpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgc2hvd0Vycm9yKGVycik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB1cGRhdGUoYXNzaWdubWVudHM6IEFzc2lnbm1lbnRbXSwgYXNzaWdubWVudDogQXNzaWdubWVudCk6IEFzc2lnbm1lbnRbXSB7XHJcbiAgICBjb25zdCByZXR2YWwgPSBbXHJcbiAgICAgIGFzc2lnbm1lbnQsXHJcbiAgICAgIC4uLmFzc2lnbm1lbnRzLmZpbHRlcigoe3VzZXIsIGZpbGVuYW1lfSkgPT5cclxuICAgICAgICB1c2VyICE9PSBhc3NpZ25tZW50LnVzZXIgfHxcclxuICAgICAgICBmaWxlbmFtZSAhPT0gYXNzaWdubWVudC5maWxlbmFtZSldO1xyXG4gICAgcmV0dXJuIHJldHZhbDtcclxuICB9XHJcblxyXG4gIGFzeW5jIHJlZnJlc2hBc3NpZ25tZW50KGFzc2lnbm1lbnQ6IEFzc2lnbm1lbnQpIHtcclxuICAgIGNvbnN0IGNsaWVudCA9IGVudi5rZWRCYWNrZW5kQ2xpZW50Lmh0dHA7XHJcbiAgICBjb25zdCB7Y291cnNlSWQsIHRhc2tJZCwgc2Nob29sfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCB7dXNlciwgZmlsZW5hbWV9ID0gYXNzaWdubWVudDtcclxuICAgIGF3YWl0IHRoaXMuc2V0U3RhdGUoKHthc3NpZ25tZW50c30pID0+ICh7XHJcbiAgICAgIGFzc2lnbm1lbnRzOiB0aGlzLnVwZGF0ZShhc3NpZ25tZW50cywgey4uLmFzc2lnbm1lbnQsIGlzUmVmcmVzaGluZzogdHJ1ZX0pXHJcbiAgICB9KSk7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXEgPSBhd2FpdCBjbGllbnQuZ2V0KGBhc3NpZ25tZW50cy91cmt1bmQvJHtzY2hvb2x9LyR7Y291cnNlSWR9LyR7dGFza0lkfS8ke3VzZXJ9LyR7ZmlsZW5hbWV9YCk7XHJcbiAgICAgIGlmIChyZXEuc3RhdHVzID49IDQwMCkgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXEuc3RhdHVzLCBhd2FpdCByZXEudGV4dCgpKTtcclxuICAgICAgY29uc3QgcmVzSnNvbiA9IGF3YWl0IHJlcS50ZXh0KCk7XHJcbiAgICAgIGF3YWl0IHRoaXMuc2V0U3RhdGUoKHthc3NpZ25tZW50c30pID0+ICh7XHJcbiAgICAgICAgYXNzaWdubWVudHM6IHRoaXMudXBkYXRlKGFzc2lnbm1lbnRzLCB7Li4uYXNzaWdubWVudCwgaXNSZWZyZXNoaW5nOiBmYWxzZSwgbWV0YWRhdGE6IHtcclxuICAgICAgICAgIC4uLmFzc2lnbm1lbnQubWV0YWRhdGEsXHJcbiAgICAgICAgICB1cmt1bmRSZXNwb25zZTogcmVzSnNvblxyXG4gICAgICAgIH19KVxyXG4gICAgICB9KSk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMuc2V0U3RhdGUoKHthc3NpZ25tZW50c30pID0+ICh7XHJcbiAgICAgICAgYXNzaWdubWVudHM6IHRoaXMudXBkYXRlKGFzc2lnbm1lbnRzLCB7XHJcbiAgICAgICAgICAuLi5hc3NpZ25tZW50LFxyXG4gICAgICAgICAgaXNSZWZyZXNoaW5nOiBmYWxzZSxcclxuICAgICAgICAgIHJlZnJlc2hFcnJvcjogZVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGxvYWQoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBjbGllbnQgPSBlbnYua2VkQmFja2VuZENsaWVudC5odHRwO1xyXG4gICAgICBjb25zdCB7Y291cnNlSWQsIHRhc2tJZCwgc2Nob29sfSA9IHRoaXMucHJvcHM7XHJcbiAgICAgIGNvbnN0IHRlYWNoZXJBdFNjaG9vbCA9IGlzVGVhY2hlckF0U2Nob29sKGVudi5jdXJyZW50VXNlciwgc2Nob29sKTtcclxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgKHRlYWNoZXJBdFNjaG9vbCA/XHJcbiAgICAgICAgY2xpZW50LmdldChgYXNzaWdubWVudHMvJHtzY2hvb2x9LyR7Y291cnNlSWR9LyR7dGFza0lkfWApIDpcclxuICAgICAgICBjbGllbnQuZ2V0KGBhc3NpZ25tZW50cy8ke3NjaG9vbH0vJHtjb3Vyc2VJZH0vJHt0YXNrSWR9LyR7ZW52LmN1cnJlbnRVc2VyLm1haWx9YCkpO1xyXG4gICAgICBpZiAocmVzLnN0YXR1cyAhPT0gMjAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXMuc3RhdHVzLCBhd2FpdCByZXMudGV4dCgpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgYXNzaWdubWVudHMgPSBhd2FpdCByZXMuanNvbigpIGFzIEFzc2lnbm1lbnRbXTtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgZXJyb3I6IG51bGwsXHJcbiAgICAgICAgbG9hZGluZzogZmFsc2UsXHJcbiAgICAgICAgYXNzaWdubWVudHNcclxuICAgICAgfSk7XHJcbiAgICAgIGlmICh0ZWFjaGVyQXRTY2hvb2wpIHtcclxuICAgICAgICBjb25zdCByZWZyZXNoYWJsZUFzc2lnbWVudHMgPSBhc3NpZ25tZW50cy5maWx0ZXIoYSA9PlxyXG4gICAgICAgICAgYS5tZXRhZGF0YSAmJiAvLyBNdXN0IGhhdmUgbWV0YWRhdGEudXJrdW5kRXh0ZXJuYWxJZCBPdGhlcndpc2Ugbm90IHBvc3NpYmxlIHRvIHJlZnJlc2hcclxuICAgICAgICAgICFhLm1ldGFkYXRhLnVya3VuZFVwbG9hZEVycm9yICYmICggLy8gTm90IHBvc3NpYmxlIHRvIHJlZnJlc2ggaWYgdXBsb2FkIGhhcyBmYWlsZWRcclxuICAgICAgICAgICAgIWEubWV0YWRhdGEudXJrdW5kTGFzdFBvbGwgfHwgLy8gTmV2ZXIgY2hlY2tlZCBzdGF0dXMgeWV0XHJcbiAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICBbJ0FjY2VwdGVkJywgJ1N1Ym1pdHRlZCddLmluZGV4T2YoKEpTT04ucGFyc2UoYS5tZXRhZGF0YS51cmt1bmRSZXNwb25zZSlbMF0gYXMgVXJrdW5kUmVzcG9uc2UpLlN0YXR1cy5TdGF0ZSkgPj0gMCAmJlxyXG4gICAgICAgICAgICAgIHBhcnNlSW50KGEubWV0YWRhdGEudXJrdW5kTGFzdFBvbGwpIDwgbW9tZW50KCkuYWRkKC0xNSwgXCJzZWNvbmRzXCIpLnRvRGF0ZSgpLmdldFRpbWUoKSlcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAvLyBDaGVja2VkIHN0YXR1cyBmb3IgYSBsb25nIHRpbWUgYWdvXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIGZvciAobGV0IGEgb2YgcmVmcmVzaGFibGVBc3NpZ21lbnRzKSB7XHJcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2hBc3NpZ25tZW50KGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgbG9hZGluZzogZmFsc2UsXHJcbiAgICAgICAgZXJyb3I6IGBLdW5kZSBpbnRlIGxhZGRhIGlubMOkbW5pbmdzdXBwZ2lmdGVyYCxcclxuICAgICAgICBhc3NpZ25tZW50czogW11cclxuICAgICAgfSk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25EcmFnIChldjogUmVhY3QuRHJhZ0V2ZW50PEhUTUxEaXZFbGVtZW50Pikge1xyXG4gICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgZXYuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAnY29weSc7XHJcbiAgfVxyXG4gIFxyXG4gIGFzeW5jIHZlcmlmeUFuZFVwbG9hZChmaWxlOiBGaWxlLCBkcml2ZUZpbGU/OiBzZWxlY3RlZEZpbGUpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICghZmlsZSkgcmV0dXJuO1xyXG4gICAgICBpZiAodGhpcy5zdGF0ZS5hc3NpZ25tZW50cy5zb21lKGEgPT5cclxuICAgICAgICBhLnVzZXIgPT09IGVudi5jdXJyZW50VXNlci5tYWlsICYmXHJcbiAgICAgICAgYS5maWxlbmFtZSA9PT0gZmlsZS5uYW1lKSlcclxuICAgICAge1xyXG4gICAgICAgIGlmICghY29uZmlybShgRXJzw6R0dGEgYmVmaW50bGlnIGZpbCAoJHtmaWxlLm5hbWV9KT9gKSkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5wcm9wcy5zY2hvb2wudG9Mb3dlckNhc2UoKSAhPT0gZW52LmN1cnJlbnRVc2VyLnNjaG9vbC50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgaWYgKCFjb25maXJtKGBVcHBnaWZ0ZW4gdGlsbGjDtnIgZW4gYW5uYW4gc2tvbGEgKCR7dGhpcy5wcm9wcy5zY2hvb2x9KS5cXG5gK1xyXG4gICAgICAgICAgYFZpbGwgZHUgw6RuZMOlIGzDpG1uYSBpbiBkaXR0IGFyYmV0ZSBow6RyP2ApKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7dXBsb2FkaW5nRmlsZTogZmlsZX0pO1xyXG4gICAgICBhd2FpdCB0aGlzLnVwbG9hZChmaWxlLCBkcml2ZUZpbGUpO1xyXG4gICAgICBhd2FpdCB0aGlzLmxvYWQoKTtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgdXBsb2FkaW5nRmlsZTogbnVsbFxyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIGVycm9yOiBcIkt1bmRlIGludGUgbGFkZGEgdXBwIGZpbGVuLiBcIiArIChlcnJvci5tZXNzYWdlIHx8IGVycm9yKSxcclxuICAgICAgICB1cGxvYWRpbmdGaWxlOiBudWxsXHJcbiAgICAgIH0pO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgYXN5bmMgdXBsb2FkKGZpbGU6IEZpbGUsIGRyaXZlRmlsZT86IHNlbGVjdGVkRmlsZSkge1xyXG4gICAgY29uc3QgY2xpZW50ID0gZW52LmtlZEJhY2tlbmRDbGllbnQuaHR0cDtcclxuICAgIGNvbnN0IHtjb3Vyc2VJZCwgdGFza0lkLCBzY2hvb2wsIHNlbmRUb1Vya3VuZH0gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3Qge21haWx9ID0gZW52LmN1cnJlbnRVc2VyO1xyXG4gICAgY29uc3QgaXNVcmt1bmRFeHRlbnNpb24gPSBVUktVTkRfRVhURU5TSU9OU1xyXG4gICAgICAuaW5kZXhPZihcIi5cIitmaWxlLm5hbWUuc3BsaXQoJy4nKS5yZXZlcnNlKClbMF0udG9Mb3dlckNhc2UoKSkgPj0gMDtcclxuICAgIGlmIChpc1Vya3VuZEV4dGVuc2lvbikge1xyXG4gICAgICBpZiAoZmlsZS5zaXplID4gTUFYX1VSS1VORF9GSUxFX1NJWkVfTUIgKiAxMDI0ICogMTAyNCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmlsZXIgYXYgZGVubmEgdHlwIGbDpXIgaW50ZSB2YXJhIHN0w7ZycmUgw6RuICR7TUFYX1VSS1VORF9GSUxFX1NJWkVfTUJ9IE1CYCk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChmaWxlLnNpemUgPiBNQVhfTk9OVVJLVU5EX0ZJTEVfU0laRV9NQiAqIDEwMjQgKiAxMDI0KSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGaWxlbiBmw6VyIGludGUgdmFyYSBzdMO2cnJlIMOkbiAke01BWF9OT05VUktVTkRfRklMRV9TSVpFX01CfSBNQmApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBsb3dlckZpbGVuYW1lID0gZmlsZS5uYW1lLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBpZiAoIUFMTE9XRURfRVhURU5TSU9OUy5zb21lKGV4dCA9PiBsb3dlckZpbGVuYW1lLmVuZHNXaXRoKGV4dCkpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRmlsZW5zIMOkbmRlbHNlIG3DpXN0ZSB2YXJhICR7QUxMT1dFRF9FWFRFTlNJT05TLmpvaW4oJyAvICcpfWApO1xyXG4gICAgfSBcclxuICAgIGNvbnN0IGJvZHkgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgIGJvZHkuYXBwZW5kKCdmaWxlcycsIGZpbGUpO1xyXG4gICAgbGV0IHF1ZXJ5UGFyYW1zOmFueSA9IHtcclxuICAgICAgdXNlckRpc3BsYXlOYW1lOiBlbnYuY3VycmVudFVzZXIuZGlzcGxheU5hbWUsXHJcbiAgICAgIHZlcmlmeVdpdGhVcmt1bmQ6IHNlbmRUb1Vya3VuZFxyXG4gICAgfTtcclxuICAgIGlmIChkcml2ZUZpbGUpIHtcclxuICAgICAgcXVlcnlQYXJhbXMgPSB7XHJcbiAgICAgICAgLi4ucXVlcnlQYXJhbXMsXHJcbiAgICAgICAgZHJpdmVGaWxlSWQ6IGRyaXZlRmlsZS5maWxlSWQsXHJcbiAgICAgICAgZHJpdmVGaWxlVXJsOiBkcml2ZUZpbGUudXJsLFxyXG4gICAgICAgIGRyaXZlRmlsZUljb25Vcmw6IGRyaXZlRmlsZS5pY29uVXJsXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGVudi5rZWRCYWNrZW5kQ2xpZW50Lmh0dHAuZmV0Y2goXHJcbiAgICAgIGBhc3NpZ25tZW50cy8ke3NjaG9vbH0vJHtjb3Vyc2VJZH0vJHt0YXNrSWR9LyR7bWFpbH1gLFxyXG4gICAgICAncHV0JyxcclxuICAgICAge30sXHJcbiAgICAgIHF1ZXJ5UGFyYW1zLFxyXG4gICAgICB7XHJcbiAgICAgICAgYm9keVxyXG4gICAgICB9KTtcclxuICAgIGlmIChyZXMuc3RhdHVzICE9PSAyMDApIHtcclxuICAgICAgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXMuc3RhdHVzLCBhd2FpdCByZXMudGV4dCgpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGRvd25sb2FkKGZpbGU6IEFzc2lnbm1lbnQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGVudi5rZWRCYWNrZW5kQ2xpZW50Lmh0dHAuZmV0Y2goZmlsZS5tZWRpYUxpbmssICdnZXQnLCB7fSk7XHJcbiAgICAgIGlmIChyZXMuc3RhdHVzID49IDQwMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBIdHRwRXJyb3IocmVzLnN0YXR1cywgYXdhaXQgcmVzLnRleHQoKSk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHJlcy5ibG9iKCk7XHJcbiAgICAgIGRvd25sb2FkKGJsb2IsIGZpbGUuZmlsZW5hbWUsIGZpbGUuY29udGVudFR5cGUpO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2Vycm9yOiBcIkt1bmRlIGludGUgbGFkZGEgbmVkIGZpbGVuLiBcIiArIChlcnIubWVzc2FnZSB8fCBlcnIpfSk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH0gICAgXHJcbiAgfVxyXG5cclxuICBhc3luYyBkZWxldGUodXJsOiBzdHJpbmcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHRoaXMuc2V0U3RhdGVQcm9taXNlZCgoe2Fzc2lnbm1lbnRzfSkgPT4gKHthc3NpZ25tZW50czogYXNzaWdubWVudHMubWFwKGEgPT4gYS5tZWRpYUxpbmsgPT09IHVybCA/XHJcbiAgICAgICAgey4uLmEsIG1ldGFkYXRhOiB7Li4uYS5tZXRhZGF0YSwgJG1ldGE6ICdkZWxldGUnfX0gOiB7Li4uYX0pfSkpO1xyXG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBlbnYua2VkQmFja2VuZENsaWVudC5odHRwLmZldGNoKHVybCwgJ2RlbGV0ZScsIHt9KTtcclxuICAgICAgaWYgKHJlcy5zdGF0dXMgPj0gNDAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEh0dHBFcnJvcihyZXMuc3RhdHVzLCBhd2FpdCByZXMudGV4dCgpKTtcclxuICAgICAgfVxyXG4gICAgICBhd2FpdCB0aGlzLmxvYWQoKTtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHtlcnJvcjogXCJLdW5kZSBpbnRlIHRhIGJvcnQgZmlsZW4uIFwiICsgKGVyci5tZXNzYWdlIHx8IGVycil9KTtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qge2NvdXJzZUlkLCB0YXNrSWQsIHNjaG9vbH0gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3Qge2xvYWRpbmcsIGFzc2lnbm1lbnRzLCBlcnJvciwgdXBsb2FkaW5nRmlsZX0gPSB0aGlzLnN0YXRlO1xyXG4gICAgY29uc3QgdGVhY2hlckF0VGhpc1NjaG9vbCA9IGlzVGVhY2hlckF0U2Nob29sKGVudi5jdXJyZW50VXNlciwgc2Nob29sKTtcclxuICAgIGxldCBmaWxlcyA9IFsuLi5hc3NpZ25tZW50c107XHJcbiAgICBjb25zdCBzaG93R29vZ2xlUGlja2VyID0gZmVhdHVyZXMucGlja2VyO1xyXG4gICAgXHJcbiAgICBpZiAodXBsb2FkaW5nRmlsZSkge1xyXG4gICAgICBjb25zdCB2aXJ0dWFsRmlsZTogQXNzaWdubWVudCA9IHtcclxuICAgICAgICBzY2hvb2wsXHJcbiAgICAgICAgY291cnNlSWQsXHJcbiAgICAgICAgdGFza0lkLFxyXG4gICAgICAgIGZpbGVuYW1lOiB1cGxvYWRpbmdGaWxlLm5hbWUsXHJcbiAgICAgICAgc2l6ZTogdXBsb2FkaW5nRmlsZS5zaXplLFxyXG4gICAgICAgIHVzZXI6IGVudi5jdXJyZW50VXNlci5tYWlsLFxyXG4gICAgICAgIGNvbnRlbnRUeXBlOiB1cGxvYWRpbmdGaWxlLnR5cGUsXHJcbiAgICAgICAgdXBsb2FkRGF0ZTogRGF0ZS5ub3coKSxcclxuICAgICAgICBtZWRpYUxpbms6IGBhc3NpZ25tZW50cy8ke3NjaG9vbH0vJHtjb3Vyc2VJZH0vJHt0YXNrSWR9LyR7ZW52LmN1cnJlbnRVc2VyLm1haWx9LyR7dXBsb2FkaW5nRmlsZS5uYW1lfWAsXHJcbiAgICAgICAgbWV0YWRhdGE6IHtcclxuICAgICAgICAgICRtZXRhOiAnYWRkJyxcclxuICAgICAgICAgIHVzZXJEaXNwbGF5TmFtZTogZW52LmN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lXHJcbiAgICAgICAgfSBhcyBBc3NpZ25tZW50W1wibWV0YWRhdGFcIl1cclxuICAgICAgfTtcclxuICAgICAgZmlsZXMgPSBmaWxlcy5maWx0ZXIoZmlsZSA9PiBmaWxlLm1lZGlhTGluayAhPT0gdmlydHVhbEZpbGUubWVkaWFMaW5rKTtcclxuICAgICAgZmlsZXMgPSBbLi4uZmlsZXMsIHZpcnR1YWxGaWxlXTtcclxuICAgIH1cclxuICAgIGZpbGVzID0gZmlsZXMuc29ydChjb21wYXJlUHJvcHMoW1xyXG4gICAgICBcIm1ldGFkYXRhLnVzZXJEaXNwbGF5TmFtZVwiLFxyXG4gICAgICBcImZpbGVuYW1lXCIsXHJcbiAgICAgIFwidXBsb2FkRGF0ZVwiXHJcbiAgICAgIF0sIFtcInN2XCIsIFwiZW5cIl0sIHtzZW5zaXRpdml0eTogJ2Jhc2UnfSkpO1xyXG4gICAgY29uc3QgaGFzT3duRG9jcyA9IGZpbGVzLnNvbWUoZmlsZSA9PiBmaWxlLnVzZXIgPT09IGVudi5jdXJyZW50VXNlci5tYWlsKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBvbkRyYWdPdmVyPXtldiA9PiB0aGlzLm9uRHJhZyhldil9IG9uRHJvcD17ZXY9PntcclxuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMudmVyaWZ5QW5kVXBsb2FkKGV2LmRhdGFUcmFuc2Zlci5maWxlc1swXSk7XHJcbiAgICAgIH19PlxyXG4gICAgICAgIHtlcnJvciA/IDw+XHJcbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJlcnJvclwiPntlcnJvcn08L3A+XHJcbiAgICAgICAgPC8+OiB1bmRlZmluZWR9XHJcbiAgICAgICAge2xvYWRpbmcgPyA8PlxyXG4gICAgICAgICAgPFNwaW5uZXIgLz4gTGFkZGFyIGlubMOkbW5hZGUgZmlsZXIuLi5cclxuICAgICAgICA8Lz4gOiBmaWxlcy5sZW5ndGggPT09IDAgP1xyXG4gICAgICAgICAgdGVhY2hlckF0VGhpc1NjaG9vbCA/XHJcbiAgICAgICAgICAgIDxwPkluZ2VuIGVsZXYgaGFyIGzDpG1uYXQgaW4gbsOlZ290IGFyYmV0ZSDDpG5udS48L3A+IDpcclxuICAgICAgICAgICAgdW5kZWZpbmVkXHJcbiAgICAgICAgOiA8PlxyXG4gICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT1cInRhc2stYXNzaWdubWVudHMtdGFibGVcIj48dGhlYWQ+PHRyPlxyXG4gICAgICAgICAgICB7dGVhY2hlckF0VGhpc1NjaG9vbCA/IDx0aD5FbGV2PC90aD4gOiB1bmRlZmluZWR9XHJcbiAgICAgICAgICAgIDx0aD5GaWxuYW1uPC90aD5cclxuICAgICAgICAgICAgPHRoPklubMOkbW5hdCBkZW48L3RoPlxyXG4gICAgICAgICAgICB7dGVhY2hlckF0VGhpc1NjaG9vbCAmJiA8PlxyXG4gICAgICAgICAgICAgIDx0aD5SYXBwb3J0PC90aD5cclxuICAgICAgICAgICAgICA8dGg+Tml2w6U8L3RoPlxyXG4gICAgICAgICAgICA8Lz59XHJcbiAgICAgICAgICAgIHtoYXNPd25Eb2NzICYmIDx0aCAvPn1cclxuICAgICAgICAgIDwvdHI+PC90aGVhZD48dGJvZHk+e1xyXG4gICAgICAgICAgICBmaWxlcy5tYXAoZmlsZSA9PiA8dHJcclxuICAgICAgICAgICAgICBrZXk9e2ZpbGUubWVkaWFMaW5rfVxyXG4gICAgICAgICAgICAgIHN0eWxlPXtmaWxlLm1ldGFkYXRhLiRtZXRhID8ge29wYWNpdHk6IDAuNX06IHt9fVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAge3RlYWNoZXJBdFRoaXNTY2hvb2wgP1xyXG4gICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgLy8gVGVhY2hlciBWaWV3XHJcbiAgICAgICAgICAgICAgLy8gXHJcbiAgICAgICAgICAgICAgPD48dGQ+XHJcbiAgICAgICAgICAgICAgICAgIDxhIGhyZWY9e2BtYWlsdG86JHtmaWxlLnVzZXJ9YH0+XHJcbiAgICAgICAgICAgICAgICAgICAge2ZpbGUubWV0YWRhdGEudXNlckRpc3BsYXlOYW1lIHx8IGZpbGUudXNlcn1cclxuICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD57ZmlsZS5tZXRhZGF0YS5kcml2ZUZpbGVJZCA/XHJcbiAgICAgICAgICAgICAgICAgIC8vIFRoZSBmaWxlIGNhbiBiZSBlZGl0ZWQgb24gZHJpdmUuIExpbmsgdG8gZWRpdGluZyBpdC5cclxuICAgICAgICAgICAgICAgICAgPERyaXZlRmlsZUxpc3RpbmcgZmlsZT17ZmlsZX0gLz4gOlxyXG4gICAgICAgICAgICAgICAgICAvLyBUaGUgZmlsZSBjYW5ub3QgYmUgZWRpdGVkIG9uIGRyaXZlLiBMaW5rIHRvIGRvd25sb2FkaW5nIGl0LlxyXG4gICAgICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiXHJcbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17ZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kb3dubG9hZChmaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICB9fT57ZmlsZS5maWxlbmFtZX08L2E+fVxyXG4gICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJhc3NpZ25tZW50LWRhdGUtY29sXCI+e21vbWVudChmaWxlLnVwbG9hZERhdGUpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbScpfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICB7ZmlsZS5tZXRhZGF0YS4kbWV0YSA9PT0gJ2FkZCcgP1xyXG4gICAgICAgICAgICAgICAgICA8dGQgY29sU3Bhbj17Mn0+PFNwaW5uZXIgLz4gTGFkZGFyIHVwcC4uLjwvdGQ+OlxyXG4gICAgICAgICAgICAgICAgICBmaWxlLm1ldGFkYXRhLiRtZXRhID09PSAnZGVsZXRlJyA/XHJcbiAgICAgICAgICAgICAgICAgIDx0ZCBjb2xTcGFuPXsyfT48U3Bpbm5lciAvPiBUYXIgYm9ydC4uLjwvdGQ+IDpcclxuICAgICAgICAgICAgICAgICAgKCgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qge21ldGFkYXRhfSA9IGZpbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXJrdW5kUmVzcG9uc2VzOiBVcmt1bmRSZXNwb25zZVtdID0gbWV0YWRhdGEudXJrdW5kUmVzcG9uc2UgJiYgSlNPTi5wYXJzZShtZXRhZGF0YS51cmt1bmRSZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHVya3VuZFJlc3BvbnNlID0gdXJrdW5kUmVzcG9uc2VzICYmIHVya3VuZFJlc3BvbnNlc1swXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXVya3VuZFJlc3BvbnNlICYmIGZpbGUubWV0YWRhdGEudXJrdW5kVXBsb2FkRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHVya3VuZFJlc3BvbnNlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBTdGF0dXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBFcnJvckNvZGU6IC0xLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2U6IGZpbGUubWV0YWRhdGEudXJrdW5kVXBsb2FkRXJyb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgU3RhdGU6ICdFcnJvcidcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgRXh0ZXJuYWxJZDogZmlsZS5tZXRhZGF0YS51cmt1bmRFeHRlcm5hbElkXHJcbiAgICAgICAgICAgICAgICAgICAgICB9IGFzIFVya3VuZFJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZS5pc1JlZnJlc2hpbmcpIHJldHVybiA8dGQgY29sU3Bhbj17Mn0+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8U3Bpbm5lciAvPiBVcHBkYXRlcmFyLi4uXHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD47XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVya3VuZFJlc3BvbnNlID8gPD5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJ1cmt1bmQtc3RhdHVzLWNvbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9e3Vya3VuZFJlc3BvbnNlLlJlcG9ydCAmJiB1cmt1bmRSZXNwb25zZS5SZXBvcnQuUmVwb3J0VXJsfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2V2PT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoWydBY2NlcHRlZCcsICdTdWJtaXR0ZWQnXS5pbmRleE9mKHVya3VuZFJlc3BvbnNlLlN0YXR1cy5TdGF0ZSkgPT09IC0xKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIEZvbGxvdyBIUkVGIGluc3RlYWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hBc3NpZ25tZW50KGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0PVwiX2JsYW5rXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17Z2V0VXJrdW5kSG92ZXJUZXh0KHVya3VuZFJlc3BvbnNlKX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2dldFVya3VuZFN0YXR1c0NsYXNzKHVya3VuZFJlc3BvbnNlKX0gLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJ1cmt1bmQtc3RhdHVzLWNvbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Z2V0VXJrdW5kU2lnbmlmaWNhbmNlQ2xhc3ModXJrdW5kUmVzcG9uc2UpfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICB7dXJrdW5kUmVzcG9uc2UuUmVwb3J0ICYmIHR5cGVvZiB1cmt1bmRSZXNwb25zZS5SZXBvcnQuU2lnbmlmaWNhbmNlID09PSAnbnVtYmVyJyA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHt1cmt1bmRSZXNwb25zZS5SZXBvcnQuU2lnbmlmaWNhbmNlLnRvRml4ZWQoKX0lYCA6ICcgJ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvPiA6IDx0ZCBjb2xTcGFuPXsyfS8+XHJcbiAgICAgICAgICAgICAgICAgIH0pKClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICA8Lz4gOlxyXG4gICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgLy8gU1RVREVOVCBWSUVXXHJcbiAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICA8PlxyXG4gICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICB7ZmlsZS5tZXRhZGF0YS5kcml2ZUZpbGVJZCA/XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGZpbGUgY2FuIGJlIGVkaXRlZCBvbiBkcml2ZS4gTGluayB0byBlZGl0aW5nIGl0LlxyXG4gICAgICAgICAgICAgICAgICAgIDxEcml2ZUZpbGVMaXN0aW5nIGZpbGU9e2ZpbGV9IC8+IDpcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGZpbGUgY2Fubm90IGJlIGVkaXRlZCBvbiBkcml2ZS4gTGluayB0byBkb3dubG9hZGluZyBpdC5cclxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiI1wiIG9uQ2xpY2s9e2V2ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZG93bmxvYWQoZmlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfX0+e2ZpbGUuZmlsZW5hbWV9PC9hPn1cclxuICAgICAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQgY2xhc3NOYW1lPVwiYXNzaWdubWVudC1kYXRlLWNvbFwiPntmaWxlLm1ldGFkYXRhLiRtZXRhID09PSAnYWRkJyA/XHJcbiAgICAgICAgICAgICAgICAgIDw+PFNwaW5uZXIgLz4gTGFkZGFyIHVwcC4uLjwvPiA6XHJcbiAgICAgICAgICAgICAgICAgIGZpbGUubWV0YWRhdGEuJG1ldGEgPT09ICdkZWxldGUnID9cclxuICAgICAgICAgICAgICAgICAgPD48U3Bpbm5lciAvPiBUYXIgYm9ydC4uLjwvPiA6XHJcbiAgICAgICAgICAgICAgICAgIG1vbWVudChmaWxlLnVwbG9hZERhdGUpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbScpfTwvdGQ+XHJcbiAgICAgICAgICAgICAgPC8+fVxyXG4gICAgICAgICAgICAgIHtoYXNPd25Eb2NzICYmIDx0ZD57IWZpbGUubWV0YWRhdGEuJG1ldGEgJiYgZmlsZS51c2VyID09PSBlbnYuY3VycmVudFVzZXIubWFpbCAmJlxyXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIiNcIiBvbkNsaWNrPXtldiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICBpZiAoY29uZmlybShgUmFkZXJhIGlubMOkbW5hZCBmaWwgJHtmaWxlLmZpbGVuYW1lfT9gKSlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZShmaWxlLm1lZGlhTGluayk7XHJcbiAgICAgICAgICAgICAgICB9fT48aSBjbGFzc05hbWU9XCJmYSBmYS10cmFzaFwiLz48L2E+fTwvdGQ+fVxyXG4gICAgICAgICAgICA8L3RyPilcclxuICAgICAgICAgIH08L3Rib2R5PjwvdGFibGU+XHJcbiAgICAgICAgPC8+fVxyXG4gICAgICAgIHtpc0VtcGxveWVlKCkgPyB1bmRlZmluZWQgOiA8PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZHJvcC16b25lIHRhc2stYXNzaWdubWVudC1kcm9wLXpvbmVcIj5cclxuICAgICAgICAgICAgRHJvcHBhIGRpdHQgZsOkcmRpZ2EgYXJiZXRlIGjDpHIuPGJyLz5EZXQgZ8OlciBvY2tzw6UgYnJhIGF0dCBhbnbDpG5kYSBibMOkZGRyYS1rbmFwcGVuIG5lZGFuLlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8aW5wdXQgdHlwZT1cImZpbGVcIiBvbkNoYW5nZT17ZXYgPT4gdGhpcy52ZXJpZnlBbmRVcGxvYWQoZXYudGFyZ2V0LmZpbGVzWzBdKX0gLz5cclxuICAgICAgICAgIHtzaG93R29vZ2xlUGlja2VyICYmIDxEcml2ZUJ1dHRvbiBsYWJlbD1cIkjDpG10YSBmcsOlbiBHb29nbGUgRHJpdmVcIiBhY3Rpb249eygpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcGlja2VyID0gbmV3IEdvb2dsZVBpY2tlcih7dXBsb2FkOnRydWV9KTtcclxuICAgICAgICAgICAgY29uc3QgZHJpdmUgPSBuZXcgR29vZ2xlRHJpdmUoKTtcclxuICAgICAgICAgICAgcGlja2VyLnNob3coKS50aGVuKGZpbGVzID0+IHtcclxuICAgICAgICAgICAgICBjb25zdCBwaWNrZWRGaWxlID0gZmlsZXNbMF07XHJcbiAgICAgICAgICAgICAgaWYgKCFwaWNrZWRGaWxlKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgZHJpdmUuZG93bmxvYWRGaWxlKHtcclxuICAgICAgICAgICAgICAgICBmaWxlOiBwaWNrZWRGaWxlLFxyXG4gICAgICAgICAgICAgICAgbGltaXRTaXplOiBNQVhfTk9OVVJLVU5EX0ZJTEVfU0laRV9NQlxyXG4gICAgICAgICAgICAgIH0pLnRoZW4oZmlsZSA9PiB0aGlzLnZlcmlmeUFuZFVwbG9hZChmaWxlLCBwaWNrZWRGaWxlKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfX0gLz5cclxuICAgICAgICAgIH1cclxuICAgICAgICA8Lz59XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxuXHJcbiAgfVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gRHJpdmVGaWxlTGlzdGluZyAoe2ZpbGV9OiB7ZmlsZTogQXNzaWdubWVudH0pIHtcclxuICBjb25zdCB7ZHJpdmVGaWxlSWNvblVybCwgZHJpdmVGaWxlVXJsfSA9IGZpbGUubWV0YWRhdGE7XHJcbiAgY29uc3QgZmlsZW5hbWUgPSBmaWxlLmZpbGVuYW1lLnN1YnN0cigwLCBmaWxlLmZpbGVuYW1lLmxhc3RJbmRleE9mKCcuJykpO1xyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWwgc3BhY2VkXCI+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgPGltZyBjbGFzc05hbWU9XCJmaWxlLWljb25cIiBzcmM9e2RyaXZlRmlsZUljb25Vcmx9IC8+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgIDxwPjxhIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9e2RyaXZlRmlsZVVybH0+e2ZpbGVuYW1lfTwvYT48L3A+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgKTtcclxufVxyXG4iLCJpbXBvcnQge1Vya3VuZFJlc3BvbnNlfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXJrdW5kU3RhdHVzQ2xhc3MgKHJlczogVXJrdW5kUmVzcG9uc2UpIHtcclxuICBpZiAoIXJlcyB8fCAhcmVzLlN0YXR1cykge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfSBlbHNlIHN3aXRjaCAocmVzLlN0YXR1cy5TdGF0ZSkge1xyXG4gICAgY2FzZSAnRXJyb3InOlxyXG4gICAgICByZXR1cm4gYHVya3VuZC1zdGF0dXMgdXJrdW5kLXN0YXR1cy1lcnJvcmA7XHJcbiAgICBjYXNlICdTdWJtaXR0ZWQnOlxyXG4gICAgICByZXR1cm4gYHVya3VuZC1zdGF0dXMgdXJrdW5kLXN0YXR1cy1zdWJtaXR0ZWRgO1xyXG4gICAgY2FzZSAnQWNjZXB0ZWQnOlxyXG4gICAgICByZXR1cm4gYHVya3VuZC1zdGF0dXMgdXJrdW5kLXN0YXR1cy1hY2NlcHRlZGA7XHJcbiAgICBjYXNlICdBbmFseXplZCc6XHJcbiAgICAgIHJldHVybiBgdXJrdW5kLXN0YXR1cyB1cmt1bmQtc3RhdHVzLWFuYWx5emVkYDtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRVcmt1bmRIb3ZlclRleHQgKHJlczogVXJrdW5kUmVzcG9uc2UpIHtcclxuICBpZiAoIXJlcyB8fCAhcmVzLlN0YXR1cykgcmV0dXJuIG51bGw7XHJcbiAgc3dpdGNoIChyZXMuU3RhdHVzLlN0YXRlKSB7XHJcbiAgICBjYXNlICdFcnJvcic6XHJcbiAgICAgIHJldHVybiByZXMuRXh0ZXJuYWxJZCA/XHJcbiAgICAgICAgYEt1bmRlIGludGUgdGFzIGVtb3QgYXYgdXJrdW5kLiBGZWxrb2Q6ICR7cmVzLlN0YXR1cy5FcnJvckNvZGV9XFxuYCtcclxuICAgICAgICBgRXh0ZXJuYWwgSUQ6ICR7cmVzLkV4dGVybmFsSWR9XFxuRmVsbWVkZGVsYW5kZTogJHtyZXMuU3RhdHVzLk1lc3NhZ2V9YFxyXG4gICAgICAgIDpcclxuICAgICAgICByZXMuU3RhdHVzLk1lc3NhZ2U7XHJcbiAgICBjYXNlICdTdWJtaXR0ZWQnOlxyXG4gICAgICByZXR1cm4gYEZpbGVuIMOkciB1cHBsYWRkYWQgdGlsbCBVcmt1bmQuIEtsaWNrYSBmw7ZyIGF0dCB1cHBkYXRlcmEgc3RhdHVzLmA7XHJcbiAgICBjYXNlICdBY2NlcHRlZCc6XHJcbiAgICAgIHJldHVybiBgRmlsZW4gYW5hbHlzZXJhcyBmb3J0ZmFyYW5kZSBhdiBVcmt1bmQuIEtsaWNrYSBmw7ZyIGF0dCB1cHBkYXRlcmEgc3RhdHVzLmA7XHJcbiAgICBjYXNlICdBbmFseXplZCc6XHJcbiAgICAgIHJldHVybiBgUmFwcG9ydCBza2FwYWQuIEtsaWNrYSBmw7ZyIGF0dCDDtnBwbmEgcmFwcG9ydGVuIGkgbnl0dCBmw7Zuc3RlcmA7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXJrdW5kU2lnbmlmaWNhbmNlQ2xhc3MgKHJlczogVXJrdW5kUmVzcG9uc2UpIHtcclxuICBpZiAoIXJlcyB8fCAhcmVzLlN0YXR1cykgcmV0dXJuICcnO1xyXG5cclxuICBzd2l0Y2ggKHJlcy5TdGF0dXMuU3RhdGUpIHtcclxuICAgIGNhc2UgJ0Vycm9yJzogcmV0dXJuICd1cmt1bmQtc2lnbmlmaWNhbmNlLWVycm9yJztcclxuICAgIGNhc2UgJ1N1Ym1pdHRlZCc6IHJldHVybiAndXJrdW5kLXNpZ25pZmljYW5jZS1zdWJtaXR0ZWQnO1xyXG4gICAgY2FzZSAnQWNjZXB0ZWQnOiByZXR1cm4gJ3Vya3VuZC1zaWduaWZpY2FuY2UtYWNjZXB0ZWQnO1xyXG4gIH1cclxuICBjb25zdCByZXBvcnQgPSByZXMuUmVwb3J0O1xyXG4gIGlmICghcmVwb3J0KSB7XHJcbiAgICByZXR1cm4gXCJcIjtcclxuICB9XHJcbiAgaWYgKHJlcG9ydC5TaWduaWZpY2FuY2UgPCAxKVxyXG4gICAgLy9yZXR1cm4gYCR7Y2RufS9pbWFnZXMvdXJrdW5kLzAuZ2lmYDtcclxuICAgIHJldHVybiBcInVya3VuZC1zaWduaWZpY2FuY2UgdXJrdW5kLXNpZ25pZmljYW5jZS0wXCI7XHJcbiAgaWYgKHJlcG9ydC5TaWduaWZpY2FuY2UgPCAxMClcclxuICAgIC8vcmV0dXJuIGAke2Nkbn0vaW1hZ2VzL3Vya3VuZC8xLmdpZmA7XHJcbiAgICByZXR1cm4gXCJ1cmt1bmQtc2lnbmlmaWNhbmNlIHVya3VuZC1zaWduaWZpY2FuY2UtMVwiO1xyXG4gIGlmIChyZXBvcnQuU2lnbmlmaWNhbmNlIDwgMjUpXHJcbiAgICByZXR1cm4gXCJ1cmt1bmQtc2lnbmlmaWNhbmNlIHVya3VuZC1zaWduaWZpY2FuY2UtMlwiO1xyXG4gICAgLy9yZXR1cm4gYCR7Y2RufS9pbWFnZXMvdXJrdW5kLzIuZ2lmYDtcclxuICBpZiAocmVwb3J0LlNpZ25pZmljYW5jZSA8IDQwKVxyXG4gICAgcmV0dXJuIFwidXJrdW5kLXNpZ25pZmljYW5jZSB1cmt1bmQtc2lnbmlmaWNhbmNlLTNcIjtcclxuICAgIC8vcmV0dXJuIGAke2Nkbn0vaW1hZ2VzL3Vya3VuZC8zLmdpZmA7XHJcbiAgaWYgKHJlcG9ydC5TaWduaWZpY2FuY2UgPCA1NSlcclxuICAgIHJldHVybiBcInVya3VuZC1zaWduaWZpY2FuY2UgdXJrdW5kLXNpZ25pZmljYW5jZS00XCI7XHJcbiAgICAvL3JldHVybiBgJHtjZG59L2ltYWdlcy91cmt1bmQvNC5naWZgO1xyXG4gIGlmIChyZXBvcnQuU2lnbmlmaWNhbmNlIDwgNzApXHJcbiAgICByZXR1cm4gXCJ1cmt1bmQtc2lnbmlmaWNhbmNlIHVya3VuZC1zaWduaWZpY2FuY2UtNVwiO1xyXG4gICAgLy9yZXR1cm4gYCR7Y2RufS9pbWFnZXMvdXJrdW5kLzUuZ2lmYDtcclxuICBpZiAocmVwb3J0LlNpZ25pZmljYW5jZSA8IDg1KVxyXG4gICAgcmV0dXJuIFwidXJrdW5kLXNpZ25pZmljYW5jZSB1cmt1bmQtc2lnbmlmaWNhbmNlLTZcIjtcclxuICAgIC8vcmV0dXJuIGAke2Nkbn0vaW1hZ2VzL3Vya3VuZC82LmdpZmA7XHJcbiAgaWYgKHJlcG9ydC5TaWduaWZpY2FuY2UgPCA5OS45KVxyXG4gICAgcmV0dXJuIFwidXJrdW5kLXNpZ25pZmljYW5jZSB1cmt1bmQtc2lnbmlmaWNhbmNlLTdcIjtcclxuICAgIC8vcmV0dXJuIGAke2Nkbn0vaW1hZ2VzL3Vya3VuZC83LmdpZmA7XHJcbiAgaWYgKHJlcG9ydC5TaWduaWZpY2FuY2UgPj0gOTkuOSlcclxuICAgIHJldHVybiBcInVya3VuZC1zaWduaWZpY2FuY2UgdXJrdW5kLXNpZ25pZmljYW5jZS04XCI7XHJcbiAgICAvL3JldHVybiBgJHtjZG59L2ltYWdlcy91cmt1bmQvOC5naWZgO1xyXG4gIHJldHVybiBcIlwiO1xyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgQWJpbGl0eSB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICBzdWJUaXRsZT86IHN0cmluZztcclxuICBhYmlsaXRpZXM6IEFiaWxpdHlbXTtcclxuICBjbGFzc05hbWU/OiBzdHJpbmc7XHJcbiAgaGVhZGVyT3Blbj86IGJvb2xlYW47XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgaGVhZGVyT3BlbjogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEFiaWxpdGllc0JveCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgaGVhZGVyT3BlbjogcHJvcHMuaGVhZGVyT3BlbiB8fCBmYWxzZVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHsgdGl0bGUsIHN1YlRpdGxlLCBhYmlsaXRpZXMsIGNsYXNzTmFtZSB9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IHsgaGVhZGVyT3BlbiB9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9eyhjbGFzc05hbWV8fCcnKSArIFwiIG9wZW5DbG9zZVwiICsgKGhlYWRlck9wZW4gPyBcIiBvcGVuXCIgOiBcIlwiKX0+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3BlbkhlYWRlclwiIG9uQ2xpY2s9eygpID0+IHRoaXMuc2V0U3RhdGUoeyBoZWFkZXJPcGVuOiAhdGhpcy5zdGF0ZS5oZWFkZXJPcGVuIH0pfT5cclxuICAgICAgICA8cD57dGl0bGV9PC9wPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJvcGVuQ29udGVudFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJpbGl0eUxpc3RcIj5cclxuICAgICAgICAgIHtzdWJUaXRsZSAmJiA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnRIZWFkZXJcIj5cclxuICAgICAgICAgICAgPGg1PntzdWJUaXRsZX08L2g1PlxyXG4gICAgICAgICAgPC9kaXY+fVxyXG4gICAgICAgICAge2FiaWxpdGllcy5tYXAoYSA9PlxyXG4gICAgICAgICAgICA8ZGl2IGtleT17YS5pZH0gY2xhc3NOYW1lPVwiY29udGVudFBhcnRcIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnRUZXh0XCI+XHJcbiAgICAgICAgICAgICAgICA8cCBkYW5nZXJvdXNseVNldElubmVySFRNTD17e19faHRtbDogYS5uYW1lfX0gLz5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICApfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBDZW50cmFsQ29udGVudCB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICBzdWJUaXRsZT86IHN0cmluZztcclxuICBjZW50cmFsQ29udGVudDogQ2VudHJhbENvbnRlbnRbXTtcclxuICBjbGFzc05hbWU/OiBzdHJpbmc7XHJcbiAgaGVhZGVyT3Blbj86IGJvb2xlYW47XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgaGVhZGVyT3BlbjogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENlbnRyYWxDb250ZW50Qm94IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLFN0YXRlPiB7XHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBoZWFkZXJPcGVuOiBwcm9wcy5oZWFkZXJPcGVuIHx8IGZhbHNlXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3QgeyB0aXRsZSwgc3ViVGl0bGUsIGNlbnRyYWxDb250ZW50LCBjbGFzc05hbWUgfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCB7IGhlYWRlck9wZW4gfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPXsoY2xhc3NOYW1lIHx8ICcnKSArIFwiIG9wZW5DbG9zZVwiICsgKGhlYWRlck9wZW4gPyBcIiBvcGVuXCIgOiBcIlwiKX0+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwib3BlbkhlYWRlclwiIG9uQ2xpY2s9eygpID0+IHRoaXMuc2V0U3RhdGUoeyBoZWFkZXJPcGVuOiAhdGhpcy5zdGF0ZS5oZWFkZXJPcGVuIH0pfT5cclxuICAgICAgICA8cD57dGl0bGV9PC9wPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJvcGVuQ29udGVudFwiPlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJpbGl0eUxpc3RcIj5cclxuICAgICAgICAgIHtzdWJUaXRsZSAmJiA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnRIZWFkZXJcIj5cclxuICAgICAgICAgICAgPGg1PntzdWJUaXRsZX08L2g1PlxyXG4gICAgICAgICAgPC9kaXY+fVxyXG4gICAgICAgICAge2NlbnRyYWxDb250ZW50Lm1hcChjYyA9PlxyXG4gICAgICAgICAgICA8ZGl2IGtleT17Y2MuaWR9IGNsYXNzTmFtZT1cImNvbnRlbnRQYXJ0XCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250ZW50VGV4dFwiPlxyXG4gICAgICAgICAgICAgICAgPHAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IGNjLm5hbWV9fSAvPlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICl9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+O1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHZpc2libGU6IGJvb2xlYW47XHJcbiAgdGV4dDogc3RyaW5nO1xyXG4gIGNsYXNzTmFtZT86IHN0cmluZztcclxuICBvbkNvbmZpcm06ICgpPT52b2lkO1xyXG4gIG9uQ2FuY2VsOiAoKT0+dm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIENvbmZpcm1hdGlvbiAocHJvcHM6IFByb3BzKSB7XHJcbiAgcmV0dXJuIDxkaXZcclxuICAgIGNsYXNzTmFtZT17YGNvbmZpcm1hdGlvbi1ib3ggJHtwcm9wcy5jbGFzc05hbWV9JHtwcm9wcy52aXNpYmxlID8gXCIgdmlzaWJsZVwiIDogXCJcIn1gfT5cclxuICAgIDxwPntwcm9wcy50ZXh0fTwvcD5cclxuICAgIDxidXR0b24gb25DbGljaz17KCk9PnByb3BzLm9uQ29uZmlybSgpfT5PSzwvYnV0dG9uPlxyXG4gICAgPGJ1dHRvbiBvbkNsaWNrPXsoKT0+cHJvcHMub25DYW5jZWwoKX0+QXZicnl0PC9idXR0b24+XHJcbiAgPC9kaXY+O1xyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgS25vd2xlZGdlUmVxdWlyZW1lbnQgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IE9wZW5DbG9zZUJveCB9IGZyb20gXCIuLi8uLi91dGlsaXR5LWNvbXBvbmVudHMvb3Blbi1jbG9zZS1ib3hcIjtcclxuaW1wb3J0IHsgYXJyYXlUb0xvb2t1cCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICBjbGFzc05hbWU/OiBzdHJpbmc7XHJcbiAgcmVxdWlyZW1lbnRzOiBLbm93bGVkZ2VSZXF1aXJlbWVudFtdO1xyXG4gIGV4cGxhaW5lZFJlcXVpcmVtZW50cz86IHtbcmVxdWlyZW1lbnRJZDogc3RyaW5nXTogc3RyaW5nfTtcclxuICBpZHNUb1N1YmplY3RNYXA/OiB7W3JlcXVpcmVtZW5kSWQ6IHN0cmluZ106IHN0cmluZ307XHJcbiAgaW5jbHVkZWRJZHM/OiB7W2lkOiBzdHJpbmddIDogdHJ1ZX07XHJcbiAgaGVhZGVyT3Blbj86IGJvb2xlYW47XHJcbiAgcGFydGlhbFJlcXVpcm1lbnRzPzoge1tpZDogc3RyaW5nXTogc3RyaW5nW119O1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgS25vd2xlZGdlUmVxdWlyZW1lbnRzQm94ID0gKHByb3BzOiBQcm9wcykgPT4ge1xyXG4gIGNvbnN0IHt0aXRsZSwgY2xhc3NOYW1lLCBoZWFkZXJPcGVuLCBpZHNUb1N1YmplY3RNYXAsIHJlcXVpcmVtZW50c30gPSBwcm9wcztcclxuICBpZiAoIWlkc1RvU3ViamVjdE1hcCkge1xyXG4gICAgLy8gTm9ybWFsIGNhc2VcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxPcGVuQ2xvc2VCb3ggdGl0bGU9ezxwPnt0aXRsZX08L3A+fSBjbGFzc05hbWU9e2NsYXNzTmFtZX0gaGVhZGVyT3Blbj17aGVhZGVyT3Blbn0+XHJcbiAgICAgICAgPEtub3dsZWRnZVJlcXVpcmVtZW50c1RhYmxlIHsuLi57Li4ucHJvcHN9fSAvPlxyXG4gICAgICA8L09wZW5DbG9zZUJveD5cclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyBTcGVjaWFsIGNhc2U6IFJlcXVpcmVtZW50cyB0aGF0IHNwYW5zIG11bHRpcGxlIHN1YmplY3RzOlxyXG4gIGNvbnN0IHJlcXVpcmVtZW50c1BlclN1YmplY3RMb29rdXAgPSBpZHNUb1N1YmplY3RNYXAgP1xyXG4gICAgYXJyYXlUb0xvb2t1cChyZXF1aXJlbWVudHMsIHIgPT4gaWRzVG9TdWJqZWN0TWFwW3IuaWRdIHx8IFwiXCIpIDoge1wiXCI6IHJlcXVpcmVtZW50c307XHJcbiAgY29uc3QgcmVxc1BlclN1YmplY3QgPSBPYmplY3Qua2V5cyhyZXF1aXJlbWVudHNQZXJTdWJqZWN0TG9va3VwKVxyXG4gICAgLm1hcChzdWJqZWN0ID0+ICh7c3ViamVjdCwgcmVxdWlyZW1lbnRzOiByZXF1aXJlbWVudHNQZXJTdWJqZWN0TG9va3VwW3N1YmplY3RdfSkpO1xyXG5cclxuICByZXR1cm4gPE9wZW5DbG9zZUJveCB0aXRsZT17PHA+e3RpdGxlfTwvcD59IGNsYXNzTmFtZT17Y2xhc3NOYW1lfSBoZWFkZXJPcGVuPXtoZWFkZXJPcGVufT5cclxuICAgIHtyZXFzUGVyU3ViamVjdC5tYXAoKHtzdWJqZWN0LCByZXF1aXJlbWVudHN9KSA9PiA8S25vd2xlZGdlUmVxdWlyZW1lbnRzVGFibGUgey4uLntcclxuICAgICAgLi4ucHJvcHMsXHJcbiAgICAgIGtleTogc3ViamVjdCxcclxuICAgICAgaGVhZGluZzogc3ViamVjdCxcclxuICAgICAgcmVxdWlyZW1lbnRzXHJcbiAgICB9fSAvPil9XHJcbiAgPC9PcGVuQ2xvc2VCb3g+O1xyXG59XHJcblxyXG5jb25zdCBLbm93bGVkZ2VSZXF1aXJlbWVudHNUYWJsZSA9ICh7XHJcbiAgcmVxdWlyZW1lbnRzLFxyXG4gIGluY2x1ZGVkSWRzLFxyXG4gIGV4cGxhaW5lZFJlcXVpcmVtZW50cyxcclxuICBwYXJ0aWFsUmVxdWlybWVudHMsXHJcbiAgaGVhZGluZyB9OiBQcm9wcyAmIHtoZWFkaW5nPzogc3RyaW5nfSkgPT5cclxue1xyXG4gIGNvbnN0IGNvbHVtbnMgPSBbXCJFXCIsIFwiQ1wiLCBcIkFcIl07XHJcbiAgY29uc3Qgcm93czogS25vd2xlZGdlUmVxdWlyZW1lbnRbXVtdID0gW107XHJcbiAgY29uc3QgcmVxcyA9IHJlcXVpcmVtZW50cy5zbGljZSgpO1xyXG4gIGxldCByb3c6IEtub3dsZWRnZVJlcXVpcmVtZW50W10gfCBudWxsID0gbnVsbDtcclxuICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgcm93ID0gY29sdW1ucy5tYXAoZ3JhZGUgPT4ge1xyXG4gICAgICBjb25zdCBwTmV4dCA9IHJlcXMuZmluZEluZGV4KHIgPT4gci5ncmFkZVN0ZXAudG9VcHBlckNhc2UoKSA9PT0gZ3JhZGUpO1xyXG4gICAgICBpZiAocE5leHQgPCAwKSByZXR1cm4gbnVsbDtcclxuICAgICAgY29uc3QgcnYgPSByZXFzW3BOZXh0XTtcclxuICAgICAgcmVxcy5zcGxpY2UocE5leHQsIDEpO1xyXG4gICAgICByZXR1cm4gaW5jbHVkZWRJZHMgP1xyXG4gICAgICAgIChpbmNsdWRlZElkc1tydi5pZF0gPyBydiA6IHVuZGVmaW5lZCkgOlxyXG4gICAgICAgIHJ2O1xyXG4gICAgfSk7XHJcbiAgICBpZiAocm93LmV2ZXJ5KHIgPT4gciA9PT0gbnVsbCkpXHJcbiAgICAgIGJyZWFrO1xyXG4gICAgaWYgKCFyb3cuZXZlcnkociA9PiAhcikpIHtcclxuICAgICAgcm93cy5wdXNoKHJvdyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gPD5cclxuICAgIHtoZWFkaW5nICYmIDxoND57aGVhZGluZ308L2g0Pn1cclxuICAgIDx0YWJsZT5cclxuICAgICAgPHRoZWFkPlxyXG4gICAgICAgIDx0cj5cclxuICAgICAgICAgIHtjb2x1bW5zLm1hcChjID0+IDx0aCBrZXk9e2N9PntjfTwvdGg+KX1cclxuICAgICAgICA8L3RyPlxyXG4gICAgICA8L3RoZWFkPlxyXG4gICAgICA8dGJvZHk+XHJcbiAgICAgICAge3Jvd3MubWFwKChyb3csaSkgPT4gPFJlYWN0LkZyYWdtZW50IGtleT17aX0+XHJcbiAgICAgICAgICAgIDx0ciBrZXk9e2l9PlxyXG4gICAgICAgICAgICAgIHtyb3cubWFwKChjb2x1bW4saikgPT5cclxuICAgICAgICAgICAgICAgIHt2YXIgY29sdW1uUGFydGlhbFJlcSA9IGNvbHVtbiAmJiBwYXJ0aWFsUmVxdWlybWVudHMgJiYgcGFydGlhbFJlcXVpcm1lbnRzW2NvbHVtbi5pZF07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gPHRkIGtleT17an0gZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IGNvbHVtblBhcnRpYWxSZXEgPyBjb2x1bW5QYXJ0aWFsUmVxLmpvaW4oXCIuXCIpIDogY29sdW1uID8gY29sdW1uLm5hbWUgOiBcIlwifX0gLz5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIDx0ZCBrZXk9e2p9PlxyXG4gICAgICAgICAgICAgICAgLy8ge3BhcnRpYWxSZXF1aXJtZW50cy5tYXAoKHByLCBrKSA9PiBwcltjb2x1bW4uaWRdID9cclxuICAgICAgICAgICAgICAgIC8vICAgPHNwYW4ga2V5PXtrfSBkYW5nZXJvdXNseVNldElubmVySFRNTD17e319Lz5cclxuICAgICAgICAgICAgICAgIC8vICl9XHJcbiAgICAgICAgICAgICAgICAvLyA8L3RkPlxyXG4gICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgIHtleHBsYWluZWRSZXF1aXJlbWVudHMgJiYgPHRyPlxyXG4gICAgICAgICAgICAgIHtyb3cubWFwKChjb2x1bW4saikgPT5cclxuICAgICAgICAgICAgICAgIDx0ZCBrZXk9e2p9IGNsYXNzTmFtZT1cImV4cGxhaW5lZC1yZXF1aXJlbWVudFwiPlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2PnsoY29sdW1uICYmIGV4cGxhaW5lZFJlcXVpcmVtZW50c1tjb2x1bW4uaWRdKSB8fCBcIlwifTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC90ZD4pfVxyXG4gICAgICAgICAgICA8L3RyPn1cclxuICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XHJcbiAgICAgICAgKX1cclxuICAgICAgPC90Ym9keT5cclxuICAgIDwvdGFibGU+XHJcbiAgPC8+O1xyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgQ291cnNlLCBDb3Vyc2VNb2R1bGUsIFRhc2ssIFVzZXJUYXNrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUgfSBmcm9tIFwiLi4vLi4vd2Vla3BsYW5uZXIvd2Vla3BsYW5uZXItcGVyc2lzdGVkLXN0YXRlXCI7XHJcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuaW1wb3J0IHsgY3JlYXRlVVVJRCwgQmF0Y2hSdW5uZXIsIERvY3VtZW50QWNjZXNzIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQgeyB1c2VyVGFza3NSZXBvIH0gZnJvbSAnLi4vLi4vLi4vcmVwb3MvdXNlci10YXNrcy1yZXBvJztcclxuaW1wb3J0IHsgYXJyYXlUb01hcCwgTCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IHsgU3Bpbm5lciB9IGZyb20gJy4uLy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3NwaW5uZXInO1xyXG5pbXBvcnQgeyBDb25maXJtYXRpb24gfSBmcm9tICcuL2NvbmZpcm1hdGlvbic7XHJcbmltcG9ydCB7IExhbmd1YWdlQ29udGV4dCB9IGZyb20gJy4uLy4uL3V0aWxpdHktY29tcG9uZW50cy9MYW5ndWFnZUNvbnRleHQnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBsZWFybmluZ1Rhc2tzOiBMZWFybmluZ01vZHVsZVRhc2tbXVxyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIHdlZWtEYXRlOiBudW1iZXI7XHJcbiAgdXNlclRhc2tzOiBVc2VyVGFza1tdO1xyXG4gIGNvbmZpcm1hdGlvbnM6IHN0cmluZ1tdO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIExlYXJuaW5nTW9kdWxlVGFzayB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgdXJsOiBzdHJpbmc7XHJcbiAgLyoqIGNvdXJzZU5hbWVcclxuICAgKiBGb3IgS0c6IGNvdXJzZU5hbWVcclxuICAgKiBGb3IgS1M6IFN1YmplY3QgbmFtZVxyXG4gICAqL1xyXG4gIGNvdXJzZU5hbWU6IHN0cmluZztcclxuICAvKiogbGVhcm5pbmdHb2FsXHJcbiAgICogRm9yIEtHOiBtb2R1bGUgbmFtZSBvciBsZWFybmluZyBnb2FsIG9mIHRoZSB0YXNrXHJcbiAgICogRm9yIEtTL3N0ZXAtY291cnNlOiBjb3Vyc2UgbmFtZVxyXG4gICAqIEZvciBLUy90aGVtZS1jb3Vyc2U6IGxlYXJuaW5nIGdvYWxcclxuICAgKi9cclxuICBsZWFybmluZ0dvYWw6IHN0cmluZztcclxuICAvKiogU3RlcFxyXG4gICAqIE9ubHkgcHJlc2VudCBpbiBLUy9zdGVwLWNvdXJzZVxyXG4gICAqL1xyXG4gIHN0ZXA/OiBudW1iZXI7XHJcbiAgLyoqIHRhc2tcclxuICAgKiBPbmx5IGZvciBjb3Vyc2VzIGJ1aWx0IGJ5IGNvdXJzZWJ1aWxkZXJcclxuICAgKi9cclxuICB0YXNrPzogVGFzaztcclxuICAvKiogY291cnNlXHJcbiAgICogT25seSBmb3IgY291cnNlcyBidWlsdCBieSBjb3Vyc2VidWlsZGVyXHJcbiAgICovXHJcbiAgY291cnNlPzogQ291cnNlO1xyXG4gIC8qKiBjb3Vyc2VJbmZvXHJcbiAgICogT25seSBmb3IgY291cnNlcyBidWlsZCBieSBzdWJqZWN0cGxhbm5lclxyXG4gICAqL1xyXG4gIGNvdXJzZUluZm8/OiB7XHJcbiAgICBzY2hvb2w6IHN0cmluZyAvLyBTY2hvb2wgbmFtZVxyXG4gICAgY291cnNlOiBzdHJpbmcgLy8gQ291cnNlIEluc3RhbmNlIElEXHJcbiAgICB0YWI6IHN0cmluZyAgICAvLyBDb3Vyc2VUYWIgSURcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUYXNrTGlzdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIHN0YXRpYyBjb250ZXh0VHlwZSA9IExhbmd1YWdlQ29udGV4dDtcclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIHVzZXJUYXNrczogW10sXHJcbiAgICAgIHdlZWtEYXRlOiBEYXRlLm5vdygpLFxyXG4gICAgICBjb25maXJtYXRpb25zOiBbXVxyXG4gICAgfVxyXG4gICAgdGhpcy5vbkNoYW5nZSA9IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKTsgICAgXHJcbiAgfVxyXG5cclxuICBvbkNoYW5nZSAodXNlclRhc2tzOiBVc2VyVGFza1tdLCBwZXJzaXN0ZWQ6IFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUpIHtcclxuICAgIGlmIChwZXJzaXN0ZWQud2Vla0RhdGUgIT09IHRoaXMuc3RhdGUud2Vla0RhdGUpIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgY29uZmlybWF0aW9uczogW11cclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICB1c2VyVGFza3MsXHJcbiAgICAgIHdlZWtEYXRlOiBwZXJzaXN0ZWQud2Vla0RhdGVcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICB1c2VyVGFza3NSZXBvLnN1YnNjcmliZSh0aGlzLm9uQ2hhbmdlKTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgdXNlclRhc2tzUmVwby51bnN1YnNjcmliZSh0aGlzLm9uQ2hhbmdlKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHRvZ2dsZVRhc2sgKGxlYXJuaW5nVGFzazogTGVhcm5pbmdNb2R1bGVUYXNrKSB7XHJcbiAgICBjb25zdCB1c2VyVGFza3MgPSB0aGlzLnN0YXRlLnVzZXJUYXNrcy5maWx0ZXIodXQgPT4ge1xyXG4gICAgICByZXR1cm4gbGVhcm5pbmdUYXNrLnRhc2sgP1xyXG4gICAgICAgIHV0LnRhc2sgJiYgdXQudGFzay5zb21lKHQgPT4gdC5pZCA9PT0gbGVhcm5pbmdUYXNrLmlkKSA6XHJcbiAgICAgICAgdXQuc2l0ZVZpc2lvblBhZ2VJZCA9PT0gbGVhcm5pbmdUYXNrLmlkO1xyXG4gICAgfSk7XHJcbiAgICBjb25zdCB7d2Vla0RhdGV9ID0gdGhpcy5zdGF0ZTtcclxuICAgIFxyXG4gICAgaWYgKHVzZXJUYXNrcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgLy8gTm8gdGFzayBtYXRjaGVzIHRoaXMgbGVhcm5pbmdNb2R1bGVUYXNrIC0gbm90IHByZXNlbnQgaW4gd2Vla3BsYW5uZXIuXHJcbiAgICAgIGxldCBsYXRlc3RUaW1lU3RhbXAgPSBNYXRoLm1heC5hcHBseShcclxuICAgICAgICBNYXRoLm1heCxcclxuICAgICAgICBbd2Vla0RhdGVdLmNvbmNhdCh0aGlzLnN0YXRlLnVzZXJUYXNrcy5tYXAodCA9PiB0LmRhdGVUaW1lKSkpO1xyXG5cclxuICAgICAgY29uc3QgdXNlclRhc2s6IFVzZXJUYXNrID0ge1xyXG4gICAgICAgIGlkOiBjcmVhdGVVVUlEKCksXHJcbiAgICAgICAgY291cnNlTmFtZTogbGVhcm5pbmdUYXNrLmNvdXJzZU5hbWUsXHJcbiAgICAgICAgZGF0ZVRpbWU6IGxhdGVzdFRpbWVTdGFtcCArIDIwMDAsXHJcbiAgICAgICAgbGVhcm5pbmdHb2FsOiBsZWFybmluZ1Rhc2subGVhcm5pbmdHb2FsLFxyXG4gICAgICAgIG5hbWU6IGxlYXJuaW5nVGFzay5uYW1lLFxyXG4gICAgICAgIHVybDogbGVhcm5pbmdUYXNrLnVybCxcclxuICAgICAgICBhY2w6IFtcclxuICAgICAgICAgIC8vIERlZmF1bHQgQUNMOiBMZXQgdXNlciBzZWxmIGhhdmUgZnVsbCBjb250cm9sIG92ZXIgdGhpcyBpdGVtOlxyXG4gICAgICAgICAgbmV3IERvY3VtZW50QWNjZXNzKFwiZW1haWxcIiwgZW52LmN1cnJlbnRVc2VyLm1haWwsIFwiU1wiKSxcclxuICAgICAgICAgIC8vIEFkZGl0aW9uYWwgQUNMOiBMZXQgZW1wbG95ZWVzIG9uIHNhbWUgc2Nob29sIGhhdmUgcmVhZCBhY2Nlc3MgdG8gaXQuXHJcbiAgICAgICAgICAvLyBUaGlzIGN1cnJlbnRseSBvbmx5IGFwcGxpZXMgdG8gdGFza3MgdGhhdCByZWZlciB0byBjb3Vyc2UgdGFza3MgKG5vdCBjdXN0b20gdGFza3MhKVxyXG4gICAgICAgICAgbmV3IERvY3VtZW50QWNjZXNzKFwic2Nob29sUm9sZVwiLCBgJHtlbnYuY3VycmVudFVzZXIuc2Nob29sfS9FTVBMT1lFRWAsIFwiUlwiKVxyXG4gICAgICAgIF0ubWFwKGFjID0+IGFjLnRvU3RyaW5nKCkpXHJcbiAgICAgIH07XHJcbiAgICAgIGlmIChsZWFybmluZ1Rhc2sudGFzayAmJiBsZWFybmluZ1Rhc2sudGFzay5kZWFkbGluZSkge1xyXG4gICAgICAgIHVzZXJUYXNrLmRlYWRsaW5lID0gbGVhcm5pbmdUYXNrLnRhc2suZGVhZGxpbmU7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGxlYXJuaW5nVGFzay50YXNrKSB7XHJcbiAgICAgICAgdXNlclRhc2sudGFzayA9IFtsZWFybmluZ1Rhc2sudGFza107XHJcbiAgICAgICAgaWYgKGxlYXJuaW5nVGFzay5jb3Vyc2UpIHtcclxuICAgICAgICAgIHVzZXJUYXNrLmNvdXJzZSA9IFtsZWFybmluZ1Rhc2suY291cnNlXTtcclxuICAgICAgICB9IGVsc2UgaWYgKGxlYXJuaW5nVGFzay5jb3Vyc2VJbmZvKSB7XHJcbiAgICAgICAgICB1c2VyVGFzay5jb3Vyc2VJbmZvID0gbGVhcm5pbmdUYXNrLmNvdXJzZUluZm87XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHVzZXJUYXNrLnNpdGVWaXNpb25QYWdlSWQgPSBsZWFybmluZ1Rhc2suaWQ7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGxlYXJuaW5nVGFzay5zdGVwKSB7XHJcbiAgICAgICAgdXNlclRhc2suc3RlcCA9IGxlYXJuaW5nVGFzay5zdGVwO1xyXG4gICAgICB9XHJcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICB1c2VyVGFza3NSZXBvLnNldFdlZWtQbGFubmVyQm94T3BlbihsZWFybmluZ1Rhc2suY291cnNlTmFtZSwgdHJ1ZSksXHJcbiAgICAgICAgdXNlclRhc2tzUmVwby5pbnNlcnQoW3VzZXJUYXNrXSldKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIEFscmVhZHkgcHJlc2VudCBpbiB3ZWVrcGxhbm5lci4gSXQncyB0aW1lIHRvIGRlbGV0ZSB0aG9zZSB0aGF0IG1hdGNoZWQgdXMuXHJcbiAgICAgIGF3YWl0IHVzZXJUYXNrc1JlcG8uZGVsZXRlKHVzZXJUYXNrcy5tYXAodCA9PiB0LmlkKSk7XHJcbiAgICB9XHJcbiAgICBcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHtpbnRsfSA9IHRoaXMuY29udGV4dDtcclxuICAgIGNvbnN0IHtsZWFybmluZ1Rhc2tzfSA9IHRoaXMucHJvcHM7XHJcbiAgICBjb25zdCB1c2VyVGFza3MgPSBhcnJheVRvTWFwKHRoaXMuc3RhdGUudXNlclRhc2tzLCB1dCA9PiB1dC50YXNrICYmIHV0LnRhc2subGVuZ3RoID4gMCA/XHJcbiAgICAgIHV0LnRhc2subWFwKHQgPT4gdC5pZClbMF0gOiAvLyBjb3Vyc2UtYnVpbGRlciB0YXNrcyBsb29rZWQgdXAgYnkgaWRcclxuICAgICAgdXQuc2l0ZVZpc2lvblBhZ2VJZCA/IHV0LnNpdGVWaXNpb25QYWdlSWQgOiAvLyBub24tY291cnNlLWJ1aWxkZXIgdGFza3NcclxuICAgICAgdXQudXJsKTtcclxuICAgIGNvbnN0IHtjb25maXJtYXRpb25zfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCB3ZWVrUGxhbm5lcldlZWsgPSBtb21lbnQodGhpcy5zdGF0ZS53ZWVrRGF0ZSkud2VlaygpO1xyXG4gICAgY29uc3QgY3VycmVudFdlZWsgPSBtb21lbnQoKS53ZWVrKCk7XHJcbiAgICBjb25zdCBmb3JXZWVrU3RyaW5nID0gd2Vla1BsYW5uZXJXZWVrID09PSBjdXJyZW50V2VlayA/IFwiXCIgOlxyXG4gICAgd2Vla1BsYW5uZXJXZWVrID09PSBjdXJyZW50V2VlayArIDEgPyBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOlwidGFza0xpc3QubmV4dFdlZWtUYXNrXCIsIGRlZmF1bHRNZXNzYWdlOlwiZsO2ciBuw6RzdGEgdmVja2EgKHZ7d2Vla30pXCJ9LCB7d2Vlazogd2Vla1BsYW5uZXJXZWVrfSkgOlxyXG4gICAgd2Vla1BsYW5uZXJXZWVrID09PSBjdXJyZW50V2VlayAtIDEgPyBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOlwidGFza0xpc3QubGFzdFdlZWtUYXNrXCIsIGRlZmF1bHRNZXNzYWdlOlwiZsO2ciBmw7ZycmEgdmVja2FuICh2e3dlZWt9KVwifSwge3dlZWs6IHdlZWtQbGFubmVyV2Vla30pIDpcclxuICAgIGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6XCJ0YXNrTGlzdC5jdXJyZW50V2Vla1Rhc2tcIiwgZGVmYXVsdE1lc3NhZ2U6XCJmw7ZyIHZlY2thIHt3ZWVrfVwifSwge3dlZWs6IHdlZWtQbGFubmVyV2Vla30pO1xyXG5cclxuICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT1cInRhc2tDb250YWluZXJcIj5cclxuICAgICAge2xlYXJuaW5nVGFza3MubWFwKChsZWFybmluZ1Rhc2ssIGlkeCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRhc2tMb29rdXBJZCA9IGxlYXJuaW5nVGFzay5pZDtcclxuICAgICAgICBjb25zdCB1c2VyVGFzayA9IHVzZXJUYXNrc1t0YXNrTG9va3VwSWRdIHx8IHskbWV0YTogJ2RlbGV0ZWQnfSBhcyBQYXJ0aWFsPFVzZXJUYXNrPjsgLy8gTm8gZXhpc3QgPSAkbWV0YTogJ2RlbGV0ZWQnXHJcbiAgICAgICAgY29uc3QgaXNXb3JraW5nID0gdXNlclRhc2suJG1ldGEgPT09ICdhZGRpbmcnIHx8IHVzZXJUYXNrLiRtZXRhID09PSAnZGVsZXRpbmcnO1xyXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkID0gdXNlclRhc2suJG1ldGEgIT09ICdkZWxldGVkJyAmJiB1c2VyVGFzay4kbWV0YSAhPT0gJ2RlbGV0aW5nJztcclxuICAgICAgICBjb25zdCBkZXNjcmliZWRBY3Rpb24gPSBzZWxlY3RlZCA/XHJcbiAgICAgICAgaW50bC5mb3JtYXRNZXNzYWdlKHtpZDpcInRhc2tMaXN0LnJlbW92ZVRhc2tGcm9tV2Vla2x5UGxhbm5pbmdcIiwgZGVmYXVsdE1lc3NhZ2U6XCJUYSBib3J0IHVwcGdpZnRlbiBmcsOlbiBlZ2VuIHZlY2tvcGxhbmVyaW5nIHt3ZWVrfVwifSwge3dlZWs6IGZvcldlZWtTdHJpbmd9KTpcclxuICAgICAgICBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOlwidGFza0xpc3QuYWRkVGFza1RvV2Vla2x5UGxhbm5pbmdcIiwgZGVmYXVsdE1lc3NhZ2U6XCJMw6RnZyB0aWxsIHVwcGdpZnRlbiBpIGVnZW4gdmVja29wbGFuZXJpbmcge3dlZWt9XCJ9LCB7d2VlazogZm9yV2Vla1N0cmluZ30pXHJcbiAgICAgICAgY29uc3QgY29uZmlybWF0aW9uVmlzaWJsZSA9XHJcbiAgICAgICAgICBjb25maXJtYXRpb25zLnNvbWUodGlkID0+IHRhc2tMb29rdXBJZCA9PT0gdGlkKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIDxkaXYga2V5PXtsZWFybmluZ1Rhc2suaWR9PjxkaXYga2V5PXt0YXNrTG9va3VwSWR9IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgc2VsZWN0ZWRCb3gke3NlbGVjdGVkID8gJyBzZWxlY3RlZCcgOiAnJ31gfVxyXG4gICAgICAgICAgICAgICAgc3R5bGU9e2lzV29ya2luZyA/IHtvcGFjaXR5OiAwLjV9OiB7fX1cclxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpPT4haXNXb3JraW5nICYmIHdlZWtQbGFubmVyV2VlayA9PT0gY3VycmVudFdlZWsgP1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVRhc2sobGVhcm5pbmdUYXNrKSA6XHJcbiAgICAgICAgICAgICAgICAgIGNvbmZpcm1hdGlvblZpc2libGUgPyBcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtjb25maXJtYXRpb25zOiBjb25maXJtYXRpb25zLmZpbHRlcih0aWQgPT4gdGlkICE9PSB0YXNrTG9va3VwSWQpfSkgOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2NvbmZpcm1hdGlvbnM6IFsuLi5jb25maXJtYXRpb25zXS5jb25jYXQodGFza0xvb2t1cElkKX0pfVxyXG4gICAgICAgICAgICAgICAgdGl0bGU9e2Rlc2NyaWJlZEFjdGlvbn0+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgIDxhIGhyZWY9e2xlYXJuaW5nVGFzay51cmx9PntsZWFybmluZ1Rhc2submFtZX08L2E+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8Q29uZmlybWF0aW9uXHJcbiAgICAgICAgICAgIHZpc2libGU9e2NvbmZpcm1hdGlvblZpc2libGV9XHJcbiAgICAgICAgICAgIHRleHQ9e2Rlc2NyaWJlZEFjdGlvbn1cclxuICAgICAgICAgICAgb25Db25maXJtPXsoKT0+e1xyXG4gICAgICAgICAgICAgIHRoaXMudG9nZ2xlVGFzayhsZWFybmluZ1Rhc2spO1xyXG4gICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe2NvbmZpcm1hdGlvbnM6IGNvbmZpcm1hdGlvbnMuZmlsdGVyKHRpZCA9PiB0aWQgIT09IHRhc2tMb29rdXBJZCl9KTtcclxuICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgb25DYW5jZWw9eygpPT57XHJcbiAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7Y29uZmlybWF0aW9uczogY29uZmlybWF0aW9ucy5maWx0ZXIodGlkID0+IHRpZCAhPT0gdGFza0xvb2t1cElkKX0pO1xyXG4gICAgICAgICAgICB9fSAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIH1cclxuICAgICAgKX1cclxuICAgIDwvZGl2PlxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmV4cG9ydCBjb25zdCBMYW5ndWFnZUNvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0KHtpbnRsOiBudWxsfSk7IiwiaW1wb3J0IHtJbnRsUHJvdmlkZXIsIGFkZExvY2FsZURhdGF9IGZyb20gJ3JlYWN0LWludGwnO1xyXG5pbXBvcnQgbG9jYWxlX2VuIGZyb20gJ3JlYWN0LWludGwvbG9jYWxlLWRhdGEvZW4nO1xyXG5pbXBvcnQgbG9jYWxlX3N2IGZyb20gJ3JlYWN0LWludGwvbG9jYWxlLWRhdGEvc3YnO1xyXG5pbXBvcnQgbWVzc2FnZXNfc3YgZnJvbSBcIi4uLy4uL3RyYW5zbGF0aW9ucy9zdi5qc29uXCI7XHJcbmltcG9ydCBtZXNzYWdlc19lbiBmcm9tIFwiLi4vLi4vdHJhbnNsYXRpb25zL2VuLmpzb25cIjtcclxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgY2ZnIGZyb20gJy4uLy4uL2dsb2JhbHMvS0VELmNmZyc7XHJcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuXHJcbmV4cG9ydCBjb25zdCBzZXR1cEludGwgPSA8UCBleHRlbmRzIG9iamVjdD4oQ29tcG9uZW50OiBSZWFjdC5Db21wb25lbnRUeXBlPFA+KSA9PlxyXG4gICAgY2xhc3MgX1NldHVwTGFuZ3VhZ2VJbnRsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFA+e1xyXG4gICAgICAgIG1lc3NhZ2VzIDogb2JqZWN0O1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3Rvcihwcm9wcyl7XHJcbiAgICAgICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICAgICAgYWRkTG9jYWxlRGF0YShbLi4ubG9jYWxlX2VuLC4uLmxvY2FsZV9zdl0pO1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VzID0ge1xyXG4gICAgICAgICAgICAnc3YnOiBtZXNzYWdlc19zdixcclxuICAgICAgICAgICAgJ2VuJzogbWVzc2FnZXNfZW5cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgbW9tZW50KCkubG9jYWxlKGNmZy5LRURfTE9DQUxFKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlbmRlcigpe1xyXG4gICAgICAgICAgICByZXR1cm4gPEludGxQcm92aWRlciBsb2NhbGU9e2NmZy5LRURfTE9DQUxFfSBtZXNzYWdlcz17dGhpcy5tZXNzYWdlc1tjZmcuS0VEX0xPQ0FMRV19PlxyXG4gICAgICAgICAgICAgICAgPENvbXBvbmVudCB7Li4udGhpcy5wcm9wcyBhcyBQfSAvPlxyXG4gICAgICAgICAgICA8L0ludGxQcm92aWRlcj5cclxuICAgICAgICB9XHJcbiAgICB9IiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuXHJcbmV4cG9ydCBjb25zdCBBbGlnbkhvcml6b250YWwgPSAoe2NsYXNzTmFtZSwgY2xhc3NOYW1lcywgY2hpbGRyZW59OiB7Y2xhc3NOYW1lPzogc3RyaW5nLCBjbGFzc05hbWVzPzogc3RyaW5nW10sIGNoaWxkcmVuOiBhbnl9KSA9PiAoXHJcbiAgPGRpdiBjbGFzc05hbWU9e1suLi4oY2xhc3NOYW1lcyB8fCBbXSksIC4uLihjbGFzc05hbWUgPyBbY2xhc3NOYW1lXSA6IFtdKSwgXCJhbGlnbi1ob3Jpem9udGFsXCJdLmpvaW4oJyAnKX0+XHJcbiAgICB7Y2hpbGRyZW59XHJcbiAgPC9kaXY+XHJcbilcclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgYXZhaWxhYmxlOiB7bmFtZTogc3RyaW5nLCBrZXk6IHN0cmluZ31bXVxyXG4gIHNlbGVjdGVkOiBzdHJpbmdbXVxyXG4gIG9uQ2hhbmdlOiAoc2VsZWN0ZWQ6IHN0cmluZ1tdLCBjbGlja2VkS2V5OiBzdHJpbmcsIHdhc0NoZWNrZWQ6IGJvb2xlYW4pID0+IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBDaGVja2xpc3QgPSAoe2F2YWlsYWJsZSwgc2VsZWN0ZWQsIG9uQ2hhbmdlfTogUHJvcHMpID0+IDxkaXYgY2xhc3NOYW1lPVwidGFza0NvbnRhaW5lclwiPlxyXG4gIHtcclxuICAgIGF2YWlsYWJsZS5tYXAoKHtrZXksIG5hbWV9KSA9PiB7XHJcbiAgICAgIGNvbnN0IGNoZWNrZWQgPSBzZWxlY3RlZC5pbmNsdWRlcyhrZXkpO1xyXG4gICAgICByZXR1cm4gPGRpdiBrZXk9e2tleX0gY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIiBvbkNsaWNrPXsoKT0+XHJcbiAgICAgICAgICAgIG9uQ2hhbmdlKGNoZWNrZWQgP1xyXG4gICAgICAgICAgICAgIHNlbGVjdGVkLmZpbHRlcihrID0+IGsgIT0ga2V5KSA6XHJcbiAgICAgICAgICAgICAgc2VsZWN0ZWQuY29uY2F0KGtleSksXHJcbiAgICAgICAgICAgICAga2V5LFxyXG4gICAgICAgICAgICAgIGNoZWNrZWQpfT5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e1wiY2hlY2tCb3hcIiArIChjaGVja2VkID8gXCIgY2hlY2tlZFwiIDogXCJcIil9PjwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPntuYW1lfTwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICB9XHJcbiAgICApXHJcbiAgfVxyXG48L2Rpdj5cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBSZW1vdmVJdGVtIH0gZnJvbSAnLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvcmVtb3ZlLWl0ZW0nO1xyXG5pbXBvcnQgeyBmaW5kRE9NTm9kZSB9IGZyb20gJ3JlYWN0LWRvbSc7XHJcbmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGRpYWxvZ3M6IFJlYWN0LkNvbXBvbmVudFtdO1xyXG4gIHBvcERpYWxvZzogKCk9PnZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBEaWFsb2dzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzPiB7XHJcbiAgbGFzdERpdjogSFRNTERpdkVsZW1lbnQgfCBudWxsO1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IFByb3BzKSB7XHJcbiAgICBpZiAodGhpcy5sYXN0RGl2ICE9PSBudWxsICYmIHByZXZQcm9wcy5kaWFsb2dzLmxlbmd0aCA+IHRoaXMucHJvcHMuZGlhbG9ncy5sZW5ndGgpIHtcclxuICAgICAgLy8gQSBkaWFsb2cgd2FzIGNsb3NlZC4gTm93IGZvY3VzIHRoZSBsYXN0IGRpYWxvZzpcclxuICAgICAgJChmaW5kRE9NTm9kZSh0aGlzLmxhc3REaXYpKS5maW5kKCc6aW5wdXQnKS5maXJzdCgpLmZvY3VzKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXIgKCkge1xyXG4gICAgdGhpcy5sYXN0RGl2ID0gbnVsbDtcclxuICAgIGNvbnN0IHtkaWFsb2dzLCBwb3BEaWFsb2d9ID0gdGhpcy5wcm9wcztcclxuICAgICQoJ2JvZHknKS5hdHRyKCdhcmlhLWRpc2FibGVkJywgZGlhbG9ncy5sZW5ndGggPiAwKTtcclxuICAgICQoJ2JvZHknKS5jc3MoJ292ZXJmbG93JywgZGlhbG9ncy5sZW5ndGggPiAwID8gJ2hpZGRlbicgOiAnYXV0bycpO1xyXG5cclxuICAgIHJldHVybiBkaWFsb2dzLmxlbmd0aCA+IDAgJiYgPGRpdj5cclxuICAgICAge2RpYWxvZ3MubWFwKChkaWFsb2csIGlkeCkgPT4ge1xyXG4gICAgICAgIGxldCBkaXY6IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgICAgIGZ1bmN0aW9uIG9uS2V5UHJlc3MoZXY6IFJlYWN0LktleWJvYXJkRXZlbnQ8SFRNTERpdkVsZW1lbnQ+KSB7XHJcbiAgICAgICAgICBpZiAoZXYud2hpY2ggPT09IDEzICYmICghZXYudGFyZ2V0IHx8IChldi50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLnRhZ05hbWUgIT09ICdURVhUQVJFQScpKSB7XHJcbiAgICAgICAgICAgICQoZmluZERPTU5vZGUoZGl2KSkuZmluZCgnLmJ0bi1kZWZhdWx0JykuY2xpY2soKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiBvbktleURvd24oZXYpIHtcclxuICAgICAgICAgIGlmIChldi53aGljaCA9PT0gMjcpIHsgLy8gRXNjYXBlXHJcbiAgICAgICAgICAgIHBvcERpYWxvZygpO1xyXG4gICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGV2LndoaWNoID09PSA4MyAmJiAoZXYuY3RybEtleSB8fCBldi5tZXRhS2V5KSkgeyAvLyBDVFJMLVNcclxuICAgICAgICAgICAgY29uc3QgZG9tTm9kZSA9IGZpbmRET01Ob2RlKGRpdik7XHJcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRCdXR0b24gPSAkKGRvbU5vZGUpLmZpbmQoJy5idG4tZGVmYXVsdCcpO1xyXG4gICAgICAgICAgICBkZWZhdWx0QnV0dG9uLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gPGRpdiBrZXk9e2lkeH0+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGFya2VuXCIgLz5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb2RhbC1wYWdlLXdyYXBcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1vZGFsLXBhZ2VcIiByZWY9e2VsZW0gPT4ge1xyXG4gICAgICAgICAgZGl2ID0gZWxlbTtcclxuICAgICAgICAgIGlmIChpZHggPT09IGRpYWxvZ3MubGVuZ3RoIC0gMSkgdGhpcy5sYXN0RGl2ID0gZWxlbTtcclxuICAgICAgICB9fVxyXG4gICAgICAgICAgICB0YWJJbmRleD17MH1cclxuICAgICAgICAgICAgYXJpYS1kaXNhYmxlZD17aWR4IDwgZGlhbG9ncy5sZW5ndGggLSAxfVxyXG4gICAgICAgICAgICBvbktleVByZXNzPXtvbktleVByZXNzfVxyXG4gICAgICAgICAgICBvbktleURvd249e29uS2V5RG93bn0+XHJcbiAgICAgICAgICB7ZGlhbG9nfVxyXG4gICAgICAgICAgPFJlbW92ZUl0ZW0gb25DbGljaz17cG9wRGlhbG9nfSAvPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdG9wRmxvYXRzXCI+PC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+fSl9XHJcbiAgPC9kaXY+O1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IEZvcm1GaWVsZCB9IGZyb20gJy4vZm9ybS1maWVsZCc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGxhYmVsOiBhbnk7XHJcbiAgaWQ6IHN0cmluZztcclxuICB2YWx1ZTogc3RyaW5nO1xyXG4gIHBsYWNlaG9sZGVyPzogc3RyaW5nO1xyXG4gIGF1dG9Gb2N1cz86IGJvb2xlYW47XHJcbiAgb25DaGFuZ2U6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVGV4dElucHV0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzPiB7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPEZvcm1GaWVsZCBsYWJlbD17dGhpcy5wcm9wcy5sYWJlbH0+XHJcbiAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgYXV0b0ZvY3VzPXt0aGlzLnByb3BzLmF1dG9Gb2N1c30gaWQ9e3RoaXMucHJvcHMuaWR9IHNpemU9ezM1fSB2YWx1ZT17dGhpcy5wcm9wcy52YWx1ZX1cclxuICAgICAgICAgICAgICBvbkNoYW5nZT17ZXYgPT4gdGhpcy5wcm9wcy5vbkNoYW5nZShldi50YXJnZXQudmFsdWUpfVxyXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0aGlzLnByb3BzLnBsYWNlaG9sZGVyfSAvPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvRm9ybUZpZWxkPlxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgRm9ybUZpZWxkIH0gZnJvbSAnLi9mb3JtLWZpZWxkJztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgbGFiZWw6IGFueTtcclxuICBpZDogc3RyaW5nO1xyXG4gIHZhbHVlOiBzdHJpbmc7XHJcbiAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7XHJcbiAgYXV0b0ZvY3VzPzogYm9vbGVhbjtcclxuICByb3dzPzogbnVtYmVyO1xyXG4gIGNoaWxkcmVuPztcclxuICBvbkNoYW5nZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUZXh0QXJlYUZvcm1GaWVsZCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcz4ge1xyXG4gIGNvbnN0cnVjdG9yIChwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxGb3JtRmllbGQgbGFiZWw9e3RoaXMucHJvcHMubGFiZWx9IGlkPXt0aGlzLnByb3BzLmlkfT5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgIDx0ZXh0YXJlYSBhdXRvRm9jdXM9e3RoaXMucHJvcHMuYXV0b0ZvY3VzfSBpZD17dGhpcy5wcm9wcy5pZH0gY29scz17MzV9IHJvd3M9e3RoaXMucHJvcHMucm93cyB8fCA1fSB2YWx1ZT17dGhpcy5wcm9wcy52YWx1ZX1cclxuICAgICAgICAgICAgICBvbkNoYW5nZT17ZXYgPT4gdGhpcy5wcm9wcy5vbkNoYW5nZShldi50YXJnZXQudmFsdWUpfVxyXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXt0aGlzLnByb3BzLnBsYWNlaG9sZGVyfSAvPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICB7ISF0aGlzLnByb3BzLmNoaWxkcmVuICYmIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW1cIj5cclxuICAgICAgICAgICAge3RoaXMucHJvcHMuY2hpbGRyZW59XHJcbiAgICAgICAgICA8L2Rpdj59XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvRm9ybUZpZWxkPlxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgbGFiZWw6IGFueTtcclxuICBjaGlsZHJlbjogYW55O1xyXG4gIGlkPzogc3RyaW5nO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmaW5kSWQobm9kZSkge1xyXG4gIGNvbnN0IHJlY3VjaGVjayA9IG5ldyBTZXQoKTtcclxuICByZXR1cm4gKGZ1bmN0aW9uIGZpbmRJZChub2RlKXtcclxuICAgIGlmICh0eXBlb2Ygbm9kZSA9PT0gJ3N0cmluZycpIHJldHVybiBudWxsO1xyXG4gICAgaWYgKHJlY3VjaGVjay5oYXMobm9kZSkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgcmVjdWNoZWNrLmFkZChub2RlKTtcclxuICAgIGlmIChub2RlLnByb3BzKSB7XHJcbiAgICAgIGlmIChub2RlLnByb3BzLmlkKSByZXR1cm4gbm9kZS5wcm9wcy5pZDtcclxuICAgICAgaWYgKG5vZGUucHJvcHMuY2hpbGRyZW4pIHtcclxuICAgICAgICByZXR1cm4gZmluZElkKG5vZGUucHJvcHMuY2hpbGRyZW4pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChub2RlLmxlbmd0aCkge1xyXG4gICAgICBmb3IgKGxldCBpPTA7aTxub2RlLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgY29uc3QgY2hpbGQgPSBub2RlW2ldO1xyXG4gICAgICAgIGlmIChjaGlsZCkge1xyXG4gICAgICAgICAgY29uc3QgY2hpbGRJZCA9IGZpbmRJZChjaGlsZCk7XHJcbiAgICAgICAgICBpZiAoY2hpbGRJZCkgcmV0dXJuIGNoaWxkSWQ7XHJcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKGNoaWxkKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KShub2RlKTtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEZvcm1GaWVsZCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcz4ge1xyXG4gIGNvbnN0cnVjdG9yIChwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIHJldHVybiA8PlxyXG4gICAgICAgIDxsYWJlbCBjbGFzc05hbWU9XCJrY2xhYmVsXCIgaHRtbEZvcj17dGhpcy5wcm9wcy5pZCB8fCBmaW5kSWQodGhpcy5wcm9wcy5jaGlsZHJlbil9Pnt0aGlzLnByb3BzLmxhYmVsfTwvbGFiZWw+XHJcbiAgICAgICAge3RoaXMucHJvcHMuY2hpbGRyZW59XHJcbiAgICA8Lz5cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuXHJcbmV4cG9ydCBjb25zdCBIb3Jpem9udGFsSXRlbSA9ICh7Y2xhc3NOYW1lLCBjbGFzc05hbWVzLCBjaGlsZHJlbn06IHtjbGFzc05hbWU/OiBzdHJpbmcsIGNsYXNzTmFtZXM/OiBzdHJpbmdbXSwgY2hpbGRyZW46IGFueX0pID0+IChcclxuICA8ZGl2IGNsYXNzTmFtZT17Wy4uLihjbGFzc05hbWVzIHx8IFtdKSwgLi4uKGNsYXNzTmFtZSA/IFtjbGFzc05hbWVdIDogW10pLCBcImhvcml6b250YWxJdGVtXCJdLmpvaW4oJyAnKX0+XHJcbiAgICB7Y2hpbGRyZW59XHJcbiAgPC9kaXY+XHJcbilcclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAna2VkYmFja2VuZC9vYnNlcnZhYmxlJztcclxuaW1wb3J0IHsgTGl2ZVF1ZXJ5VmlldyB9IGZyb20gJy4vbGl2ZS1xdWVyeS12aWV3JztcclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgY2hpbGRyZW46IE9ic2VydmFibGU8SlNYLkVsZW1lbnQ+O1xyXG4gIHNwaW5uZXI/OiBKU1guRWxlbWVudDtcclxuICBub0Vycm9yPzogYm9vbGVhbjtcclxuICBvbkVycm9yPzogKGVycm9yOiBFcnJvcikgPT4gSlNYLkVsZW1lbnQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBMYXp5Q29udGVudCh7Y2hpbGRyZW4sIHNwaW5uZXIsIG9uRXJyb3IsIG5vRXJyb3J9OiBQcm9wcykge1xyXG4gIHJldHVybiA8TGl2ZVF1ZXJ5Vmlld1xyXG4gICAgcHJvcHM9e2NoaWxkcmVufVxyXG4gICAgc3Bpbm5lcj17c3Bpbm5lcn1cclxuICAgIG5vRXJyb3I9e25vRXJyb3J9XHJcbiAgICBvbkVycm9yPXtvbkVycm9yfVxyXG4gICAgZm49e29ic2VydmFibGUgPT4gb2JzZXJ2YWJsZX0gLz47XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBTcGlubmVyIH0gZnJvbSAnLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvc3Bpbm5lcic7XHJcbmltcG9ydCB7IHNoYWxsb3dFcXVhbHMgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YnNjcmlwdGlvbiB9IGZyb20gJ2tlZGJhY2tlbmQvb2JzZXJ2YWJsZSc7XHJcblxyXG5pbnRlcmZhY2UgT3B0aW9ucyB7XHJcbiAgc3Bpbm5lcj86IEpTWC5FbGVtZW50O1xyXG4gIG9uRXJyb3I/OiAoZXJyb3I6IEVycm9yKSA9PiBKU1guRWxlbWVudDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGxpdmVRdWVyeVZpZXc8VFByb3BzPihcclxuICBmbjogKHByb3BzOiBUUHJvcHMpID0+IE9ic2VydmFibGU8SlNYLkVsZW1lbnQ+LFxyXG4gIG9wdGlvbnM/OiBPcHRpb25zKTogKHByb3BzOiBUUHJvcHMpID0+IEpTWC5FbGVtZW50XHJcbntcclxuICByZXR1cm4gKHByb3BzOiBUUHJvcHMpPT57XHJcbiAgICByZXR1cm4gPExpdmVRdWVyeVZpZXcgcHJvcHM9e3Byb3BzfSBmbj17Zm59IHsuLi5vcHRpb25zfSAvPjtcclxuICB9XHJcbn1cclxuXHJcbmludGVyZmFjZSBQcm9wczxUUHJvcHM+IHtcclxuICBwcm9wczogVFByb3BzO1xyXG4gIHNwaW5uZXI/OiBKU1guRWxlbWVudDtcclxuICBub0Vycm9yPzogYm9vbGVhbjtcclxuICBvbkVycm9yPzogKGVycm9yOiBFcnJvcikgPT4gSlNYLkVsZW1lbnQ7XHJcbiAgZm46IChwcm9wczogVFByb3BzKSA9PiBPYnNlcnZhYmxlPEpTWC5FbGVtZW50PjtcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICByZXN1bHQ6IEpTWC5FbGVtZW50O1xyXG4gIGVycm9yPzogRXJyb3I7XHJcbiAgaXNMb2FkaW5nOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgTGl2ZVF1ZXJ5VmlldzxUUHJvcHM+IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzPFRQcm9wcz4sIFN0YXRlPiB7XHJcbiAgcHJpdmF0ZSBzdWJzY3JpcHRpb24/OiBTdWJzY3JpcHRpb247XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wczxUUHJvcHM+KSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICByZXN1bHQ6IG51bGwsXHJcbiAgICAgIGlzTG9hZGluZzogdHJ1ZVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgdGhpcy5zdWJzY3JpYmUoKTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgdGhpcy51bnN1YnNjcmliZSgpO1xyXG4gIH1cclxuXHJcbiAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wczogUHJvcHM8VFByb3BzPiwgbmV4dFN0YXRlOiBTdGF0ZSkge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgdGhpcy5zdGF0ZS5lcnJvciAhPT0gbmV4dFN0YXRlLmVycm9yIHx8XHJcbiAgICAgIHRoaXMuc3RhdGUuaXNMb2FkaW5nICE9PSBuZXh0U3RhdGUuaXNMb2FkaW5nIHx8XHJcbiAgICAgIHRoaXMuc3RhdGUucmVzdWx0ICE9PSBuZXh0U3RhdGUucmVzdWx0IHx8XHJcbiAgICAgICFzaGFsbG93RXF1YWxzKG5leHRQcm9wcy5wcm9wcywgdGhpcy5wcm9wcy5wcm9wcylcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBQcm9wczxUUHJvcHM+KSB7XHJcbiAgICBpZiAoIXNoYWxsb3dFcXVhbHMocHJldlByb3BzLnByb3BzLCB0aGlzLnByb3BzLnByb3BzKSkge1xyXG4gICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgIHRoaXMuc3Vic2NyaWJlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdWJzY3JpYmUoKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHtpc0xvYWRpbmc6IHRydWV9IGFzIGFueSk7XHJcbiAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IHRoaXMucHJvcHMuZm4odGhpcy5wcm9wcy5wcm9wcykuc3Vic2NyaWJlKChyZXN1bHQsIGVycm9yKSA9PiB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgcmVzdWx0LFxyXG4gICAgICBlcnJvcixcclxuICAgICAgaXNMb2FkaW5nOiBmYWxzZVxyXG4gICAgfSkpO1xyXG4gIH1cclxuXHJcbiAgdW5zdWJzY3JpYmUoKSB7XHJcbiAgICBpZiAodGhpcy5zdWJzY3JpcHRpb24pIHtcclxuICAgICAgdGhpcy5zdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgdGhpcy5zdWJzY3JpcHRpb24gPSBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qge3Jlc3VsdCwgZXJyb3IsIGlzTG9hZGluZ30gPSB0aGlzLnN0YXRlO1xyXG4gICAgY29uc3Qge3NwaW5uZXIsIG9uRXJyb3IsIG5vRXJyb3J9ID0gdGhpcy5wcm9wcztcclxuICAgIC8vaWYgKCFpc0xvYWRpbmcgJiYgIXJlc3VsdCkgZGVidWdnZXI7XHJcbiAgICByZXR1cm4gZXJyb3IgP1xyXG4gICAgICBub0Vycm9yID8gXCJcIiA6IG9uRXJyb3IgPyBvbkVycm9yKGVycm9yKSA6IDxwPkVycm9yOiB7ZXJyb3IubWVzc2FnZX08L3A+IDpcclxuICAgICAgaXNMb2FkaW5nID9cclxuICAgICAgICBzcGlubmVyID8gc3Bpbm5lciA6IFwiXCIgOlxyXG4gICAgICAgIHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IHJlc3VsdDtcclxuICB9XHJcbn0iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFJlc3RDbGllbnRTdGF0dXMgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7IFZhbHVlIH0gZnJvbSAna2VkYmFja2VuZC9vYnNlcnZhYmxlJztcclxuaW1wb3J0IHsgbGl2ZVF1ZXJ5VmlldyB9IGZyb20gJy4vbGl2ZS1xdWVyeS12aWV3JztcclxuaW1wb3J0IHsgU3Bpbm5lciB9IGZyb20gJy4uL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3NwaW5uZXInO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uLy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IEVsbGlwc2lzTG9hZGVyIH0gZnJvbSAnLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvZWxsaXBzaXMtbG9hZGVyJztcclxuXHJcbmV4cG9ydCBjb25zdCBMb2FkaW5nSW5kaWNhdG9yID0gbGl2ZVF1ZXJ5VmlldygoKSA9PlxyXG4gIGVudi5rZWRCYWNrZW5kQ2xpZW50Lmh0dHAuc3RhdHVzLmNvbWJpbmVMYXRlc3QoZW52LmVkc0NsaWVudC5odHRwLnN0YXR1cylcclxuICAubWFwKChba2VkQmFja2VuZFN0YXR1cywgZWRzU3RhdHVzXSk9PjxkaXYgY2xhc3NOYW1lPVwibG9hZGluZy1pbmRpY2F0b3JcIj48ZGl2IGNsYXNzTmFtZT1cImluZGljYXRvclwiPlxyXG4gICAge2tlZEJhY2tlbmRTdGF0dXMubnVtT3V0c3RhbmRpbmdPcGVyYXRpb25zID4gMCB8fCBlZHNTdGF0dXMubnVtT3V0c3RhbmRpbmdPcGVyYXRpb25zID4gMCA/XHJcbiAgICAgIDxTcGlubmVyIC8+IDogdW5kZWZpbmVkfVxyXG48L2Rpdj48L2Rpdj4pKTtcclxuIiwiLyogUkVGQUNUT1I6IE1vdmUgdGhpcyBjb21wb25lbnQgb3V0c2lkZSBjb3Vyc2VidWlsZGVyIVxyXG4gICBUaGlzIGlzIGEgZ2VuZXJhbC1wdXJwb3NlIGNvbXBvbmVudFxyXG4qL1xyXG5cclxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBHb2FsUHJvZ3Jlc3MgfSBmcm9tICcuLi9jaGFydHMvZ29hbC1wcm9ncmVzcyc7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHRpdGxlOiBzdHJpbmcgfCBKU1guRWxlbWVudDtcclxuICBjbGFzc05hbWU/OiBzdHJpbmc7XHJcbiAgaGVhZGVyQ2xhc3NOYW1lPzogc3RyaW5nO1xyXG4gIGNvbnRlbnRDbGFzc05hbWU/OiBzdHJpbmc7XHJcbiAgaGVhZGVyT3Blbj86IGJvb2xlYW47XHJcbiAgaW5hY3RpdmF0ZWQ/OiBib29sZWFuO1xyXG4gIGluYWN0aXZhdGVkUmVuZGVyPzogJ2NoaWxkcmVuJyB8ICd0aXRsZUFuZENoaWxkcmVuJztcclxuICBvbk9wZW5DbG9zZT86IChiZWNhbWVPcGVuOiBib29sZWFuKSA9PiB2b2lkO1xyXG4gIGRpc3BsYXlQcm9ncmVzcz86IGJvb2xlYW47XHJcbiAgcHJvZ3Jlc3NEYXRhPzoge2NvbXBsZXRlZE51bWJlck9mVGFza3M6IG51bWJlciwgbnVtYmVyT2ZUYXNrczogbnVtYmVyfTtcclxuICBjaGlsZHJlbjtcclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICBoZWFkZXJPcGVuOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgT3BlbkNsb3NlQm94IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLFN0YXRlPiB7XHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBoZWFkZXJPcGVuOiBwcm9wcy5oZWFkZXJPcGVuIHx8IGZhbHNlXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyAobmV4dFByb3BzOiBQcm9wcykge1xyXG4gICAgaWYgKG5leHRQcm9wcy5oZWFkZXJPcGVuICE9PSB0aGlzLnByb3BzLmhlYWRlck9wZW4pIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7aGVhZGVyT3BlbjogbmV4dFByb3BzLmhlYWRlck9wZW59KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHsgdGl0bGUsIGNsYXNzTmFtZSwgY2hpbGRyZW4sIGhlYWRlckNsYXNzTmFtZSwgY29udGVudENsYXNzTmFtZSwgZGlzcGxheVByb2dyZXNzLCBwcm9ncmVzc0RhdGEsXHJcbiAgICAgIGluYWN0aXZhdGVkLCBpbmFjdGl2YXRlZFJlbmRlciB9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IHsgaGVhZGVyT3BlbiB9ID0gdGhpcy5zdGF0ZTtcclxuXHJcbiAgICBpZiAoaW5hY3RpdmF0ZWQpIHJldHVybiBpbmFjdGl2YXRlZFJlbmRlciA9PT0gJ3RpdGxlQW5kQ2hpbGRyZW4nID8gPD5cclxuICAgICAgPD57dGl0bGV9PC8+XHJcbiAgICAgIDw+e2NoaWxkcmVufTwvPlxyXG4gICAgPC8+IDogPD5cclxuICAgICAge2NoaWxkcmVufVxyXG4gICAgPC8+O1xyXG5cclxuICAgIC8vdmFyIGN1cnJlbnRQcm9ncmVzc0RhdGEgPSAvL3Byb2dyZXNzRGF0YSgpO1xyXG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPXsoY2xhc3NOYW1lfHwnJykgKyBcIiBvcGVuQ2xvc2VcIiArIChoZWFkZXJPcGVuID8gXCIgb3BlblwiIDogXCJcIil9PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17XCJvcGVuSGVhZGVyXCIgKyAoaGVhZGVyQ2xhc3NOYW1lID8gXCIgXCIgKyBoZWFkZXJDbGFzc05hbWUgOiBcIlwiKX1cclxuICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XHJcbiAgICAgICAgICBpZiAodGhpcy5wcm9wcy5vbk9wZW5DbG9zZSkgdGhpcy5wcm9wcy5vbk9wZW5DbG9zZSghdGhpcy5zdGF0ZS5oZWFkZXJPcGVuKTtcclxuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBoZWFkZXJPcGVuOiAhdGhpcy5zdGF0ZS5oZWFkZXJPcGVuIH0pO1xyXG4gICAgICAgIH19ID5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm9wZW5IZWFkZXJDb250YWluZXJcIj5cclxuICAgICAgICAgIDxkaXY+e3RpdGxlfTwvZGl2PlxyXG4gICAgICAgICAge2Rpc3BsYXlQcm9ncmVzcyAmJiA8R29hbFByb2dyZXNzIHsuLi5wcm9ncmVzc0RhdGF9Lz59XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17XCJvcGVuQ29udGVudFwiICsgKGNvbnRlbnRDbGFzc05hbWUgPyBcIiBcIiArIGNvbnRlbnRDbGFzc05hbWUgOiBcIlwiKX0+XHJcbiAgICAgICAge2NoaWxkcmVufVxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBUYXNrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUYXNrV2l0aE1ldGFkYXRhIHtcclxuICB0YXNrOiBUYXNrO1xyXG4gIGlzVGFza093bmVyOiBib29sZWFuO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIHRhc2tNZXRhczogVGFza1dpdGhNZXRhZGF0YVtdO1xyXG4gIG9uU29ydDogKHNvdXJjZTogVGFzaywgdGFyZ2V0OiBUYXNrLCBwbGFjZW1lbnQ6ICdiZWZvcmUnIHwgJ2FmdGVyJykgPT4gdm9pZDtcclxuICByZW5kZXJFZGl0TGluaz86ICh0YXNrTWV0YTogVGFza1dpdGhNZXRhZGF0YSkgPT4gYW55O1xyXG4gIHJlbmRlckxpbms6ICh0YXNrTWV0YTogVGFza1dpdGhNZXRhZGF0YSkgPT4gYW55O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdGFza0hhc01pZ3JhdGVkVGV4dHModGFzazogVGFzaykge1xyXG4gIHJldHVybiB0YXNrLm1pZ3JhdGVkVGV4dHMgJiYgT2JqZWN0LmtleXModGFzay5taWdyYXRlZFRleHRzKS5zb21lKHR5cGUgPT5cclxuICAgIE9iamVjdC5rZXlzKHRhc2subWlncmF0ZWRUZXh0c1t0eXBlXSkubGVuZ3RoID4gMCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBTb3J0YWJsZVRhc2tMaXN0KHt0YXNrTWV0YXMsIHJlbmRlckVkaXRMaW5rLCByZW5kZXJMaW5rLCBvblNvcnR9OiBQcm9wcykge1xyXG4gIGNvbnN0IFtkcmFnU3RhdGUsIHNldERyYWdTdGF0ZV0gPSB1c2VTdGF0ZSh7XHJcbiAgICB0YXNrQmVpbmdEcmFnZ2VkOiBudWxsIGFzIFRhc2sgfCBudWxsLFxyXG4gICAgdGFza0JlaW5nSG92ZXJlZDogbnVsbCBhcyBUYXNrIHwgbnVsbCxcclxuICAgIGluc2VydEJlZm9yZTogZmFsc2UsXHJcbiAgICBvcmlnaW5DbGllbnRZOiAtMVxyXG4gIH0pO1xyXG4gIGNvbnN0IHt0YXNrQmVpbmdEcmFnZ2VkLCB0YXNrQmVpbmdIb3ZlcmVkLCBpbnNlcnRCZWZvcmUsIG9yaWdpbkNsaWVudFl9ID0gZHJhZ1N0YXRlO1xyXG5cclxuICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJ0YXNrQ29udGFpbmVyIHNvcnRhYmxlXCJcclxuICAgICAgb25Ecm9wPXtldiA9PiB7XHJcbiAgICAgICAgaWYgKHRhc2tCZWluZ0hvdmVyZWQgJiYgdGFza0JlaW5nRHJhZ2dlZCkge1xyXG4gICAgICAgICAgb25Tb3J0KHRhc2tCZWluZ0RyYWdnZWQsIHRhc2tCZWluZ0hvdmVyZWQsIGluc2VydEJlZm9yZSA/ICdiZWZvcmUnIDogJ2FmdGVyJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldERyYWdTdGF0ZSh7Li4uZHJhZ1N0YXRlLCB0YXNrQmVpbmdIb3ZlcmVkOiBudWxsLCB0YXNrQmVpbmdEcmFnZ2VkOiBudWxsfSk7XHJcbiAgICAgIH19XHJcbiAgICA+XHJcbiAge3Rhc2tNZXRhcy5tYXAodGFza01ldGEgPT4ge1xyXG4gICAgY29uc3Qge3Rhc2ssIGlzVGFza093bmVyfSA9IHRhc2tNZXRhO1xyXG4gICAgY29uc3QgaGFzTWlncmF0ZWRUZXh0cyA9IHRhc2tIYXNNaWdyYXRlZFRleHRzKHRhc2spO1xyXG4gICAgY29uc3QgdGFza0lkID0gdGFzay5pZDtcclxuXHJcbiAgICByZXR1cm4gPFJlYWN0LkZyYWdtZW50IGtleT17dGFza0lkfT5cclxuXHJcbiAgICAgIHtpbnNlcnRCZWZvcmUgJiYgdGFza0JlaW5nSG92ZXJlZCA9PT0gdGFzayA/XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkcm9wLXRhcmdldFwiIG9uRHJhZ092ZXI9e2V2ID0+IGV2LnByZXZlbnREZWZhdWx0KCl9PiZuYnNwOzwvZGl2PiA6XHJcbiAgICAgICAgbnVsbFxyXG4gICAgICB9XHJcblxyXG4gICAgICA8ZGl2XHJcbiAgICAgICAgY2xhc3NOYW1lPXtbXCJhbGlnbi1ob3Jpem9udGFsXCIsIFwiZHJhZ2dhYmxlXCIsIHRhc2sgPT09IHRhc2tCZWluZ0RyYWdnZWQgJiYgXCJkcmFnLXNvdXJjZVwiXS5maWx0ZXIoeD0+eCkuam9pbignICcpfVxyXG4gICAgICAgIGRyYWdnYWJsZT17dHJ1ZX1cclxuICAgICAgICBvbkRyYWdTdGFydD17ZXYgPT4ge1xyXG4gICAgICAgICAgZXYuZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQgPSBcIm1vdmVcIjtcclxuICAgICAgICAgIHNldERyYWdTdGF0ZSh7Li4uZHJhZ1N0YXRlLCBvcmlnaW5DbGllbnRZOiBldi5jbGllbnRZLCB0YXNrQmVpbmdEcmFnZ2VkOiB0YXNrfSlcclxuICAgICAgICB9fVxyXG4gICAgICAgIG9uRHJhZ092ZXI9e2V2ID0+IHtcclxuICAgICAgICAgIGlmICghdGFza0JlaW5nRHJhZ2dlZCkgcmV0dXJuO1xyXG4gICAgICAgICAgaWYgKHRhc2tCZWluZ0RyYWdnZWQgPT09IHRhc2spIHtcclxuICAgICAgICAgICAgc2V0RHJhZ1N0YXRlKHsuLi5kcmFnU3RhdGUsIHRhc2tCZWluZ0hvdmVyZWQ6IG51bGx9KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIGV2LmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gXCJtb3ZlXCI7XHJcbiAgICAgICAgICBzZXREcmFnU3RhdGUoey4uLmRyYWdTdGF0ZSwgdGFza0JlaW5nSG92ZXJlZDogdGFzaywgaW5zZXJ0QmVmb3JlOiBvcmlnaW5DbGllbnRZID4gZXYuY2xpZW50WX0pO1xyXG4gICAgICAgIH19XHJcbiAgICAgICAgb25EcmFnRW5kPXtldiA9PiB7XHJcbiAgICAgICAgICBzZXREcmFnU3RhdGUoey4uLmRyYWdTdGF0ZSwgdGFza0JlaW5nSG92ZXJlZDogbnVsbCwgdGFza0JlaW5nRHJhZ2dlZDogbnVsbH0pO1xyXG4gICAgICAgIH19PlxyXG4gICAgICAgIHtpc1Rhc2tPd25lciAmJiBoYXNNaWdyYXRlZFRleHRzICYmIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICA8ZGl2IHN0eWxlPXt7cG9zaXRpb246J3JlbGF0aXZlJywgdG9wOicwLjJlbScsIGxlZnQ6ICctMC43ZW0nfX0+XHJcbiAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLXBhZ2VsaW5lc1wiIHN0eWxlPXt7cG9zaXRpb246J2Fic29sdXRlJywgdG9wOiAwLCBsZWZ0OiAwLCBjb2xvcjonIzQ5YzM1YSd9fSAvPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+fVxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICB7cmVuZGVyRWRpdExpbmsodGFza01ldGEpfVxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICB7cmVuZGVyTGluayh0YXNrTWV0YSl9XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgeyFpbnNlcnRCZWZvcmUgJiYgdGFza0JlaW5nSG92ZXJlZCA9PT0gdGFzayA/XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkcm9wLXRhcmdldFwiIG9uRHJhZ092ZXI9e2V2ID0+IGV2LnByZXZlbnREZWZhdWx0KCl9PiZuYnNwOzwvZGl2PiA6XHJcbiAgICAgICAgbnVsbFxyXG4gICAgICB9XHJcblxyXG4gICAgPC9SZWFjdC5GcmFnbWVudD47XHJcbiAgfSl9XHJcbiAgPC9kaXY+O1xyXG59XHJcbiIsImltcG9ydCBleGVjIGZyb20gJy4vZXhlYyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgYm9sZDoge1xyXG4gICAgaWNvbjogJzxiPkY8L2I+JyxcclxuICAgIHRpdGxlOiAnRmV0c3RpbCcsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2JvbGQnKVxyXG4gIH0sXHJcbiAgaXRhbGljOiB7XHJcbiAgICBpY29uOiAnPGk+SzwvaT4nLFxyXG4gICAgdGl0bGU6ICdLdXJzaXYnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdpdGFsaWMnKVxyXG4gIH0sXHJcbiAgdW5kZXJsaW5lOiB7XHJcbiAgICBpY29uOiAnPHU+VTwvdT4nLFxyXG4gICAgdGl0bGU6ICdVbmRlcnN0cnVrZW4nLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCd1bmRlcmxpbmUnKVxyXG4gIH0sXHJcbiAgc3RyaWtldGhyb3VnaDoge1xyXG4gICAgaWNvbjogJzxzdHJpa2U+Uzwvc3RyaWtlPicsXHJcbiAgICB0aXRsZTogJ1N0cnVrZW4nLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdzdHJpa2VUaHJvdWdoJylcclxuICB9LFxyXG4gIGhlYWRpbmcxOiB7XHJcbiAgICBpY29uOiAnPGI+SDxzdWI+MTwvc3ViPjwvYj4nLFxyXG4gICAgdGl0bGU6ICdSdWJyaWsgMScsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxIMT4nKVxyXG4gIH0sXHJcbiAgaGVhZGluZzI6IHtcclxuICAgIGljb246ICc8Yj5IPHN1Yj4yPC9zdWI+PC9iPicsXHJcbiAgICB0aXRsZTogJ1J1YnJpayAyJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnZm9ybWF0QmxvY2snLCAnPEgyPicpXHJcbiAgfSxcclxuICBoZWFkaW5nMzoge1xyXG4gICAgaWNvbjogJzxiPkg8c3ViPjM8L3N1Yj48L2I+JyxcclxuICAgIHRpdGxlOiAnUnVicmlrIDMnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8SDM+JylcclxuICB9LFxyXG4gIHBhcmFncmFwaDoge1xyXG4gICAgaWNvbjogJyYjMTgyOycsXHJcbiAgICB0aXRsZTogJ1BhcmFncmFmJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnZm9ybWF0QmxvY2snLCAnPFA+JylcclxuICB9LFxyXG4gIHF1b3RlOiB7XHJcbiAgICBpY29uOiAnJiM4MjIwOyAmIzgyMjE7JyxcclxuICAgIHRpdGxlOiAnQ2l0YXQnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8QkxPQ0tRVU9URT4nKVxyXG4gIH0sXHJcbiAgb2xpc3Q6IHtcclxuICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWxpc3Qtb2xcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JyxcclxuICAgIHRpdGxlOiAnT3JkbmFkIGxpc3RhJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnaW5zZXJ0T3JkZXJlZExpc3QnKVxyXG4gIH0sXHJcbiAgdWxpc3Q6IHtcclxuICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWxpc3RcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JyxcclxuICAgIHRpdGxlOiAnUHVua3RsaXN0YScsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2luc2VydFVub3JkZXJlZExpc3QnKVxyXG4gIH0sXHJcbiAgb3V0ZGVudDoge1xyXG4gICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtb3V0ZGVudFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nLFxyXG4gICAgdGl0bGU6ICdNaW5za2EgaW5kcmFnJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYyhcIm91dGRlbnRcIilcclxuICB9LFxyXG4gIGluZGVudDoge1xyXG4gICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtaW5kZW50XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPicsXHJcbiAgICB0aXRsZTogJ8OWa2EgaW5kcmFnJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYyhcImluZGVudFwiKSxcclxuICB9LFxyXG4gIGNvZGU6IHtcclxuICAgIGljb246ICcmbHQ7LyZndDsnLFxyXG4gICAgdGl0bGU6ICdQcm9ncmFta29kJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnZm9ybWF0QmxvY2snLCAnPFBSRT4nKVxyXG4gIH0sXHJcbiAgbGluZToge1xyXG4gICAgaWNvbjogJyYjODIxMzsnLFxyXG4gICAgdGl0bGU6ICdWw6VncsOkdCBsaW5qZScsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2luc2VydEhvcml6b250YWxSdWxlJylcclxuICB9LFxyXG4gIGxpbms6IHtcclxuICAgIGljb246ICc8aSBjbGFzcz1cImZhIGZhLWxpbmtcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+JyxcclxuICAgIHRpdGxlOiAnSW5mb2dhIGzDpG5rJyxcclxuICAgIHJlc3VsdDogKCkgPT4ge1xyXG4gICAgICBjb25zdCB1cmwgPSB3aW5kb3cucHJvbXB0KCdBbmdlIGzDpG5rZW5zIFVSTCcpXHJcbiAgICAgIGlmICh1cmwpIGV4ZWMoJ2NyZWF0ZUxpbmsnLCB1cmwpXHJcbiAgICB9XHJcbiAgfSxcclxuICBpbWFnZToge1xyXG4gICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtcGljdHVyZS1vXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPicsXHJcbiAgICB0aXRsZTogJ0luZm9nYSBiaWxkJyxcclxuICAgIHByb21wdE1zZzogJ0FuZ2UgYmlsZGVucyBVUkwnLFxyXG4gICAgcmVzdWx0IChldiwgY29tcG9uZW50KSB7XHJcbiAgICAgIGNvbnN0IHVybCA9IHdpbmRvdy5wcm9tcHQodGhpcy5wcm9tcHRNc2cpO1xyXG4gICAgICBpZiAodXJsKSB7XHJcbiAgICAgICAgLy9leGVjKCdpbnNlcnRJbWFnZScsIHVybCk7XHJcbiAgICAgICAgY29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgICAgICBpbWcuc3JjID0gdXJsO1xyXG4gICAgICAgIGltZy50YWJJbmRleCA9IDE7XHJcbiAgICAgICAgaW5zZXJ0RWxlbWVudChpbWcpO1xyXG4gICAgICAgIGltZy5vbmZvY3VzID0gY29tcG9uZW50Lm9uRm9jdXM7XHJcbiAgICAgICAgaW1nLm9uYmx1ciA9IGNvbXBvbmVudC5vbkJsdXI7XHJcbiAgICAgICAgY29tcG9uZW50LnByb3BzLm9uQ2hhbmdlKGNvbXBvbmVudC5jb250ZW50RGl2LmlubmVySFRNTCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluc2VydEVsZW1lbnQoZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcclxuICAgIHZhciBzZWwsIHJhbmdlO1xyXG4gICAgaWYgKHdpbmRvdy5nZXRTZWxlY3Rpb24gJiYgKHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKSkucmFuZ2VDb3VudCkge1xyXG4gICAgICAgIHJhbmdlID0gc2VsLmdldFJhbmdlQXQoMCk7XHJcbiAgICAgICAgcmFuZ2UuY29sbGFwc2UodHJ1ZSk7XHJcbiAgICAgICAgcmFuZ2UuaW5zZXJ0Tm9kZShlbGVtZW50KTtcclxuICAgICAgICAvLyBNb3ZlIHRoZSBjYXJldCBpbW1lZGlhdGVseSBhZnRlciB0aGUgaW5zZXJ0ZWQgc3BhblxyXG4gICAgICAgIHJhbmdlLnNldFN0YXJ0QWZ0ZXIoZWxlbWVudCk7XHJcbiAgICAgICAgcmFuZ2UuY29sbGFwc2UodHJ1ZSk7XHJcbiAgICAgICAgc2VsLnJlbW92ZUFsbFJhbmdlcygpO1xyXG4gICAgICAgIHNlbC5hZGRSYW5nZShyYW5nZSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IGV4ZWMgZnJvbSAnLi9leGVjJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICBib2xkOiB7XHJcbiAgICBpY29uOiAnPGI+QjwvYj4nLFxyXG4gICAgdGl0bGU6ICdCb2xkJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnYm9sZCcpXHJcbiAgfSxcclxuICBpdGFsaWM6IHtcclxuICAgIGljb246ICc8aT5JPC9pPicsXHJcbiAgICB0aXRsZTogJ0l0YWxpYycsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2l0YWxpYycpXHJcbiAgfSxcclxuICB1bmRlcmxpbmU6IHtcclxuICAgIGljb246ICc8dT5VPC91PicsXHJcbiAgICB0aXRsZTogJ1VuZGVybGluZScsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ3VuZGVybGluZScpXHJcbiAgfSxcclxuICBzdHJpa2V0aHJvdWdoOiB7XHJcbiAgICBpY29uOiAnPHN0cmlrZT5TPC9zdHJpa2U+JyxcclxuICAgIHRpdGxlOiAnU3RyaWtlLXRocm91Z2gnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdzdHJpa2VUaHJvdWdoJylcclxuICB9LFxyXG4gIGhlYWRpbmcxOiB7XHJcbiAgICBpY29uOiAnPGI+SDxzdWI+MTwvc3ViPjwvYj4nLFxyXG4gICAgdGl0bGU6ICdIZWFkaW5nIDEnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8SDE+JylcclxuICB9LFxyXG4gIGhlYWRpbmcyOiB7XHJcbiAgICBpY29uOiAnPGI+SDxzdWI+Mjwvc3ViPjwvYj4nLFxyXG4gICAgdGl0bGU6ICdIZWFkaW5nIDInLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8SDI+JylcclxuICB9LFxyXG4gIGhlYWRpbmczOiB7XHJcbiAgICBpY29uOiAnPGI+SDxzdWI+Mzwvc3ViPjwvYj4nLFxyXG4gICAgdGl0bGU6ICdIZWFkaW5nIDMnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdmb3JtYXRCbG9jaycsICc8SDM+JylcclxuICB9LFxyXG4gIHBhcmFncmFwaDoge1xyXG4gICAgaWNvbjogJyYjMTgyOycsXHJcbiAgICB0aXRsZTogJ1BhcmFncmFwaCcsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxQPicpXHJcbiAgfSxcclxuICBxdW90ZToge1xyXG4gICAgaWNvbjogJyYjODIyMDsgJiM4MjIxOycsXHJcbiAgICB0aXRsZTogJ1F1b3RlJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnZm9ybWF0QmxvY2snLCAnPEJMT0NLUVVPVEU+JylcclxuICB9LFxyXG4gIG9saXN0OiB7XHJcbiAgICBpY29uOiAnJiMzNTsnLFxyXG4gICAgdGl0bGU6ICdPcmRlcmVkIExpc3QnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBleGVjKCdpbnNlcnRPcmRlcmVkTGlzdCcpXHJcbiAgfSxcclxuICB1bGlzdDoge1xyXG4gICAgaWNvbjogJyYjODIyNjsnLFxyXG4gICAgdGl0bGU6ICdVbm9yZGVyZWQgTGlzdCcsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2luc2VydFVub3JkZXJlZExpc3QnKVxyXG4gIH0sXHJcbiAgb3V0ZGVudDoge1xyXG4gICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtb3V0ZGVudFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nLFxyXG4gICAgdGl0bGU6ICdPdXRkZW50JyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYyhcIm91dGRlbnRcIilcclxuICB9LFxyXG4gIGluZGVudDoge1xyXG4gICAgaWNvbjogJzxpIGNsYXNzPVwiZmEgZmEtaW5kZW50XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPicsXHJcbiAgICB0aXRsZTogJ0luZGVudCcsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoXCJpbmRlbnRcIiksXHJcbiAgfSxcclxuICBjb2RlOiB7XHJcbiAgICBpY29uOiAnJmx0Oy8mZ3Q7JyxcclxuICAgIHRpdGxlOiAnQ29kZScsXHJcbiAgICByZXN1bHQ6ICgpID0+IGV4ZWMoJ2Zvcm1hdEJsb2NrJywgJzxQUkU+JylcclxuICB9LFxyXG4gIGxpbmU6IHtcclxuICAgIGljb246ICcmIzgyMTM7JyxcclxuICAgIHRpdGxlOiAnSG9yaXpvbnRhbCBMaW5lJyxcclxuICAgIHJlc3VsdDogKCkgPT4gZXhlYygnaW5zZXJ0SG9yaXpvbnRhbFJ1bGUnKVxyXG4gIH0sXHJcbiAgbGluazoge1xyXG4gICAgaWNvbjogJyYjMTI4Mjc5OycsXHJcbiAgICB0aXRsZTogJ0xpbmsnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHVybCA9IHdpbmRvdy5wcm9tcHQoJ0VudGVyIHRoZSBsaW5rIFVSTCcpXHJcbiAgICAgIGlmICh1cmwpIGV4ZWMoJ2NyZWF0ZUxpbmsnLCB1cmwpXHJcbiAgICB9XHJcbiAgfSxcclxuICBpbWFnZToge1xyXG4gICAgaWNvbjogJyYjMTI4MjQ3OycsXHJcbiAgICB0aXRsZTogJ0ltYWdlJyxcclxuICAgIHByb21wdE1zZzogJ0VudGVyIHRoZSBVUkwgb2YgdGhlIGltYWdlJyxcclxuICAgIHJlc3VsdCAoKSB7XHJcbiAgICAgIGNvbnN0IHVybCA9IHdpbmRvdy5wcm9tcHQodGhpcy5wcm9tcHRNc2cpXHJcbiAgICAgIGlmICh1cmwpIGV4ZWMoJ2luc2VydEltYWdlJywgdXJsKVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCAoY29tbWFuZCwgdmFsdWUgPSBudWxsKSA9PiB7XHJcbiAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoY29tbWFuZCwgZmFsc2UsIHZhbHVlKVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGltYWdlRWRpdEFjdGlvbnMoY2IpIHtcclxuICByZXR1cm4gW3tcclxuICAgIG5hbWU6ICdmbG9hdC1sZWZ0JyxcclxuICAgIGljb246IGA8ZGl2IHN0eWxlPVwicG9zaXRpb246cmVsYXRpdmVcIj5cclxuICAgICAgPGkgY2xhc3M9XCJmYSBmYS1hbGlnbi1yaWdodFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cclxuICAgICAgPGRpdiBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlOyBsZWZ0Oi00cHg7dG9wOjA7IHRyYW5zZm9ybTogc2NhbGUoMC41KTsgdHJhbnNmb3JtLW9yaWdpbjogbGVmdCB0b3BcIj5cclxuICAgICAgICA8aSBjbGFzcz1cImZhIGZhLXBpY3R1cmUtb1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5gLFxyXG4gICAgdGl0bGU6ICdMw6V0IGJpbGRlbiBmbHl0YSB2w6Ruc3RlciBvbSB0ZXh0JyxcclxuICAgIHJlc3VsdDogKCkgPT4gY2IoJ2Zsb2F0LWxlZnQnKVxyXG4gIH0sIHtcclxuICAgIG5hbWU6ICdmbG9hdC1yaWdodCcsXHJcbiAgICBpY29uOiBgPGRpdiBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlXCI+XHJcbiAgICAgIDxpIGNsYXNzPVwiZmEgZmEtYWxpZ24tbGVmdFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cclxuICAgICAgPGRpdiBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlOyByaWdodDotNHB4O3RvcDowOyB0cmFuc2Zvcm06IHNjYWxlKDAuNSk7IHRyYW5zZm9ybS1vcmlnaW46IHJpZ2h0IHRvcFwiPlxyXG4gICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtcGljdHVyZS1vXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PmAsXHJcbiAgICB0aXRsZTogJ0zDpXQgYmlsZGVuIGZseXRhIGjDtmdlciBvbSB0ZXh0JyxcclxuICAgIHJlc3VsdDogKCkgPT4gY2IoJ2Zsb2F0LXJpZ2h0JylcclxuICB9LCB7XHJcbiAgICBuYW1lOiAndW5mbG9hdCcsXHJcbiAgICBpY29uOiBgPGRpdiBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlO1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPlxyXG4gICAgICA8ZGl2IHN0eWxlPVwicG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowXCI+JiM4MjU0OzwvZGl2PlxyXG4gICAgICA8ZGl2IHN0eWxlPVwicG9zaXRpb246YWJzb2x1dGU7dG9wOjA6bGVmdDowO3RyYW5zZm9ybTogc2NhbGUoMC41KTsgdHJhbnNmb3JtLW9yaWdpbjogbGVmdCBib3R0b21cIj5cclxuICAgICAgICA8aSBjbGFzcz1cImZhIGZhLXBpY3R1cmUtb1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgc3R5bGU9XCJwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjBcIj5fPC9kaXY+XHJcbiAgICA8L2Rpdj5gLFxyXG4gICAgdGl0bGU6ICdQbGFjZXJhIGJpbGRlbiBww6UgZWdlbiByYWQnLFxyXG4gICAgcmVzdWx0OiAoKSA9PiBjYigndW5mbG9hdCcpXHJcbiAgfV07XHJcbn1cclxuXHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IGV4ZWMgZnJvbSAnLi9leGVjJztcclxuaW1wb3J0IHt3YXNoSHRtbH0gZnJvbSAnLi93YXNoLWh0bWwnO1xyXG5pbXBvcnQgaW1hZ2VFZGl0QWN0aW9ucyBmcm9tICcuL2ltYWdlLWVkaXQtYWN0aW9ucyc7XHJcbmltcG9ydCBhY3Rpb25zIGZyb20gJy4vYWN0aW9ucyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEFjdGlvbiB7XHJcbiAgbmFtZT86IHN0cmluZztcclxuICBpY29uOiBzdHJpbmc7XHJcbiAgdGl0bGU6IHN0cmluZztcclxuICBwcm9tcHRNc2c/OiBzdHJpbmc7XHJcbiAgcmVzdWx0OiAoZXY6IFJlYWN0Lk1vdXNlRXZlbnQ8SFRNTEJ1dHRvbkVsZW1lbnQ+LCBjb21wb25lbnQ6IFd5c2l3eWcpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmludGVyZmFjZSBQcm9wcyB7XHJcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xyXG4gIGh0bWw6IHN0cmluZztcclxuICBvbkNoYW5nZT86IChodG1sOiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgcmVwb3J0TnVtQ2hhcnM/OiAobnVtQ2hhcnM6IG51bWJlcikgPT4gdm9pZDtcclxuICBtYXhDaGFycz86IG51bWJlcjtcclxuICBkZWZhdWx0QWN0aW9ucz86IHtbbmFtZTogc3RyaW5nXTogQWN0aW9ufTtcclxuICBhY3Rpb25zPzogKFBhcnRpYWw8QWN0aW9uPiB8IHN0cmluZylbXTtcclxuICByZWFkT25seT86IGJvb2xlYW47XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgZm9jdXNSZWN0OiBDbGllbnRSZWN0IHwgbnVsbDtcclxufVxyXG5cclxuY29uc3QgY2xhc3NlcyA9IHtcclxuICBhY3Rpb25iYXI6ICd3eXNpd3lnLWFjdGlvbmJhcicsXHJcbiAgYnV0dG9uOiAnd3lzaXd5Zy1idXR0b24nLFxyXG4gIGNvbnRlbnQ6ICd3eXNpd3lnLWNvbnRlbnQnLFxyXG4gIGZvY3VzcmVjdDogJ3d5c2l3eWctZm9jdXNyZWN0JyxcclxuICBmb2N1c3BvaW50OiAnd3lzaXd5Zy1mb2N1c3BvaW50JyxcclxuICByZWFkb25seUNvbnRlbnQ6ICd3eXNpd3lnLWNvbnRlbnQgcmVhZG9ubHknXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBXeXNpd3lnIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLFN0YXRlPiB7XHJcbiAgY29udGVudERpdjogSFRNTERpdkVsZW1lbnQ7XHJcbiAgZm9jdXNSZWN0RGl2OiBIVE1MRGl2RWxlbWVudDtcclxuICBmb2N1c0VsZW06IEhUTUxFbGVtZW50IHwgbnVsbDtcclxuICBjb3JuZXI6IHN0cmluZztcclxuICByZXNpemVTdGFydFg6IG51bWJlcjtcclxuXHJcbiAgY29uc3RydWN0b3IgKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHtmb2N1c1JlY3Q6IG51bGx9O1xyXG4gICAgdGhpcy5vbkZvY3VzID0gdGhpcy5vbkZvY3VzLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLm9uQmx1ciA9IHRoaXMub25CbHVyLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLm9uTW91c2VEb3duID0gdGhpcy5vbk1vdXNlRG93bi5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5vbk1vdXNlTW92ZSA9IHRoaXMub25Nb3VzZU1vdmUuYmluZCh0aGlzKTtcclxuICAgIHRoaXMub25Nb3VzZVVwID0gdGhpcy5vbk1vdXNlVXAuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgaWYgKCF0aGlzLnByb3BzLnJlYWRPbmx5KSB7XHJcbiAgICAgIEFycmF5LmZyb20odGhpcy5jb250ZW50RGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJpbWcsYVwiKSkubWFwKGVsZW0gPT4gKGVsZW0gYXMgKEhUTUxJbWFnZUVsZW1lbnQgfCBIVE1MQW5jaG9yRWxlbWVudCkpKVxyXG4gICAgICAuZm9yRWFjaChlbGVtID0+IHtcclxuICAgICAgICBlbGVtLnRhYkluZGV4ID0gMTtcclxuICAgICAgICBlbGVtLm9uZm9jdXMgPSB0aGlzLm9uRm9jdXM7XHJcbiAgICAgICAgZWxlbS5vbmJsdXIgPSB0aGlzLm9uQmx1ciBhcyBhbnk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnd5c2l3eWctY29udGVudFwiKS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2VEb3duKTtcclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53eXNpd3lnLWNvbnRlbnRcIikuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZSk7XHJcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud3lzaXd5Zy1jb250ZW50XCIpLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcCk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5wcm9wcy5yZXBvcnROdW1DaGFycykge1xyXG4gICAgICB0aGlzLnByb3BzLnJlcG9ydE51bUNoYXJzKCh0aGlzLmNvbnRlbnREaXYgJiYgdGhpcy5jb250ZW50RGl2LmlubmVyVGV4dCAmJiB0aGlzLmNvbnRlbnREaXYuaW5uZXJUZXh0Lmxlbmd0aCkgfHwgMCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRVcGRhdGUoKSB7XHJcbiAgICBBcnJheS5mcm9tKHRoaXMuY29udGVudERpdi5xdWVyeVNlbGVjdG9yQWxsKFwiaW1nLGFcIikpLm1hcChlbGVtID0+IChlbGVtIGFzIChIVE1MSW1hZ2VFbGVtZW50IHwgSFRNTEFuY2hvckVsZW1lbnQpKSlcclxuICAgIC5mb3JFYWNoKGVsZW0gPT4ge1xyXG4gICAgICBlbGVtLnRhYkluZGV4ID0gMTtcclxuICAgICAgZWxlbS5vbmZvY3VzID0gdGhpcy5vbkZvY3VzO1xyXG4gICAgICBlbGVtLm9uYmx1ciA9IHRoaXMub25CbHVyIGFzIGFueTtcclxuICAgIH0pO1xyXG4gICAgaWYgKHRoaXMucHJvcHMucmVwb3J0TnVtQ2hhcnMpIHtcclxuICAgICAgdGhpcy5wcm9wcy5yZXBvcnROdW1DaGFycygodGhpcy5jb250ZW50RGl2ICYmIHRoaXMuY29udGVudERpdi5pbm5lclRleHQgJiYgdGhpcy5jb250ZW50RGl2LmlubmVyVGV4dC5sZW5ndGgpIHx8IDApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnd5c2l3eWctY29udGVudFwiKS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2VEb3duKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud3lzaXd5Zy1jb250ZW50XCIpLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmUpO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53eXNpd3lnLWNvbnRlbnRcIikucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwKTtcclxuICB9XHJcblxyXG4gIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHM6IFByb3BzLCBuZXh0U3RhdGU6IFN0YXRlKSB7XHJcbiAgICAvL3RoaXMuY29udGVudERpdi5vbmZvY3VzID0gdGhpcy5vbkZvY3VzO1xyXG4gICAgLy90aGlzLmNvbnRlbnREaXYub25ibHVyID0gdGhpcy5vbkJsdXI7XHJcbiAgICByZXR1cm4gIXRoaXMuY29udGVudERpdiB8fFxyXG4gICAgICBuZXh0U3RhdGUgIT0gdGhpcy5zdGF0ZSB8fFxyXG4gICAgICBuZXh0UHJvcHMucmVhZE9ubHkgIT09IHRoaXMucHJvcHMucmVhZE9ubHkgfHxcclxuICAgICAgd2FzaEh0bWwobmV4dFByb3BzLmh0bWwpICE9PSB3YXNoSHRtbCh0aGlzLmNvbnRlbnREaXYuaW5uZXJIVE1MKTtcclxuICB9XHJcblxyXG4gIHRyaWdnZXJPbkNoYW5nZShodG1sOiBzdHJpbmcpIHtcclxuICAgIHRoaXMucHJvcHMub25DaGFuZ2UgJiYgdGhpcy5wcm9wcy5vbkNoYW5nZSh3YXNoSHRtbChodG1sKSk7XHJcbiAgfVxyXG5cclxuICBvbkZvY3VzKGV2OiBGb2N1c0V2ZW50KSB7XHJcbiAgICBjb25zdCBlbGVtID0gZXYudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG4gICAgaWYgKCFlbGVtIHx8ICFlbGVtLnRhZ05hbWUpIHJldHVybjtcclxuICAgIGlmIChlbGVtLnRhZ05hbWUgIT09ICdJTUcnICYmIGVsZW0udGFnTmFtZSAhPT0gJ0EnKSByZXR1cm47XHJcbiAgICBjb25zdCBjb250ZW50UGFyZW50ID0gdGhpcy5jb250ZW50RGl2LnBhcmVudEVsZW1lbnQ7XHJcbiAgICBjb25zdCBuZXdTdGF0ZSA9IHtcclxuICAgICAgZm9jdXNSZWN0OiBnZXRSZWxhdGF0aXZlQ2xpZW50UmVjdChjb250ZW50UGFyZW50LCBlbGVtKSxcclxuICAgIH1cclxuICAgIHN3aXRjaCAoZWxlbS50YWdOYW1lKSB7XHJcbiAgICAgIGNhc2UgJ0EnOlxyXG4gICAgICBjYXNlICdJTUcnOlxyXG5cclxuICAgICAgZGVmYXVsdDogYnJlYWs7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFN0YXRlKG5ld1N0YXRlKTtcclxuICAgIHRoaXMuZm9jdXNFbGVtID0gZWxlbTtcclxuICB9XHJcblxyXG4gIG9uQmx1cihldjogUmVhY3QuRm9jdXNFdmVudDxIVE1MRGl2RWxlbWVudD4pIHtcclxuICAgIC8qaWYgKGV2LnJlbGF0ZWRUYXJnZXQpIHtcclxuICAgICAgY29uc3QgcmVsYXRlZFRhcmdldCA9IGV2LnJlbGF0ZWRUYXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgIGlmIChyZWxhdGVkVGFyZ2V0LmNsYXNzTmFtZSAmJiByZWxhdGVkVGFyZ2V0LmNsYXNzTmFtZS5zcGxpdCgnICcpLmluZGV4T2YoY2xhc3Nlcy5idXR0b24pID49IDApIHtcclxuICAgICAgICAvLyBBIGltYWdlIGFjdGlvbiBidXR0b24gd2FzIHByZXNzZWRcclxuICAgICAgICBzZXRcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH0qL1xyXG4gICAgaWYgKChldi50YXJnZXQgPT09IHRoaXMuZm9jdXNFbGVtICYmIGV2LnJlbGF0ZWRUYXJnZXQgIT09IHRoaXMuZm9jdXNSZWN0RGl2KSB8fFxyXG4gICAgICBldi50YXJnZXQgPT09IHRoaXMuZm9jdXNSZWN0RGl2KVxyXG4gICAge1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHtmb2N1c1JlY3Q6IG51bGx9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG1ha2VDbGlja2FibGUoZWxlbTogSFRNTEVsZW1lbnQpIHtcclxuICAgICBlbGVtLnRhYkluZGV4ID0gMTtcclxuICB9XHJcblxyXG4gIG9uTW91c2VEb3duKGV2KSB7XHJcbiAgICBpZiAoKGV2LnRhcmdldC5jbGFzc05hbWUgfHwgXCJcIikuc3BsaXQoJyAnKS5pbmRleE9mKGNsYXNzZXMuZm9jdXNwb2ludCkgPj0gMCkge1xyXG4gICAgICBjb25zdCBjb3JuZXIgPSB0aGlzLmdldFJlY3RDb3JuZXIoZXYpO1xyXG4gICAgICB0aGlzLmNvcm5lciA9IGNvcm5lcjtcclxuICAgICAgdGhpcy5yZXNpemVTdGFydFggPSBldi5jbGllbnRYO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Nb3VzZU1vdmUoZXY6IE1vdXNlRXZlbnQpIHtcclxuICAgIGlmICh0aGlzLmNvcm5lciAmJiB0aGlzLnN0YXRlLmZvY3VzUmVjdCAmJiB0aGlzLmZvY3VzRWxlbSkge1xyXG4gICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAvLyBUT0RPOiBSw6RrbmEgdXQgYmFzZXJhdCBww6UgdGhpcy5jb3JuZXIgaHVyIGJpbGRlbnMgc3RvcmxlayBib3JkZSDDpG5kcmFzLlxyXG4gICAgICAvLyBMZXRhIHVwcCBiaWxkZW4gcGVyIElEIGZyw6VuIHRoaXMuY29udGVudERpdlxyXG4gICAgICAvLyBTw6R0dCBESVY6ZW5zIHN0eWxlIGF0dHJpYnV0IHdpZHRoIHRpbGwgbnkgd2lkdGguXHJcbiAgICAgIC8vIE9tIERJVjplbiByZWRhbiBoYWRlIGhlaWdodCwgc8OkdHQgbnkgaGVpZ2h0IG1lZCBzYW1tYSBhc3BlY3QgcmF0aW8gc29tIGlubmFuLFxyXG4gICAgICAvLyBhbm5hcnMsIHPDpHR0IGludGUgaGVpZ2h0IGFsbHMgKGVsbGVyIG3DtmpsaWd0dmlzIHRpbGwgYXV0bykpXHJcbiAgICAgIGNvbnN0IGZvY3VzUmVjdCA9IHRoaXMuZm9jdXNSZWN0RGl2LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICBpZiAoZm9jdXNSZWN0LndpZHRoIDwgMzIpIHJldHVybjtcclxuICAgICAgLy9jb25zdCBjdXJyZW50V2lkdGggPSBmb2N1c1JlY3Qud2lkdGg7XHJcbiAgICAgIC8vY29uc3QgY3VycmVudEhlaWdodCA9IGZvY3VzUmVjdC5oZWlnaHQ7XHJcbiAgICAgIC8vY29uc3QgaGFzSGVpZ2h0U3R5bGUgPSAhdGhpcy5mb2N1c0VsZW0uc3R5bGUuaGVpZ2h0IHx8IHRoaXMuZm9jdXNFbGVtLnN0eWxlLmhlaWdodCA9PT0gXCJhdXRvXCI7XHJcbiAgICAgIGNvbnN0IG5ld1dpZHRoID0gTWF0aC5tYXgoMzIsIHRoaXMuY29ybmVyLmVuZHNXaXRoKCdsJykgP1xyXG4gICAgICAgIGZvY3VzUmVjdC53aWR0aCArICh0aGlzLnJlc2l6ZVN0YXJ0WCAtIGV2LmNsaWVudFgpIDpcclxuICAgICAgICAvL2ZvY3VzUmVjdC5yaWdodCAtIGV2LmNsaWVudFggOlxyXG4gICAgICAgIGZvY3VzUmVjdC53aWR0aCAtICh0aGlzLnJlc2l6ZVN0YXJ0WCAtIGV2LmNsaWVudFgpKTtcclxuICAgICAgdGhpcy5yZXNpemVTdGFydFggPSBldi5jbGllbnRYO1xyXG4gICAgICAgIC8vZXYuY2xpZW50WCAtIGZvY3VzUmVjdC5sZWZ0O1xyXG4gICAgICBjb25zdCBmYWN0b3IgPSBuZXdXaWR0aCAvIGZvY3VzUmVjdC53aWR0aDtcclxuICAgICAgY29uc3QgbmV3SGVpZ2h0ID0gZm9jdXNSZWN0LmhlaWdodCAqIGZhY3RvcjtcclxuICAgICAgdGhpcy5mb2N1c0VsZW0uc3R5bGUud2lkdGggPSBuZXdXaWR0aCArIFwicHhcIjtcclxuICAgICAgdGhpcy5mb2N1c0VsZW0uc3R5bGUuaGVpZ2h0ID0gbmV3SGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICBmb2N1c1JlY3Q6IGdldFJlbGF0YXRpdmVDbGllbnRSZWN0KHRoaXMuY29udGVudERpdi5wYXJlbnRFbGVtZW50LCB0aGlzLmZvY3VzRWxlbSksXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb25Nb3VzZVVwKGV2KSB7XHJcbiAgICBpZiAodGhpcy5jb3JuZXIgJiYgdGhpcy5zdGF0ZS5mb2N1c1JlY3QgJiYgdGhpcy5mb2N1c0VsZW0pIHtcclxuICAgICAgdGhpcy5jb3JuZXIgPSBudWxsO1xyXG4gICAgICB0aGlzLnRyaWdnZXJPbkNoYW5nZSh0aGlzLmNvbnRlbnREaXYuaW5uZXJIVE1MKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFJlY3RDb3JuZXIoZXYpIHtcclxuICAgIGZvciAoY29uc3QgY2xhc3NOYW1lIG9mIChldi50YXJnZXQuY2xhc3NOYW1lIHx8ICcnKS5zcGxpdCgnICcpKSB7XHJcbiAgICAgIHN3aXRjaCAoY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgY2FzZSAnZnB1bCc6XHJcbiAgICAgICAgICByZXR1cm4gJ3VsJztcclxuICAgICAgICBjYXNlICdmcHVyJzpcclxuICAgICAgICAgIHJldHVybiAnZnB1cic7XHJcbiAgICAgICAgY2FzZSAnZnBscic6XHJcbiAgICAgICAgICByZXR1cm4gJ2xyJztcclxuICAgICAgICBjYXNlICdmcGxsJzpcclxuICAgICAgICAgIHJldHVybiAnbGwnO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIGV4ZWNJbWFnZUVkaXRBY3Rpb24gKGNtZDogc3RyaW5nKSB7XHJcbiAgICAvL2NvbnNvbGUubG9nKGNtZCk7XHJcbiAgICBpZiAoIXRoaXMuZm9jdXNFbGVtKSByZXR1cm47XHJcbiAgICAvL2NvbnNvbGUubG9nKFwiZG9pbmcgaXRcIik7XHJcbiAgICBzd2l0Y2ggKGNtZCkge1xyXG4gICAgICBjYXNlICdmbG9hdC1sZWZ0JzpcclxuICAgICAgICB0aGlzLmZvY3VzRWxlbS5zdHlsZS5jc3NGbG9hdCA9ICdsZWZ0JztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnZmxvYXQtcmlnaHQnOlxyXG4gICAgICAgIHRoaXMuZm9jdXNFbGVtLnN0eWxlLmNzc0Zsb2F0ID0gJ3JpZ2h0JztcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAndW5mbG9hdCc6XHJcbiAgICAgICAgdGhpcy5mb2N1c0VsZW0uc3R5bGUuY3NzRmxvYXQgPSAnJztcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIHRoaXMudHJpZ2dlck9uQ2hhbmdlKHRoaXMuY29udGVudERpdi5pbm5lckhUTUwpO1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7Zm9jdXNSZWN0OiBnZXRSZWxhdGF0aXZlQ2xpZW50UmVjdCh0aGlzLmNvbnRlbnREaXYucGFyZW50RWxlbWVudCwgdGhpcy5mb2N1c0VsZW0pfSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCBkZWZhdWx0QWN0aW9ucyA9IHRoaXMucHJvcHMuZGVmYXVsdEFjdGlvbnMgfHwgYWN0aW9ucztcclxuICAgIGxldCBhY3Rpb25zVG9Vc2UgPSB0aGlzLnByb3BzLmFjdGlvbnMgPyB0aGlzLnByb3BzLmFjdGlvbnMubWFwKGFjdGlvbiA9PlxyXG4gICAgICB0eXBlb2YgYWN0aW9uID09PSAnc3RyaW5nJyA/XHJcbiAgICAgICAgZGVmYXVsdEFjdGlvbnNbYWN0aW9uXSA6XHJcbiAgICAgICAgZGVmYXVsdEFjdGlvbnNbYWN0aW9uLm5hbWVdID9cclxuICAgICAgICAgIHsgLi4uZGVmYXVsdEFjdGlvbnNbYWN0aW9uLm5hbWVdLCAuLi5hY3Rpb24gfSA6XHJcbiAgICAgICAgICBhY3Rpb24pXHJcbiAgICA6IE9iamVjdC5rZXlzKGRlZmF1bHRBY3Rpb25zKS5tYXAoYWN0aW9uID0+IGRlZmF1bHRBY3Rpb25zW2FjdGlvbl0pO1xyXG5cclxuICAgIGlmICh0aGlzLnN0YXRlLmZvY3VzUmVjdCkge1xyXG4gICAgICBhY3Rpb25zVG9Vc2UgPSBhY3Rpb25zVG9Vc2UuY29uY2F0KGltYWdlRWRpdEFjdGlvbnMoY21kID0+IHRoaXMuZXhlY0ltYWdlRWRpdEFjdGlvbihjbWQpKSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qge2ZvY3VzUmVjdH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgY29uc3Qge3JlYWRPbmx5LCByZXBvcnROdW1DaGFycywgbWF4Q2hhcnN9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9e3RoaXMucHJvcHMuY2xhc3NOYW1lfT5cclxuICAgICAgeyFyZWFkT25seSAmJiA8ZGl2IGNsYXNzTmFtZT17Y2xhc3Nlcy5hY3Rpb25iYXJ9PlxyXG4gICAgICAgIHthY3Rpb25zVG9Vc2UubWFwKChhY3Rpb24sIGlkeCkgPT5cclxuICAgICAgICAgIDxidXR0b24ga2V5PXtpZHh9IGNsYXNzTmFtZT17Y2xhc3Nlcy5idXR0b259XHJcbiAgICAgICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7X19odG1sOiBhY3Rpb24uaWNvbn19XHJcbiAgICAgICAgICAgIHRpdGxlPXthY3Rpb24udGl0bGV9XHJcbiAgICAgICAgICAgIG9uTW91c2VEb3duPXtldj0+e2FjdGlvbi5yZXN1bHQoZXYsIHRoaXMpfX1cclxuICAgICAgICAgICAgb25Nb3VzZVVwPXtldj0+c2V0VGltZW91dCgoKT0+dGhpcy5jb250ZW50RGl2LmZvY3VzKCksIDEwKX1cclxuICAgICAgICAgIC8+KX1cclxuICAgICAgPC9kaXY+fVxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17cmVhZE9ubHkgPyBjbGFzc2VzLnJlYWRvbmx5Q29udGVudCA6IGNsYXNzZXMuY29udGVudH0gc3R5bGU9e3twb3NpdGlvbjogJ3JlbGF0aXZlJywgdG9wOiAwLCBsZWZ0OiAwfX0+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJlZGl0b3JcIlxyXG4gICAgICAgICAgcmVmPXtkaXYgPT4gdGhpcy5jb250ZW50RGl2ID0gZGl2fVxyXG4gICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3tfX2h0bWw6IHdhc2hIdG1sKHRoaXMucHJvcHMuaHRtbCl9fVxyXG4gICAgICAgICAgY29udGVudEVkaXRhYmxlPXshcmVhZE9ubHl9XHJcbiAgICAgICAgICBvblBhc3RlPXtldiA9PiB7XHJcbiAgICAgICAgICAgIGlmICghaXNOYU4obWF4Q2hhcnMpKSB7XHJcbiAgICAgICAgICAgICAgY29uc3Qge3RhcmdldCwgY3VycmVudFRhcmdldH0gPSBldjtcclxuICAgICAgICAgICAgICAvL2NvbnN0IHRleHRCZWluZ092ZXJ3cml0dGVuID0gKHRhcmdldCBhcyBhbnkpLmlubmVyVGV4dCB8fCBcIlwiO1xyXG4gICAgICAgICAgICAgIGNvbnN0IGVkaXRvclRleHQgPSAoY3VycmVudFRhcmdldCAmJiBjdXJyZW50VGFyZ2V0LmlubmVyVGV4dCkgfHwgXCJcIjtcclxuICAgICAgICAgICAgICBjb25zdCB0ZXh0QmVpbmdQYXN0ZWQgPSBldi5jbGlwYm9hcmREYXRhLmdldERhdGEoXCJ0ZXh0L3BsYWluXCIpIHx8IFwiXCI7XHJcbiAgICAgICAgICAgICAgaWYgKGVkaXRvclRleHQubGVuZ3RoICsgdGV4dEJlaW5nUGFzdGVkLmxlbmd0aCA+IG1heENoYXJzKSB7XHJcbiAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfX1cclxuICAgICAgICAgIG9uS2V5VXA9e3JlcG9ydE51bUNoYXJzID8gZXYgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB7aW5uZXJUZXh0fSA9IChldi50YXJnZXQgYXMgYW55KTtcclxuICAgICAgICAgICAgcmVwb3J0TnVtQ2hhcnMoaW5uZXJUZXh0ID8gaW5uZXJUZXh0Lmxlbmd0aCA6IDApO1xyXG4gICAgICAgICAgfSA6IG51bGx9XHJcbiAgICAgICAgICBvbktleVByZXNzPXshaXNOYU4obWF4Q2hhcnMpID8gZXYgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB7aW5uZXJUZXh0fSA9IChldi50YXJnZXQgYXMgYW55KTtcclxuICAgICAgICAgICAgaWYgKGlubmVyVGV4dCAmJiBpbm5lclRleHQubGVuZ3RoID49IG1heENoYXJzKSB7XHJcbiAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSA6IG51bGx9XHJcbiAgICAgICAgICBvbklucHV0PXtldiA9PiB0aGlzLnRyaWdnZXJPbkNoYW5nZSgoZXYudGFyZ2V0IGFzIGFueSkuaW5uZXJIVE1MKX1cclxuICAgICAgICAgIG9uS2V5RG93bj17ZXYgPT4ge1xyXG4gICAgICAgICAgICBpZiAocmVhZE9ubHkpIHJldHVybjtcclxuICAgICAgICAgICAgaWYgKHJlcG9ydE51bUNoYXJzICYmIGV2LmN1cnJlbnRUYXJnZXQpIHtcclxuICAgICAgICAgICAgICByZXBvcnROdW1DaGFycygoZXYuY3VycmVudFRhcmdldC5pbm5lclRleHQgfHwgXCJcIikubGVuZ3RoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIktleTogXCIgKyBldi53aGljaCk7XHJcbiAgICAgICAgICAgIGlmIChldi53aGljaCA+PSAzNSAmJiBldi53aGljaCA8PSA0MCkgey8vIGhvbWUvZW5kL3VwL2Rvd24vbGVmdC9yaWdodFxyXG4gICAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyAvLyBQcmV2ZW50IGVudGlyZSBwYWdlIGZyb20gc2Nyb2xsaW5nPz9cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXYud2hpY2ggPT09IDkpIHtcclxuICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOy8vIFRBQlxyXG4gICAgICAgICAgICAgIGlmIChldi5zaGlmdEtleSkge1xyXG4gICAgICAgICAgICAgICAgZXhlYyhcIm91dGRlbnRcIik7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGV4ZWMoXCJpbmRlbnRcIik7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgKGV2LmtleUNvZGUgPT09IDggfHwgZXYua2V5Q29kZSA9PT0gNDYpICYmIC8vIERlbGV0ZSBvciBCYWNrIGJ1dHRvbnNcclxuICAgICAgICAgICAgICB0aGlzLmZvY3VzRWxlbSAmJiB0aGlzLnN0YXRlLmZvY3VzUmVjdClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGlmICh0aGlzLmZvY3VzRWxlbSAmJiB0aGlzLmZvY3VzRWxlbS5wYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzRWxlbS5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHRoaXMuZm9jdXNFbGVtKTsgLy8gUmVtb3ZlIG1hcmtlZCBpbWFnZVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB0aGlzLmZvY3VzRWxlbSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7Zm9jdXNSZWN0OiBudWxsfSk7XHJcbiAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyT25DaGFuZ2UodGhpcy5jb250ZW50RGl2LmlubmVySFRNTCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH19XHJcbiAgICAgICAgLz5cclxuICAgICAgICB7Zm9jdXNSZWN0ICYmIDxkaXZcclxuICAgICAgICAgIHJlZj17ZGl2ID0+IHRoaXMuZm9jdXNSZWN0RGl2ID0gZGl2fVxyXG4gICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc2VzLmZvY3VzcmVjdH1cclxuICAgICAgICAgIG9uQmx1cj17dGhpcy5vbkJsdXJ9XHJcbiAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgIG91dGxpbmU6IDAsXHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxyXG4gICAgICAgICAgICB0b3A6IHRoaXMuc3RhdGUuZm9jdXNSZWN0LnRvcCxcclxuICAgICAgICAgICAgbGVmdDogdGhpcy5zdGF0ZS5mb2N1c1JlY3QubGVmdCxcclxuICAgICAgICAgICAgd2lkdGg6IHRoaXMuc3RhdGUuZm9jdXNSZWN0LndpZHRoLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuc3RhdGUuZm9jdXNSZWN0LmhlaWdodH19PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzZXMuZm9jdXNwb2ludCArIFwiIGZwdWxcIn0gc3R5bGU9e3twb3NpdGlvbjonYWJzb2x1dGUnLCB0b3A6MCwgbGVmdDowfX0gLz5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc2VzLmZvY3VzcG9pbnQgKyBcIiBmcHVyXCJ9IHN0eWxlPXt7cG9zaXRpb246J2Fic29sdXRlJywgdG9wOjAsIHJpZ2h0OjB9fSAvPlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzZXMuZm9jdXNwb2ludCArIFwiIGZwbHJcIn0gc3R5bGU9e3twb3NpdGlvbjonYWJzb2x1dGUnLCBib3R0b206MCwgcmlnaHQ6MH19IC8+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17Y2xhc3Nlcy5mb2N1c3BvaW50ICsgXCIgZnBsbFwifSBzdHlsZT17e3Bvc2l0aW9uOidhYnNvbHV0ZScsIGJvdHRvbTowLCBsZWZ0OjB9fSAvPlxyXG4gICAgICAgIDwvZGl2Pn1cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFJlbGF0YXRpdmVDbGllbnRSZWN0IChwYXJlbnQ6IEhUTUxFbGVtZW50LCBjaGlsZDogSFRNTEVsZW1lbnQpIDogQ2xpZW50UmVjdCB7XHJcbiAgY29uc3QgcGFyZW50UmVjdCA9IHBhcmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICBjb25zdCBjaGlsZFJlY3QgPSBjaGlsZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICByZXR1cm4ge1xyXG4gICAgdG9wOiBjaGlsZFJlY3QudG9wIC0gcGFyZW50UmVjdC50b3AgKyBwYXJlbnQuc2Nyb2xsVG9wLFxyXG4gICAgbGVmdDogY2hpbGRSZWN0LmxlZnQgLSBwYXJlbnRSZWN0LmxlZnQgKyBwYXJlbnQuc2Nyb2xsTGVmdCxcclxuICAgIGJvdHRvbTogY2hpbGRSZWN0LmJvdHRvbSAtIHBhcmVudFJlY3QudG9wICsgcGFyZW50LnNjcm9sbFRvcCxcclxuICAgIHJpZ2h0OiBjaGlsZFJlY3QucmlnaHQgLSBwYXJlbnRSZWN0LmxlZnQgKyBwYXJlbnQuc2Nyb2xsTGVmdCxcclxuICAgIHdpZHRoOiBjaGlsZFJlY3Qud2lkdGgsXHJcbiAgICBoZWlnaHQ6IGNoaWxkUmVjdC5oZWlnaHRcclxuICB9O1xyXG59XHJcbiIsIlxyXG5leHBvcnQgZnVuY3Rpb24gc2F2ZVNlbGVjdGlvbigpIHtcclxuICBpZiAod2luZG93LmdldFNlbGVjdGlvbikge1xyXG4gICAgICB2YXIgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xyXG4gICAgICBpZiAoc2VsLmdldFJhbmdlQXQgJiYgc2VsLnJhbmdlQ291bnQpIHtcclxuICAgICAgICAgIHJldHVybiBzZWwuZ2V0UmFuZ2VBdCgwKTtcclxuICAgICAgfVxyXG4gIH0gZWxzZSBpZiAoZG9jdW1lbnRbXCJzZWxlY3Rpb25cIl0gJiYgZG9jdW1lbnRbXCJzZWxlY3Rpb25cIl0uY3JlYXRlUmFuZ2UpIHtcclxuICAgICAgcmV0dXJuIGRvY3VtZW50W1wic2VsZWN0aW9uXCJdLmNyZWF0ZVJhbmdlKCk7XHJcbiAgfVxyXG4gIHJldHVybiBudWxsO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVzdG9yZVNlbGVjdGlvbihyYW5nZSkge1xyXG4gIGlmIChyYW5nZSkge1xyXG4gICAgICBpZiAod2luZG93LmdldFNlbGVjdGlvbikge1xyXG4gICAgICAgICAgdmFyIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcclxuICAgICAgICAgIHNlbC5yZW1vdmVBbGxSYW5nZXMoKTtcclxuICAgICAgICAgIHNlbC5hZGRSYW5nZShyYW5nZSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnRbXCJzZWxlY3Rpb25cIl0gJiYgcmFuZ2Uuc2VsZWN0KSB7XHJcbiAgICAgICAgICByYW5nZS5zZWxlY3QoKTtcclxuICAgICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xyXG5cclxuY29uc3QgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpO1xyXG5cclxudHlwZSBIVE1MUG9saWN5ID0ge1t0YWdOYW1lTG93ZXI6IHN0cmluZ106IHtbYXR0cmlidXRlTG93ZXI6IHN0cmluZ106IGJvb2xlYW59fTtcclxuXHJcbi8qKiBUYWdzIC8gQXR0cmlidXRlcyBXaGl0ZWxpc3RcclxuICogXHJcbiAqL1xyXG5jb25zdCBIVE1MX1dBU0hfUE9MSUNZOiBIVE1MUG9saWN5ID0ge1xyXG4gIGI6IHt9LCAgLy8gYm9sZFxyXG4gIGk6IHt9LCAgLy8gaXRhbGljXHJcbiAgcDoge30sICAvLyBwYXJhZ3JhcGhcclxuICB1OiB7fSwgIC8vIHVuZGVybGluZVxyXG4gIHN0cmlrZToge30sIC8vIHN0cmlrZS10aHJvdWdoXHJcbiAgcHJlOiB7fSwgLy8gdW5mb3JtYXR0ZWRcclxuICBoMToge30sIC8vIGhlYWRpbmcgMVxyXG4gIGgyOiB7fSwgLy8gaGVhZGluZyAyXHJcbiAgaDM6IHt9LCAvLyBoZWFkaW5nIDNcclxuICBoNDoge30sIC8vIGhlYWRpbmcgNFxyXG4gIGg1OiB7fSwgLy8gaGVhZGluZyA1XHJcbiAgaW1nOiB7c3JjOiB0cnVlLCBjbGFzczogdHJ1ZSwgc3R5bGU6IHRydWUsIHRhYmluZGV4OiB0cnVlfSwgLy8gaW1hZ2UuIFdlIHNldCBzdHlsZSBhbmQgdGFiaW5kZXggb3Vyc2VsdmVzLiBBY2NlcHQgdGhhdC5cclxuICBhOiB7aHJlZjogdHJ1ZSwgdGFyZ2V0OiB0cnVlLCB0YWJpbmRleDogdHJ1ZX0sIC8vIGxpbmtcclxuICB1bDoge30sIC8vIFVub3JkZXJlZCBsaXN0XHJcbiAgb2w6IHt9LCAvLyBPcmRlcmVkIGxpc3RcclxuICBsaToge30sIC8vIGxpc3QgaXRlbVxyXG4gIGhyOiB7fSwgLy8gSG9yaXpvbnRhbCBydWxlXHJcbiAgYnI6IHt9LCAvLyBCcmVhayBsaW5lXHJcbiAgZGl2OiB7fSwvLyBPZiBzb21lIHJlYXNvbiwgZGl2cyBhcmUgc29tZXRpbWVzIGluc2VydGVkIHdoZW4gcHJlc3NpbmcgRU5URVIgaW4gdGhlIHd5c2l3eWcgZWRpdG9yLlxyXG4gIHNwYW46IHt9LC8vIFNwYW5zIGFyZSBoYXJtbGVzcywganVzdCByZW1vdmUgdGhlaXIgc3R5bGUgYW5kIG90aGVyIGF0dHJpYnV0ZXMgYW5kIEkgZmVlbCBncmVhdC5cclxuICAvLyB0YWJsZSB0YWdzOlxyXG4gIHRhYmxlOiB7Ym9yZGVyOiB0cnVlfSxcclxuICB0Ym9keToge30sXHJcbiAgdGhlYWQ6IHt9LFxyXG4gIHRmb290OiB7fSxcclxuICB0cjoge30sXHJcbiAgdGQ6IHtoZWFkZXJzOiB0cnVlLCBjb2xzcGFuOiB0cnVlLCByb3dzcGFuOiB0cnVlfSxcclxuICB0aDoge2FiYnI6IHRydWUsIGhlYWRlcnM6IHRydWUsIHNjb3BlOiB0cnVlLCBzb3J0ZWQ6IHRydWUsIGNvbHNwYW46IHRydWUsIHJvd3NwYW46IHRydWV9XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gd2FzaEh0bWwgKGh0bWw6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgY29uc3QgZG9jID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhodG1sLCBcInRleHQvaHRtbFwiKTtcclxuICBjb25zdCB7Y2hpbGROb2Rlc30gPSBkb2MuYm9keTtcclxuICBsZXQgbW9kaWZpZWQgPSBmYWxzZTtcclxuICBmb3IgKGxldCBpPTA7IGk8Y2hpbGROb2Rlcy5sZW5ndGg7ICsraSkge1xyXG4gICAgaWYgKHdhc2hOb2RlKGNoaWxkTm9kZXMuaXRlbShpKSkpIHtcclxuICAgICAgbW9kaWZpZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gbW9kaWZpZWQgP1xyXG4gICAgZG9jLmJvZHkuaW5uZXJIVE1MIDpcclxuICAgIGh0bWw7IC8vIEJ5IHJldHVybmluZyB0aGUgb3JpZ2luYWwgSFRNTCBzdHJpbmcsIHdlIHNwYXJlIHRoZSB1c2VyIGZyb20gcmVmcmVzaGluZyB0aGUgZWRpdCBhcmVhLFxyXG4gICAgICAgICAgLy8gd2hpY2ggd291bGQgb3RoZXJ3aXNlIHB1dCB0aGUgY3Vyc29yIGF0IHRoZSB0b3AsIGxvc2luZyB0aGUgcG9zaXRpb24gd2hlcmUgdXNlciB3aGVyZS5cclxufVxyXG5cclxuZnVuY3Rpb24gd2FzaE5vZGUobm9kZTogTm9kZSB8IEVsZW1lbnQgfCBIVE1MRWxlbWVudCk6IGJvb2xlYW4ge1xyXG4gIGxldCBtb2RpZmllZCA9IGZhbHNlO1xyXG4gIGlmIChpc0VsZW1lbnQobm9kZSkpIHtcclxuICAgIGlmICh3YXNoRWxlbWVudChub2RlKSkge1xyXG4gICAgICBtb2RpZmllZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGlmICh3YXNoQ2hpbGROb2Rlcyhub2RlKSkge1xyXG4gICAgbW9kaWZpZWQgPSB0cnVlO1xyXG4gIH1cclxuICByZXR1cm4gbW9kaWZpZWQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHdhc2hDaGlsZE5vZGVzKG5vZGU6IE5vZGUpIHtcclxuICBsZXQgbW9kaWZpZWQgPSBmYWxzZTtcclxuICBjb25zdCB7Y2hpbGROb2Rlc30gPSBub2RlO1xyXG4gIGZvciAobGV0IGk9MDsgaTxjaGlsZE5vZGVzLmxlbmd0aDsgKytpKSB7XHJcbiAgICBpZiAod2FzaE5vZGUoY2hpbGROb2Rlcy5pdGVtKGkpKSkge1xyXG4gICAgICBtb2RpZmllZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBtb2RpZmllZDtcclxufSBcclxuXHJcbi8qKiBSZXBsYWNlIGFuIGVsZW1lbnQgd2l0aCBpdHMgY2hpbGQgbm9kZXMuXHJcbiAqIFxyXG4gKi9cclxuZnVuY3Rpb24gcmVtb3ZlTWlkZGxlRWxlbWVudChlbGVtZW50OiBFbGVtZW50KSB7XHJcbiAgY29uc3Qge2NoaWxkTm9kZXN9ID0gZWxlbWVudDtcclxuICBmb3IgKGxldCBpPTA7IGk8Y2hpbGROb2Rlcy5sZW5ndGg7ICsraSkge1xyXG4gICAgZWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjaGlsZE5vZGVzLml0ZW0oaSksIGVsZW1lbnQpO1xyXG4gIH1cclxuICBlbGVtZW50LnJlbW92ZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB3YXNoRWxlbWVudChlbGVtZW50OiBFbGVtZW50KTogYm9vbGVhbiB7XHJcbiAgY29uc3QgcG9saWN5ID0gZWxlbWVudC50YWdOYW1lICYmIEhUTUxfV0FTSF9QT0xJQ1lbZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCldO1xyXG4gIGlmICghcG9saWN5KSB7XHJcbiAgICBjb25zb2xlLndhcm4oXCJXeXNpd3lnOiBub3QgYWxsb3dlZCB0YWdcIiwgZWxlbWVudC50YWdOYW1lKTtcclxuICAgIHdhc2hDaGlsZE5vZGVzKGVsZW1lbnQpO1xyXG4gICAgcmVtb3ZlTWlkZGxlRWxlbWVudChlbGVtZW50KTtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuICBsZXQgbW9kaWZpZWQgPSBmYWxzZTtcclxuICBmb3IgKGxldCBpPTA7IGk8ZWxlbWVudC5hdHRyaWJ1dGVzLmxlbmd0aDsgKytpKSB7XHJcbiAgICBjb25zdCBhdHRyID0gZWxlbWVudC5hdHRyaWJ1dGVzLml0ZW0oaSk7XHJcbiAgICBjb25zdCBhbGxvd2VkID0gYXR0ci5uYW1lICYmICEhcG9saWN5W2F0dHIubmFtZS50b0xvd2VyQ2FzZSgpXTtcclxuICAgIGlmICghYWxsb3dlZCkge1xyXG4gICAgICBtb2RpZmllZCA9IHRydWU7XHJcbiAgICAgIGNvbnNvbGUud2FybihcIld5c2l3eWc6IG5vdCBhbGxvd2VkIGF0dHJpYnV0ZVwiLCBhdHRyLm5hbWUsIFwiVGFnOiBcIiwgZWxlbWVudC50YWdOYW1lKTtcclxuICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoYXR0ci5uYW1lKTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG1vZGlmaWVkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc0VsZW1lbnQobm9kZTogTm9kZSkgOiBub2RlIGlzIEVsZW1lbnQge1xyXG4gIHJldHVybiAhIShub2RlIGFzIEVsZW1lbnQpLnRhZ05hbWU7XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQge0Zvcm1hdHRlZE1lc3NhZ2V9IGZyb20gJ3JlYWN0LWludGwnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBsZWFybmluZ0dvYWw/OiBzdHJpbmc7XHJcbiAgb25TYXZlOiAobGVhcm5pbmdHb2FsOiBzdHJpbmcpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgbGVhcm5pbmdHb2FsOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBZGRDdXN0b21Hb2FsIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLFN0YXRlPiB7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpXHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBsZWFybmluZ0dvYWw6IHByb3BzLmxlYXJuaW5nR29hbCB8fCAnJ1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qge2xlYXJuaW5nR29hbH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgY29uc3Qge29uU2F2ZX0gPSB0aGlzLnByb3BzO1xyXG4gICAgcmV0dXJuIDxkaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXQgc3Ytc2tpcC1zcGFjZXJcIj5cclxuICAgICAgICAgIDxoMj48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cIndlZWtwbGFubmVyLmFkZExlYXJuaW5nR29hbFRpdGxlXCIgZGVmYXVsdE1lc3NhZ2U9XCJMw6RnZyB0aWxsIGVnZXQgbMOkcmFuZGVtw6VsXCIvPjwvaDI+XHJcbiAgICAgICAgICA8aHIgLz5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxpZ24taG9yaXpvbnRhbFwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cIndlZWtwbGFubmVyLmFkZExlYXJuaW5nR29hbFwiIGRlZmF1bHRNZXNzYWdlPVwiTcOlbFwiLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgdGFiSW5kZXg9ezF9IHNpemU9ezUwfSBhdXRvRm9jdXNcclxuICAgICAgICAgICAgICAgIHZhbHVlPXtsZWFybmluZ0dvYWx9XHJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiB0aGlzLnNldFN0YXRlKHtsZWFybmluZ0dvYWw6IGUudGFyZ2V0LnZhbHVlfSl9IC8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcCBzcGFjZWRcIiAvPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8YnIgLz48L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdi1odG1sLXBvcnRsZXQgc3YtcG9ydGxldFwiPlxyXG4gICAgICAgIDxidXR0b25cclxuICAgICAgICAgIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi1sYXJnZSBidG4tZGVmYXVsdFwiXHJcbiAgICAgICAgICBvbkNsaWNrPXsoKT0+b25TYXZlKGxlYXJuaW5nR29hbCl9PjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwiY29tbW9uLnNhdmVcIiBkZWZhdWx0TWVzc2FnZT1cInNhdmVcIi8+PC9idXR0b24+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+XHJcbiAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFRleHRJbnB1dCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9mb3JtLWZpZWxkLXRleHQtaW5wdXQnO1xyXG5pbXBvcnQgeyBUZXh0QXJlYUZvcm1GaWVsZCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9mb3JtLWZpZWxkLXRleHRhcmVhJztcclxuaW1wb3J0IHtMYW5ndWFnZUNvbnRleHR9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9MYW5ndWFnZUNvbnRleHQnO1xyXG5pbXBvcnQge0Zvcm1hdHRlZE1lc3NhZ2V9IGZyb20gJ3JlYWN0LWludGwnO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBpc1Rhc2s6IGJvb2xlYW5cclxuICBvblNhdmU6IChuYW1lOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcsIHVybDogc3RyaW5nKSA9PiB2b2lkO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gIHVybDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQWRkQ3VzdG9tVGFzayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcyxTdGF0ZT4ge1xyXG4gIHN0YXRpYyBjb250ZXh0VHlwZSA9IExhbmd1YWdlQ29udGV4dDtcclxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKVxyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgbmFtZTogJycsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiAnJyxcclxuICAgICAgdXJsOiAnJ1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3QgeyBuYW1lLCBkZXNjcmlwdGlvbiwgdXJsIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgY29uc3QgeyBpc1Rhc2ssIG9uU2F2ZSB9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IHtpbnRsfSA9IHRoaXMuY29udGV4dDtcclxuICAgIHJldHVybiA8ZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0IHN2LXNraXAtc3BhY2VyXCI+XHJcbiAgICAgICAgPGgyPjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwiY3VzdG9tVGFzay5hZGRXb3JrR29hbFRpdGxlXCIgZGVmYXVsdE1lc3NhZ2U9XCJMw6RnZyB0aWxsIGVnZXQgYXJiZXRzbcOlbFwiLz48L2gyPlxyXG4gICAgICAgIDxociAvPlxyXG4gICAgICAgIDxUZXh0SW5wdXRcclxuICAgICAgICAgIGxhYmVsPXtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOidjb21tb24ubmFtZUxhYmVsJywgZGVmYXVsdE1lc3NhZ2U6ICdOYW1uJ30pfVxyXG4gICAgICAgICAgaWQ9XCJBZGRDdXN0b21UYXNrOm5hbWVcIlxyXG4gICAgICAgICAgcGxhY2Vob2xkZXI9e2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J2N1c3RvbVRhc2suZW50ZXJOYW1lUGxoZCcsIGRlZmF1bHRNZXNzYWdlOiAnQW5nZSBuYW1uLi4uJ30pfVxyXG4gICAgICAgICAgdmFsdWU9e25hbWV9XHJcbiAgICAgICAgICBhdXRvRm9jdXNcclxuICAgICAgICAgIG9uQ2hhbmdlPXtuYW1lID0+IHRoaXMuc2V0U3RhdGUoe25hbWV9KX0gLz5cclxuXHJcbiAgICAgICAgPFRleHRBcmVhRm9ybUZpZWxkXHJcbiAgICAgICAgICByb3dzPXs3fVxyXG4gICAgICAgICAgbGFiZWw9IHtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOidjb21tb24uZGVzY3JpcHRpb25MYWJlbCcsIGRlZmF1bHRNZXNzYWdlOidCZXNrcml2bmluZyd9KX1cclxuICAgICAgICAgIGlkPVwiQWRkQ3VzdG9tVGFzazpkZXNjcmlwdGlvblwiXHJcbiAgICAgICAgICBwbGFjZWhvbGRlcj17aW50bC5mb3JtYXRNZXNzYWdlKHtpZDonY29tbW9uLmFkZERlc2NyaXB0aW9uUGxoZCcsIGRlZmF1bHRNZXNzYWdlOiBcIkzDpGdnIHRpbGwgZW4gYmVza3Jpdm5pbmcuLi5cIn0pfVxyXG4gICAgICAgICAgdmFsdWU9e2Rlc2NyaXB0aW9ufVxyXG4gICAgICAgICAgb25DaGFuZ2U9e2Rlc2NyaXB0aW9uPT50aGlzLnNldFN0YXRlKHtkZXNjcmlwdGlvbn0pfSAvPlxyXG5cclxuICAgICAgICA8VGV4dElucHV0XHJcbiAgICAgICAgICBsYWJlbD0ge2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J2NvbW1vbi5saW5rTGFiZWwnLCBkZWZhdWx0TWVzc2FnZTonTMOkbmsnfSl9IFxyXG4gICAgICAgICAgaWQ9XCJBZGRDdXN0b21UYXNrOnVybFwiXHJcbiAgICAgICAgICBwbGFjZWhvbGRlcj1cImh0dHA6Ly93d3cuLi5cIlxyXG4gICAgICAgICAgdmFsdWU9e3VybH1cclxuICAgICAgICAgIG9uQ2hhbmdlPXt1cmwgPT4gdGhpcy5zZXRTdGF0ZSh7dXJsfSl9IC8+XHJcblxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdi1odG1sLXBvcnRsZXQgc3YtcG9ydGxldFwiPlxyXG4gICAgICAgIDxidXR0b25cclxuICAgICAgICAgIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi1sYXJnZSBidG4tZGVmYXVsdFwiXHJcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBvblNhdmUobmFtZSwgZGVzY3JpcHRpb24sIHVybCl9PjxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwiY29tbW9uLnNhdmVcIiBkZWZhdWx0TWVzc2FnZT1cIlNwYXJhXCIvPjwvYnV0dG9uPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIH1cclxufVxyXG5cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBUZXh0SW5wdXQgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvZm9ybS1maWVsZC10ZXh0LWlucHV0JztcclxuaW1wb3J0IHsgVGV4dEFyZWFGb3JtRmllbGQgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvZm9ybS1maWVsZC10ZXh0YXJlYSc7XHJcbmltcG9ydCB7IFVzZXJUYXNrLCBVc2VyU3ViVGFzayB9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHsgY3JlYXRlVVVJRCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgVXNlclRhc2tzUmVwbyB9IGZyb20gJy4uLy4uL3JlcG9zL3VzZXItdGFza3MtcmVwbyc7XHJcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XHJcbmltcG9ydCB7TGFuZ3VhZ2VDb250ZXh0fSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvTGFuZ3VhZ2VDb250ZXh0JztcclxuXHJcbnR5cGUgUHJvcHMgPSB7XHJcbiAgLy8gRWRpdCBNb2RlXHJcbiAgbW9kZTogJ2FkZCc7XHJcbiAgdXNlclRhc2s6IFVzZXJUYXNrO1xyXG4gIGNsb3NlRGlhbG9nO1xyXG4gIHVzZXJUYXNrc1JlcG86IFVzZXJUYXNrc1JlcG9cclxufSB8IHtcclxuICBtb2RlOiAnZWRpdCc7XHJcbiAgdXNlclRhc2s6IFVzZXJUYXNrO1xyXG4gIHN1YlRhc2s6IFVzZXJTdWJUYXNrO1xyXG4gIGNsb3NlRGlhbG9nOiAoKT0+dm9pZDtcclxuICB1c2VyVGFza3NSZXBvOiBVc2VyVGFza3NSZXBvXHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgdXJsOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBZGRPckVkaXRTdWJUYXNrIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLFN0YXRlPiB7XHJcbiAgc3RhdGljIGNvbnRleHRUeXBlID0gTGFuZ3VhZ2VDb250ZXh0O1xyXG4gIGNvbnN0cnVjdG9yIChwcm9wczogUHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIGlmIChwcm9wcy5tb2RlID09PSAnZWRpdCcpIHtcclxuICAgICAgY29uc3Qge3N1YlRhc2t9ID0gcHJvcHM7XHJcbiAgICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgICAgbmFtZTogc3ViVGFzay5uYW1lIHx8ICcnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBzdWJUYXNrLmRlc2NyaXB0aW9uIHx8ICcnLFxyXG4gICAgICAgIHVybDogc3ViVGFzay51cmwgfHwgJydcclxuICAgICAgfTtcclxuICAgIH0gZWxzZSB7ICBcclxuICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICBuYW1lOiAnJyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogJycsXHJcbiAgICAgICAgdXJsOiAnJ1xyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2F2ZSgpIHtcclxuICAgIC8vIFVwZGF0ZSByZXBvOlxyXG4gICAgY29uc3Qge3Byb3BzfSA9IHRoaXM7XHJcbiAgICBjb25zdCB7dXNlclRhc2ssIGNsb3NlRGlhbG9nLCB1c2VyVGFza3NSZXBvfSA9IHByb3BzO1xyXG4gICAgY29uc3Qge25hbWUsIGRlc2NyaXB0aW9uLCB1cmx9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGlmIChwcm9wcy5tb2RlID09PSAnZWRpdCcpIHtcclxuICAgICAgLy8gRWRpdCBleGlzdGluZzpcclxuICAgICAgdXNlclRhc2tzUmVwby51cGRhdGUoW3VzZXJUYXNrXSwgdXQgPT4ge1xyXG4gICAgICAgIGNvbnN0IHtzdWJUYXNrc30gPSB1dDtcclxuICAgICAgICBpZiAoc3ViVGFza3MpIHtcclxuICAgICAgICAgIHV0LnN1YlRhc2tzID0gc3ViVGFza3MubWFwKHN0ID0+XHJcbiAgICAgICAgICAgIHN0LmlkID09PSBwcm9wcy5zdWJUYXNrLmlkID8gey4uLnN0LCBuYW1lLCBkZXNjcmlwdGlvbiwgdXJsfSA6XHJcbiAgICAgICAgICAgIHsuLi5zdH1cclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIENyZWF0ZSBuZXcgdGFza1xyXG4gICAgICBjb25zdCBuZXdTdWJUYXNrID0ge1xyXG4gICAgICAgIGlkOiBjcmVhdGVVVUlEKCksXHJcbiAgICAgICAgbmFtZSxcclxuICAgICAgICBkZXNjcmlwdGlvbixcclxuICAgICAgICB1cmxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIFVwZGF0ZSByZXBvOlxyXG4gICAgICB1c2VyVGFza3NSZXBvLnVwZGF0ZShbdXNlclRhc2tdLCB1dCA9PiB7XHJcbiAgICAgICAgaWYgKCF1dC5zdWJUYXNrcykge1xyXG4gICAgICAgICAgdXQuc3ViVGFza3MgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdXQuc3ViVGFza3MgPSB1dC5zdWJUYXNrcy5jb25jYXQobmV3U3ViVGFzayk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENsb3NlIGRpYWxvZ1xyXG4gICAgY2xvc2VEaWFsb2coKTsgICAgXHJcbiAgfVxyXG5cclxuICBkZWxldGUoKSB7XHJcbiAgICAvLyBVcGRhdGUgcmVwbzpcclxuICAgIGNvbnN0IHByb3BzID0gdGhpcy5wcm9wczsgIFxyXG4gICAgaWYgKHByb3BzLm1vZGUgIT09ICdlZGl0Jykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4gb25seSBkZWxldGUgaW4gZWRpdCBtb2RlXCIpO1xyXG4gICAgfVxyXG4gICAgcHJvcHMudXNlclRhc2tzUmVwby51cGRhdGUoW3Byb3BzLnVzZXJUYXNrXSwgdXQgPT4ge1xyXG4gICAgICBpZiAodXQuc3ViVGFza3MpIHtcclxuICAgICAgICB1dC5zdWJUYXNrcyA9IHV0LnN1YlRhc2tzLmZpbHRlcih0ID0+IHQuaWQgIT09IHByb3BzLnN1YlRhc2suaWQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBDbG9zZSBkaWFsb2c6XHJcbiAgICBwcm9wcy5jbG9zZURpYWxvZygpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qge25hbWUsIGRlc2NyaXB0aW9uLCB1cmx9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGNvbnN0IHtwcm9wc30gPSB0aGlzO1xyXG4gICAgY29uc3QgaXNFZGl0TW9kZSA9IHByb3BzLm1vZGUgPT09ICdlZGl0JztcclxuICAgIGNvbnN0IHtpbnRsfSA9IHRoaXMuY29udGV4dDtcclxuICAgIHJldHVybiA8PlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInN2LWh0bWwtcG9ydGxldCBzdi1wb3J0bGV0IHN2LXNraXAtc3BhY2VyXCI+XHJcbiAgICAgICAgPGgyPntpc0VkaXRNb2RlID8gPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJhZGRlZGl0c3VidGFzay5lZGl0U3VidGFza1wiIGRlZmF1bHRNZXNzYWdlPSdSZWRpZ2VyYSB1bmRlcnVwcGdpZnQnLz4gOiA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cImFkZGVkaXRzdWJ0YXNrLmFkZFN1YnRhc2tcIiBkZWZhdWx0TWVzc2FnZT0nTMOkZ2cgdGlsbCB1bmRlcnVwcGdpZnQnLz4gfTwvaDI+XHJcbiAgICAgICAgPGhyIC8+XHJcbiAgICAgICAgPFRleHRJbnB1dFxyXG4gICAgICAgICAgYXV0b0ZvY3VzXHJcbiAgICAgICAgICBsYWJlbD0ge2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J2FkZGVkaXRzdWJ0YXNrLm5hbWVMYWJlbCcsIGRlZmF1bHRNZXNzYWdlOidVbmRlcnVwcGdpZnRlbnMgbmFtbid9KX1cclxuICAgICAgICAgIGlkPVwiQWRkVXNlclN1YlRhc2s6bmFtZVwiXHJcbiAgICAgICAgICBwbGFjZWhvbGRlcj1cIlwiXHJcbiAgICAgICAgICB2YWx1ZT17dGhpcy5zdGF0ZS5uYW1lfVxyXG4gICAgICAgICAgb25DaGFuZ2U9e25hbWUgPT4gdGhpcy5zZXRTdGF0ZSh7bmFtZX0pfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgIDxUZXh0QXJlYUZvcm1GaWVsZFxyXG4gICAgICAgICAgbGFiZWw9IHtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOidjb21tb24uZGVzY3JpcHRpb25MYWJlbCcsIGRlZmF1bHRNZXNzYWdlOidCZXNrcml2bmluZyd9KX1cclxuICAgICAgICAgIGlkPVwiQWRkVXNlclN1YlRhc2s6ZGVzY3JpcHRpb25cIlxyXG4gICAgICAgICAgcm93cz17N31cclxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiXCJcclxuICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLmRlc2NyaXB0aW9ufVxyXG4gICAgICAgICAgb25DaGFuZ2U9e2Rlc2NyaXB0aW9uID0+IHRoaXMuc2V0U3RhdGUoe2Rlc2NyaXB0aW9ufSl9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgPFRleHRJbnB1dFxyXG4gICAgICAgICAgbGFiZWw9IHtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOidjb21tb24ubGlua0xhYmVsJywgZGVmYXVsdE1lc3NhZ2U6J0zDpG5rJ30pfVxyXG4gICAgICAgICAgaWQ9XCJBZGRVc2VyU3ViVGFzazp1cmxcIlxyXG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJcIlxyXG4gICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudXJsfVxyXG4gICAgICAgICAgb25DaGFuZ2U9e3VybCA9PiB0aGlzLnNldFN0YXRlKHt1cmx9KX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICA8YnIgLz5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXRcIj5cclxuICAgICAgICB7XHJcbiAgICAgICAgICBwcm9wcy5tb2RlID09PSAnZWRpdCcgJiYgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG4gYnRuLXdhcm5pbmcgYnRuLWxhcmdlIHB1bGwtcmlnaHRcIlxyXG4gICAgICAgICAgb25DbGljaz17ZXYgPT4gdGhpcy5kZWxldGUoKX0+XHJcbiAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cImFkZGVkaXRzdWJ0YXNrLmRlbGV0ZVN1YnRhc2tcIiBkZWZhdWx0TWVzc2FnZT1cIlRhIGJvcnQgdW5kZXJ1cHBnaWZ0XCIvPjwvYnV0dG9uPn1cclxuICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICB0YWJJbmRleD17MX1cclxuICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tbGFyZ2UgYnRuLWRlZmF1bHRcIlxyXG4gICAgICAgICAgb25DbGljaz17KCk9PnRoaXMuc2F2ZSgpfT48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cImNvbW1vbi5zYXZlXCIgZGVmYXVsdE1lc3NhZ2U9XCJTcGFyYVwiLz48L2J1dHRvbj5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8Lz5cclxuICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgVXNlclRhc2ssIFVzZXJTdWJUYXNrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBSZW5hbWVhYmxlVGV4dCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9yZW5hbWVhYmxlLXRleHQnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBnZXRUYXNrVHlwZSB9IGZyb20gJy4vZ2V0LXRhc2stdHlwZSc7XHJcbmltcG9ydCBSZWFjdERhdGVQaWNrZXIsIHsgUmVhY3REYXRlUGlja2VyUHJvcHMgfSBmcm9tICdyZWFjdC1kYXRlcGlja2VyJztcclxuaW1wb3J0ICcuLi8uLi9nbG9iYWxzL21vbWVudC1zdi1sb2NhbGUnO1xyXG5pbXBvcnQge1RleHRJbnB1dH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL2Zvcm0tZmllbGQtdGV4dC1pbnB1dCc7XHJcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuaW1wb3J0IHsgRm9ybUZpZWxkIH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL2Zvcm0tZmllbGQnO1xyXG5pbXBvcnQgeyBBZGRPckVkaXRTdWJUYXNrIH0gZnJvbSAnLi9hZGQtb3ItZWRpdC1zdWItdGFzayc7XHJcbmltcG9ydCB7IGNyZWF0ZVVVSUQgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB1cGRhdGUgZnJvbSAncmVhY3QtYWRkb25zLXVwZGF0ZSc7XHJcbmltcG9ydCB7IFVzZXJUYXNrc1JlcG8gfSBmcm9tICcuLi8uLi9yZXBvcy91c2VyLXRhc2tzLXJlcG8nO1xyXG5pbXBvcnQgeyBUZXh0QXJlYUZvcm1GaWVsZCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9mb3JtLWZpZWxkLXRleHRhcmVhJztcclxuaW1wb3J0IHsgRm9ybWF0dGVkTWVzc2FnZSB9IGZyb20gJ3JlYWN0LWludGwnO1xyXG5pbXBvcnQge0xhbmd1YWdlQ29udGV4dH0gZnJvbSBcIi4uL3V0aWxpdHktY29tcG9uZW50cy9MYW5ndWFnZUNvbnRleHRcIlxyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICB1c2VyVGFzazogVXNlclRhc2s7XHJcbiAgb25VcGRhdGU6ICh1cGRhdGVyOiAodXNlclRhc2s6IFVzZXJUYXNrKSA9PiB2b2lkKSA9PiB2b2lkO1xyXG4gIG9uRGVsZXRlOiAodXNlclRhc2tJZDogc3RyaW5nKSA9PiB2b2lkO1xyXG4gIG9wZW5EaWFsb2c6IChkaWFsb2cpID0+IHZvaWQ7XHJcbiAgY2xvc2VEaWFsb2c6ICgpPT52b2lkO1xyXG4gIHVzZXJUYXNrc1JlcG86IFVzZXJUYXNrc1JlcG9cclxufVxyXG5cclxuaW50ZXJmYWNlIFN0YXRlIHtcclxuICB1c2VyVGFzazogVXNlclRhc2s7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xyXG4gIGRlYWRsaW5lPzogc3RyaW5nO1xyXG4gIHVybDogc3RyaW5nO1xyXG4gIHN1YlRhc2tzPzogVXNlclN1YlRhc2tbXTtcclxuICBzaG93Q2FsZW5kYXI/OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRWRpdFVzZXJUYXNrIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLFN0YXRlPiB7XHJcbiAgZGF0ZVBpY2tlcjogYW55O1xyXG4gIHN0YXRpYyBjb250ZXh0VHlwZSA9IExhbmd1YWdlQ29udGV4dDtcclxuXHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICB1c2VyVGFzazogcHJvcHMudXNlclRhc2ssXHJcbiAgICAgIG5hbWU6IHByb3BzLnVzZXJUYXNrLm5hbWUsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiBwcm9wcy51c2VyVGFzay5kZXNjcmlwdGlvbixcclxuICAgICAgdXJsOiBwcm9wcy51c2VyVGFzay51cmwsXHJcbiAgICAgIGRlYWRsaW5lOiBwcm9wcy51c2VyVGFzay5kZWFkbGluZSxcclxuICAgICAgc3ViVGFza3M6IHByb3BzLnVzZXJUYXNrLnN1YlRhc2tzXHJcbiAgICB9XHJcbiAgICB0aGlzLm9uVXNlclRhc2tzQ2hhbmdlZCA9IHRoaXMub25Vc2VyVGFza3NDaGFuZ2VkLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgIHRoaXMucHJvcHMudXNlclRhc2tzUmVwby5zdWJzY3JpYmUodGhpcy5vblVzZXJUYXNrc0NoYW5nZWQpO1xyXG4gIH1cclxuXHJcbiAgb25Vc2VyVGFza3NDaGFuZ2VkKHVzZXJUYXNrczogVXNlclRhc2tbXSkge1xyXG4gICAgY29uc3QgbXlVc2VyVGFzayA9IHVzZXJUYXNrcy5maW5kKHV0ID0+IHV0LmlkID09PSB0aGlzLnByb3BzLnVzZXJUYXNrLmlkKTtcclxuICAgIGlmICghbXlVc2VyVGFzaykge1xyXG4gICAgICB0aGlzLnByb3BzLmNsb3NlRGlhbG9nKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICB1c2VyVGFzazogbXlVc2VyVGFzayxcclxuICAgICAgc3ViVGFza3M6IG15VXNlclRhc2suc3ViVGFza3NcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XHJcbiAgICB0aGlzLnByb3BzLnVzZXJUYXNrc1JlcG8udW5zdWJzY3JpYmUodGhpcy5vblVzZXJUYXNrc0NoYW5nZWQpO1xyXG4gIH1cclxuXHJcbiAgaXNNb2RpZmllZCgpIHtcclxuICAgIC8vIERvbid0IGNvdW50IHN1YnRhc2sgY2hhbmdlcyEgVGhleSBsaXZlIHRoZWlyIG93biBsaWZlIGFuZCBpcyBtYWludGFpbmVkXHJcbiAgICAvLyBpbiBhZGQtb3ItZWRpdC1zdWItdGFzay50c3guIFJlYXNvbjogVXNlciB3b3VsZCBleHBlY3QgYWRkZWQgL2VkaXRlZCBzdWJ0YXNrc1xyXG4gICAgLy8gdG8gYmUgcGVyc2lzdGVkIHJpZ2h0IGF3YXkuIE1heSBjbGljayBhd2F5IHRoaXMgZGlhbG9nLlxyXG4gICAgLy8gQWxzbyByZWFzb246IENhbiBpbnZva2UgdGhhdCBkaWFsb2cgYnkgaXRzZWxmIGZyb20gb3RoZXIgY29tcG9uZW50cy4gRnJvbSBXZWVrUGxhbm5lclxyXG4gICAgLy8gd2hlbiBjbGlja2luZyB0aGUgc3VidGFzayBmb3IgZXhhbXBsZSFcclxuXHJcbiAgICBjb25zdCB7ZGVhZGxpbmUsIGRlc2NyaXB0aW9uLCBuYW1lLCB1cmwsIHVzZXJUYXNrfSA9IHRoaXMuc3RhdGU7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBkZWFkbGluZSAhPT0gdXNlclRhc2suZGVhZGxpbmUgfHxcclxuICAgICAgZGVzY3JpcHRpb24gIT09IHVzZXJUYXNrLmRlc2NyaXB0aW9uIHx8XHJcbiAgICAgIG5hbWUgIT09IHVzZXJUYXNrLm5hbWUgfHxcclxuICAgICAgdXJsICE9PSB1c2VyVGFzay51cmwpO1xyXG4gIH1cclxuXHJcbiAgYWRkU3ViVGFzaygpOiBhbnkge1xyXG4gICAgdGhpcy5wcm9wcy5vcGVuRGlhbG9nKDxBZGRPckVkaXRTdWJUYXNrXHJcbiAgICAgIG1vZGU9XCJhZGRcIlxyXG4gICAgICB1c2VyVGFzaz17dGhpcy5zdGF0ZS51c2VyVGFza31cclxuICAgICAgY2xvc2VEaWFsb2c9e3RoaXMucHJvcHMuY2xvc2VEaWFsb2d9XHJcbiAgICAgIHVzZXJUYXNrc1JlcG89e3RoaXMucHJvcHMudXNlclRhc2tzUmVwb31cclxuICAgIC8+KTtcclxuICB9XHJcblxyXG4gIGVkaXRTdWJUYXNrKHN1YlRhc2s6IFVzZXJTdWJUYXNrKSB7XHJcbiAgICB0aGlzLnByb3BzLm9wZW5EaWFsb2coPEFkZE9yRWRpdFN1YlRhc2tcclxuICAgICAgbW9kZT1cImVkaXRcIlxyXG4gICAgICBzdWJUYXNrPXtzdWJUYXNrfVxyXG4gICAgICB1c2VyVGFzaz17dGhpcy5zdGF0ZS51c2VyVGFza31cclxuICAgICAgY2xvc2VEaWFsb2c9e3RoaXMucHJvcHMuY2xvc2VEaWFsb2d9XHJcbiAgICAgIHVzZXJUYXNrc1JlcG89e3RoaXMucHJvcHMudXNlclRhc2tzUmVwb31cclxuICAgIC8+KTtcclxuICB9XHJcbiAgXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3QgeyBuYW1lLCBkZXNjcmlwdGlvbiwgdXJsLCBkZWFkbGluZSwgc3ViVGFza3MsIHNob3dDYWxlbmRhciwgdXNlclRhc2sgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCB7IGlkLCBjb3Vyc2VOYW1lIH0gPSB1c2VyVGFzaztcclxuICAgIGNvbnN0IHsgb25VcGRhdGUsIG9uRGVsZXRlIH0gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3QgaXNNb2RpZmllZCA9IHRoaXMuaXNNb2RpZmllZCgpO1xyXG5cclxuICAgIGNvbnN0IHRhc2tUeXBlID0gZ2V0VGFza1R5cGUodXNlclRhc2spO1xyXG4gICAgY29uc3QgaXNDdXN0b21UYXNrID0gdGFza1R5cGUgPT09ICdjdXN0b21UYXNrJztcclxuICAgIGNvbnN0IGV4cGlyZWQgPSBtb21lbnQodXNlclRhc2suZGVhZGxpbmUpIDwgbW9tZW50KCk7XHJcbiAgICBjb25zdCB7aW50bH0gPSB0aGlzLmNvbnRleHQ7XHJcblxyXG4gICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwiZWRpdFRhc2tEaWFsb2cgc3YtaHRtbC1wb3J0bGV0IHN2LXBvcnRsZXQgc3Ytc2tpcC1zcGFjZXJcIj5cclxuICAgICAgPGgyPntpc0N1c3RvbVRhc2sgPyBcclxuICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cInRhc2suZWRpdFdvcmtHb2Fsc1wiIGRlZmF1bHRNZXNzYWdlPSdSZWRpZ2VyYSBhcmJldHNtw6VsJy8+IDogXHJcbiAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ0YXNrLmVkaXRUYXNrXCIgZGVmYXVsdE1lc3NhZ2U9J1JlZGlnZXJhIHVwcGdpZnQnLz59XHJcbiAgICAgIDwvaDI+XHJcbiAgICAgIDxociAvPlxyXG4gICAgICA8VGV4dElucHV0XHJcbiAgICAgICAgYXV0b0ZvY3VzXHJcbiAgICAgICAgbGFiZWw9e2lzQ3VzdG9tVGFzayA/IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6ICd0YXNrLnRhcmdldE5hbWVMYWJlbCcsIGRlZmF1bHRNZXNzYWdlOiAnQXJiZXRzbcOlbGV0cyBuYW1uJ30pICA6IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6ICd0YXNrLnRhc2tOYW1lTGFiZWwnLCBkZWZhdWx0TWVzc2FnZTogJ1VwcGdpZnRlbnMgbmFtbid9KX1cclxuICAgICAgICBpZD1cIkVkaXRVc2VyVGFzazpuYW1lXCJcclxuICAgICAgICBwbGFjZWhvbGRlcj17aXNDdXN0b21UYXNrID8gaW50bC5mb3JtYXRNZXNzYWdlKHtpZDogJ3Rhc2sud2hhdFNob3VsZFlvdURvUGxoZCcsIGRlZmF1bHRNZXNzYWdlOiAnVmFkIHNrYSBkdSBnw7ZyYT8nfSkgOiBpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiAndGFzay5lbnRlclRhc2tOYW1lUGxoZCcsIGRlZmF1bHRNZXNzYWdlOiAnQW5nZSB1cHBnaWZ0ZW5zIG5hbW4uLi4nfSkgfVxyXG4gICAgICAgIHZhbHVlPXtuYW1lfVxyXG4gICAgICAgIG9uQ2hhbmdlPXtuYW1lID0+IHRoaXMuc2V0U3RhdGUoe25hbWV9KX0gLz5cclxuICAgICAgXHJcbiAgICAgIHtpc0N1c3RvbVRhc2sgJiYgPD5cclxuICAgICAgICA8VGV4dEFyZWFGb3JtRmllbGRcclxuICAgICAgICAgIHJvd3M9ezV9XHJcbiAgICAgICAgICBsYWJlbD0ge2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6ICdjb21tb24uZGVzY3JpcHRpb25MYWJlbCcsIGRlZmF1bHRNZXNzYWdlOiAnQmVza3Jpdm5pbmcnfSl9XHJcbiAgICAgICAgICBpZD1cIkVkaXRVc2VyVGFzazpkZXNjcmlwdGlvblwiXHJcbiAgICAgICAgICBwbGFjZWhvbGRlcj17aW50bC5mb3JtYXRNZXNzYWdlKHtpZDogJ2NvbW1vbi5hZGREZXNjcmlwdGlvblBsaGQnLCBkZWZhdWx0TWVzc2FnZTogJ0zDpGdnIHRpbGwgZW4gYmVza3Jpdm5pbmcuLi4nfSl9XHJcbiAgICAgICAgICB2YWx1ZT17ZGVzY3JpcHRpb259XHJcbiAgICAgICAgICBvbkNoYW5nZT17ZGVzY3JpcHRpb249PnRoaXMuc2V0U3RhdGUoe2Rlc2NyaXB0aW9ufSl9IC8+XHJcblxyXG4gICAgICAgIDxUZXh0SW5wdXRcclxuICAgICAgICAgIGxhYmVsPXtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOidjb21tb24ubGlua0xhYmVsJywgZGVmYXVsdE1lc3NhZ2U6XCJMw6Rua1wifSl9XHJcbiAgICAgICAgICBpZD1cIkVkdXRVc2VyVGFzazp1cmxcIlxyXG4gICAgICAgICAgcGxhY2Vob2xkZXI9XCJodHRwKHMpOi8vLi4uXCJcclxuICAgICAgICAgIHZhbHVlPXt1cmx9XHJcbiAgICAgICAgICBvbkNoYW5nZT17dXJsID0+IHRoaXMuc2V0U3RhdGUoe3VybH0pfSA+XHJcblxyXG4gICAgICAgIDwvVGV4dElucHV0PjwvPn1cclxuXHJcbiAgICAgICAgPEZvcm1GaWVsZCBsYWJlbD17aW50bC5mb3JtYXRNZXNzYWdlKHtpZDogJ3Rhc2suc2V0RGVhZGxpbmUnLCBkZWZhdWx0TWVzc2FnZTogJ0FuZ2UgZGVhZGxpbmUnfSl9PlxyXG4gICAgICAgICAgeyhkZWFkbGluZSB8fCBzaG93Q2FsZW5kYXIpID9cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAgICAgIDxSZWFjdERhdGVQaWNrZXIgcmVmPXtlbGVtID0+IHRoaXMuZGF0ZVBpY2tlciA9IGVsZW19XHJcbiAgICAgICAgICAgICAgICAgIGlkPVwiRWRpdFVzZXJUYXNrOmRlYWRsaW5lXCJcclxuICAgICAgICAgICAgICAgICAgbmV4dE1vbnRoQnV0dG9uTGFiZWw9XCJcIiBcclxuICAgICAgICAgICAgICAgICAgcHJldmlvdXNNb250aEJ1dHRvbkxhYmVsPVwiXCIgXHJcbiAgICAgICAgICAgICAgICAgIHNob3dXZWVrTnVtYmVycz17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ9e2RlYWRsaW5lICYmIG1vbWVudChkZWFkbGluZSkudG9EYXRlKCl9XHJcbiAgICAgICAgICAgICAgICAgIGF1dG9Gb2N1cz17c2hvd0NhbGVuZGFyfVxyXG4gICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0PVwieXl5eS1NTS1kZFwiXHJcbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17ZXhwaXJlZCA/IFwiZXhwaXJlZFwiIDogdW5kZWZpbmVkfVxyXG4gICAgICAgICAgICAgICAgICBsb2NhbGU9e2ludGwubG9jYWxlfVxyXG4gICAgICAgICAgICAgICAgICBwb3BwZXJQbGFjZW1lbnQ9e2lzQ3VzdG9tVGFzayA/IFwidG9wLXN0YXJ0XCIgOiBcImJvdHRvbS1zdGFydFwifVxyXG4gICAgICAgICAgICAgICAgICBvbkJsdXI9eygpPT50aGlzLnNldFN0YXRlKHtzaG93Q2FsZW5kYXI6IGZhbHNlfSl9XHJcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt2YWx1ZT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgZGVhZGxpbmU6IHZhbHVlICYmIG1vbWVudCh2YWx1ZSkuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgIHNob3dDYWxlbmRhcjogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbSB0b3BcIj5cclxuICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cImRlbGV0ZURhdGVcIiBocmVmPVwiI1wiIHRpdGxlPXtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiAndGFzay5yZW1vdmVEZWFkbGluZScsIGRlZmF1bHRNZXNzYWdlOiAnVGEgYm9ydCBkZWFkbGluZSd9KX0gb25DbGljaz17ZXY9PntcclxuICAgICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7ZGVhZGxpbmU6IG51bGwsIHNob3dDYWxlbmRhcjogZmFsc2V9KTtcclxuICAgICAgICAgICAgICAgIH19PjwvYT5cclxuICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+IDpcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0b3BcIiByZWY9eygpPT57dGhpcy5kYXRlUGlja2VyID0gbnVsbH19PlxyXG4gICAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwiYnRuXCIgb25DbGljaz17ZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRlUGlja2VyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRlUGlja2VyLnNldE9wZW4odHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd0NhbGVuZGFyOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfX0+XHJcbiAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1jYWxlbmRhclwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cInRhc2suc2V0RGVhZGxpbmVMYWJlbFwiIGRlZmF1bHRNZXNzYWdlPVwiQW5nZSBkZWFkbGluZS4uLlwiLz5cclxuICAgICAgICAgICAgICA8L2E+ICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgPC9kaXY+fVxyXG4gICAgICAgIDwvRm9ybUZpZWxkPlxyXG4gICAgICA8Rm9ybUZpZWxkIGxhYmVsPXtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiAndGFzay5zdWJUYXNrcycsIGRlZmF1bHRNZXNzYWdlOiAnVW5kZXJ1cHBnaWZ0ZXInfSl9ID5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxlYXJuaW5nR29hbFRhc2tzXCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRhc2tDb250YWluZXJcIj5cclxuXHJcbiAgICAgICAgICAgICAge3N1YlRhc2tzICYmIHN1YlRhc2tzLm1hcChzdWJUYXNrID0+IDxkaXYga2V5PXtzdWJUYXNrLmlkfSBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPjxhXHJcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpPT50aGlzLmVkaXRTdWJUYXNrKHN1YlRhc2spfVxyXG4gICAgICAgICAgICAgICAgICBocmVmPVwiI1wiPntzdWJUYXNrLm5hbWV9PC9hPjwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2Pil9XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidG9wXCI+XHJcbiAgICAgICAgICAgIDxidXR0b24gaWQ9XCJFZGl0VXNlclRhc2s6YWRkU3ViVGFza1wiIGNsYXNzTmFtZT1cImJ0blwiXHJcbiAgICAgICAgICAgICAgb25DbGljaz17KCk9PnRoaXMuYWRkU3ViVGFzaygpfT5cclxuICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1wbHVzXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPiA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cInRhc2suYWRkU3VidGFza1wiIGRlZmF1bHRNZXNzYWdlPVwiTMOkZ2cgdGlsbCB1bmRlcnVwcGdpZnRcIi8+XHJcbiAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvRm9ybUZpZWxkPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImRpdmlkZXIgbGFyZ2VcIiAvPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxCdXR0b24gdG9wXCI+XHJcbiAgICAgICAgICA8YnV0dG9uIHRhYkluZGV4PXsxfVxyXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJidG4gYnRuLWRlZmF1bHRcIlxyXG4gICAgICAgICAgICBvbkNsaWNrPXsoKT0+e1xyXG4gICAgICAgICAgICAgIGlzTW9kaWZpZWQgPyBvblVwZGF0ZSh1c2VyVGFzayA9PiB7XHJcbiAgICAgICAgICAgICAgICB1c2VyVGFzay5uYW1lID0gbmFtZTtcclxuICAgICAgICAgICAgICAgIHVzZXJUYXNrLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XHJcbiAgICAgICAgICAgICAgICB1c2VyVGFzay51cmwgPSB1cmw7XHJcbiAgICAgICAgICAgICAgICB1c2VyVGFzay5kZWFkbGluZSA9IGRlYWRsaW5lO1xyXG4gICAgICAgICAgICAgIH0pIDogdGhpcy5wcm9wcy5jbG9zZURpYWxvZygpO1xyXG4gICAgICAgICAgICB9fT48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cImNvbW1vbi5zYXZlXCIgZGVmYXVsdE1lc3NhZ2U9XCJTcGFyYVwiLz4gXHJcbiAgICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEJ1dHRvbiB0b3BcIj5cclxuICAgICAgICAgIDxidXR0b24gdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0blwiXHJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpPT57XHJcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy5jbG9zZURpYWxvZygpO1xyXG4gICAgICAgICAgICB9fT48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cImNvbW1vbi5jYW5jZWxcIiBkZWZhdWx0TWVzc2FnZT1cIkF2YnJ5dFwiLz48L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbmZpcm0gdG9wIHB1bGwtcmlnaHRcIj5cclxuICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgdGFiSW5kZXg9ezF9XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4td2FybmluZ1wiXHJcbiAgICAgICAgICAgIG9uQ2xpY2s9eygpPT57XHJcbiAgICAgICAgICAgICAgb25EZWxldGUoaWQpO1xyXG4gICAgICAgICAgICB9fT57aXNDdXN0b21UYXNrID9cclxuICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cInRhc2sucmVtb3ZlV29ya0dvYWxzXCIgZGVmYXVsdE1lc3NhZ2U9XCJUYSBib3J0IGFyYmV0c23DpWxcIi8+IDpcclxuICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cInRhc2sucmVtb3ZlVGhpc1Rhc2tcIiBkZWZhdWx0TWVzc2FnZT1cIlRhIGJvcnQgZGVuIGjDpHIgdXBwZ2lmdGVuXCIvPlxyXG4gICAgICAgICAgfTwvYnV0dG9uPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgXHJcbiAgICAgIHsvKjxkaXYgY2xhc3NOYW1lPVwiYnRuIGJ0bi13YXJuaW5nIGJ0bi1sYXJnZSBwdWxsLXJpZ2h0XCIgb25DbGljaz17ZXYgPT4gb25EZWxldGUoaWQpfT5cclxuICAgICAgICB7TGBUYSBib3J0IGFyYmV0c23DpWxgfTwvZGl2PlxyXG4gICAgICB7aXNNb2RpZmllZCAmJlxyXG4gICAgICAgIDxkaXZcclxuICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tbGFyZ2UgYnRuLWRlZmF1bHRcIlxyXG4gICAgICAgICAgdGFiSW5kZXg9ezB9XHJcbiAgICAgICAgICBvbkNsaWNrPXsoKT0+b25VcGRhdGUodXNlclRhc2sgPT4ge1xyXG4gICAgICAgICAgICB1c2VyVGFzay5uYW1lID0gbmFtZTtcclxuICAgICAgICAgICAgdXNlclRhc2suZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgdXNlclRhc2sudXJsID0gdXJsO1xyXG4gICAgICAgICAgfSl9PiBTcGFyYTwvZGl2Pn0qL31cclxuICAgIDwvZGl2PlxyXG4gIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgVXNlclRhc2sgfSBmcm9tIFwia2VkYmFja2VuZC9tb2RlbHNcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUYXNrVHlwZSAodXNlclRhc2s6IFVzZXJUYXNrKSA6ICdjb3Vyc2VCdWlsZGVyVGFzaycgfCAnc2l0ZVZpc2lvblRhc2snIHwgJ3N1YmplY3RQbGFubmVyVGFzaycgfCAnY3VzdG9tVGFzaycge1xyXG4gIHJldHVybiB1c2VyVGFzay5jb3Vyc2UgJiYgdXNlclRhc2sudGFzayAmJiB1c2VyVGFzay5jb3Vyc2UubGVuZ3RoID4gMCAmJiB1c2VyVGFzay50YXNrLmxlbmd0aCA+IDAgP1xyXG4gICAgJ2NvdXJzZUJ1aWxkZXJUYXNrJyA6XHJcbiAgICB1c2VyVGFzay5zaXRlVmlzaW9uUGFnZUlkID9cclxuICAgICAgJ3NpdGVWaXNpb25UYXNrJyA6XHJcbiAgICAgICAgdXNlclRhc2suY291cnNlSW5mbyA/XHJcbiAgICAgICAgICAnc3ViamVjdFBsYW5uZXJUYXNrJyA6XHJcbiAgICAgICAgICAnY3VzdG9tVGFzayc7XHJcbn1cclxuIiwiaW1wb3J0IHsgVXNlclRhc2sgfSBmcm9tICdrZWRiYWNrZW5kL21vZGVscyc7XHJcbmltcG9ydCB7IFVzZXJUYXNrc0JveFByb3BzIH0gZnJvbSAnLi91c2VyLXRhc2tzLWJveCc7XHJcbmltcG9ydCB7IGFycmF5VG9NYXAsIGFycmF5VG9Mb29rdXAsIGNvbXBhcmVQcm9wLCBMIH0gZnJvbSBcIi4uLy4uL3V0aWxzL3V0aWxzXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFZpcnR1YWxMZWFybmluZ0dvYWwge1xyXG4gIG5hbWU6IHN0cmluZztcclxuICBhbGxUYXNrczogVXNlclRhc2tbXTtcclxuICBzdGVwPzogbnVtYmVyO1xyXG4gIHVybD86IHN0cmluZztcclxuICB0YXNrczogVXNlclRhc2tbXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlZmluZSh0YXNrczogVXNlclRhc2tbXSkge1xyXG4gIGNvbnN0IHJlc3VsdCA9IFtdIGFzIFBhcnRpYWw8VXNlclRhc2tzQm94UHJvcHM+W107XHJcbiAgY29uc3QgbWFwcGVyID0ge30gYXMgeyBbbmFtZTogc3RyaW5nXTogVXNlclRhc2tzQm94UHJvcHMgfTtcclxuICBjb25zdCB0YXNrc1BlckNvdXJzZSA9IGFycmF5VG9Mb29rdXAodGFza3MsIHQgPT4gdC5jb3Vyc2VOYW1lIHx8ICcnKTtcclxuICBmb3IgKGNvbnN0IGNvdXJzZU5hbWUgb2YgT2JqZWN0LmtleXModGFza3NQZXJDb3Vyc2UpLnNvcnQoKS5maWx0ZXIoeCA9PiB4KS5jb25jYXQodGFza3NQZXJDb3Vyc2VbJyddID9cclxuICAgIFsnJ10gOiBbXSkpIHtcclxuICAgIGNvbnN0IGNvdXJzZVRhc2tzID0gdGFza3NQZXJDb3Vyc2VbY291cnNlTmFtZV0gfHwgdGFza3NQZXJDb3Vyc2VbJyddO1xyXG4gICAgY29uc3QgdGFza3NQZXJMZWFybmluZ0dvYWwgPSBhcnJheVRvTG9va3VwKGNvdXJzZVRhc2tzLCB0ID0+IHQubGVhcm5pbmdHb2FsKTtcclxuICAgIGNvbnN0IHJlc3VsdExlYXJuaW5nR29hbHM6IFZpcnR1YWxMZWFybmluZ0dvYWxbXSA9IFtdO1xyXG4gICAgZm9yIChjb25zdCBsZWFybmluZ0dvYWwgb2YgT2JqZWN0LmtleXModGFza3NQZXJMZWFybmluZ0dvYWwpKSB7XHJcbiAgICAgIGNvbnN0IGxnVGFza3MgPSB0YXNrc1BlckxlYXJuaW5nR29hbFtsZWFybmluZ0dvYWxdLnNvcnQoY29tcGFyZVByb3AoXCJkYXRlVGltZVwiKSk7XHJcbiAgICAgIGNvbnN0IGxlYXJuaW5nR29hbFRhc2sgPSBsZ1Rhc2tzXHJcbiAgICAgICAgLmZpbHRlcih0ID0+IHQubmFtZSA9PSBudWxsKSAvLyBJZiBuYW1lIGlzIHVuZGVmaW5lZCBvciBudWxsLCB0aGlzIHJlcHJlc2VudHMgYSBsZWFybmluZyBnb2FsXHJcbiAgICAgICAgWzBdO1xyXG4gICAgICBjb25zdCB1cmwgPSBsZWFybmluZ0dvYWxUYXNrICYmIGxlYXJuaW5nR29hbFRhc2sudXJsO1xyXG4gICAgICByZXN1bHRMZWFybmluZ0dvYWxzLnB1c2goe1xyXG4gICAgICAgIG5hbWU6IGxlYXJuaW5nR29hbCxcclxuICAgICAgICBhbGxUYXNrczogbGdUYXNrcyxcclxuICAgICAgICB1cmwsXHJcbiAgICAgICAgc3RlcDogbGdUYXNrcy5tYXAodCA9PiB0LnN0ZXApLmZpbHRlcihzdGVwID0+IHN0ZXApWzBdLFxyXG4gICAgICAgIHRhc2tzOiBsZ1Rhc2tzLmZpbHRlcih0ID0+IHQubmFtZSlcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXN1bHQucHVzaCh7XHJcbiAgICAgIGNvdXJzZU5hbWUsXHJcbiAgICAgIGxlYXJuaW5nR29hbHM6IHJlc3VsdExlYXJuaW5nR29hbHNcclxuICAgIH0pO1xyXG4gIH1cclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgVXNlclRhc2ssIFRhc2ssIFVzZXJTdWJUYXNrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBPcGVuQ2xvc2VCb3ggfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvb3Blbi1jbG9zZS1ib3gnO1xyXG5pbXBvcnQgeyBMIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBwcmVzZXJ2ZUltcGVyc29uYXRpb25RdWVyeSB9IGZyb20gJy4uLy4uL2FjY2Vzcy1jb250cm9sJztcclxuaW1wb3J0IHsgY291cnNlTmFtZVRvQ3NzQ2xhc3MgfSBmcm9tICcuLi9jYWxlbmRhci9jb3Vyc2UtbmFtZS10by1jc3MtY2xhc3MnO1xyXG5pbXBvcnQgeyBnZXRUYXNrVHlwZSB9IGZyb20gJy4vZ2V0LXRhc2stdHlwZSc7XHJcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuaW1wb3J0IHsgVmlydHVhbExlYXJuaW5nR29hbCB9IGZyb20gJy4vcmVmaW5lcic7XHJcbmltcG9ydCB7IEZlYXR1cmVzIH0gZnJvbSAnLi4vLi4vZmVhdHVyZXMnO1xyXG5pbXBvcnQgY2ZnIGZyb20gJy4uLy4uL2dsb2JhbHMvS0VELmNmZyc7XHJcbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAncmVhY3QtaW50bCc7XHJcbmltcG9ydCB7TGFuZ3VhZ2VDb250ZXh0fSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvTGFuZ3VhZ2VDb250ZXh0JztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVXNlclRhc2tzQm94UHJvcHMge1xyXG4gIGNvdXJzZU5hbWU6IHN0cmluZztcclxuICBsZWFybmluZ0dvYWxzOiBWaXJ0dWFsTGVhcm5pbmdHb2FsW10sXHJcbiAgdmlld0NvdXJzZVVybDogc3RyaW5nO1xyXG4gIG9wZW5Db3Vyc2VzPzogeyBbcGF0aDogc3RyaW5nXTogYm9vbGVhbiB9O1xyXG4gIHNldElzT3Blbj86IChjb3Vyc2VOYW1lOiBzdHJpbmcsIGlzT3BlbjogYm9vbGVhbikgPT4gdm9pZDtcclxuICBzZXRUYXNrRG9uZT86ICh0YXNrOiBVc2VyVGFzaywgZG9uZTogYm9vbGVhbikgPT4gdm9pZDtcclxuICBzZXRTdWJUYXNrRG9uZTogKHRhc2s6IFVzZXJUYXNrLCBzdWJUYXNrOiBVc2VyU3ViVGFzaywgZG9uZTogYm9vbGVhbikgPT4gdm9pZDtcclxuICBhZGRPd25UYXNrPzogKGNvdXJzZU5hbWU6IHN0cmluZywgbGVhcm5pbmdHb2FsTmFtZTogc3RyaW5nKSA9PiB2b2lkO1xyXG4gIGVkaXRUYXNrOiAodGFzazogVXNlclRhc2spID0+IHZvaWQ7XHJcbiAgZWRpdFN1YlRhc2s6ICh0YXNrOiBVc2VyVGFzaywgc3ViVGFzazogVXNlclN1YlRhc2spID0+IHZvaWQ7XHJcbiAgcmVtb3ZlTGVhcm5pbmdHb2FsOiAobGc6IFZpcnR1YWxMZWFybmluZ0dvYWwpPT52b2lkO1xyXG4gIGRpc3BsYXlQcm9ncmVzczogYm9vbGVhbjtcclxuICBwcm9ncmVzc0RhdGE6IHtjb21wbGV0ZWROdW1iZXJPZlRhc2tzOiBudW1iZXIsIG51bWJlck9mVGFza3M6IG51bWJlcn07XHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgVXNlclRhc2tzQm94IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFVzZXJUYXNrc0JveFByb3BzPiB7XHJcbiAgc3RhdGljIGNvbnRleHRUeXBlID0gTGFuZ3VhZ2VDb250ZXh0O1xyXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBVc2VyVGFza3NCb3hQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gIH1cclxuXHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgY291cnNlTmFtZSxcclxuICAgICAgbGVhcm5pbmdHb2FscywgXHJcbiAgICAgIHByb2dyZXNzRGF0YSxcclxuICAgICAgZGlzcGxheVByb2dyZXNzXHJcbiAgICB9ID0gdGhpcy5wcm9wcztcclxuICAgIGNvbnN0IGlzT3BlbiA9ICEhdGhpcy5wcm9wcy5vcGVuQ291cnNlc1tjb3Vyc2VOYW1lXTtcclxuICAgIGNvbnN0IGZlYXR1cmVzID0gbmV3IEZlYXR1cmVzKCk7XHJcbiAgICBjb25zdCB7aW50bH0gPSB0aGlzLmNvbnRleHQ7XHJcblxyXG4gICAgcmV0dXJuIDxPcGVuQ2xvc2VCb3hcclxuICB0aXRsZT17PGg1Pntjb3Vyc2VOYW1lIHx8IDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwidXNlclRhc2tzLmdvYWxzXCIgIGRlZmF1bHRNZXNzYWdlPVwiRWduYSBsw6RyYW5kZW3DpWxcIi8+IH08L2g1Pn1cclxuICAgICAgaGVhZGVyT3Blbj17aXNPcGVufVxyXG4gICAgICBjbGFzc05hbWU9e2NvdXJzZU5hbWUgJiYgY291cnNlTmFtZVRvQ3NzQ2xhc3MoJ3dwLWNvdXJzZS0nLCBjb3Vyc2VOYW1lKX1cclxuICAgICAgb25PcGVuQ2xvc2U9e2JlY2FtZU9wZW4gPT4gdGhpcy5wcm9wcy5zZXRJc09wZW4oY291cnNlTmFtZSwgYmVjYW1lT3Blbil9XHJcbiAgICAgIGRpc3BsYXlQcm9ncmVzcz0ge2Rpc3BsYXlQcm9ncmVzc30gICAgICAgXHJcbiAgICAgIHByb2dyZXNzRGF0YSA9IHtwcm9ncmVzc0RhdGF9XHJcbiAgICAgID5cclxuICAgICAge2xlYXJuaW5nR29hbHMubWFwKGxnID0+XHJcbiAgICAgICAgPGRpdiBrZXk9e2xnLm5hbWV9IGNsYXNzTmFtZT1cImxlYXJuaW5nR29hbENvbnRhaW5lclwiPlxyXG4gICAgICAgICAge2xnLnN0ZXAgJiYgPGRpdiBjbGFzc05hbWU9XCJzdGVwSW5kaWNhdG9yXCI+e2xnLnN0ZXB9PC9kaXY+fVxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGlnbi1ob3Jpem9udGFsXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGVhcm5pbmdHb2FsVGV4dCBob3Jpem9udGFsSXRlbSB0b3BcIj57bGcubmFtZX08L2Rpdj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJob3Jpem9udGFsSXRlbVwiPlxyXG4gICAgICAgICAgICAgICZuYnNwOzxhXHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ0cmFzaFwiXHJcbiAgICAgICAgICAgICAgICBocmVmPVwiI1wiXHJcbiAgICAgICAgICAgICAgICAgdGl0bGU9e2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J3VzZXJUYXNrcy5kZWxldGVMZWFybmluZ0dvYWwnLCBkZWZhdWx0TWVzc2FnZTogJ1RhIGJvcnQgbMOkcmFuZGVtw6VsZXQgb2NoIGRlc3MgdXBwZ2lmdGVyJ30pfVxyXG4gICAgICAgICAgICAgICAgb25DbGljaz17ZXY9PntcclxuICAgICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5yZW1vdmVMZWFybmluZ0dvYWwobGcpO1xyXG4gICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS10cmFzaFwiIC8+XHJcbiAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibGVhcm5pbmdHb2FsVGFza3NcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0YXNrQ29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAge2xnLnRhc2tzLm1hcCh1c2VyVGFzayA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc1dvcmtpbmcgPSB1c2VyVGFzay4kbWV0YSA9PT0gJ2FkZGluZycgfHwgdXNlclRhc2suJG1ldGEgPT09ICdkZWxldGluZycgfHwgdXNlclRhc2suJG1ldGEgPT09ICd1cGRhdGluZyc7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFza1R5cGUgPSBnZXRUYXNrVHlwZSh1c2VyVGFzayk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBleHBpcmVkID0gbW9tZW50KHVzZXJUYXNrLmRlYWRsaW5lKS5zdGFydE9mKCdkYXknKSA8IG1vbWVudCgpLnN0YXJ0T2YoJ2RheScpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiA8ZGl2IGtleT17dXNlclRhc2suaWR9IHN0eWxlPXtpc1dvcmtpbmcgPyB7IG9wYWNpdHk6IDAuNSB9IDoge319PlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsaWduLWhvcml6b250YWxcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e1wiY2hlY2tCb3hcIiArICh1c2VyVGFzay5kb25lID8gXCIgY2hlY2tlZFwiIDogXCJcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2V2ID0+ICFpc1dvcmtpbmcgJiYgdGhpcy5wcm9wcy5zZXRUYXNrRG9uZSh1c2VyVGFzaywgIXVzZXJUYXNrLmRvbmUpfT5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICB7dGFza1R5cGUgPT09ICdjb3Vyc2VCdWlsZGVyVGFzaycgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPXtnZXRUYXNrVXJsKHVzZXJUYXNrLCB0aGlzLnByb3BzLnZpZXdDb3Vyc2VVcmwpfT57dXNlclRhc2submFtZX08L2E+IDpcclxuICAgICAgICAgICAgICAgICAgICAgICB0YXNrVHlwZSA9PT0gJ3N1YmplY3RQbGFubmVyVGFzaycgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPXtnZXRTdWJqZWN0UGxhbm5lclRhc2tVcmwodXNlclRhc2spfT57dXNlclRhc2submFtZX08L2E+IDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFza1R5cGUgPT09ICdzaXRlVmlzaW9uVGFzaycgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9e3VzZXJUYXNrLnVybH0+e3VzZXJUYXNrLm5hbWV9PC9hPiA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17IXVzZXJUYXNrLnVybCA/IFwibGluay1sZXNzXCI6IFwiXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPXt1c2VyVGFzay51cmwgfHwgdW5kZWZpbmVkfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0PXsodXNlclRhc2sudXJsKycnKS50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgobG9jYXRpb24uaG9zdC50b0xvd2VyQ2FzZSgpKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiX3NlbGZcIiA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiX2JsYW5rXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPnt1c2VyVGFzay5uYW1lfTwvYT59XHJcbiAgICAgICAgICAgICAgICAgICAgICB7dXNlclRhc2suZGVhZGxpbmUgJiYgPGRpdiBjbGFzc05hbWU9e1wiZGF0ZVNldFwiICsgKGV4cGlyZWQgPyAnIGV4cGlyZWQnIDogJycpfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgdGl0bGU9e21vbWVudCh1c2VyVGFzay5kZWFkbGluZSkuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKX0gY2xhc3NOYW1lPVwiZmEgZmEtY2FsZW5kYXJcIiBhcmlhLWhpZGRlbj1cInRydWVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpPT57fX0+PC9pPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+fVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wIHRhc2tFZGl0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cImVkaXRJdGVtXCIgb25DbGljaz17KCkgPT4gdGhpcy5wcm9wcy5lZGl0VGFzayh1c2VyVGFzayl9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4gXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAge3VzZXJUYXNrLnN1YlRhc2tzICYmIDxkaXYgY2xhc3NOYW1lPVwic3VidGFza3NcIj5cclxuICAgICAgICAgICAgICAgICAgICB7dXNlclRhc2suc3ViVGFza3MubWFwKHN1YlRhc2sgPT5cclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtzdWJUYXNrLmlkfSA+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtcImNoZWNrQm94XCIgKyAoc3ViVGFzay5kb25lID8gXCIgY2hlY2tlZFwiIDogXCJcIil9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtldiA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhaXNXb3JraW5nICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuc2V0U3ViVGFza0RvbmUodXNlclRhc2ssIHN1YlRhc2ssICFzdWJUYXNrLmRvbmUpfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW0gdG9wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9e3N1YlRhc2sudXJsIHx8IHVuZGVmaW5lZH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldD17KHVzZXJUYXNrLnVybCsnJykudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKGxvY2F0aW9uLmhvc3QudG9Mb3dlckNhc2UoKSkgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJfc2VsZlwiIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiX2JsYW5rXCJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJUYXNrLnVybCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbGluay1sZXNzJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0+e3N1YlRhc2submFtZX08L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtIHRvcCB0YXNrRWRpdFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cImVkaXRJdGVtXCIgb25DbGljaz17KCkgPT4gdGhpcy5wcm9wcy5lZGl0U3ViVGFzayh1c2VyVGFzaywgc3ViVGFzayl9IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+KX1cclxuICAgICAgICAgICAgICAgICAgPC9kaXY+fVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgfSl9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsZWFybmluZ0dvYWxUb29sc1wiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ0biBhZGRPd25Hb2FsXCJcclxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLnByb3BzLmFkZE93blRhc2sodGhpcy5wcm9wcy5jb3Vyc2VOYW1lLCBsZy5uYW1lKX0+XHJcbiAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtcGx1c1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4gPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9J3VzZXJUYXNrcy5hZGRMZWFybmluZ0dvYWwnIGRlZmF1bHRNZXNzYWdlPSdFZ2V0IGFyYmV0c23DpWwnLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxiciAvPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICApfVxyXG4gICAgPC9PcGVuQ2xvc2VCb3g+XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRUYXNrVXJsKHVzZXJUYXNrOiBVc2VyVGFzaywgdmlld0NvdXJzZVVybDogc3RyaW5nKSB7XHJcbiAgaWYgKHVzZXJUYXNrLmNvdXJzZSAmJiB1c2VyVGFzay5jb3Vyc2UubGVuZ3RoID4gMCAmJiB1c2VyVGFzay50YXNrICYmIHVzZXJUYXNrLnRhc2subGVuZ3RoID4gMCkge1xyXG4gICAgY29uc3QgY291cnNlVXJsID0gcHJlc2VydmVJbXBlcnNvbmF0aW9uUXVlcnkodmlld0NvdXJzZVVybCwgeyBjb3Vyc2VJZDogdXNlclRhc2suY291cnNlWzBdLmlkIH0pO1xyXG4gICAgcmV0dXJuIGAke2NvdXJzZVVybH0jL3Rhc2svJHt1c2VyVGFzay50YXNrWzBdLmlkfWA7XHJcbiAgfVxyXG4gIHJldHVybiB1c2VyVGFzay51cmw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFN1YmplY3RQbGFubmVyVGFza1VybCh1c2VyVGFzazogVXNlclRhc2spIHtcclxuICBpZiAodXNlclRhc2suY291cnNlSW5mbyAmJiB1c2VyVGFzay50YXNrICYmIHVzZXJUYXNrLnRhc2subGVuZ3RoID4gMCkge1xyXG4gICAgY29uc3Qge3NjaG9vbCwgY291cnNlLCB0YWIgfSA9IHVzZXJUYXNrLmNvdXJzZUluZm87XHJcbiAgICBjb25zdCBjb3Vyc2VVcmwgPSBwcmVzZXJ2ZUltcGVyc29uYXRpb25RdWVyeShjZmcuS0VEX1NVQkpFQ1RfUExBTk5FUl9VUkwsIHt9KTtcclxuICAgIHJldHVybiBgJHtjb3Vyc2VVcmx9Iy8ke3NjaG9vbH0vY291cnNlcy8ke2NvdXJzZX0vdGFicy8ke3RhYn0vdGFza3MvJHt1c2VyVGFzay50YXNrWzBdLmlkfWA7XHJcbiAgfVxyXG4gIHJldHVybiB1c2VyVGFzay51cmw7XHJcbn1cclxuIiwiaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBsb2NhbE1vbWVudCB9IGZyb20gJy4uLy4uL2dsb2JhbHMvbW9tZW50LXN2LWxvY2FsZSc7XHJcblxyXG50eXBlIE1vbWVudCA9IG1vbWVudC5Nb21lbnQ7XHJcblxyXG5leHBvcnQgY2xhc3MgV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZSB7XHJcbiAgc3RhdGljIEVYUElSQVRJT05fSE9VUlMgPSAxMjtcclxuICBzdGF0aWMgVkVSU0lPTiA9IDI7XHJcblxyXG4gIHVzZXI6IHN0cmluZztcclxuICBsYXN0V3JpdGU6IG51bWJlcjtcclxuICB3ZWVrRGF0ZTogbnVtYmVyO1xyXG4gIG9wZW5Db3Vyc2VzOiB7IFtwYXRoOiBzdHJpbmddOiBib29sZWFuIH1cclxuXHJcbiAgY29uc3RydWN0b3IgKHVzZXJPckNvcHk6IHN0cmluZyB8IFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUpIHtcclxuICAgIGlmICh0eXBlb2YgdXNlck9yQ29weSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgdGhpcy51c2VyID0gdXNlck9yQ29weTtcclxuICAgICAgdGhpcy5sYXN0V3JpdGUgPSBEYXRlLm5vdygpO1xyXG4gICAgICB0aGlzLndlZWtEYXRlID0gbG9jYWxNb21lbnQoKS5zdGFydE9mKCd3ZWVrJykudmFsdWVPZigpO1xyXG4gICAgICB0aGlzLm9wZW5Db3Vyc2VzID0ge307XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBPYmplY3QuYXNzaWduKHRoaXMsIHVzZXJPckNvcHkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIGxvYWQodXNlcjogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBjb29raWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZTInKTtcclxuICAgIGNvbnN0IHN0b3JlZERhdGEgPSBjb29raWUgJiYgKEpTT04ucGFyc2UoY29va2llKSBhcyBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlKTtcclxuICAgIGNvbnN0IHN0YXRlID0gbmV3IFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUodXNlcik7XHJcbiAgICBpZiAoc3RvcmVkRGF0YSkgT2JqZWN0LmFzc2lnbihzdGF0ZSwgc3RvcmVkRGF0YSk7XHJcblxyXG4gICAgcmV0dXJuIHN0YXRlLnVzZXIgPT09IHVzZXIgJiYgIXN0YXRlLmlzRXhwaXJlZChtb21lbnQoKSkgP1xyXG4gICAgICBzdGF0ZSA6IG5ldyBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlKHVzZXIpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgc2F2ZSgpIHtcclxuICAgIHRoaXMubGFzdFdyaXRlID0gRGF0ZS5ub3coKTtcclxuICAgIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeSh0aGlzKTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlMicsIGpzb24pO1xyXG4gIH1cclxuXHJcbiAgaXNFeHBpcmVkIChhc09mOiBNb21lbnQpIHtcclxuICAgICAgcmV0dXJuIG1vbWVudCh0aGlzLmxhc3RXcml0ZSlcclxuICAgICAgICAuaXNCZWZvcmUoXHJcbiAgICAgICAgICAgIGFzT2YuYWRkKFxyXG4gICAgICAgICAgICAgICAgMC1XZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlLkVYUElSQVRJT05fSE9VUlMsICdob3VycycpXHJcbiAgICAgICAgKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBVc2VyVGFza3NCb3ggfSBmcm9tICcuL3VzZXItdGFza3MtYm94JztcclxuaW1wb3J0IHsgVXNlclRhc2ssIFVzZXJTdWJUYXNrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBjcmVhdGVVVUlELCBIdHRwRXJyb3IgfSBmcm9tIFwia2VkYmFja2VuZC9jbGllbnRcIjtcclxuaW1wb3J0IHsgcmVmaW5lLCBWaXJ0dWFsTGVhcm5pbmdHb2FsIH0gZnJvbSAnLi9yZWZpbmVyJztcclxuaW1wb3J0IHsgRW52IH0gZnJvbSAnLi4vLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IHsgTCwgY29tcGFyZVByb3AgfSBmcm9tICcuLi8uLi91dGlscy91dGlscyc7XHJcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcclxuLy9pbXBvcnQgeyBDdXN0b21Hb2FsIH0gZnJvbSAnLi4vLi4vY29udHJhY3RzL2tlZC1tb2RlbHMnO1xyXG5pbXBvcnQgeyBUU09OIH0gZnJvbSAnLi4vLi4vdXRpbHMvdHNvbic7XHJcbmltcG9ydCB7IFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUgfSBmcm9tICcuL3dlZWtwbGFubmVyLXBlcnNpc3RlZC1zdGF0ZSc7XHJcbmltcG9ydCB7IFJlbW92ZUl0ZW0gfSBmcm9tICcuLi9jb3Vyc2UtYnVpbGRlci9zdWItY29tcG9uZW50cy9yZW1vdmUtaXRlbSc7XHJcbmltcG9ydCB7IERpYWxvZ3MgfSBmcm9tICcuLi91dGlsaXR5LWNvbXBvbmVudHMvZGlhbG9ncyc7XHJcbmltcG9ydCB7IEFkZEN1c3RvbUdvYWwgfSBmcm9tICcuL2FkZC1jdXN0b20tZ29hbCc7XHJcbmltcG9ydCB7IEFkZEN1c3RvbVRhc2sgfSBmcm9tICcuL2FkZC1jdXN0b20tdGFzayc7XHJcbmltcG9ydCB7IEVkaXRVc2VyVGFzayB9IGZyb20gJy4vZWRpdC11c2VyLXRhc2snO1xyXG5pbXBvcnQgeyBTcGlubmVyIH0gZnJvbSAnLi4vY291cnNlLWJ1aWxkZXIvc3ViLWNvbXBvbmVudHMvc3Bpbm5lcic7XHJcbmltcG9ydCB7IE9wZW5DbG9zZUJveCB9IGZyb20gJy4uL3V0aWxpdHktY29tcG9uZW50cy9vcGVuLWNsb3NlLWJveCc7XHJcbmltcG9ydCB7IFBlbmRpbmdKb2IgfSBmcm9tICcuLi8uLi91dGlscy9wZW5kaW5nLWpvYic7XHJcbmltcG9ydCB7IEFkZE9yRWRpdFN1YlRhc2sgfSBmcm9tICcuL2FkZC1vci1lZGl0LXN1Yi10YXNrJztcclxuaW1wb3J0IHsgZ2V0QWRqdXN0ZWRXZWVrLCBLRURXZWVrLCBnZXROZXh0V2Vla0RhdGUsIGdldFByZXZXZWVrRGF0ZSB9IGZyb20gJy4uLy4uL3V0aWxzL3dlZWt1dGlsJztcclxuaW1wb3J0IHsgRm9ybWF0dGVkTWVzc2FnZSB9IGZyb20gJ3JlYWN0LWludGwnO1xyXG5pbXBvcnQge0xhbmd1YWdlQ29udGV4dH0gZnJvbSAnLi4vdXRpbGl0eS1jb21wb25lbnRzL0xhbmd1YWdlQ29udGV4dCc7XHJcbmltcG9ydCB7IFByb2dyZXNzIH0gZnJvbSAnLi4vY2hhcnRzL3Byb2dyZXNzJztcclxuaW1wb3J0IHtnZXRXZWVrcGxhbm5lclByb2dyZXNzRGF0YX0gZnJvbSAnLi4vY2hhcnRzL2NoYXJ0cy11dGlscydcclxuaW1wb3J0IHsgZmVhdHVyZXMgfSBmcm9tICcuLi8uLi9mZWF0dXJlcyc7XHJcblxyXG5jb25zdCBNQVhfU1RSQVRFR1lfTEVOR1RIID0gMTYzODQ7XHJcbmNvbnN0IE1BWF9BU1NFU1NNRU5UX0xFTkdUSCA9IDE2Mzg0O1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICB2aWV3Q291cnNlVXJsOiBzdHJpbmc7XHJcbiAgZW52OiBFbnY7XHJcbn1cclxuXHJcbmludGVyZmFjZSBTdGF0ZSB7XHJcbiAgd2Vla0RhdGU6IG51bWJlcjtcclxuICBkaWFsb2dzOiBhbnlbXTtcclxuICB1c2VyVGFza3M6IFVzZXJUYXNrW107XHJcbiAgb3BlbkNvdXJzZXM6IHsgW3BhdGg6IHN0cmluZ106IGJvb2xlYW4gfVxyXG4gIHN0cmF0ZWd5Pzogc3RyaW5nO1xyXG4gIGFzc2Vzc21lbnQ/OiBzdHJpbmc7XHJcbiAgd2Vla1RleHRzVVQ6IFVzZXJUYXNrIHwgbnVsbDtcclxuICBzYXZpbmc6IGJvb2xlYW47XHJcbiAgaXNMb2FkaW5nOiBib29sZWFuO1xyXG4gIGlzQ29weWluZ1Rhc2tzOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgV2Vla1BsYW5uZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XHJcbiAgd2Vla1RleHRzU2F2aW5nSm9iOiBQZW5kaW5nSm9iO1xyXG4gIHN0YXRpYyBjb250ZXh0VHlwZSA9IExhbmd1YWdlQ29udGV4dDtcclxuXHJcbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICB1c2VyVGFza3M6IFtdLFxyXG4gICAgICB3ZWVrRGF0ZTogRGF0ZS5ub3coKSxcclxuICAgICAgb3BlbkNvdXJzZXM6IHt9LFxyXG4gICAgICBkaWFsb2dzOiBbXSxcclxuICAgICAgc2F2aW5nOiBmYWxzZSxcclxuICAgICAgd2Vla1RleHRzVVQ6IG51bGwsXHJcbiAgICAgIGlzTG9hZGluZzogdHJ1ZSxcclxuICAgICAgaXNDb3B5aW5nVGFza3M6IGZhbHNlXHJcbiAgICB9XHJcbiAgICB0aGlzLm9uQ2hhbmdlID0gdGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy53ZWVrVGV4dHNTYXZpbmdKb2IgPSBuZXcgUGVuZGluZ0pvYigoKT0+dGhpcy5zYXZlV2Vla1RleHRzKCkpO1xyXG4gIH1cclxuXHJcbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICB0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvLnN1YnNjcmliZSh0aGlzLm9uQ2hhbmdlKTtcclxuICB9XHJcblxyXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xyXG4gICAgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby51bnN1YnNjcmliZSh0aGlzLm9uQ2hhbmdlKTtcclxuICAgIHRoaXMud2Vla1RleHRzU2F2aW5nSm9iLnN0b3AoKTtcclxuICB9XHJcblxyXG4gIG9uQ2hhbmdlKHVzZXJUYXNrczogVXNlclRhc2tbXSwgcGVyc2lzdGVkOiBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlLCB3ZWVrVGV4dHNVVDogVXNlclRhc2spIHtcclxuICAgIGNvbnN0IG5ld1N0YXRlIDogUGFydGlhbDxTdGF0ZT4gPSB7XHJcbiAgICAgIHVzZXJUYXNrcyxcclxuICAgICAgd2Vla0RhdGU6IHBlcnNpc3RlZC53ZWVrRGF0ZSxcclxuICAgICAgb3BlbkNvdXJzZXM6IHBlcnNpc3RlZC5vcGVuQ291cnNlcyxcclxuICAgICAgd2Vla1RleHRzVVQsXHJcbiAgICAgIGlzTG9hZGluZzogZmFsc2VcclxuICAgIH1cclxuICAgIGlmICghdGhpcy5zdGF0ZS53ZWVrVGV4dHNVVCB8fCAod2Vla1RleHRzVVQuZGF0ZVRpbWUgIT09IHRoaXMuc3RhdGUud2Vla1RleHRzVVQuZGF0ZVRpbWUpKSB7XHJcbiAgICAgIC8vIENoYW5naW5nIHdlZWsuIFJlc2V0IHRvIG5ldyB3ZWVrJ3MgdmFsdWVzXHJcbiAgICAgIG5ld1N0YXRlLnN0cmF0ZWd5ID0gd2Vla1RleHRzVVQud2Vla1RleHRzLnN0cmF0ZWd5O1xyXG4gICAgICBuZXdTdGF0ZS5hc3Nlc3NtZW50ID0gd2Vla1RleHRzVVQud2Vla1RleHRzLmFzc2Vzc21lbnQ7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFN0YXRlKG5ld1N0YXRlIGFzIGFueSk7IC8vIFJlYWN0J3MgdXNlIG9mIFBpY2sgaW5zdGVhZCBvZiBQYXJ0aWFsIG1ha2VzIHRoaW5ncyBjb21wbGV4IGhlcmUuXHJcbiAgfVxyXG5cclxuICBpc1dlZWtUZXh0c0VkaXRlZCgpIHtcclxuICAgIGNvbnN0IHsgc3RyYXRlZ3ksIGFzc2Vzc21lbnQsIHdlZWtUZXh0c1VUIH0gPSB0aGlzLnN0YXRlO1xyXG4gICAgcmV0dXJuICEhd2Vla1RleHRzVVQgJiYgKHN0cmF0ZWd5ICE9PSB3ZWVrVGV4dHNVVC53ZWVrVGV4dHMuc3RyYXRlZ3kgfHwgYXNzZXNzbWVudCAhPT0gd2Vla1RleHRzVVQud2Vla1RleHRzLmFzc2Vzc21lbnQpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBzYXZlV2Vla1RleHRzKCkge1xyXG4gICAgY29uc29sZS5sb2coXCJTYXZpbmcgdGV4dHMuLi5cIik7XHJcbiAgICBjb25zdCB7IHN0cmF0ZWd5LCBhc3Nlc3NtZW50LCB3ZWVrVGV4dHNVVCB9ID0gdGhpcy5zdGF0ZTtcclxuICAgIGlmICh0aGlzLmlzV2Vla1RleHRzRWRpdGVkKCkpIHtcclxuICAgICAgYXdhaXQgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby51cHNlcnQod2Vla1RleHRzVVQsIHV0ID0+IHtcclxuICAgICAgICB1dC53ZWVrVGV4dHMgPSB7IHN0cmF0ZWd5LCBhc3Nlc3NtZW50IH07XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJldldlZWsoKSB7XHJcbiAgICAvL3RoaXMuc2F2ZVdlZWtUZXh0cygpOyBcclxuICAgIHZhciBwcmV2V2Vla09iaiA9IGdldFByZXZXZWVrRGF0ZShtb21lbnQodGhpcy5zdGF0ZS53ZWVrRGF0ZSkpO1xyXG4gICAgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby5jaGFuZ2VXZWVrKHByZXZXZWVrT2JqLm5leHREYXRlLCBwcmV2V2Vla09iai5hZGp1c3RlZCk7XHJcbiAgfVxyXG5cclxuICBuZXh0V2VlaygpIHtcclxuICAgIC8vdGhpcy5zYXZlV2Vla1RleHRzKCk7XHJcbiAgICB2YXIgbmV4dFdlZWtPYmogPSBnZXROZXh0V2Vla0RhdGUobW9tZW50KHRoaXMuc3RhdGUud2Vla0RhdGUpKTtcclxuICAgIHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8uY2hhbmdlV2VlayhuZXh0V2Vla09iai5uZXh0RGF0ZSwgbmV4dFdlZWtPYmouYWRqdXN0ZWQpO1xyXG4gIH1cclxuXHJcbiAgb3BlbkRpYWxvZyhkaWFsb2cpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoeyBkaWFsb2dzOiBbLi4udGhpcy5zdGF0ZS5kaWFsb2dzLCBkaWFsb2ddIH0pO1xyXG4gIH1cclxuXHJcbiAgb3BlbkFkZEdvYWxEaWFsb2coKSB7XHJcbiAgICB0aGlzLm9wZW5EaWFsb2coPEFkZEN1c3RvbUdvYWxcclxuICAgICAgb25TYXZlPXthc3luYyAobGVhcm5pbmdHb2FsOiBzdHJpbmcpID0+IHtcclxuICAgICAgICBpZiAoIWxlYXJuaW5nR29hbCkgdGhyb3cgbmV3IEVycm9yICh0aGlzLmNvbnRleHQuaW50bC5mb3JtYXRNZXNzYWdlKHtpZDond2Vla3BsYW5uZXIuZW1wdHlMZWFybmluZ0dvYWxFcnInLCBkZWZhdWx0TWVzc2FnZTogJ0zDpHJhbmRlbcOlbGV0IGthbiBpbnRlIHZhcmEgdG9tdCd9KSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlLnNhdmluZykge1xyXG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNhdmluZzogdHJ1ZSB9KTtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkQ3VzdG9tR29hbChsZWFybmluZ0dvYWwpO1xyXG4gICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNhdmluZzogZmFsc2UgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9fSAvPik7XHJcbiAgfVxyXG5cclxuICBvcGVuQWRkT3duVGFza0RpYWxvZyhjb3Vyc2VOYW1lOiBzdHJpbmcsIGxlYXJuaW5nR29hbE5hbWU6IHN0cmluZykge1xyXG4gICAgdGhpcy5vcGVuRGlhbG9nKDxBZGRDdXN0b21UYXNrXHJcbiAgICAgIGlzVGFzaz17IWNvdXJzZU5hbWV9XHJcbiAgICAgIG9uU2F2ZT17YXN5bmMgKG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZywgdXJsOiBzdHJpbmcpID0+IHtcclxuICAgICAgICBpZiAoIW5hbWUpIHRocm93IG5ldyBFcnJvciAodGhpcy5jb250ZXh0LmludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J3dlZWtwbGFubmVyLm5hbWVDYW5ub3RCZUVtcHR5JywgZGVmYXVsdE1lc3NhZ2U6ICdOYW1uZXQga2FuIGludGUgdmFyYSB0b210J30pKTtcclxuICAgICAgICBpZiAoIXRoaXMuc3RhdGUuc2F2aW5nKSB7XHJcbiAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgc2F2aW5nOiB0cnVlIH0pO1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRDdXN0b21UYXNrKGNvdXJzZU5hbWUsIGxlYXJuaW5nR29hbE5hbWUsIG5hbWUsIGRlc2NyaXB0aW9uLCB1cmwpO1xyXG4gICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHNhdmluZzogZmFsc2UgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLmNsb3NlRGlhbG9nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9fSAvPik7XHJcbiAgfVxyXG5cclxuICBlZGl0VGFzayh1c2VyVGFzazogVXNlclRhc2spIHtcclxuICAgIHRoaXMub3BlbkRpYWxvZyg8RWRpdFVzZXJUYXNrXHJcbiAgICAgIHVzZXJUYXNrc1JlcG89e3RoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG99XHJcbiAgICAgIHVzZXJUYXNrPXt1c2VyVGFza31cclxuICAgICAgb25VcGRhdGU9e2FzeW5jICh1cGRhdGVyOiAodXQ6IFVzZXJUYXNrKSA9PiB2b2lkKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdGVzdCA9IHsuLi51c2VyVGFza307XHJcbiAgICAgICAgdXBkYXRlcih0ZXN0KTtcclxuICAgICAgICBpZiAoIXRlc3QubmFtZSkgdGhyb3cgbmV3IEVycm9yICh0aGlzLmNvbnRleHQuaW50bC5mb3JtYXRNZXNzYWdlKHtpZDond2Vla3BsYW5uZXIubmFtZU11c3ROb3RCZUVtcHR5JywgZGVmYXVsdE1lc3NhZ2U6ICdOYW1uZXQgZsOlciBpbnRlIHZhcmEgdG9tdCd9KSk7XHJcbiAgICAgICAgdGhpcy5jbG9zZURpYWxvZygpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8udXBkYXRlKFt1c2VyVGFza10sIHVwZGF0ZXIpO1xyXG4gICAgICB9fVxyXG4gICAgICBvbkRlbGV0ZT17YXN5bmMgaWQgPT4ge1xyXG4gICAgICAgIHRoaXMuY2xvc2VEaWFsb2coKTtcclxuICAgICAgICBhd2FpdCB0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvLmRlbGV0ZShbaWRdKTtcclxuICAgICAgfX1cclxuICAgICAgb3BlbkRpYWxvZz17ZGlhbG9nPT50aGlzLm9wZW5EaWFsb2coZGlhbG9nKX1cclxuICAgICAgY2xvc2VEaWFsb2c9eygpPT50aGlzLmNsb3NlRGlhbG9nKCl9XHJcbiAgICAvPik7XHJcbiAgfVxyXG5cclxuICBlZGl0U3ViVGFzayh1c2VyVGFzazogVXNlclRhc2ssIHN1YlRhc2s6IFVzZXJTdWJUYXNrKSB7XHJcbiAgICB0aGlzLm9wZW5EaWFsb2coPEFkZE9yRWRpdFN1YlRhc2tcclxuICAgICAgdXNlclRhc2tzUmVwbz17dGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwb31cclxuICAgICAgbW9kZT1cImVkaXRcIlxyXG4gICAgICB1c2VyVGFzaz17dXNlclRhc2t9XHJcbiAgICAgIHN1YlRhc2s9e3N1YlRhc2t9XHJcbiAgICAgIGNsb3NlRGlhbG9nPXsoKT0+dGhpcy5jbG9zZURpYWxvZygpfVxyXG4gICAgLz4pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2VEaWFsb2coKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKHsgZGlhbG9nczogdGhpcy5zdGF0ZS5kaWFsb2dzLnNsaWNlKDAsIHRoaXMuc3RhdGUuZGlhbG9ncy5sZW5ndGggLSAxKSB9KTtcclxuICB9XHJcblxyXG5cclxuXHJcbiAgYXN5bmMgYWRkQ3VzdG9tR29hbChsZWFybmluZ0dvYWw6IHN0cmluZykge1xyXG4gICAgbGV0IGxhdGVzdFRpbWVTdGFtcCA9IE1hdGgubWF4LmFwcGx5KFxyXG4gICAgICBNYXRoLm1heCxcclxuICAgICAgW3RoaXMuc3RhdGUud2Vla0RhdGVdLmNvbmNhdCh0aGlzLnN0YXRlLnVzZXJUYXNrcy5tYXAodCA9PiB0LmRhdGVUaW1lKSkpO1xyXG5cclxuICAgIGF3YWl0IHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8uaW5zZXJ0KFt7XHJcbiAgICAgIGlkOiBjcmVhdGVVVUlEKCksXHJcbiAgICAgIGxlYXJuaW5nR29hbCxcclxuICAgICAgZGF0ZVRpbWU6IGxhdGVzdFRpbWVTdGFtcCArIDIwMDBcclxuICAgIH1dKTtcclxuXHJcbiAgICBhd2FpdCB0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvLnNldFdlZWtQbGFubmVyQm94T3BlbihcIlwiLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHJlbW92ZUxlYXJuaW5nR29hbChsZWFybmluZ0dvYWw6IFZpcnR1YWxMZWFybmluZ0dvYWwpIHtcclxuICAgIGlmIChsZWFybmluZ0dvYWwudGFza3MubGVuZ3RoID4gMCkge1xyXG4gICAgICBpZiAoIWNvbmZpcm0odGhpcy5jb250ZXh0LmludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J3dlZWtwbGFubmVyLmNvbmZpcm1SZW1vdmVMZWFybmluZ09iamVjdGl2ZXMnLCBkZWZhdWx0TWVzc2FnZTogJ1RhIGJvcnQgbMOkcmFuZGVtw6VsIHNhbXQge2xlYXJuaW5nR29hbHNOdW1iZXJ9IHVwcGdpZnRlcj8nfSwge2xlYXJuaW5nR29hbHNOdW1iZXI6IGxlYXJuaW5nR29hbC50YXNrcy5sZW5ndGh9KSkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGF3YWl0IHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8uZGVsZXRlKGxlYXJuaW5nR29hbC5hbGxUYXNrcy5tYXAodCA9PiB0LmlkKSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBhZGRDdXN0b21UYXNrKGNvdXJzZU5hbWU6IHN0cmluZywgbGVhcm5pbmdHb2FsOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZywgdXJsOiBzdHJpbmcpIHtcclxuICAgIGxldCBsYXRlc3RUaW1lU3RhbXAgPSBNYXRoLm1heC5hcHBseShcclxuICAgICAgTWF0aC5tYXgsXHJcbiAgICAgIFt0aGlzLnN0YXRlLndlZWtEYXRlXS5jb25jYXQodGhpcy5zdGF0ZS51c2VyVGFza3MubWFwKHQgPT4gdC5kYXRlVGltZSkpKTtcclxuXHJcbiAgICAvKmNvbnN0IGVtcHR5TGVhcm5pbmdHb2FsUGxhY2Vob2xkZXIgPSB0aGlzLnN0YXRlLnVzZXJUYXNrcy5maW5kKHV0ID0+XHJcbiAgICAgIHV0Lm5hbWUgPT0gbnVsbCAmJlxyXG4gICAgICAhdXQuY291cnNlTmFtZSAmJlxyXG4gICAgICB1dC5sZWFybmluZ0dvYWwgPT09IGxlYXJuaW5nR29hbCk7XHJcblxyXG4gICAgaWYgKGVtcHR5TGVhcm5pbmdHb2FsUGxhY2Vob2xkZXIpIHtcclxuICAgICAgLy8gSGlqYWNrIGxlYXJuaW5nLWdvYWwgcGxhY2Vob2xkZXIgYW5kIG1ha2UgaXQgdGhlIHJlYWwgdGFzay5cclxuICAgICAgLy8gVGhpcyB3aWxsIG1ha2UgdGhlIGxlYXJuaW5nIGdvYWwgZGlzYXBwZWFyIG9uY2UgdGhpcyB0YXNrXHJcbiAgICAgIC8vIGlzIGRlbGV0ZWQuXHJcbiAgICAgIGF3YWl0IHVzZXJUYXNrc1JlcG8udXBkYXRlKFtlbXB0eUxlYXJuaW5nR29hbFBsYWNlaG9sZGVyXSwgdXQgPT4ge1xyXG4gICAgICAgIE9iamVjdC5hc3NpZ24odXQsIHsgbmFtZSwgZGVzY3JpcHRpb24sIHVybCB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2UgeyovXHJcbiAgICAgIC8vIEFkZCBhbm90aGVyIHRhc2sgdG8gc2FtZSBsZWFybmluZy1nb2FsXHJcbiAgICAgIGF3YWl0IHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8uaW5zZXJ0KFt7XHJcbiAgICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcclxuICAgICAgICBkYXRlVGltZTogbGF0ZXN0VGltZVN0YW1wICsgMjAwMCxcclxuICAgICAgICBjb3Vyc2VOYW1lLFxyXG4gICAgICAgIGxlYXJuaW5nR29hbCxcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uLFxyXG4gICAgICAgIHVybFxyXG4gICAgICB9XSk7XHJcbiAgICAvL31cclxuICB9XHJcblxyXG4gIHNldElzT3Blbihjb3Vyc2VOYW1lOiBzdHJpbmcsIGlzT3BlbjogYm9vbGVhbikge1xyXG4gICAgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby5zZXRXZWVrUGxhbm5lckJveE9wZW4oY291cnNlTmFtZSwgaXNPcGVuKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNldFRhc2tEb25lKHRhc2s6IFVzZXJUYXNrLCBkb25lOiBib29sZWFuKSB7XHJcbiAgICBhd2FpdCB0aGlzLnByb3BzLmVudi51c2VyVGFza3NSZXBvLnNldFRhc2tEb25lU3RhdGUodGFzaywgZG9uZSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBzZXRTdWJUYXNrRG9uZSh0YXNrOiBVc2VyVGFzaywgc3ViVGFzazogVXNlclN1YlRhc2ssIGRvbmU6IGJvb2xlYW4pIHtcclxuICAgIGF3YWl0IHRoaXMucHJvcHMuZW52LnVzZXJUYXNrc1JlcG8uc2V0U3ViVGFza0RvbmVTdGF0ZSh0YXNrLCBzdWJUYXNrLmlkLCBkb25lKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGNvcHlGcm9tUHJldmlvdXNXZWVrKCkge1xyXG4gICAgYXdhaXQgdGhpcy5zZXRTdGF0ZSh7aXNDb3B5aW5nVGFza3M6IHRydWV9KTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgdXNlclRhc2tzLCBvcGVuQ291cnNlcywgd2Vla0RhdGUgfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgICBjb25zdCBwcmV2V2VlayA9IG1vbWVudCh3ZWVrRGF0ZSkuYWRkKC0xLCAnd2VlaycpO1xyXG4gICAgICBjb25zdCBwcmV2V2Vla05vID0gZ2V0QWRqdXN0ZWRXZWVrIChwcmV2V2Vlayk7XHJcbiAgICAgIGNvbnN0IHByZXZLRURXZWVrID0gS0VEV2VlayhwcmV2V2Vlay55ZWFyKCksIHByZXZXZWVrTm8pO1xyXG4gICAgICAvLyBSZWFkIGxhc3Qgd2VlaydzIGdvYWxzIGFuZCB0YXNrc1xyXG4gICAgICBsZXQgcHJldlRhc2tzID0gYXdhaXQgdGhpcy5wcm9wcy5lbnYua2VkQmFja2VuZENsaWVudC5saXN0PFVzZXJUYXNrPihcInVzZXJ0YXNrc1wiLCB7XHJcbiAgICAgICAgZnJvbTogcHJldktFRFdlZWsubm90QmVmb3JlLFxyXG4gICAgICAgIHRvOiBwcmV2S0VEV2Vlay5ub3RBZnRlcixcclxuICAgICAgICByb2xlOiBcIlVTRVJcIixcclxuICAgICAgICBpbmNsdWRlOiBbXCJ0YXNrXCIsIFwiY291cnNlXCIsIFwiYWNsXCJdLFxyXG4gICAgICAgIGZsYWdzOiBbXCJpbmNsdWRlSWRzT25seVwiXVxyXG4gICAgICB9KTtcclxuICAgICAgcHJldlRhc2tzID0gcHJldlRhc2tzXHJcbiAgICAgICAgLmZpbHRlcihwcmV2VGFzayA9PiAhcHJldlRhc2suZG9uZSkgIC8vIERvbid0IGNvcHkgZG9uZSB0YXNrc1xyXG4gICAgICAgIC5maWx0ZXIocHJldlRhc2sgPT4gISFwcmV2VGFzay5uYW1lKSAvLyBEb24ndCBjb3B5IGVtcHR5IGxlYXJuaW5nIGdvYWxzXHJcbiAgICAgICAgLmZpbHRlcihwcmV2VGFzayA9PiAhdXNlclRhc2tzLnNvbWUodGFza09mQ3VycmVudFdlZWsgPT5cclxuICAgICAgICAgIHRhc2tPZkN1cnJlbnRXZWVrLm5hbWUgPT09IHByZXZUYXNrLm5hbWUgJiZcclxuICAgICAgICAgIHRhc2tPZkN1cnJlbnRXZWVrLmxlYXJuaW5nR29hbCA9PT0gcHJldlRhc2subGVhcm5pbmdHb2FsICYmXHJcbiAgICAgICAgICB0YXNrT2ZDdXJyZW50V2Vlay5jb3Vyc2VOYW1lID09PSBwcmV2VGFzay5jb3Vyc2VOYW1lKSk7IC8vIElnbm9yZSBpZGVudGljYWwgdGFza3MgKGFscmVhZHkgY29waWVkKVxyXG4gICAgICAgICAgXHJcbiAgICAgIHZhciB0ZXN0ID0gW3dlZWtEYXRlXS5jb25jYXQodXNlclRhc2tzLm1hcCh0ID0+IHQuZGF0ZVRpbWUpKTtcclxuICAgICAgLy8gTm93IGNyZWF0ZSBjb3BpZXMgYnV0IHBsYWNlIHRoZW0gaW4gdGhlIGN1cnJlbnQgd2Vlay5cclxuICAgICAgbGV0IGxhdGVzdFRpbWVTdGFtcCA9IE1hdGgubWF4LmFwcGx5KE1hdGgubWF4LCBbd2Vla0RhdGVdLmNvbmNhdCh1c2VyVGFza3MubWFwKHQgPT4gdC5kYXRlVGltZSkpKTtcclxuXHJcbiAgICAgIGNvbnN0IGNvcGllcyA9IHByZXZUYXNrcy5zb3J0KGNvbXBhcmVQcm9wKFwiZGF0ZVRpbWVcIikpLm1hcCh0YXNrID0+IHtcclxuICAgICAgICBjb25zdCBjb3B5OiBVc2VyVGFzayA9IHsgLi4udGFzaywgZGF0ZVRpbWU6IGxhdGVzdFRpbWVTdGFtcCArPSAxMDAwIH07XHJcbiAgICAgICAgY29weS5pZCA9IGNyZWF0ZVVVSUQoKTtcclxuICAgICAgICBpZiAoY29weS5zdWJUYXNrcykge1xyXG4gICAgICAgICAgY29weS5zdWJUYXNrcyA9IGNvcHkuc3ViVGFza3MuZmlsdGVyKHN0ID0+ICFzdC5kb25lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVsZXRlIGNvcHkuJGV0YWc7XHJcbiAgICAgICAgcmV0dXJuIGNvcHk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gU3RvcmUgaXRcclxuICAgICAgYXdhaXQgdGhpcy5wcm9wcy5lbnYudXNlclRhc2tzUmVwby5pbnNlcnQoY29waWVzKTtcclxuICAgIH0gZmluYWxseSB7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2lzQ29weWluZ1Rhc2tzOiBmYWxzZX0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0SGVhZGVyVGl0bGUoKXtcclxuICAgIHJldHVybiA8aDQ+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ3ZWVrcGxhbm5lci5sb2dCb29rXCIgIGRlZmF1bHRNZXNzYWdlPVwiTG9nZ2Jva1wiLz48L2g0PjtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHdlZWtOdW1iZXIgPSBtb21lbnQodGhpcy5zdGF0ZS53ZWVrRGF0ZSkud2VlaygpO1xyXG4gICAgY29uc3Qgc2hvd1Byb2dyZXNzQ2hhcnRzID0gZmVhdHVyZXMud2Vla3BsYW5uZXJDaGFydHM7XHJcbiAgICAvL2NvbnNvbGUubG9nKFwiV2Vla3lkYXRlOiBcIiAgKyBuZXcgRGF0ZSh0aGlzLnN0YXRlLndlZWtEYXRlKSArIFwiIHdoaWNoIGlzIHdlZWsgbm8gXCIgKyB3ZWVrTnVtYmVyKTtcclxuICAgIGNvbnN0IGN1cnJlbnRXZWVrID0gbW9tZW50KCkud2VlaygpO1xyXG4gICAgY29uc3QgdGFza1NldHMgPSByZWZpbmUodGhpcy5zdGF0ZS51c2VyVGFza3MpO1xyXG4gICAgY29uc3QgeyBkaWFsb2dzLCB3ZWVrVGV4dHNVVCwgc3RyYXRlZ3ksIGFzc2Vzc21lbnQsIGlzTG9hZGluZywgaXNDb3B5aW5nVGFza3MgfSA9IHRoaXMuc3RhdGU7XHJcbiAgICBjb25zdCBpc1NhdmluZyA9IHdlZWtUZXh0c1VUICYmICh3ZWVrVGV4dHNVVC4kbWV0YSA9PT0gJ2FkZGluZycgfHwgd2Vla1RleHRzVVQuJG1ldGEgPT09ICd1cGRhdGluZycpO1xyXG4gICAgY29uc3QgaXNTdHJhdGVneUVkaXRlZCA9ICEhd2Vla1RleHRzVVQgJiYgKHN0cmF0ZWd5ICE9PSB3ZWVrVGV4dHNVVC53ZWVrVGV4dHMuc3RyYXRlZ3kpO1xyXG4gICAgY29uc3QgaXNBc3Nlc3NtZW50RWRpdGVkID0gISF3ZWVrVGV4dHNVVCAmJiAoYXNzZXNzbWVudCAhPT0gd2Vla1RleHRzVVQud2Vla1RleHRzLmFzc2Vzc21lbnQpO1xyXG4gICAgY29uc3QgZW5hYmxlU2F2ZUJ1dHRvbiA9ICFpc1NhdmluZyAmJiAoaXNTdHJhdGVneUVkaXRlZCB8fCBpc0Fzc2Vzc21lbnRFZGl0ZWQpO1xyXG5cclxuICAgIHZhciBjaGFydFRhc2tzID0gZ2V0V2Vla3BsYW5uZXJQcm9ncmVzc0RhdGEodGFza1NldHMpO1xyXG5cclxuICAgIHZhciBwZXJjZW50YWdlID0gdGFza1NldHMubGVuZ3RoID4gMCA/IGNoYXJ0VGFza3MuY29tcGxldGVkVGFza3MgLyBjaGFydFRhc2tzLnRvdGFsTnVtYmVyT2ZUYXNrcyAqIDEwMCA6IDA7XHJcbiAgICByZXR1cm4gPGRpdj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9e2BrZWRfYm94ZWQgd2Vla1BsYW5uZXIke3dlZWtOdW1iZXIgPT09IGN1cnJlbnRXZWVrID8gXCIgY3VycmVudFdlZWtcIiA6IFwiXCJ9YH1cclxuICAgICAgICBvbktleURvd249e2V2ID0+IHtcclxuICAgICAgICAgIGlmIChldi53aGljaCA9PT0gODMgJiYgZXYuY3RybEtleSkge1xyXG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAoIWlzU2F2aW5nICYmIHRoaXMuaXNXZWVrVGV4dHNFZGl0ZWQoKSkge1xyXG4gICAgICAgICAgICAgIHRoaXMud2Vla1RleHRzU2F2aW5nSm9iLnRyaWdnZXJDaGFuZ2UoMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9fT5cclxuICAgICAgICB7c2hvd1Byb2dyZXNzQ2hhcnRzICYmIHRoaXMuZ2V0SGVhZGVyVGl0bGUoKX1cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndpZGdldHNcIj5cclxuICAgICAgICAgIHtzaG93UHJvZ3Jlc3NDaGFydHMgPyA8ZGl2IGNsYXNzTmFtZT1cInByb2dyZXNzQmFyXCI+PFByb2dyZXNzIHBlcmNlbnRhZ2UgPSB7cGVyY2VudGFnZX0vPjwvZGl2PiA6IHRoaXMuZ2V0SGVhZGVyVGl0bGUoKX1cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgd2Vla1NlbGVjdGB9PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhvcml6b250YWxJdGVtXCI+XHJcbiAgICAgICAgICAgICAgPHA+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ3ZWVrcGxhbm5lci53ZWVrTnVtYmVyXCIgdmFsdWVzPXt7d2Vla051bWJlcjogd2Vla051bWJlcn19IGRlZmF1bHRNZXNzYWdlPVwiVmVja2Ege3dlZWtOdW1iZXJ9XCIvPjwvcD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaG9yaXpvbnRhbEl0ZW1cIj5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ0bi1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG5cIiBvbkNsaWNrPXsoKSA9PiB0aGlzLnByZXZXZWVrKCl9PlxyXG4gICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJmYSBmYS1hbmdsZS1sZWZ0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ0blwiIG9uQ2xpY2s9eygpID0+IHRoaXMubmV4dFdlZWsoKX0+XHJcbiAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhIGZhLWFuZ2xlLXJpZ2h0XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIHt0YXNrU2V0cy5sZW5ndGggPiAwICYmIDxociAvPn1cclxuXHJcbiAgICAgICAge3Rhc2tTZXRzLm1hcChwcm9wcyA9PlxyXG4gICAgICAgICAgPFVzZXJUYXNrc0JveFxyXG4gICAgICAgICAgICBrZXk9e3Byb3BzLmNvdXJzZU5hbWV9XHJcbiAgICAgICAgICAgIHsuLi5wcm9wc31cclxuICAgICAgICAgICAgY291cnNlTmFtZT17cHJvcHMuY291cnNlTmFtZX1cclxuICAgICAgICAgICAgbGVhcm5pbmdHb2Fscz17cHJvcHMubGVhcm5pbmdHb2Fsc31cclxuICAgICAgICAgICAgdmlld0NvdXJzZVVybD17dGhpcy5wcm9wcy52aWV3Q291cnNlVXJsfVxyXG4gICAgICAgICAgICBvcGVuQ291cnNlcz17dGhpcy5zdGF0ZS5vcGVuQ291cnNlc31cclxuICAgICAgICAgICAgYWRkT3duVGFzaz17KGNvdXJzZU5hbWU6IHN0cmluZywgbGVhcm5pbmdHb2FsTmFtZTogc3RyaW5nKSA9PiB0aGlzLm9wZW5BZGRPd25UYXNrRGlhbG9nKGNvdXJzZU5hbWUsIGxlYXJuaW5nR29hbE5hbWUpfVxyXG4gICAgICAgICAgICBzZXRJc09wZW49e3RoaXMuc2V0SXNPcGVuLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgIHNldFRhc2tEb25lPXt0aGlzLnNldFRhc2tEb25lLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgIHNldFN1YlRhc2tEb25lPXt0aGlzLnNldFN1YlRhc2tEb25lLmJpbmQodGhpcyl9XHJcbiAgICAgICAgICAgIGVkaXRUYXNrPXt0YXNrID0+IHRoaXMuZWRpdFRhc2sodGFzayl9XHJcbiAgICAgICAgICAgIGVkaXRTdWJUYXNrPXsodGFzaywgc3ViVGFzaykgPT4gdGhpcy5lZGl0U3ViVGFzayh0YXNrLCBzdWJUYXNrKX1cclxuICAgICAgICAgICAgcmVtb3ZlTGVhcm5pbmdHb2FsPXtsZyA9PiB0aGlzLnJlbW92ZUxlYXJuaW5nR29hbChsZyl9IFxyXG4gICAgICAgICAgICBkaXNwbGF5UHJvZ3Jlc3MgPSB7c2hvd1Byb2dyZXNzQ2hhcnRzfVxyXG4gICAgICAgICAgICBwcm9ncmVzc0RhdGEgPSB7Y2hhcnRUYXNrcy5zdWJqZWN0RGF0YVtwcm9wcy5jb3Vyc2VOYW1lXX0gLz4pfVxyXG5cclxuICAgICAgICA8aHIgLz5cclxuXHJcbiAgICAgICAge2lzTG9hZGluZyA/IDxTcGlubmVyIC8+IDogPGRpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnRuXCIgb25DbGljaz17ZXYgPT4gdGhpcy5vcGVuQWRkR29hbERpYWxvZygpfT5cclxuICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtbGlzdC1hbHRcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwid2Vla3BsYW5uZXIubGVhcm5pbmdHb2FsXCIgZGVmYXVsdE1lc3NhZ2U9XCJFZ2V0IGzDpHJhbmRlbcOlbFwiLz5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidG5cIiBzdHlsZT17aXNDb3B5aW5nVGFza3MgPyB7b3BhY2l0eTogMC41fSA6IHVuZGVmaW5lZH0gb25DbGljaz17ZXYgPT4gKCFpc0NvcHlpbmdUYXNrcykgJiYgdGhpcy5jb3B5RnJvbVByZXZpb3VzV2VlaygpfT5cclxuICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtY2xvbmVcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwid2Vla3BsYW5uZXIuY29weVByZXZpb3VzV2Vla1Rha3NcIiBkZWZhdWx0TWVzc2FnZT1cIktvcGllcmEgZWoga2xhcmEgZnLDpW4gZsO2cmVnw6VlbmRlIHZlY2thXCIvPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8T3BlbkNsb3NlQm94XHJcbiAgICAgICAgICAgIHRpdGxlPXs8aDU+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ3ZWVrcGxhbm5lci5zdHJhdGVneUFuZEV2YWx1YXRpb25cIiBkZWZhdWx0TWVzc2FnZT1cIlN0cmF0ZWdpICYgVXR2w6RyZGVyaW5nXCIvPjwvaDU+fVxyXG4gICAgICAgICAgICBoZWFkZXJPcGVuPXt0aGlzLnN0YXRlLm9wZW5Db3Vyc2VzW1wiU3RyYXRVdHZcIl19XHJcbiAgICAgICAgICAgIG9uT3BlbkNsb3NlPXtiZWNhbWVPcGVuID0+IHRoaXMuc2V0SXNPcGVuKFwiU3RyYXRVdHZcIiwgYmVjYW1lT3Blbil9XHJcbiAgICAgICAgICA+XHJcbiAgICAgICAgICAgIDxoMz48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cIndlZWtwbGFubmVyLnN0cmF0ZWd5XCIgZGVmYXVsdE1lc3NhZ2U9XCJTdHJhdGVnaVwiLz48L2gzPlxyXG4gICAgICAgICAgICA8cD48Rm9ybWF0dGVkTWVzc2FnZSBpZD1cIndlZWtwbGFubmVyLnN0cmF0ZWd5RGVzY3JpcHRpb25cIiBkZWZhdWx0TWVzc2FnZT1cIkh1ciBqYWcgc2thIGfDtnJhIGbDtnIgYXR0IGzDpHJhIG1pZy5cIi8+PC9wPlxyXG4gICAgICAgICAgICA8aHIvPlxyXG4gICAgICAgICAgICA8dGV4dGFyZWFcclxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3ZWVrcGxhbm5lci10ZXh0YXJlYVwiXHJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e3RoaXMucHJvcHMuZW52LnR1dG9yZWR9XHJcbiAgICAgICAgICAgICAgdmFsdWU9e3N0cmF0ZWd5ICYmIHN0cmF0ZWd5LnN1YnN0cigwLCBNQVhfU1RSQVRFR1lfTEVOR1RIKX1cclxuICAgICAgICAgICAgICBvbkNoYW5nZT17ZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7c3RyYXRlZ3k6IChldi50YXJnZXQudmFsdWUgfHwgJycpLnN1YnN0cigwLCBNQVhfU1RSQVRFR1lfTEVOR1RIKX0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy53ZWVrVGV4dHNTYXZpbmdKb2IudHJpZ2dlckNoYW5nZSg1MDApO1xyXG4gICAgICAgICAgICAgIH19IC8+XHJcblxyXG4gICAgICAgICAgICA8aDM+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ3ZWVrcGxhbm5lci5ldmFsdWF0aW9uXCIgZGVmYXVsdE1lc3NhZ2U9XCJVdHbDpHJkZXJpbmdcIi8+PC9oMz5cclxuICAgICAgICAgICAgPHA+PEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJ3ZWVrcGxhbm5lci5ldmFsdWF0aW9uRGVzY3JpcHRpb25cIiBkZWZhdWx0TWVzc2FnZT1cIlJlZmxla3Rpb24ga3JpbmcgZGluIGFyYmV0c2luc2F0cyBvY2ggZGluYSB2YWxkYSBzdHJhdGVnaWVyIHVuZGVyIHZlY2thbi5VdHbDpHJkZXJhIGkgZsO2cmjDpWxsYW5kZSB0aWxsIGRpbmEgbcOlbC5cIi8+PC9wPlxyXG4gICAgICAgICAgICA8aHIvPlxyXG4gICAgICAgICAgICA8dGV4dGFyZWFcclxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3ZWVrcGxhbm5lci10ZXh0YXJlYVwiXHJcbiAgICAgICAgICAgICAgdmFsdWU9e2Fzc2Vzc21lbnQgJiYgYXNzZXNzbWVudC5zdWJzdHIoMCwgTUFYX0FTU0VTU01FTlRfTEVOR1RIKX1cclxuICAgICAgICAgICAgICBkaXNhYmxlZD17dGhpcy5wcm9wcy5lbnYudHV0b3JlZH1cclxuICAgICAgICAgICAgICBvbkNoYW5nZT17ZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7YXNzZXNzbWVudDogKGV2LnRhcmdldC52YWx1ZSB8fCAnJykuc3Vic3RyKDAsIE1BWF9BU1NFU1NNRU5UX0xFTkdUSCl9KVxyXG4gICAgICAgICAgICAgICAgdGhpcy53ZWVrVGV4dHNTYXZpbmdKb2IudHJpZ2dlckNoYW5nZSg1MDApO1xyXG4gICAgICAgICAgICAgIH0gfS8+XHJcbiAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidG5cIlxyXG4gICAgICAgICAgICAgIHRhYkluZGV4PXswfVxyXG4gICAgICAgICAgICAgIHN0eWxlPXtlbmFibGVTYXZlQnV0dG9uID8ge30gOiB7b3BhY2l0eTogMC41fX1cclxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKT0+IWlzU2F2aW5nICYmIHRoaXMud2Vla1RleHRzU2F2aW5nSm9iLnRyaWdnZXJDaGFuZ2UoMCl9PlxyXG4gICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmEgZmEtZmxvcHB5LW9cIiBhcmlhLWhpZGRlbj1cInRydWVcIiAvPlxyXG4gICAgICAgICAgICAgICAgICB7ZW5hYmxlU2F2ZUJ1dHRvbiA/IDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwiY29tbW9uLnNhdmVcIiBkZWZhdWx0TWVzc2FnZT1cIiBTcGFyYVwiLz4gOiA8Rm9ybWF0dGVkTWVzc2FnZSBpZD1cImNvbW1vbi5zYXZlZFwiIGRlZmF1bHRNZXNzYWdlPVwiIFNwYXJhZFwiLz59XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvT3BlbkNsb3NlQm94PlxyXG5cclxuICAgICAgICA8L2Rpdj59XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8RGlhbG9nc1xyXG4gICAgICAgIGRpYWxvZ3M9e2RpYWxvZ3N9XHJcbiAgICAgICAgcG9wRGlhbG9nPXsoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoXHJcbiAgICAgICAgICAgICAgKHtkaWFsb2dzfSkgPT4gKHsgZGlhbG9nczogZGlhbG9ncy5zbGljZSgwLCBkaWFsb2dzLmxlbmd0aCAtIDEpIH0pKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IC8+XHJcbiAgICA8L2Rpdj5cclxuICB9XHJcbn0iLCJpbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcblxyXG5leHBvcnQgdHlwZSBUZXJtID0gJ0FUJyB8ICdTVCc7IC8vIHNob3VsZCBiZSBjaGFuZ2VkIGludG8gRmlyc3QgVGVybSAvIFNlY29uZCBUZXJtXHJcbmV4cG9ydCB0eXBlIEFjYWRlbWljWWVhciA9IHN0cmluZzsgLy8gXCIyMDE2LzIwMTdcIiwgXCIyMDE3LzIwMThcIiwgLi4uXHJcbmV4cG9ydCB0eXBlIFNjaG9vbEdyYWRlID0gbnVtYmVyOyAvLyAwLTkgKGdydW5kc2tvbGEpLCAxMC0xMyAoZ3ltbmFzaXVtKVxyXG5leHBvcnQgdHlwZSBHcmFkZSA9ICdBJyB8ICdCJyB8ICdDJyB8ICdEJyB8ICdFJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVXNlciB7XHJcbiAgICB1c2VybmFtZT86IHN0cmluZztcclxuICAgIG1haWw6IHN0cmluZztcclxuICAgIGRpc3BsYXlOYW1lOiBzdHJpbmc7XHJcbiAgICByb2xlczogc3RyaW5nW107XHJcbiAgICBzY2hvb2xHcmFkZT86IG51bWJlcjtcclxuICAgIHNjaG9vbD86IHN0cmluZztcclxuICAgIHNjaG9vbFR5cGU/OiBzdHJpbmc7XHJcbiAgICB0dXRvckZvcj86IHN0cmluZztcclxuICAgIGdyb3Vwcz86IHN0cmluZ1tdO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEFjYWRlbWljWWVhclN0cnVjdHVyZVxyXG57XHJcbiBhY2FkZW1pY1llYXIgOiBBY2FkZW1pY1llYXI7XHJcbiBzdGFydERhdGU6IG1vbWVudC5Nb21lbnQ7XHJcbiBlbmREYXRlOiBtb21lbnQuTW9tZW50O1xyXG4gYWNhZGVtaWNTdGFydFdlZWs6IG51bWJlcjtcclxuIGFjYWRlbWljRW5kV2VlazogbnVtYmVyO1xyXG4gaG9saWRheXM6IHtzdGFydERhdGU6IHN0cmluZywgZW5kRGF0ZTogc3RyaW5nfVtdO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIExlYXJuaW5nTW9kdWxlVGFza3Mge1xyXG4gICAgbW9kdWxlTmFtZTogc3RyaW5nO1xyXG4gICAgdXJsPzogc3RyaW5nO1xyXG4gICAgc3ViamVjdDogU2Nob29sU3ViamVjdDtcclxuICAgIGNvbW1vblRhc2tzPzogTGVhcm5pbmdUYXNrW107XHJcbiAgICBsZWFybmluZ0dvYWxzOiBMZWFybmluZ0dvYWxbXTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBMZWFybmluZ0dvYWwge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgdGFza3M/OiBMZWFybmluZ1Rhc2tbXTtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDdXN0b21Hb2FsIHtcclxuICBuYW1lOiBzdHJpbmcsXHJcbiAgdXJsOiBzdHJpbmcsXHJcbiAgY291cnNlOiBzdHJpbmcsXHJcbiAgZGVzY3JpcHRpb246IHN0cmluZ1xyXG59XHJcblxyXG5cclxuLypleHBvcnQgaW50ZXJmYWNlIExlYXJuaW5nR29hbCB7XHJcbiAgICBpZD86IHN0cmluZztcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIGNvdXJzZUlkPzogc3RyaW5nO1xyXG4gICAgc3ViamVjdElkPzogc3RyaW5nO1xyXG59Ki9cclxuXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIExlYXJuaW5nVGFzayB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICB1cmw/OiBzdHJpbmc7XHJcbiAgICBkZXNjcmlwdGlvbj86IHN0cmluZztcclxuICAgIGRvbmU/OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIExlYXJuaW5nQ291cnNlIHtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHVybD86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTY2hvb2xTdWJqZWN0IHtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIGNvdXJzZTogTGVhcm5pbmdDb3Vyc2U7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDb3Vyc2Uge1xyXG4gICAgLy9TY2hlbWE6IFwiW3llYXIrdGVybStzY2hvb2xZZWFyK25hbWVdLHNvcnRvcmRlclwiO1xyXG4gICAgaWQ/OiBzdHJpbmc7XHJcbiAgICAvL2FZZWFyOiBzdHJpbmc7IC8vIEFjYWRlbWljIFllYXIgLyBMw6Rzw6VyIC8gXCIyMDE2LzIwMTdcIiwgXCIyMDE3LzIwMThcIiwgLi4uXHJcbiAgICAvL3NjaG9vbEdyYWRlOiBudW1iZXI7IC8vIMOFcnNrdXJzICgwLTkgZ3J1bmRza29sYSwgMTAtMTMgZ3ltbmFzaXVtKS4gMTAwID0gZWogYnVuZGV0IHRpbGwgw6Vyc2t1cnMuXHJcbiAgICAvL3Rlcm0/OiBUZXJtOyAvLyBBVCAoQXV0dW1uIFRlcm0pIC8gU1QgKFNwcmluZyBUZXJtKVxyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgcG9pbnRzPzogbnVtYmVyO1xyXG4gICAgbW9kdWxlcz86IENvdXJzZU1vZHVsZVtdO1xyXG4gICAgbGVhcm5pbmdHb2Fscz86IExlYXJuaW5nR29hbFtdO1xyXG4gICAgdXJsPzogc3RyaW5nO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDb3Vyc2VNb2R1bGUge1xyXG4gICAgaWQ/OiBzdHJpbmc7XHJcbiAgICBjb3Vyc2VJZDogc3RyaW5nO1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgcmVhZG9ubHkgdXJsOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGFyZ2V0R3JhZGUge1xyXG4gICAgaWQ/OiBzdHJpbmc7XHJcbiAgICB1c2VyOiBzdHJpbmc7XHJcbiAgICBjb3Vyc2VJZD86IHN0cmluZztcclxuICAgIHN1YmplY3RJZD86IHN0cmluZztcclxuICAgIGFZZWFyPzogQWNhZGVtaWNZZWFyOyAvLyBMw6Rzw6VyLCB0ZXggXCIyMDE2LzIwMTdcIi4gbnVsbCBtZWFucyBmaW5hbCBnb2FsLlxyXG4gICAgdGVybT86IFRlcm07IC8vIG51bGwgbWVhbnMgZmluYWwgZ29hbC5cclxuICAgIGdyYWRlOiBHcmFkZTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBmdXR1cmVBYmlsaXRpZXMgPSBbXHJcbiAgICBcIkzDpHJhIGF0dCBsw6RyYVwiLFxyXG4gICAgXCJTYW1hcmJldGFcIixcclxuICAgIFwiQWdlcmEgZ2xvYmFsdFwiLFxyXG4gICAgXCJWaXNhIGhhbmRsaW5nc2tyYWZ0XCIsXHJcbiAgICBcIlZhcmEgaW5ub3ZhdGl2XCIsXHJcbiAgICBcIkxldmEgZGlnaXRhbHRcIl07XHJcbiIsImltcG9ydCB7IHBhcnNlUXVlcnlTdHJpbmcgfSBmcm9tICcuLi91dGlscy9xdWVyeS1zdHJpbmcnO1xyXG5pbXBvcnQgRmVhdHVyZURlc2NyaXB0aW9ucyBmcm9tICcuL2ZlYXR1cmUtZmxhZ3MuanNvbic7XHJcbmltcG9ydCB7IGNmZyB9IGZyb20gJy4uL2dsb2JhbHMvS0VELmNmZyc7XHJcblxyXG50eXBlIEZlYXR1cmVGbGFncyA9IHtyZWFkb25seSBbUCBpbiBrZXlvZiB0eXBlb2YgRmVhdHVyZURlc2NyaXB0aW9uc106IGJvb2xlYW59O1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBGZWF0dXJlcyBleHRlbmRzIEZlYXR1cmVGbGFncyB7fVxyXG5cclxuZXhwb3J0IGNsYXNzIEZlYXR1cmVzIHtcclxuICBwcml2YXRlIF9mZWF0dXJlczogRmVhdHVyZUZsYWdzO1xyXG4gIHByaXZhdGUgX2luaXRpYWxpemVkID0gZmFsc2U7XHJcblxyXG4gIGluaXQoKSB7XHJcbiAgICBpZiAodGhpcy5faW5pdGlhbGl6ZWQpIHJldHVybjtcclxuICAgIGxldCB0dXJuZWRPbkZlYXR1cmVzID0gKGNmZy5LRURfRkVBVFVSRVMgfHwgXCJcIikuc3BsaXQoJywnKS5tYXAobmFtZSA9PiBuYW1lLnRyaW0oKS50b0xvd2VyQ2FzZSgpKTtcclxuICAgIGNvbnN0IHF1ZXJ5ID0gcGFyc2VRdWVyeVN0cmluZyhsb2NhdGlvbi5zZWFyY2gsIHt0b0xvd2VyOiB0cnVlfSk7XHJcblxyXG4gICAgaWYgKHF1ZXJ5LnRlc3R2ZXJzaW9uKSB7XHJcbiAgICAgIHR1cm5lZE9uRmVhdHVyZXMgPSBbXCIqXCJdO1xyXG4gICAgfVxyXG4gICAgaWYgKHF1ZXJ5LmZlYXR1cmVzKSB7XHJcbiAgICAgIHR1cm5lZE9uRmVhdHVyZXMgPSBxdWVyeS5mZWF0dXJlc1xyXG4gICAgICAgIC5zcGxpdCgnLCcpXHJcbiAgICAgICAgLm1hcChmZWF0dXJlID0+IGZlYXR1cmUudHJpbSgpLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdHVybk9uQWxsID0gdHVybmVkT25GZWF0dXJlcy5pbmNsdWRlcygnKicpO1xyXG4gICAgdGhpcy5fZmVhdHVyZXMgPSB7fSBhcyBGZWF0dXJlRmxhZ3M7XHJcbiAgICBmb3IgKGNvbnN0IGZlYXR1cmVOYW1lIG9mIE9iamVjdC5rZXlzKEZlYXR1cmVEZXNjcmlwdGlvbnMpKSB7XHJcbiAgICAgIHRoaXMuX2ZlYXR1cmVzW2ZlYXR1cmVOYW1lXSA9IHR1cm5PbkFsbCB8fFxyXG4gICAgICAgIHR1cm5lZE9uRmVhdHVyZXMuaW5jbHVkZXMoZmVhdHVyZU5hbWUudG9Mb3dlckNhc2UoKSlcclxuICAgIH1cclxuICAgIHRoaXMuX2luaXRpYWxpemVkID0gdHJ1ZTsgICAgXHJcbiAgfVxyXG5cclxuICBjb25zdHJ1Y3RvciAoKSB7XHJcbiAgICBmb3IgKGNvbnN0IGZlYXR1cmVOYW1lIG9mIE9iamVjdC5rZXlzKEZlYXR1cmVEZXNjcmlwdGlvbnMpKSB7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBmZWF0dXJlTmFtZSwge1xyXG4gICAgICAgIGdldCgpIHtcclxuICAgICAgICAgIGlmICghdGhpcy5faW5pdGlhbGl6ZWQpIHRoaXMuaW5pdCgpO1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuX2ZlYXR1cmVzW2ZlYXR1cmVOYW1lXTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldCh2YWx1ZSkge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGZWF0dXJlIGZsYWdzIGNhbm5vdCBiZSBzZXQgaGVyZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBmZWF0dXJlcyA9IG5ldyBGZWF0dXJlcygpO1xyXG4iLCJleHBvcnQgKiBmcm9tICcuL2ZlYXR1cmVzJztcclxuIiwiaW1wb3J0IGNmZyBmcm9tICcuLi9nbG9iYWxzL0tFRC5jZmcnO1xyXG5cclxuZGVjbGFyZSB2YXIgcHJvY2VzczogYW55O1xyXG5cclxuY2ZnLkVOVklST05NRU5UID0gcHJvY2Vzcy5lbnYuRU5WSVJPTk1FTlQgYXMgXCJwcm9kdWN0aW9uXCIgfCBcImRldmVsb3BtZW50XCIgfCBcInRlc3RcIjtcclxuY2ZnLktFRF9BUElfVVJMID0gcHJvY2Vzcy5lbnYuS0VEX0FQSV9VUkw7IC8vIFwiaHR0cHM6Ly9rZWRiYWNrZW5kdGVzdC5henVyZXdlYnNpdGVzLm5ldC9hcGkvXCJcclxuY2ZnLkVEU19BUElfVVJMID0gcHJvY2Vzcy5lbnYuRURTX0FQSV9VUkw7IC8vIFwiaHR0cHM6Ly9lZHNwb3J0YWxvd2luYXBpLmF6dXJld2Vic2l0ZXMubmV0L2FwaS9cIlxyXG5jZmcuS0VEX1RPS0VOX1VSTCA9IHByb2Nlc3MuZW52LktFRF9UT0tFTl9VUkw7IC8vIFwiaHR0cHM6Ly9rZWRhdXRodGVzdC5henVyZXdlYnNpdGVzLm5ldC90b2tlblwiXHJcbmNmZy5LRURfQ0xJRU5UX0lEID0gcHJvY2Vzcy5lbnYuS0VEX0NMSUVOVF9JRDsgLy8gXCJkZXZjbGllbnRcIiwgXCJ0ZXN0Y2xpZW50XCIsIFwiLi4uXCJcclxuY2ZnLktFRF9DTElFTlRfU0VDUkVUID0gcHJvY2Vzcy5lbnYuS0VEX0NMSUVOVF9TRUNSRVQ7XHJcbmNmZy5LRURfUkVBTE0gPSBwcm9jZXNzLmVudi5LRURfUkVBTE07IC8vIFwiU0UxXCJcclxuY2ZnLktFRF9MT0NBTEUgPSBjZmcuS0VEX0xPQ0FMRSB8fCBwcm9jZXNzLmVudi5LRURfTE9DQUxFOyAvLyBcInN2XCIsIFwiZW5cIi4gT25seSBzZXQgZnJvbSBwcm9jZXNzLmVudiBpZiBub3Qgc2V0IGZyb20gU2l0ZVZpc2lvbiBlbGVtZW50IGNvbmZpZy5cclxuY2ZnLktFRF9TQ0hPT0xfTE9DQUxFID0gY2ZnLktFRF9TQ0hPT0xfTE9DQUxFIHx8IHByb2Nlc3MuZW52LktFRF9TQ0hPT0xfTE9DQUxFOyAvLyBcInN2XCIsIFwiZW5fc2luXCIsIFwiZW5fbmluXCIuIE9ubHkgc2V0IGZyb20gcHJvY2Vzcy5lbnYgaWYgbm90IHNldCBmcm9tIFNpdGVWaXNpb24gZWxlbWVudCBjb25maWcuXHJcbmNmZy5LRURfUkVTT1VSQ0VTX1VSTCA9IGNmZy5LRURfUkVTT1VSQ0VTX1VSTCB8fCBwcm9jZXNzLmVudi5LRURfUkVTT1VSQ0VTX1VSTDtcclxuIiwiLyogVGhlc2Ugc2NyaXB0cyBhc3N1bWUgc29tZSBvZiB0aGUgZ2xvYmFsIHZhcnMgaGF2ZSBhbHJlYWR5IGJlZW4gc2V0OlxyXG4gICogS0VELmNmZ1xyXG4gICogS0VELmVudi5jdXJyZW50VXNlclxyXG5cclxuICBUaGUgcmVzdCB3aWxsIGJlIHNldCBoZXJlIChjbGllbnQgc2lkZSlcclxuKi9cclxuaW1wb3J0ICcuL2NvbmZpZ3VyZSc7XHJcbmltcG9ydCAnLi9zZXQtYmVhcmVyLXByb3ZpZGVycyc7XHJcbmltcG9ydCAnLi9zZXQta2VkLWJhY2tlbmQtY2xpZW50JztcclxuaW1wb3J0ICcuL3NldC1lZHMtY2xpZW50JztcclxuIiwiaW1wb3J0IHsgcGFyc2VRdWVyeVN0cmluZywgZ2VuZXJhdGVRdWVyeVN0cmluZywgc3BsaXRVcmxBbmRRdWVyeSB9IGZyb20gXCIuLi91dGlscy9xdWVyeS1zdHJpbmdcIjtcclxuaW1wb3J0IHsgS2VkQmFja2VuZENsaWVudFdlYiwgV2ViU2VydmVyQmVhcmVyUHJvdmlkZXIsIGlzb21vcnBoaWMsIHN0b3JhZ2UgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudHdlYic7XHJcbmltcG9ydCB7IEJlYXJlclByb3ZpZGVyLCBLZWRCZWFyZXJQcm92aWRlciB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IGNmZyBmcm9tICcuLi9nbG9iYWxzL0tFRC5jZmcnO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IFVzZXIgfSBmcm9tIFwiLi4vY29udHJhY3RzL2tlZC1tb2RlbHNcIjtcclxuaW1wb3J0IHsgSU1QRVJTT05BVElPTl9RVUVSWV9QQVJBTVMgfSBmcm9tIFwiLi4vYWNjZXNzLWNvbnRyb2wvaW5kZXhcIjtcclxuaW1wb3J0IHsgY2hlcnJ5UGlja1Byb3BzIH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzXCI7XHJcblxyXG5mdW5jdGlvbiBnZXRNZXJnZWRUb2tlblBhdGgodG9rZW5QYXRoOiBzdHJpbmcsIGxvY2F0aW9uU2VhcmNoOiBzdHJpbmcsIHNjb3Blczogc3RyaW5nW10pIHtcclxuICAvLyBNZXJnZSBjb25maWd1cmVkIHF1ZXJ5IHBhcmFtcyBvZiB0b2tlbiBwYXRoIHdpdGggcGFyYW1zIGdpdmVuIHRvIGN1cnJlbnQgcGFnZVxyXG4gIGNvbnN0IGN1cnJlbnRRdWVyeSA9IHBhcnNlUXVlcnlTdHJpbmcobG9jYXRpb25TZWFyY2gpO1xyXG4gIGNvbnN0IGltcGVyc29uYXRpb25Qcm9wcyA9IGNoZXJyeVBpY2tQcm9wcyhjdXJyZW50UXVlcnksIElNUEVSU09OQVRJT05fUVVFUllfUEFSQU1TKTtcclxuICBjb25zdCBbdG9rZW5QYXRoV2l0aG91dFF1ZXJ5LCB0b2tlblF1ZXJ5U3RyaW5nXSA9IHNwbGl0VXJsQW5kUXVlcnkodG9rZW5QYXRoKTtcclxuICBjb25zdCB0b2tlblBhdGhRdWVyeSA9IHBhcnNlUXVlcnlTdHJpbmcodG9rZW5RdWVyeVN0cmluZyk7XHJcbiAgcmV0dXJuIHRva2VuUGF0aFdpdGhvdXRRdWVyeSArIGdlbmVyYXRlUXVlcnlTdHJpbmcoe1xyXG4gICAgLi4udG9rZW5QYXRoUXVlcnksXHJcbiAgICAuLi5pbXBlcnNvbmF0aW9uUHJvcHMsXHJcbiAgICBzY29wZXM6IHNjb3Blcy5qb2luKCcsJylcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VG9rZW5JZChtZXJnZWRUb2tlblBhdGg6IHN0cmluZywgdXNlckVtYWlsOiBzdHJpbmcpIHtcclxuICByZXR1cm4gbWVyZ2VkVG9rZW5QYXRoICsgXCIvXCIgKyB1c2VyRW1haWw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNhdmVVc2VySW5mbyh1c2VyOiBVc2VyLCB0b2tlbklkOiBzdHJpbmcpIHtcclxuICBlbnYuY3VycmVudFVzZXIgPSB1c2VyO1xyXG4gIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXCJ1c2VySW5mb1wiICsgdG9rZW5JZCwgSlNPTi5zdHJpbmdpZnkodXNlcikpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkVXNlckluZm8odG9rZW5JZDogc3RyaW5nKSB7XHJcbiAgY29uc3Qgc3RvcmVkU2Vzc2lvblVzZXIgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFwidXNlckluZm9cIiArIHRva2VuSWQpO1xyXG4gIGlmIChzdG9yZWRTZXNzaW9uVXNlcikge1xyXG4gICAgZW52LmN1cnJlbnRVc2VyID0gSlNPTi5wYXJzZShzdG9yZWRTZXNzaW9uVXNlcik7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVCZWFyZXJQcm92aWRlcihtZXJnZWRUb2tlblBhdGg6IHN0cmluZywgdXNlckVtYWlsOiBzdHJpbmcpIHtcclxuICBjb25zdCB0b2tlbklkID0gZ2V0VG9rZW5JZChtZXJnZWRUb2tlblBhdGgsIHVzZXJFbWFpbCk7XHJcbiAgcmV0dXJuIG5ldyBXZWJTZXJ2ZXJCZWFyZXJQcm92aWRlcihtZXJnZWRUb2tlblBhdGgsIHJlc3BvbnNlVGV4dCA9PiB7XHJcbiAgICBjb25zdCByZXMgPSBKU09OLnBhcnNlKHJlc3BvbnNlVGV4dCkgYXMgeyBvazogYm9vbGVhbiwgZXJyb3I/OiBzdHJpbmcsIHRva2VuPzogc3RyaW5nLCB1c2VyPzogVXNlciB9O1xyXG4gICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihyZXMuZXJyb3IpO1xyXG4gICAgaWYgKHJlcy51c2VyKSB7XHJcbiAgICAgIHNhdmVVc2VySW5mbyhyZXMudXNlciwgdG9rZW5JZCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4geyB0b2tlbjogcmVzLnRva2VuLCBleHBpcmVzOiBEYXRlLm5vdygpICsgNTkgKiA2MCAqIDEwMDAgfTtcclxuICB9LCB0b2tlbklkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlR29vZ2xlVG9rZW5Qcm92aWRlcihtZXJnZWRUb2tlblBhdGg6IHN0cmluZywgdXNlckVtYWlsOiBzdHJpbmcpIHtcclxuICBjb25zdCB0b2tlbklkID0gZ2V0VG9rZW5JZChtZXJnZWRUb2tlblBhdGgsIHVzZXJFbWFpbCk7XHJcbiAgcmV0dXJuIG5ldyBXZWJTZXJ2ZXJCZWFyZXJQcm92aWRlcihtZXJnZWRUb2tlblBhdGgsIHJlc3BvbnNlVGV4dCA9PiB7XHJcbiAgICBjb25zdCByZXMgPSBKU09OLnBhcnNlKHJlc3BvbnNlVGV4dCkgYXMgeyBvazogYm9vbGVhbiwgZXJyb3I/OiBzdHJpbmcsIHRva2VuPzogc3RyaW5nLCB1c2VyPzogVXNlciB9O1xyXG4gICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihyZXMuZXJyb3IpO1xyXG4gICAgcmV0dXJuIHsgdG9rZW46IHJlcy50b2tlbiwgZXhwaXJlczogRGF0ZS5ub3coKSArIDU5ICogNjAgKiAxMDAwIH07XHJcbiAgfSwgdG9rZW5JZCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVRlc3RUb2tlblByb3ZpZGVyKHRva2VuVXJsOiBzdHJpbmcsIHVzZXI6IFVzZXIsIHNjb3Blczogc3RyaW5nW10pIHtcclxuICByZXR1cm4gbmV3IEtlZEJlYXJlclByb3ZpZGVyKFxyXG4gICAgaXNvbW9ycGhpYyxcclxuICAgIHN0b3JhZ2UsXHJcbiAgICB0b2tlblVybCArIHVzZXIubWFpbCArIGxvY2F0aW9uLnNlYXJjaCxcclxuICAgIGNmZy5LRURfQ0xJRU5UX0lELFxyXG4gICAgY2ZnLktFRF9DTElFTlRfU0VDUkVULFxyXG4gICAgdG9rZW5VcmwsIHtcclxuICAgICAgZW1haWw6IHVzZXIubWFpbC50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICByb2xlczogdXNlci5yb2xlcyxcclxuICAgICAgc2Nob29sOiB1c2VyLnNjaG9vbCxcclxuICAgICAgc2Nob29sVHlwZTogdXNlci5zY2hvb2xUeXBlLFxyXG4gICAgICBzY29wZXNcclxuICAgIH0pO1xyXG59XHJcblxyXG4vLyBlbnYuY3VycmVudFVzZXIubWFpbCBpcyBzZXQgYnkgU2l0ZVZpc2lvbiBzZXJ2ZXIgaW5pdGlhbGx5LlxyXG4vLyBBIHJlc3BvbnNlIGZyb20gL2FwaS90b2tlbiBtYXkgY2hhbmdlIHRoZSBtYWlsIGF0dHJpYnV0ZSBvZiB0aGUgY3VycmVudFxyXG4vLyB1c2VyLCBzbyBlbnYuY3VycmVudFVzZXIubWFpbCBtYXkgYmUgZGlmZmVyZW50IGFmdGVyIGdldHRpbmcgYSByZXNwb25zZS5cclxuLy8gSG93ZXZlciwgdGhlIGluaXRpYWwgdmFsdWUgaXMgdmFsdWFibGUgYWx3YXlzIGluIG9yZGVyIHRvIGRpc3Rpbmd1aXNoIHRoZSBjYXNlXHJcbi8vIHdoZW4gb25lIG5vcm1hbCB1c2VyIGxvZ3Mgb3V0IGFuZCBhbm90aGVyIHVzZXIgbG9ncyBpbi5cclxuY29uc3QgaW5pdGlhbFVzZXJFbWFpbCA9IGVudi5jdXJyZW50VXNlciAmJiBlbnYuY3VycmVudFVzZXIubWFpbDsgLy8gSW5pdGlhbCB2YWx1ZSBvZiBtYWlsLiBNYXkgY2hhbmdlLlxyXG5pZiAoaW5pdGlhbFVzZXJFbWFpbCkge1xyXG4gIC8vIEtFRFxyXG4gIGlmIChjZmcuS0VEX1RPS0VOX1BBVEgpIHtcclxuICAgIC8vXHJcbiAgICAvL1xyXG4gICAgLy8gUHJvZHVjdGlvbiAvIFNpdGVWaXNpb24gcHJveGllZCAvYXBpL3Rva2VuIHRvIHJlcXVlc3QgdG9rZW5zIGZyb206XHJcbiAgICAvL1xyXG4gICAgLy9cclxuICAgIGNvbnN0IG1lcmdlZFRva2VuUGF0aCA9IGdldE1lcmdlZFRva2VuUGF0aChcclxuICAgICAgY2ZnLktFRF9UT0tFTl9QQVRILFxyXG4gICAgICBsb2NhdGlvbi5zZWFyY2gsIFtcclxuICAgICAgICBcImtlZGJhY2tlbmRcIixcclxuICAgICAgICBcIkVEU1wiLFxyXG4gICAgICBdKTtcclxuICAgIGVudi5iZWFyZXJQcm92aWRlciA9IGNyZWF0ZUJlYXJlclByb3ZpZGVyKG1lcmdlZFRva2VuUGF0aCwgaW5pdGlhbFVzZXJFbWFpbCk7XHJcbiAgICBsb2FkVXNlckluZm8oZ2V0VG9rZW5JZChtZXJnZWRUb2tlblBhdGgsIGluaXRpYWxVc2VyRW1haWwpKTtcclxuXHJcbiAgICAvLyBHb29nbGVcclxuICAgIGNvbnN0IGdvb2dsZU1lcmdlZFBhdGggPSBnZXRNZXJnZWRUb2tlblBhdGgoXHJcbiAgICAgIGNmZy5LRURfVE9LRU5fUEFUSCxcclxuICAgICAgbG9jYXRpb24uc2VhcmNoLCBbXHJcbiAgICAgICAgXCJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2NhbGVuZGFyLnJlYWRvbmx5XCIsXHJcbiAgICAgICAgLy9cImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvZHJpdmVcIlxyXG4gICAgICBdKTtcclxuICAgIGVudi5nb29nbGVUb2tlblByb3ZpZGVyID0gY3JlYXRlR29vZ2xlVG9rZW5Qcm92aWRlcihnb29nbGVNZXJnZWRQYXRoLCBpbml0aWFsVXNlckVtYWlsKTtcclxuICB9IGVsc2UgaWYgKGNmZy5LRURfVE9LRU5fVVJMICYmIGNmZy5LRURfQ0xJRU5UX0lEICYmIGNmZy5LRURfQ0xJRU5UX1NFQ1JFVCkge1xyXG4gICAgLy9cclxuICAgIC8vXHJcbiAgICAvLyBUZXN0IC0gZ28gZGlyZWN0bHkgdG8gS0VEQVVUSCBzZXJ2ZXIgdG8gcmV0cmlldmUgdG9rZW5zXHJcbiAgICAvL1xyXG4gICAgLy9cclxuICAgIGVudi5iZWFyZXJQcm92aWRlciA9IGNyZWF0ZVRlc3RUb2tlblByb3ZpZGVyKGNmZy5LRURfVE9LRU5fVVJMLCBlbnYuY3VycmVudFVzZXIsIFtcclxuICAgICAgXCJrZWRiYWNrZW5kXCIsXHJcbiAgICAgIFwiRURTXCIsXHJcbiAgICBdKTtcclxuICAgIGVudi5nb29nbGVUb2tlblByb3ZpZGVyID0gY3JlYXRlVGVzdFRva2VuUHJvdmlkZXIoY2ZnLktFRF9UT0tFTl9VUkwgKyBcIi9nb29nbGVcIiwgZW52LmN1cnJlbnRVc2VyLCBbXHJcbiAgICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9jYWxlbmRhci5yZWFkb25seVwiLFxyXG4gICAgICAvL1wiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9kcml2ZVwiXHJcbiAgICBdKTtcclxuICB9IGVsc2Uge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVyIEtFRF9UT0tFTl9QQVRIYCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBlbnYgZnJvbSAnLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0IGNmZyBmcm9tICcuLi9nbG9iYWxzL0tFRC5jZmcnO1xyXG5pbXBvcnQgeyBpc29tb3JwaGljIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnR3ZWInO1xyXG5pbXBvcnQgeyBFZHNDbGllbnQgfSBmcm9tICcuLi9hcGlzL2Vkc2NsaWVudCc7XHJcblxyXG5lbnYuZWRzQ2xpZW50ID0gbmV3IEVkc0NsaWVudCAoXHJcbiAgaXNvbW9ycGhpYyxcclxuICBjZmcuRURTX0FQSV9VUkwsXHJcbiAgZW52LmJlYXJlclByb3ZpZGVyLFxyXG4gICgpPT5lbnYuY3VycmVudFVzZXIubWFpbCk7XHJcblxyXG4iLCJpbXBvcnQgZW52IGZyb20gJy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCBjZmcgZnJvbSAnLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuaW1wb3J0IHsgS2VkQmFja2VuZENsaWVudFdlYiB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50d2ViJztcclxuXHJcbmVudi5rZWRCYWNrZW5kQ2xpZW50ID0gbmV3IEtlZEJhY2tlbmRDbGllbnRXZWIgKFxyXG4gIGNmZy5LRURfQVBJX1VSTCxcclxuICBlbnYuYmVhcmVyUHJvdmlkZXIpO1xyXG5cclxuIiwiaW1wb3J0IEtFRCBmcm9tICcuL0tFRCc7XHJcblxyXG4vKiBUaGlzIGRlZmF1bHQgY29uZmlndXJhdGlvbiBpcyB1c2VkIGFzIGEgZmFsbGJhY2suXHJcbk5vcm1hbGx5IGJvdGggdGVzdCBwYWdlcyBhbmQgcHJvZHVjdGlvbiBwYWdlcyB3aWxsIG92ZXJyaWRlIHRoZXNlIGNvbmZpZ3JhdGlvbnNcclxuKi9cclxuLypjb25zdCBkZWZhdWx0Q29uZmlndXJhdGlvbiA9IHtcclxuICAvLyBFbnZpcm9ubWVudFxyXG4gIEVOVklST05NRU5UOiAnZGV2ZWxvcG1lbnQnIGFzICdwcm9kdWN0aW9uJyB8ICdkZXZlbG9wbWVudCcgfCAndGVzdCcsXHJcbiAgLy8gQXV0aGVudGljYXRpb24gU2VydmVyOlxyXG4gIEtFRF9UT0tFTl9VUkw6ICdodHRwczovL2tlZGF1dGh0ZXN0LmF6dXJld2Vic2l0ZXMubmV0L3Rva2VuJyxcclxuICBLRURfVE9LRU5fUEFUSDogJy9hcGkvdG9rZW4uU2tyaXB0LnBvcnRsZXQ/c3YuY29udGVudHR5cGU9YXBwbGljYXRpb24vanNvbicsXHJcbiAgS0VEX0NMSUVOVF9JRDogJ2RldmNsaWVudCcsXHJcbiAgS0VEX0NMSUVOVF9TRUNSRVQ6ICc0ZlJkZlFwV3RKcWpUV2YnLFxyXG4gIC8vIFNlcnZpY2VzOlxyXG4gIEtFRF9BUElfVVJMOiAnaHR0cHM6Ly9rZWRiYWNrZW5kdGVzdC5henVyZXdlYnNpdGVzLm5ldC9hcGkvJywgIFxyXG4gIEVEU19BUElfVVJMOiAnaHR0cHM6Ly9lZHNwb3J0YWxvd2luYXBpLmF6dXJld2Vic2l0ZXMubmV0L2FwaS8nXHJcbn0qL1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJS2VkQ29uZmlndXJhdGlvbiB7XHJcbiAgRU5WSVJPTk1FTlQ6ICdwcm9kdWN0aW9uJyB8ICdkZXZlbG9wbWVudCcgfCAndGVzdCc7XHJcbiAgS0VEX1JFQUxNOiBzdHJpbmc7XHJcbiAgS0VEX1RPS0VOX1VSTDogc3RyaW5nO1xyXG4gIEtFRF9UT0tFTl9QQVRIOiBzdHJpbmc7XHJcbiAgS0VEX0NMSUVOVF9JRDogc3RyaW5nO1xyXG4gIEtFRF9DTElFTlRfU0VDUkVUOiBzdHJpbmc7XHJcbiAgS0VEX0FQSV9VUkw6IHN0cmluZztcclxuICBFRFNfQVBJX1VSTDogc3RyaW5nO1xyXG4gIEtFRF9MT0NBTEU6IHN0cmluZztcclxuICBLRURfU0NIT09MX0xPQ0FMRTogc3RyaW5nO1xyXG4gIEtFRF9DT1VSU0VfQlVJTERFUl9VUkw6IHN0cmluZztcclxuICBLRURfQ09VUlNFX1ZJRVdFUl9VUkw6IHN0cmluZztcclxuICBLRURfU1VCSkVDVF9QTEFOTkVSX0FETUlOX1VSTDogc3RyaW5nO1xyXG4gIEtFRF9TVUJKRUNUX1BMQU5ORVJfVVJMOiBzdHJpbmc7XHJcbiAgS0VEX0ZFQVRVUkVTOiBzdHJpbmc7XHJcbiAgS0VEX0tFRVBfQUxJVkVfVVJMOiBzdHJpbmc7XHJcbiAgS0VEX0VOVU1fV09SREJBTktTX1VSTDogc3RyaW5nO1xyXG4gIEtFRF9XT1JEQkFOS1NfVVJMOiBzdHJpbmc7XHJcbiAgS0VEX1JFU09VUkNFU19VUkw6IHN0cmluZztcclxufTtcclxuXHJcbmlmICghS0VELmNmZykgS0VELmNmZyA9IHt9O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgS0VELmNmZyBhcyBJS2VkQ29uZmlndXJhdGlvbjtcclxuZXhwb3J0IGNvbnN0IGNmZzogSUtlZENvbmZpZ3VyYXRpb24gPSBLRUQuY2ZnO1xyXG4iLCJpbXBvcnQge1VzZXIsIExlYXJuaW5nTW9kdWxlVGFza3N9IGZyb20gJy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcclxuaW1wb3J0IHsgS2VkQmFja2VuZENsaWVudCwgQmVhcmVyUHJvdmlkZXIgfSBmcm9tICdrZWRiYWNrZW5kL2NsaWVudCc7XHJcbmltcG9ydCB7VXNlclRhc2t9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuaW1wb3J0IHtLZWRSZXBvfSBmcm9tICcuLi9yZXBvcy9rZWQtcmVwbyc7XHJcbmltcG9ydCB7RWRzQ2xpZW50fSBmcm9tICcuLi9hcGlzL2Vkc2NsaWVudCc7XHJcbmltcG9ydCBLRUQgZnJvbSAnLi9rZWQnO1xyXG5pbXBvcnQgeyBLU1Rlcm1QbGFubmVyUmVwbyB9IGZyb20gJy4uL3JlcG9zL2tzLXRlcm1wbGFubmVyLXJlcG8nO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBFbnYge1xyXG4gICAgY3VycmVudFVzZXI/OiBVc2VyO1xyXG4gICAgbGVhcm5pbmdNb2R1bGVUYXNrcz86IExlYXJuaW5nTW9kdWxlVGFza3M7XHJcbiAgICBiZWFyZXJQcm92aWRlcj86IEJlYXJlclByb3ZpZGVyO1xyXG4gICAgZ29vZ2xlVG9rZW5Qcm92aWRlcj86IEJlYXJlclByb3ZpZGVyO1xyXG4gICAga2VkQmFja2VuZENsaWVudD86IEtlZEJhY2tlbmRDbGllbnQ7XHJcbiAgICBlZHNDbGllbnQ/OiBFZHNDbGllbnQ7XHJcbiAgICB1c2VyVGFza3NSZXBvPztcclxuICAgIGhpZGRlbkNvdXJzZXNSZXBvPztcclxuICAgIHdlZWtOb3Rlc1JlcG8/O1xyXG4gICAga2dUZXJtUGxhbm5lclJlcG8/O1xyXG4gICAga3NUZXJtUGxhbm5lclJlcG8/OiBLU1Rlcm1QbGFubmVyUmVwb1xyXG4gICAgdHV0b3JlZDogYm9vbGVhbjtcclxuICAgIGVycm9yPzogRXJyb3I7XHJcbn1cclxuXHJcbmlmICghS0VELmVudikgS0VELmVudiA9IHt9O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgS0VELmVudiBhcyBFbnY7XHJcbmV4cG9ydCBjb25zdCBlbnY6IEVudiA9IEtFRC5lbnY7XHJcbiIsIlxyXG5leHBvcnQgY29uc3QgS0VEX05BTUVTUEFDRSA9IFwiS0VEXCI7XHJcblxyXG5kZWNsYXJlIHZhciBLRUQ6IGFueTtcclxuXHJcbnZhciByZXN1bHQgPSB0eXBlb2YgS0VEID09PSAndW5kZWZpbmVkJyA/IHt9IDogS0VEO1xyXG5cclxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBLRUQgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICB3aW5kb3dbS0VEX05BTUVTUEFDRV0gPSByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHJlc3VsdDtcclxuIiwiaW1wb3J0IGVudiBmcm9tICcuL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyBLZWRCYWNrZW5kUmVwbyB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IGdldEdsb2JhbElkLCBjcmVhdGVVVUlEIH0gZnJvbSAna2VkYmFja2VuZC9jbGllbnQnO1xyXG5pbXBvcnQgY2ZnIGZyb20gJy4vS0VELmNmZyc7XHJcbmltcG9ydCB7IFNjaG9vbCwgQnJhbmNoIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgeyBWYWx1ZSB9IGZyb20gJ2tlZGJhY2tlbmQvb2JzZXJ2YWJsZSc7XHJcblxyXG5leHBvcnQgY29uc3QgZGIgPSBuZXcgS2VkQmFja2VuZFJlcG8oXHJcbiAgKCk9PmVudi5rZWRCYWNrZW5kQ2xpZW50LFxyXG4gICgpPT5lbnYuY3VycmVudFVzZXIgP1xyXG4gICAgZW52LmN1cnJlbnRVc2VyLm1haWwgOlxyXG4gICAgXCJcIixcclxuICAoKT0+ZW52LmN1cnJlbnRVc2VyID9cclxuICAgIGVudi5jdXJyZW50VXNlci5kaXNwbGF5TmFtZSB8fCBlbnYuY3VycmVudFVzZXIubWFpbCA6XHJcbiAgICBcIlwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBnbG9iYWxJZCA9IGdldEdsb2JhbElkKGNmZy5LRURfUkVBTE0pO1xyXG5leHBvcnQgY29uc3QgU2Nob29scyA9IHtcclxuICBzdGFuZGFyZFNjaG9vbDogZGIuc2Nob29scy5uYW1lKFwic3RhbmRhcmRcIikuY2FjaGVPcHRpbWl6ZWQoKS5zaW5nbGUoKSxcclxuICBnZXQgbXlTY2hvb2wgKCkgeyByZXR1cm4gZGIuc2Nob29scy5uYW1lKGVudi5jdXJyZW50VXNlci5zY2hvb2wpLmNhY2hlT3B0aW1pemVkKCkuc2luZ2xlKCk7IH1cclxufTtcclxuZXhwb3J0IGNvbnN0IENvdXJzZUluc3RhbmNlcyA9IHtcclxuICBnZXRCcmFuY2hJZChzY2hvb2w6IFZhbHVlPFNjaG9vbD4sIGNvdXJzZUlkOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiBzY2hvb2wuc3dpdGNoTWFwKHNjaG9vbCA9PlxyXG4gICAgICBkYi5icmFuY2hlc1xyXG4gICAgICAgIC5oYXNFZGdlc0Zyb20oW3NjaG9vbC5vZmZpY2lhbEJyYW5jaElkXSlcclxuICAgICAgICAubmFtZShcImRyYWZ0XCIpXHJcbiAgICAgICAgLnRhZ3MoY291cnNlSWQpXHJcbiAgICAgICAgLmlkc09ubHkoKVxyXG4gICAgICAgIC5tYXAoKHtpZH0pID0+IGlkKVxyXG4gICAgICAgIC50b1ZhbHVlKClcclxuICAgICAgICAubWFwKGlkcyA9PiBpZHMubGVuZ3RoID4gMCA/IGlkc1swXSA6IHVuZGVmaW5lZCkpO1xyXG4gIH0sXHJcblxyXG4gIC8qKiBHZXQgYSBEUkFGVCBicmFuY2ggZm9yIGdpdmVuIGNvdXJzZSBJRCBhbmQgZ2l2ZW4gc2Nob29sLlxyXG4gICAqIElmIHRoZXJlIGlzIG5vdCB5ZXQgc3VjaCBhIGJyYW5jaCwgY3JlYXRlIGl0IHVzaW5nIG11dGF0aW9uc09uRW1wdHkoKSB3aGljaCB3aWxsXHJcbiAgICogbGVhZCB0byB0aGUgQyMgY29kZSBEb2N1bWVudFJlcG9zaXRvcnkuUmVhZE9yTXV0YXRlKCkgdmlhIERvY3VtZW50Q29udHJvbGxlci5cclxuICAgKi9cclxuICBnZXRPckNyZWF0ZUJyYW5jaElkKHNjaG9vbDogVmFsdWU8U2Nob29sPiwgY291cnNlSWQ6IHN0cmluZykge1xyXG4gICAgcmV0dXJuIGRiLmNvdXJzZUluc3RhbmNlcy5pZHNPbmx5KCkuaWQoY291cnNlSWQpLnN3aXRjaE1hcCgoKT0+IC8vIFRIaXMgZmlyc3QgbGluZSB2ZXJpZmllcyBjb3Vyc2UgZXhpc3RzLiBJZiBkZWxldGVkLCBkb24ndCB0cnkgdG8gcmVjcmVhdGUgaXRzIGJyYW5jaCFcclxuICAgICAgc2Nob29sLnN3aXRjaE1hcChzY2hvb2wgPT4gXHJcbiAgICAgIGRiLmJyYW5jaGVzXHJcbiAgICAgICAgLmhhc0VkZ2VzRnJvbShbc2Nob29sLm9mZmljaWFsQnJhbmNoSWRdKVxyXG4gICAgICAgIC5uYW1lKFwiZHJhZnRcIilcclxuICAgICAgICAudGFncyhjb3Vyc2VJZClcclxuICAgICAgICAuaWRzT25seSgpXHJcbiAgICAgICAgLm11dGF0aW9uc09uRW1wdHkodHggPT4ge1xyXG4gICAgICAgICAgLy8gVGhlc2UgMiBtdXRhdGlvbnMgd2lsbCBvY2N1ciBzZXJ2ZXIgc2lkZSwgYXRvbWljYWxseS5cclxuICAgICAgICAgIC8vIFdpbGwgYmUgc2VudCBvbiBlYWNoIHJlcXVlc3QgaW4gdGhlIHF1ZXJ5LCBidXQgd2lsbCBvbmx5IGV4ZWN1dGUgaWYgcXVlcnkgcmVzdWx0cyBpbiB6ZXJvIGl0ZW1zLlxyXG4gICAgICAgICAgLy9jb25zb2xlLmxvZyhcIlNjaG9vbDpcIiwgc2Nob29sKTtcclxuICAgICAgICAgIGNvbnN0IGlkID0gY3JlYXRlVVVJRCgpO1xyXG4gICAgICAgICAgdHguYWRkKFwiYnJhbmNoZXNcIiwge1xyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgYWNsOiBbXHJcbiAgICAgICAgICAgICAgXCJyb2xlOlVTRVI6UlwiLFxyXG4gICAgICAgICAgICAgIGBzY2hvb2xSb2xlOiR7c2Nob29sLm5hbWV9L0VNUExPWUVFOlNgXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIG5hbWU6ICdkcmFmdCcsXHJcbiAgICAgICAgICAgIHNjaG9vbElkOiBzY2hvb2wuaWQsXHJcbiAgICAgICAgICAgIHRyZWVQYXJlbnRJZDogc2Nob29sLm9mZmljaWFsQnJhbmNoSWQsXHJcbiAgICAgICAgICAgIHRhZ3M6IFtjb3Vyc2VJZF1cclxuICAgICAgICAgIH0gYXMgQnJhbmNoKTtcclxuICAgICAgICAgIC8vIEFwcHJvdmluZyB0aGUgYnJhbmNoIG1ha2VzIHN1cmUgdGhhdCBpdCB3YXMgY3JlYXRlZCBieSBhbiBFTVBMT1lFRSBvbiBnaXZlbiBzY2hvb2wuXHJcbiAgICAgICAgICB0eC5saW5rMihcImJyYW5jaGVzXCIsIHNjaG9vbC5vZmZpY2lhbEJyYW5jaElkLCBcImFwcHJvdmVkQ2hpbGRyZW5cIiwgaWQpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnNpbmdsZSgpXHJcbiAgICAgICAgLm1hcCgoe2lkfSkgPT4gaWQpKSk7XHJcbiAgfSxcclxuXHJcbiAgZ2V0QWxsRGVzY2VuZGFudElkcyhjb3Vyc2VJZDogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gZGIuY291cnNlQmxvY2tzLnRhZ3MoY291cnNlSWQpLmlkc09ubHkoKS5jb25jYXQoXHJcbiAgICAgIGRiLmNvdXJzZUNvbnRlbnRzLnRhZ3MoY291cnNlSWQpLmlkc09ubHkoKSkuY29uY2F0KFxyXG4gICAgICBkYi5jb3Vyc2VUYWJzLnRhZ3MoY291cnNlSWQpLmlkc09ubHkoKSkuY29uY2F0KFxyXG4gICAgICBkYi50YXNrcy50YWdzKGNvdXJzZUlkKS5pZHNPbmx5KCkpXHJcbiAgICAgIC5tYXAoeCA9PiB4LmlkKTtcclxuICB9XHJcbn1cclxuIiwiXHJcbmV4cG9ydCBjb25zdCBLRURfTkFNRVNQQUNFID0gXCJLRURcIjtcclxuXHJcbmRlY2xhcmUgdmFyIEtFRDogYW55O1xyXG5cclxudmFyIHJlc3VsdCA9IHR5cGVvZiBLRUQgPT09ICd1bmRlZmluZWQnID8ge30gOiBLRUQ7XHJcblxyXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIEtFRCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHdpbmRvd1tLRURfTkFNRVNQQUNFXSA9IHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgcmVzdWx0O1xyXG4iLCJpbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCBjZmcgZnJvbSAnLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuXHJcbmlmIChjZmcuS0VEX0xPQ0FMRSA9PT0gXCJzdlwiKSB7XHJcbiAgICBtb21lbnQudXBkYXRlTG9jYWxlKCdzdicsIHtcclxuICAgICAgICBtb250aHM6ICdqYW51YXJpX2ZlYnJ1YXJpX21hcnNfYXByaWxfbWFqX2p1bmlfanVsaV9hdWd1c3RpX3NlcHRlbWJlcl9va3RvYmVyX25vdmVtYmVyX2RlY2VtYmVyJy5zcGxpdCgnXycpLFxyXG4gICAgICAgIG1vbnRoc1Nob3J0OiAnamFuX2ZlYl9tYXJfYXByX21hal9qdW5fanVsX2F1Z19zZXBfb2t0X25vdl9kZWMnLnNwbGl0KCdfJyksXHJcbiAgICAgICAgd2Vla2RheXM6ICdzw7ZuZGFnX23DpW5kYWdfdGlzZGFnX29uc2RhZ190b3JzZGFnX2ZyZWRhZ19sw7ZyZGFnJy5zcGxpdCgnXycpLFxyXG4gICAgICAgIHdlZWtkYXlzU2hvcnQ6ICdzw7ZuX23DpW5fdGlzX29uc190b3JfZnJlX2zDtnInLnNwbGl0KCdfJyksXHJcbiAgICAgICAgd2Vla2RheXNNaW46ICdzw7ZfbcOlX3RpX29uX3RvX2ZyX2zDticuc3BsaXQoJ18nKSxcclxuICAgICAgICBsb25nRGF0ZUZvcm1hdDoge1xyXG4gICAgICAgICAgICBMVDogJ0hIOm1tJyxcclxuICAgICAgICAgICAgTFRTOiAnSEg6bW06c3MnLFxyXG4gICAgICAgICAgICBMOiAnWVlZWS1NTS1ERCcsXHJcbiAgICAgICAgICAgIExMOiAnRCBNTU1NIFlZWVknLFxyXG4gICAgICAgICAgICBMTEw6ICdEIE1NTU0gWVlZWSBba2wuXSBISDptbScsXHJcbiAgICAgICAgICAgIExMTEw6ICdkZGRkIEQgTU1NTSBZWVlZIFtrbC5dIEhIOm1tJyxcclxuICAgICAgICAgICAgbGxsOiAnRCBNTU0gWVlZWSBISDptbScsXHJcbiAgICAgICAgICAgIGxsbGw6ICdkZGQgRCBNTU0gWVlZWSBISDptbSdcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNhbGVuZGFyOiB7XHJcbiAgICAgICAgICAgIHNhbWVEYXk6ICdbSWRhZ10gTFQnLFxyXG4gICAgICAgICAgICBuZXh0RGF5OiAnW0ltb3Jnb25dIExUJyxcclxuICAgICAgICAgICAgbGFzdERheTogJ1tJZ8Olcl0gTFQnLFxyXG4gICAgICAgICAgICBuZXh0V2VlazogJ1tQw6VdIGRkZGQgTFQnLFxyXG4gICAgICAgICAgICBsYXN0V2VlazogJ1tJXSBkZGRkW3NdIExUJyxcclxuICAgICAgICAgICAgc2FtZUVsc2U6ICdMJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVsYXRpdmVUaW1lOiB7XHJcbiAgICAgICAgICAgIGZ1dHVyZTogJ29tICVzJyxcclxuICAgICAgICAgICAgcGFzdDogJ2bDtnIgJXMgc2VkYW4nLFxyXG4gICAgICAgICAgICBzOiAnbsOlZ3JhIHNla3VuZGVyJyxcclxuICAgICAgICAgICAgc3M6ICclZCBzZWt1bmRlcicsXHJcbiAgICAgICAgICAgIG06ICdlbiBtaW51dCcsXHJcbiAgICAgICAgICAgIG1tOiAnJWQgbWludXRlcicsXHJcbiAgICAgICAgICAgIGg6ICdlbiB0aW1tZScsXHJcbiAgICAgICAgICAgIGhoOiAnJWQgdGltbWFyJyxcclxuICAgICAgICAgICAgZDogJ2VuIGRhZycsXHJcbiAgICAgICAgICAgIGRkOiAnJWQgZGFnYXInLFxyXG4gICAgICAgICAgICBNOiAnZW4gbcOlbmFkJyxcclxuICAgICAgICAgICAgTU06ICclZCBtw6VuYWRlcicsXHJcbiAgICAgICAgICAgIHk6ICdldHQgw6VyJyxcclxuICAgICAgICAgICAgeXk6ICclZCDDpXInXHJcbiAgICAgICAgfSxcclxuICAgICAgICBkYXlPZk1vbnRoT3JkaW5hbFBhcnNlOiAvXFxkezEsMn0oZXxhKS8sXHJcbiAgICAgICAgb3JkaW5hbDogZnVuY3Rpb24gKG51bWJlcikge1xyXG4gICAgICAgICAgICB2YXIgYiA9IG51bWJlciAlIDEwLFxyXG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gKH5+KG51bWJlciAlIDEwMCAvIDEwKSA9PT0gMSkgPyAnZScgOlxyXG4gICAgICAgICAgICAgICAgICAgIChiID09PSAxKSA/ICdhJyA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChiID09PSAyKSA/ICdhJyA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYiA9PT0gMykgPyAnZScgOiAnZSc7XHJcbiAgICAgICAgICAgIHJldHVybiBudW1iZXIgKyBvdXRwdXQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB3ZWVrOiB7XHJcbiAgICAgICAgICAgIGRvdzogMSwgLy8gTW9uZGF5IGlzIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsuXHJcbiAgICAgICAgICAgIGRveTogNCAgLy8gVGhlIHdlZWsgdGhhdCBjb250YWlucyBKYW4gNHRoIGlzIHRoZSBmaXJzdCB3ZWVrIG9mIHRoZSB5ZWFyLlxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcbmV4cG9ydCBjb25zdCBsb2NhbE1vbWVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiBtb21lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKS5sb2NhbGUoY2ZnLktFRF9MT0NBTEUpO1xyXG59XHJcbiIsImltcG9ydCB7IFJlcG8sIFJlcG9Db21tdW5pY2F0b3J9IGZyb20gJy4vcmVwbyc7XHJcbmltcG9ydCB7IEtlZEJhY2tlbmRDbGllbnQsIExpc3RPcHRpb25zLCBCYXRjaFJ1bm5lciwgY3JlYXRlVVVJRCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgRG9jdW1lbnR9IGZyb20gJ2tlZGJhY2tlbmQvbW9kZWxzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgS2VkUmVwb09wdGlvbnM8VCBleHRlbmRzIERvY3VtZW50PiB7XHJcbiAgZ2V0Q2xpZW50OiAoKT0+S2VkQmFja2VuZENsaWVudDtcclxuICBnZXRRdWVyeU9wdGlvbnM6ICgpPT5Qcm9taXNlPExpc3RPcHRpb25zPjtcclxuICBvcHRpbWlzdGljOiBib29sZWFuO1xyXG4gIHRhYmxlOiBzdHJpbmc7XHJcbiAgdXNlcjogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgS2VkUmVwbzxUIGV4dGVuZHMgRG9jdW1lbnQ+IHtcclxuICBtZW06IFJlcG88VD47XHJcbiAgb3B0aW9uczogS2VkUmVwb09wdGlvbnM8VD47XHJcbiAgXHJcbiAgY29uc3RydWN0b3Iob3B0aW9uczogS2VkUmVwb09wdGlvbnM8VD4pIHtcclxuICAgIGNvbnN0IHt0YWJsZSwgZ2V0Q2xpZW50LCBnZXRRdWVyeU9wdGlvbnN9ID0gb3B0aW9ucztcclxuICAgIHRoaXMubWVtID0gbmV3IFJlcG88VD4oe3F1ZXJ5OiBhc3luYyAoKT0+e1xyXG4gICAgICBjb25zdCBxdWVyeU9wdGlvbnMgPSBhd2FpdCBnZXRRdWVyeU9wdGlvbnMoKTtcclxuICAgICAgcmV0dXJuIGF3YWl0IGdldENsaWVudCgpLmxpc3Q8VD4odGFibGUsIHtcclxuICAgICAgICAuLi5xdWVyeU9wdGlvbnMsXHJcbiAgICAgICAgY2FjaGVCdXN0OiB0aGlzLmdldENhY2hlQnVzdCgpfSk7XHJcbiAgICB9fSk7XHJcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRDYWNoZUJ1c3QoKSB7XHJcbiAgICBjb25zdCB7dGFibGUsIHVzZXJ9ID0gdGhpcy5vcHRpb25zO1xyXG4gICAgY29uc3QgY2FjaGVCdXN0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhY2hlLWJ1c3QtJyArIHRhYmxlICsgJy0nICsgdXNlcik7XHJcbiAgICByZXR1cm4gY2FjaGVCdXN0IHx8IHRoaXMucmVnZW5lcmF0ZUNhY2hlQnVzdCgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZWdlbmVyYXRlQ2FjaGVCdXN0KCkge1xyXG4gICAgY29uc3Qge3RhYmxlLCB1c2VyfSA9IHRoaXMub3B0aW9ucztcclxuICAgIGNvbnN0IGNhY2hlQnVzdCA9IGNyZWF0ZVVVSUQoKTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjYWNoZS1idXN0LScgKyB0YWJsZSArICctJyArIHVzZXIsIGNhY2hlQnVzdCk7XHJcbiAgICByZXR1cm4gY2FjaGVCdXN0O1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgdXBzZXJ0KGl0ZW06IFQsIHVwZGF0ZXI6IChpdGVtOiBUKSA9PiB2b2lkKSB7XHJcbiAgICBpZiAoIWl0ZW0uJGV0YWcpIHtcclxuICAgICAgLy8gSXRlbXMgd2l0aG91dCAkZXRhZyBjYW5ub3QgYmUgcmV0cmlldmVkIGZyb20gc2VydmVyLCBzbyBpdCBzaG91bGQgYmUgaW5zZXJ0ZWQuXHJcbiAgICAgIGNvbnN0IHVwZGF0ZWRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgaXRlbSk7XHJcbiAgICAgIHVwZGF0ZXIodXBkYXRlZEl0ZW0pO1xyXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5pbnNlcnQoW3VwZGF0ZWRJdGVtXSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBXZSBoYXZlIGFuICRldGFnLCBzbyB3ZSBjYW4gZXhwZWN0IGl0IHRvIGxpdmUgb24gdGhlIHNlcnZlci5cclxuICAgICAgLy8gSG93ZXZlciwgdGFrZSBjYXJlIG9mIHRoZSB1bmxpa2VseSBzaXR1YXRpb24gdGhhdCBpdCB3YXMgZGVsZXRlZCBmcm9tIHNlcnZlcixcclxuICAgICAgLy8gYW5kIGlmIHNvLCBpbnNlcnQgaXQgYWdhaW4uXHJcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKFtpdGVtXSwgdXBkYXRlcikuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgaWYgKGUubmFtZSA9PT0gXCJodHRwNDA0XCIpIHtcclxuICAgICAgICAgIGNvbnN0IHVwZGF0ZWRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgaXRlbSk7XHJcbiAgICAgICAgICB1cGRhdGVyKHVwZGF0ZWRJdGVtKTtcclxuICAgICAgICAgIHJldHVybiB0aGlzLmluc2VydChbdXBkYXRlZEl0ZW1dKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIHVwZGF0ZShpdGVtczogVFtdLCB1cGRhdGVyOiAoaXRlbTogVCkgPT4gdm9pZCkge1xyXG4gICAgY29uc3Qge2dldENsaWVudCwgb3B0aW1pc3RpYywgdGFibGV9ID0gdGhpcy5vcHRpb25zO1xyXG4gICAgY29uc3QgY2xpZW50ID0gZ2V0Q2xpZW50KCk7XHJcbiAgICBjb25zdCBtb2RpZmllZEl0ZW1zOiBUW10gPSBpdGVtcy5tYXAoaXRlbSA9PiB7XHJcbiAgICAgIGNvbnN0IG1lbVJlcG9JdGVtID0gdGhpcy5tZW0uaXRlbXMuZmluZChpdCA9PiBpdC5pZCA9PT0gaXRlbS5pZCk7XHJcbiAgICAgIGl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBtZW1SZXBvSXRlbSB8fCBpdGVtKTtcclxuICAgICAgdXBkYXRlcihpdGVtKTtcclxuICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICB9KTtcclxuICAgIGlmIChvcHRpbWlzdGljKSBhd2FpdCB0aGlzLm1lbS51cGRhdGUobW9kaWZpZWRJdGVtcy5tYXAoeCA9PiBPYmplY3QuYXNzaWduKHt9LCB4LCB7JG1ldGE6ICd1cGRhdGluZyd9KSkpO1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgY2xpZW50LmRvIChiciA9PiBtb2RpZmllZEl0ZW1zLmZvckVhY2goaXRlbSA9PiBici5wdXQodGFibGUsIGl0ZW0pKSlcclxuICAgIC5jYXRjaChlID0+IGUubmFtZSA9PT0gXCJodHRwNDA5XCIgPyAvLyBjb25mbGljdFxyXG4gICAgICAvLyBHZXQgYSBmcmVzaCB2ZXJzaW9uIGZyb20gc2VydmVyOlxyXG4gICAgICBjbGllbnQubGlzdDxUPih0YWJsZSwge2lkczogaXRlbXMubWFwKGl0ZW0gPT4gaXRlbS5pZCl9LCB7Y2FjaGU6ICduby1jYWNoZSd9KS50aGVuKGZyZXNoSXRlbXMgPT4ge1xyXG4gICAgICAgIC8vIFVwZGF0ZSBsb2NhbCB2ZXJzaW9uOlxyXG4gICAgICAgIGNvbnN0IG1vZGlmaWVkSXRlbXMgPSBmcmVzaEl0ZW1zLm1hcChmcmVzaEl0ZW0gPT4ge1xyXG4gICAgICAgICAgLy8gQ2xvbmUgdGhlIGZyZXNoIGl0ZW1cclxuICAgICAgICAgIGNvbnN0IG1vZGlmaWVkID0gT2JqZWN0LmFzc2lnbih7fSwgZnJlc2hJdGVtKTtcclxuICAgICAgICAgIC8vIFJlLXJ1biB0aGUgdXBkYXRlciBvbiB0aGUgY2xvbmU6XHJcbiAgICAgICAgICB1cGRhdGVyKG1vZGlmaWVkKTtcclxuICAgICAgICAgIHJldHVybiBtb2RpZmllZDtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBSZS1kbyB0aGUgdGhlIHB1dCBvcGVyYXRpb24gdG93YXJkcyB0aGUgc2VydmVyLlxyXG4gICAgICAgIHJldHVybiBjbGllbnQuZG8oYnIgPT4gbW9kaWZpZWRJdGVtcy5mb3JFYWNoKGl0ZW0gPT4gYnIucHV0KHRhYmxlLCBpdGVtKSkpO1xyXG4gICAgICB9KSA6XHJcbiAgICAgIC8vIE90aGVyIHVuZXhwZWN0ZWQgZXJyb3I6XHJcbiAgICAgIFByb21pc2UucmVzb2x2ZShvcHRpbWlzdGljICYmXHJcbiAgICAgICAgdGhpcy5tZW0udXBkYXRlKGl0ZW1zKSkgLy8gVW5kbyBvcHRpbWlzdGljIHVwZGF0ZVxyXG4gICAgICAudGhlbigoKT0+e1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlKTsgLy8gUmVqZWN0IHdpdGggdGhlIGVycm9yIG5vIG1hdHRlci5cclxuICAgICAgfSkpO1xyXG4gICAgdGhpcy5yZWdlbmVyYXRlQ2FjaGVCdXN0KCk7XHJcbiAgICBtb2RpZmllZEl0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgIGl0ZW0uJGV0YWcgPSByZXMubmV3RXRhZ3NbaXRlbS5pZF07XHJcbiAgICAgIGl0ZW0uJG1ldGEgPSB1bmRlZmluZWQ7XHJcbiAgICB9KTtcclxuICAgIGF3YWl0IHRoaXMubWVtLnVwZGF0ZShtb2RpZmllZEl0ZW1zKTsgLy8gRW5zdXJlcyBuZXcgZXRhZyBpcyBpcyBhcHBsaWVkIG9uIG5leHQgYWN0aW9uLlxyXG4gIH1cclxuXHJcbiAgc3RyaXBHcmFwaHMgKGl0ZW1zOiBUW10sIGdyYXBoczogc3RyaW5nW10pIHtcclxuICAgIHJldHVybiBpdGVtcy5tYXAoaXRlbSA9PiB7XHJcbiAgICAgIGNvbnN0IGNsb25lID0gT2JqZWN0LmFzc2lnbih7fSwgaXRlbSk7XHJcbiAgICAgIGdyYXBocy5mb3JFYWNoKGdyYXBoID0+IHtcclxuICAgICAgICBpZiAoaXRlbVtncmFwaF0pIHtcclxuICAgICAgICAgIGNsb25lW2dyYXBoXSA9IChpdGVtW2dyYXBoXSBhcyB7aWQ6c3RyaW5nfVtdKS5tYXAgKGRvYyA9PiAoe2lkOiBkb2MuaWR9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIGNsb25lO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBpbnNlcnQoaXRlbXM6IFRbXSkge1xyXG4gICAgY29uc3Qge2dldENsaWVudCwgb3B0aW1pc3RpYywgdGFibGUsIGdldFF1ZXJ5T3B0aW9uc30gPSB0aGlzLm9wdGlvbnM7XHJcbiAgICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnQoKTtcclxuICAgIGNvbnN0IHF1ZXJ5T3B0aW9ucyA9IGF3YWl0IGdldFF1ZXJ5T3B0aW9ucygpO1xyXG4gICAgY29uc3QgZ3JhcGhzID0gW10uY29uY2F0KHF1ZXJ5T3B0aW9ucy5pbmNsdWRlKTtcclxuICAgIC8vIEdpdmUgSURzIHRvIGVhY2ggaXRlbTpcclxuICAgIGl0ZW1zID0gaXRlbXMubWFwKGl0ZW0gPT4gaXRlbS5pZCA/IGl0ZW0gOiBPYmplY3QuYXNzaWduKHt9LCBpdGVtLCB7aWQ6IGNyZWF0ZVVVSUQoKX0pKTtcclxuICAgIGNvbnN0IHN0cmlwcGVkID0gdGhpcy5zdHJpcEdyYXBocyhpdGVtcywgZ3JhcGhzKTtcclxuICAgIGlmIChvcHRpbWlzdGljKSBhd2FpdCB0aGlzLm1lbS5pbnNlcnQoc3RyaXBwZWQubWFwKHggPT4gT2JqZWN0LmFzc2lnbih7fSwgeCwgeyRtZXRhOiAnYWRkaW5nJ30pKSk7XHJcbiAgICBjb25zdCBiciA9IG5ldyBCYXRjaFJ1bm5lcigpO1xyXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHN0cmlwcGVkKSB7XHJcbiAgICAgIC8vIEFsc28gYWRkIGxpbmtzIHRvIGFsbCBmb3JlaWduIHJlbGF0ZWQgaXRlbXM6XHJcbiAgICAgIGZvciAoY29uc3QgZ3JhcGggb2YgZ3JhcGhzKSB7XHJcbiAgICAgICAgY29uc3QgZm9yZWlnbkl0ZW1zOiBEb2N1bWVudFtdID0gaXRlbVtncmFwaF07XHJcbiAgICAgICAgaWYgKGZvcmVpZ25JdGVtcykge1xyXG4gICAgICAgICAgZm9yZWlnbkl0ZW1zLmZvckVhY2goZG9jID0+IHtcclxuICAgICAgICAgICAgYnIubGluazIodGFibGUsIGl0ZW0uaWQsIGdyYXBoLCBkb2MuaWQpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGJyLmFkZCh0YWJsZSwgaXRlbSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBjbGllbnQuYmF0Y2goYnIubXV0YXRpb25SZXF1ZXN0cykuY2F0Y2goZSA9PiB7XHJcbiAgICAgIGlmIChvcHRpbWlzdGljKSB0aGlzLm1lbS5kZWxldGUoaXRlbXMubWFwKGl0ZW0gPT4gaXRlbS5pZCkpO1xyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7XHJcbiAgICB9KVxyXG4gICAgdGhpcy5yZWdlbmVyYXRlQ2FjaGVCdXN0KCk7XHJcbiAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4gaXRlbS4kZXRhZyA9IHJlcy5uZXdFdGFnc1tpdGVtLmlkXSk7XHJcbiAgICBpZiAob3B0aW1pc3RpYylcclxuICAgICAgYXdhaXQgdGhpcy5tZW0udXBkYXRlKGl0ZW1zKTsgLy8gVXBkYXRlIHdpdGggbmV3ICRldGFnLlxyXG4gICAgZWxzZVxyXG4gICAgICBhd2FpdCB0aGlzLm1lbS5pbnNlcnQoaXRlbXMpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGVsZXRlIChpZHM6IHN0cmluZ1tdKSB7XHJcbiAgICBjb25zdCB7Z2V0Q2xpZW50LCBvcHRpbWlzdGljLCB0YWJsZX0gPSB0aGlzLm9wdGlvbnM7XHJcbiAgICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnQoKTtcclxuICAgIGlmIChvcHRpbWlzdGljKSBhd2FpdCB0aGlzLm1lbS51cGRhdGUoaWRzXHJcbiAgICAgIC5tYXAoaWQgPT4gdGhpcy5tZW0uaXRlbXMuZmluZCh4ID0+IHguaWQgPT09IGlkKSlcclxuICAgICAgLmZpbHRlcih4ID0+IHgpXHJcbiAgICAgIC5tYXAoeCA9PiBPYmplY3QuYXNzaWduKHt9LCB4LCB7JG1ldGE6ICdkZWxldGluZyd9KSkpO1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgY2xpZW50LmRvIChiciA9PiBpZHMuZm9yRWFjaChpZCA9PiBici5kZWxldGUodGFibGUsIGlkKSkpLmNhdGNoKGFzeW5jIGUgPT4ge1xyXG4gICAgICBpZiAob3B0aW1pc3RpYykge1xyXG4gICAgICAgIGF3YWl0IHRoaXMubWVtLnVwZGF0ZShpZHNcclxuICAgICAgICAgIC5tYXAoaWQgPT4gdGhpcy5tZW0uaXRlbXMuZmluZCh4ID0+IHguaWQgPT09IGlkKSlcclxuICAgICAgICAgIC5maWx0ZXIoeCA9PiB4KVxyXG4gICAgICAgICAgLm1hcCh4ID0+IHtcclxuICAgICAgICAgICAgeCA9IE9iamVjdC5hc3NpZ24oe30sIHgpO1xyXG4gICAgICAgICAgICBkZWxldGUgeC4kbWV0YTtcclxuICAgICAgICAgICAgcmV0dXJuIHg7XHJcbiAgICAgICAgICB9KSk7XHJcbiAgICAgIH1cclxuICAgICAgdGhyb3cgZTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5yZWdlbmVyYXRlQ2FjaGVCdXN0KCk7XHJcbiAgICBhd2FpdCB0aGlzLm1lbS5kZWxldGUoaWRzKTtcclxuICB9XHJcbn1cclxuIiwiXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFJlcG9Db21tdW5pY2F0b3I8VCBleHRlbmRzIHtpZDogc3RyaW5nfT4ge1xyXG4gIHF1ZXJ5KCk6IFByb21pc2U8VFtdPjtcclxufVxyXG5cclxudHlwZSBTdWJzY3JpYmVyPFQ+ID0gKGl0ZW1zOlRbXSwgZXJyb3I6IHVuZGVmaW5lZCB8IEVycm9yKSA9PiBhbnk7XHJcblxyXG5leHBvcnQgY2xhc3MgUmVwbzxUIGV4dGVuZHMge2lkOiBzdHJpbmd9PiB7XHJcbiAgbGlzdFByb21pc2U6IFByb21pc2U8dm9pZD47XHJcbiAgaXRlbXM6IFRbXTtcclxuICBlcnJvcj86IEVycm9yO1xyXG4gIHN1YnNjcmliZXJzOiBTdWJzY3JpYmVyPFQ+W107XHJcblxyXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBjb21tOiBSZXBvQ29tbXVuaWNhdG9yPFQ+KSB7XHJcbiAgICB0aGlzLmxpc3RQcm9taXNlID0gbnVsbDtcclxuICAgIHRoaXMuaXRlbXMgPSBudWxsO1xyXG4gICAgdGhpcy5zdWJzY3JpYmVycyA9IFtdO1xyXG4gIH1cclxuXHJcbiAgc3Vic2NyaWJlKHN1YnNjcmliZXI6IFN1YnNjcmliZXI8VD4pIHtcclxuICAgIHJldHVybiB0aGlzLmVuc3VyZUhhc0RhdGEoKS50aGVuKCgpPT57XHJcbiAgICAgIHN1YnNjcmliZXIodGhpcy5pdGVtcywgdGhpcy5lcnJvcik7XHJcbiAgICAgIHRoaXMuc3Vic2NyaWJlcnMucHVzaChzdWJzY3JpYmVyKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdW5zdWJzY3JpYmUoc3Vic2NyaWJlcjogU3Vic2NyaWJlcjxUPikge1xyXG4gICAgdGhpcy5zdWJzY3JpYmVycyA9IHRoaXMuc3Vic2NyaWJlcnMuZmlsdGVyIChzID0+IHMgIT09IHN1YnNjcmliZXIpO1xyXG4gIH1cclxuXHJcbiAgbm90aWZ5U3Vic2NyaWJlcnMoKSB7XHJcbiAgICB0aGlzLnN1YnNjcmliZXJzLmZvckVhY2gocyA9PiBzKHRoaXMuaXRlbXMsIHRoaXMuZXJyb3IpKTtcclxuICB9XHJcblxyXG4gIGVuc3VyZUhhc0RhdGEoKSB7XHJcbiAgICBpZiAoIXRoaXMubGlzdFByb21pc2UpIHRoaXMucmVmcmVzaEZyb21TZXJ2ZXIoKTtcclxuICAgIHJldHVybiB0aGlzLmxpc3RQcm9taXNlO1xyXG4gIH1cclxuXHJcbiAgcmVmcmVzaEZyb21TZXJ2ZXIoKSB7XHJcbiAgICB0aGlzLmxpc3RQcm9taXNlID0gdGhpcy5jb21tLnF1ZXJ5KCkudGhlbihpdGVtcyA9PiB7XHJcbiAgICAgIHRoaXMuaXRlbXMgPSBpdGVtcztcclxuICAgICAgdGhpcy5lcnJvciA9IG51bGw7XHJcbiAgICAgIHRoaXMubm90aWZ5U3Vic2NyaWJlcnMoKTtcclxuICAgIH0pLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xyXG4gICAgICB0aGlzLml0ZW1zID0gdGhpcy5pdGVtcyB8fCBbXTtcclxuICAgICAgdGhpcy5ub3RpZnlTdWJzY3JpYmVycygpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5saXN0UHJvbWlzZTtcclxuICB9XHJcbiAgXHJcbiAgYXN5bmMgdXBkYXRlKGl0ZW06IFQgfCBUW10pIHtcclxuICAgIGF3YWl0IHRoaXMuZW5zdXJlSGFzRGF0YSgpO1xyXG4gICAgY29uc3QgdXBkYXRlZEl0ZW1zID0gQXJyYXkuaXNBcnJheShpdGVtKSA/IGl0ZW0gOiBbaXRlbV07XHJcbiAgICB0aGlzLml0ZW1zID0gdGhpcy5pdGVtcy5tYXAoaXQgPT4ge1xyXG4gICAgICBjb25zdCB1cGRhdGVkSXRlbSA9IHVwZGF0ZWRJdGVtcy5maW5kKCh7aWR9KSA9PiBpdC5pZCA9PT0gaWQpO1xyXG4gICAgICByZXR1cm4gdXBkYXRlZEl0ZW0gP1xyXG4gICAgICAgIE9iamVjdC5hc3NpZ24oe30sIHVwZGF0ZWRJdGVtKSA6XHJcbiAgICAgICAgaXQ7XHJcbiAgICB9KTtcclxuICAgIHRoaXMubm90aWZ5U3Vic2NyaWJlcnMoKTtcclxuICB9XHJcblxyXG4gIGluc2VydChpdGVtOiBUIHwgVFtdKSB7XHJcbiAgICByZXR1cm4gdGhpcy5lbnN1cmVIYXNEYXRhKCkudGhlbigoKT0+e1xyXG4gICAgICB0aGlzLml0ZW1zID0gdGhpcy5pdGVtcy5jb25jYXQoaXRlbSk7XHJcbiAgICAgIHRoaXMubm90aWZ5U3Vic2NyaWJlcnMoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlKGlkOiBzdHJpbmcgfCBzdHJpbmdbXSkge1xyXG4gICAgY29uc3QgaWRzID0gQXJyYXkuaXNBcnJheShpZCkgPyBpZCA6IFtpZF07XHJcbiAgICByZXR1cm4gdGhpcy5lbnN1cmVIYXNEYXRhKCkudGhlbigoKT0+e1xyXG4gICAgICB0aGlzLml0ZW1zID0gdGhpcy5pdGVtcy5maWx0ZXIoaXQgPT4gIWlkcy5zb21lKGlkID0+IGl0LmlkID09PSBpZCkpO1xyXG4gICAgICB0aGlzLm5vdGlmeVN1YnNjcmliZXJzKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHtLZWRSZXBvfSBmcm9tICcuL2tlZC1yZXBvJztcclxuaW1wb3J0IHsgVXNlclRhc2ssIFVzZXJTdWJUYXNrIH0gZnJvbSAna2VkYmFja2VuZC9tb2RlbHMnO1xyXG5pbXBvcnQgZW52IGZyb20gJy4uL2dsb2JhbHMvS0VELmVudic7XHJcbmltcG9ydCB7IFdlZWtQbGFubmVyUGVyc2lzdGVkU3RhdGUgfSBmcm9tIFwiLi4vY29tcG9uZW50cy93ZWVrcGxhbm5lci93ZWVrcGxhbm5lci1wZXJzaXN0ZWQtc3RhdGVcIjtcclxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgeyBjcmVhdGVVVUlELCBEb2N1bWVudEFjY2VzcywgS2VkQmFja2VuZENsaWVudCB9IGZyb20gJ2tlZGJhY2tlbmQvY2xpZW50JztcclxuaW1wb3J0IHsgZ2V0QWRqdXN0ZWRXZWVrLCBLRURXZWVrIH0gZnJvbSAnLi4vdXRpbHMvd2Vla3V0aWwnO1xyXG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnLi4vY29udHJhY3RzL2tlZC1tb2RlbHMnO1xyXG5cclxuZXhwb3J0IGxldCB1c2VyVGFza3NSZXBvID0gZW52LnVzZXJUYXNrc1JlcG8gYXMgVXNlclRhc2tzUmVwbztcclxuXHJcbmV4cG9ydCBjbGFzcyBVc2VyVGFza3NSZXBvIGV4dGVuZHMgS2VkUmVwbzxVc2VyVGFzaz4ge1xyXG4gIHBlcnNpc3RlZFN0YXRlOiBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlIHwgbnVsbDtcclxuICBnZXRDdXJyZW50VXNlcjogKCk9PlVzZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGdldENsaWVudDogKCk9PktlZEJhY2tlbmRDbGllbnQsIGdldEN1cnJlbnRVc2VyOiAoKT0+VXNlcikgeyAgICBcclxuICAgIHN1cGVyKHtcclxuICAgICAgZ2V0Q2xpZW50LFxyXG4gICAgICBvcHRpbWlzdGljOiB0cnVlLFxyXG4gICAgICB0YWJsZTogXCJ1c2VydGFza3NcIixcclxuICAgICAgdXNlcjogZ2V0Q3VycmVudFVzZXIoKSA/IGdldEN1cnJlbnRVc2VyKCkubWFpbCA6IFwiXCIsXHJcbiAgICAgIGdldFF1ZXJ5T3B0aW9uczogYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gZ2V0Q3VycmVudFVzZXIoKTtcclxuICAgICAgICBjb25zdCB1c2VyRW1haWwgPSBjdXJyZW50VXNlciA/IGN1cnJlbnRVc2VyLm1haWwgOiBcIlwiO1xyXG4gICAgICAgIGlmICghdGhpcy5wZXJzaXN0ZWRTdGF0ZSlcclxuICAgICAgICAgIHRoaXMucGVyc2lzdGVkU3RhdGUgPSBhd2FpdCBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlLmxvYWQodXNlckVtYWlsKTtcclxuICAgICAgICBjb25zdCB7IHdlZWtEYXRlIH0gPSB0aGlzLnBlcnNpc3RlZFN0YXRlO1xyXG4gICAgICAgIGNvbnN0IHdlZWtOdW1iZXIgPSBtb21lbnQod2Vla0RhdGUpLndlZWsoKTtcclxuICAgICAgICBjb25zdCBrZWRXZWVrID0gS0VEV2Vlayhtb21lbnQod2Vla0RhdGUpLnllYXIoKSwgd2Vla051bWJlcik7XHJcbiAgICAgICAgLypjb25zdCBbZnJvbSwgdG9dID0gW21vbWVudCh3ZWVrRGF0ZSkuc3RhcnRPZignd2VlaycpLCBtb21lbnQod2Vla0RhdGUpLmVuZE9mKCd3ZWVrJyldXHJcbiAgICAgICAgICAubWFwKG0gPT4gbS50b0RhdGUoKS5nZXRUaW1lKCkpOyovXHJcbiAgICAgICAgXHJcbiAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBmcm9tOiBrZWRXZWVrLm5vdEJlZm9yZSxcclxuICAgICAgICAgICAgdG86IGtlZFdlZWsubm90QWZ0ZXIsXHJcbiAgICAgICAgICAgIHJvbGU6IFwiVVNFUlwiLFxyXG4gICAgICAgICAgICBpbmNsdWRlOiBbXCJ0YXNrXCIsIFwiY291cnNlXCJdLFxyXG4gICAgICAgICAgICBmbGFnczogW1wiaW5jbHVkZUlkc09ubHlcIl0sXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdGhpcy5wZXJzaXN0ZWRTdGF0ZSA9IG51bGw7XHJcbiAgICB0aGlzLmdldEN1cnJlbnRVc2VyID0gZ2V0Q3VycmVudFVzZXI7XHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGVQZXJzaXN0ZWRTdGF0ZShzdGF0ZUNoYW5nZXM6IFBhcnRpYWw8V2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZT4pIHtcclxuICAgIE9iamVjdC5hc3NpZ24odGhpcy5wZXJzaXN0ZWRTdGF0ZSwgc3RhdGVDaGFuZ2VzKTtcclxuICAgIGF3YWl0IHRoaXMucGVyc2lzdGVkU3RhdGUuc2F2ZSgpO1xyXG4gICAgdGhpcy5tZW0ubm90aWZ5U3Vic2NyaWJlcnMoKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNldFRhc2tEb25lU3RhdGUodXNlclRhc2s6IFVzZXJUYXNrLCBkb25lOiBib29sZWFuKSB7XHJcbiAgICBjb25zdCB7Z2V0Q2xpZW50LCBvcHRpbWlzdGljLCB0YWJsZX0gPSB0aGlzLm9wdGlvbnM7XHJcbiAgICBjb25zdCBjbGllbnQgPSBnZXRDbGllbnQoKTtcclxuICAgIGNvbnN0IG1vZGlmaWVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHVzZXJUYXNrLCB7ZG9uZX0pO1xyXG4gICAgaWYgKG9wdGltaXN0aWMpIGF3YWl0IHRoaXMubWVtLnVwZGF0ZShPYmplY3QuYXNzaWduKHt9LCBtb2RpZmllZEl0ZW0sIHskbWV0YTogJ3VwZGF0aW5nJ30pKTtcclxuICAgIC8vIE5vdyBtYWtlIHN1cmUgdG8gY2hhbmdlIHRoZSBzdGF0ZSBmb3Igb3RoZXIgd2Vla3MgYXMgd2VsbDpcclxuICAgIGNvbnN0IHNpbWlsYXJUYXNrcyA9IGF3YWl0IGNsaWVudC5saXN0PFVzZXJUYXNrPigndXNlcnRhc2tzJywge1xyXG4gICAgICBuYW1lOiB1c2VyVGFzay5uYW1lLFxyXG4gICAgICByb2xlOiBcIlVTRVJcIixcclxuICAgICAgaW5jbHVkZTogW1widGFza1wiLFwiY291cnNlXCJdLFxyXG4gICAgICBmbGFnczogW1wiaW5jbHVkZUlkc09ubHlcIl0sXHJcbiAgICAgIGZyb206IG1vbWVudCh0aGlzLnBlcnNpc3RlZFN0YXRlLndlZWtEYXRlKS5hZGQoLTMsICd3ZWVrcycpLnZhbHVlT2YoKSxcclxuICAgICAgdG86IG1vbWVudCh0aGlzLnBlcnNpc3RlZFN0YXRlLndlZWtEYXRlKS5hZGQoMywgJ3dlZWtzJykudmFsdWVPZigpXHJcbiAgICB9LCB7XHJcbiAgICAgIGNhY2hlOiAnbm8tY2FjaGUnXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGlkZW50aWNhbFRhc2tzID0gc2ltaWxhclRhc2tzLmZpbHRlcih0ID0+XHJcbiAgICAgIHQuY291cnNlTmFtZSA9PT0gdXNlclRhc2suY291cnNlTmFtZSAmJlxyXG4gICAgICB0LmxlYXJuaW5nR29hbCA9PT0gdXNlclRhc2subGVhcm5pbmdHb2FsICYmXHJcbiAgICAgICghdXNlclRhc2sudGFzayB8fCB0LnRhc2subWFwKHQ9PnQuaWQpLmpvaW4oJycpID09PSB1c2VyVGFzay50YXNrLm1hcCh0PT50LmlkKS5qb2luKCcnKSkgJiZcclxuICAgICAgKCF1c2VyVGFzay5jb3Vyc2UgfHwgdC5jb3Vyc2UubWFwKGM9PmMuaWQpLmpvaW4oJycpID09PSB1c2VyVGFzay5jb3Vyc2UubWFwKGM9PmMuaWQpLmpvaW4oJycpKSk7XHJcbiAgICBpZiAoaWRlbnRpY2FsVGFza3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIC8vIFdvcmthcm91bmQgZm9yIGlzc3VlIGluIFN1YmplY3RQbGFubmVyIG1pZ3JhdGlvbiAodXNlcnRhc2tzIHdpdGggbG9uZyBuYW1lcyBpcyBub3QgZm91bmQpXHJcbiAgICAgIGlkZW50aWNhbFRhc2tzLnB1c2godXNlclRhc2spXHJcbiAgICB9XHJcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShpZGVudGljYWxUYXNrcywgdCA9PiB0LmRvbmUgPSBkb25lKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNldFN1YlRhc2tEb25lU3RhdGUgKHVzZXJUYXNrOiBVc2VyVGFzaywgc3ViVGFza0lkOiBzdHJpbmcsIGRvbmU6IGJvb2xlYW4pIHtcclxuICAgIGNvbnN0IHtnZXRDbGllbnQsIG9wdGltaXN0aWMsIHRhYmxlfSA9IHRoaXMub3B0aW9ucztcclxuICAgIGNvbnN0IGNsaWVudCA9IGdldENsaWVudCgpO1xyXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoW3VzZXJUYXNrXSxcclxuICAgICAgdCA9PiB0LnN1YlRhc2tzICYmIHQuc3ViVGFza3MuZmlsdGVyKHN0ID0+IHN0LmlkID09PSBzdWJUYXNrSWQpXHJcbiAgICAgICAgLmZvckVhY2goc3QgPT4gc3QuZG9uZSA9IGRvbmUpKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHNldFdlZWtQbGFubmVyQm94T3Blbihjb3Vyc2VOYW1lOiBzdHJpbmcsIGlzT3BlbjogYm9vbGVhbikge1xyXG4gICAgY29uc3Qgb3BlbkNvdXJzZXMgPSB7IC4uLnRoaXMucGVyc2lzdGVkU3RhdGUub3BlbkNvdXJzZXMgfTtcclxuICAgIGlmIChpc09wZW4pXHJcbiAgICAgIG9wZW5Db3Vyc2VzW2NvdXJzZU5hbWVdID0gdHJ1ZTtcclxuICAgIGVsc2VcclxuICAgICAgZGVsZXRlIG9wZW5Db3Vyc2VzW2NvdXJzZU5hbWVdO1xyXG4gICAgYXdhaXQgdGhpcy51cGRhdGVQZXJzaXN0ZWRTdGF0ZSh7b3BlbkNvdXJzZXN9KTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGNoYW5nZVdlZWsod2Vla0RhdGU6IERhdGUsIGtlZXBDdXJyZW50RGF0ZT86IGJvb2xlYW4pIHtcclxuICAgIGxldCBwZXJzaXN0ZWRTdGF0ZSA9IHRoaXMucGVyc2lzdGVkU3RhdGU7XHJcbiAgICBpZiAoIXBlcnNpc3RlZFN0YXRlKSB7XHJcbiAgICAgIHBlcnNpc3RlZFN0YXRlID0gYXdhaXQgV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZS5sb2FkKHRoaXMub3B0aW9ucy51c2VyKTtcclxuICAgIH1cclxuICAgIGNvbnN0IG5ld1BlcnNpc3RlZCA9IG5ldyBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlKHBlcnNpc3RlZFN0YXRlKTtcclxuICAgIG5ld1BlcnNpc3RlZC53ZWVrRGF0ZSA9IGtlZXBDdXJyZW50RGF0ZSA/IG1vbWVudCh3ZWVrRGF0ZSkudmFsdWVPZigpIDogbW9tZW50KHdlZWtEYXRlKS5zdGFydE9mKCd3ZWVrJykudmFsdWVPZigpO1xyXG4gICAgbmV3UGVyc2lzdGVkLnNhdmUoKTtcclxuICAgIHRoaXMucGVyc2lzdGVkU3RhdGUgPSBuZXdQZXJzaXN0ZWQ7XHJcbiAgICBhd2FpdCB0aGlzLm1lbS5yZWZyZXNoRnJvbVNlcnZlcigpO1xyXG4gIH1cclxuXHJcbiAgc3Vic2NyaWJlKHN1YnNjcmliZXI6ICh1c2VyVGFza3M6IFVzZXJUYXNrW10sIHBlcnNpc3RlZFN0YXRlOiBXZWVrUGxhbm5lclBlcnNpc3RlZFN0YXRlLCB3ZWVrVGV4dHNVVDogVXNlclRhc2spID0+IHZvaWQpIHtcclxuICAgIGNvbnN0IHByb3h5U3Vic2NyaWJlciA9ICh1c2VyVGFza3M6IFVzZXJUYXNrW10pID0+IHtcclxuICAgICAgc3Vic2NyaWJlcihcclxuICAgICAgICB1c2VyVGFza3MuZmlsdGVyKHV0ID0+ICF1dC53ZWVrVGV4dHMpLFxyXG4gICAgICAgIHRoaXMucGVyc2lzdGVkU3RhdGUsXHJcbiAgICAgICAgdXNlclRhc2tzLmZpbHRlcih1dCA9PiAhIXV0LndlZWtUZXh0cylbMF0gfHwge1xyXG4gICAgICAgICAgaWQ6IGNyZWF0ZVVVSUQoKSxcclxuICAgICAgICAgIGRhdGVUaW1lOiB0aGlzLnBlcnNpc3RlZFN0YXRlLndlZWtEYXRlLFxyXG4gICAgICAgICAgd2Vla1RleHRzOiB7YXNzZXNzbWVudDonJywgc3RyYXRlZ3k6Jyd9LFxyXG4gICAgICAgICAgYWNsOiBbXHJcbiAgICAgICAgICAgIC8vIERlZmF1bHQgQUNMOiBMZXQgdXNlciBzZWxmIGhhdmUgZnVsbCBjb250cm9sIG92ZXIgdGhpcyBpdGVtOlxyXG4gICAgICAgICAgICBuZXcgRG9jdW1lbnRBY2Nlc3MoXCJlbWFpbFwiLCB0aGlzLmdldEN1cnJlbnRVc2VyKCkubWFpbCwgXCJTXCIpLFxyXG4gICAgICAgICAgICAvLyBBZGRpdGlvbmFsIEFDTDogTGV0IGVtcGxveWVlcyBvbiBzYW1lIHNjaG9vbCBoYXZlIHJlYWQgYWNjZXNzIHRvIGl0LlxyXG4gICAgICAgICAgICAvLyBUaGlzIGN1cnJlbnRseSBvbmx5IGFwcGxpZXMgdG8gdGFza3MgdGhhdCByZWZlciB0byBjb3Vyc2UgdGFza3MgKG5vdCBvd24gdGFza3MhKVxyXG4gICAgICAgICAgICBuZXcgRG9jdW1lbnRBY2Nlc3MoXCJzY2hvb2xSb2xlXCIsIGAke3RoaXMuZ2V0Q3VycmVudFVzZXIoKS5zY2hvb2x9L0VNUExPWUVFYCwgXCJSXCIpXHJcbiAgICAgICAgICBdLm1hcChhYyA9PiBhYy50b1N0cmluZygpKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHByb3h5U3Vic2NyaWJlcltcInN1YnNjcmliZXJcIl0gPSBzdWJzY3JpYmVyO1xyXG4gICAgdGhpcy5tZW0uc3Vic2NyaWJlKHByb3h5U3Vic2NyaWJlcik7XHJcbiAgfVxyXG5cclxuICB1bnN1YnNjcmliZShzdWJzY3JpYmVyOiAodXNlclRhc2tzOiBVc2VyVGFza1tdLCBwZXJzaXN0ZWRTdGF0ZTogV2Vla1BsYW5uZXJQZXJzaXN0ZWRTdGF0ZSwgd2Vla1RleHRzVVQ6IFVzZXJUYXNrKSA9PiB2b2lkKSB7XHJcbiAgICB0aGlzLm1lbS5zdWJzY3JpYmVycyA9IHRoaXMubWVtLnN1YnNjcmliZXJzLmZpbHRlciAocyA9PiBzW1wic3Vic2NyaWJlclwiXSAhPT0gc3Vic2NyaWJlcik7XHJcbiAgfVxyXG4gIFxyXG59XHJcblxyXG5pZiAoIXVzZXJUYXNrc1JlcG8pIHtcclxuICB1c2VyVGFza3NSZXBvID0gZW52LnVzZXJUYXNrc1JlcG8gPSBuZXcgVXNlclRhc2tzUmVwbyhcclxuICAgICgpPT5lbnYua2VkQmFja2VuZENsaWVudCxcclxuICAgICgpPT5lbnYuY3VycmVudFVzZXIpO1xyXG4gIHVzZXJUYXNrc1JlcG8ubWVtLmVuc3VyZUhhc0RhdGEoKTtcclxufVxyXG4iLCJpbXBvcnQge1VzZXJ9IGZyb20gJy4uLy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcclxuXHJcbmV4cG9ydCBjb25zdCB1c2VycyA6IFVzZXJbXSA9IFt7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJBZG1pbmlzdHJhdMO2clwiLFxyXG4gICAgbWFpbDogXCJ2ZW1lbmRvQGtlZHNjaG9vbHMuY29tXCIsXHJcbiAgICByb2xlczogWydBRE1JTicsJ0VNUExPWUVFJ10sXHJcbiAgICBzY2hvb2w6ICdLRUQnLFxyXG4gICAgdXNlcm5hbWU6IFwiYWRtaW5cIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcIkRhdmlkXCIsXHJcbiAgICBtYWlsOiBcImRhdmlkLmZhaGxhbmRlckB2ZW1lbmRvLnNlXCIsXHJcbiAgICByb2xlczogWydBRE1JTicsJ0VNUExPWUVFJ10sXHJcbiAgICBzY2hvb2w6ICdLRUQnLFxyXG4gICAgdXNlcm5hbWU6IFwiZGF2aWRcIlxyXG59LFxyXG57XHJcbiAgICBkaXNwbGF5TmFtZTogXCJBbmRyZWlcIixcclxuICAgIG1haWw6IFwiYW5kcmVpLnNwYXRhcmVsdUB2ZW1lbmRvLnNlXCIsXHJcbiAgICByb2xlczogWydBRE1JTicsJ0VNUExPWUVFJywnU1RVREVOVCddLFxyXG4gICAgc2Nob29sOiAnS0VEJyxcclxuICAgIHVzZXJuYW1lOiBcImFuZHJlaVwiXHJcbn0se1xyXG4gICAgZGlzcGxheU5hbWU6IFwiQ2FybCBIb2xtYmVyZ1wiLFxyXG4gICAgbWFpbDogXCJjYXJsLmhvbG1iZXJnQGt1bnNrYXBzZ3ltbmFzaWV0LnNlXCIsXHJcbiAgICByb2xlczogWydBRE1JTicsJ0VNUExPWUVFJ10sXHJcbiAgICBzY2hvb2w6ICdOb3Jya8O2cGluZycsXHJcbiAgICB1c2VybmFtZTogXCJjYXJsLmhvbG1iZXJnQGt1bnNrYXBzZ3ltbmFzaWV0LnNlXCJcclxufSx7IFxyXG4gICAgZGlzcGxheU5hbWU6IFwiQ2FybFwiLFxyXG4gICAgbWFpbDogXCJjYXJsQGtlZHNjaG9vbHMuY29tXCIsXHJcbiAgICByb2xlczogWydBRE1JTicsJ0VNUExPWUVFJywnU1RVREVOVCddLFxyXG4gICAgc2Nob29sOiAnS0VEJyxcclxuICAgIHVzZXJuYW1lOiBcImNhcmxcIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcImRhdmlkLmZhaGxhbmRlckBrZWRzY2hvb2xzLmNvbVwiLFxyXG4gICAgbWFpbDogXCJkYXZpZC5mYWhsYW5kZXJAa2Vkc2Nob29scy5jb21cIixcclxuICAgIHJvbGVzOiBbXCJBRE1JTlwiLCBcIkVNUExPWUVFXCIsIFwiU1RVREVOVFwiXSxcclxuICAgIHNjaG9vbDogXCJLRURcIixcclxuICAgIHVzZXJuYW1lOiBcImRhdmlkLmZhaGxhbmRlckBrZWRzY2hvb2xzLmNvbVwiXHJcbn0se1xyXG4gICAgZGlzcGxheU5hbWU6IFwiVGVhY2hlciAxXCIsXHJcbiAgICBtYWlsOiBcInRlYWNoZXIxLmNsYXNzcm9vbUBrZWRzY2hvb2xzLmNvbVwiLFxyXG4gICAgcm9sZXM6IFsnRU1QTE9ZRUUnXSxcclxuICAgIHNjaG9vbDogJ0tFRCcsXHJcbiAgICB1c2VybmFtZTogXCJ0ZWFjaGVyMS5jbGFzc3Jvb21Aa2Vkc2Nob29scy5jb21cIlxyXG59LHsgXHJcbiAgICBkaXNwbGF5TmFtZTogXCJUZXN0LUxpdmUtRWxldjFcIixcclxuICAgIG1haWw6IFwidWJ3Njc1N0BlZHUua3Vuc2thcHNneW1uYXNpZXQuc2VcIixcclxuICAgIHJvbGVzOiBbJ1NUVURFTlQnXSxcclxuICAgIHNjaG9vbDogJ1VwcHNhbGEnLFxyXG4gICAgdXNlcm5hbWU6IFwidWJ3Njc1N0BlZHUua3Vuc2thcHNneW1uYXNpZXQuc2VcIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcIlRlc3QtTGl2ZS1FbGV2MlwiLFxyXG4gICAgbWFpbDogXCJ1bXM0MzAyQGVkdS5rdW5za2Fwc2d5bW5hc2lldC5zZVwiLFxyXG4gICAgcm9sZXM6IFsnU1RVREVOVCddLFxyXG4gICAgc2Nob29sOiAnVXBwc2FsYScsXHJcbiAgICB1c2VybmFtZTogXCJ1bXM0MzAyQGVkdS5rdW5za2Fwc2d5bW5hc2lldC5zZVwiXHJcbn0se1xyXG4gICAgZGlzcGxheU5hbWU6IFwiVGVzdC1MaXZlLUVsZXYzXCIsXHJcbiAgICBtYWlsOiBcInVoaDM0NjBAZWR1Lmt1bnNrYXBzZ3ltbmFzaWV0LnNlXCIsXHJcbiAgICByb2xlczogWydTVFVERU5UJ10sXHJcbiAgICBzY2hvb2w6ICdVcHBzYWxhJyxcclxuICAgIHVzZXJuYW1lOiBcInVoaDM0NjBAZWR1Lmt1bnNrYXBzZ3ltbmFzaWV0LnNlXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJUZXN0LUxpdmUtRWxldjQoZmVsIGdvYWxzIGlzc3VlKVwiLFxyXG4gICAgbWFpbDogXCJ1bXQ2ODI2QGVkdS5rdW5za2Fwc3Nrb2xhbi5zZVwiLFxyXG4gICAgcm9sZXM6IFtcIlNUVURFTlRcIl0sXHJcbiAgICBzY2hvb2w6IFwiVXBwc2FsYVwiLFxyXG4gICAgdXNlcm5hbWU6IFwidW10NjgyNkBlZHUua3Vuc2thcHNza29sYW4uc2VcIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcIlRlc3QtTGl2ZS1FbGV2NShmdXR1cmUgYWJpbGl0aWVzKVwiLFxyXG4gICAgbWFpbDogXCJ1amczODMzQGVkdS5rdW5za2Fwc3Nrb2xhbi5zZVwiLFxyXG4gICAgcm9sZXM6IFtcIlNUVURFTlRcIl0sXHJcbiAgICBzY2hvb2w6IFwiVXBwc2FsYVwiLFxyXG4gICAgdXNlcm5hbWU6IFwidWpnMzgzM0BlZHUua3Vuc2thcHNza29sYW4uc2VcIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcIlRlc3QtTGl2ZS1FbGV2NihmdXR1cmUgYWJpbGl0aWVzKVwiLFxyXG4gICAgbWFpbDogXCJ1anQxMzYzQGVkdS5rdW5za2Fwc3Nrb2xhbi5zZVwiLFxyXG4gICAgcm9sZXM6IFtcIlNUVURFTlRcIl0sXHJcbiAgICBzY2hvb2w6IFwiVXBwc2FsYVwiLFxyXG4gICAgdXNlcm5hbWU6IFwidWp0MTM2M0BlZHUua3Vuc2thcHNza29sYW4uc2VcIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcIlRlc3QtTGl2ZS1Mw6RyYXJlMVwiLFxyXG4gICAgbWFpbDogXCJyaWNrYXJkLmFsYmVydHNzb25Aa3Vuc2thcHNneW1uYXNpZXQuc2VcIixcclxuICAgIHJvbGVzOiBbJ0VNUExPWUVFJ10sXHJcbiAgICBzY2hvb2w6ICdVcHBzYWxhJyxcclxuICAgIHVzZXJuYW1lOiBcInJpY2thcmQuYWxiZXJ0c3NvbkBrdW5za2Fwc2d5bW5hc2lldC5zZVwiXHJcbn0se1xyXG4gICAgZGlzcGxheU5hbWU6IFwiRURTVGVzdFVzZXJHeW1uYXNpdW1cIixcclxuICAgIG1haWw6IFwidWhoMzIwMEBlZHUua3Vuc2thcHNneW1uYXNpZXQuc2VcIixcclxuICAgIC8vbWFpbDogXCJVSEgzMjAwQEVEVS5LVU5TS0FQU0dZTU5BU0lFVC5TRVwiLFxyXG4gICAgcm9sZXM6IFtcIlNUVURFTlRcIl0sXHJcbiAgICB1c2VybmFtZTogXCJFRFNUZXN0VXNlcjFcIixcclxuICAgIHNjaG9vbDogXCJLRURcIixcclxuICAgIHNjaG9vbFR5cGU6IFwiR3ltbmFzaXVtXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJ2ZW1lbmRvLmVsZXZAa2Vkc2Nob29scy5jb21cIixcclxuICAgIG1haWw6IFwidmVtZW5kby5lbGV2QGtlZHNjaG9vbHMuY29tXCIsXHJcbiAgICByb2xlczogW1wiU1RVREVOVFwiXSxcclxuICAgIHVzZXJuYW1lOiBcInZlbWVuZG8uZWxldkBrZWRzY2hvb2xzLmNvbVwiLFxyXG4gICAgc2Nob29sOiBcIktFRFwiLFxyXG4gICAgc2Nob29sVHlwZTogXCJHeW1uYXNpdW1cIlxyXG59LHtcclxuICAgIGRpc3BsYXlOYW1lOiBcIk1lZGFyYmV0YXJlIE5hY2thXCIsXHJcbiAgICBtYWlsOiBcIm1lZGFyYmV0YXJlLm5hY2thQGt1bnNrYXBzc2tvbGFuLnNlXCIsXHJcbiAgICByb2xlczogW1wiRU1QTE9ZRUVcIl0sXHJcbiAgICB1c2VybmFtZTogXCJtZWRhcmJldGFyZS5uYWNrYS9LU1wiLFxyXG4gICAgc2Nob29sOiBcIk5hY2thXCIsXHJcbiAgICBzY2hvb2xUeXBlOiBcIkdydW5kc2tvbG9yXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJNZWRhcmJldGFyZSBHbG9iZW5cIixcclxuICAgIG1haWw6IFwibWVkYXJiZXRhcmUuZ2xvYmVuQGt1bnNrYXBzZ3ltbmFzaWV0LnNlXCIsXHJcbiAgICByb2xlczogW1wiRU1QTE9ZRUVcIl0sXHJcbiAgICB1c2VybmFtZTogXCJtZWRhcmJldGFyZS5nbG9iZW4vS1NcIixcclxuICAgIHNjaG9vbDogXCJHbG9iZW5cIixcclxuICAgIHNjaG9vbFR5cGU6IFwiR3ltbmFzaXVtXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJFbGV2IEdsb2JlblwiLFxyXG4gICAgbWFpbDogXCJlbGV2Lmdsb2JlbkBlZHUua3Vuc2thcHNneW1uYXNpZXQuc2VcIixcclxuICAgIHNjaG9vbEdyYWRlOiAyLFxyXG4gICAgcm9sZXM6IFsnU1RVREVOVCddLFxyXG4gICAgdXNlcm5hbWU6IFwiZWxldi5nbG9iZW5cIixcclxuICAgIHNjaG9vbDogXCJHbG9iZW5cIixcclxuICAgIHNjaG9vbFR5cGU6IFwiR3ltbmFzaXVtXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJFbGV2IEJvcsOlc1wiLFxyXG4gICAgbWFpbDogXCJlbGV2LmJvcmFzQGVkdS5rdW5za2Fwc3Nrb2xhbi5zZVwiLFxyXG4gICAgc2Nob29sR3JhZGU6IDcsXHJcbiAgICByb2xlczogWydTVFVERU5UJ10sXHJcbiAgICB1c2VybmFtZTogXCJlbGV2LmJvcmFzXCIsXHJcbiAgICBzY2hvb2w6IFwiQm9yw6VzXCIsXHJcbiAgICBzY2hvb2xUeXBlOiBcIkdydW5kc2tvbG9yXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJFbGV2IEJvcmzDpG5nZVwiLFxyXG4gICAgbWFpbDogXCJlbGV2LmJvcmxhbmdlQGVkdS5rdW5za2Fwc3Nrb2xhbi5zZVwiLFxyXG4gICAgc2Nob29sR3JhZGU6IDksXHJcbiAgICByb2xlczogWydTVFVERU5UJ10sXHJcbiAgICB1c2VybmFtZTogJ2VsZXYuYm9ybGFuZ2UvS1MnLFxyXG4gICAgc2Nob29sOiAnQm9ybMOkbmdlJyxcclxuICAgIHNjaG9vbFR5cGU6IFwiR3ltbmFzaXVtXCJcclxufSx7XHJcbiAgICBkaXNwbGF5TmFtZTogXCJSb2xsLWzDtnNcIixcclxuICAgIG1haWw6IFwibm9uZUBrdW5za2Fwc3Nrb2xhbi5zZVwiLFxyXG4gICAgdXNlcm5hbWU6IFwibm9uZVwiLFxyXG4gICAgcm9sZXM6IFtdXHJcbn1dO1xyXG5cclxuIiwiaW1wb3J0IGVudiBmcm9tICcuLi9nbG9iYWxzL0tFRC5lbnYnO1xyXG5pbXBvcnQgeyB1c2VycyB9IGZyb20gJy4vZGF0YS91c2Vycyc7XHJcbmltcG9ydCB7IHBhcnNlUXVlcnlTdHJpbmcgfSBmcm9tICcuLi91dGlscy9xdWVyeS1zdHJpbmcnO1xyXG5cclxuY29uc3QgdXNlcm5hbWUgPSBwYXJzZVF1ZXJ5U3RyaW5nIChsb2NhdGlvbi5zZWFyY2gpLnVzZXI7XHJcbmlmICh1c2VybmFtZSkge1xyXG4gIGNvbnN0IHVzZXIgPSB1c2Vycy5maW5kKHUgPT4gdS51c2VybmFtZSA9PT0gdXNlcm5hbWUpO1xyXG4gIGlmICh1c2VyKSB7XHJcbiAgICBlbnYuY3VycmVudFVzZXIgPSB1c2VyO1xyXG4gIH1cclxufVxyXG5cclxuY29uc3QgeyByb2xlLCBzY2hvb2wgfSA9IHBhcnNlUXVlcnlTdHJpbmcobG9jYXRpb24uc2VhcmNoKTtcclxuaWYgKGVudi5jdXJyZW50VXNlcikge1xyXG4gIGlmIChyb2xlKSB7XHJcbiAgICBlbnYuY3VycmVudFVzZXIucm9sZXMgPSByb2xlLnNwbGl0KCcsJyk7XHJcbiAgfVxyXG4gIGlmIChzY2hvb2wpIHtcclxuICAgIGVudi5jdXJyZW50VXNlci5zY2hvb2wgPSBzY2hvb2w7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBjZmcgZnJvbSAnLi4vZ2xvYmFscy9LRUQuY2ZnJztcclxuXHJcbmNmZy5LRURfTE9DQUxFID0gJ3N2JztcclxuY2ZnLktFRF9TQ0hPT0xfTE9DQUxFID0gJ3N2JztcclxuIiwiLy8gPEluaXRpYWxpemF0aW9uPlxyXG5pbXBvcnQgJy4vc2V0LWN1cnJlbnQtdXNlcic7IC8vIEVtdWxhdGUgc2VydmVyLXNpZGUgc2NyaXB0IHRvIHNldCBjdXJyZW50IHVzZXJcclxuaW1wb3J0ICcuLi9nbG9iYWwtc2V0dGVycy9zZXQtYWxsJzsgLy8gQ2xpZW50LXNpZGUgaW5pdGlhbGl6YXRpb25cclxuaW1wb3J0ICcuL3Rlc3QtY29uZmlnJztcclxuLy8gPC9Jbml0aWFsaXphdGlvbj5cclxuXHJcbmltcG9ydCBlbnYgZnJvbSAnLi4vZ2xvYmFscy9LRUQuZW52JztcclxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBDaG9vc2VVc2VyIH0gZnJvbSAnLi91dGlscy9jaG9vc2UtdXNlcic7XHJcbmltcG9ydCB7IGluY2x1ZGVDU1MgfSBmcm9tICcuL3V0aWxzL2luY2x1ZGUtY3NzJztcclxuaW1wb3J0IHsgaW5jbHVkZU9wdGlvbmFsQ1NTIH0gZnJvbSAnLi4vdXRpbHMvaW5jbHVkZS1vcHRpb25hbC1jc3MnO1xyXG5pbXBvcnQgeyBTdWJqZWN0UGxhbm5lclZpZXdlckFwcCB9IGZyb20gJy4uL2NvbXBvbmVudHMvY291cnNlLWJ1aWxkZXIta3Mvdmlld2VyLWVkaXRvcic7XHJcbmltcG9ydCB7IHNldHVwSW50bCB9IGZyb20gJy4uL2NvbXBvbmVudHMvdXRpbGl0eS1jb21wb25lbnRzL1NldHVwTGFuZ3VhZ2VJbnRsJztcclxuaW1wb3J0IHsgaW5qZWN0SW50bCwgSW5qZWN0ZWRJbnRsUHJvcHMgfSBmcm9tICdyZWFjdC1pbnRsJztcclxuaW1wb3J0IHsgTGFuZ3VhZ2VDb250ZXh0IH0gZnJvbSAnLi4vY29tcG9uZW50cy91dGlsaXR5LWNvbXBvbmVudHMvTGFuZ3VhZ2VDb250ZXh0JztcclxuXHJcbmluY2x1ZGVPcHRpb25hbENTUyh7XHJcbiAgdjE6IFtcclxuICAgICdjc3MvY291cnNldmlld2VyLmNzcycsXHJcbiAgICAnY3NzL2RpYWxvZy5jc3MnLFxyXG4gICAgJ2Nzcy9ncmlkLWNzcy1wYXRjaC5jc3MnXHJcbiAgXSxcclxuICBpbmNsdWRlQ1NTLFxyXG4gIHZlcnNpb246IDYsXHJcbiAgdmVyc2lvbkZvbGRlcjogJ2Nzcy9kZWx0YS1jc3MvY291cnNldmlld2VyJ1xyXG59KTtcclxuXHJcbmNsYXNzIF9BcHAgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SW5qZWN0ZWRJbnRsUHJvcHM+IHtcclxuICBjb25zdHJ1Y3Rvcihwcm9wczogYW55KSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICBpZiAoIWxvY2F0aW9uLmhhc2gpIGxvY2F0aW9uLmhhc2ggPSBcIiMvXCI7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7aW50bH0gPSB0aGlzLnByb3BzO1xyXG4gICAgcmV0dXJuIGVudi5jdXJyZW50VXNlciA/XHJcbiAgICA8TGFuZ3VhZ2VDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7aW50bH19PlxyXG4gICAgICA8U3ViamVjdFBsYW5uZXJWaWV3ZXJBcHAgLz4gXHJcbiAgICA8L0xhbmd1YWdlQ29udGV4dC5Qcm92aWRlcj4gOlxyXG4gICAgICA8Q2hvb3NlVXNlciAvPlxyXG4gIH1cclxufVxyXG5cclxuY29uc3QgQXBwID0gc2V0dXBJbnRsKGluamVjdEludGwoX0FwcCkpO1xyXG5leHBvcnQgZGVmYXVsdCBBcHA7XHJcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlcnMgfSBmcm9tICcuLi9kYXRhL3VzZXJzJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBDaG9vc2VVc2VyKCkge1xyXG4gIGxldCBzZWxlY3Q7XHJcbiAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwic3YtbGF5b3V0XCI+XHJcbiAgICA8aDI+VsOkbGogYW52w6RuZGFyZTwvaDI+XHJcbiAgICA8dGFibGUgY2xhc3NOYW1lPVwibG9naW4tdGFibGVcIj48dGhlYWQ+PHRyPlxyXG4gICAgICA8dGg+TmFtbjwvdGg+XHJcbiAgICAgIDx0aD5Sb2xsZXI8L3RoPlxyXG4gICAgICA8dGg+RS1wb3N0PC90aD5cclxuICAgICAgPHRoPlNrb2xhPC90aD5cclxuICAgIDwvdHI+PC90aGVhZD5cclxuICAgICAgPHRib2R5PlxyXG4gICAgICAgIHt1c2Vycy5tYXAoKHsgdXNlcm5hbWUsIGRpc3BsYXlOYW1lLCBtYWlsLCBzY2hvb2wsIHJvbGVzIH0pID0+XHJcbiAgICAgICAgICA8dHIga2V5PXttYWlsfSBvbkNsaWNrPXsoKSA9PiBsb2NhdGlvbi5zZWFyY2ggPSBgP3VzZXI9JHt1c2VybmFtZX1gfT5cclxuICAgICAgICAgICAgPHRkPntkaXNwbGF5TmFtZX08L3RkPlxyXG4gICAgICAgICAgICA8dGQgc3R5bGU9e3JvbGVzLmxlbmd0aCA9PT0gMCA/IHsgZm9udFN0eWxlOiAnaXRhbGljJyB9IDoge319Pntyb2xlcy5sZW5ndGggPT09IDAgPyBcInNha25hciByb2xsZXJcIiA6IHJvbGVzLmpvaW4oJywgJyl9PC90ZD5cclxuICAgICAgICAgICAgPHRkPnttYWlsfTwvdGQ+XHJcbiAgICAgICAgICAgIDx0ZCBzdHlsZT17c2Nob29sID8ge30gOiB7IGZvbnRTdHlsZTogJ2l0YWxpYycgfX0+e3NjaG9vbCB8fCBcInNha25hciBza29sYVwifTwvdGQ+XHJcbiAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICl9XHJcbiAgICAgIDwvdGJvZHk+PC90YWJsZT5cclxuICA8L2Rpdj5cclxufTtcclxuIiwiZnVuY3Rpb24gcmVzb2x2ZSh1cmk6IHN0cmluZykge1xyXG4gIHZhciBocmVmID0gbG9jYXRpb24ucHJvdG9jb2wgKyBcIi8vXCIgKyBsb2NhdGlvbi5ob3N0ICsgbG9jYXRpb24ucGF0aG5hbWU7XHJcbiAgdmFyIHBMYXN0U2xhc2ggPSBocmVmLmxhc3RJbmRleE9mKCcvJyk7XHJcbiAgcmV0dXJuIGhyZWYuc3Vic3RyKDAsIHBMYXN0U2xhc2ggKyAxKSArIHVyaTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluY2x1ZGVDU1MoY3NzRmlsZTogc3RyaW5nKSB7XHJcbiAgZG9jdW1lbnQud3JpdGUoJzxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiJytyZXNvbHZlKGNzc0ZpbGUpKydcIiAvPicpOyAgXHJcbn1cclxuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQge0x9IGZyb20gJy4vdXRpbHMnO1xyXG5pbXBvcnQge2RifSBmcm9tICcuLi9nbG9iYWxzL2RiJztcclxuaW1wb3J0IHsgS2VkQmFja2VuZFdyaXRlciB9IGZyb20gJ2tlZGJhY2tlbmQvcmVwbyc7XHJcbmltcG9ydCB7IFJlbW92ZUl0ZW0gfSBmcm9tICcuLi9jb21wb25lbnRzL2NvdXJzZS1idWlsZGVyL3N1Yi1jb21wb25lbnRzL3JlbW92ZS1pdGVtJztcclxuXHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU3RhdGUge1xyXG4gIGVycm9yczogRXJyb3JTdHJ1Y3RbXTtcclxuICBpbmZvczogc3RyaW5nW107XHJcbiAgLy9kYldyaXRlclJldHJ5YWJsZUVycm9yPzogRXJyb3I7XHJcbiAgZGJXcml0ZXJJc1NhdmluZz86IGJvb2xlYW47XHJcbiAgZGJXcml0ZXJJc0VkaXRlZD86IGJvb2xlYW47XHJcbn1cclxuXHJcbmludGVyZmFjZSBFcnJvclN0cnVjdCB7XHJcbiAgbWVzc2FnZTogc3RyaW5nO1xyXG4gIHJldHJ5YWJsZT86IGJvb2xlYW47XHJcbiAgZGV0YWlscz86IEVycm9yO1xyXG4gIHNob3dEZXRhaWxzPzogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEVycm9yU3VjY2Vzc0ZlZWRiYWNrIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLFN0YXRlPiB7XHJcbiAgY29uc3RydWN0b3IgKHByb3BzOiBQcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZT17XHJcbiAgICAgIGVycm9yczogW10sXHJcbiAgICAgIGluZm9zOiBbXVxyXG4gICAgfTtcclxuICAgIHRoaXMuX3VuaGFuZGxlZFJlamVjdGlvbiA9IHRoaXMuX3VuaGFuZGxlZFJlamVjdGlvbi5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5fZXJyb3IgPSB0aGlzLl9lcnJvci5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5fY3VzdG9tRXJyb3IgPSB0aGlzLl9jdXN0b21FcnJvci5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5fb25JbmZvID0gdGhpcy5fb25JbmZvLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9kYldyaXRlckVycm9yID0gdGhpcy5fZGJXcml0ZXJFcnJvci5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5fZGJXcml0ZXJTdGF0ZUNoYW5nZWQgPSB0aGlzLl9kYldyaXRlclN0YXRlQ2hhbmdlZC5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfYWRkRXJyb3IobWVzc2FnZTogc3RyaW5nLCBkZXRhaWxzPzogRXJyb3IsIHJldHJ5YWJsZT86IGJvb2xlYW4pIHtcclxuICAgIC8vY29uc29sZS5lcnJvcihtZXNzYWdlLCB7cmV0cnlhYmxlOiAhIXJldHJ5YWJsZSwgZGV0YWlsc30pO1xyXG4gICAgdGhpcy5zZXRTdGF0ZSgoe2Vycm9yc30pID0+IHtcclxuICAgICAgaWYgKGVycm9ycy5zb21lKGUgPT4gZS5tZXNzYWdlID09PSBtZXNzYWdlKSkgcmV0dXJuIHtlcnJvcnN9O1xyXG4gICAgICBpZiAoZXJyb3JzLmxlbmd0aCA+IDIpIGVycm9ycyA9IGVycm9ycy5zbGljZSgxKTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBlcnJvcnM6IGVycm9ycy5jb25jYXQoW3ttZXNzYWdlLCBkZXRhaWxzLCByZXRyeWFibGV9XSlcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG4gICAgLy8gUmVtb3ZlIG5vbi1yZXRyeWFibGUgZXJyb3JzIGFmdGVyIDMwIHNlY29uZHM6XHJcbiAgICBpZiAoIXJldHJ5YWJsZSkgc2V0VGltZW91dCgoKT0+e1xyXG4gICAgICB0aGlzLnNldFN0YXRlKCh7ZXJyb3JzfSkgPT4gKHtcclxuICAgICAgICBlcnJvcnM6IGVycm9ycy5maWx0ZXIoZSA9PiBlLm1lc3NhZ2UgIT09IG1lc3NhZ2UpXHJcbiAgICAgIH0pKTtcclxuICAgIH0sIDMwMDAwKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgX2FkZEluZm8obWVzc2FnZTogc3RyaW5nKSB7XHJcbiAgICBpZiAobWVzc2FnZSA9PT0gXCJcIikge1xyXG4gICAgICAvLyBUdXJuIG9mZiBjdXJyZW50IGluZm8gbWVzc2FnZXNcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7aW5mb3M6IFtdfSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuc2V0U3RhdGUoKHtpbmZvc30pID0+IHtcclxuICAgICAgaWYgKGluZm9zLnNvbWUoaW5mbyA9PiBpbmZvID09PSBtZXNzYWdlKSkgcmV0dXJuIHtpbmZvc307XHJcbiAgICAgIGlmIChpbmZvcy5sZW5ndGggPiAxKSBpbmZvcyA9IGluZm9zLnNsaWNlKDEpO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGluZm9zOiBbbWVzc2FnZV0gLy8gd2FzOiBpbmZvcy5jb25jYXQobWVzc2FnZSkuIEJ1dCBpdCBzdWNrcyFcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG4gICAgLy8gUmVtb3ZlIGluZm8gbWVzc2FnZSBhZnRlciAxMCBzZWNvbmRzOlxyXG4gICAgc2V0VGltZW91dCgoKT0+e1xyXG4gICAgICB0aGlzLnNldFN0YXRlKCh7aW5mb3N9KSA9PiAoe1xyXG4gICAgICAgIGluZm9zOiBpbmZvcy5maWx0ZXIobXNnID0+IG1zZyAhPT0gbWVzc2FnZSlcclxuICAgICAgfSkpO1xyXG4gICAgfSwgMTAwMDApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfZGJXcml0ZXJFcnJvciAoZXJyb3I6IEVycm9yLCByZXRyeWFibGU6IGJvb2xlYW4pIHtcclxuICAgIHRoaXMuX2FkZEVycm9yKGBEZXQgZ8OlciBpbnRlIGF0dCBzcGFyYSB0aWxsIHNlcnZlcm5gLCBlcnJvciwgcmV0cnlhYmxlKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgX2RiV3JpdGVyU3RhdGVDaGFuZ2VkICh7aXNFZGl0ZWQsIGlzU2F2aW5nfTogS2VkQmFja2VuZFdyaXRlcikge1xyXG4gICAgaWYgKCFpc0VkaXRlZCkge1xyXG4gICAgICAvLyBJZiBpc0VkaXRlZCBpcyBmYWxzZSwgYSBzdWNjZXNzZnVsIHdyaXRlIG11c3QgaGF2ZSBoYXBwZW5lZCwgYW5kXHJcbiAgICAgIC8vIHRoZXJlIGNhbm5vdCBiZSBhbnkgcmV0cnlhYmxlIGVycm9yIGFueW1vcmVcclxuICAgICAgdGhpcy5zZXRTdGF0ZSgoe2Vycm9yc30pID0+IHtcclxuICAgICAgICBlcnJvcnMgPSBlcnJvcnMuZmlsdGVyKGUgPT4gIWUucmV0cnlhYmxlKTtcclxuICAgICAgICByZXR1cm4ge2Vycm9yc307XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGRiV3JpdGVySXNFZGl0ZWQ6IGlzRWRpdGVkLFxyXG4gICAgICBkYldyaXRlcklzU2F2aW5nOiBpc1NhdmluZ1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnREaWRNb3VudCgpIHtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd1bmhhbmRsZWRyZWplY3Rpb24nLCB0aGlzLl91bmhhbmRsZWRSZWplY3Rpb24pO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgdGhpcy5fZXJyb3IpO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2N1c3RvbWVycm9yJywgdGhpcy5fY3VzdG9tRXJyb3IpO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2luZm8nLCB0aGlzLl9vbkluZm8pO1xyXG4gICAgZGIud3JpdGVyLm9uRXJyb3IodGhpcy5fZGJXcml0ZXJFcnJvcik7XHJcbiAgICBkYi53cml0ZXIub25TdGF0ZUNoYW5nZSh0aGlzLl9kYldyaXRlclN0YXRlQ2hhbmdlZCk7XHJcbiAgfVxyXG5cclxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd1bmhhbmRsZWRyZWplY3Rpb24nLCB0aGlzLl91bmhhbmRsZWRSZWplY3Rpb24pO1xyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgdGhpcy5fZXJyb3IpO1xyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2N1c3RvbWVycm9yJywgdGhpcy5fY3VzdG9tRXJyb3IpO1xyXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2luZm8nLCB0aGlzLl9vbkluZm8pO1xyXG4gICAgZGIud3JpdGVyLm9mZih0aGlzLl9kYldyaXRlckVycm9yKTtcclxuICAgIGRiLndyaXRlci5vZmYodGhpcy5fZGJXcml0ZXJTdGF0ZUNoYW5nZWQpO1xyXG4gIH1cclxuXHJcbiAgX3VuaGFuZGxlZFJlamVjdGlvbiAoZXY6IEV2ZW50ICYge3JlYXNvbjogRXJyb3J9KSB7XHJcbiAgICB0aGlzLl9hZGRFcnJvcihgRXR0IG9rw6RudCBmZWwgaW50csOkZmZhZGUuLi5gLCBldi5yZWFzb24pO1xyXG4gIH1cclxuXHJcbiAgX2Vycm9yIChldjogRXZlbnQgJiB7ZXJyb3I6IEVycm9yfSkge1xyXG4gICAgdGhpcy5fYWRkRXJyb3IoZXYuZXJyb3IgPyBldi5lcnJvci5tZXNzYWdlIDogYEV0dCBva8OkbnQgZmVsIGludHLDpGZmYWRlLi4uYCwgZXYuZXJyb3IpO1xyXG4gIH1cclxuXHJcbiAgX2N1c3RvbUVycm9yIChldjogQ3VzdG9tRXZlbnQpIHtcclxuICAgIHRoaXMuX2FkZEVycm9yKGV2LmRldGFpbCk7XHJcbiAgfVxyXG5cclxuICBfb25JbmZvKGV2OiBDdXN0b21FdmVudCkge1xyXG4gICAgdGhpcy5fYWRkSW5mbyhldi5kZXRhaWwpO1xyXG4gIH0gXHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHtlcnJvcnMsIGluZm9zLCBkYldyaXRlcklzU2F2aW5nfSA9IHRoaXMuc3RhdGU7XHJcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJlcnJvci1zdWNjZXNzLWZlZWRiYWNrXCIgc3R5bGU9e3tcclxuICAgICAgcG9zaXRpb246IFwiZml4ZWRcIixcclxuICAgICAgbGVmdDogMCxcclxuICAgICAgdG9wOiAwLFxyXG4gICAgICB3aWR0aDogXCIxMDAlXCIsXHJcbiAgICAgIHBvaW50ZXJFdmVudHM6ICdub25lJ1xyXG4gICAgfX0+XHJcbiAgICAgIDxkaXYgc3R5bGU9e3tkaXNwbGF5OiAndGFibGUnLCBtYXJnaW46IFwiMCBhdXRvXCJ9fT5cclxuICAgICAgICB7ZXJyb3JzLmZpbHRlcihlID0+ICFlLnJldHJ5YWJsZSB8fCAhZGJXcml0ZXJJc1NhdmluZylcclxuICAgICAgICAubWFwKCh7bWVzc2FnZSwgZGV0YWlscywgcmV0cnlhYmxlLCBzaG93RGV0YWlsc30pID0+IChcclxuICAgICAgICAgIDxkaXYga2V5PXttZXNzYWdlfSBjbGFzc05hbWU9XCJlcnJvclwiPlxyXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPXt7ZmxvYXQ6J2xlZnQnfX0+e21lc3NhZ2V9PC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3twb2ludGVyRXZlbnRzOiAnYXV0byd9fT5cclxuICAgICAgICAgICAgICA8UmVtb3ZlSXRlbSBvbkNsaWNrPXsoKT0+dGhpcy5yZW1vdmVFcnJvcihtZXNzYWdlKX0gLz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIHtkZXRhaWxzIHx8IHJldHJ5YWJsZSA/IDxkaXYgc3R5bGU9e3twb2ludGVyRXZlbnRzOiAnYXV0byd9fT5cclxuICAgICAgICAgICAgICB7ZGV0YWlscyA/IDw+PGEgY2xhc3NOYW1lPVwiYnRuXCIgb25DbGljaz17KCk9PnRoaXMudG9nZ2xlRGV0YWlscyhtZXNzYWdlKX0+e3Nob3dEZXRhaWxzID8gXCJEw7ZsaiBkZXRhaWxlclwiIDogXCJWaXNhIGRldGFpbGplclwifTwvYT4mbmJzcDs8Lz4gOiB1bmRlZmluZWR9XHJcbiAgICAgICAgICAgICAge3Nob3dEZXRhaWxzID8gPHA+eycnK2RldGFpbHN9PC9wPjogPD4mbmJzcDs8Lz59XHJcbiAgICAgICAgICAgICAge3JldHJ5YWJsZSA/IDxhIGNsYXNzTmFtZT1cImJ0blwiIG9uQ2xpY2s9eygpPT50aGlzLnJldHJ5U2F2ZSgpfT5Gw7Zyc8O2ayBzcGFyYSBudTwvYT4gOiB1bmRlZmluZWR9XHJcbiAgICAgICAgICAgIDwvZGl2PjogdW5kZWZpbmVkfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgKSl9XHJcbiAgICAgICAge2luZm9zLm1hcChtZXNzYWdlID0+IFxyXG4gICAgICAgICAgPHAga2V5PXttZXNzYWdlfSBjbGFzc05hbWU9XCJpbmZvXCI+e21lc3NhZ2V9PC9wPlxyXG4gICAgICAgICl9XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgPC9kaXY+O1xyXG4gIH1cclxuICByZW1vdmVFcnJvcihtZXNzYWdlOiBzdHJpbmcpOiBhbnkge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSgoe2Vycm9yc30pID0+ICh7XHJcbiAgICAgIGVycm9yczogZXJyb3JzLmZpbHRlcihlID0+IGUubWVzc2FnZSAhPT0gbWVzc2FnZSlcclxuICAgIH0pKTtcclxuICB9XHJcblxyXG4gIHJldHJ5U2F2ZSgpIHtcclxuICAgIGRiLndyaXRlci5yZXRyeVNhdmUoKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZURldGFpbHMobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICB0aGlzLnNldFN0YXRlKCh7ZXJyb3JzfSkgPT4gKHtlcnJvcnM6IGVycm9ycy5tYXAoZXJyb3IgPT4gZXJyb3IubWVzc2FnZSA9PT0gbWVzc2FnZSA/XHJcbiAgICAgIHtcclxuICAgICAgICAuLi5lcnJvcixcclxuICAgICAgICBzaG93RGV0YWlsczogIWVycm9yLnNob3dEZXRhaWxzXHJcbiAgICAgIH0gOlxyXG4gICAgICBlcnJvcilcclxuICAgIH0pKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGZ1bmN0aW9uIGluY2x1ZGVPcHRpb25hbENTUyAoe1xyXG4gIHYxLFxyXG4gIHZlcnNpb25Gb2xkZXIsXHJcbiAgdmVyc2lvbixcclxuICBpbmNsdWRlQ1NTLFxyXG4gIE5PQ1NTXHJcbn06IHt2MT86IHN0cmluZ1tdLCB2ZXJzaW9uRm9sZGVyPzogc3RyaW5nLCB2ZXJzaW9uOiBudW1iZXIsIGluY2x1ZGVDU1M6IChmaWxlOiBzdHJpbmcpID0+IHZvaWQsIE5PQ1NTPzogc3RyaW5nfSkge1xyXG4gIGlmICghTk9DU1MpIHtcclxuICAgIGlmICh2MSkgdjEuZm9yRWFjaChjc3NGaWxlID0+IGluY2x1ZGVDU1MoY3NzRmlsZSkpO1xyXG4gIH1cclxuICBsZXQgY3NzVmVyID0gcGFyc2VJbnQoTk9DU1MpO1xyXG4gIGlmIChpc05hTihjc3NWZXIpKSBjc3NWZXIgPSAxO1xyXG4gIGZvciAobGV0IHZlciA9IGNzc1ZlciArIDE7IHZlciA8PSB2ZXJzaW9uOyArK3Zlcikge1xyXG4gICAgaW5jbHVkZUNTUyhgJHt2ZXJzaW9uRm9sZGVyfS92JHt2ZXJ9LmNzc2ApO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xyXG5pbXBvcnQgeyBjZmcgfSBmcm9tICcuLi9nbG9iYWxzL0tFRC5jZmcnO1xyXG5cclxuY29uc3QgSEVBUlRCRUFUX0lOVEVSVkFMID0gNSAqIDYwICogMTAwMDsgLy8gNSBtaW51dGVzLlxyXG5jb25zdCBIRUFSVEJFQVRfVVJMID0gY2ZnLktFRF9LRUVQX0FMSVZFX1VSTDtcclxuXHJcbmxldCBsYXN0QWN0aXZpdHkgPSBEYXRlLm5vdygpO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGtlZXBTZXNzaW9uQWxpdmUoKSB7XHJcbiAgc2V0SW50ZXJ2YWwob25UaW1lb3V0LCBIRUFSVEJFQVRfSU5URVJWQUwpO1xyXG4gIHNldFRpbWVvdXQoKCk9PiQoJ2JvZHknKVxyXG4gICAgLm1vdXNlbW92ZShvblVzZXJBY3RpdmUpXHJcbiAgICAua2V5cHJlc3Mob25Vc2VyQWN0aXZlKVxyXG4gICAgLnNjcm9sbChvblVzZXJBY3RpdmUpLCAxMDApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvblVzZXJBY3RpdmUoKSB7XHJcbiAgbGFzdEFjdGl2aXR5ID0gRGF0ZS5ub3coKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25UaW1lb3V0KCkge1xyXG4gIGNvbnN0IGluYWN0aXZpdHlUaW1lID0gRGF0ZS5ub3coKSAtIGxhc3RBY3Rpdml0eTtcclxuICBpZiAoaW5hY3Rpdml0eVRpbWUgPCBIRUFSVEJFQVRfSU5URVJWQUwpIHtcclxuICAgIGhlYXJ0YmVhdCgpO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gaGVhcnRiZWF0KCkge1xyXG4gIGNvbnNvbGUubG9nKGBTZW5kaW5nIGhlYXJ0YmVhdCByZXF1ZXN0IHRvICR7SEVBUlRCRUFUX1VSTH1gKTtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goSEVBUlRCRUFUX1VSTCwge1xyXG4gICAgICBjYWNoZTogJ25vLWNhY2hlJyxcclxuICAgICAgY3JlZGVudGlhbHM6ICdzYW1lLW9yaWdpbidcclxuICAgIH0pO1xyXG4gICAgY29uc29sZS5sb2coYFJlc3BvbnNlIGZyb20gJHtIRUFSVEJFQVRfVVJMfTogJHtyZXMuc3RhdHVzfSAke3Jlcy5zdGF0dXNUZXh0fWApO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS53YXJuKGBSZXF1ZXN0IHRvICR7SEVBUlRCRUFUX1VSTH0gZmFpbGVkOiAke2Vycn1gKTtcclxuICB9XHJcbn1cclxuIiwiY29uc3QgREVGQVVMVF9DQUNIRV9FWFBJUkFUSU9OID0gMzAgKiA2MCAqIDEwMDA7IC8vIDMwIG1pbnV0ZXMuXHJcblxyXG50eXBlIFByb21pc2VSZXR1cm5pbmdNZXRob2ROYW1lczxBUEk+ID0ge1xyXG4gIFtNRVRIT0QgaW4ga2V5b2YgQVBJXTogQVBJW01FVEhPRF0gZXh0ZW5kcyAoLi4uYXJnczogYW55W10pID0+IFByb21pc2U8YW55PiA/IE1FVEhPRCA6IG5ldmVyXHJcbn1cclxuXHJcbnR5cGUgQ29udmVydE1ldGhvZFRvU3VzcGVuc2U8Rj4gPSBGIGV4dGVuZHMgKC4uLmFyZ3M6IGluZmVyIEEpID0+IFByb21pc2U8aW5mZXIgUj4gP1xyXG4gICguLi5hcmdzOiBBKSA9PiBSIDpcclxuICBGO1xyXG5cclxuZXhwb3J0IHR5cGUgU3VzcGVuc2VCYXNlZEFQSTxBUEk+ID0ge1xyXG4gIFtNRVRIT0QgaW4ga2V5b2YgUHJvbWlzZVJldHVybmluZ01ldGhvZE5hbWVzPEFQST5dOiBDb252ZXJ0TWV0aG9kVG9TdXNwZW5zZTxBUElbTUVUSE9EXT5cclxufVxyXG5cclxudHlwZSBPcHRpb25zID0ge1xyXG4gIGlzQXBpTWV0aG9kPzogKHByb3A6IHN0cmluZyk9PmJvb2xlYW4sXHJcbiAgY2FjaGVFeHBpcmF0aW9uPzogbnVtYmVyXHJcbn1cclxuXHJcbmNvbnN0IGRlZmF1bHRPcHRpb25zOiBPcHRpb25zID0ge1xyXG4gIGlzQXBpTWV0aG9kOiBmID0+IHR5cGVvZiBmID09PSAnZnVuY3Rpb24nLFxyXG4gIGNhY2hlRXhwaXJhdGlvbjogREVGQVVMVF9DQUNIRV9FWFBJUkFUSU9OXHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFrZVN1c3BlbnNlQXBpPEFQST4oYXBpOiBBUEksIG9wdGlvbnMgPSBkZWZhdWx0T3B0aW9ucyk6IFN1c3BlbnNlQmFzZWRBUEk8QVBJPlxyXG57XHJcbiAgb3B0aW9ucyA9IHsuLi5kZWZhdWx0T3B0aW9ucywgLi4ub3B0aW9uc307XHJcbiAgY29uc3Qge2lzQXBpTWV0aG9kLCBjYWNoZUV4cGlyYXRpb259ID0gb3B0aW9ucztcclxuXHJcbiAgY29uc3QgcnY6IFN1c3BlbnNlQmFzZWRBUEk8QVBJPiA9IE9iamVjdC5jcmVhdGUoYXBpIGFzIGFueSkgYXMgU3VzcGVuc2VCYXNlZEFQSTxBUEk+O1xyXG4gIGNvbnN0IGNhY2hlOiB7W2tleTogc3RyaW5nXToge3RpbWVvdXQ6IG51bWJlciwgdmFsdWU/OiBhbnksIGVycm9yPzogYW55LCBwcm9taXNlPzogUHJvbWlzZTxhbnk+fX0gPSB7fTtcclxuXHJcbiAgLy8gV2FsayB0aGUgaW5zdGFuY2UgKyBwcm90b3R5cGUgY2hhaW4gdG8gZ2VuZXJhdGUgc3VzcGVuc2UgdmVyc2lvbiBvZiBlYWNoIHByb21pc2UgcmV0dXJuaW5nIG1ldGhvZFxyXG4gIGZvciAobGV0IHByb3RvID0gYXBpOyBwcm90byAmJiBwcm90byAhPT0gT2JqZWN0LnByb3RvdHlwZTsgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG8pKSB7XHJcbiAgICBzdXNwZW5kaWZ5KHByb3RvKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHN1c3BlbmRpZnkocHJvdG8pIHtcclxuICAgIE9iamVjdC5rZXlzKHByb3RvKS5mb3JFYWNoKHByb3AgPT4ge1xyXG4gICAgICBpZiAoIXJ2Lmhhc093blByb3BlcnR5KHByb3ApICYmIGlzQXBpTWV0aG9kKHByb3ApKSB7XHJcbiAgICAgICAgcnZbcHJvcF0gPSBmdW5jdGlvbiAoLi4uYXJncykge1xyXG4gICAgICAgICAgY29uc3Qga2V5ID0gSlNPTi5zdHJpbmdpZnkoW3Byb3AsIC4uLmFyZ3NdKTtcclxuICAgICAgICAgIGNvbnN0IGNhY2hlZEVudHJ5ID0gY2FjaGVba2V5XTtcclxuICAgICAgICAgIGlmIChjYWNoZWRFbnRyeSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGlmIChjYWNoZWRFbnRyeS5wcm9taXNlKSB0aHJvdyBjYWNoZWRFbnRyeS5wcm9taXNlO1xyXG4gICAgICAgICAgICBpZiAoY2FjaGVkRW50cnkuZXJyb3IpIHRocm93IGNhY2hlZEVudHJ5LmVycm9yO1xyXG4gICAgICAgICAgICBpZiAoY2FjaGVkRW50cnkudGltZW91dCA+IERhdGUubm93KCkpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gY2FjaGVkRW50cnkudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSBwcm90b1twcm9wXS5hcHBseShhcGksIGFyZ3MpLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgICBjYWNoZVtrZXldID0ge3RpbWVvdXQ6IERhdGUubm93KCkgKyBjYWNoZUV4cGlyYXRpb24sIHZhbHVlOiByZXN1bHR9O1xyXG4gICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgY2FjaGVba2V5XSA9IHt0aW1lb3V0OiBEYXRlLm5vdygpICsgY2FjaGVFeHBpcmF0aW9uLCBlcnJvcn07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjYWNoZVtrZXldID0ge3RpbWVvdXQ6IERhdGUubm93KCkgKyBjYWNoZUV4cGlyYXRpb24sIHByb21pc2V9O1xyXG4gICAgICAgICAgICB0aHJvdyBwcm9taXNlO1xyXG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yLnRoZW4pIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICBjYWNoZVtrZXldID0ge3RpbWVvdXQ6IERhdGUubm93KCkgKyBjYWNoZUV4cGlyYXRpb24sIGVycm9yfTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGFzIGFueTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gcnY7XHJcbn1cclxuIiwiXHJcbmV4cG9ydCBjbGFzcyBQZW5kaW5nSm9iIHtcclxuICBwcml2YXRlIHRpbWVvdXRJZCA9IG51bGw7XHJcbiAgcHJpdmF0ZSBjYW5jZWxsZWQgPSBmYWxzZTtcclxuICBwcml2YXRlIHBlbmRpbmcgPSBmYWxzZTtcclxuICBwcml2YXRlIGlzSm9iRXhlY3V0aW5nID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBqb2JDYWxsYmFjazogKCk9PlByb21pc2U8YW55PjtcclxuICBcclxuICBjb25zdHJ1Y3RvcihjYWxsYmFjazogKCk9PlByb21pc2U8YW55Pikge1xyXG4gICAgdGhpcy5qb2JDYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gIH1cclxuXHJcbiAgdHJpZ2dlckNoYW5nZSh0aHJvdHRsZTogbnVtYmVyKTogYW55IHtcclxuICAgIGlmICh0aGlzLmNhbmNlbGxlZCkgcmV0dXJuO1xyXG4gICAgdGhpcy5wZW5kaW5nID0gdHJ1ZTtcclxuICAgIGlmICh0aGlzLnRpbWVvdXRJZCAhPT0gbnVsbClcclxuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dElkKTtcclxuICAgIHRoaXMudGltZW91dElkID0gc2V0VGltZW91dCgoKT0+dGhpcy5sYXVuY2hKb2IoKSwgdGhyb3R0bGUpO1xyXG4gIH1cclxuXHJcbiAgc3RvcCgpIHtcclxuICAgIGlmICh0aGlzLnRpbWVvdXRJZCAhPT0gbnVsbClcclxuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dElkKTtcclxuICAgIHRoaXMudGltZW91dElkID0gbnVsbDtcclxuICAgIHRoaXMuY2FuY2VsbGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgbGF1bmNoSm9iKCkge1xyXG4gICAgaWYgKHRoaXMuY2FuY2VsbGVkKSByZXR1cm47XHJcbiAgICBpZiAoIXRoaXMucGVuZGluZykgcmV0dXJuO1xyXG4gICAgaWYgKHRoaXMuaXNKb2JFeGVjdXRpbmcpIHJldHVybjtcclxuICAgIHRoaXMudGltZW91dElkID0gbnVsbDtcclxuICAgIHRyeSB7XHJcbiAgICAgIHRoaXMuaXNKb2JFeGVjdXRpbmcgPSB0cnVlO1xyXG4gICAgICB0aGlzLnBlbmRpbmcgPSBmYWxzZTtcclxuICAgICAgYXdhaXQgdGhpcy5qb2JDYWxsYmFjaygpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgdGhpcy5pc0pvYkV4ZWN1dGluZyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMucGVuZGluZylcclxuICAgICAgYXdhaXQgdGhpcy5sYXVuY2hKb2IoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGludGVyZmFjZSBQYXJzZVF1ZXJ5U3RyaW5nT3B0aW9ucyB7XHJcbiAgdG9Mb3dlcj86IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVF1ZXJ5U3RyaW5nKGxvY2F0aW9uU2VhcmNoOiBzdHJpbmcsIG9wdGlvbnM/OiBQYXJzZVF1ZXJ5U3RyaW5nT3B0aW9ucyk6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0ge1xyXG4gIGNvbnN0IHt0b0xvd2VyfSA9IChvcHRpb25zIHx8wqB7fSkgYXMgUGFyc2VRdWVyeVN0cmluZ09wdGlvbnM7XHJcbiAgY29uc3QgcmVzdWx0ID0ge307XHJcbiAgaWYgKGxvY2F0aW9uU2VhcmNoICYmIGxvY2F0aW9uU2VhcmNoLmxlbmd0aCA+IDEpXHJcbiAgICBsb2NhdGlvblNlYXJjaC5zdWJzdHIoMSlcclxuICAgICAgLnNwbGl0KCcmJylcclxuICAgICAgLm1hcChwYXJ0ID0+IHBhcnQuc3BsaXQoJz0nKS5tYXAocyA9PiBkZWNvZGVVUklDb21wb25lbnQocy50cmltKCkpKSlcclxuICAgICAgLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4gcmVzdWx0W3RvTG93ZXIgPyBrZXkudG9Mb3dlckNhc2UoKSA6IGtleV0gPSB2YWx1ZSk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZnVuY3Rpb24gZW5jb2RlUGFyYW1zKHBhcmFtczoge1trZXk6IHN0cmluZ106c3RyaW5nfSkge1xyXG4gIHJldHVybiBPYmplY3Qua2V5cyhwYXJhbXMpLmZpbHRlcihrZXkgPT4gcGFyYW1zW2tleV0gIT09IHVuZGVmaW5lZCkubWFwKGtleSA9PiBgJHtlbmNvZGVVUklDb21wb25lbnQoa2V5KX09JHtlbmNvZGVVUklDb21wb25lbnQocGFyYW1zW2tleV0pfWApLmpvaW4oJyYnKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlUXVlcnlTdHJpbmcocGFyYW1zOiB7W2tleTogc3RyaW5nXTpzdHJpbmd9KSB7XHJcbiAgcmV0dXJuIFwiP1wiICsgZW5jb2RlUGFyYW1zKHBhcmFtcyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUhhc2hRdWVyeVN0cmluZyhsb2NhdGlvbkhhc2g6IHN0cmluZywgb3B0aW9ucz86IFBhcnNlUXVlcnlTdHJpbmdPcHRpb25zKSB7XHJcbiAgcmV0dXJuIHBhcnNlUXVlcnlTdHJpbmcobG9jYXRpb25IYXNoLCBvcHRpb25zKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlSGFzaFF1ZXJ5U3RyaW5nKHBhcmFtczoge1trZXk6IHN0cmluZ106c3RyaW5nfSkge1xyXG4gIHJldHVybiBcIiNcIiArIGVuY29kZVBhcmFtcyhwYXJhbXMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc3BsaXRVcmxBbmRRdWVyeSAodXJsV2l0aFBvc3NpYmxlUXVlcnk6IHN0cmluZykge1xyXG4gIGNvbnN0IHBRdWVyeSA9IHVybFdpdGhQb3NzaWJsZVF1ZXJ5LmluZGV4T2YoJz8nKTtcclxuICByZXR1cm4gcFF1ZXJ5ID49IDAgP1xyXG4gICAgW3VybFdpdGhQb3NzaWJsZVF1ZXJ5LnN1YnN0cigwLCBwUXVlcnkpLCB1cmxXaXRoUG9zc2libGVRdWVyeS5zdWJzdHIocFF1ZXJ5KV0gOlxyXG4gICAgW3VybFdpdGhQb3NzaWJsZVF1ZXJ5LCBcIlwiXTtcclxufVxyXG4iLCJpbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IFRlcm0sIEFjYWRlbWljWWVhciB9IGZyb20gJy4uL2NvbnRyYWN0cy9rZWQtbW9kZWxzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2Nob29sTW9tZW50IHtcclxuICBhY2FkZW1pY1llYXI6IEFjYWRlbWljWWVhcjtcclxuICB0ZXJtOiBUZXJtO1xyXG4gIHdlZWs/OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRGaXJzdEFuZExhc3RXZWVrT2ZUZXJtKHRlcm06IFRlcm0pIHtcclxuICByZXR1cm4gdGVybSA9PT0gJ0FUJyA/XHJcbiAgICBbMzIsIDUxXSA6XHJcbiAgICBbMSwgMjVdO1xyXG59XHJcblxyXG4vL05vdCB1c2VkIGFueW1vcmVcclxuLy8gZXhwb3J0IGZ1bmN0aW9uIGdldFRlcm1TdGFydEFuZEVuZChub3c6IG1vbWVudC5Nb21lbnQpIDogbW9tZW50Lk1vbWVudFtdIHtcclxuLy8gICAgIHJldHVybiBub3cubW9udGgoKSA+PSA2ID8gLy8gNiA9IEp1bHkgaW4gSlMgRGF0ZXMgYW5kIGluIG1vbWVudCBhcyB3ZWxsIVxyXG4vLyAgICAgW21vbWVudChuZXcgRGF0ZShub3cueWVhcigpLCA3LCAxKSksIG1vbWVudChuZXcgRGF0ZShub3cueWVhcigpLCAxMSwgMzEpKV0gOiAvLyBhdWcxIC0gZGVjMzFcclxuLy8gICAgIFttb21lbnQobmV3IERhdGUobm93LnllYXIoKSwgMCwgMSkpLCBtb21lbnQobmV3IERhdGUobm93LnllYXIoKSwgNiwgMzEpKV07IC8vIGphbjEgLSBqdWx5MzFcclxuLy8gfVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRlcm1TdGFyRW5kRGF0ZShkYXRlOiBEYXRlLCBpc0ZpcnN0VGVybTogYm9vbGVhbik6IG1vbWVudC5Nb21lbnRbXSB7XHJcbiAgdmFyIGFkZFllYXIgPSBkYXRlLmdldE1vbnRoKCkgPj0gNztcclxuICB2YXIgdGVybVllYXIgPSBudWxsO1xyXG5cclxuICBpZiAoYWRkWWVhcikge1xyXG4gICAgdGVybVllYXIgPSBpc0ZpcnN0VGVybSA/IGRhdGUuZ2V0RnVsbFllYXIoKSA6IGRhdGUuZ2V0RnVsbFllYXIoKSArIDE7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRlcm1ZZWFyID0gaXNGaXJzdFRlcm0gPyBkYXRlLmdldEZ1bGxZZWFyKCkgLSAxIDogZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gIH1cclxuXHJcbiAgdmFyIHRlcm1ZZWFyTW9tZW50ID0gbW9tZW50KHRlcm1ZZWFyLnRvU3RyaW5nKCksIFwiWVlZWVwiKTtcclxuXHJcbiAgaWYgKHRlcm1ZZWFyTW9tZW50LndlZWsoKSAhPSAxKSB7XHJcbiAgICB0ZXJtWWVhck1vbWVudCA9IHRlcm1ZZWFyTW9tZW50LmNsb25lKCkuYWRkKDEsICd3ZWVrJyk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gaXNGaXJzdFRlcm0gPyBbbW9tZW50KHRlcm1ZZWFyTW9tZW50LmNsb25lKCkpLndlZWsoMzIpLnN0YXJ0T2YoJ3dlZWsnKSwgbW9tZW50KHRlcm1ZZWFyTW9tZW50LmNsb25lKCkpLndlZWsoNTEpLmVuZE9mKCd3ZWVrJyldIDpcclxuICAgIFttb21lbnQodGVybVllYXJNb21lbnQuY2xvbmUoKSksIG1vbWVudCh0ZXJtWWVhck1vbWVudC5jbG9uZSgpKS53ZWVrKDI1KS5lbmRPZignd2VlaycpXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFNjaG9vbE1vbWVudChtOiBtb21lbnQuTW9tZW50KTogU2Nob29sTW9tZW50IHtcclxuICBjb25zdCB0aGlzWWVhciA9IG0ueWVhcigpO1xyXG4gIGNvbnN0IGlzQXV0dW1uID0gbS5tb250aCgpID49IDY7IC8vIGRldGVybWluZSBcclxuICBjb25zdCBbYXV0dW1uWWVhciwgc3ByaW5nWWVhcl0gPSBpc0F1dHVtbiA/XHJcbiAgICBbdGhpc1llYXIsIHRoaXNZZWFyICsgMV0gOlxyXG4gICAgW3RoaXNZZWFyIC0gMSwgdGhpc1llYXJdO1xyXG4gIGNvbnN0IGFjYWRlbWljWWVhciA9ICcnICsgYXV0dW1uWWVhciArICcvJyArIHNwcmluZ1llYXI7XHJcbiAgY29uc3QgdGVybSA9IGlzQXV0dW1uID8gJ0FUJyA6ICdTVCc7XHJcbiAgY29uc3Qgd2VlayA9IG0ud2VlaygpO1xyXG4gIHJldHVybiB7IGFjYWRlbWljWWVhciwgdGVybSwgd2VlayB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWRkWWVhcihhWWVhcjogQWNhZGVtaWNZZWFyLCBudW1ZZWFyc1RvQWRkOiBudW1iZXIpOiBBY2FkZW1pY1llYXIge1xyXG4gIHJldHVybiBhWWVhci5zcGxpdCgnLycpXHJcbiAgICAubWFwKHllYXJTdHIgPT4gcGFyc2VJbnQoeWVhclN0cikgKyBudW1ZZWFyc1RvQWRkKVxyXG4gICAgLm1hcCh5ZWFyID0+ICcnICsgeWVhcilcclxuICAgIC5qb2luKCcvJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBuZXh0QWNhZGVtaWNZZWFyKGFZZWFyOiBBY2FkZW1pY1llYXIpOiBBY2FkZW1pY1llYXIge1xyXG4gIHJldHVybiBhZGRZZWFyKGFZZWFyLCAxKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHByZXZBY2FkZW1pY1llYXIoYVllYXI6IEFjYWRlbWljWWVhcik6IEFjYWRlbWljWWVhciB7XHJcbiAgcmV0dXJuIGFkZFllYXIoYVllYXIsIC0xKTtcclxufVxyXG4iLCJpbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IFNjaG9vbE1vbWVudCwgZ2V0U2Nob29sTW9tZW50LCBhZGRZZWFyIH0gZnJvbSAnLi9zY2hvb2wtbW9tZW50JztcclxuaW1wb3J0IHsgQWNhZGVtaWNZZWFyLCBUZXJtIH0gZnJvbSAnLi4vY29udHJhY3RzL2tlZC1tb2RlbHMnO1xyXG5pbXBvcnQge0luamVjdGVkSW50bH0gZnJvbSAncmVhY3QtaW50bCc7XHJcblxyXG50eXBlIE1vbWVudCA9IG1vbWVudC5Nb21lbnQ7XHJcblxyXG5mdW5jdGlvbiBpc1NjaG9vbE1vbWVudChvYmo6IERhdGUgfCBTY2hvb2xNb21lbnQpOiBvYmogaXMgU2Nob29sTW9tZW50IHtcclxuICByZXR1cm4gJ2FjYWRlbWljWWVhcicgaW4gb2JqO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU2Nob29sVGVybSB7XHJcbiAgYWNhZGVtaWNZZWFyOiBBY2FkZW1pY1llYXI7XHJcbiAgdGVybTogVGVybTtcclxuXHJcbiAgY29uc3RydWN0b3IoZGF0ZU9yU2Nob29sTW9tZW50OiBEYXRlIHwgU2Nob29sTW9tZW50KSB7XHJcbiAgICBjb25zdCBzY2hvb2xNb21lbnQgPSBpc1NjaG9vbE1vbWVudChkYXRlT3JTY2hvb2xNb21lbnQpID9cclxuICAgICAgZGF0ZU9yU2Nob29sTW9tZW50IDogZ2V0U2Nob29sTW9tZW50KG1vbWVudChkYXRlT3JTY2hvb2xNb21lbnQpKTtcclxuICAgIHRoaXMuYWNhZGVtaWNZZWFyID0gc2Nob29sTW9tZW50LmFjYWRlbWljWWVhcjtcclxuICAgIHRoaXMudGVybSA9IHNjaG9vbE1vbWVudC50ZXJtO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHllYXIoKSB7XHJcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5hY2FkZW1pY1llYXJcclxuICAgICAgICAuc3BsaXQoJy8nKVt0aGlzLnRlcm0gPT09ICdBVCcgPyAwIDogMV0pO1xyXG4gIH1cclxuXHJcbiAgbmV4dFRlcm0oKSB7XHJcbiAgICByZXR1cm4gbmV3IFNjaG9vbFRlcm0odGhpcy50ZXJtID09PSAnQVQnID9cclxuICAgICAge1xyXG4gICAgICAgIHRlcm06ICdTVCcsXHJcbiAgICAgICAgYWNhZGVtaWNZZWFyOiB0aGlzLmFjYWRlbWljWWVhclxyXG4gICAgICB9IDpcclxuICAgICAge1xyXG4gICAgICAgIHRlcm06ICdBVCcsXHJcbiAgICAgICAgYWNhZGVtaWNZZWFyOiBhZGRZZWFyKHRoaXMuYWNhZGVtaWNZZWFyLCAxKVxyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHByZXZUZXJtKCkge1xyXG4gICAgcmV0dXJuIG5ldyBTY2hvb2xUZXJtKHRoaXMudGVybSA9PT0gJ0FUJyA/XHJcbiAgICAgIHtcclxuICAgICAgICB0ZXJtOiAnU1QnLFxyXG4gICAgICAgIGFjYWRlbWljWWVhcjogYWRkWWVhcih0aGlzLmFjYWRlbWljWWVhciwgLTEpXHJcbiAgICAgIH0gOlxyXG4gICAgICB7XHJcbiAgICAgICAgdGVybTogJ0FUJyxcclxuICAgICAgICBhY2FkZW1pY1llYXI6IHRoaXMuYWNhZGVtaWNZZWFyXHJcbiAgICAgIH0pO1xyXG4gICAgXHJcbiAgfVxyXG5cclxuICB0b0xvY2FsZVN0cmluZyhpbnRsOiBJbmplY3RlZEludGwsIHNob3J0WWVhcj86IGJvb2xlYW4pIHtcclxuICAgIGxldCB5ZWFyID0gdGhpcy50ZXJtID09PSAnQVQnID9cclxuICAgICAgdGhpcy5hY2FkZW1pY1llYXIuc3BsaXQoJy8nKVswXTpcclxuICAgICAgdGhpcy5hY2FkZW1pY1llYXIuc3BsaXQoJy8nKVsxXTtcclxuXHJcbiAgICBpZiAoc2hvcnRZZWFyKVxyXG4gICAgICB5ZWFyID0geWVhci5zdWJzdHIoMik7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMudGVybSA9PT0gJ0FUJyA/IGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J3Rlcm1wbGFubmVyLnNlY29uZFRlcm0nLCBkZWZhdWx0TWVzc2FnZTonSFQge3llYXJ9J30sIHt5ZWFyOiB5ZWFyfSkgOiBcclxuICAgIGludGwuZm9ybWF0TWVzc2FnZSh7aWQ6J3Rlcm1wbGFubmVyLmZpcnN0VGVybScsIGRlZmF1bHRNZXNzYWdlOidWVCB7eWVhcn0nfSwge3llYXI6IHllYXJ9KTtcclxuICB9XHJcbn1cclxuIiwiXHJcbmV4cG9ydCBmdW5jdGlvbiBjYXBpdGFsaXplRmlyc3QgKHN0cikge1xyXG4gICAgZm9yIChsZXQgaT0wLCBsPXN0ci5sZW5ndGg7IGk8bDsgKytpKSB7XHJcbiAgICAgICAgaWYgKHN0ci5jaGFyQ29kZUF0KGkpIDwgMHgyMDAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHIuc3Vic3RyKDAsIGkpICsgc3RyW2ldLnRvTG9jYWxlVXBwZXJDYXNlKCkgKyBzdHIuc3Vic3RyKGkgKyAxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3RyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKG9iaiwgZXh0ZW5zaW9uKSB7XHJcbiAgICBpZiAodHlwZW9mIGV4dGVuc2lvbiAhPT0gJ29iamVjdCcpIHJldHVybiBvYmo7XHJcbiAgICBPYmplY3Qua2V5cyhleHRlbnNpb24pLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICBvYmpba2V5XSA9IGV4dGVuc2lvbltrZXldO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gb2JqO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2xvbmU8VCxFPiAob2JqIDogVCwgZXh0ZW5zaW9uPzogRSkge1xyXG4gICAgbGV0IGNsb25lID0ge307XHJcbiAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvYmopLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoY2xvbmUsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkpO1xyXG4gICAgfSk7XHJcbiAgICBpZiAoZXh0ZW5zaW9uKSBleHRlbmQoY2xvbmUsIGV4dGVuc2lvbik7XHJcbiAgICByZXR1cm4gY2xvbmUgYXMgKFQgJiBFKTtcclxufVxyXG5cclxuY29uc3QgY29uY2F0ID0gW10uY29uY2F0O1xyXG5leHBvcnQgZnVuY3Rpb24gZmxhdHRlbjxUPiAoYSA6IChUIHwgVFtdKVtdKSB7XHJcbiAgICByZXR1cm4gY29uY2F0LmFwcGx5KFtdLCBhKSBhcyBUW107XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlUHJvcDxUPihwcm9wOmtleW9mIFQpIHtcclxuICAgIHJldHVybiAoYTogVCxiOiBUKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYVByb3AgPSBhW3Byb3BdLCBiUHJvcCA9IGJbcHJvcF07XHJcbiAgICAgICAgcmV0dXJuIGFQcm9wID4gYlByb3AgPyAxIDogYVByb3AgPCBiUHJvcCA/IC0xIDogMDtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhcmVQcm9wcyhcclxuICAgIHByb3BzOiBzdHJpbmcgfCBzdHJpbmdbXSxcclxuICAgIGxvY2FsZXM/OiBzdHJpbmcgfCBzdHJpbmdbXSxcclxuICAgIG9wdGlvbnM/OiBJbnRsLkNvbGxhdG9yT3B0aW9ucyk6IChhOiBhbnksIGI6IGFueSkgPT4gbnVtYmVyXHJcbntcclxuICAgIHByb3BzID0gQXJyYXkuaXNBcnJheShwcm9wcykgPyBwcm9wcyA6IFtwcm9wc107XHJcblxyXG4gICAgY29uc3QgbG9jYWxlQ29tcGFyZSA9IChhLGIpID0+XHJcbiAgICAgICAgdHlwZW9mIGEgPT09ICdzdHJpbmcnID9cclxuICAgICAgICAgICAgYS5sb2NhbGVDb21wYXJlKGIsIGxvY2FsZXMsIG9wdGlvbnMpIDpcclxuICAgICAgICAgICAgYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IDA7XHJcblxyXG4gICAgZnVuY3Rpb24gY21wUGFydCAoYSxiLGZpcnN0UGFydDogc3RyaW5nLHJlc3Q6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgY29uc3QgZmlyc3RBID0gYVtmaXJzdFBhcnRdO1xyXG4gICAgICAgIGNvbnN0IGZpcnN0QiA9IGJbZmlyc3RQYXJ0XTtcclxuICAgICAgICBpZiAoZmlyc3RBID09PSBmaXJzdEIpIHJldHVybiAwO1xyXG4gICAgICAgIGlmIChmaXJzdEEgPT0gbnVsbCkgcmV0dXJuIC0xO1xyXG4gICAgICAgIGlmIChmaXJzdEIgPT0gbnVsbCkgcmV0dXJuIDE7XHJcbiAgICAgICAgcmV0dXJuIHJlc3QubGVuZ3RoID09PSAwID9cclxuICAgICAgICAgICAgbG9jYWxlQ29tcGFyZShmaXJzdEEsIGZpcnN0QikgOlxyXG4gICAgICAgICAgICBjbXBQYXJ0KGZpcnN0QSwgZmlyc3RCLCByZXN0WzBdLCByZXN0LnNsaWNlKDEpKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcHJvcHNcclxuICAgICAgICAubWFwKHByb3AgPT4gcHJvcC5zcGxpdCgnLicpKVxyXG4gICAgICAgIC5tYXAoKFtmaXJzdFBhcnQsIC4uLnJlc3RdKSA9PiAoYSxiKSA9PiBjbXBQYXJ0KGEsYiwgZmlyc3RQYXJ0LCByZXN0KSlcclxuICAgICAgICAucmVkdWNlKChjbXAxLCBjbXAyKSA9PlxyXG4gICAgICAgICAgICAoYSxiKSA9PiBjbXAxKGEsYikgfHwgY21wMihhLGIpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEwodGV4dCwgLi4uYXJncykge1xyXG4gICAgbGV0IGZpcnN0ID0gdGV4dFswXTtcclxuICAgIHJldHVybiBidWlsZE1lc3NhZ2UodGV4dCwgYXJncyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJ1aWxkTWVzc2FnZSAodGV4dCwgYXJncykge1xyXG4gICAgbGV0IHJ2ID0gdGV4dFswXTtcclxuICAgIGZvciAobGV0IGk9MSwgbD10ZXh0Lmxlbmd0aDsgaTxsOyArK2kpIHtcclxuICAgICAgICBydiArPSBhcmdzW2ktMV0gKyB0ZXh0W2ldO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJ2O1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVEM8VD4ge1xyXG4gICAgY29uc3RydWN0b3IodGVtcGxhdGU6IFQpIHtcclxuICAgICAgICBleHRlbmQodGhpcywgdGVtcGxhdGUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGF0ZVRpbWVSZXZpdmVyIChrZXksIHZhbHVlKSB7XHJcbiAgICB2YXIgYTtcclxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgYSA9IC9cXC9EYXRlXFwoKFxcZCopXFwpXFwvLy5leGVjKHZhbHVlKTtcclxuICAgICAgICBpZiAoYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoK2FbMV0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB2YWx1ZTtcclxufVxyXG5cclxuLy9sZXQgaW5mb1NlcmlhbCA9IDE7XHJcbmV4cG9ydCBmdW5jdGlvbiBzaG93SW5mbyAobXNnKSB7XHJcbiAgICB2YXIgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2luZm8nLCB7ICdkZXRhaWwnOiBtc2cgfSk7XHJcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzaG93RXJyb3IgKGVyck1zZzogc3RyaW5nIHwgRXJyb3IpIHtcclxuICAgIGNvbnN0IG1zZyA9IHR5cGVvZiBlcnJNc2cgPT09ICdzdHJpbmcnID8gZXJyTXNnIDogZXJyTXNnLm1lc3NhZ2U7XHJcbiAgICB2YXIgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2N1c3RvbWVycm9yJywgeyAnZGV0YWlsJzogbXNnIH0pO1xyXG4gICAgY29uc29sZS5lcnJvcihlcnJNc2cpO1xyXG4gICAgd2luZG93LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWF4TGVuZ3RoKHN0cjogc3RyaW5nLCBtYXhMZW46IG51bWJlcikge1xyXG4gICAgcmV0dXJuIHN0ci5sZW5ndGggPiBtYXhMZW4gP1xyXG4gICAgICAgIHN0ci5zdWJzdHIoMCwgbWF4TGVuIC0gMykgKyBcIi4uLlwiIDpcclxuICAgICAgICBzdHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhcnJheVRvTG9va3VwPFQ+KGE6IFRbXSwga2V5QWNjZXNzb3I6IChpdGVtOiBUKSA9PiBzdHJpbmcgfCBudW1iZXIpIHtcclxuICAgIGNvbnN0IHJlc3VsdCA6IHtba2V5OiBzdHJpbmddIDogVFtdfSA9IHt9O1xyXG4gICAgZm9yIChsZXQgaT0wLCBsPWEubGVuZ3RoOyBpPGw7ICsraSkge1xyXG4gICAgICAgIGNvbnN0IGl0ZW0gPSBhW2ldO1xyXG4gICAgICAgIGNvbnN0IGtleSA9IGtleUFjY2Vzc29yKGl0ZW0pO1xyXG4gICAgICAgIGxldCBhcnJheSA9IHJlc3VsdFtrZXldO1xyXG4gICAgICAgIGlmIChhcnJheSkgYXJyYXkucHVzaChpdGVtKTtcclxuICAgICAgICBlbHNlIHJlc3VsdFtrZXldID0gW2l0ZW1dO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFycmF5VG9NYXA8VD4oYTogVFtdLCBrZXlBY2Nlc3NvcjogKGl0ZW06IFQpID0+IHN0cmluZyB8IG51bWJlcikge1xyXG4gICAgY29uc3QgcmVzdWx0IDoge1trZXk6IHN0cmluZ10gOiBUfSA9IHt9O1xyXG4gICAgZm9yIChsZXQgaT0wLCBsPWEubGVuZ3RoOyBpPGw7ICsraSkge1xyXG4gICAgICAgIGNvbnN0IGl0ZW0gPSBhW2ldO1xyXG4gICAgICAgIGNvbnN0IGtleSA9IGtleUFjY2Vzc29yKGl0ZW0pO1xyXG4gICAgICAgIHJlc3VsdFtrZXldID0gaXRlbTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVycnlQaWNrUHJvcHM8VD4gKG9iajogVCwgcHJvcHNUb1BpY2s6IHN0cmluZ1tdKTogUGFydGlhbDxUPiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcclxuICAgIGZvciAoY29uc3QgcGFyYW0gb2YgcHJvcHNUb1BpY2spIHtcclxuICAgICAgaWYgKHBhcmFtIGluIG9iaikgcmVzdWx0W3BhcmFtXSA9IG9ialtwYXJhbV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0IGFzIFBhcnRpYWw8VD47XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkaXN0aW5jdDxUPiAoYTogVFtdLCBrZXlBY2Nlc3Nvcj86IChpdGVtOiBUKSA9PiBhbnkpIHtcclxuICAgIGNvbnN0IG1hcCA9IGFycmF5VG9NYXAoYSwga2V5QWNjZXNzb3IgfHwgKHggPT4geCkpO1xyXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG1hcCkubWFwKGtleSA9PiBtYXBba2V5XSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzaGFsbG93RXF1YWxzKGE6IGFueSwgYjogYW55KSB7XHJcbiAgICBpZiAoYSA9PT0gYikgcmV0dXJuIHRydWU7XHJcbiAgICBpZiAoIWEgfHwgIWIpIHJldHVybiBmYWxzZTtcclxuICAgIGlmICh0eXBlb2YgYSAhPT0gJ29iamVjdCcgfHwgdHlwZW9mIGIgIT09ICdvYmplY3QnKSByZXR1cm4gZmFsc2U7XHJcbiAgICBjb25zdCBrZXlzQSA9IE9iamVjdC5rZXlzKGEpO1xyXG4gICAgY29uc3Qga2V5c0IgPSBPYmplY3Qua2V5cyhiKTtcclxuICAgIGlmIChrZXlzQS5sZW5ndGggIT09IGtleXNCLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgZm9yIChsZXQgaT0wLCBsPWtleXNBLmxlbmd0aDsgaTxsOyArK2kpIHtcclxuICAgICAgICBjb25zdCBrZXkgPSBrZXlzQVtpXTtcclxuICAgICAgICBpZiAoa2V5c0JbaV0gIT09IGtleSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGlmIChhW2tleV0gIT09IGJba2V5XSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuIiwiaW1wb3J0IG1vbWVudCwgeyBNb21lbnQgfSBmcm9tIFwibW9tZW50XCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gS0VEV2VlayAoeWVhcjogbnVtYmVyLCB3ZWVrOiBudW1iZXIpIHtcclxuICBjb25zdCBtID0gbW9tZW50KG5ldyBEYXRlKHllYXIsIDEsIDEpKS53ZWVrKHdlZWspO1xyXG4gIGNvbnN0IHJlcyA9IHtcclxuICAgIHllYXIsXHJcbiAgICB3ZWVrLFxyXG4gICAgbm90QmVmb3JlOiBtLmNsb25lKCkuc3RhcnRPZignd2VlaycpLmFkZCgtMiwgJ2RheXMnKS50b0RhdGUoKS5nZXRUaW1lKCksXHJcbiAgICBub3RBZnRlcjogbS5jbG9uZSgpLnN0YXJ0T2YoJ3dlZWsnKS5hZGQoNSwgJ2RheXMnKS50b0RhdGUoKS5nZXRUaW1lKClcclxuICB9O1xyXG4gIHJldHVybiByZXM7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXROZXh0V2Vla0RhdGUoZGF0ZTogTW9tZW50KTogeyBhZGp1c3RlZDogYm9vbGVhbiwgbmV4dERhdGU6IERhdGUgfXtcclxuICB2YXIgbmV4dERhdGUgPSBtb21lbnQoZGF0ZSkuYWRkKDEsICd3ZWVrJyk7XHJcbiAgLy9TZXQgdGhlIDAxLjAxIG9mIHRoZSBuZXh0IHllYXIgaW4gY2FzZSB0aGUgbmV4dCB3ZWVrIGlzIGluIHRoZSBzYW1lIHllYXIgXHJcbiAgLy9hbmQgdGhlIHByZXZpb3VzIHdlZWsgaXMgdGhlIGxhc3Qgd2VlayBvZiB0aGUgeWVhclxyXG4gIGlmKGRhdGUud2VlaygpID09PSBkYXRlLndlZWtzSW5ZZWFyKCkgJiYgbmV4dERhdGUueWVhcigpID09PSBkYXRlLnllYXIoKSl7XHJcbiAgICByZXR1cm4ge2FkanVzdGVkOiB0cnVlLCBuZXh0RGF0ZTogbW9tZW50KGAke2RhdGUueWVhcigpICsgMX0tMDEtMDFgKS50b0RhdGUoKX07XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge2FkanVzdGVkOiBmYWxzZSwgbmV4dERhdGU6IG5leHREYXRlLnRvRGF0ZSgpfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFByZXZXZWVrRGF0ZShkYXRlOiBNb21lbnQpOiB7IGFkanVzdGVkOiBib29sZWFuLCBuZXh0RGF0ZTogRGF0ZSB9e1xyXG4gIHZhciBwcmV2RGF0ZSA9IG1vbWVudChkYXRlKS5hZGQoLTEsICd3ZWVrJyk7XHJcbiAgLy9TZXQgdGhlIDAxLjAxIG9mIHRoZSBjdXJyZW50IHllYXIgaW4gY2FzZSB0aGUgcHJldiB3ZWVrIGlzIGluIHRoZSBwcmV2aW91cyB5ZWFyXHJcbiAgaWYoZGF0ZS53ZWVrKCkgPT09IDIgJiYgcHJldkRhdGUueWVhcigpICE9PSBkYXRlLnllYXIoKSl7XHJcbiAgICByZXR1cm4ge2FkanVzdGVkOiB0cnVlLCBuZXh0RGF0ZTogbW9tZW50KGAke2RhdGUueWVhcigpfS0wMS0wMWApLnRvRGF0ZSgpfTtcclxuICB9XHJcblxyXG4gIHJldHVybiB7YWRqdXN0ZWQ6IGZhbHNlLCBuZXh0RGF0ZTogcHJldkRhdGUudG9EYXRlKCl9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWRqdXN0ZWRXZWVrKG06IE1vbWVudCkge1xyXG4gIGNvbnN0IGNsb25lID0gbS5jbG9uZSgpO1xyXG4gIHJldHVybiBtLndlZWtkYXkoKSA+PSA1ID8gLy8gTMO2cmRhZyAwMDowMCAvIFPDtm5kYWcgMDA6MDA/XHJcbiAgICAgIG0ud2VlaygpICsgMSA6IC8vIFRpbGxow7ZyIG7DpHN0YSB2ZWNrYVxyXG4gICAgICBtLndlZWsoKTtcclxufVxyXG5cclxuLypleHBvcnQgZnVuY3Rpb24gZ2V0V2Vla0xpbWl0cyAobTogTW9tZW50KSB7XHJcbiAgY29uc3QgY2xvbmVkU3dlZGlzaCA9IG0uY2xvbmUoKS5sb2NhbGUoJ3N2Jyk7XHJcbiAgY29uc3QgbGltaXRzID0ge1xyXG4gICAgbm90QmVmb3JlOiBjbG9uZWRTd2VkaXNoLnN0YXJ0T2YoJ3dlZWsnKS5hZGQoLTIsICdkYXlzJyksXHJcbiAgICBub3RBZnRlcjogY2xvbmVkU3dlZGlzaC5zdGFydE9mKCd3ZWVrJykuYWRkKDUsICdkYXlzJylcclxuICB9O1xyXG59XHJcbiovXHJcbiIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyIsIm1vZHVsZS5leHBvcnRzID0galF1ZXJ5OyIsIm1vZHVsZS5leHBvcnRzID0gUmVhY3Q7IiwibW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTTsiXSwic291cmNlUm9vdCI6IiJ9